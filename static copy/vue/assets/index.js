var _4=Object.defineProperty;var V4=(t,e,n)=>e in t?_4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var zn=(t,e,n)=>(V4(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var rn=1e-6,gr=typeof Float32Array<"u"?Float32Array:Array,D4=Math.PI/180;function L4(t){return t*D4}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Hk(){var t=new gr(9);return gr!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function Yh(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function N4(t){var e=new gr(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function B4(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Kk(t,e,n,r,a,s,o,i,l){var c=new gr(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=a,c[5]=s,c[6]=o,c[7]=i,c[8]=l,c}function F4(t,e,n,r,a,s,o,i,l,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=s,t[5]=o,t[6]=i,t[7]=l,t[8]=c,t}function Oa(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function F1(t,e){if(t===e){var n=e[1],r=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Qf(t,e){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],i=e[5],l=e[6],c=e[7],u=e[8],f=u*o-i*c,d=-u*s+i*l,p=c*s-o*l,h=n*f+r*d+a*p;return h?(h=1/h,t[0]=f*h,t[1]=(-u*r+a*c)*h,t[2]=(i*r-a*o)*h,t[3]=d*h,t[4]=(u*n-a*l)*h,t[5]=(-i*n+a*s)*h,t[6]=p*h,t[7]=(-c*n+r*l)*h,t[8]=(o*n-r*s)*h,t):null}function $4(t,e){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],i=e[5],l=e[6],c=e[7],u=e[8];return t[0]=o*u-i*c,t[1]=a*c-r*u,t[2]=r*i-a*o,t[3]=i*l-s*u,t[4]=n*u-a*l,t[5]=a*s-n*i,t[6]=s*c-o*l,t[7]=r*l-n*c,t[8]=n*o-r*s,t}function U4(t){var e=t[0],n=t[1],r=t[2],a=t[3],s=t[4],o=t[5],i=t[6],l=t[7],c=t[8];return e*(c*s-o*l)+n*(-c*a+o*i)+r*(l*a-s*i)}function Dc(t,e,n){var r=e[0],a=e[1],s=e[2],o=e[3],i=e[4],l=e[5],c=e[6],u=e[7],f=e[8],d=n[0],p=n[1],h=n[2],g=n[3],y=n[4],m=n[5],b=n[6],C=n[7],S=n[8];return t[0]=d*r+p*o+h*c,t[1]=d*a+p*i+h*u,t[2]=d*s+p*l+h*f,t[3]=g*r+y*o+m*c,t[4]=g*a+y*i+m*u,t[5]=g*s+y*l+m*f,t[6]=b*r+C*o+S*c,t[7]=b*a+C*i+S*u,t[8]=b*s+C*l+S*f,t}function A4(t,e,n){var r=e[0],a=e[1],s=e[2],o=e[3],i=e[4],l=e[5],c=e[6],u=e[7],f=e[8],d=n[0],p=n[1];return t[0]=r,t[1]=a,t[2]=s,t[3]=o,t[4]=i,t[5]=l,t[6]=d*r+p*o+c,t[7]=d*a+p*i+u,t[8]=d*s+p*l+f,t}function W4(t,e,n){var r=e[0],a=e[1],s=e[2],o=e[3],i=e[4],l=e[5],c=e[6],u=e[7],f=e[8],d=Math.sin(n),p=Math.cos(n);return t[0]=p*r+d*o,t[1]=p*a+d*i,t[2]=p*s+d*l,t[3]=p*o-d*r,t[4]=p*i-d*a,t[5]=p*l-d*s,t[6]=c,t[7]=u,t[8]=f,t}function I4(t,e,n){var r=n[0],a=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function P4(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function G4(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function z4(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function H4(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function K4(t,e){var n=e[0],r=e[1],a=e[2],s=e[3],o=n+n,i=r+r,l=a+a,c=n*o,u=r*o,f=r*i,d=a*o,p=a*i,h=a*l,g=s*o,y=s*i,m=s*l;return t[0]=1-f-h,t[3]=u-m,t[6]=d+y,t[1]=u+m,t[4]=1-c-h,t[7]=p-g,t[2]=d-y,t[5]=p+g,t[8]=1-c-f,t}function j4(t,e){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],i=e[5],l=e[6],c=e[7],u=e[8],f=e[9],d=e[10],p=e[11],h=e[12],g=e[13],y=e[14],m=e[15],b=n*i-r*o,C=n*l-a*o,S=n*c-s*o,T=r*l-a*i,w=r*c-s*i,x=a*c-s*l,E=u*g-f*h,O=u*y-d*h,k=u*m-p*h,M=f*y-d*g,D=f*m-p*g,I=d*m-p*y,B=b*I-C*D+S*M+T*k-w*O+x*E;return B?(B=1/B,t[0]=(i*I-l*D+c*M)*B,t[1]=(l*k-o*I-c*O)*B,t[2]=(o*D-i*k+c*E)*B,t[3]=(a*D-r*I-s*M)*B,t[4]=(n*I-a*k+s*O)*B,t[5]=(r*k-n*D-s*E)*B,t[6]=(g*x-y*w+m*T)*B,t[7]=(y*S-h*x-m*C)*B,t[8]=(h*w-g*S+m*b)*B,t):null}function Y4(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function q4(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function X4(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Z4(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function jk(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function J4(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function Q4(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function eU(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function tU(t,e){var n=t[0],r=t[1],a=t[2],s=t[3],o=t[4],i=t[5],l=t[6],c=t[7],u=t[8],f=e[0],d=e[1],p=e[2],h=e[3],g=e[4],y=e[5],m=e[6],b=e[7],C=e[8];return Math.abs(n-f)<=rn*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=rn*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(a-p)<=rn*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(s-h)<=rn*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(o-g)<=rn*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(i-y)<=rn*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(l-m)<=rn*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(c-b)<=rn*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(u-C)<=rn*Math.max(1,Math.abs(u),Math.abs(C))}var nU=Dc,rU=jk;const aU=Object.freeze(Object.defineProperty({__proto__:null,add:Z4,adjoint:$4,clone:N4,copy:B4,create:Hk,determinant:U4,equals:tU,exactEquals:eU,frob:X4,fromMat2d:H4,fromMat4:Yh,fromQuat:K4,fromRotation:G4,fromScaling:z4,fromTranslation:P4,fromValues:Kk,identity:Oa,invert:Qf,mul:nU,multiply:Dc,multiplyScalar:J4,multiplyScalarAndAdd:Q4,normalFromMat4:j4,projection:Y4,rotate:W4,scale:I4,set:F4,str:q4,sub:rU,subtract:jk,translate:A4,transpose:F1},Symbol.toStringTag,{value:"Module"}));function $1(){var t=new gr(16);return gr!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function sU(t){var e=new gr(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Un(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function oU(t,e,n,r,a,s,o,i,l,c,u,f,d,p,h,g){var y=new gr(16);return y[0]=t,y[1]=e,y[2]=n,y[3]=r,y[4]=a,y[5]=s,y[6]=o,y[7]=i,y[8]=l,y[9]=c,y[10]=u,y[11]=f,y[12]=d,y[13]=p,y[14]=h,y[15]=g,y}function iU(t,e,n,r,a,s,o,i,l,c,u,f,d,p,h,g,y){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=s,t[5]=o,t[6]=i,t[7]=l,t[8]=c,t[9]=u,t[10]=f,t[11]=d,t[12]=p,t[13]=h,t[14]=g,t[15]=y,t}function ct(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function $t(t,e){if(t===e){var n=e[1],r=e[2],a=e[3],s=e[6],o=e[7],i=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=a,t[13]=o,t[14]=i}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function An(t,e){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],i=e[5],l=e[6],c=e[7],u=e[8],f=e[9],d=e[10],p=e[11],h=e[12],g=e[13],y=e[14],m=e[15],b=n*i-r*o,C=n*l-a*o,S=n*c-s*o,T=r*l-a*i,w=r*c-s*i,x=a*c-s*l,E=u*g-f*h,O=u*y-d*h,k=u*m-p*h,M=f*y-d*g,D=f*m-p*g,I=d*m-p*y,B=b*I-C*D+S*M+T*k-w*O+x*E;return B?(B=1/B,t[0]=(i*I-l*D+c*M)*B,t[1]=(a*D-r*I-s*M)*B,t[2]=(g*x-y*w+m*T)*B,t[3]=(d*w-f*x-p*T)*B,t[4]=(l*k-o*I-c*O)*B,t[5]=(n*I-a*k+s*O)*B,t[6]=(y*S-h*x-m*C)*B,t[7]=(u*x-d*S+p*C)*B,t[8]=(o*D-i*k+c*E)*B,t[9]=(r*k-n*D-s*E)*B,t[10]=(h*w-g*S+m*b)*B,t[11]=(f*S-u*w-p*b)*B,t[12]=(i*O-o*M-l*E)*B,t[13]=(n*M-r*O+a*E)*B,t[14]=(g*C-h*T-y*b)*B,t[15]=(u*T-f*C+d*b)*B,t):null}function lU(t,e){var n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],i=e[5],l=e[6],c=e[7],u=e[8],f=e[9],d=e[10],p=e[11],h=e[12],g=e[13],y=e[14],m=e[15];return t[0]=i*(d*m-p*y)-f*(l*m-c*y)+g*(l*p-c*d),t[1]=-(r*(d*m-p*y)-f*(a*m-s*y)+g*(a*p-s*d)),t[2]=r*(l*m-c*y)-i*(a*m-s*y)+g*(a*c-s*l),t[3]=-(r*(l*p-c*d)-i*(a*p-s*d)+f*(a*c-s*l)),t[4]=-(o*(d*m-p*y)-u*(l*m-c*y)+h*(l*p-c*d)),t[5]=n*(d*m-p*y)-u*(a*m-s*y)+h*(a*p-s*d),t[6]=-(n*(l*m-c*y)-o*(a*m-s*y)+h*(a*c-s*l)),t[7]=n*(l*p-c*d)-o*(a*p-s*d)+u*(a*c-s*l),t[8]=o*(f*m-p*g)-u*(i*m-c*g)+h*(i*p-c*f),t[9]=-(n*(f*m-p*g)-u*(r*m-s*g)+h*(r*p-s*f)),t[10]=n*(i*m-c*g)-o*(r*m-s*g)+h*(r*c-s*i),t[11]=-(n*(i*p-c*f)-o*(r*p-s*f)+u*(r*c-s*i)),t[12]=-(o*(f*y-d*g)-u*(i*y-l*g)+h*(i*d-l*f)),t[13]=n*(f*y-d*g)-u*(r*y-a*g)+h*(r*d-a*f),t[14]=-(n*(i*y-l*g)-o*(r*y-a*g)+h*(r*l-a*i)),t[15]=n*(i*d-l*f)-o*(r*d-a*f)+u*(r*l-a*i),t}function cU(t){var e=t[0],n=t[1],r=t[2],a=t[3],s=t[4],o=t[5],i=t[6],l=t[7],c=t[8],u=t[9],f=t[10],d=t[11],p=t[12],h=t[13],g=t[14],y=t[15],m=e*o-n*s,b=e*i-r*s,C=e*l-a*s,S=n*i-r*o,T=n*l-a*o,w=r*l-a*i,x=c*h-u*p,E=c*g-f*p,O=c*y-d*p,k=u*g-f*h,M=u*y-d*h,D=f*y-d*g;return m*D-b*M+C*k+S*O-T*E+w*x}function Ut(t,e,n){var r=e[0],a=e[1],s=e[2],o=e[3],i=e[4],l=e[5],c=e[6],u=e[7],f=e[8],d=e[9],p=e[10],h=e[11],g=e[12],y=e[13],m=e[14],b=e[15],C=n[0],S=n[1],T=n[2],w=n[3];return t[0]=C*r+S*i+T*f+w*g,t[1]=C*a+S*l+T*d+w*y,t[2]=C*s+S*c+T*p+w*m,t[3]=C*o+S*u+T*h+w*b,C=n[4],S=n[5],T=n[6],w=n[7],t[4]=C*r+S*i+T*f+w*g,t[5]=C*a+S*l+T*d+w*y,t[6]=C*s+S*c+T*p+w*m,t[7]=C*o+S*u+T*h+w*b,C=n[8],S=n[9],T=n[10],w=n[11],t[8]=C*r+S*i+T*f+w*g,t[9]=C*a+S*l+T*d+w*y,t[10]=C*s+S*c+T*p+w*m,t[11]=C*o+S*u+T*h+w*b,C=n[12],S=n[13],T=n[14],w=n[15],t[12]=C*r+S*i+T*f+w*g,t[13]=C*a+S*l+T*d+w*y,t[14]=C*s+S*c+T*p+w*m,t[15]=C*o+S*u+T*h+w*b,t}function Rn(t,e,n){var r=n[0],a=n[1],s=n[2],o,i,l,c,u,f,d,p,h,g,y,m;return e===t?(t[12]=e[0]*r+e[4]*a+e[8]*s+e[12],t[13]=e[1]*r+e[5]*a+e[9]*s+e[13],t[14]=e[2]*r+e[6]*a+e[10]*s+e[14],t[15]=e[3]*r+e[7]*a+e[11]*s+e[15]):(o=e[0],i=e[1],l=e[2],c=e[3],u=e[4],f=e[5],d=e[6],p=e[7],h=e[8],g=e[9],y=e[10],m=e[11],t[0]=o,t[1]=i,t[2]=l,t[3]=c,t[4]=u,t[5]=f,t[6]=d,t[7]=p,t[8]=h,t[9]=g,t[10]=y,t[11]=m,t[12]=o*r+u*a+h*s+e[12],t[13]=i*r+f*a+g*s+e[13],t[14]=l*r+d*a+y*s+e[14],t[15]=c*r+p*a+m*s+e[15]),t}function so(t,e,n){var r=n[0],a=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ia(t,e,n,r){var a=r[0],s=r[1],o=r[2],i=Math.hypot(a,s,o),l,c,u,f,d,p,h,g,y,m,b,C,S,T,w,x,E,O,k,M,D,I,B,F;return i<rn?null:(i=1/i,a*=i,s*=i,o*=i,l=Math.sin(n),c=Math.cos(n),u=1-c,f=e[0],d=e[1],p=e[2],h=e[3],g=e[4],y=e[5],m=e[6],b=e[7],C=e[8],S=e[9],T=e[10],w=e[11],x=a*a*u+c,E=s*a*u+o*l,O=o*a*u-s*l,k=a*s*u-o*l,M=s*s*u+c,D=o*s*u+a*l,I=a*o*u+s*l,B=s*o*u-a*l,F=o*o*u+c,t[0]=f*x+g*E+C*O,t[1]=d*x+y*E+S*O,t[2]=p*x+m*E+T*O,t[3]=h*x+b*E+w*O,t[4]=f*k+g*M+C*D,t[5]=d*k+y*M+S*D,t[6]=p*k+m*M+T*D,t[7]=h*k+b*M+w*D,t[8]=f*I+g*B+C*F,t[9]=d*I+y*B+S*F,t[10]=p*I+m*B+T*F,t[11]=h*I+b*B+w*F,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function U1(t,e,n){var r=Math.sin(n),a=Math.cos(n),s=e[4],o=e[5],i=e[6],l=e[7],c=e[8],u=e[9],f=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*a+c*r,t[5]=o*a+u*r,t[6]=i*a+f*r,t[7]=l*a+d*r,t[8]=c*a-s*r,t[9]=u*a-o*r,t[10]=f*a-i*r,t[11]=d*a-l*r,t}function A1(t,e,n){var r=Math.sin(n),a=Math.cos(n),s=e[0],o=e[1],i=e[2],l=e[3],c=e[8],u=e[9],f=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*a-c*r,t[1]=o*a-u*r,t[2]=i*a-f*r,t[3]=l*a-d*r,t[8]=s*r+c*a,t[9]=o*r+u*a,t[10]=i*r+f*a,t[11]=l*r+d*a,t}function W1(t,e,n){var r=Math.sin(n),a=Math.cos(n),s=e[0],o=e[1],i=e[2],l=e[3],c=e[4],u=e[5],f=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*a+c*r,t[1]=o*a+u*r,t[2]=i*a+f*r,t[3]=l*a+d*r,t[4]=c*a-s*r,t[5]=u*a-o*r,t[6]=f*a-i*r,t[7]=d*a-l*r,t}function I1(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function P1(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Yk(t,e,n){var r=n[0],a=n[1],s=n[2],o=Math.hypot(r,a,s),i,l,c;return o<rn?null:(o=1/o,r*=o,a*=o,s*=o,i=Math.sin(e),l=Math.cos(e),c=1-l,t[0]=r*r*c+l,t[1]=a*r*c+s*i,t[2]=s*r*c-a*i,t[3]=0,t[4]=r*a*c-s*i,t[5]=a*a*c+l,t[6]=s*a*c+r*i,t[7]=0,t[8]=r*s*c+a*i,t[9]=a*s*c-r*i,t[10]=s*s*c+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function uU(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function fU(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function dU(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function qk(t,e,n){var r=e[0],a=e[1],s=e[2],o=e[3],i=r+r,l=a+a,c=s+s,u=r*i,f=r*l,d=r*c,p=a*l,h=a*c,g=s*c,y=o*i,m=o*l,b=o*c;return t[0]=1-(p+g),t[1]=f+b,t[2]=d-m,t[3]=0,t[4]=f-b,t[5]=1-(u+g),t[6]=h+y,t[7]=0,t[8]=d+m,t[9]=h-y,t[10]=1-(u+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function pU(t,e){var n=new gr(3),r=-e[0],a=-e[1],s=-e[2],o=e[3],i=e[4],l=e[5],c=e[6],u=e[7],f=r*r+a*a+s*s+o*o;return f>0?(n[0]=(i*o+u*r+l*s-c*a)*2/f,n[1]=(l*o+u*a+c*r-i*s)*2/f,n[2]=(c*o+u*s+i*a-l*r)*2/f):(n[0]=(i*o+u*r+l*s-c*a)*2,n[1]=(l*o+u*a+c*r-i*s)*2,n[2]=(c*o+u*s+i*a-l*r)*2),qk(t,e,n),t}function gU(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Xk(t,e){var n=e[0],r=e[1],a=e[2],s=e[4],o=e[5],i=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.hypot(n,r,a),t[1]=Math.hypot(s,o,i),t[2]=Math.hypot(l,c,u),t}function Zk(t,e){var n=new gr(3);Xk(n,e);var r=1/n[0],a=1/n[1],s=1/n[2],o=e[0]*r,i=e[1]*a,l=e[2]*s,c=e[4]*r,u=e[5]*a,f=e[6]*s,d=e[8]*r,p=e[9]*a,h=e[10]*s,g=o+u+h,y=0;return g>0?(y=Math.sqrt(g+1)*2,t[3]=.25*y,t[0]=(f-p)/y,t[1]=(d-l)/y,t[2]=(i-c)/y):o>u&&o>h?(y=Math.sqrt(1+o-u-h)*2,t[3]=(f-p)/y,t[0]=.25*y,t[1]=(i+c)/y,t[2]=(d+l)/y):u>h?(y=Math.sqrt(1+u-o-h)*2,t[3]=(d-l)/y,t[0]=(i+c)/y,t[1]=.25*y,t[2]=(f+p)/y):(y=Math.sqrt(1+h-o-u)*2,t[3]=(i-c)/y,t[0]=(d+l)/y,t[1]=(f+p)/y,t[2]=.25*y),t}function Jk(t,e,n,r){var a=e[0],s=e[1],o=e[2],i=e[3],l=a+a,c=s+s,u=o+o,f=a*l,d=a*c,p=a*u,h=s*c,g=s*u,y=o*u,m=i*l,b=i*c,C=i*u,S=r[0],T=r[1],w=r[2];return t[0]=(1-(h+y))*S,t[1]=(d+C)*S,t[2]=(p-b)*S,t[3]=0,t[4]=(d-C)*T,t[5]=(1-(f+y))*T,t[6]=(g+m)*T,t[7]=0,t[8]=(p+b)*w,t[9]=(g-m)*w,t[10]=(1-(f+h))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function hU(t,e,n,r,a){var s=e[0],o=e[1],i=e[2],l=e[3],c=s+s,u=o+o,f=i+i,d=s*c,p=s*u,h=s*f,g=o*u,y=o*f,m=i*f,b=l*c,C=l*u,S=l*f,T=r[0],w=r[1],x=r[2],E=a[0],O=a[1],k=a[2],M=(1-(g+m))*T,D=(p+S)*T,I=(h-C)*T,B=(p-S)*w,F=(1-(d+m))*w,$=(y+b)*w,N=(h+C)*x,W=(y-b)*x,_=(1-(d+g))*x;return t[0]=M,t[1]=D,t[2]=I,t[3]=0,t[4]=B,t[5]=F,t[6]=$,t[7]=0,t[8]=N,t[9]=W,t[10]=_,t[11]=0,t[12]=n[0]+E-(M*E+B*O+N*k),t[13]=n[1]+O-(D*E+F*O+W*k),t[14]=n[2]+k-(I*E+$*O+_*k),t[15]=1,t}function G1(t,e){var n=e[0],r=e[1],a=e[2],s=e[3],o=n+n,i=r+r,l=a+a,c=n*o,u=r*o,f=r*i,d=a*o,p=a*i,h=a*l,g=s*o,y=s*i,m=s*l;return t[0]=1-f-h,t[1]=u+m,t[2]=d-y,t[3]=0,t[4]=u-m,t[5]=1-c-h,t[6]=p+g,t[7]=0,t[8]=d+y,t[9]=p-g,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function vU(t,e,n,r,a,s,o){var i=1/(n-e),l=1/(a-r),c=1/(s-o);return t[0]=s*2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*l,t[6]=0,t[7]=0,t[8]=(n+e)*i,t[9]=(a+r)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function Qk(t,e,n,r,a){var s=1/Math.tan(e/2),o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,a!=null&&a!==1/0?(o=1/(r-a),t[10]=(a+r)*o,t[14]=2*a*r*o):(t[10]=-1,t[14]=-2*r),t}var yU=Qk;function mU(t,e,n,r,a){var s=1/Math.tan(e/2),o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,a!=null&&a!==1/0?(o=1/(r-a),t[10]=a*o,t[14]=a*r*o):(t[10]=-1,t[14]=-r),t}function CU(t,e,n,r){var a=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),i=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+i),c=2/(a+s);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-((o-i)*l*.5),t[9]=(a-s)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function eO(t,e,n,r,a,s,o){var i=1/(e-n),l=1/(r-a),c=1/(s-o);return t[0]=-2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*i,t[13]=(a+r)*l,t[14]=(o+s)*c,t[15]=1,t}var tO=eO;function SU(t,e,n,r,a,s,o){var i=1/(e-n),l=1/(r-a),c=1/(s-o);return t[0]=-2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(e+n)*i,t[13]=(a+r)*l,t[14]=s*c,t[15]=1,t}function nO(t,e,n,r){var a,s,o,i,l,c,u,f,d,p,h=e[0],g=e[1],y=e[2],m=r[0],b=r[1],C=r[2],S=n[0],T=n[1],w=n[2];return Math.abs(h-S)<rn&&Math.abs(g-T)<rn&&Math.abs(y-w)<rn?ct(t):(u=h-S,f=g-T,d=y-w,p=1/Math.hypot(u,f,d),u*=p,f*=p,d*=p,a=b*d-C*f,s=C*u-m*d,o=m*f-b*u,p=Math.hypot(a,s,o),p?(p=1/p,a*=p,s*=p,o*=p):(a=0,s=0,o=0),i=f*o-d*s,l=d*a-u*o,c=u*s-f*a,p=Math.hypot(i,l,c),p?(p=1/p,i*=p,l*=p,c*=p):(i=0,l=0,c=0),t[0]=a,t[1]=i,t[2]=u,t[3]=0,t[4]=s,t[5]=l,t[6]=f,t[7]=0,t[8]=o,t[9]=c,t[10]=d,t[11]=0,t[12]=-(a*h+s*g+o*y),t[13]=-(i*h+l*g+c*y),t[14]=-(u*h+f*g+d*y),t[15]=1,t)}function bU(t,e,n,r){var a=e[0],s=e[1],o=e[2],i=r[0],l=r[1],c=r[2],u=a-n[0],f=s-n[1],d=o-n[2],p=u*u+f*f+d*d;p>0&&(p=1/Math.sqrt(p),u*=p,f*=p,d*=p);var h=l*d-c*f,g=c*u-i*d,y=i*f-l*u;return p=h*h+g*g+y*y,p>0&&(p=1/Math.sqrt(p),h*=p,g*=p,y*=p),t[0]=h,t[1]=g,t[2]=y,t[3]=0,t[4]=f*y-d*g,t[5]=d*h-u*y,t[6]=u*g-f*h,t[7]=0,t[8]=u,t[9]=f,t[10]=d,t[11]=0,t[12]=a,t[13]=s,t[14]=o,t[15]=1,t}function wU(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function TU(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function xU(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function rO(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function EU(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function kU(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function OU(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function MU(t,e){var n=t[0],r=t[1],a=t[2],s=t[3],o=t[4],i=t[5],l=t[6],c=t[7],u=t[8],f=t[9],d=t[10],p=t[11],h=t[12],g=t[13],y=t[14],m=t[15],b=e[0],C=e[1],S=e[2],T=e[3],w=e[4],x=e[5],E=e[6],O=e[7],k=e[8],M=e[9],D=e[10],I=e[11],B=e[12],F=e[13],$=e[14],N=e[15];return Math.abs(n-b)<=rn*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-C)<=rn*Math.max(1,Math.abs(r),Math.abs(C))&&Math.abs(a-S)<=rn*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(s-T)<=rn*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(o-w)<=rn*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(i-x)<=rn*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(l-E)<=rn*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(c-O)<=rn*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(u-k)<=rn*Math.max(1,Math.abs(u),Math.abs(k))&&Math.abs(f-M)<=rn*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(d-D)<=rn*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(p-I)<=rn*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(h-B)<=rn*Math.max(1,Math.abs(h),Math.abs(B))&&Math.abs(g-F)<=rn*Math.max(1,Math.abs(g),Math.abs(F))&&Math.abs(y-$)<=rn*Math.max(1,Math.abs(y),Math.abs($))&&Math.abs(m-N)<=rn*Math.max(1,Math.abs(m),Math.abs(N))}var zg=Ut,RU=rO;const vf=Object.freeze(Object.defineProperty({__proto__:null,add:xU,adjoint:lU,clone:sU,copy:Un,create:$1,determinant:cU,equals:MU,exactEquals:OU,frob:TU,fromQuat:G1,fromQuat2:pU,fromRotation:Yk,fromRotationTranslation:qk,fromRotationTranslationScale:Jk,fromRotationTranslationScaleOrigin:hU,fromScaling:P1,fromTranslation:I1,fromValues:oU,fromXRotation:uU,fromYRotation:fU,fromZRotation:dU,frustum:vU,getRotation:Zk,getScaling:Xk,getTranslation:gU,identity:ct,invert:An,lookAt:nO,mul:zg,multiply:Ut,multiplyScalar:EU,multiplyScalarAndAdd:kU,ortho:tO,orthoNO:eO,orthoZO:SU,perspective:yU,perspectiveFromFieldOfView:CU,perspectiveNO:Qk,perspectiveZO:mU,rotate:ia,rotateX:U1,rotateY:A1,rotateZ:W1,scale:so,set:iU,str:wU,sub:RU,subtract:rO,targetTo:bU,translate:Rn,transpose:$t},Symbol.toStringTag,{value:"Module"}));function aO(){var t=new gr(3);return gr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function yc(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Qb(t,e,n){var r=new gr(3);return r[0]=t,r[1]=e,r[2]=n,r}function hn(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Uu(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Xo(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function _U(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function zs(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function sO(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function es(t,e){var n=e[0],r=e[1],a=e[2],s=n*n+r*r+a*a;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function yf(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function mc(t,e,n){var r=e[0],a=e[1],s=e[2],o=n[0],i=n[1],l=n[2];return t[0]=a*l-s*i,t[1]=s*o-r*l,t[2]=r*i-a*o,t}function It(t,e,n){var r=e[0],a=e[1],s=e[2],o=n[3]*r+n[7]*a+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*a+n[8]*s+n[12])/o,t[1]=(n[1]*r+n[5]*a+n[9]*s+n[13])/o,t[2]=(n[2]*r+n[6]*a+n[10]*s+n[14])/o,t}function Gp(t,e,n){var r=e[0],a=e[1],s=e[2];return t[0]=r*n[0]+a*n[3]+s*n[6],t[1]=r*n[1]+a*n[4]+s*n[7],t[2]=r*n[2]+a*n[5]+s*n[8],t}function VU(t){return t[0]=0,t[1]=0,t[2]=0,t}function ew(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function tw(t,e){var n=t[0],r=t[1],a=t[2],s=e[0],o=e[1],i=e[2];return Math.abs(n-s)<=rn*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-o)<=rn*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-i)<=rn*Math.max(1,Math.abs(a),Math.abs(i))}var Dy=Xo,oO=yc;(function(){var t=aO();return function(e,n,r,a,s,o){var i,l;for(n||(n=3),r||(r=0),a?l=Math.min(a*n+r,e.length):l=e.length,i=r;i<l;i+=n)t[0]=e[i],t[1]=e[i+1],t[2]=e[i+2],s(t,t,o),e[i]=t[0],e[i+1]=t[1],e[i+2]=t[2];return e}})();function DU(){var t=new gr(4);return gr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function LU(t,e,n,r){var a=new gr(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a}function nw(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function NU(t,e){var n=e[0],r=e[1],a=e[2],s=e[3],o=n*n+r*r+a*a+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=a*o,t[3]=s*o,t}function Xs(t,e,n){var r=e[0],a=e[1],s=e[2],o=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*s+n[12]*o,t[1]=n[1]*r+n[5]*a+n[9]*s+n[13]*o,t[2]=n[2]*r+n[6]*a+n[10]*s+n[14]*o,t[3]=n[3]*r+n[7]*a+n[11]*s+n[15]*o,t}(function(){var t=DU();return function(e,n,r,a,s,o){var i,l;for(n||(n=4),r||(r=0),a?l=Math.min(a*n+r,e.length):l=e.length,i=r;i<l;i+=n)t[0]=e[i],t[1]=e[i+1],t[2]=e[i+2],t[3]=e[i+3],s(t,t,o),e[i]=t[0],e[i+1]=t[1],e[i+2]=t[2],e[i+3]=t[3];return e}})();function vl(){var t=new gr(4);return gr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function z1(t,e,n){n=n*.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function BU(t,e){var n=Math.acos(e[3])*2,r=Math.sin(n/2);return r>rn?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function rw(t,e,n){var r=e[0],a=e[1],s=e[2],o=e[3],i=n[0],l=n[1],c=n[2],u=n[3];return t[0]=r*u+o*i+a*c-s*l,t[1]=a*u+o*l+s*i-r*c,t[2]=s*u+o*c+r*l-a*i,t[3]=o*u-r*i-a*l-s*c,t}function zp(t,e,n,r){var a=e[0],s=e[1],o=e[2],i=e[3],l=n[0],c=n[1],u=n[2],f=n[3],d,p,h,g,y;return p=a*l+s*c+o*u+i*f,p<0&&(p=-p,l=-l,c=-c,u=-u,f=-f),1-p>rn?(d=Math.acos(p),h=Math.sin(d),g=Math.sin((1-r)*d)/h,y=Math.sin(r*d)/h):(g=1-r,y=r),t[0]=g*a+y*l,t[1]=g*s+y*c,t[2]=g*o+y*u,t[3]=g*i+y*f,t}function FU(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function $U(t,e){var n=e[0]+e[4]+e[8],r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[a*3+a]&&(a=2);var s=(a+1)%3,o=(a+2)%3;r=Math.sqrt(e[a*3+a]-e[s*3+s]-e[o*3+o]+1),t[a]=.5*r,r=.5/r,t[3]=(e[s*3+o]-e[o*3+s])*r,t[s]=(e[s*3+a]+e[a*3+s])*r,t[o]=(e[o*3+a]+e[a*3+o])*r}return t}var aw=LU,iO=NU;(function(){var t=aO(),e=Qb(1,0,0),n=Qb(0,1,0);return function(r,a,s){var o=yf(a,s);return o<-.999999?(mc(t,e,a),oO(t)<1e-6&&mc(t,n,a),es(t,t),z1(r,t,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(mc(t,a,s),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+o,iO(r,r))}})();(function(){var t=vl(),e=vl();return function(n,r,a,s,o,i){return zp(t,r,o,i),zp(e,a,s,i),zp(n,t,e,2*i*(1-i)),n}})();(function(){var t=Hk();return function(e,n,r,a){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],iO(e,$U(e,t))}})();var Hn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fa(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function UU(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var AU=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,a,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(a=r;a--!==0;)if(!t(e[a],n[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(a=r;a--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[a]))return!1;for(a=r;a--!==0;){var o=s[a];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const WU=fa(AU);var sw=Object.prototype.toString,lO=function(e){var n=sw.call(e),r=n==="[object Arguments]";return r||(r=n!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&sw.call(e.callee)==="[object Function]"),r},u0,ow;function IU(){if(ow)return u0;ow=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=lO,a=Object.prototype.propertyIsEnumerable,s=!a.call({toString:null},"toString"),o=a.call(function(){},"prototype"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(d){var p=d.constructor;return p&&p.prototype===d},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},u=function(){if(typeof window>"u")return!1;for(var d in window)try{if(!c["$"+d]&&e.call(window,d)&&window[d]!==null&&typeof window[d]=="object")try{l(window[d])}catch{return!0}}catch{return!0}return!1}(),f=function(d){if(typeof window>"u"||!u)return l(d);try{return l(d)}catch{return!1}};t=function(p){var h=p!==null&&typeof p=="object",g=n.call(p)==="[object Function]",y=r(p),m=h&&n.call(p)==="[object String]",b=[];if(!h&&!g&&!y)throw new TypeError("Object.keys called on a non-object");var C=o&&g;if(m&&p.length>0&&!e.call(p,0))for(var S=0;S<p.length;++S)b.push(String(S));if(y&&p.length>0)for(var T=0;T<p.length;++T)b.push(String(T));else for(var w in p)!(C&&w==="prototype")&&e.call(p,w)&&b.push(String(w));if(s)for(var x=f(p),E=0;E<i.length;++E)!(x&&i[E]==="constructor")&&e.call(p,i[E])&&b.push(i[E]);return b}}return u0=t,u0}var PU=Array.prototype.slice,GU=lO,iw=Object.keys,Hp=iw?function(e){return iw(e)}:IU(),lw=Object.keys;Hp.shim=function(){if(Object.keys){var e=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);e||(Object.keys=function(r){return GU(r)?lw(PU.call(r)):lw(r)})}else Object.keys=Hp;return Object.keys||Hp};var zU=Hp,HU=Error,KU=EvalError,jU=RangeError,YU=ReferenceError,cO=SyntaxError,uO=TypeError,qU=URIError,XU=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var a=42;e[n]=a;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,n);if(o.value!==a||o.enumerable!==!0)return!1}return!0},cw=typeof Symbol<"u"&&Symbol,ZU=XU,JU=function(){return typeof cw!="function"||typeof Symbol!="function"||typeof cw("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:ZU()},f0={__proto__:null,foo:{}},QU=Object,eA=function(){return{__proto__:f0}.foo===f0.foo&&!(f0 instanceof QU)},tA="Function.prototype.bind called on incompatible ",nA=Object.prototype.toString,rA=Math.max,aA="[object Function]",uw=function(e,n){for(var r=[],a=0;a<e.length;a+=1)r[a]=e[a];for(var s=0;s<n.length;s+=1)r[s+e.length]=n[s];return r},sA=function(e,n){for(var r=[],a=n||0,s=0;a<e.length;a+=1,s+=1)r[s]=e[a];return r},oA=function(t,e){for(var n="",r=0;r<t.length;r+=1)n+=t[r],r+1<t.length&&(n+=e);return n},iA=function(e){var n=this;if(typeof n!="function"||nA.apply(n)!==aA)throw new TypeError(tA+n);for(var r=sA(arguments,1),a,s=function(){if(this instanceof a){var u=n.apply(this,uw(r,arguments));return Object(u)===u?u:this}return n.apply(e,uw(r,arguments))},o=rA(0,n.length-r.length),i=[],l=0;l<o;l++)i[l]="$"+l;if(a=Function("binder","return function ("+oA(i,",")+"){ return binder.apply(this,arguments); }")(s),n.prototype){var c=function(){};c.prototype=n.prototype,a.prototype=new c,c.prototype=null}return a},lA=iA,fO=Function.prototype.bind||lA,cA=Function.prototype.call,uA=Object.prototype.hasOwnProperty,fA=fO,dA=fA.call(cA,uA),Jt,pA=HU,gA=KU,hA=jU,vA=YU,Lc=cO,Cc=uO,yA=qU,dO=Function,d0=function(t){try{return dO('"use strict"; return ('+t+").constructor;")()}catch{}},rl=Object.getOwnPropertyDescriptor;if(rl)try{rl({},"")}catch{rl=null}var p0=function(){throw new Cc},mA=rl?function(){try{return arguments.callee,p0}catch{try{return rl(arguments,"callee").get}catch{return p0}}}():p0,Hl=JU(),CA=eA(),fr=Object.getPrototypeOf||(CA?function(t){return t.__proto__}:null),ac={},SA=typeof Uint8Array>"u"||!fr?Jt:fr(Uint8Array),al={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Jt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Jt:ArrayBuffer,"%ArrayIteratorPrototype%":Hl&&fr?fr([][Symbol.iterator]()):Jt,"%AsyncFromSyncIteratorPrototype%":Jt,"%AsyncFunction%":ac,"%AsyncGenerator%":ac,"%AsyncGeneratorFunction%":ac,"%AsyncIteratorPrototype%":ac,"%Atomics%":typeof Atomics>"u"?Jt:Atomics,"%BigInt%":typeof BigInt>"u"?Jt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Jt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Jt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Jt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":pA,"%eval%":eval,"%EvalError%":gA,"%Float32Array%":typeof Float32Array>"u"?Jt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Jt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Jt:FinalizationRegistry,"%Function%":dO,"%GeneratorFunction%":ac,"%Int8Array%":typeof Int8Array>"u"?Jt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Jt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Jt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Hl&&fr?fr(fr([][Symbol.iterator]())):Jt,"%JSON%":typeof JSON=="object"?JSON:Jt,"%Map%":typeof Map>"u"?Jt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Hl||!fr?Jt:fr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Jt:Promise,"%Proxy%":typeof Proxy>"u"?Jt:Proxy,"%RangeError%":hA,"%ReferenceError%":vA,"%Reflect%":typeof Reflect>"u"?Jt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Jt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Hl||!fr?Jt:fr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Jt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Hl&&fr?fr(""[Symbol.iterator]()):Jt,"%Symbol%":Hl?Symbol:Jt,"%SyntaxError%":Lc,"%ThrowTypeError%":mA,"%TypedArray%":SA,"%TypeError%":Cc,"%Uint8Array%":typeof Uint8Array>"u"?Jt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Jt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Jt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Jt:Uint32Array,"%URIError%":yA,"%WeakMap%":typeof WeakMap>"u"?Jt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Jt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Jt:WeakSet};if(fr)try{null.error}catch(t){var bA=fr(fr(t));al["%Error.prototype%"]=bA}var wA=function t(e){var n;if(e==="%AsyncFunction%")n=d0("async function () {}");else if(e==="%GeneratorFunction%")n=d0("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=d0("async function* () {}");else if(e==="%AsyncGenerator%"){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var a=t("%AsyncGenerator%");a&&fr&&(n=fr(a.prototype))}return al[e]=n,n},fw={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ed=fO,Hg=dA,TA=ed.call(Function.call,Array.prototype.concat),xA=ed.call(Function.apply,Array.prototype.splice),dw=ed.call(Function.call,String.prototype.replace),Kg=ed.call(Function.call,String.prototype.slice),EA=ed.call(Function.call,RegExp.prototype.exec),kA=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,OA=/\\(\\)?/g,MA=function(e){var n=Kg(e,0,1),r=Kg(e,-1);if(n==="%"&&r!=="%")throw new Lc("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new Lc("invalid intrinsic syntax, expected opening `%`");var a=[];return dw(e,kA,function(s,o,i,l){a[a.length]=i?dw(l,OA,"$1"):o||s}),a},RA=function(e,n){var r=e,a;if(Hg(fw,r)&&(a=fw[r],r="%"+a[0]+"%"),Hg(al,r)){var s=al[r];if(s===ac&&(s=wA(r)),typeof s>"u"&&!n)throw new Cc("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:a,name:r,value:s}}throw new Lc("intrinsic "+e+" does not exist!")},pO=function(e,n){if(typeof e!="string"||e.length===0)throw new Cc("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Cc('"allowMissing" argument must be a boolean');if(EA(/^%?[^%]*%?$/,e)===null)throw new Lc("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=MA(e),a=r.length>0?r[0]:"",s=RA("%"+a+"%",n),o=s.name,i=s.value,l=!1,c=s.alias;c&&(a=c[0],xA(r,TA([0,1],c)));for(var u=1,f=!0;u<r.length;u+=1){var d=r[u],p=Kg(d,0,1),h=Kg(d,-1);if((p==='"'||p==="'"||p==="`"||h==='"'||h==="'"||h==="`")&&p!==h)throw new Lc("property names with quotes must have matching quotes");if((d==="constructor"||!f)&&(l=!0),a+="."+d,o="%"+a+"%",Hg(al,o))i=al[o];else if(i!=null){if(!(d in i)){if(!n)throw new Cc("base intrinsic for "+e+" exists, but the property is not available.");return}if(rl&&u+1>=r.length){var g=rl(i,d);f=!!g,f&&"get"in g&&!("originalValue"in g.get)?i=g.get:i=i[d]}else f=Hg(i,d),i=i[d];f&&!l&&(al[o]=i)}}return i},_A=pO,Kp=_A("%Object.defineProperty%",!0)||!1;if(Kp)try{Kp({},"a",{value:1})}catch{Kp=!1}var gO=Kp,VA=pO,jp=VA("%Object.getOwnPropertyDescriptor%",!0);if(jp)try{jp([],"length")}catch{jp=null}var DA=jp,pw=gO,LA=cO,Kl=uO,gw=DA,NA=function(e,n,r){if(!e||typeof e!="object"&&typeof e!="function")throw new Kl("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new Kl("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Kl("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Kl("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Kl("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Kl("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,i=arguments.length>6?arguments[6]:!1,l=!!gw&&gw(e,n);if(pw)pw(e,n,{configurable:o===null&&l?l.configurable:!o,enumerable:a===null&&l?l.enumerable:!a,value:r,writable:s===null&&l?l.writable:!s});else if(i||!a&&!s&&!o)e[n]=r;else throw new LA("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Ly=gO,hO=function(){return!!Ly};hO.hasArrayLengthDefineBug=function(){if(!Ly)return null;try{return Ly([],"length",{value:1}).length!==1}catch{return!0}};var BA=hO,FA=zU,$A=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",UA=Object.prototype.toString,AA=Array.prototype.concat,hw=NA,WA=function(t){return typeof t=="function"&&UA.call(t)==="[object Function]"},vO=BA(),IA=function(t,e,n,r){if(e in t){if(r===!0){if(t[e]===n)return}else if(!WA(r)||!r())return}vO?hw(t,e,n,!0):hw(t,e,n)},yO=function(t,e){var n=arguments.length>2?arguments[2]:{},r=FA(e);$A&&(r=AA.call(r,Object.getOwnPropertySymbols(e)));for(var a=0;a<r.length;a+=1)IA(t,r[a],e[r[a]],n[r[a]])};yO.supportsDescriptors=!!vO;var mO=yO,Yp={exports:{}};typeof self<"u"?Yp.exports=self:typeof window<"u"?Yp.exports=window:Yp.exports=Function("return this")();var CO=Yp.exports,PA=CO,SO=function(){return typeof Hn!="object"||!Hn||Hn.Math!==Math||Hn.Array!==Array?PA:Hn},GA=mO,zA=SO,HA=function(){var e=zA();if(GA.supportsDescriptors){var n=Object.getOwnPropertyDescriptor(e,"globalThis");(!n||n.configurable&&(n.enumerable||!n.writable||globalThis!==e))&&Object.defineProperty(e,"globalThis",{configurable:!0,enumerable:!1,value:e,writable:!0})}else(typeof globalThis!="object"||globalThis!==e)&&(e.globalThis=e);return e},KA=mO,jA=CO,bO=SO,YA=HA,qA=bO(),wO=function(){return qA};KA(wO,{getPolyfill:bO,implementation:jA,shim:YA});var XA=wO;const ZA=fa(XA),za=ZA(),TO={vtkObject:()=>null};function qa(t){if(t==null||t.isA)return t;if(!t.vtkClass)return za.console&&za.console.error&&za.console.error("Invalid VTK object"),null;const e=TO[t.vtkClass];if(!e)return za.console&&za.console.error&&za.console.error(`No vtk class found for Object of type ${t.vtkClass}`),null;const n={...t};Object.keys(n).forEach(a=>{n[a]&&typeof n[a]=="object"&&n[a].vtkClass&&(n[a]=qa(n[a]))});const r=e(n);return r&&r.modified&&r.modified(),r}function JA(t,e){TO[t]=e}qa.register=JA;class g0 extends Array{push(){for(let e=0;e<arguments.length;e++)this.includes(arguments[e])||super.push(arguments[e]);return this.length}}let Ny=0;const xO=Symbol("void");function QA(){return Ny}const EO={};function Ui(){}const eW=["log","debug","info","warn","error","time","timeEnd","group","groupEnd"];eW.forEach(t=>{EO[t]=Ui});za.console=console.hasOwnProperty("log")?console:EO;const si={debug:Ui,error:za.console.error||Ui,info:za.console.info||Ui,log:za.console.log||Ui,warn:za.console.warn||Ui};function kO(t,e){si[t]&&(si[t]=e||Ui)}function OO(){si.log(...arguments)}function MO(){si.info(...arguments)}function jg(){si.debug(...arguments)}function Pt(){si.error(...arguments)}function qh(){si.warn(...arguments)}const vw={};function RO(t){vw[t]||(si.error(t),vw[t]=!0)}const Rr=Object.create(null);Rr.Float32Array=Float32Array;Rr.Float64Array=Float64Array;Rr.Uint8Array=Uint8Array;Rr.Int8Array=Int8Array;Rr.Uint16Array=Uint16Array;Rr.Int16Array=Int16Array;Rr.Uint32Array=Uint32Array;Rr.Int32Array=Int32Array;Rr.Uint8ClampedArray=Uint8ClampedArray;try{Rr.BigInt64Array=BigInt64Array,Rr.BigUint64Array=BigUint64Array}catch{}function cu(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return new(Rr[t]||Float64Array)(...n)}function Xh(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return(Rr[t]||Float64Array).from(...n)}function Zh(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Pn(t){return Zh(t[0]==="_"?t.slice(1):t)}function _O(t){return t.charAt(0).toLowerCase()+t.slice(1)}function VO(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3;const r=["TB","GB","MB","KB"];let a=Number(t),s="B";for(;a>n;)a/=n,s=r.pop();return`${a.toFixed(e)} ${s}`}function DO(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ";const n=[];let r=t;for(;r>1e3;)n.push(`000${r%1e3}`.slice(-3)),r=Math.floor(r/1e3);return r>0&&n.push(r),n.reverse(),n.join(e)}function LO(t){Object.keys(t).forEach(e=>{Array.isArray(t[e])&&(t[e]=[].concat(t[e]))})}function tW(t){return Object.values(Rr).some(e=>t instanceof e)}function nW(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}function rW(t,e){return Object.keys(t).find(n=>t[n]===e)}function NO(t){return t&&t.isA?t.getState():t}function H1(t){setTimeout(t,0)}function BO(t,e){const n=performance.now();t.finally(()=>{const r=performance.now()-n;e(r)})}function dn(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};LO(e);const n=[];if(Number.isInteger(e.mtime)||(e.mtime=++Ny),!("classHierarchy"in e))e.classHierarchy=new g0("vtkObject");else if(!(e.classHierarchy instanceof g0)){const s=new g0;for(let o=0;o<e.classHierarchy.length;o++)s.push(e.classHierarchy[o]);e.classHierarchy=s}function r(s){n[s]=null}function a(s){function o(){r(s)}return Object.freeze({unsubscribe:o})}return t.isDeleted=()=>!!e.deleted,t.modified=s=>{if(e.deleted){Pt("instance deleted - cannot call any method");return}s&&s<t.getMTime()||(e.mtime=++Ny,n.forEach(o=>o&&o(t)))},t.onModified=s=>{if(e.deleted)return Pt("instance deleted - cannot call any method"),null;const o=n.length;return n.push(s),a(o)},t.getMTime=()=>e.mtime,t.isA=s=>{let o=e.classHierarchy.length;for(;o--;)if(e.classHierarchy[o]===s)return!0;return!1},t.getClassName=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.classHierarchy[e.classHierarchy.length-1-s]},t.set=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,l=!1;return Object.keys(s).forEach(c=>{const u=i?null:t[`set${Zh(c)}`];u&&Array.isArray(s[c])&&u.length>1?l=u(...s[c])||l:u?l=u(s[c])||l:(["mtime"].indexOf(c)===-1&&!o&&qh(`Warning: Set value to model directly ${c}, ${s[c]}`),l=e[c]!==s[c]||l,e[c]=s[c])}),l},t.get=function(){for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];if(!o.length)return e;const l={};return o.forEach(c=>{l[c]=e[c]}),l},t.getReferenceByName=s=>e[s],t.delete=()=>{Object.keys(e).forEach(s=>delete e[s]),n.forEach((s,o)=>r(o)),e.deleted=!0},t.getState=()=>{if(e.deleted)return null;const s={...e,vtkClass:t.getClassName()};Object.keys(s).forEach(i=>{s[i]===null||s[i]===void 0||i[0]==="_"?delete s[i]:s[i].isA?s[i]=s[i].getState():Array.isArray(s[i])?s[i]=s[i].map(NO):tW(s[i])&&(s[i]=Array.from(s[i]))});const o={};return Object.keys(s).sort().forEach(i=>{o[i]=s[i]}),o.mtime&&delete o.mtime,o},t.shallowCopy=function(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(s.getClassName()!==t.getClassName())throw new Error(`Cannot ShallowCopy ${s.getClassName()} into ${t.getClassName()}`);const i=s.get(),l=Object.keys(e).sort();Object.keys(i).sort().forEach(u=>{const f=l.indexOf(u);f===-1?o&&jg(`add ${u} in shallowCopy`):l.splice(f,1),e[u]=i[u]}),l.length&&o&&jg(`Untouched keys: ${l.join(", ")}`),t.modified()},t.toJSON=function(){return t.getState()},t}const aW={object(t,e,n){return function(){return{...e[n.name]}}}};function wr(t,e,n){n.forEach(r=>{if(typeof r=="object"){const a=aW[r.type];a?t[`get${Pn(r.name)}`]=a(t,e,r):t[`get${Pn(r.name)}`]=()=>e[r.name]}else t[`get${Pn(r)}`]=()=>e[r]})}const sW={enum(t,e,n){const r=`_on${Pn(n.name)}Changed`;return a=>{var s;if(typeof a=="string"){if(n.enum[a]!==void 0)return e[n.name]!==n.enum[a]?(e[n.name]=n.enum[a],t.modified(),!0):!1;throw Pt(`Set Enum with invalid argument ${n}, ${a}`),new RangeError("Set Enum with invalid string argument")}if(typeof a=="number"){if(e[n.name]!==a){if(Object.keys(n.enum).map(o=>n.enum[o]).indexOf(a)!==-1){const o=e[n.name];return e[n.name]=a,(s=e[r])==null||s.call(e,t,e,a,o),t.modified(),!0}throw Pt(`Set Enum outside numeric range ${n}, ${a}`),new RangeError("Set Enum outside numeric range")}return!1}throw Pt(`Set Enum with invalid argument (String/Number) ${n}, ${a}`),new TypeError("Set Enum with invalid argument (String/Number)")}},object(t,e,n){const r=`_on${Pn(n.name)}Changed`;return a=>{var s;if(!WU(e[n.name],a)){const o=e[n.name];return e[n.name]=a,(s=e[r])==null||s.call(e,t,e,a,o),t.modified(),!0}return!1}}};function yw(t){if(typeof t=="object"){const e=sW[t.type];if(e)return(n,r)=>e(n,r,t);throw Pt(`No setter for field ${t}`),new TypeError("No setter for field")}return function(n,r){const a=`_on${Pn(t)}Changed`;return function(o){var i;if(r.deleted)return Pt("instance deleted - cannot call any method"),!1;if(r[t]!==o){const l=r[t.name];return r[t]=o,(i=r[a])==null||i.call(r,n,r,o,l),n.modified(),!0}return!1}}}function td(t,e,n){n.forEach(r=>{typeof r=="object"?t[`set${Pn(r.name)}`]=yw(r)(t,e):t[`set${Pn(r)}`]=yw(r)(t,e)})}function Dn(t,e,n){wr(t,e,n),td(t,e,n)}function uu(t,e,n){n.forEach(r=>{t[`get${Pn(r)}`]=()=>e[r]?Array.from(e[r]):e[r],t[`get${Pn(r)}ByReference`]=()=>e[r]})}function K1(t,e,n,r){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;n.forEach(s=>{if(e[s]&&r&&e[s].length!==r)throw new RangeError(`Invalid initial number of values for array (${s})`);const o=`_on${Pn(s)}Changed`;t[`set${Pn(s)}`]=function(){var p;if(e.deleted)return Pt("instance deleted - cannot call any method"),!1;for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];let u=l,f,d=!1;if(u.length===1&&(u[0]==null||u[0].length>=0)&&(u=u[0],d=!0),u==null)f=e[s]!==u;else{if(r&&u.length!==r)if(u.length<r&&a!==void 0)for(u=Array.from(u),d=!1;u.length<r;)u.push(a);else throw new RangeError(`Invalid number of values for array setter (${s})`);f=e[s]==null||e[s].length!==u.length;for(let h=0;!f&&h<u.length;++h)f=e[s][h]!==u[h];f&&d&&(u=Array.from(u))}if(f){const h=e[s.name];e[s]=u,(p=e[o])==null||p.call(e,t,e,u,h),t.modified()}return f},t[`set${Pn(s)}From`]=i=>{const l=e[s];i.forEach((c,u)=>{l[u]=c})}})}function j1(t,e,n,r){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;uu(t,e,n),K1(t,e,n,r,a)}function nd(t,e,n){for(let r=0;r<n.length;r++){const a=n[r];e[a]!==void 0&&(e[`_${a}`]=e[a],delete e[a])}}function Y1(t,e,n,r){e.inputData?e.inputData=e.inputData.map(qa):e.inputData=[],e.inputConnection?e.inputConnection=e.inputConnection.map(qa):e.inputConnection=[],e.output?e.output=e.output.map(qa):e.output=[],e.inputArrayToProcess?e.inputArrayToProcess=e.inputArrayToProcess.map(qa):e.inputArrayToProcess=[],e.numberOfInputs=n;function a(p){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){Pt("instance deleted - cannot call any method");return}if(h>=e.numberOfInputs){Pt(`algorithm ${t.getClassName()} only has ${e.numberOfInputs} input ports. To add more input ports, use addInputData()`);return}(e.inputData[h]!==p||e.inputConnection[h])&&(e.inputData[h]=p,e.inputConnection[h]=null,t.modified&&t.modified())}function s(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[p]&&(e.inputData[p]=e.inputConnection[p]()),e.inputData[p]}function o(p){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){Pt("instance deleted - cannot call any method");return}if(h>=e.numberOfInputs){let g=`algorithm ${t.getClassName()} only has `;g+=`${e.numberOfInputs}`,g+=" input ports. To add more input ports, use addInputConnection()",Pt(g);return}e.inputData[h]=null,e.inputConnection[h]=p}function i(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[p]}function l(){let p=e.numberOfInputs;for(;p&&!e.inputData[p-1]&&!e.inputConnection[p-1];)p--;return p===e.numberOfInputs&&e.numberOfInputs++,p}function c(p){if(e.deleted){Pt("instance deleted - cannot call any method");return}o(p,l())}function u(p){if(e.deleted){Pt("instance deleted - cannot call any method");return}a(p,l())}function f(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.deleted?(Pt("instance deleted - cannot call any method"),null):(t.shouldUpdate()&&t.update(),e.output[p])}t.shouldUpdate=()=>{var y,m;const p=t.getMTime();let h=1/0,g=r;for(;g--;){if(!e.output[g]||e.output[g].isDeleted())return!0;const b=e.output[g].getMTime();if(b<p)return!0;b<h&&(h=b)}for(g=e.numberOfInputs;g--;)if((y=e.inputConnection[g])!=null&&y.filter.shouldUpdate()||((m=t.getInputData(g))==null?void 0:m.getMTime())>h)return!0;return!1};function d(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const h=()=>f(p);return h.filter=t,h}if(e.numberOfInputs){let p=e.numberOfInputs;for(;p--;)e.inputData.push(null),e.inputConnection.push(null);t.setInputData=a,t.setInputConnection=o,t.addInputData=u,t.addInputConnection=c,t.getInputData=s,t.getInputConnection=i}r&&(t.getOutputData=f,t.getOutputPort=d),t.update=()=>{const p=[];if(e.numberOfInputs){let h=0;for(;h<e.numberOfInputs;)p[h]=t.getInputData(h),h++}t.shouldUpdate()&&t.requestData&&t.requestData(p,e.output)},t.getNumberOfInputPorts=()=>e.numberOfInputs,t.getNumberOfOutputPorts=()=>r||e.output.length,t.getInputArrayToProcess=p=>{const h=e.inputArrayToProcess[p],g=e.inputData[p];return h&&g?g[`get${h.fieldAssociation}`]().getArray(h.arrayName):null},t.setInputArrayToProcess=function(p,h,g){let y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Scalars";for(;e.inputArrayToProcess.length<p;)e.inputArrayToProcess.push(null);e.inputArrayToProcess[p]={arrayName:h,fieldAssociation:g,attributeType:y}}}const q1=Symbol("Event abort");function FO(t,e,n){const r=[],a=t.delete;let s=1;function o(c){for(let u=0;u<r.length;++u){const[f]=r[u];if(f===c){r.splice(u,1);return}}}function i(c){function u(){o(c)}return Object.freeze({unsubscribe:u})}function l(){if(e.deleted){Pt("instance deleted - cannot call any method");return}const c=r.slice();for(let u=0;u<c.length;++u){const[,f,d]=c[u];if(f){if(d<0)setTimeout(()=>f.apply(t,arguments),1-d);else if(f.apply(t,arguments)===q1)break}}}t[`invoke${Pn(n)}`]=l,t[`on${Pn(n)}`]=function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!c.apply)return console.error(`Invalid callback for event ${n}`),null;if(e.deleted)return Pt("instance deleted - cannot call any method"),null;const f=s++;return r.push([f,c,u]),r.sort((d,p)=>p[2]-d[2]),i(f)},t.delete=()=>{a(),r.forEach(c=>{let[u]=c;return o(u)})}}function Ft(t,e){const n=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const a={},s={};return t(s,a,r),Object.freeze(s)};return e&&qa.register(e,n),n}function X1(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return e.filter(o=>!!o).map(o=>o(...a))}}function Z1(t){return t&&t.isA&&t.isA("vtkObject")}function Yg(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];if(Z1(t)){if(r.indexOf(t)>=0)return n;r.push(t);const a=e(t);a!==void 0&&n.push(a);const s=t.get();Object.keys(s).forEach(o=>{const i=s[o];Array.isArray(i)?i.forEach(l=>{Yg(l,e,n,r)}):Yg(i,e,n,r)})}return n}function $O(t,e,n){var r=this;let a;const s=function(){for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];const c=r,u=()=>{a=null,n||t.apply(c,i)},f=n&&!a;clearTimeout(a),a=setTimeout(u,e),f&&t.apply(c,i)};return s.cancel=()=>clearTimeout(a),s}function UO(t,e){let n=!1,r=null;function a(){n=!1,r!==null&&(s(...r),r=null)}function s(){for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];if(n){r=i;return}n=!0,t(...i),setTimeout(a,e)}return s}function J1(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};e.keystore=Object.assign(e.keystore||{},n),t.setKey=(r,a)=>{e.keystore[r]=a},t.getKey=r=>e.keystore[r],t.getAllKeys=()=>Object.keys(e.keystore),t.deleteKey=r=>delete e.keystore[r],t.clearKeystore=()=>t.getAllKeys().forEach(r=>delete e.keystore[r])}let oW=1;const Bd="__root__";function AO(t,e){J1(t,e);const n=t.delete;e.proxyId=`${oW++}`,e.ui=JSON.parse(JSON.stringify(e.ui||[])),wr(t,e,["proxyId","proxyGroup","proxyName"]),Dn(t,e,["proxyManager"]);const r={},a={};function s(c,u){a[u]||(a[u]=[]);const f=a[u];for(let d=0;d<c.length;d++)f.push(c[d].name),r[c[d].name]=c[d],c[d].children&&c[d].children.length&&s(c[d].children,c[d].name)}s(e.ui,Bd),t.updateUI=c=>{e.ui=JSON.parse(JSON.stringify(c||[])),Object.keys(r).forEach(u=>delete r[u]),Object.keys(a).forEach(u=>delete a[u]),s(e.ui,Bd),t.modified()};function o(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Bd;return a[c]}t.updateProxyProperty=(c,u)=>{const f=r[c];f?Object.assign(f,u):r[c]={...u}},t.activate=()=>{if(e.proxyManager){const c=`setActive${Pn(t.getProxyGroup().slice(0,-1))}`;e.proxyManager[c]&&e.proxyManager[c](t)}},e.propertyLinkSubscribers={},t.registerPropertyLinkForGC=(c,u)=>{u in e.propertyLinkSubscribers||(e.propertyLinkSubscribers[u]=[]),e.propertyLinkSubscribers[u].push(c)},t.gcPropertyLinks=c=>{const u=e.propertyLinkSubscribers[c]||[];for(;u.length;)u.pop().unbind(t)},e.propertyLinkMap={},t.getPropertyLink=function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.propertyLinkMap[c])return e.propertyLinkMap[c];let f=null;const d=[];let p=0,h=!1;function g(S){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(h)return null;const w=[];let x=null;for(p=d.length;p--;){const O=d[p];O.instance===S?x=O:w.push(O)}if(!x)return null;const E=x.instance[`get${Pn(x.propertyName)}`]();if(!nW(E,f)||T){for(f=E,h=!0;w.length;){const O=w.pop();O.instance.set({[O.propertyName]:f})}h=!1}return e.propertyLinkMap[c].persistent&&(e.propertyLinkMap[c].value=E),E}function y(S,T){const w=[];for(p=d.length;p--;){const x=d[p];x.instance===S&&(x.propertyName===T||T===void 0)&&(x.subscription.unsubscribe(),w.push(p))}for(;w.length;)d.splice(w.pop(),1)}function m(S,T){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const x=S.onModified(g),E=d[0];return d.push({instance:S,propertyName:T,subscription:x}),w&&(e.propertyLinkMap[c].persistent&&e.propertyLinkMap[c].value!==void 0?S.set({[T]:e.propertyLinkMap[c].value}):E&&g(E.instance,!0)),{unsubscribe:()=>y(S,T)}}function b(){for(;d.length;)d.pop().subscription.unsubscribe()}const C={bind:m,unbind:y,unsubscribe:b,persistent:u};return e.propertyLinkMap[c]=C,C};function i(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Bd;const u=[],f=e.proxyId,d=o(c)||[];for(let p=0;p<d.length;p++){const h=d[p],g=t[`get${Pn(h)}`],y=g?g():void 0,m={id:f,name:h,value:y},b=i(h);b.length&&(m.children=b),u.push(m)}return u}t.listPropertyNames=()=>i().map(c=>c.name),t.getPropertyByName=c=>i().find(u=>u.name===c),t.getPropertyDomainByName=c=>(r[c]||{}).domain,t.getProxySection=()=>({id:e.proxyId,name:e.proxyGroup,ui:e.ui,properties:i()}),t.delete=()=>{const c=Object.keys(e.propertyLinkMap);let u=c.length;for(;u--;)e.propertyLinkMap[c[u]].unsubscribe();Object.keys(e.propertyLinkSubscribers).forEach(t.gcPropertyLinks),n()},t.getState=()=>null;function l(){if(e.links)for(let c=0;c<e.links.length;c++){const{link:u,property:f,persistent:d,updateOnBind:p,type:h}=e.links[c];if(h==="application"){const g=e.proxyManager.getPropertyLink(u,d);t.registerPropertyLinkForGC(g,"application"),g.bind(t,f,p)}}}H1(l)}function WO(t,e,n){const r=t.delete,a=[],s=Object.keys(n);let o=s.length;for(;o--;){const i=s[o],{modelKey:l,property:c,modified:u=!0}=n[i],f=Pn(c),d=Pn(i);t[`get${d}`]=e[l][`get${f}`],t[`set${d}`]=e[l][`set${f}`],u&&a.push(e[l].onModified(t.modified))}t.delete=()=>{for(;a.length;)a.pop().unsubscribe();r()}}function IO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};e.this=t;function a(i){const l=Object.keys(i);let c=l.length;for(;c--;){const u=l[c];e[u].set(i[u])}}const s=Object.keys(r);let o=s.length;for(;o--;){const i=s[o];e[i]=r[i];const l=n[i];t[`set${Pn(i)}`]=c=>{if(c!==e[i]){e[i]=c;const u=l[c];a(u),t.modified()}}}s.length&&wr(t,e,s)}const mw=10,Cw=40,Sw=800;function PO(t){let e=0,n=0,r=0,a=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*mw,a=n*mw,"deltaY"in t&&(a=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||a)&&t.deltaMode&&(t.deltaMode===1?(r*=Cw,a*=Cw):(r*=Sw,a*=Sw)),r&&!e&&(e=r<1?-1:1),a&&!n&&(n=a<1?-1:1),{spinX:e,spinY:n||e,pixelX:r,pixelY:a||r}}var A={algo:Y1,capitalize:Zh,chain:X1,debounce:$O,enumToString:rW,event:FO,EVENT_ABORT:q1,formatBytesToProperUnit:VO,formatNumbersWithThousandSeparator:DO,get:wr,getArray:uu,getCurrentGlobalMTime:QA,getStateArrayMapFunc:NO,isVtkObject:Z1,keystore:J1,measurePromiseExecution:BO,moveToProtected:nd,newInstance:Ft,newTypedArray:cu,newTypedArrayFrom:Xh,normalizeWheel:PO,obj:dn,proxy:AO,proxyPropertyMapping:WO,proxyPropertyState:IO,safeArrays:LO,set:td,setArray:K1,setGet:Dn,setGetArray:j1,setImmediate:H1,setLoggerFunction:kO,throttle:UO,traverseInstanceTree:Yg,TYPED_ARRAYS:Rr,uncapitalize:_O,VOID:xO,vtkDebugMacro:jg,vtkErrorMacro:Pt,vtkInfoMacro:MO,vtkLogMacro:OO,vtkOnceErrorMacro:RO,vtkWarningMacro:qh},nr=Object.freeze({__proto__:null,VOID:xO,setLoggerFunction:kO,vtkLogMacro:OO,vtkInfoMacro:MO,vtkDebugMacro:jg,vtkErrorMacro:Pt,vtkWarningMacro:qh,vtkOnceErrorMacro:RO,TYPED_ARRAYS:Rr,newTypedArray:cu,newTypedArrayFrom:Xh,capitalize:Zh,_capitalize:Pn,uncapitalize:_O,formatBytesToProperUnit:VO,formatNumbersWithThousandSeparator:DO,setImmediateVTK:H1,measurePromiseExecution:BO,obj:dn,get:wr,set:td,setGet:Dn,getArray:uu,setArray:K1,setGetArray:j1,moveToProtected:nd,algo:Y1,EVENT_ABORT:q1,event:FO,newInstance:Ft,chain:X1,isVtkObject:Z1,traverseInstanceTree:Yg,debounce:$O,throttle:UO,keystore:J1,proxy:AO,proxyPropertyMapping:WO,proxyPropertyState:IO,normalizeWheel:PO,default:A});const{vtkErrorMacro:iW}=A,lW=["Build","Render"];function cW(t,e){e.classHierarchy.push("vtkViewNode"),t.build=r=>{},t.render=r=>{},t.traverse=r=>{const a=r.getTraverseOperation(),s=t[a];if(s){s(r);return}t.apply(r,!0);for(let o=0;o<e.children.length;o++)e.children[o].traverse(r);t.apply(r,!1)},t.apply=(r,a)=>{const s=t[r.getOperation()];s&&s(a,r)},t.getViewNodeFor=r=>{if(e.renderable===r)return t;for(let a=0;a<e.children.length;++a){const o=e.children[a].getViewNodeFor(r);if(o)return o}},t.getFirstAncestorOfType=r=>e._parent?e._parent.isA(r)?e._parent:e._parent.getFirstAncestorOfType(r):null,t.addMissingNode=r=>{if(!r)return;const a=e._renderableChildMap.get(r);if(a!==void 0)a.setVisited(!0);else{const s=t.createViewNode(r);s&&(s.setParent(t),s.setVisited(!0),e._renderableChildMap.set(r,s),e.children.push(s))}},t.addMissingNodes=r=>{if(!(!r||!r.length))for(let a=0;a<r.length;++a){const s=r[a],o=e._renderableChildMap.get(s);if(o!==void 0)o.setVisited(!0);else{const i=t.createViewNode(s);i&&(i.setParent(t),i.setVisited(!0),e._renderableChildMap.set(s,i),e.children.push(i))}}},t.addMissingChildren=r=>{if(!(!r||!r.length))for(let a=0;a<r.length;++a){const s=r[a];e.children.indexOf(s)===-1&&(s.setParent(t),e.children.push(s)),s.setVisited(!0)}},t.prepareNodes=()=>{for(let r=0;r<e.children.length;++r)e.children[r].setVisited(!1)},t.setVisited=r=>{e.visited=r},t.removeUnusedNodes=()=>{let r=0;for(let a=0;a<e.children.length;++a){const s=e.children[a];if(s.getVisited())e.children[r++]=s,s.setVisited(!1);else{const i=s.getRenderable();i&&e._renderableChildMap.delete(i),s.delete()}}e.children.length=r},t.createViewNode=r=>{if(!e.myFactory)return iW("Cannot create view nodes without my own factory"),null;const a=e.myFactory.createNode(r);return a&&a.setRenderable(r),a};const n=t.delete;t.delete=()=>{for(let r=0;r<e.children.length;r++)e.children[r].delete();n()}}const uW={renderable:null,myFactory:null,children:[],visited:!1};function GO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,uW,n),A.obj(t,e),A.event(t,e,"event"),e._renderableChildMap=new Map,A.get(t,e,["visited"]),A.setGet(t,e,["_parent","renderable","myFactory"]),A.getArray(t,e,["children"]),A.moveToProtected(t,e,["parent"]),cW(t,e)}const fW=A.newInstance(GO,"vtkViewNode");var gn={newInstance:fW,extend:GO,PASS_TYPES:lW};function dW(t,e){e.overrides||(e.overrides={}),e.classHierarchy.push("vtkViewNodeFactory"),t.createNode=n=>{if(n.isDeleted())return null;let r=0,a=n.getClassName(r++),s=!1;const o=Object.keys(e.overrides);for(;a&&!s;)o.indexOf(a)!==-1?s=!0:a=n.getClassName(r++);if(!s)return null;const i=e.overrides[a]();return i.setMyFactory(t),i},t.registerOverride=(n,r)=>{e.overrides[n]=r}}const pW={};function zO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,pW,n),A.obj(t,e),dW(t,e)}const gW=A.newInstance(zO,"vtkViewNodeFactory");var HO={newInstance:gW,extend:zO};const KO=Object.create(null);function Xn(t,e){KO[t]=e}function hW(t,e){e.classHierarchy.push("vtkOpenGLViewNodeFactory")}const vW={};function jO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,vW,n),e.overrides=KO,HO.extend(t,e,n),hW(t,e)}const yW=A.newInstance(jO,"vtkOpenGLViewNodeFactory");var mW={newInstance:yW,extend:jO};function CW(t,e){e.classHierarchy.push("vtkOpenGLCamera"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext())},t.opaquePass=n=>{if(n){const r=e._openGLRenderer.getTiledSizeAndOrigin();e.context.viewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize),e.context.scissor(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize)}},t.translucentPass=t.opaquePass,t.zBufferPass=t.opaquePass,t.opaqueZBufferPass=t.opaquePass,t.volumePass=t.opaquePass,t.getKeyMatrices=n=>{if(n!==e.lastRenderer||e._openGLRenderWindow.getMTime()>e.keyMatrixTime.getMTime()||t.getMTime()>e.keyMatrixTime.getMTime()||n.getMTime()>e.keyMatrixTime.getMTime()||e.renderable.getMTime()>e.keyMatrixTime.getMTime()){Un(e.keyMatrices.wcvc,e.renderable.getViewMatrix()),Yh(e.keyMatrices.normalMatrix,e.keyMatrices.wcvc),Qf(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),$t(e.keyMatrices.wcvc,e.keyMatrices.wcvc);const r=e._openGLRenderer.getAspectRatio();Un(e.keyMatrices.vcpc,e.renderable.getProjectionMatrix(r,-1,1)),$t(e.keyMatrices.vcpc,e.keyMatrices.vcpc),Ut(e.keyMatrices.wcpc,e.keyMatrices.vcpc,e.keyMatrices.wcvc),e.keyMatrixTime.modified(),e.lastRenderer=n}return e.keyMatrices}}const SW={context:null,lastRenderer:null,keyMatrixTime:null,keyMatrices:null};function bW(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,SW,n),gn.extend(t,e,n),e.keyMatrixTime={},dn(e.keyMatrixTime),e.keyMatrices={normalMatrix:new Float64Array(9),vcpc:new Float64Array(16),wcvc:new Float64Array(16),wcpc:new Float64Array(16)},Dn(t,e,["context","keyMatrixTime"]),CW(t,e)}const wW=Ft(bW);Xn("vtkCamera",wW);const{vtkDebugMacro:TW}=nr;function xW(t,e){e.classHierarchy.push("vtkOpenGLRenderer"),t.buildPass=n=>{if(n){if(!e.renderable)return;t.updateLights(),t.prepareNodes(),t.addMissingNode(e.renderable.getActiveCamera()),t.addMissingNodes(e.renderable.getViewPropsWithNestedProps()),t.removeUnusedNodes()}},t.updateLights=()=>{let n=0;const r=e.renderable.getLightsByReference();for(let a=0;a<r.length;++a)r[a].getSwitch()>0&&n++;return n||(TW("No lights are on, creating one."),e.renderable.createLight()),n},t.zBufferPass=n=>{if(n){let r=0;const a=e.context;e.renderable.getTransparent()||(e.context.clearColor(1,0,0,1),r|=a.COLOR_BUFFER_BIT),e.renderable.getPreserveDepthBuffer()||(a.clearDepth(1),r|=a.DEPTH_BUFFER_BIT,e.context.depthMask(!0));const s=t.getTiledSizeAndOrigin();a.enable(a.SCISSOR_TEST),a.scissor(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize),a.viewport(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize),a.colorMask(!0,!0,!0,!0),r&&a.clear(r),a.enable(a.DEPTH_TEST)}},t.opaqueZBufferPass=n=>t.zBufferPass(n),t.cameraPass=n=>{n&&t.clear()},t.getAspectRatio=()=>{const n=e._parent.getSizeByReference(),r=e.renderable.getViewportByReference();return n[0]*(r[2]-r[0])/((r[3]-r[1])*n[1])},t.getTiledSizeAndOrigin=()=>{const n=e.renderable.getViewportByReference(),r=[0,0,1,1],a=n[0]-r[0],s=n[1]-r[1],o=e._parent.normalizedDisplayToDisplay(a,s),i=Math.round(o[0]),l=Math.round(o[1]),c=n[2]-r[0],u=n[3]-r[1],f=e._parent.normalizedDisplayToDisplay(c,u);let d=Math.round(f[0])-i,p=Math.round(f[1])-l;return d<0&&(d=0),p<0&&(p=0),{usize:d,vsize:p,lowerLeftU:i,lowerLeftV:l}},t.clear=()=>{let n=0;const r=e.context;if(!e.renderable.getTransparent()){const s=e.renderable.getBackgroundByReference();e.context.clearColor(s[0],s[1],s[2],s[3]),n|=r.COLOR_BUFFER_BIT}e.renderable.getPreserveDepthBuffer()||(r.clearDepth(1),n|=r.DEPTH_BUFFER_BIT,e.context.depthMask(!0)),r.colorMask(!0,!0,!0,!0);const a=t.getTiledSizeAndOrigin();r.enable(r.SCISSOR_TEST),r.scissor(a.lowerLeftU,a.lowerLeftV,a.usize,a.vsize),r.viewport(a.lowerLeftU,a.lowerLeftV,a.usize,a.vsize),n&&r.clear(n),r.enable(r.DEPTH_TEST)},t.releaseGraphicsResources=()=>{e.selector!==null&&e.selector.releaseGraphicsResources(),e.renderable&&e.renderable.getViewProps().forEach(n=>{n.modified()})},t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))}}const EW={context:null,_openGLRenderWindow:null,selector:null};function kW(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,EW,n),gn.extend(t,e,n),wr(t,e,["shaderCache"]),Dn(t,e,["selector"]),nd(t,e,["openGLRenderWindow"]),xW(t,e)}const OW=Ft(kW,"vtkOpenGLRenderer");Xn("vtkRenderer",OW);function MW(t,e){e.classHierarchy.push("vtkOpenGLActor"),t.buildPass=n=>{if(n){e._openGLRenderWindow=t.getFirstAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(let r=0;r<e.children.length;r++){const a=e.children[r];a.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(a)):e.oglmapper=a}}},t.traverseZBufferPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseOpaqueZBufferPass=n=>t.traverseOpaquePass(n),t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.activateTextures=()=>{if(e.ogltextures){e.activeTextures=[];for(let n=0;n<e.ogltextures.length;n++){const r=e.ogltextures[n];r.render(),r.getHandle()&&e.activeTextures.push(r)}}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.zBufferPass=(n,r)=>t.opaquePass(n,r),t.opaqueZBufferPass=(n,r)=>t.opaquePass(n,r),t.opaquePass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let a=0;a<e.activeTextures.length;a++)e.activeTextures[a].deactivate()},t.translucentPass=(n,r)=>{if(n)e.context.depthMask(!1),t.activateTextures();else if(e.activeTextures)for(let a=0;a<e.activeTextures.length;a++)e.activeTextures[a].deactivate()},t.getKeyMatrices=()=>(e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(e.renderable.computeMatrix(),Un(e.keyMatrices.mcwc,e.renderable.getMatrix()),$t(e.keyMatrices.mcwc,e.keyMatrices.mcwc),e.renderable.getIsIdentity()?Oa(e.keyMatrices.normalMatrix):(Yh(e.keyMatrices.normalMatrix,e.keyMatrices.mcwc),Qf(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),F1(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),e.keyMatrixTime.modified()),e.keyMatrices)}const RW={context:null,keyMatrixTime:null,keyMatrices:null,activeTextures:null};function _W(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,RW,n),gn.extend(t,e,n),e.keyMatrixTime={},dn(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:Oa(new Float64Array(9)),mcwc:ct(new Float64Array(16))},Dn(t,e,["context"]),wr(t,e,["activeTextures"]),MW(t,e)}const VW=Ft(_W);Xn("vtkActor",VW);function DW(t,e){e.classHierarchy.push("vtkOpenGLActor2D"),t.buildPass=n=>{if(n){if(!e.renderable)return;e._openGLRenderWindow=t.getFirstAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(let r=0;r<e.children.length;r++){const a=e.children[r];a.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(a)):e.oglmapper=a}}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementOverlayActorCount()}},t.traverseOpaquePass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseOverlayPass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.activateTextures=()=>{if(e.ogltextures){e.activeTextures=[];for(let n=0;n<e.ogltextures.length;n++){const r=e.ogltextures[n];r.render(),r.getHandle()&&e.activeTextures.push(r)}}},t.opaquePass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let a=0;a<e.activeTextures.length;a++)e.activeTextures[a].deactivate()},t.translucentPass=(n,r)=>{if(n)e.context.depthMask(!1),t.activateTextures();else if(e.activeTextures)for(let a=0;a<e.activeTextures.length;a++)e.activeTextures[a].deactivate()},t.overlayPass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let a=0;a<e.activeTextures.length;a++)e.activeTextures[a].deactivate()}}const LW={context:null,activeTextures:null};function NW(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,LW,n),gn.extend(t,e,n),Dn(t,e,["context"]),wr(t,e,["activeTextures"]),DW(t,e)}const BW=Ft(NW);Xn("vtkActor2D",BW);function qp(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function FW(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function YO(t){let e,n,r;t.length!==2?(e=qp,n=(i,l)=>qp(t(i),l),r=(i,l)=>t(i)-l):(e=t===qp||t===FW?t:$W,n=t,r=t);function a(i,l,c=0,u=i.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(i[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(i,l,c=0,u=i.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(i[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function o(i,l,c=0,u=i.length){const f=a(i,l,c,u-1);return f>c&&r(i[f-1],l)>-r(i[f],l)?f-1:f}return{left:a,center:o,right:s}}function $W(){return 0}function UW(t){return t===null?NaN:+t}const AW=YO(qp),WW=AW.right;YO(UW).center;const IW=Math.sqrt(50),PW=Math.sqrt(10),GW=Math.sqrt(2);function qg(t,e,n){const r=(e-t)/Math.max(0,n),a=Math.floor(Math.log10(r)),s=r/Math.pow(10,a),o=s>=IW?10:s>=PW?5:s>=GW?2:1;let i,l,c;return a<0?(c=Math.pow(10,-a)/o,i=Math.round(t*c),l=Math.round(e*c),i/c<t&&++i,l/c>e&&--l,c=-c):(c=Math.pow(10,a)*o,i=Math.round(t/c),l=Math.round(e/c),i*c<t&&++i,l*c>e&&--l),l<i&&.5<=n&&n<2?qg(t,e,n*2):[i,l,c]}function zW(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[a,s,o]=r?qg(e,t,n):qg(t,e,n);if(!(s>=a))return[];const i=s-a+1,l=new Array(i);if(r)if(o<0)for(let c=0;c<i;++c)l[c]=(s-c)/-o;else for(let c=0;c<i;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<i;++c)l[c]=(a+c)/-o;else for(let c=0;c<i;++c)l[c]=(a+c)*o;return l}function By(t,e,n){return e=+e,t=+t,n=+n,qg(t,e,n)[2]}function HW(t,e,n){e=+e,t=+t,n=+n;const r=e<t,a=r?By(e,t,n):By(t,e,n);return(r?-1:1)*(a<0?1/-a:a)}function KW(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Q1(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function qO(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function rd(){}var mf=.7,Xg=1/mf,Sc="\\s*([+-]?\\d+)\\s*",Cf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jW=/^#([0-9a-f]{3,8})$/,YW=new RegExp(`^rgb\\(${Sc},${Sc},${Sc}\\)$`),qW=new RegExp(`^rgb\\(${xs},${xs},${xs}\\)$`),XW=new RegExp(`^rgba\\(${Sc},${Sc},${Sc},${Cf}\\)$`),ZW=new RegExp(`^rgba\\(${xs},${xs},${xs},${Cf}\\)$`),JW=new RegExp(`^hsl\\(${Cf},${xs},${xs}\\)$`),QW=new RegExp(`^hsla\\(${Cf},${xs},${xs},${Cf}\\)$`),bw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Q1(rd,Sf,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ww,formatHex:ww,formatHex8:eI,formatHsl:tI,formatRgb:Tw,toString:Tw});function ww(){return this.rgb().formatHex()}function eI(){return this.rgb().formatHex8()}function tI(){return XO(this).formatHsl()}function Tw(){return this.rgb().formatRgb()}function Sf(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=jW.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?xw(e):n===3?new Xr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Fd(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Fd(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=YW.exec(t))?new Xr(e[1],e[2],e[3],1):(e=qW.exec(t))?new Xr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=XW.exec(t))?Fd(e[1],e[2],e[3],e[4]):(e=ZW.exec(t))?Fd(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=JW.exec(t))?Ow(e[1],e[2]/100,e[3]/100,1):(e=QW.exec(t))?Ow(e[1],e[2]/100,e[3]/100,e[4]):bw.hasOwnProperty(t)?xw(bw[t]):t==="transparent"?new Xr(NaN,NaN,NaN,0):null}function xw(t){return new Xr(t>>16&255,t>>8&255,t&255,1)}function Fd(t,e,n,r){return r<=0&&(t=e=n=NaN),new Xr(t,e,n,r)}function nI(t){return t instanceof rd||(t=Sf(t)),t?(t=t.rgb(),new Xr(t.r,t.g,t.b,t.opacity)):new Xr}function Fy(t,e,n,r){return arguments.length===1?nI(t):new Xr(t,e,n,r??1)}function Xr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Q1(Xr,Fy,qO(rd,{brighter(t){return t=t==null?Xg:Math.pow(Xg,t),new Xr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?mf:Math.pow(mf,t),new Xr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Xr(sl(this.r),sl(this.g),sl(this.b),Zg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ew,formatHex:Ew,formatHex8:rI,formatRgb:kw,toString:kw}));function Ew(){return`#${ji(this.r)}${ji(this.g)}${ji(this.b)}`}function rI(){return`#${ji(this.r)}${ji(this.g)}${ji(this.b)}${ji((isNaN(this.opacity)?1:this.opacity)*255)}`}function kw(){const t=Zg(this.opacity);return`${t===1?"rgb(":"rgba("}${sl(this.r)}, ${sl(this.g)}, ${sl(this.b)}${t===1?")":`, ${t})`}`}function Zg(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function sl(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ji(t){return t=sl(t),(t<16?"0":"")+t.toString(16)}function Ow(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ka(t,e,n,r)}function XO(t){if(t instanceof Ka)return new Ka(t.h,t.s,t.l,t.opacity);if(t instanceof rd||(t=Sf(t)),!t)return new Ka;if(t instanceof Ka)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,i=s-a,l=(s+a)/2;return i?(e===s?o=(n-r)/i+(n<r)*6:n===s?o=(r-e)/i+2:o=(e-n)/i+4,i/=l<.5?s+a:2-s-a,o*=60):i=l>0&&l<1?0:o,new Ka(o,i,l,t.opacity)}function aI(t,e,n,r){return arguments.length===1?XO(t):new Ka(t,e,n,r??1)}function Ka(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Q1(Ka,aI,qO(rd,{brighter(t){return t=t==null?Xg:Math.pow(Xg,t),new Ka(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?mf:Math.pow(mf,t),new Ka(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new Xr(h0(t>=240?t-240:t+120,a,r),h0(t,a,r),h0(t<120?t+240:t-120,a,r),this.opacity)},clamp(){return new Ka(Mw(this.h),$d(this.s),$d(this.l),Zg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Zg(this.opacity);return`${t===1?"hsl(":"hsla("}${Mw(this.h)}, ${$d(this.s)*100}%, ${$d(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Mw(t){return t=(t||0)%360,t<0?t+360:t}function $d(t){return Math.max(0,Math.min(1,t||0))}function h0(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const eC=t=>()=>t;function sI(t,e){return function(n){return t+n*e}}function oI(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function iI(t){return(t=+t)==1?ZO:function(e,n){return n-e?oI(e,n,t):eC(isNaN(e)?n:e)}}function ZO(t,e){var n=e-t;return n?sI(t,n):eC(isNaN(t)?e:t)}const Rw=function t(e){var n=iI(e);function r(a,s){var o=n((a=Fy(a)).r,(s=Fy(s)).r),i=n(a.g,s.g),l=n(a.b,s.b),c=ZO(a.opacity,s.opacity);return function(u){return a.r=o(u),a.g=i(u),a.b=l(u),a.opacity=c(u),a+""}}return r.gamma=t,r}(1);function lI(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),a;return function(s){for(a=0;a<n;++a)r[a]=t[a]*(1-s)+e[a]*s;return r}}function cI(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function uI(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,a=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)a[o]=tC(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(i){for(o=0;o<r;++o)s[o]=a[o](i);return s}}function fI(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Jg(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function dI(t,e){var n={},r={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=tC(t[a],e[a]):r[a]=e[a];return function(s){for(a in n)r[a]=n[a](s);return r}}var $y=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,v0=new RegExp($y.source,"g");function pI(t){return function(){return t}}function gI(t){return function(e){return t(e)+""}}function hI(t,e){var n=$y.lastIndex=v0.lastIndex=0,r,a,s,o=-1,i=[],l=[];for(t=t+"",e=e+"";(r=$y.exec(t))&&(a=v0.exec(e));)(s=a.index)>n&&(s=e.slice(n,s),i[o]?i[o]+=s:i[++o]=s),(r=r[0])===(a=a[0])?i[o]?i[o]+=a:i[++o]=a:(i[++o]=null,l.push({i:o,x:Jg(r,a)})),n=v0.lastIndex;return n<e.length&&(s=e.slice(n),i[o]?i[o]+=s:i[++o]=s),i.length<2?l[0]?gI(l[0].x):pI(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)i[(f=l[u]).i]=f.x(c);return i.join("")})}function tC(t,e){var n=typeof e,r;return e==null||n==="boolean"?eC(e):(n==="number"?Jg:n==="string"?(r=Sf(e))?(e=r,Rw):hI:e instanceof Sf?Rw:e instanceof Date?fI:cI(e)?lI:Array.isArray(e)?uI:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?dI:Jg)(t,e)}function vI(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function yI(t){return function(){return t}}function mI(t){return+t}var _w=[0,1];function dc(t){return t}function Uy(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:yI(isNaN(e)?NaN:.5)}function CI(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function SI(t,e,n){var r=t[0],a=t[1],s=e[0],o=e[1];return a<r?(r=Uy(a,r),s=n(o,s)):(r=Uy(r,a),s=n(s,o)),function(i){return s(r(i))}}function bI(t,e,n){var r=Math.min(t.length,e.length)-1,a=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)a[o]=Uy(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(i){var l=WW(t,i,1,r)-1;return s[l](a[l](i))}}function wI(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function TI(){var t=_w,e=_w,n=tC,r,a,s,o=dc,i,l,c;function u(){var d=Math.min(t.length,e.length);return o!==dc&&(o=CI(t[0],t[d-1])),i=d>2?bI:SI,l=c=null,f}function f(d){return d==null||isNaN(d=+d)?s:(l||(l=i(t.map(r),e,n)))(r(o(d)))}return f.invert=function(d){return o(a((c||(c=i(e,t.map(r),Jg)))(d)))},f.domain=function(d){return arguments.length?(t=Array.from(d,mI),u()):t.slice()},f.range=function(d){return arguments.length?(e=Array.from(d),u()):e.slice()},f.rangeRound=function(d){return e=Array.from(d),n=vI,u()},f.clamp=function(d){return arguments.length?(o=d?!0:dc,u()):o!==dc},f.interpolate=function(d){return arguments.length?(n=d,u()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,p){return r=d,a=p,u()}}function xI(){return TI()(dc,dc)}function EI(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Qg(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Nc(t){return t=Qg(Math.abs(t)),t?t[1]:NaN}function kI(t,e){return function(n,r){for(var a=n.length,s=[],o=0,i=t[0],l=0;a>0&&i>0&&(l+i+1>r&&(i=Math.max(1,r-l)),s.push(n.substring(a-=i,a+i)),!((l+=i+1)>r));)i=t[o=(o+1)%t.length];return s.reverse().join(e)}}function OI(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var MI=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function eh(t){if(!(e=MI.exec(t)))throw new Error("invalid format: "+t);var e;return new nC({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}eh.prototype=nC.prototype;function nC(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}nC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function RI(t){e:for(var e=t.length,n=1,r=-1,a;n<e;++n)switch(t[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(a+1):t}var JO;function _I(t,e){var n=Qg(t,e);if(!n)return t+"";var r=n[0],a=n[1],s=a-(JO=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Qg(t,Math.max(0,e+s-1))[0]}function Vw(t,e){var n=Qg(t,e);if(!n)return t+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const Dw={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:EI,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Vw(t*100,e),r:Vw,s:_I,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Lw(t){return t}var Nw=Array.prototype.map,Bw=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function VI(t){var e=t.grouping===void 0||t.thousands===void 0?Lw:kI(Nw.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Lw:OI(Nw.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",i=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f){f=eh(f);var d=f.fill,p=f.align,h=f.sign,g=f.symbol,y=f.zero,m=f.width,b=f.comma,C=f.precision,S=f.trim,T=f.type;T==="n"?(b=!0,T="g"):Dw[T]||(C===void 0&&(C=12),S=!0,T="g"),(y||d==="0"&&p==="=")&&(y=!0,d="0",p="=");var w=g==="$"?n:g==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",x=g==="$"?r:/[%p]/.test(T)?o:"",E=Dw[T],O=/[defgprs%]/.test(T);C=C===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function k(M){var D=w,I=x,B,F,$;if(T==="c")I=E(M)+I,M="";else{M=+M;var N=M<0||1/M<0;if(M=isNaN(M)?l:E(Math.abs(M),C),S&&(M=RI(M)),N&&+M==0&&h!=="+"&&(N=!1),D=(N?h==="("?h:i:h==="-"||h==="("?"":h)+D,I=(T==="s"?Bw[8+JO/3]:"")+I+(N&&h==="("?")":""),O){for(B=-1,F=M.length;++B<F;)if($=M.charCodeAt(B),48>$||$>57){I=($===46?a+M.slice(B+1):M.slice(B))+I,M=M.slice(0,B);break}}}b&&!y&&(M=e(M,1/0));var W=D.length+M.length+I.length,_=W<m?new Array(m-W+1).join(d):"";switch(b&&y&&(M=e(_+M,_.length?m-I.length:1/0),_=""),p){case"<":M=D+M+I+_;break;case"=":M=D+_+M+I;break;case"^":M=_.slice(0,W=_.length>>1)+D+M+I+_.slice(W);break;default:M=_+D+M+I;break}return s(M)}return k.toString=function(){return f+""},k}function u(f,d){var p=c((f=eh(f),f.type="f",f)),h=Math.max(-8,Math.min(8,Math.floor(Nc(d)/3)))*3,g=Math.pow(10,-h),y=Bw[8+h/3];return function(m){return p(g*m)+y}}return{format:c,formatPrefix:u}}var Ud,QO,eM;DI({thousands:",",grouping:[3],currency:["$",""]});function DI(t){return Ud=VI(t),QO=Ud.format,eM=Ud.formatPrefix,Ud}function LI(t){return Math.max(0,-Nc(Math.abs(t)))}function NI(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Nc(e)/3)))*3-Nc(Math.abs(t)))}function BI(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Nc(e)-Nc(t))+1}function FI(t,e,n,r){var a=HW(t,e,n),s;switch(r=eh(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=NI(a,o))&&(r.precision=s),eM(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=BI(a,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=LI(a))&&(r.precision=s-(r.type==="%")*2);break}}return QO(r)}function $I(t){var e=t.domain;return t.ticks=function(n){var r=e();return zW(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var a=e();return FI(a[0],a[a.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),a=0,s=r.length-1,o=r[a],i=r[s],l,c,u=10;for(i<o&&(c=o,o=i,i=c,c=a,a=s,s=c);u-- >0;){if(c=By(o,i,n),c===l)return r[a]=o,r[s]=i,e(r);if(c>0)o=Math.floor(o/c)*c,i=Math.ceil(i/c)*c;else if(c<0)o=Math.ceil(o*c)/c,i=Math.floor(i*c)/c;else break;l=c}return t},t}function rC(){var t=xI();return t.copy=function(){return wI(t,rC())},KW.apply(t,arguments),$I(t)}var aC={exports:{}};aC.exports;(function(t){(function(e,n,r){function a(l){var c=this,u=i();c.next=function(){var f=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=f-(c.c=f|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function s(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var u=new a(l),f=c&&c.state,d=u.next;return d.int32=function(){return u.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&s(f,u),d.state=function(){return s(u,{})}),d}function i(){var l=4022871197,c=function(u){u=String(u);for(var f=0;f<u.length;f++){l+=u.charCodeAt(f);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(Hn,t,!1)})(aC);var UI=aC.exports,sC={exports:{}};sC.exports;(function(t){(function(e,n,r){function a(i){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},i===(i|0)?l.x=i:c+=i;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function s(i,l){return l.x=i.x,l.y=i.y,l.z=i.z,l.w=i.w,l}function o(i,l){var c=new a(i),u=l&&l.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var d=c.next()>>>11,p=(c.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=c.next,f.quick=f,u&&(typeof u=="object"&&s(u,c),f.state=function(){return s(c,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(Hn,t,!1)})(sC);var AI=sC.exports,oC={exports:{}};oC.exports;(function(t){(function(e,n,r){function a(i){var l=this,c="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,i===(i|0)?l.x=i:c+=i;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(i,l){return l.x=i.x,l.y=i.y,l.z=i.z,l.w=i.w,l.v=i.v,l.d=i.d,l}function o(i,l){var c=new a(i),u=l&&l.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var d=c.next()>>>11,p=(c.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=c.next,f.quick=f,u&&(typeof u=="object"&&s(u,c),f.state=function(){return s(c,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(Hn,t,!1)})(oC);var WI=oC.exports,iC={exports:{}};iC.exports;(function(t){(function(e,n,r){function a(i){var l=this;l.next=function(){var u=l.x,f=l.i,d,p;return d=u[f],d^=d>>>7,p=d^d<<24,d=u[f+1&7],p^=d^d>>>10,d=u[f+3&7],p^=d^d>>>3,d=u[f+4&7],p^=d^d<<7,d=u[f+7&7],d=d^d<<13,p^=d^d<<9,u[f]=p,l.i=f+1&7,p};function c(u,f){var d,p=[];if(f===(f|0))p[0]=f;else for(f=""+f,d=0;d<f.length;++d)p[d&7]=p[d&7]<<15^f.charCodeAt(d)+p[d+1&7]<<13;for(;p.length<8;)p.push(0);for(d=0;d<8&&p[d]===0;++d);for(d==8?p[7]=-1:p[d],u.x=p,u.i=0,d=256;d>0;--d)u.next()}c(l,i)}function s(i,l){return l.x=i.x.slice(),l.i=i.i,l}function o(i,l){i==null&&(i=+new Date);var c=new a(i),u=l&&l.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var d=c.next()>>>11,p=(c.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=c.next,f.quick=f,u&&(u.x&&s(u,c),f.state=function(){return s(c,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(Hn,t,!1)})(iC);var II=iC.exports,lC={exports:{}};lC.exports;(function(t){(function(e,n,r){function a(i){var l=this;l.next=function(){var u=l.w,f=l.X,d=l.i,p,h;return l.w=u=u+1640531527|0,h=f[d+34&127],p=f[d=d+1&127],h^=h<<13,p^=p<<17,h^=h>>>15,p^=p>>>12,h=f[d]=h^p,l.i=d,h+(u^u>>>16)|0};function c(u,f){var d,p,h,g,y,m=[],b=128;for(f===(f|0)?(p=f,f=null):(f=f+"\0",p=0,b=Math.max(b,f.length)),h=0,g=-32;g<b;++g)f&&(p^=f.charCodeAt((g+32)%f.length)),g===0&&(y=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,g>=0&&(y=y+1640531527|0,d=m[g&127]^=p+y,h=d==0?h+1:0);for(h>=128&&(m[(f&&f.length||0)&127]=-1),h=127,g=4*128;g>0;--g)p=m[h+34&127],d=m[h=h+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,m[h]=p^d;u.w=y,u.X=m,u.i=h}c(l,i)}function s(i,l){return l.i=i.i,l.w=i.w,l.X=i.X.slice(),l}function o(i,l){i==null&&(i=+new Date);var c=new a(i),u=l&&l.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var d=c.next()>>>11,p=(c.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=c.next,f.quick=f,u&&(u.X&&s(u,c),f.state=function(){return s(c,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(Hn,t,!1)})(lC);var PI=lC.exports,cC={exports:{}};cC.exports;(function(t){(function(e,n,r){function a(i){var l=this,c="";l.next=function(){var f=l.b,d=l.c,p=l.d,h=l.a;return f=f<<25^f>>>7^d,d=d-p|0,p=p<<24^p>>>8^h,h=h-f|0,l.b=f=f<<20^f>>>12^d,l.c=d=d-p|0,l.d=p<<16^d>>>16^h,l.a=h-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,i===Math.floor(i)?(l.a=i/4294967296|0,l.b=i|0):c+=i;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function s(i,l){return l.a=i.a,l.b=i.b,l.c=i.c,l.d=i.d,l}function o(i,l){var c=new a(i),u=l&&l.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var d=c.next()>>>11,p=(c.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},f.int32=c.next,f.quick=f,u&&(typeof u=="object"&&s(u,c),f.state=function(){return s(c,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(Hn,t,!1)})(cC);var GI=cC.exports,tM={exports:{}};const zI={},HI=Object.freeze(Object.defineProperty({__proto__:null,default:zI},Symbol.toStringTag,{value:"Module"})),KI=UU(HI);(function(t){(function(e,n,r){var a=256,s=6,o=52,i="random",l=r.pow(a,s),c=r.pow(2,o),u=c*2,f=a-1,d;function p(S,T,w){var x=[];T=T==!0?{entropy:!0}:T||{};var E=m(y(T.entropy?[S,C(n)]:S??b(),3),x),O=new h(x),k=function(){for(var M=O.g(s),D=l,I=0;M<c;)M=(M+I)*a,D*=a,I=O.g(1);for(;M>=u;)M/=2,D/=2,I>>>=1;return(M+I)/D};return k.int32=function(){return O.g(4)|0},k.quick=function(){return O.g(4)/4294967296},k.double=k,m(C(O.S),n),(T.pass||w||function(M,D,I,B){return B&&(B.S&&g(B,O),M.state=function(){return g(O,{})}),I?(r[i]=M,D):M})(k,E,"global"in T?T.global:this==r,T.state)}function h(S){var T,w=S.length,x=this,E=0,O=x.i=x.j=0,k=x.S=[];for(w||(S=[w++]);E<a;)k[E]=E++;for(E=0;E<a;E++)k[E]=k[O=f&O+S[E%w]+(T=k[E])],k[O]=T;(x.g=function(M){for(var D,I=0,B=x.i,F=x.j,$=x.S;M--;)D=$[B=f&B+1],I=I*a+$[f&($[B]=$[F=f&F+D])+($[F]=D)];return x.i=B,x.j=F,I})(a)}function g(S,T){return T.i=S.i,T.j=S.j,T.S=S.S.slice(),T}function y(S,T){var w=[],x=typeof S,E;if(T&&x=="object")for(E in S)try{w.push(y(S[E],T-1))}catch{}return w.length?w:x=="string"?S:S+"\0"}function m(S,T){for(var w=S+"",x,E=0;E<w.length;)T[f&E]=f&(x^=T[f&E]*19)+w.charCodeAt(E++);return C(T)}function b(){try{var S;return d&&(S=d.randomBytes)?S=S(a):(S=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(S)),C(S)}catch{var T=e.navigator,w=T&&T.plugins;return[+new Date,e,w,e.screen,C(n)]}}function C(S){return String.fromCharCode.apply(0,S)}if(m(r.random(),n),t.exports){t.exports=p;try{d=KI}catch{}}else r["seed"+i]=p})(typeof self<"u"?self:Hn,[],Math)})(tM);var jI=tM.exports,YI=UI,qI=AI,XI=WI,ZI=II,JI=PI,QI=GI,Rl=jI;Rl.alea=YI;Rl.xor128=qI;Rl.xorwow=XI;Rl.xorshift7=ZI;Rl.xor4096=JI;Rl.tychei=QI;var eP=Rl;const nM=fa(eP),uC=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],tP=[1,0,0,0,1,0,0,0,1],Jh=1e-6,fC=1e-12,{vtkErrorMacro:rM,vtkWarningMacro:yl}=A;let aM=0;const Fw=20;function ad(t){return()=>rM(`vtkMath::${t} - NOT IMPLEMENTED`)}function Ju(t,e,n,r){let a;for(let s=0;s<e;s++)a=t[n*e+s],t[n*e+s]=t[r*e+s],t[r*e+s]=a}function Au(t,e,n,r){let a;for(let s=0;s<e;s++)a=t[s*e+n],t[s*e+n]=t[s*e+r],t[s*e+r]=a}function En(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3;const e=Array(t);for(let n=0;n<t;++n)e[n]=0;return e}const nP=()=>Math.PI;function xn(t){return t/180*Math.PI}function Bc(t){return t*180/Math.PI}const{round:Wu,floor:sM,ceil:rP,min:aP,max:sP}=Math;function oP(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=1/0;for(let a=e,s=t.length;a<s;a+=n)t[a]<r&&(r=t[a]);return r}function iP(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=-1/0;for(let a=e,s=t.length;a<s;a+=n)r<t[a]&&(r=t[a]);return r}function lP(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=1/0,a=-1/0;for(let s=e,o=t.length;s<o;s+=n)t[s]<r&&(r=t[s]),a<t[s]&&(a=t[s]);return[r,a]}const cP=ad("ceilLog2"),uP=ad("factorial");function ma(t){let e=1;for(;e<t;)e*=2;return e}function Iu(t){return t===ma(t)}function fP(t,e){let n=1;for(let r=1;r<=e;++r)n*=(t-r+1)/r;return Math.floor(n)}function dP(t,e){if(t<e)return 0;const n=En(e);for(let r=0;r<e;++r)n[r]=r;return n}function pP(t,e,n){let r=0;for(let a=e-1;a>=0;--a)if(n[a]<t-e+a){let s=n[a]+1;for(;a<e;)n[a++]=s++;r=1;break}return r}function gP(t){nM(`${t}`,{global:!0}),aM=t}function hP(){return aM}function vP(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:1)-t;return t+n*Math.random()}const yP=ad("gaussian");function bf(t,e,n){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n}function Es(t,e,n){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n}function th(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,t}function oM(t,e){return t[0]*=e,t[1]*=e,t}function Ay(t,e,n,r){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r[2]=t[2]+e[2]*n,r}function mP(t,e,n,r){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r}function kt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function CP(t,e,n){n[0]=t[0]*e[0],n[1]=t[0]*e[1],n[2]=t[0]*e[2],n[3]=t[1]*e[0],n[4]=t[1]*e[1],n[5]=t[1]*e[2],n[6]=t[2]*e[0],n[7]=t[2]*e[1],n[8]=t[2]*e[2]}function _r(t,e,n){const r=t[1]*e[2]-t[2]*e[1],a=t[2]*e[0]-t[0]*e[2],s=t[0]*e[1]-t[1]*e[0];return n[0]=r,n[1]=a,n[2]=s,n}function Xa(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;switch(e){case 1:return Math.abs(t);case 2:return Math.sqrt(t[0]*t[0]+t[1]*t[1]);case 3:return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);default:{let n=0;for(let r=0;r<e;r++)n+=t[r]*t[r];return Math.sqrt(n)}}}function ts(t){const e=Xa(t);return e!==0&&(t[0]/=e,t[1]/=e,t[2]/=e),e}function SP(t,e,n,r){const a=t[0]*t[0],s=t[1]*t[1],o=t[2]*t[2],i=Math.sqrt(a+s+o);let l,c,u;a>s&&a>o?(l=0,c=1,u=2):s>o?(l=1,c=2,u=0):(l=2,c=0,u=1);const f=t[l]/i,d=t[c]/i,p=t[u]/i,h=Math.sqrt(f*f+p*p);if(r!==0){const g=Math.sin(r),y=Math.cos(r);e&&(e[l]=(p*y-f*d*g)/h,e[c]=g*h,e[u]=(-(f*y)-d*p*g)/h),n&&(n[l]=(-(p*g)-f*d*y)/h,n[c]=y*h,n[u]=(f*g-d*p*y)/h)}else e&&(e[l]=p/h,e[c]=0,e[u]=-f/h),n&&(n[l]=-f*d/h,n[c]=h,n[u]=-d*p/h)}function bP(t,e,n){const r=kt(e,e);if(r===0)return n[0]=0,n[1]=0,n[2]=0,!1;const a=kt(t,e)/r;for(let s=0;s<3;s++)n[s]=e[s];return th(n,a),!0}function Wy(t,e){return t[0]*e[0]+t[1]*e[1]}function wP(t,e,n){const r=Wy(e,e);if(r===0)return n[0]=0,n[1]=0,!1;const a=Wy(t,e)/r;for(let s=0;s<2;s++)n[s]=e[s];return oM(n,a),!0}function qr(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])+(t[2]-e[2])*(t[2]-e[2])}function TP(t,e){const n=[0,0,0];return _r(t,e,n),Math.atan2(Xa(n),kt(t,e))}function xP(t,e,n){const r=Math.abs(t-n);return 1/Math.sqrt(2*Math.PI*e)*Math.exp(-(r**2)/(2*e))}function EP(t,e,n){const r=Math.abs(t-n);return Math.exp(-(r**2)/(2*e))}function kP(t,e,n){n[0]=t[0]*e[0],n[1]=t[0]*e[1],n[2]=t[1]*e[0],n[3]=t[1]*e[1]}function iM(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function lM(t){const e=iM(t);return e!==0&&(t[0]/=e,t[1]/=e),e}function $n(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===2?e[0][0]*e[1][1]-e[1][0]*e[0][1]:e.length===4?e[0]*e[3]-e[1]*e[2]:Number.NaN}function OP(t,e){let n,r,a;const s=[0,0,0];for(let o=0;o<3;o++)a=Math.abs(t[o*3]),(r=Math.abs(t[o*3+1]))>a&&(a=r),(r=Math.abs(t[o*3+2]))>a&&(a=r),s[o]=1/a;a=s[0]*Math.abs(t[0]),n=0,(r=s[1]*Math.abs(t[3]))>=a&&(a=r,n=1),(r=s[2]*Math.abs(t[6]))>=a&&(n=2),n!==0&&(Ju(t,3,n,0),s[n]=s[0]),e[0]=n,t[3]/=t[0],t[6]/=t[0],t[4]-=t[3]*t[1],t[7]-=t[6]*t[1],a=s[1]*Math.abs(t[4]),n=1,(r=s[2]*Math.abs(t[7]))>=a&&(n=2,Ju(t,3,1,2),s[2]=s[1]),e[1]=n,t[7]/=t[4],t[5]-=t[3]*t[2],t[8]-=t[6]*t[2]+t[7]*t[5],e[2]=2}function MP(t,e,n){let r=n[e[0]];n[e[0]]=n[0],n[0]=r,r=n[e[1]],n[e[1]]=n[1],n[1]=r-t[3]*n[0],r=n[e[2]],n[e[2]]=n[2],n[2]=r-t[6]*n[0]-t[7]*n[1],n[2]/=t[8],n[1]=(n[1]-t[5]*n[2])/t[4],n[0]=(n[0]-t[1]*n[1]-t[2]*n[2])/t[0]}function RP(t,e,n){const r=t[0],a=t[1],s=t[2],o=t[3],i=t[4],l=t[5],c=t[6],u=t[7],f=t[8],d=+$n(i,u,l,f),p=-$n(o,c,l,f),h=+$n(o,c,i,u),g=-$n(a,u,s,f),y=+$n(r,c,s,f),m=-$n(r,c,a,u),b=+$n(a,i,s,l),C=-$n(r,o,s,l),S=+$n(r,o,a,i),T=r*d+a*p+s*h,w=d*e[0]+g*e[1]+b*e[2],x=p*e[0]+y*e[1]+C*e[2],E=h*e[0]+m*e[1]+S*e[2];n[0]=w/T,n[1]=x/T,n[2]=E/T}function Xp(t,e,n){const r=t[0]*e[0]+t[1]*e[1]+t[2]*e[2],a=t[3]*e[0]+t[4]*e[1]+t[5]*e[2],s=t[6]*e[0]+t[7]*e[1]+t[8]*e[2];n[0]=r,n[1]=a,n[2]=s}function Iy(t,e,n){const r=[...t],a=[...e];for(let s=0;s<3;s++)n[s]=r[0]*a[s]+r[1]*a[s+3]+r[2]*a[s+6],n[s+3]=r[3]*a[s]+r[4]*a[s+3]+r[5]*a[s+6],n[s+6]=r[6]*a[s]+r[7]*a[s+3]+r[8]*a[s+6]}function _P(t,e,n,r,a,s,o){r!==a&&rM("Number of columns of A must match number of rows of B.");const i=[...t],l=[...e];for(let c=0;c<n;c++)for(let u=0;u<s;u++){o[c*s+u]=0;for(let f=0;f<r;f++)o[c*s+u]+=i[c*r+f]*l[u+s*f]}}function bc(t,e){let n;n=t[3],e[3]=t[1],e[1]=n,n=t[6],e[6]=t[2],e[2]=n,n=t[7],e[7]=t[5],e[5]=n,e[0]=t[0],e[4]=t[4],e[8]=t[8]}function VP(t,e){const n=t[0],r=t[1],a=t[2],s=t[3],o=t[4],i=t[5],l=t[6],c=t[7],u=t[8],f=+$n(o,c,i,u),d=-$n(s,l,i,u),p=+$n(s,l,o,c),h=-$n(r,c,a,u),g=+$n(n,l,a,u),y=-$n(n,l,r,c),m=+$n(r,o,a,i),b=-$n(n,s,a,i),C=+$n(n,s,r,o),S=n*f+r*d+a*p;S===0&&yl("Matrix has 0 determinant"),e[0]=f/S,e[3]=d/S,e[6]=p/S,e[1]=h/S,e[4]=g/S,e[7]=y/S,e[2]=m/S,e[5]=b/S,e[8]=C/S}function Qh(t){return t[0]*t[4]*t[8]+t[3]*t[7]*t[2]+t[6]*t[1]*t[5]-t[0]*t[7]*t[5]-t[3]*t[1]*t[8]-t[6]*t[4]*t[2]}function cM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Jh;if(t.length!==e.length)return!1;function r(a,s){return Math.abs(a-e[s])<=n}return t.every(r)}const sd=cM;function uM(t){for(let e=0;e<3;e++)t[e*3]=t[e*3+1]=t[e*3+2]=0,t[e*3+e]=1}function fM(t,e){for(let n=0;n<t;n++){for(let r=0;r<t;r++)e[n*t+r]=0;e[n*t+n]=1}return e}function DP(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jh;return sd(t,uC,e)}function LP(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jh;return sd(t,tP,e)}function dM(t,e){const n=t[0]*t[0],r=t[0]*t[1],a=t[0]*t[2],s=t[0]*t[3],o=t[1]*t[1],i=t[2]*t[2],l=t[3]*t[3],c=t[1]*t[2],u=t[1]*t[3],f=t[2]*t[3],d=o+i+l;let p=1/(n+d);const h=(n-d)*p;p*=2,e[0]=o*p+h,e[3]=(c+s)*p,e[6]=(u-a)*p,e[1]=(c-s)*p,e[4]=i*p+h,e[7]=(f+r)*p,e[2]=(u+a)*p,e[5]=(f-r)*p,e[8]=l*p+h}function Zp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!`${t}`.includes("e"))return+`${Math.round(`${t}e+${e}`)}e-${e}`;const n=`${t}`.split("e");let r="";return+n[1]+e>0&&(r="+"),+`${Math.round(`${+n[0]}e${r}${+n[1]+e}`)}e-${e}`}function Py(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return e[0]=Zp(t[0],n),e[1]=Zp(t[1],n),e[2]=Zp(t[2],n),e}function od(t,e,n,r){let a,s,o,i,l,c,u,f,d,p,h,g,y,m,b,C;const S=En(e),T=En(e),w=(E,O,k)=>{m=E[O],y=E[k],E[O]=m-g*(y+m*p),E[k]=y+g*(m-y*p)};for(fM(e,r),l=0;l<e;l++)S[l]=n[l]=t[l+l*e],T[l]=0;for(a=0;a<Fw;a++){for(h=0,l=0;l<e-1;l++)for(i=l+1;i<e;i++)h+=Math.abs(t[l*e+i]);if(h===0)break;for(a<3?u=.2*h/(e*e):u=0,l=0;l<e-1;l++)for(i=l+1;i<e;i++)if(m=100*Math.abs(t[l*e+i]),a>3&&Math.abs(n[l])+m===Math.abs(n[l])&&Math.abs(n[i])+m===Math.abs(n[i]))t[l*e+i]=0;else if(Math.abs(t[l*e+i])>u){for(y=n[i]-n[l],Math.abs(y)+m===Math.abs(y)?d=t[l*e+i]/y:(f=.5*y/t[l*e+i],d=1/(Math.abs(f)+Math.sqrt(1+f*f)),f<0&&(d=-d)),b=1/Math.sqrt(1+d*d),g=d*b,p=g/(1+b),y=d*t[l*e+i],T[l]-=y,T[i]+=y,n[l]-=y,n[i]+=y,t[l*e+i]=0,s=0;s<=l-1;s++)w(t,s*e+l,s*e+i);for(s=l+1;s<=i-1;s++)w(t,l*e+s,s*e+i);for(s=i+1;s<e;s++)w(t,l*e+s,i*e+s);for(s=0;s<e;s++)w(r,s*e+l,s*e+i)}for(l=0;l<e;l++)S[l]+=T[l],n[l]=S[l],T[l]=0}if(a>=Fw)return yl("vtkMath::Jacobi: Error extracting eigenfunctions"),0;for(s=0;s<e-1;s++){for(o=s,C=n[o],a=s+1;a<e;a++)(n[a]>=C||Math.abs(n[a]-C)<fC)&&(o=a,C=n[o]);o!==s&&(n[o]=n[s],n[s]=C,Au(r,e,s,o))}const x=(e>>1)+(e&1);for(c=0,a=0;a<e*e;a++)r[a]>=0&&c++;if(c<x)for(a=0;a<e;a++)r[a*e+s]*=-1;return 1}function pM(t,e){const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];n[0]=t[0]+t[4]+t[8],n[5]=t[0]-t[4]-t[8],n[10]=-t[0]+t[4]-t[8],n[15]=-t[0]-t[4]+t[8],n[1]=n[4]=t[7]-t[5],n[2]=n[8]=t[2]-t[6],n[3]=n[12]=t[3]-t[1],n[6]=n[9]=t[3]+t[1],n[7]=n[13]=t[2]+t[6],n[11]=n[14]=t[7]+t[5];const r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=[0,0,0,0],s=[...n];od(s,4,a,r),e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12]}function NP(t,e,n){const r=t[0]*e[0],a=t[0]*e[1],s=t[0]*e[2],o=t[0]*e[3],i=t[1]*e[0],l=t[1]*e[1],c=t[1]*e[2],u=t[1]*e[3],f=t[2]*e[0],d=t[2]*e[1],p=t[2]*e[2],h=t[2]*e[3],g=t[3]*e[0],y=t[3]*e[1],m=t[3]*e[2],b=t[3]*e[3];n[0]=r-l-p-b,n[1]=a+i+h-m,n[2]=s-u+f+y,n[3]=o+c-d+g}function gM(t,e){for(let d=0;d<9;d++)e[d]=t[d];const n=En(3),r=En(3);let a;for(let d=0;d<3;d++){const p=Math.abs(e[d*3]),h=Math.abs(e[d*3+1]),g=Math.abs(e[d*3+2]);a=h>p?h:p,a=g>a?g:a,n[d]=1,a!==0&&(n[d]/=a)}const s=Math.abs(e[0])*n[0],o=Math.abs(e[3])*n[1],i=Math.abs(e[6])*n[2];r[0]=0,a=s,o>=a&&(a=o,r[0]=1),i>=a&&(r[0]=2),r[0]!==0&&(Au(e,3,r[0],0),n[r[0]]=n[0]);const l=Math.abs(e[4])*n[1],c=Math.abs(e[7])*n[2];r[1]=1,a=l,c>=a&&(r[1]=2,Au(e,3,1,2)),r[2]=2;let u=0;if(Qh(e)<0){u=1;for(let d=0;d<9;d++)e[d]=-e[d]}const f=En(4);if(pM(e,f),dM(f,e),u)for(let d=0;d<9;d++)e[d]=-e[d];r[1]!==1&&Au(e,3,r[1],1),r[0]!==0&&Au(e,3,r[0],0)}function hM(t,e,n){let r,a,s,o,i,l;const c=[...t];if(od(c,3,e,n),e[0]===e[1]&&e[0]===e[2]){uM(n);return}for(bc(n,n),r=0;r<3;r++)if(e[(r+1)%3]===e[(r+2)%3]){for(l=Math.abs(n[r*3]),o=0,a=1;a<3;a++)l<(i=Math.abs(n[r*3+a]))&&(l=i,o=a);o!==r&&(i=e[o],e[o]=e[r],e[r]=i,Ju(n,3,r,o)),n[o*3+o]<0&&(n[o*3]=-n[o*3],n[o*3+1]=-n[o*3+1],n[o*3+2]=-n[o*3+2]),a=(o+1)%3,s=(o+2)%3,n[a*3]=0,n[a*3+1]=0,n[a*3+2]=0,n[a*3+a]=1;const u=_r([n[o*3],n[o*3+1],n[o*3+2]],[n[a*3],n[a*3+1],n[a*3+2]],[]);ts(u);const f=_r(u,[n[o*3],n[o*3+1],n[o*3+2]],[]);for(let d=0;d<3;d++)n[s*3+d]=u[d],n[a*3+d]=f[d];bc(n,n);return}for(l=Math.abs(n[0]),o=0,r=1;r<3;r++)l<(i=Math.abs(n[r*3]))&&(l=i,o=r);if(o!==0){const u=e[o];e[o]=e[0],e[0]=u,Ju(n,3,o,0)}if(Math.abs(n[4])<Math.abs(n[7])){const u=e[2];e[2]=e[1],e[1]=u,Ju(n,3,1,2)}for(r=0;r<2;r++)n[r*3+r]<0&&(n[r*3]=-n[r*3],n[r*3+1]=-n[r*3+1],n[r*3+2]=-n[r*3+2]);Qh(n)<0&&(n[6]=-n[6],n[7]=-n[7],n[8]=-n[8]),bc(n,n)}function BP(t,e,n,r){let a;const s=[...t],o=Qh(s);if(o<0)for(a=0;a<9;a++)s[a]=-s[a];gM(s,e),bc(s,s),Iy(s,e,r),hM(r,n,r),Iy(e,r,e),bc(r,r),o<0&&(n[0]=-n[0],n[1]=-n[1],n[2]=-n[2])}function dC(t,e,n){let r,a,s,o,i=0,l,c,u;const f=En(n);for(r=0;r<n;r++){for(o=0,a=0;a<n;a++)(u=Math.abs(t[r*n+a]))>o&&(o=u);if(o===0)return yl("Unable to factor linear system"),0;f[r]=1/o}for(a=0;a<n;a++){for(r=0;r<a;r++){for(l=t[r*n+a],s=0;s<r;s++)l-=t[r*n+s]*t[s*n+a];t[r*n+a]=l}for(o=0,r=a;r<n;r++){for(l=t[r*n+a],s=0;s<a;s++)l-=t[r*n+s]*t[s*n+a];t[r*n+a]=l,(c=f[r]*Math.abs(l))>=o&&(o=c,i=r)}if(a!==i){for(s=0;s<n;s++)c=t[i*n+s],t[i*n+s]=t[a*n+s],t[a*n+s]=c;f[i]=f[a]}if(e[a]=i,Math.abs(t[a*n+a])<=fC)return yl("Unable to factor linear system"),0;if(a!==n-1)for(c=1/t[a*n+a],r=a+1;r<n;r++)t[r*n+a]*=c}return 1}function pC(t,e,n,r){let a,s,o,i,l;for(o=-1,a=0;a<r;a++){if(i=e[a],l=n[i],n[i]=n[a],o>=0)for(s=o;s<=a-1;s++)l-=t[a*r+s]*n[s];else l!==0&&(o=a);n[a]=l}for(a=r-1;a>=0;a--){for(l=n[a],s=a+1;s<r;s++)l-=t[a*r+s]*n[s];n[a]=l/t[a*r+a]}}function vM(t,e,n){if(n===2){const a=En(2),s=$n(t[0],t[1],t[2],t[3]);return s===0?0:(a[0]=(t[3]*e[0]-t[1]*e[1])/s,a[1]=(-(t[2]*e[0])+t[0]*e[1])/s,e[0]=a[0],e[1]=a[1],1)}if(n===1)return t[0]===0?0:(e[0]/=t[0],1);const r=En(n);return dC(t,r,n)===0?0:(pC(t,r,e,n),1)}function yM(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;const s=r||En(n),o=a||En(n);if(dC(t,s,n)===0)return null;for(let i=0;i<n;i++){for(let l=0;l<n;l++)o[l]=0;o[i]=1,pC(t,s,o,n);for(let l=0;l<n;l++)e[l*n+i]=o[l]}return e}function FP(t,e){let n=+Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let a=0;a<e;a++)for(let s=a;s<e;s++)Math.abs(t[a*e+s])>r&&(r=Math.abs(t[a*e+s]));for(let a=0;a<e;a++)Math.abs(t[a*e+a])<n&&(n=Math.abs(t[a*e+a]));return n===0?Number.MAX_VALUE:r/n}function $P(t,e,n){return od(t,3,e,n)}function Gy(t,e,n,r){if(t<n)return yl("Insufficient number of samples. Underdetermined."),0;let a,s,o;const i=En(n*n),l=En(n),c=En(n*n);for(o=0;o<t;o++)for(a=0;a<n;a++)for(s=a;s<n;s++)i[a*n+s]+=e[o*n+a]*e[o*n+s];for(a=0;a<n;a++)for(s=0;s<a;s++)i[a*n+s]=i[s*n+a];for(od(i,n,l,c),a=0;a<n;a++)r[a]=c[a*n+n-1];return 1}function UP(t,e,n,r,a,s){let o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!0;if(t<n||t<a)return yl("Insufficient number of samples. Underdetermined."),0;const i=En(a);let l=1,c,u=0,f,d,p,h=0;if(o){for(d=0;d<a;d++)i[d]=1;for(f=0;f<t;f++)for(d=0;d<a;d++)Math.abs(r[f*a+d])>fC&&(l=0,i[d]=0);if(l&&a===1)return yl("Detected homogeneous system (Y=0), calling SolveHomogeneousLeastSquares()"),Gy(t,e,n,s);if(l)h=1;else for(d=0;d<a;d++)i[d]&&(h=1)}h&&(c=En(n),u=Gy(t,e,n,c));const g=En(n*n),y=En(n*n),m=En(n*a);for(p=0;p<t;p++)for(f=0;f<n;f++){for(d=f;d<n;d++)g[f*n+d]+=e[p*n+f]*e[p*n+d];for(d=0;d<a;d++)m[f*a+d]+=e[p*n+f]*r[p*a+d]}for(f=0;f<n;f++)for(d=0;d<f;d++)g[f*n+d]=g[d*n+f];const b=yM(g,y,n);if(b)for(f=0;f<n;f++)for(d=0;d<a;d++)for(s[f*a+d]=0,p=0;p<n;p++)s[f*a+d]+=y[f*n+p]*m[p*a+d];if(h){for(d=0;d<a;d++)if(i[d])for(f=0;f<n;f++)s[f*a+d]=c[f*a]}return h?u&&b:b}function AP(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,.5,1];switch(t.length){case 3:return e[0]=parseInt(t[0],16)*17/255,e[1]=parseInt(t[1],16)*17/255,e[2]=parseInt(t[2],16)*17/255,e;case 4:return e[0]=parseInt(t[1],16)*17/255,e[1]=parseInt(t[2],16)*17/255,e[2]=parseInt(t[3],16)*17/255,e;case 6:return e[0]=parseInt(t.substr(0,2),16)/255,e[1]=parseInt(t.substr(2,2),16)/255,e[2]=parseInt(t.substr(4,2),16)/255,e;case 7:return e[0]=parseInt(t.substr(1,2),16)/255,e[1]=parseInt(t.substr(3,2),16)/255,e[2]=parseInt(t.substr(5,2),16)/255,e;case 9:return e[0]=parseInt(t.substr(1,2),16)/255,e[1]=parseInt(t.substr(3,2),16)/255,e[2]=parseInt(t.substr(5,2),16)/255,e[3]=parseInt(t.substr(7,2),16)/255,e;default:return e}}function Pu(t,e){let n,r;const[a,s,o]=t,i=1/3,l=1/6,c=2/3;let u=a,f=a;s>u?u=s:s<f&&(f=s),o>u?u=o:o<f&&(f=o);const d=u;d>0?r=(u-f)/u:r=0,r>0?(a===u?n=l*(s-o)/(u-f):s===u?n=i+l*(o-a)/(u-f):n=c+l*(a-s)/(u-f),n<0&&(n+=1)):n=0,e[0]=n,e[1]=r,e[2]=d}function Ai(t,e){const[n,r,a]=t,s=1/3,o=1/6,i=2/3,l=5/6;let c,u,f;n>o&&n<=s?(u=1,c=(s-n)/o,f=0):n>s&&n<=.5?(u=1,f=(n-s)/o,c=0):n>.5&&n<=i?(f=1,u=(i-n)/o,c=0):n>i&&n<=l?(f=1,c=(n-i)/o,u=0):n>l&&n<=1?(c=1,f=(1-n)/o,u=0):(c=1,u=n/o,f=0),c=r*c+(1-r),u=r*u+(1-r),f=r*f+(1-r),c*=a,u*=a,f*=a,e[0]=c,e[1]=u,e[2]=f}function mM(t,e){const[n,r,a]=t;let s=(n+16)/116,o=r/500+s,i=s-a/200;s**3>.008856?s**=3:s=(s-16/116)/7.787,o**3>.008856?o**=3:o=(o-16/116)/7.787,i**3>.008856?i**=3:i=(i-16/116)/7.787;const l=.9505,c=1,u=1.089;e[0]=l*o,e[1]=c*s,e[2]=u*i}function CM(t,e){const[n,r,a]=t,s=.9505,o=1,i=1.089;let l=n/s,c=r/o,u=a/i;l>.008856?l**=1/3:l=7.787*l+16/116,c>.008856?c**=1/3:c=7.787*c+16/116,u>.008856?u**=1/3:u=7.787*u+16/116,e[0]=116*c-16,e[1]=500*(l-c),e[2]=200*(c-u)}function SM(t,e){const[n,r,a]=t;let s=n*3.2406+r*-1.5372+a*-.4986,o=n*-.9689+r*1.8758+a*.0415,i=n*.0557+r*-.204+a*1.057;s>.0031308?s=1.055*s**(1/2.4)-.055:s*=12.92,o>.0031308?o=1.055*o**(1/2.4)-.055:o*=12.92,i>.0031308?i=1.055*i**(1/2.4)-.055:i*=12.92;let l=s;l<o&&(l=o),l<i&&(l=i),l>1&&(s/=l,o/=l,i/=l),s<0&&(s=0),o<0&&(o=0),i<0&&(i=0),e[0]=s,e[1]=o,e[2]=i}function bM(t,e){let[n,r,a]=t;n>.04045?n=((n+.055)/1.055)**2.4:n/=12.92,r>.04045?r=((r+.055)/1.055)**2.4:r/=12.92,a>.04045?a=((a+.055)/1.055)**2.4:a/=12.92,e[0]=n*.4124+r*.3576+a*.1805,e[1]=n*.2126+r*.7152+a*.0722,e[2]=n*.0193+r*.1192+a*.9505}function Yi(t,e){const n=[0,0,0];bM(t,n),CM(n,e)}function nh(t,e){const n=[0,0,0];mM(t,n),SM(n,e)}function fu(t){return t[0]=1,t[1]=-1,t[2]=1,t[3]=-1,t[4]=1,t[5]=-1,t}function Jp(t){return!(t[1]-t[0]<0)}function WP(t,e,n){return n[0]=Math.min(t[0],e[0]),n[1]=Math.max(t[0],e[0]),n[2]=Math.min(t[1],e[1]),n[3]=Math.max(t[1],e[1]),n[4]=Math.min(t[2],e[2]),n[5]=Math.max(t[2],e[2]),n}function ol(t,e,n){return t<e?e:t>n?n:t}function zy(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[0,0,0];return r[0]=ol(t[0],e[0],n[0]),r[1]=ol(t[1],e[1],n[1]),r[2]=ol(t[2],e[2],n[2]),r}function IP(t,e){let n=0;return e[0]!==e[1]&&(t<e[0]?n=e[0]:t>e[1]?n=e[1]:n=t,n=(n-e[0])/(e[1]-e[0])),n}const PP=ad("GetScalarTypeFittingRange"),GP=ad("GetAdjustedScalarRange");function zP(t,e){if(!t||!e)return 0;for(let n=0;n<6;n+=2)if(t[n]<e[n]||t[n]>e[n+1]||t[n+1]<e[n]||t[n+1]>e[n+1])return 0;return 1}function HP(t,e,n){if(!t||!e)return 0;for(let r=0;r<6;r+=2)if(t[r]+n[r/2]<e[r]||t[r]-n[r/2]>e[r+1]||t[r+1]+n[r/2]<e[r]||t[r+1]-n[r/2]>e[r+1])return 0;return 1}function KP(t,e,n){if(!t||!e||!n)return 0;for(let r=0;r<3;r++)if(t[r]+n[r]<e[2*r]||t[r]-n[r]>e[2*r+1])return 0;return 1}function jP(t,e,n,r){const a=En(3),s=En(3),o=En(3),i=En(3),l=En(3),c=En(3);for(let S=0;S<3;++S)a[S]=t[S]-e[S],s[S]=e[S]-n[S],o[S]=n[S]-t[S],i[S]=-a[S],l[S]=-s[S],c[S]=-o[S];const u=Xa(i),f=Xa(l),d=Xa(o),p=En(3);_r(a,s,p);const h=Xa(p),g=u*f*d/(2*h),y=2*h*h,m=f*f*kt(a,c)/y,b=d*d*kt(i,s)/y,C=u*u*kt(o,l)/y;for(let S=0;S<3;++S)r[S]=m*t[S]+b*e[S]+C*n[S];return g}const YP=1/0,qP=-1/0,wM=t=>!Number.isFinite(t),{isFinite:XP,isNaN:Hy}=Number,rh=Hy;function ml(){return[].concat([Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE])}function ZP(t){let e=-1,n=-1;for(let r=0;r<t.length;r++){const a=Math.abs(t[r]);a>e&&(n=r,e=a)}return n}function TM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;const n=new Array(e),r=new Array(e);for(let s=0;s<e;++s)n[s]=s,r[s]=s;for(let s=e-1;s>0;s--){let o=-1/0,i=0,l=0;for(let c=0;c<=s;++c){const u=n[c];for(let f=0;f<=s;++f){const d=r[f],p=Math.abs(t[u+e*d]);p>o&&(o=p,i=c,l=f)}}[n[s],n[i]]=[n[i],n[s]],[r[s],r[l]]=[r[l],r[s]]}const a=new Array(e*e).fill(0);for(let s=0;s<e;++s){const o=n[s]+e*r[s];a[o]=t[o]<0?-1:1}return a}function xM(t){const e=Math.floor(t*255);return e>15?e.toString(16):`0${e.toString(16)}`}function JP(t){return`${arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#"}${t.map(xM).join("")}`}function Ad(t){return Math.round(t*255)}function QP(t){return t.length===3?`rgb(${t.map(Ad).join(", ")})`:`rgba(${Ad(t[0]||0)}, ${Ad(t[1]||0)}, ${Ad(t[2]||0)}, ${t[3]||0})`}var bs={Pi:nP,radiansFromDegrees:xn,degreesFromRadians:Bc,round:Wu,floor:sM,ceil:rP,ceilLog2:cP,min:aP,max:sP,arrayMin:oP,arrayMax:iP,arrayRange:lP,isPowerOfTwo:Iu,nearestPowerOfTwo:ma,factorial:uP,binomial:fP,beginCombination:dP,nextCombination:pP,randomSeed:gP,getSeed:hP,random:vP,gaussian:yP,add:bf,subtract:Es,multiplyScalar:th,multiplyScalar2D:oM,multiplyAccumulate:Ay,multiplyAccumulate2D:mP,dot:kt,outer:CP,cross:_r,norm:Xa,normalize:ts,perpendiculars:SP,projectVector:bP,projectVector2D:wP,distance2BetweenPoints:qr,angleBetweenVectors:TP,gaussianAmplitude:xP,gaussianWeight:EP,dot2D:Wy,outer2D:kP,norm2D:iM,normalize2D:lM,determinant2x2:$n,LUFactor3x3:OP,LUSolve3x3:MP,linearSolve3x3:RP,multiply3x3_vect3:Xp,multiply3x3_mat3:Iy,multiplyMatrix:_P,transpose3x3:bc,invert3x3:VP,identity3x3:uM,identity:fM,isIdentity:DP,isIdentity3x3:LP,determinant3x3:Qh,quaternionToMatrix3x3:dM,areEquals:cM,areMatricesEqual:sd,roundNumber:Zp,roundVector:Py,matrix3x3ToQuaternion:pM,multiplyQuaternion:NP,orthogonalize3x3:gM,diagonalize3x3:hM,singularValueDecomposition3x3:BP,solveLinearSystem:vM,invertMatrix:yM,luFactorLinearSystem:dC,luSolveLinearSystem:pC,estimateMatrixCondition:FP,jacobi:$P,jacobiN:od,solveHomogeneousLeastSquares:Gy,solveLeastSquares:UP,hex2float:AP,rgb2hsv:Pu,hsv2rgb:Ai,lab2xyz:mM,xyz2lab:CM,xyz2rgb:SM,rgb2xyz:bM,rgb2lab:Yi,lab2rgb:nh,uninitializeBounds:fu,areBoundsInitialized:Jp,computeBoundsFromPoints:WP,clampValue:ol,clampVector:zy,clampAndNormalizeValue:IP,getScalarTypeFittingRange:PP,getAdjustedScalarRange:GP,extentIsWithinOtherExtent:zP,boundsIsWithinOtherBounds:HP,pointIsWithinBounds:KP,solve3PointCircle:jP,inf:YP,negInf:qP,isInf:wM,isNan:Hy,isNaN:Hy,isFinite:XP,createUninitializedBounds:ml,getMajorAxisIndex:ZP,getSparseOrthogonalMatrix:TM,floatToHex2:xM,floatRGB2HexCode:JP,float2CssRGBA:QP};const Ky=1e-6,EM="coincide",kM="disjoint";function eG(t,e,n){return t[0]*(n[0]-e[0])+t[1]*(n[1]-e[1])+t[2]*(n[2]-e[2])}function OM(t,e,n){const r=n[0]*(t[0]-e[0])+n[1]*(t[1]-e[1])+n[2]*(t[2]-e[2]);return Math.abs(r)}function MM(t,e,n,r){const a=[];Es(t,e,a);const s=kt(n,a);r[0]=t[0]-s*n[0],r[1]=t[1]-s*n[1],r[2]=t[2]-s*n[2]}function RM(t,e,n){const r=kt(t,e);let a=kt(e,e);return a===0&&(a=1),n[0]=t[0]-r*e[0]/a,n[1]=t[1]-r*e[1]/a,n[2]=t[2]-r*e[2]/a,n}function _M(t,e,n,r){const a=[];Es(t,e,a);const s=kt(n,a),o=kt(n,n);o!==0?(r[0]=t[0]-s*n[0]/o,r[1]=t[1]-s*n[1]/o,r[2]=t[2]-s*n[2]/o):(r[0]=t[0],r[1]=t[1],r[2]=t[2])}function VM(t,e,n,r){const a={intersection:!1,betweenPoints:!1,t:Number.MAX_VALUE,x:[]},s=[],o=[];Es(e,t,s),Es(n,t,o);const i=kt(r,o),l=kt(r,s);let c,u;return l<0?c=-l:c=l,i<0?u=-i*Ky:u=i*Ky,c<=u||(a.t=i/l,a.x[0]=t[0]+a.t*s[0],a.x[1]=t[1]+a.t*s[1],a.x[2]=t[2]+a.t*s[2],a.intersection=!0,a.betweenPoints=a.t>=0&&a.t<=1),a}function DM(t,e,n,r){const a={intersection:!1,l0:[],l1:[],error:null},s=[];_r(e,r,s);const o=s.map(f=>Math.abs(f));if(o[0]+o[1]+o[2]<Ky){const f=[];return Es(t,n,f),kt(e,f)===0?a.error=EM:a.error=kM,a}let i;o[0]>o[1]&&o[0]>o[2]?i="x":o[1]>o[2]?i="y":i="z";const l=[],c=-kt(e,t),u=-kt(r,n);switch(i){case"x":l[0]=0,l[1]=(u*e[2]-c*r[2])/s[0],l[2]=(c*r[1]-u*e[1])/s[0];break;case"y":l[0]=(c*r[2]-u*e[2])/s[1],l[1]=0,l[2]=(u*e[0]-c*r[0])/s[1];break;case"z":l[0]=(u*e[1]-c*r[1])/s[2],l[1]=(c*r[0]-u*e[0])/s[2],l[2]=0;break}return a.l0=l,bf(l,s,a.l1),a.intersection=!0,a}const tG={evaluate:eG,distanceToPlane:OM,projectPoint:MM,projectVector:RM,generalizedProjectPoint:_M,intersectWithLine:VM,intersectWithPlane:DM,DISJOINT:kM,COINCIDE:EM};function nG(t,e){e.classHierarchy.push("vtkPlane"),t.distanceToPlane=n=>OM(n,e.origin,e.normal),t.projectPoint=(n,r)=>{MM(n,e.origin,e.normal,r)},t.projectVector=(n,r)=>RM(n,e.normal,r),t.push=n=>{if(n!==0)for(let r=0;r<3;r++)e.origin[r]+=n*e.normal[r]},t.generalizedProjectPoint=(n,r)=>{_M(n,e.origin,e.normal,r)},t.evaluateFunction=(n,r,a)=>Array.isArray(n)?e.normal[0]*(n[0]-e.origin[0])+e.normal[1]*(n[1]-e.origin[1])+e.normal[2]*(n[2]-e.origin[2]):e.normal[0]*(n-e.origin[0])+e.normal[1]*(r-e.origin[1])+e.normal[2]*(a-e.origin[2]),t.evaluateGradient=n=>[e.normal[0],e.normal[1],e.normal[2]],t.intersectWithLine=(n,r)=>VM(n,r,e.origin,e.normal),t.intersectWithPlane=(n,r)=>DM(n,r,e.origin,e.normal)}const rG={normal:[0,0,1],origin:[0,0,0]};function LM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,rG,n),A.obj(t,e),A.setGetArray(t,e,["normal","origin"],3),nG(t,e)}const aG=A.newInstance(LM,"vtkPlane");var Ms={newInstance:aG,extend:LM,...tG};const ev=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];function NM(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function oo(t){return(t==null?void 0:t.length)>=6&&t[0]<=t[1]&&t[2]<=t[3]&&t[4]<=t[5]}function gC(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function hC(t){return gC(t,ev)}function ah(t,e,n,r){const[a,s,o,i,l,c]=t;return t[0]=a<e?a:e,t[1]=s>e?s:e,t[2]=o<n?o:n,t[3]=i>n?i:n,t[4]=l<r?l:r,t[5]=c>r?c:r,t}function vC(t,e){if(e.length===0)return t;if(Array.isArray(e[0]))for(let n=0;n<e.length;++n)ah(t,...e[n]);else for(let n=0;n<e.length;n+=3)ah(t,...e.slice(n,n+3));return t}function BM(t,e,n,r,a,s,o){const[i,l,c,u,f,d]=t;return o===void 0?(t[0]=Math.min(e[0],i),t[1]=Math.max(e[1],l),t[2]=Math.min(e[2],c),t[3]=Math.max(e[3],u),t[4]=Math.min(e[4],f),t[5]=Math.max(e[5],d)):(t[0]=Math.min(e,i),t[1]=Math.max(n,l),t[2]=Math.min(r,c),t[3]=Math.max(a,u),t[4]=Math.min(s,f),t[5]=Math.max(o,d)),t}function FM(t,e,n,r){const[a,s,o,i,l,c]=t;return t[0]=e,t[1]=e>s?e:s,t[2]=n,t[3]=n>i?n:i,t[4]=r,t[5]=r>c?r:c,a!==e||o!==n||l!==r}function $M(t,e,n,r){const[a,s,o,i,l,c]=t;return t[0]=e<a?e:a,t[1]=e,t[2]=n<o?n:o,t[3]=n,t[4]=r<l?r:l,t[5]=r,s!==e||i!==n||c!==r}function UM(t,e){return t[0]-=e,t[1]+=e,t[2]-=e,t[3]+=e,t[4]-=e,t[5]+=e,t}function yC(t,e,n,r){return oo(t)?(e>=0?(t[0]*=e,t[1]*=e):(t[0]=e*t[1],t[1]=e*t[0]),n>=0?(t[2]*=n,t[3]*=n):(t[2]=n*t[3],t[3]=n*t[2]),r>=0?(t[4]*=r,t[5]*=r):(t[4]=r*t[5],t[5]=r*t[4]),!0):!1}function mC(t){return[.5*(t[0]+t[1]),.5*(t[2]+t[3]),.5*(t[4]+t[5])]}function sG(t,e,n,r){if(!oo(t))return!1;const a=mC(t);return t[0]-=a[0],t[1]-=a[0],t[2]-=a[1],t[3]-=a[1],t[4]-=a[2],t[5]-=a[2],yC(t,e,n,r),t[0]+=a[0],t[1]+=a[0],t[2]+=a[1],t[3]+=a[1],t[4]+=a[2],t[5]+=a[2],!0}function Qu(t,e){return t[e*2+1]-t[e*2]}function tv(t){return[Qu(t,0),Qu(t,1),Qu(t,2)]}function AM(t){return t.slice(0,2)}function WM(t){return t.slice(2,4)}function IM(t){return t.slice(4,6)}function PM(t){const e=tv(t);return e[0]>e[1]?e[0]>e[2]?e[0]:e[2]:e[1]>e[2]?e[1]:e[2]}function GM(t){if(oo(t)){const e=tv(t);return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}return null}function CC(t){return[t[0],t[2],t[4]]}function SC(t){return[t[1],t[3],t[5]]}function Wd(t,e){return t<=0&&e>=0||t>=0&&e<=0}function bC(t,e){let n=0;for(let r=0;r<2;r++)for(let a=2;a<4;a++)for(let s=4;s<6;s++)e[n++]=[t[r],t[a],t[s]];return e}function zM(t,e,n){return e[0]=t[0],e[1]=t[2],e[2]=t[4],n[0]=t[1],n[1]=t[3],n[2]=t[5],e}function HM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const r=bC(t,[]);for(let a=0;a<r.length;++a)It(r[a],r[a],e);return hC(n),vC(n,r)}function KM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e[0]=.5*(t[1]-t[0]),e[1]=.5*(t[3]-t[2]),e[2]=.5*(t[5]-t[4]),e}function jM(t,e,n,r){const a=[].concat(ev),s=t.getData();for(let o=0;o<s.length;o+=3){const i=[s[o],s[o+1],s[o+2]],l=kt(i,e);a[0]=Math.min(l,a[0]),a[1]=Math.max(l,a[1]);const c=kt(i,n);a[2]=Math.min(c,a[2]),a[3]=Math.max(c,a[3]);const u=kt(i,r);a[4]=Math.min(u,a[4]),a[5]=Math.max(u,a[5])}return a}function YM(t,e,n,r,a){let s=!0;const o=[];let i=0;const l=[],c=[0,0,0],u=0,f=1,d=2;for(let p=0;p<3;p++)e[p]<t[2*p]?(o[p]=f,c[p]=t[2*p],s=!1):e[p]>t[2*p+1]?(o[p]=u,c[p]=t[2*p+1],s=!1):o[p]=d;if(s)return r[0]=e[0],r[1]=e[1],r[2]=e[2],a[0]=0,1;for(let p=0;p<3;p++)o[p]!==d&&n[p]!==0?l[p]=(c[p]-e[p])/n[p]:l[p]=-1;for(let p=0;p<3;p++)l[i]<l[p]&&(i=p);if(l[i]>1||l[i]<0)return 0;a[0]=l[i];for(let p=0;p<3;p++)if(i!==p){if(r[p]=e[p]+l[i]*n[p],r[p]<t[2*p]||r[p]>t[2*p+1])return 0}else r[p]=c[p];return 1}function qM(t,e,n){const r=[];let a=0,s=1,o=1;for(let i=4;i<=5;++i){r[2]=t[i];for(let l=2;l<=3;++l){r[1]=t[l];for(let c=0;c<=1;++c)if(r[0]=t[c],a=Ms.evaluate(n,e,r),o&&(s=a>=0?1:-1,o=0),a===0||s>0&&a<0||s<0&&a>0)return 1}}return 0}function XM(t,e){if(!(oo(t)&&oo(e)))return!1;const n=[0,0,0,0,0,0];let r;for(let a=0;a<3;a++)if(r=!1,e[a*2]>=t[a*2]&&e[a*2]<=t[a*2+1]?(r=!0,n[a*2]=e[a*2]):t[a*2]>=e[a*2]&&t[a*2]<=e[a*2+1]&&(r=!0,n[a*2]=t[a*2]),e[a*2+1]>=t[a*2]&&e[a*2+1]<=t[a*2+1]?(r=!0,n[a*2+1]=e[2*a+1]):t[a*2+1]>=e[a*2]&&t[a*2+1]<=e[a*2+1]&&(r=!0,n[a*2+1]=t[a*2+1]),!r)return!1;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],!0}function sh(t,e){if(!(oo(t)&&oo(e)))return!1;for(let n=0;n<3;n++)if(!(e[n*2]>=t[n*2]&&e[n*2]<=t[n*2+1])&&!(t[n*2]>=e[n*2]&&t[n*2]<=e[n*2+1])&&!(e[n*2+1]>=t[n*2]&&e[n*2+1]<=t[n*2+1])&&!(t[n*2+1]>=e[n*2]&&t[n*2+1]<=e[n*2+1]))return!1;return!0}function oh(t,e,n,r){return!(e<t[0]||e>t[1]||n<t[2]||n>t[3]||r<t[4]||r>t[5])}function oG(t,e){return!(!sh(t,e)||!oh(t,...CC(e))||!oh(t,...SC(e)))}function ZM(t,e,n){const r=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],a=[0,0,0,0,0,0,0,0];let s=0;for(let f=0;f<2;f++)for(let d=2;d<4;d++)for(let p=4;p<6;p++){const h=[t[f],t[d],t[p]];a[s++]=Ms.evaluate(n,e,h)}let o=2;for(;o--&&!(Wd(a[r[o][0]],a[r[o][4]])&&Wd(a[r[o][1]],a[r[o][5]])&&Wd(a[r[o][2]],a[r[o][6]])&&Wd(a[r[o][3]],a[r[o][7]])););if(o<0)return!1;const i=Math.sign(n[o]),l=Math.abs((t[o*2+1]-t[o*2])*n[o]);let c=i>0?1:0;for(let f=0;f<4;f++){if(l===0)continue;const d=Math.abs(a[r[o][f]])/l;i>0&&d<c&&(c=d),i<0&&d>c&&(c=d)}const u=(1-c)*t[o*2]+c*t[o*2+1];return i>0?t[o*2]=u:t[o*2+1]=u,!0}class iG{constructor(e){this.bounds=e,this.bounds||(this.bounds=new Float64Array(ev))}getBounds(){return this.bounds}equals(e){return NM(this.bounds,e)}isValid(){return oo(this.bounds)}setBounds(e){return gC(this.bounds,e)}reset(){return hC(this.bounds)}addPoint(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ah(this.bounds,...n)}addPoints(e){return vC(this.bounds,e)}addBounds(e,n,r,a,s,o){return BM(this.bounds,e,n,r,a,s,o)}setMinPoint(e,n,r){return FM(this.bounds,e,n,r)}setMaxPoint(e,n,r){return $M(this.bounds,e,n,r)}inflate(e){return UM(this.bounds,e)}scale(e,n,r){return yC(this.bounds,e,n,r)}getCenter(){return mC(this.bounds)}getLength(e){return Qu(this.bounds,e)}getLengths(){return tv(this.bounds)}getMaxLength(){return PM(this.bounds)}getDiagonalLength(){return GM(this.bounds)}getMinPoint(){return CC(this.bounds)}getMaxPoint(){return SC(this.bounds)}getXRange(){return AM(this.bounds)}getYRange(){return WM(this.bounds)}getZRange(){return IM(this.bounds)}getCorners(e){return bC(this.bounds,e)}computeCornerPoints(e,n){return zM(this.bounds,e,n)}computeLocalBounds(e,n,r){return jM(this.bounds,e,n,r)}transformBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return HM(this.bounds,e,n)}computeScale3(e){return KM(this.bounds,e)}cutWithPlane(e,n){return ZM(this.bounds,e,n)}intersectBox(e,n,r,a){return YM(this.bounds,e,n,r,a)}intersectPlane(e,n){return qM(this.bounds,e,n)}intersect(e){return XM(this.bounds,e)}intersects(e){return sh(this.bounds,e)}containsPoint(e,n,r){return oh(this.bounds,e,n,r)}contains(e){return sh(this.bounds,e)}}function lG(t){const e=t&&t.bounds;return new iG(e)}const cG={equals:NM,isValid:oo,setBounds:gC,reset:hC,addPoint:ah,addPoints:vC,addBounds:BM,setMinPoint:FM,setMaxPoint:$M,inflate:UM,scale:yC,scaleAboutCenter:sG,getCenter:mC,getLength:Qu,getLengths:tv,getMaxLength:PM,getDiagonalLength:GM,getMinPoint:CC,getMaxPoint:SC,getXRange:AM,getYRange:WM,getZRange:IM,getCorners:bC,computeCornerPoints:zM,computeLocalBounds:jM,transformBounds:HM,computeScale3:KM,cutWithPlane:ZM,intersectBox:YM,intersectPlane:qM,intersect:XM,intersects:sh,containsPoint:oh,contains:oG,INIT_BOUNDS:ev};var qt={newInstance:lG,...cG};const uG={DISPLAY:0,WORLD:1};var JM={CoordinateSystem:uG};const{CoordinateSystem:jy}=JM;function $w(t){return()=>A.vtkErrorMacro(`vtkProp::${t} - NOT IMPLEMENTED`)}function fG(t,e){e.classHierarchy.push("vtkProp"),t.getMTime=()=>{let n=e.mtime;for(let r=0;r<e.textures.length;++r){const a=e.textures[r].getMTime();a>n&&(n=a)}return n},t.processSelectorPixelBuffers=(n,r)=>{},t.getNestedProps=()=>null,t.getActors=()=>[],t.getActors2D=()=>[],t.getVolumes=()=>[],t.pick=$w("pick"),t.hasKey=$w("hasKey"),t.getNestedVisibility=()=>e.visibility&&(!e._parentProp||e._parentProp.getNestedVisibility()),t.getNestedPickable=()=>e.pickable&&(!e._parentProp||e._parentProp.getNestedPickable()),t.getNestedDragable=()=>e.dragable&&(!e._parentProp||e._parentProp.getNestedDragable()),t.getRedrawMTime=()=>e.mtime,t.setEstimatedRenderTime=n=>{e.estimatedRenderTime=n,e.savedEstimatedRenderTime=n},t.restoreEstimatedRenderTime=()=>{e.estimatedRenderTime=e.savedEstimatedRenderTime},t.addEstimatedRenderTime=n=>{e.estimatedRenderTime+=n},t.setAllocatedRenderTime=n=>{e.allocatedRenderTime=n,e.savedEstimatedRenderTime=e.estimatedRenderTime,e.estimatedRenderTime=0},t.getSupportsSelection=()=>!1,t.getTextures=()=>e.textures,t.hasTexture=n=>e.textures.indexOf(n)!==-1,t.addTexture=n=>{n&&!t.hasTexture(n)&&(e.textures=e.textures.concat(n),t.modified())},t.removeTexture=n=>{const r=e.textures.filter(a=>a!==n);e.textures.length!==r.length&&(e.textures=r,t.modified())},t.removeAllTextures=()=>{e.textures=[],t.modified()},t.setCoordinateSystemToWorld=()=>t.setCoordinateSystem(jy.WORLD),t.setCoordinateSystemToDisplay=()=>t.setCoordinateSystem(jy.DISPLAY)}const dG={allocatedRenderTime:10,coordinateSystem:jy.WORLD,dragable:!0,estimatedRenderTime:0,paths:null,pickable:!0,renderTimeMultiplier:1,savedEstimatedRenderTime:0,textures:[],useBounds:!0,visibility:!0};function QM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dG,n),A.obj(t,e),A.get(t,e,["estimatedRenderTime","allocatedRenderTime"]),A.setGet(t,e,["_parentProp","coordinateSystem","dragable","pickable","renderTimeMultiplier","useBounds","visibility"]),A.moveToProtected(t,e,["parentProp"]),fG(t,e)}const pG=A.newInstance(QM,"vtkProp");var _l={newInstance:pG,extend:QM,...JM};function gG(t,e){e.classHierarchy.push("vtkProp3D"),t.addPosition=r=>{e.position=e.position.map((a,s)=>a+r[s]),t.modified()},t.getOrientationWXYZ=()=>{const r=vl();Zk(r,e.rotation);const a=new Float64Array(3),s=BU(a,r);return[Bc(s),a[0],a[1],a[2]]},t.rotateX=r=>{r!==0&&(U1(e.rotation,e.rotation,xn(r)),t.modified())},t.rotateY=r=>{r!==0&&(A1(e.rotation,e.rotation,xn(r)),t.modified())},t.rotateZ=r=>{r!==0&&(W1(e.rotation,e.rotation,xn(r)),t.modified())},t.rotateWXYZ=(r,a,s,o)=>{if(r===0||a===0&&s===0&&o===0)return;const i=xn(r),l=vl();z1(l,[a,s,o],i);const c=new Float64Array(16);G1(c,l),Ut(e.rotation,e.rotation,c),t.modified()},t.setOrientation=(r,a,s)=>r===e.orientation[0]&&a===e.orientation[1]&&s===e.orientation[2]?!1:(e.orientation=[r,a,s],ct(e.rotation),t.rotateZ(s),t.rotateX(r),t.rotateY(a),t.modified(),!0),t.setUserMatrix=r=>sd(e.userMatrix,r)?!1:(Un(e.userMatrix,r),t.modified(),!0),t.getMatrix=()=>(t.computeMatrix(),e.matrix),t.computeMatrix=()=>{if(t.getMTime()>e.matrixMTime.getMTime()){ct(e.matrix),e.userMatrix&&Ut(e.matrix,e.matrix,e.userMatrix),Rn(e.matrix,e.matrix,e.origin),Rn(e.matrix,e.matrix,e.position),Ut(e.matrix,e.matrix,e.rotation),so(e.matrix,e.matrix,e.scale),Rn(e.matrix,e.matrix,[-e.origin[0],-e.origin[1],-e.origin[2]]),$t(e.matrix,e.matrix),e.isIdentity=!0;for(let r=0;r<4;++r)for(let a=0;a<4;++a)(r===a?1:0)!==e.matrix[r+a*4]&&(e.isIdentity=!1);e.matrixMTime.modified()}},t.getCenter=()=>qt.getCenter(e.bounds),t.getLength=()=>qt.getLength(e.bounds),t.getXRange=()=>qt.getXRange(e.bounds),t.getYRange=()=>qt.getYRange(e.bounds),t.getZRange=()=>qt.getZRange(e.bounds),t.getUserMatrix=()=>e.userMatrix;function n(){t.computeMatrix()}t.onModified(n)}const hG={origin:[0,0,0],position:[0,0,0],orientation:[0,0,0],rotation:null,scale:[1,1,1],bounds:[1,-1,1,-1,1,-1],userMatrix:null,userMatrixMTime:null,cachedProp3D:null,isIdentity:!0,matrixMTime:null};function eR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,hG,n),_l.extend(t,e,n),e.matrixMTime={},A.obj(e.matrixMTime),A.get(t,e,["bounds","isIdentity"]),A.getArray(t,e,["orientation"]),A.setGetArray(t,e,["origin","position","scale"],3),e.matrix=ct(new Float64Array(16)),e.rotation=ct(new Float64Array(16)),e.userMatrix=ct(new Float64Array(16)),e.transform=null,gG(t,e)}const vG=A.newInstance(eR,"vtkProp3D");var tR={newInstance:vG,extend:eR};const nR={FLAT:0,GOURAUD:1,PHONG:2},Er={POINTS:0,WIREFRAME:1,SURFACE:2},yG=nR;var wC={Shading:nR,Representation:Er,Interpolation:yG};const{Representation:Gu,Interpolation:zu}=wC;function Uw(t){return()=>A.vtkErrorMacro(`vtkProperty::${t} - NOT IMPLEMENTED`)}function mG(t,e){e.classHierarchy.push("vtkProperty"),t.setColor=(n,r,a)=>{Array.isArray(n)?(e.color[0]!==n[0]||e.color[1]!==n[1]||e.color[2]!==n[2])&&(e.color[0]=n[0],e.color[1]=n[1],e.color[2]=n[2],t.modified()):(e.color[0]!==n||e.color[1]!==r||e.color[2]!==a)&&(e.color[0]=n,e.color[1]=r,e.color[2]=a,t.modified()),t.setDiffuseColor(e.color),t.setAmbientColor(e.color),t.setSpecularColor(e.color)},t.computeCompositeColor=Uw("ComputeCompositeColor"),t.getColor=()=>{let n=0;e.ambient+e.diffuse+e.specular>0&&(n=1/(e.ambient+e.diffuse+e.specular));for(let r=0;r<3;r++)e.color[r]=n*(e.ambient*e.ambientColor[r]+e.diffuse*e.diffuseColor[r]+e.specular*e.specularColor[r]);return[].concat(e.color)},t.setSpecularPower=n=>{const r=1/Math.max(1,n);(e.roughness!==r||e.specularPower!==n)&&(e.specularPower=n,e.roughness=r,t.modified())},t.addShaderVariable=Uw("AddShaderVariable"),t.setInterpolationToFlat=()=>t.setInterpolation(zu.FLAT),t.setInterpolationToGouraud=()=>t.setInterpolation(zu.GOURAUD),t.setInterpolationToPhong=()=>t.setInterpolation(zu.PHONG),t.getInterpolationAsString=()=>A.enumToString(zu,e.interpolation),t.setRepresentationToWireframe=()=>t.setRepresentation(Gu.WIREFRAME),t.setRepresentationToSurface=()=>t.setRepresentation(Gu.SURFACE),t.setRepresentationToPoints=()=>t.setRepresentation(Gu.POINTS),t.getRepresentationAsString=()=>A.enumToString(Gu,e.representation)}const CG={color:[1,1,1],ambientColor:[1,1,1],diffuseColor:[1,1,1],specularColor:[1,1,1],edgeColor:[0,0,0],ambient:0,diffuse:1,metallic:0,roughness:.6,normalStrength:1,emission:1,baseIOR:1.45,specular:0,specularPower:1,opacity:1,interpolation:zu.GOURAUD,representation:Gu.SURFACE,edgeVisibility:!1,backfaceCulling:!1,frontfaceCulling:!1,pointSize:1,lineWidth:1,lighting:!0,shading:!1,materialName:null};function rR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,CG,n),A.obj(t,e),A.setGet(t,e,["lighting","interpolation","ambient","diffuse","metallic","roughness","normalStrength","emission","baseIOR","specular","specularPower","opacity","edgeVisibility","lineWidth","pointSize","backfaceCulling","frontfaceCulling","representation","diffuseTexture","metallicTexture","roughnessTexture","normalTexture","ambientOcclusionTexture","emissionTexture"]),A.setGetArray(t,e,["ambientColor","specularColor","diffuseColor","edgeColor"],3),mG(t,e)}const SG=A.newInstance(rR,"vtkProperty");var vo={newInstance:SG,extend:rR,...wC};const{vtkDebugMacro:bG}=A;function wG(t,e){e.classHierarchy.push("vtkActor");const n={...t};t.getActors=()=>[t],t.getIsOpaque=()=>{if(e.forceOpaque)return!0;if(e.forceTranslucent)return!1;e.property||t.getProperty();let r=e.property.getOpacity()>=1;return r=r&&(!e.texture||!e.texture.isTranslucent()),r=r&&(!e.mapper||e.mapper.getIsOpaque()),r},t.hasTranslucentPolygonalGeometry=()=>e.mapper===null?!1:(e.property===null&&t.setProperty(t.makeProperty()),!t.getIsOpaque()),t.makeProperty=vo.newInstance,t.getProperty=()=>(e.property===null&&(e.property=t.makeProperty()),e.property),t.getBounds=()=>{if(e.mapper===null)return e.bounds;const r=e.mapper.getBounds();if(!r||r.length!==6)return r;if(r[0]>r[1])return e.mapperBounds=r.concat(),e.bounds=[1,-1,1,-1,1,-1],e.boundsMTime.modified(),r;if(!e.mapperBounds||r[0]!==e.mapperBounds[0]||r[1]!==e.mapperBounds[1]||r[2]!==e.mapperBounds[2]||r[3]!==e.mapperBounds[3]||r[4]!==e.mapperBounds[4]||r[5]!==e.mapperBounds[5]||t.getMTime()>e.boundsMTime.getMTime()){bG("Recomputing bounds..."),e.mapperBounds=r.concat();const a=[];qt.getCorners(r,a),t.computeMatrix();const s=new Float64Array(16);$t(s,e.matrix),a.forEach(o=>It(o,o,s)),e.bounds[0]=e.bounds[2]=e.bounds[4]=Number.MAX_VALUE,e.bounds[1]=e.bounds[3]=e.bounds[5]=-Number.MAX_VALUE,e.bounds=e.bounds.map((o,i)=>i%2===0?a.reduce((l,c)=>l>c[i/2]?c[i/2]:l,o):a.reduce((l,c)=>l<c[(i-1)/2]?c[(i-1)/2]:l,o)),e.boundsMTime.modified()}return e.bounds},t.getMTime=()=>{let r=n.getMTime();if(e.property!==null){const a=e.property.getMTime();r=a>r?a:r}if(e.backfaceProperty!==null){const a=e.backfaceProperty.getMTime();r=a>r?a:r}return r},t.getRedrawMTime=()=>{let r=e.mtime;if(e.mapper!==null){let a=e.mapper.getMTime();r=a>r?a:r,e.mapper.getInput()!==null&&(e.mapper.getInputAlgorithm().update(),a=e.mapper.getInput().getMTime(),r=a>r?a:r)}return r},t.getSupportsSelection=()=>e.mapper?e.mapper.getSupportsSelection():!1,t.processSelectorPixelBuffers=(r,a)=>{e.mapper&&e.mapper.processSelectorPixelBuffers&&e.mapper.processSelectorPixelBuffers(r,a)}}const TG={mapper:null,property:null,backfaceProperty:null,forceOpaque:!1,forceTranslucent:!1,bounds:[1,-1,1,-1,1,-1]};function aR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,TG,n),tR.extend(t,e,n),e.boundsMTime={},A.obj(e.boundsMTime),A.set(t,e,["property"]),A.setGet(t,e,["backfaceProperty","forceOpaque","forceTranslucent","mapper"]),wG(t,e)}const xG=A.newInstance(aR,"vtkActor");var Ca={newInstance:xG,extend:aR};const sR={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},jt={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"},EG=jt.FLOAT;var oR={DefaultDataType:EG,DataTypeByteSize:sR,VtkDataTypes:jt};const{vtkErrorMacro:kG}=nr,{DefaultDataType:OG}=oR,MG=1e-6;function Yy(t,e,n){const r=t.length;let a=Number.MAX_VALUE,s=-Number.MAX_VALUE,o,i;for(i=e;i<r;i+=n)if(!Number.isNaN(t[i])){a=t[i],s=a;break}for(;i<r;i+=n)o=t[i],o<a?a=o:o>s&&(s=o);return{min:a,max:s}}function RG(){let t=Number.MAX_VALUE,e=-Number.MAX_VALUE,n=0,r=0;return{add(a){t>a&&(t=a),e<a&&(e=a),n++,r+=a},get(){return{min:t,max:e,count:n,sum:r,mean:r/n}},getRange(){return{min:t,max:e}}}}function iR(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(e<0&&n>1){const a=t.length/n,s=new Float64Array(a);for(let o=0,i=0;o<a;++o){for(let l=i+n;i<l;++i)s[o]+=t[i]*t[i];s[o]**=.5}return Yy(s,0,1)}return Yy(t,e<0?0:e,n)}function Aw(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const n=t||[];for(;n.length<=e;)n.push(null);return n}function TC(t){return Object.prototype.toString.call(t).slice(8,-1)}function _G(t){const e=t.getNumberOfComponents();let n=0;const r=new Array(e);for(let a=0;a<t.getNumberOfTuples();++a){t.getTuple(a,r);const s=Xa(r,e);s>n&&(n=s)}return n}const VG={computeRange:iR,createRangeHelper:RG,fastComputeRange:Yy,getDataType:TC,getMaxNorm:_G};function DG(t,e){e.classHierarchy.push("vtkDataArray");function n(r){if(r<0)return!1;const a=t.getNumberOfComponents(),s=e.values.length/(a>0?a:1);if(r===s)return!0;if(r>s){const o=e.values;return e.values=cu(e.dataType,(r+s)*a),e.values.set(o),!0}return e.size>r*a&&(e.size=r*a,t.dataChange()),!0}t.dataChange=()=>{e.ranges=null,t.modified()},t.resize=r=>{n(r);const a=r*t.getNumberOfComponents();return e.size!==a?(e.size=a,t.dataChange(),!0):!1},t.initialize=()=>{t.resize(0)},t.getElementComponentSize=()=>e.values.BYTES_PER_ELEMENT,t.getComponent=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.values[r*e.numberOfComponents+a]},t.setComponent=(r,a,s)=>{s!==e.values[r*e.numberOfComponents+a]&&(e.values[r*e.numberOfComponents+a]=s,t.dataChange())},t.getValue=r=>{const a=r/e.numberOfComponents,s=r%e.numberOfComponents;return t.getComponent(a,s)},t.setValue=(r,a)=>{const s=r/e.numberOfComponents,o=r%e.numberOfComponents;t.setComponent(s,o,a)},t.getData=()=>e.size===e.values.length?e.values:e.values.subarray(0,e.size),t.getRange=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,a=r;a<0&&(a=e.numberOfComponents===1?0:e.numberOfComponents);let s=null;return e.ranges||(e.ranges=Aw(e.ranges,e.numberOfComponents)),s=e.ranges[a],s?(e.rangeTuple[0]=s.min,e.rangeTuple[1]=s.max,e.rangeTuple):(s=iR(t.getData(),r,e.numberOfComponents),e.ranges[a]=s,e.rangeTuple[0]=s.min,e.rangeTuple[1]=s.max,e.rangeTuple)},t.setRange=(r,a)=>{e.ranges||(e.ranges=Aw(e.ranges,e.numberOfComponents));const s={min:r.min,max:r.max};return e.ranges[a]=s,e.rangeTuple[0]=s.min,e.rangeTuple[1]=s.max,e.rangeTuple},t.setTuple=(r,a)=>{const s=r*e.numberOfComponents;for(let o=0;o<e.numberOfComponents;o++)e.values[s+o]=a[o]},t.setTuples=(r,a)=>{let s=r*e.numberOfComponents;const o=Math.min(a.length,e.size-s);for(let i=0;i<o;)e.values[s++]=a[i++]},t.insertTuple=(r,a)=>(e.size<=r*e.numberOfComponents&&(e.size=(r+1)*e.numberOfComponents,n(r+1)),t.setTuple(r,a),r),t.insertTuples=(r,a)=>{const s=r+a.length/e.numberOfComponents;return e.size<s*e.numberOfComponents&&(e.size=s*e.numberOfComponents,n(s)),t.setTuples(r,a),s},t.insertNextTuple=r=>{const a=e.size/e.numberOfComponents;return t.insertTuple(a,r)},t.insertNextTuples=r=>{const a=e.size/e.numberOfComponents;return t.insertTuples(a,r)},t.findTuple=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:MG;for(let s=0;s<e.size;s+=e.numberOfComponents)if(Math.abs(r[0]-e.values[s])<=a){let o=!0;for(let i=1;i<e.numberOfComponents;++i)if(Math.abs(r[i]-e.values[s+i])>a){o=!1;break}if(o)return s/e.numberOfComponents}return-1},t.getTuple=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const s=e.numberOfComponents||1,o=r*s;switch(s){case 4:a[3]=e.values[o+3];case 3:a[2]=e.values[o+2];case 2:a[1]=e.values[o+1];case 1:a[0]=e.values[o];break;default:for(let i=s-1;i>=0;--i)a[i]=e.values[o+i]}return a},t.getTuples=(r,a)=>{const s=(r??0)*e.numberOfComponents,o=(a??t.getNumberOfTuples())*e.numberOfComponents,i=t.getData().subarray(s,o);return i.length>0?i:null},t.getTupleLocation=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:1)*e.numberOfComponents},t.getNumberOfComponents=()=>e.numberOfComponents,t.getNumberOfValues=()=>e.size,t.getNumberOfTuples=()=>e.size/e.numberOfComponents,t.getDataType=()=>e.dataType,t.newClone=()=>cR({empty:!0,name:e.name,dataType:e.dataType,numberOfComponents:e.numberOfComponents}),t.getName=()=>(e.name||(t.modified(),e.name=`vtkDataArray${t.getMTime()}`),e.name),t.setData=(r,a)=>{e.values=r,e.size=r.length,e.dataType=TC(r),a&&(e.numberOfComponents=a),e.size%e.numberOfComponents!==0&&(e.numberOfComponents=1),t.dataChange()},t.getState=()=>{if(e.deleted)return null;const r={...e,vtkClass:t.getClassName()};r.values=Array.from(r.values),delete r.buffer,Object.keys(r).forEach(s=>{r[s]||delete r[s]});const a={};return Object.keys(r).sort().forEach(s=>{a[s]=r[s]}),a.mtime&&delete a.mtime,a},t.deepCopy=r=>{const a=t.getDataType(),s=e.values;t.shallowCopy(r),(s==null?void 0:s.length)>=r.getNumberOfValues()&&a===r.getDataType()?(s.set(r.getData()),e.values=s,t.dataChange()):t.setData(r.getData().slice())},t.interpolateTuple=(r,a,s,o,i,l)=>{const c=e.numberOfComponents||1;(c!==a.getNumberOfComponents()||c!==o.getNumberOfComponents())&&kG("numberOfComponents must match");const u=a.getTuple(s),f=o.getTuple(i),d=[];switch(d.length=c,c){case 4:d[3]=u[3]+(f[3]-u[3])*l;case 3:d[2]=u[2]+(f[2]-u[2])*l;case 2:d[1]=u[1]+(f[1]-u[1])*l;case 1:d[0]=u[0]+(f[0]-u[0])*l;break;default:for(let p=0;p<c;p++)d[p]=u[p]+(f[p]-u[p])*l}return t.insertTuple(r,d)}}const LG={name:"",numberOfComponents:1,dataType:OG,rangeTuple:[0,0]};function lR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,LG,n),!e.empty&&!e.values&&!e.size)throw new TypeError("Cannot create vtkDataArray object without: size > 0, values");if(e.values?Array.isArray(e.values)&&(e.values=Xh(e.dataType,e.values)):e.values=cu(e.dataType,e.size),e.values&&(e.size=e.size??e.values.length,e.dataType=TC(e.values)),dn(t,e),td(t,e,["name","numberOfComponents"]),e.size%e.numberOfComponents!==0)throw new RangeError("model.size is not a multiple of model.numberOfComponents");DG(t,e)}const cR=Ft(lR,"vtkDataArray");var Tt={newInstance:cR,extend:lR,...VG,...oR};function NG(t,e){e.classHierarchy.push("vtkAbstractMapper"),t.update=()=>{t.getInputData()},t.addClippingPlane=n=>n.isA("vtkPlane")?e.clippingPlanes.includes(n)?!1:(e.clippingPlanes.push(n),t.modified(),!0):!1,t.getNumberOfClippingPlanes=()=>e.clippingPlanes.length,t.removeAllClippingPlanes=()=>e.clippingPlanes.length===0?!1:(e.clippingPlanes.length=0,t.modified(),!0),t.removeClippingPlane=n=>{const r=e.clippingPlanes.indexOf(n);return r===-1?!1:(e.clippingPlanes.splice(r,1),t.modified(),!0)},t.getClippingPlanes=()=>e.clippingPlanes,t.setClippingPlanes=n=>{if(n)if(!Array.isArray(n))t.addClippingPlane(n);else{const r=n.length;for(let a=0;a<r&&a<6;a++)t.addClippingPlane(n[a])}},t.getClippingPlaneInDataCoords=(n,r,a)=>{const s=e.clippingPlanes,o=n;if(s){const i=s.length;if(r>=0&&r<i){const l=s[r],c=l.getNormal(),u=l.getOrigin(),f=c[0],d=c[1],p=c[2],h=-(f*u[0]+d*u[1]+p*u[2]);a[0]=f*o[0]+d*o[4]+p*o[8]+h*o[12],a[1]=f*o[1]+d*o[5]+p*o[9]+h*o[13],a[2]=f*o[2]+d*o[6]+p*o[10]+h*o[14],a[3]=f*o[3]+d*o[7]+p*o[11]+h*o[15];return}}A.vtkErrorMacro(`Clipping plane index ${r} is out of range.`)}}const BG={clippingPlanes:[]};function FG(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,BG,n),A.obj(t,e),A.algo(t,e,1,0),e.clippingPlanes||(e.clippingPlanes=[]),NG(t,e)}var uR={extend:FG};function $G(t,e){t.getBounds=()=>(A.vtkErrorMacro("vtkAbstractMapper3D.getBounds - NOT IMPLEMENTED"),ml()),t.getCenter=()=>{var r;const n=t.getBounds();return e.center=qt.isValid(n)?qt.getCenter(n):null,(r=e.center)==null?void 0:r.slice()},t.getLength=()=>{const n=t.getBounds();return qt.getDiagonalLength(n)}}const UG=t=>({bounds:[...qt.INIT_BOUNDS],center:[0,0,0],viewSpecificProperties:{},...t});function AG(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,UG(n)),uR.extend(t,e,n),A.setGet(t,e,["viewSpecificProperties"]),$G(t,e)}var fR={extend:AG};const{vtkErrorMacro:Ww,vtkWarningMacro:WG}=A;function IG(t,e){e.classHierarchy.push("vtkFieldData");const n=t.getState;e.arrays&&(e.arrays=e.arrays.map(r=>({data:qa(r.data)}))),t.initialize=()=>{t.initializeFields(),t.copyAllOn(),t.clearFieldFlags()},t.initializeFields=()=>{e.arrays=[],e.copyFieldFlags={},t.modified()},t.copyStructure=r=>{t.initializeFields(),e.copyFieldFlags=r.getCopyFieldFlags().map(a=>a),e.arrays=r.arrays().map(a=>({array:a}))},t.getNumberOfArrays=()=>e.arrays.length,t.getNumberOfActiveArrays=()=>e.arrays.length,t.addArray=r=>{const a=r.getName(),{array:s,index:o}=t.getArrayWithIndex(a);return s!=null?(e.arrays[o]={data:r},o):(e.arrays=[].concat(e.arrays,{data:r}),e.arrays.length-1)},t.removeAllArrays=()=>{e.arrays=[]},t.removeArray=r=>{const a=e.arrays.findIndex(s=>s.data.getName()===r);return t.removeArrayByIndex(a)},t.removeArrayByIndex=r=>r!==-1&&r<e.arrays.length?(e.arrays.splice(r,1),!0):!1,t.getArrays=()=>e.arrays.map(r=>r.data),t.getArray=r=>typeof r=="number"?t.getArrayByIndex(r):t.getArrayByName(r),t.getArrayByName=r=>e.arrays.reduce((a,s,o)=>s.data.getName()===r?s.data:a,null),t.getArrayWithIndex=r=>{const a=e.arrays.findIndex(s=>s.data.getName()===r);return{array:a!==-1?e.arrays[a].data:null,index:a}},t.getArrayByIndex=r=>r>=0&&r<e.arrays.length?e.arrays[r].data:null,t.hasArray=r=>t.getArrayWithIndex(r).index>=0,t.getArrayName=r=>{const a=e.arrays[r];return a?a.data.getName():""},t.getCopyFieldFlags=()=>e.copyFieldFlags,t.getFlag=r=>e.copyFieldFlags[r],t.passData=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;r.getArrays().forEach(o=>{const i=t.getFlag(o.getName());if(i!==!1&&!(e.doCopyAllOff&&i!==!0)&&o){let l=t.getArrayByName(o.getName());if(l)if(o.getNumberOfComponents()===l.getNumberOfComponents())if(a>-1&&a<o.getNumberOfTuples()){const c=s>-1?s:a;l.insertTuple(c,o.getTuple(a))}else l.insertTuples(0,o.getTuples());else Ww("Unhandled case in passData");else if(a<0||a>o.getNumberOfTuples())t.addArray(o),r.getAttributes(o).forEach(c=>{t.setAttribute(o,c)});else{const c=o.getNumberOfComponents();let u=o.getNumberOfValues();const f=s>-1?s:a;u<=f*c&&(u=(f+1)*c),l=Tt.newInstance({name:o.getName(),dataType:o.getDataType(),numberOfComponents:c,values:A.newTypedArray(o.getDataType(),u),size:0}),l.insertTuple(f,o.getTuple(a)),t.addArray(l),r.getAttributes(o).forEach(d=>{t.setAttribute(l,d)})}}})},t.interpolateData=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5;r.getArrays().forEach(l=>{const c=t.getFlag(l.getName());if(c!==!1&&!(e.doCopyAllOff&&c!==!0)&&l){let u=t.getArrayByName(l.getName());if(u)if(l.getNumberOfComponents()===u.getNumberOfComponents())if(a>-1&&a<l.getNumberOfTuples()){const f=o>-1?o:a;u.interpolateTuple(f,l,a,l,s,i),WG("Unexpected case in interpolateData")}else u.insertTuples(l.getTuples());else Ww("Unhandled case in interpolateData");else if(a<0||s<0||a>l.getNumberOfTuples())t.addArray(l),r.getAttributes(l).forEach(f=>{t.setAttribute(l,f)});else{const f=l.getNumberOfComponents();let d=l.getNumberOfValues();const p=o>-1?o:a;d<=p*f&&(d=(p+1)*f),u=Tt.newInstance({name:l.getName(),dataType:l.getDataType(),numberOfComponents:f,values:A.newTypedArray(l.getDataType(),d),size:0}),u.interpolateTuple(p,l,a,l,s,i),t.addArray(u),r.getAttributes(l).forEach(h=>{t.setAttribute(u,h)})}}})},t.copyFieldOn=r=>{e.copyFieldFlags[r]=!0},t.copyFieldOff=r=>{e.copyFieldFlags[r]=!1},t.copyAllOn=()=>{(!e.doCopyAllOn||e.doCopyAllOff)&&(e.doCopyAllOn=!0,e.doCopyAllOff=!1,t.modified())},t.copyAllOff=()=>{(e.doCopyAllOn||!e.doCopyAllOff)&&(e.doCopyAllOn=!1,e.doCopyAllOff=!0,t.modified())},t.clearFieldFlags=()=>{e.copyFieldFlags={}},t.deepCopy=r=>{e.arrays=r.getArrays().map(a=>{const s=a.newClone();return s.deepCopy(a),{data:s}})},t.copyFlags=r=>r.getCopyFieldFlags().map(a=>a),t.reset=()=>e.arrays.forEach(r=>r.data.reset()),t.getMTime=()=>e.arrays.reduce((r,a)=>a.data.getMTime()>r?a.data.getMTime():r,e.mtime),t.getNumberOfComponents=()=>e.arrays.reduce((r,a)=>r+a.data.getNumberOfComponents(),0),t.getNumberOfTuples=()=>e.arrays.length>0?e.arrays[0].getNumberOfTuples():0,t.getState=()=>{const r=n();return r&&(r.arrays=e.arrays.map(a=>({data:a.data.getState()}))),r}}const PG={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1};function dR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,PG,n),A.obj(t,e),IG(t,e)}const GG=A.newInstance(dR,"vtkFieldData");var zG={newInstance:GG,extend:dR};const HG={SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},KG={MAX:0,EXACT:1,NOLIMIT:2},jG={DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},YG={DUPLICATEPOINT:1,HIDDENPOINT:2},qG={COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},XG="vtkGhostType",ZG={DEFAULT:0,SINGLE:1,DOUBLE:2};var pR={AttributeCopyOperations:qG,AttributeLimitTypes:KG,AttributeTypes:HG,CellGhostTypes:jG,DesiredOutputPrecision:ZG,PointGhostTypes:YG,ghostArrayName:XG};const{AttributeTypes:Oo,AttributeCopyOperations:Ci}=pR,{vtkWarningMacro:Id}=A;function JG(t,e){const n=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];function r(o){let i=n.find(l=>Oo[l.toUpperCase()]===o||typeof o!="number"&&l.toLowerCase()===o.toLowerCase());return typeof i>"u"&&(i=null),i}e.classHierarchy.push("vtkDataSetAttributes");const a={...t};t.checkNumberOfComponents=o=>!0,t.setAttribute=(o,i)=>{const l=r(i);if(o&&l.toUpperCase()==="PEDIGREEIDS"&&!o.isA("vtkDataArray"))return Id(`Cannot set attribute ${l}. The attribute must be a vtkDataArray.`),-1;if(o&&!t.checkNumberOfComponents(o,l))return Id(`Cannot set attribute ${l}. Incorrect number of components.`),-1;let c=e[`active${l}`];if(c>=0&&c<e.arrays.length){if(e.arrays[c]===o)return c;t.removeArrayByIndex(c)}return o?(c=t.addArray(o),e[`active${l}`]=c):e[`active${l}`]=-1,t.modified(),e[`active${l}`]},t.getAttributes=o=>n.filter(i=>t[`get${i}`]()===o),t.setActiveAttributeByName=(o,i)=>t.setActiveAttributeByIndex(t.getArrayWithIndex(o).index,i),t.setActiveAttributeByIndex=(o,i)=>{const l=r(i);if(o>=0&&o<e.arrays.length){if(l.toUpperCase()!=="PEDIGREEIDS"){const c=t.getArrayByIndex(o);if(!c.isA("vtkDataArray"))return Id(`Cannot set attribute ${l}. Only vtkDataArray subclasses can be set as active attributes.`),-1;if(!t.checkNumberOfComponents(c,l))return Id(`Cannot set attribute ${l}. Incorrect number of components.`),-1}return e[`active${l}`]=o,t.modified(),o}return o===-1&&(e[`active${l}`]=o,t.modified()),-1},t.getActiveAttribute=o=>{const i=r(o);return t[`get${i}`]()},t.removeAllArrays=()=>{n.forEach(o=>{e[`active${o}`]=-1}),a.removeAllArrays()},t.removeArrayByIndex=o=>(o!==-1&&n.forEach(i=>{o===e[`active${i}`]?e[`active${i}`]=-1:o<e[`active${i}`]&&(e[`active${i}`]-=1)}),a.removeArrayByIndex(o)),n.forEach(o=>{const i=`active${o}`;t[`get${o}`]=()=>t.getArrayByIndex(e[i]),t[`set${o}`]=l=>t.setAttribute(l,o),t[`setActive${o}`]=l=>t.setActiveAttributeByIndex(t.getArrayWithIndex(l).index,o),t[`copy${o}Off`]=()=>{const l=o.toUpperCase();e.copyAttributeFlags[Ci.PASSDATA][Oo[l]]=!1},t[`copy${o}On`]=()=>{const l=o.toUpperCase();e.copyAttributeFlags[Ci.PASSDATA][Oo[l]]=!0}}),t.initializeAttributeCopyFlags=()=>{e.copyAttributeFlags=[],Object.keys(Ci).filter(o=>o!=="ALLCOPY").forEach(o=>{e.copyAttributeFlags[Ci[o]]=Object.keys(Oo).filter(i=>i!=="NUM_ATTRIBUTES").reduce((i,l)=>(i[Oo[l]]=!0,i),[])}),e.copyAttributeFlags[Ci.COPYTUPLE][Oo.GLOBALIDS]=!1,e.copyAttributeFlags[Ci.INTERPOLATE][Oo.GLOBALIDS]=!1,e.copyAttributeFlags[Ci.COPYTUPLE][Oo.PEDIGREEIDS]=!1},t.initialize=A.chain(t.initialize,t.initializeAttributeCopyFlags),e.dataArrays&&Object.keys(e.dataArrays).length&&Object.keys(e.dataArrays).forEach(o=>{!e.dataArrays[o].ref&&e.dataArrays[o].type==="vtkDataArray"&&t.addArray(Tt.newInstance(e.dataArrays[o]))});const s=t.shallowCopy;t.shallowCopy=(o,i)=>{s(o,i),e.arrays=o.getArrays().map(l=>{const c=l.newClone();return c.shallowCopy(l,i),{data:c}})},t.initializeAttributeCopyFlags()}const QG={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1};function gR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,QG,n),zG.extend(t,e,n),A.setGet(t,e,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),e.arrays||(e.arrays={}),JG(t,e)}const ez=A.newInstance(gR,"vtkDataSetAttributes");var Iw={newInstance:ez,extend:gR,...pR};const tz={UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6},hR={FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7};var nz={FieldDataTypes:tz,FieldAssociations:hR};const qy=["pointData","cellData","fieldData"];function rz(t,e){e.classHierarchy.push("vtkDataSet"),qy.forEach(r=>{e[r]?e[r]=qa(e[r]):e[r]=Iw.newInstance()});const n=t.shallowCopy;t.shallowCopy=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n(r,a),qy.forEach(s=>{e[s]=Iw.newInstance(),e[s].shallowCopy(r.getReferenceByName(s))})}}const az={};function vR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,az,n),A.obj(t,e),A.setGet(t,e,qy),rz(t,e)}const sz=A.newInstance(vR,"vtkDataSet");var Vl={newInstance:sz,extend:vR,...nz};const Pa={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9};var yR={StructuredType:Pa};const{StructuredType:As}=yR;function oz(t){let e=0;for(let n=0;n<3;++n)t[n*2]<t[n*2+1]&&e++;return t[0]>t[1]||t[2]>t[3]||t[4]>t[5]?As.EMPTY:e===3?As.XYZ_GRID:e===2?t[0]===t[1]?As.YZ_PLANE:t[2]===t[3]?As.XZ_PLANE:As.XY_PLANE:e===1?t[0]<t[1]?As.X_LINE:t[2]<t[3]?As.Y_LINE:As.Z_LINE:As.SINGLE_POINT}var iz={getDataDescriptionFromExtent:oz,...yR};const{vtkErrorMacro:Si}=A;function lz(t,e){e.classHierarchy.push("vtkImageData"),t.setExtent=function(){if(e.deleted)return Si("instance deleted - cannot call any method"),!1;for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];const s=r.length===1?r[0]:r;if(s.length!==6)return!1;const o=e.extent.some((i,l)=>i!==s[l]);return o&&(e.extent=s.slice(),e.dataDescription=iz.getDataDescriptionFromExtent(e.extent),t.modified()),o},t.setDimensions=function(){let n,r,a;if(e.deleted){Si("instance deleted - cannot call any method");return}if(arguments.length===1){const s=arguments.length<=0?void 0:arguments[0];n=s[0],r=s[1],a=s[2]}else if(arguments.length===3)n=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],a=arguments.length<=2?void 0:arguments[2];else{Si("Bad dimension specification");return}t.setExtent(0,n-1,0,r-1,0,a-1)},t.getDimensions=()=>[e.extent[1]-e.extent[0]+1,e.extent[3]-e.extent[2]+1,e.extent[5]-e.extent[4]+1],t.getNumberOfCells=()=>{const n=t.getDimensions();let r=1;for(let a=0;a<3;a++){if(n[a]===0)return 0;n[a]>1&&(r*=n[a]-1)}return r},t.getNumberOfPoints=()=>{const n=t.getDimensions();return n[0]*n[1]*n[2]},t.getPoint=n=>{const r=t.getDimensions();if(r[0]===0||r[1]===0||r[2]===0)return Si("Requesting a point from an empty image."),null;const a=new Float64Array(3);switch(e.dataDescription){case Pa.EMPTY:return null;case Pa.SINGLE_POINT:break;case Pa.X_LINE:a[0]=n;break;case Pa.Y_LINE:a[1]=n;break;case Pa.Z_LINE:a[2]=n;break;case Pa.XY_PLANE:a[0]=n%r[0],a[1]=n/r[0];break;case Pa.YZ_PLANE:a[1]=n%r[1],a[2]=n/r[1];break;case Pa.XZ_PLANE:a[0]=n%r[0],a[2]=n/r[0];break;case Pa.XYZ_GRID:a[0]=n%r[0],a[1]=n/r[0]%r[1],a[2]=n/(r[0]*r[1]);break;default:Si("Invalid dataDescription");break}const s=[0,0,0];return t.indexToWorld(a,s),s},t.getBounds=()=>t.extentToBounds(t.getSpatialExtent()),t.extentToBounds=n=>qt.transformBounds(n,e.indexToWorld),t.getSpatialExtent=()=>qt.inflate([...e.extent],.5),t.computeTransforms=()=>{I1(e.indexToWorld,e.origin),e.indexToWorld[0]=e.direction[0],e.indexToWorld[1]=e.direction[1],e.indexToWorld[2]=e.direction[2],e.indexToWorld[4]=e.direction[3],e.indexToWorld[5]=e.direction[4],e.indexToWorld[6]=e.direction[5],e.indexToWorld[8]=e.direction[6],e.indexToWorld[9]=e.direction[7],e.indexToWorld[10]=e.direction[8],so(e.indexToWorld,e.indexToWorld,e.spacing),An(e.worldToIndex,e.indexToWorld)},t.indexToWorld=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return It(r,n,e.indexToWorld),r},t.indexToWorldVec3=t.indexToWorld,t.worldToIndex=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return It(r,n,e.worldToIndex),r},t.worldToIndexVec3=t.worldToIndex,t.indexToWorldBounds=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return qt.transformBounds(n,e.indexToWorld,r)},t.worldToIndexBounds=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return qt.transformBounds(n,e.worldToIndex,r)},t.onModified(t.computeTransforms),t.computeTransforms(),t.getCenter=()=>qt.getCenter(t.getBounds()),t.computeHistogram=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const a=[0,0,0,0,0,0];t.worldToIndexBounds(n,a);const s=[0,0,0],o=[0,0,0];qt.computeCornerPoints(a,s,o),Py(s,s),Py(o,o);const i=t.getDimensions();zy(s,[0,0,0],[i[0]-1,i[1]-1,i[2]-1],s),zy(o,[0,0,0],[i[0]-1,i[1]-1,i[2]-1],o);const l=i[0],c=i[0]*i[1],u=t.getPointData().getScalars().getData();let f=-1/0,d=1/0,p=0,h=0,g=0;for(let C=s[2];C<=o[2];C++)for(let S=s[1];S<=o[1];S++){let T=s[0]+S*l+C*c;for(let w=s[0];w<=o[0];w++){if(!r||r([w,S,C],a)){const x=u[T];x>f&&(f=x),x<d&&(d=x),p+=x*x,h+=x,g+=1}++T}}const y=g>0?h/g:0,m=g?Math.abs(p/g-y*y):0,b=Math.sqrt(m);return{minimum:d,maximum:f,average:y,variance:m,sigma:b,count:g}},t.computeIncrements=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const a=[];let s=r;for(let o=0;o<3;++o)a[o]=s,s*=n[o*2+1]-n[o*2]+1;return a},t.computeOffsetIndex=n=>{let[r,a,s]=n;const o=t.getExtent(),i=t.getPointData().getScalars().getNumberOfComponents(),l=t.computeIncrements(o,i);return Math.floor((Math.round(r)-o[0])*l[0]+(Math.round(a)-o[2])*l[1]+(Math.round(s)-o[4])*l[2])},t.getOffsetIndexFromWorld=n=>{const r=t.getExtent(),a=t.worldToIndex(n);for(let s=0;s<3;++s)if(a[s]<r[s*2]||a[s]>r[s*2+1])return Si(`GetScalarPointer: Pixel ${a} is not in memory. Current extent = ${r}`),NaN;return t.computeOffsetIndex(a)},t.getScalarValueFromWorld=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const a=t.getPointData().getScalars().getNumberOfComponents();if(r<0||r>=a)return Si(`GetScalarPointer: Scalar Component ${r} is not within bounds. Current Scalar numberOfComponents: ${a}`),NaN;const s=t.getOffsetIndexFromWorld(n);return Number.isNaN(s)?s:t.getPointData().getScalars().getComponent(s,r)}}const cz={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:Pa.EMPTY};function mR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,cz,n),Vl.extend(t,e,n),e.direction?Array.isArray(e.direction)&&(e.direction=new Float64Array(e.direction.slice(0,9))):e.direction=Oa(new Float64Array(9)),e.indexToWorld=new Float64Array(16),e.worldToIndex=new Float64Array(16),A.get(t,e,["indexToWorld","worldToIndex"]),A.setGetArray(t,e,["origin","spacing"],3),A.setGetArray(t,e,["direction"],9),A.getArray(t,e,["extent"],6),lz(t,e)}const uz=A.newInstance(mR,"vtkImageData");var CR={newInstance:uz,extend:mR};const fz={MAGNITUDE:0,COMPONENT:1,RGBCOLORS:2},Xy={LUMINANCE:1,LUMINANCE_ALPHA:2,RGB:3,RGBA:4};var xC={VectorMode:fz,ScalarMappingTarget:Xy};const dz={DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},pz={DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5},gz={BY_ID:0,BY_NAME:1};var nv={ColorMode:dz,GetArray:gz,ScalarMode:pz};const{ScalarMappingTarget:Pw,VectorMode:gs}=xC,{VtkDataTypes:bi}=Tt,{ColorMode:Pd}=nv,{vtkErrorMacro:Gw}=A;function hz(t){return t}function zw(t){return Math.floor(t*255+.5)}function vz(t,e){e.classHierarchy.push("vtkScalarsToColors"),t.setVectorModeToMagnitude=()=>t.setVectorMode(gs.MAGNITUDE),t.setVectorModeToComponent=()=>t.setVectorMode(gs.COMPONENT),t.setVectorModeToRGBColors=()=>t.setVectorMode(gs.RGBCOLORS),t.build=()=>{},t.isOpaque=()=>!0,t.setAnnotations=(n,r)=>{if(!(n&&!r||!n&&r)){if(n&&r&&n.length!==r.length){Gw("Values and annotations do not have the same number of tuples so ignoring");return}if(e.annotationArray=[],r&&n){const a=r.length;for(let s=0;s<a;s++)e.annotationArray.push({value:n[s],annotation:String(r[s])})}t.updateAnnotatedValueMap(),t.modified()}},t.setAnnotation=(n,r)=>{let a=t.checkForAnnotatedValue(n),s=!1;return a>=0?e.annotationArray[a].annotation!==r&&(e.annotationArray[a].annotation=r,s=!0):(e.annotationArray.push({value:n,annotation:r}),a=e.annotationArray.length-1,s=!0),s&&(t.updateAnnotatedValueMap(),t.modified()),a},t.getNumberOfAnnotatedValues=()=>e.annotationArray.length,t.getAnnotatedValue=n=>n<0||n>=e.annotationArray.length?null:e.annotationArray[n].value,t.getAnnotation=n=>e.annotationArray[n]===void 0?null:e.annotationArray[n].annotation,t.getAnnotatedValueIndex=n=>e.annotationArray.length?t.checkForAnnotatedValue(n):-1,t.removeAnnotation=n=>{const r=t.checkForAnnotatedValue(n),a=r>=0;return a&&(e.annotationArray.splice(r,1),t.updateAnnotatedValueMap(),t.modified()),a},t.resetAnnotations=()=>{e.annotationArray=[],e.annotatedValueMap=[],t.modified()},t.getAnnotationColor=(n,r)=>{if(e.indexedLookup){const a=t.getAnnotatedValueIndex(n);t.getIndexedColor(a,r)}else t.getColor(parseFloat(n),r),r[3]=1},t.checkForAnnotatedValue=n=>t.getAnnotatedValueIndexInternal(n),t.getAnnotatedValueIndexInternal=n=>{if(e.annotatedValueMap[n]!==void 0){const r=e.annotationArray.length;return e.annotatedValueMap[n]%r}return-1},t.getIndexedColor=(n,r)=>{r[0]=0,r[1]=0,r[2]=0,r[3]=0},t.updateAnnotatedValueMap=()=>{e.annotatedValueMap=[];const n=e.annotationArray.length;for(let r=0;r<n;r++)e.annotatedValueMap[e.annotationArray[r].value]=r},t.mapScalars=(n,r,a)=>{const s=n.getNumberOfComponents();let o=null;if(r===Pd.DEFAULT&&n.getDataType()===bi.UNSIGNED_CHAR||r===Pd.DIRECT_SCALARS&&n)o=t.convertToRGBA(n,s,n.getNumberOfTuples());else{const i={type:"vtkDataArray",name:"temp",numberOfComponents:4,dataType:bi.UNSIGNED_CHAR},l=A.newTypedArray(i.dataType,4*n.getNumberOfTuples());i.values=l,i.size=l.length,o=Tt.newInstance(i);let c=a;c<0&&s>1?t.mapVectorsThroughTable(n,o,Pw.RGBA,-1,-1):(c<0&&(c=0),c>=s&&(c=s-1),t.mapScalarsThroughTable(n,o,Pw.RGBA,c))}return o},t.mapVectorsToMagnitude=(n,r,a)=>{const s=n.getNumberOfTuples(),o=n.getNumberOfComponents(),i=r.getData(),l=n.getData();for(let c=0;c<s;c++){let u=0;for(let f=0;f<a;f++)u+=l[c*o+f]*l[c*o+f];i[c]=Math.sqrt(u)}},t.mapVectorsThroughTable=(n,r,a,s,o)=>{let i=t.getVectorMode(),l=o,c=s;const u=n.getNumberOfComponents();i===gs.COMPONENT?(c===-1&&(c=t.getVectorComponent()),c<0&&(c=0),c>=u&&(c=u-1)):(l===-1&&(l=t.getVectorSize()),l<=0?(c=0,l=u):(c<0&&(c=0),c>=u&&(c=u-1),c+l>u&&(l=u-c)),i===gs.MAGNITUDE&&(u===1||l===1)&&(i=gs.COMPONENT));let f=0;switch(c>0&&(f=c),i){case gs.COMPONENT:{t.mapScalarsThroughTable(n,r,a,f);break}case gs.RGBCOLORS:break;case gs.MAGNITUDE:default:{const d=Tt.newInstance({numberOfComponents:1,values:new Float32Array(n.getNumberOfTuples())});t.mapVectorsToMagnitude(n,d,l),t.mapScalarsThroughTable(d,r,a,0);break}}},t.luminanceToRGBA=(n,r,a,s)=>{const o=s(a),i=r.getData(),l=n.getData(),c=i.length,u=0,f=1;let d=0;for(let p=u;p<c;p+=f){const h=s(i[p]);l[d*4]=h,l[d*4+1]=h,l[d*4+2]=h,l[d*4+3]=o,d++}},t.luminanceAlphaToRGBA=(n,r,a,s)=>{const o=r.getData(),i=n.getData(),l=o.length,c=0,u=2;let f=0;for(let d=c;d<l;d+=u){const p=s(o[d]);i[f]=p,i[f+1]=p,i[f+2]=p,i[f+3]=s(o[d+1])*a,f+=4}},t.rGBToRGBA=(n,r,a,s)=>{const o=zw(a),i=r.getData(),l=n.getData(),c=i.length,u=0,f=3;let d=0;for(let p=u;p<c;p+=f)l[d*4]=s(i[p]),l[d*4+1]=s(i[p+1]),l[d*4+2]=s(i[p+2]),l[d*4+3]=o,d++},t.rGBAToRGBA=(n,r,a,s)=>{const o=r.getData(),i=n.getData(),l=o.length,c=0,u=4;let f=0;for(let d=c;d<l;d+=u)i[f*4]=s(o[d]),i[f*4+1]=s(o[d+1]),i[f*4+2]=s(o[d+2]),i[f*4+3]=s(o[d+3])*a,f++},t.convertToRGBA=(n,r,a)=>{let{alpha:s}=e;if(r===4&&s>=1&&n.getDataType()===bi.UNSIGNED_CHAR)return n;const o=Tt.newInstance({numberOfComponents:4,empty:!0,size:4*a,dataType:bi.UNSIGNED_CHAR});if(a<=0)return o;s=s>0?s:0,s=s<1?s:1;let i=hz;switch((n.getDataType()===bi.FLOAT||n.getDataType()===bi.DOUBLE)&&(i=zw),r){case 1:t.luminanceToRGBA(o,n,s,i);break;case 2:t.luminanceAlphaToRGBA(o,n,i);break;case 3:t.rGBToRGBA(o,n,s,i);break;case 4:t.rGBAToRGBA(o,n,s,i);break;default:return Gw("Cannot convert colors"),null}return o},t.usingLogScale=()=>!1,t.getNumberOfAvailableColors=()=>256*256*256,t.setRange=(n,r)=>t.setMappingRange(n,r),t.getRange=()=>t.getMappingRange(),t.areScalarsOpaque=(n,r,a)=>{if(!n)return t.isOpaque();const s=n.getNumberOfComponents();return r===Pd.DEFAULT&&n.getDataType()===bi.UNSIGNED_CHAR||r===Pd.DIRECT_SCALARS?s===3||s===1?e.alpha>=1:n.getRange(s-1)[0]===255:!0}}const yz={alpha:1,vectorComponent:0,vectorSize:-1,vectorMode:gs.COMPONENT,mappingRange:null,annotationArray:null,annotatedValueMap:null,indexedLookup:!1};function SR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,yz,n),A.obj(t,e),e.mappingRange=[0,255],e.annotationArray=[],e.annotatedValueMap=[],A.setGet(t,e,["vectorSize","vectorComponent","vectorMode","alpha","indexedLookup"]),A.setArray(t,e,["mappingRange"],2),A.getArray(t,e,["mappingRange"]),vz(t,e)}const mz=A.newInstance(SR,"vtkScalarsToColors");var rv={newInstance:mz,extend:SR,...xC};const{vtkErrorMacro:Hw}=A,Kw=0,jw=1,y0=2;function Cz(t,e){e.classHierarchy.push("vtkLookupTable"),t.isOpaque=()=>{if(e.opaqueFlagBuildTime.getMTime()<t.getMTime()){let n=!0;e.nanColor[3]<1&&(n=0),e.useBelowRangeColor&&e.belowRangeColor[3]<1&&(n=0),e.useAboveRangeColor&&e.aboveRangeColor[3]<1&&(n=0);for(let r=3;r<e.table.length&&n;r+=4)e.table[r]<255&&(n=!1);e.opaqueFlag=n,e.opaqueFlagBuildTime.modified()}return e.opaqueFlag},t.usingLogScale=()=>!1,t.getNumberOfAvailableColors=()=>e.table.length/4,t.linearIndexLookup=(n,r)=>{let a=0;const s=Number(n);return s<r.range[0]?a=r.maxIndex+Kw+1.5:s>r.range[1]?a=r.maxIndex+jw+1.5:(a=(s+r.shift)*r.scale,a=a<r.maxIndex?a:r.maxIndex),Math.floor(a)},t.linearLookup=(n,r,a)=>{let s=0;rh(n)?s=Math.floor(a.maxIndex+1.5+y0):s=t.linearIndexLookup(n,a);const o=4*s;return r.slice(o,o+4)},t.indexedLookupFunction=(n,r,a)=>{let s=t.getAnnotatedValueIndexInternal(n);s===-1&&(s=e.numberOfColors+y0);const o=4*s;return[r[o],r[o+1],r[o+2],r[o+3]]},t.lookupShiftAndScale=(n,r)=>{r.shift=-n[0],r.scale=Number.MAX_VALUE,n[1]>n[0]&&(r.scale=(r.maxIndex+1)/(n[1]-n[0]))},t.mapScalarsThroughTable=(n,r,a,s)=>{let o=t.linearLookup;e.indexedLookup&&(o=t.indexedLookupFunction);const i=t.getMappingRange(),l={maxIndex:t.getNumberOfColors()-1,range:i,shift:0,scale:0};t.lookupShiftAndScale(i,l);const c=t.getAlpha(),u=n.getNumberOfTuples(),f=n.getNumberOfComponents(),d=r.getData(),p=n.getData();if(c>=1){if(a===Xy.RGBA)for(let h=0;h<u;h++){const g=o(p[h*f+s],e.table,l);d[h*4]=g[0],d[h*4+1]=g[1],d[h*4+2]=g[2],d[h*4+3]=g[3]}}else if(a===Xy.RGBA)for(let h=0;h<u;h++){const g=o(p[h*f+s],e.table,l);d[h*4]=g[0],d[h*4+1]=g[1],d[h*4+2]=g[2],d[h*4+3]=Math.floor(g[3]*c+.5)}},t.forceBuild=()=>{let n=0,r=0,a=0,s=0;const o=e.numberOfColors-1;o&&(n=(e.hueRange[1]-e.hueRange[0])/o,r=(e.saturationRange[1]-e.saturationRange[0])/o,a=(e.valueRange[1]-e.valueRange[0])/o,s=(e.alphaRange[1]-e.alphaRange[0])/o),e.table.length=4*o+16;const i=[],l=[];for(let c=0;c<=o;c++)i[0]=e.hueRange[0]+c*n,i[1]=e.saturationRange[0]+c*r,i[2]=e.valueRange[0]+c*a,Ai(i,l),l[3]=e.alphaRange[0]+c*s,e.table[c*4]=l[0]*255+.5,e.table[c*4+1]=l[1]*255+.5,e.table[c*4+2]=l[2]*255+.5,e.table[c*4+3]=l[3]*255+.5;t.buildSpecialColors(),e.buildTime.modified()},t.setTable=n=>{if(Array.isArray(n)){const a=n[0].length;e.numberOfColors=n.length;const s=4-a;let o=0;for(let i=0;i<e.numberOfColors;i++)e.table[i*4]=255,e.table[i*4+1]=255,e.table[i*4+2]=255,e.table[i*4+3]=255;for(let i=0;i<n.length;i++){const l=n[i];for(let c=0;c<a;c++)e.table[o++]=l[c];o+=s}return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0}if(n.getNumberOfComponents()!==4)return Hw("Expected 4 components for RGBA colors"),!1;if(n.getDataType()!==jt.UNSIGNED_CHAR)return Hw("Expected unsigned char values for RGBA colors"),!1;e.numberOfColors=n.getNumberOfTuples();const r=n.getData();e.table.length=r.length;for(let a=0;a<r.length;a++)e.table[a]=r[a];return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0},t.buildSpecialColors=()=>{const{numberOfColors:n}=e,r=e.table;let a=(n+Kw)*4;e.useBelowRangeColor||n===0?(r[a]=e.belowRangeColor[0]*255+.5,r[a+1]=e.belowRangeColor[1]*255+.5,r[a+2]=e.belowRangeColor[2]*255+.5,r[a+3]=e.belowRangeColor[3]*255+.5):(r[a]=r[0],r[a+1]=r[1],r[a+2]=r[2],r[a+3]=r[3]),a=(n+jw)*4,e.useAboveRangeColor||n===0?(r[a]=e.aboveRangeColor[0]*255+.5,r[a+1]=e.aboveRangeColor[1]*255+.5,r[a+2]=e.aboveRangeColor[2]*255+.5,r[a+3]=e.aboveRangeColor[3]*255+.5):(r[a]=r[4*(n-1)+0],r[a+1]=r[4*(n-1)+1],r[a+2]=r[4*(n-1)+2],r[a+3]=r[4*(n-1)+3]),a=(n+y0)*4,r[a]=e.nanColor[0]*255+.5,r[a+1]=e.nanColor[1]*255+.5,r[a+2]=e.nanColor[2]*255+.5,r[a+3]=e.nanColor[3]*255+.5},t.build=()=>{(e.table.length<1||t.getMTime()>e.buildTime.getMTime()&&e.insertTime.getMTime()<=e.buildTime.getMTime())&&t.forceBuild()},e.table.length>0&&(t.buildSpecialColors(),e.insertTime.modified())}const Sz={numberOfColors:256,hueRange:[0,.66667],saturationRange:[1,1],valueRange:[1,1],alphaRange:[1,1],nanColor:[.5,0,0,1],belowRangeColor:[0,0,0,1],aboveRangeColor:[1,1,1,1],useAboveRangeColor:!1,useBelowRangeColor:!1,alpha:1};function bR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Sz,n),rv.extend(t,e,n),e.table||(e.table=[]),e.buildTime={},A.obj(e.buildTime),e.opaqueFlagBuildTime={},A.obj(e.opaqueFlagBuildTime,{mtime:0}),e.insertTime={},A.obj(e.insertTime,{mtime:0}),A.get(t,e,["buildTime"]),A.setGet(t,e,["numberOfColors","useAboveRangeColor","useBelowRangeColor"]),A.setArray(t,e,["alphaRange","hueRange","saturationRange","valueRange"],2),A.setArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"],4),A.getArray(t,e,["hueRange","saturationRange","valueRange","alphaRange","nanColor","belowRangeColor","aboveRangeColor"]),Cz(t,e)}const bz=A.newInstance(bR,"vtkLookupTable");var Hu={newInstance:bz,extend:bR};let wR=1,EC=0;const wz=["VTK_RESOLVE_OFF","VTK_RESOLVE_POLYGON_OFFSET"];function Tz(){return wR}function xz(t){wR=t}function Ez(){return EC}function av(){EC=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0}function kz(){av(0)}function Oz(){av(0)}function Mz(){av(1)}function Rz(){return wz[EC]}var Zy={getResolveCoincidentTopologyAsString:Rz,getResolveCoincidentTopologyPolygonOffsetFaces:Tz,getResolveCoincidentTopology:Ez,setResolveCoincidentTopology:av,setResolveCoincidentTopologyPolygonOffsetFaces:xz,setResolveCoincidentTopologyToDefault:kz,setResolveCoincidentTopologyToOff:Oz,setResolveCoincidentTopologyToPolygonOffset:Mz};function TR(t,e,n){n.forEach(r=>{t[`get${r.method}`]=()=>e[r.key],t[`set${r.method}`]=(a,s)=>{e[r.key]={factor:a,offset:s}}})}const sv=["Polygon","Line","Point"],_z={Polygon:{factor:2,offset:0},Line:{factor:1,offset:-1},Point:{factor:0,offset:-2}},Wi={};TR(Wi,_z,sv.map(t=>({key:t,method:`ResolveCoincidentTopology${t}OffsetParameters`})));function Vz(t,e){e.resolveCoincidentTopology===void 0&&(e.resolveCoincidentTopology=!1),A.setGet(t,e,["resolveCoincidentTopology"]),e.topologyOffset={Polygon:{factor:0,offset:0},Line:{factor:0,offset:0},Point:{factor:0,offset:0}},Object.keys(Zy).forEach(n=>{t[n]=Zy[n]}),Object.keys(Wi).forEach(n=>{t[n]=Wi[n]}),TR(t,e.topologyOffset,sv.map(n=>({key:n,method:`RelativeCoincidentTopology${n}OffsetParameters`}))),t.getCoincidentTopologyPolygonOffsetParameters=()=>{const n=Wi.getResolveCoincidentTopologyPolygonOffsetParameters(),r=t.getRelativeCoincidentTopologyPolygonOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}},t.getCoincidentTopologyLineOffsetParameters=()=>{const n=Wi.getResolveCoincidentTopologyLineOffsetParameters(),r=t.getRelativeCoincidentTopologyLineOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}},t.getCoincidentTopologyPointOffsetParameter=()=>{const n=Wi.getResolveCoincidentTopologyPointOffsetParameters(),r=t.getRelativeCoincidentTopologyPointOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}}}var ov={implementCoincidentTopologyMethods:Vz,staticOffsetAPI:Wi,otherStaticMethods:Zy,CATEGORIES:sv};const Ur={MIN_KNOWN_PASS:0,ACTOR_PASS:0,COMPOSITE_INDEX_PASS:1,ID_LOW24:2,ID_HIGH24:3,MAX_KNOWN_PASS:3};var xR={PassTypes:Ur};const{FieldAssociations:Yw}=Vl,{staticOffsetAPI:Dz,otherStaticMethods:Lz}=ov,{ColorMode:m0,ScalarMode:wi,GetArray:C0}=nv,{VectorMode:Nz}=xC,{VtkDataTypes:Bz}=Tt;function Tu(t){return()=>A.vtkErrorMacro(`vtkMapper::${t} - NOT IMPLEMENTED`)}function Fz(t,e){e.classHierarchy.push("vtkMapper"),t.getBounds=()=>{const n=t.getInputData();return n?(e.static||t.update(),e.bounds=n.getBounds()):e.bounds=ml(),e.bounds},t.setForceCompileOnly=n=>{e.forceCompileOnly=n},t.setSelectionWebGLIdsToVTKIds=n=>{e.selectionWebGLIdsToVTKIds=n},t.createDefaultLookupTable=()=>{e.lookupTable=Hu.newInstance()},t.getColorModeAsString=()=>A.enumToString(m0,e.colorMode),t.setColorModeToDefault=()=>t.setColorMode(0),t.setColorModeToMapScalars=()=>t.setColorMode(1),t.setColorModeToDirectScalars=()=>t.setColorMode(2),t.getScalarModeAsString=()=>A.enumToString(wi,e.scalarMode),t.setScalarModeToDefault=()=>t.setScalarMode(0),t.setScalarModeToUsePointData=()=>t.setScalarMode(1),t.setScalarModeToUseCellData=()=>t.setScalarMode(2),t.setScalarModeToUsePointFieldData=()=>t.setScalarMode(3),t.setScalarModeToUseCellFieldData=()=>t.setScalarMode(4),t.setScalarModeToUseFieldData=()=>t.setScalarMode(5),t.getAbstractScalars=(n,r,a,s,o)=>{if(!n||!e.scalarVisibility)return{scalars:null,cellFLag:!1};let i=null,l=!1;if(r===wi.DEFAULT)i=n.getPointData().getScalars(),i||(i=n.getCellData().getScalars(),l=!0);else if(r===wi.USE_POINT_DATA)i=n.getPointData().getScalars();else if(r===wi.USE_CELL_DATA)i=n.getCellData().getScalars(),l=!0;else if(r===wi.USE_POINT_FIELD_DATA){const c=n.getPointData();a===C0.BY_ID?i=c.getArrayByIndex(s):i=c.getArrayByName(o)}else if(r===wi.USE_CELL_FIELD_DATA){const c=n.getCellData();l=!0,a===C0.BY_ID?i=c.getArrayByIndex(s):i=c.getArrayByName(o)}else if(r===wi.USE_FIELD_DATA){const c=n.getFieldData();a===C0.BY_ID?i=c.getArrayByIndex(s):i=c.getArrayByName(o)}return{scalars:i,cellFlag:l}},t.mapScalars=(n,r)=>{const a=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;if(!a){e.colorCoordinates=null,e.colorTextureMap=null,e.colorMapColors=null;return}const s=`${t.getMTime()}${a.getMTime()}${r}`;if(e.colorBuildString!==s){if(e.useLookupTableScalarRange||t.getLookupTable().setRange(e.scalarRange[0],e.scalarRange[1]),t.canUseTextureMapForColoring(n))t.mapScalarsToTexture(a,r);else{e.colorCoordinates=null,e.colorTextureMap=null;const o=t.getLookupTable();o&&(o.build(),e.colorMapColors=o.mapScalars(a,e.colorMode,e.fieldDataTupleId))}e.colorBuildString=`${t.getMTime()}${a.getMTime()}${r}`}},t.scalarToTextureCoordinate=(n,r,a)=>{let s=.5,o=1;return rh(n)||(o=.49,s=(n-r)*a,s>1e3?s=1e3:s<-1e3&&(s=-1e3)),{texCoordS:s,texCoordT:o}},t.createColorTextureCoordinates=(n,r,a,s,o,i,l,c,u)=>{const f=(i[1]-i[0])/c,d=[];d[0]=i[0]-f,d[1]=i[1]+f;const p=1/(d[1]-d[0]),h=r.getData(),g=n.getData();let y=0,m=0;if(o<0||o>=s)for(let b=0;b<a;++b){let C=0;for(let w=0;w<s;++w)C+=g[y]*g[y],y++;let S=Math.sqrt(C);u&&(S=Hu.applyLogScale(S,l,i));const T=t.scalarToTextureCoordinate(S,d[0],p);h[m]=T.texCoordS,h[m+1]=T.texCoordT,m+=2}else{y+=o;for(let b=0;b<a;++b){let C=g[y];u&&(C=Hu.applyLogScale(C,l,i));const S=t.scalarToTextureCoordinate(C,d[0],p);h[m]=S.texCoordS,h[m+1]=S.texCoordT,m+=2,y+=s}}},t.mapScalarsToTexture=(n,r)=>{const a=e.lookupTable.getRange(),s=e.lookupTable.usingLogScale();s&&Hu.getLogRange(a,a);const o=e.lookupTable.getAlpha();if(e.colorMapColors=null,e.colorTextureMap==null||t.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getAlpha()!==r){e.lookupTable.setAlpha(r),e.colorTextureMap=null,e.lookupTable.build();let i=e.lookupTable.getNumberOfAvailableColors();i>4094&&(i=4094),i<64&&(i=64),i+=2;const l=(a[1]-a[0])/(i-2),c=new Float64Array(i*2);for(let f=0;f<i;++f)c[f]=a[0]+f*l-l/2,s&&(c[f]=10**c[f]);for(let f=0;f<i;++f)c[f+i]=NaN;e.colorTextureMap=CR.newInstance(),e.colorTextureMap.setExtent(0,i-1,0,1,0,0);const u=Tt.newInstance({numberOfComponents:1,values:c});e.colorTextureMap.getPointData().setScalars(e.lookupTable.mapScalars(u,e.colorMode,0)),e.lookupTable.setAlpha(o)}if(!e.colorCoordinates||t.getMTime()>e.colorCoordinates.getMTime()||t.getInputData(0).getMTime()>e.colorCoordinates.getMTime()||e.lookupTable.getMTime()>e.colorCoordinates.getMTime()){e.colorCoordinates=null;const i=n.getNumberOfComponents(),l=n.getNumberOfTuples();e.colorCoordinates=Tt.newInstance({numberOfComponents:2,values:new Float32Array(l*2)});let c=e.lookupTable.getVectorComponent();e.lookupTable.getVectorMode()===Nz.MAGNITUDE&&n.getNumberOfComponents()>1&&(c=-1),t.createColorTextureCoordinates(n,e.colorCoordinates,l,i,c,a,e.lookupTable.getRange(),e.colorTextureMap.getPointData().getScalars().getNumberOfTuples()/2-2,s)}},t.getIsOpaque=()=>{const n=t.getInputData(),a=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;if(!e.scalarVisibility||a==null)return!0;const s=t.getLookupTable();return s?(s.build(),s.areScalarsOpaque(a,e.colorMode,-1)):!0},t.canUseTextureMapForColoring=n=>{if(!e.interpolateScalarsBeforeMapping||e.lookupTable&&e.lookupTable.getIndexedLookup())return!1;const r=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName),a=r.scalars;return!(!a||r.cellFlag||e.colorMode===m0.DEFAULT&&a.getDataType()===Bz.UNSIGNED_CHAR||e.colorMode===m0.DIRECT_SCALARS)},t.clearColorArrays=()=>{e.colorMapColors=null,e.colorCoordinates=null,e.colorTextureMap=null},t.getLookupTable=()=>(e.lookupTable||t.createDefaultLookupTable(),e.lookupTable),t.getMTime=()=>{let n=e.mtime;if(e.lookupTable!==null){const r=e.lookupTable.getMTime();n=r>n?r:n}return n},t.getPrimitiveCount=()=>{const n=t.getInputData();return{points:n.getPoints().getNumberOfValues()/3,verts:n.getVerts().getNumberOfValues()-n.getVerts().getNumberOfCells(),lines:n.getLines().getNumberOfValues()-2*n.getLines().getNumberOfCells(),triangles:n.getPolys().getNumberOfValues()-3*n.getPolys().getNumberOfCells()}},t.acquireInvertibleLookupTable=Tu("AcquireInvertibleLookupTable"),t.valueToColor=Tu("ValueToColor"),t.colorToValue=Tu("ColorToValue"),t.useInvertibleColorFor=Tu("UseInvertibleColorFor"),t.clearInvertibleColor=Tu("ClearInvertibleColor"),t.processSelectorPixelBuffers=(n,r)=>{if(!n||!e.selectionWebGLIdsToVTKIds||!e.populateSelectionSettings)return;const a=n.getRawPixelBuffer(Ur.ID_LOW24),s=n.getRawPixelBuffer(Ur.ID_HIGH24),o=n.getCurrentPass(),i=n.getFieldAssociation();let l=null;i===Yw.FIELD_ASSOCIATION_POINTS?l=e.selectionWebGLIdsToVTKIds.points:i===Yw.FIELD_ASSOCIATION_CELLS&&(l=e.selectionWebGLIdsToVTKIds.cells),l&&r.forEach(c=>{if(o===Ur.ID_LOW24){let u=0;s&&(u+=s[c],u*=256),u+=a[c+2],u*=256,u+=a[c+1],u*=256,u+=a[c];const f=l[u],d=n.getPixelBuffer(Ur.ID_LOW24);d[c]=f&255,d[c+1]=(f&65280)>>8,d[c+2]=(f&16711680)>>16}else if(o===Ur.ID_HIGH24&&s){let u=0;u+=s[c],u*=256,u+=a[c],u*=256,u+=a[c+1],u*=256,u+=a[c+2];const f=l[u],d=n.getPixelBuffer(Ur.ID_HIGH24);d[c]=(f&4278190080)>>24}})}}const $z={colorMapColors:null,static:!1,lookupTable:null,scalarVisibility:!0,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,fieldDataTupleId:-1,populateSelectionSettings:!0,selectionWebGLIdsToVTKIds:null,interpolateScalarsBeforeMapping:!1,colorCoordinates:null,colorTextureMap:null,forceCompileOnly:0,useInvertibleColors:!1,invertibleScalars:null,customShaderAttributes:[]};function ER(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,$z,n),fR.extend(t,e,n),A.get(t,e,["colorCoordinates","colorMapColors","colorTextureMap","selectionWebGLIdsToVTKIds"]),A.setGet(t,e,["colorByArrayName","arrayAccessMode","colorMode","fieldDataTupleId","interpolateScalarsBeforeMapping","lookupTable","populateSelectionSettings","renderTime","scalarMode","scalarVisibility","static","useLookupTableScalarRange","customShaderAttributes"]),A.setGetArray(t,e,["scalarRange"],2),ov.implementCoincidentTopologyMethods(t,e),Fz(t,e)}const Uz=A.newInstance(ER,"vtkMapper");var ba={newInstance:Uz,extend:ER,...Dz,...Lz,...nv};function kR(t){let e=0;return t.filter((n,r)=>r===e?(e+=n+1,!0):!1)}function OR(t){let e=0;for(let n=0;n<t.length;)n+=t[n]+1,e++;return e}const Az={extractCellSizes:kR,getNumberOfCells:OR};function Wz(t,e){e.classHierarchy.push("vtkCellArray");const n={...t};t.getNumberOfCells=r=>(e.numberOfCells!==void 0&&!r||(e.cellSizes?e.numberOfCells=e.cellSizes.length:e.numberOfCells=OR(t.getData())),e.numberOfCells),t.getCellSizes=r=>(e.cellSizes!==void 0&&!r||(e.cellSizes=kR(t.getData())),e.cellSizes),t.resize=r=>{const a=t.getNumberOfTuples();n.resize(r);const s=t.getNumberOfTuples();s<a&&(s===0?(e.numberOfCells=0,e.cellSizes=[]):(e.numberOfCells=void 0,e.cellSizes=void 0))},t.setData=r=>{n.setData(r,1),e.numberOfCells=void 0,e.cellSizes=void 0},t.getCell=r=>{let a=r;const s=e.values[a++];return e.values.subarray(a,a+s)},t.insertNextCell=r=>{const a=t.getNumberOfCells();return t.insertNextTuples([r.length,...r]),++e.numberOfCells,e.cellSizes!=null&&e.cellSizes.push(r.length),a}}function Iz(t){return{empty:!0,numberOfComponents:1,dataType:jt.UNSIGNED_INT,...t}}function MR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Tt.extend(t,e,Iz(n)),Wz(t,e)}const Pz=A.newInstance(MR,"vtkCellArray");var Fc={newInstance:Pz,extend:MR,...Az};const{vtkErrorMacro:Gz}=A,zz=[1,-1,1,-1,1,-1];function Hz(t,e){e.classHierarchy.push("vtkPoints"),t.getNumberOfPoints=t.getNumberOfTuples,t.setNumberOfPoints=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;t.getNumberOfPoints()!==n&&(e.size=n*r,e.values=A.newTypedArray(e.dataType,e.size),t.setNumberOfComponents(r),t.modified())},t.setPoint=function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];t.setTuple(n,a)},t.getPoint=t.getTuple,t.findPoint=t.findTuple,t.insertNextPoint=(n,r,a)=>t.insertNextTuple([n,r,a]),t.getBounds=()=>{if(t.getNumberOfComponents()===3){const a=t.getRange(0);e.bounds[0]=a[0],e.bounds[1]=a[1];const s=t.getRange(1);e.bounds[2]=s[0],e.bounds[3]=s[1];const o=t.getRange(2);return e.bounds[4]=o[0],e.bounds[5]=o[1],e.bounds}if(t.getNumberOfComponents()!==2)return Gz(`getBounds called on an array with components of
        ${t.getNumberOfComponents()}`),zz;const n=t.getRange(0);e.bounds[0]=n[0],e.bounds[1]=n[1];const r=t.getRange(1);return e.bounds[2]=r[0],e.bounds[3]=r[1],e.bounds[4]=0,e.bounds[5]=0,e.bounds},t.computeBounds=t.getBounds,t.setNumberOfComponents(e.numberOfComponents<2?3:e.numberOfComponents)}const Kz={empty:!0,numberOfComponents:3,dataType:jt.FLOAT,bounds:[1,-1,1,-1,1,-1]};function RR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Kz,n),Tt.extend(t,e,n),Hz(t,e)}const jz=A.newInstance(RR,"vtkPoints");var ih={newInstance:jz,extend:RR};function Yz(t,e){e.classHierarchy.push("vtkCell"),t.initialize=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(r){e.pointsIds=r;let a=e.points.getData();a.length!==3*e.pointsIds.length&&(a=A.newTypedArray(n.getDataType(),3*e.pointsIds.length));const s=n.getData();e.pointsIds.forEach((o,i)=>{let l=3*o,c=3*i;a[c]=s[l],a[++c]=s[++l],a[++c]=s[++l]}),e.points.setData(a)}else{e.points=n,e.pointsIds=new Array(n.getNumberOfPoints());for(let a=n.getNumberOfPoints()-1;a>=0;--a)e.pointsIds[a]=a}},t.getBounds=()=>{const n=e.points.getNumberOfPoints(),r=[];if(n){e.points.getPoint(0,r),e.bounds[0]=r[0],e.bounds[1]=r[0],e.bounds[2]=r[1],e.bounds[3]=r[1],e.bounds[4]=r[2],e.bounds[5]=r[2];for(let a=1;a<n;a++)e.points.getPoint(a,r),e.bounds[0]=r[0]<e.bounds[0]?r[0]:e.bounds[0],e.bounds[1]=r[0]>e.bounds[1]?r[0]:e.bounds[1],e.bounds[2]=r[1]<e.bounds[2]?r[1]:e.bounds[2],e.bounds[3]=r[1]>e.bounds[3]?r[1]:e.bounds[3],e.bounds[4]=r[2]<e.bounds[4]?r[2]:e.bounds[4],e.bounds[5]=r[2]>e.bounds[5]?r[2]:e.bounds[5]}else fu(e.bounds);return e.bounds},t.getLength2=()=>{t.getBounds();let n=0,r=0;for(let a=0;a<3;a++)r=e.bounds[2*a+1]-e.bounds[2*a],n+=r*r;return n},t.getParametricDistance=n=>{let r,a=0;for(let s=0;s<3;s++)n[s]<0?r=-n[s]:n[s]>1?r=n[s]-1:r=0,r>a&&(a=r);return a},t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.deepCopy=n=>{n.initialize(e.points,e.pointsIds)},t.getCellDimension=()=>{},t.intersectWithLine=(n,r,a,s,o,i,l)=>{},t.evaluatePosition=(n,r,a,s,o,i)=>{A.vtkErrorMacro("vtkCell.evaluatePosition is not implemented.")}}const qz={bounds:[-1,-1,-1,-1,-1,-1],pointsIds:[]};function _R(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,qz,n),A.obj(t,e),e.points||(e.points=ih.newInstance()),A.get(t,e,["points","pointsIds"]),Yz(t,e)}const Xz=A.newInstance(_R,"vtkCell");var lh={newInstance:Xz,extend:_R};function Zz(t,e){let n=e;for(e>=t.array.length&&(n+=t.array.length);n>t.array.length;)t.array.push({ncells:0,cells:null});t.array.length=n}function Jz(t,e){e.classHierarchy.push("vtkCellLinks"),t.buildLinks=n=>{const r=n.getPoints().getNumberOfPoints(),a=n.getNumberOfCells(),s=new Uint32Array(r);if(n.isA("vtkPolyData")){for(let o=0;o<a;++o){const{cellPointIds:i}=n.getCellPoints(o);i.forEach(l=>{t.incrementLinkCount(l)})}t.allocateLinks(r),e.maxId=r-1;for(let o=0;o<a;++o){const{cellPointIds:i}=n.getCellPoints(o);i.forEach(l=>{t.insertCellReference(l,s[l]++,o)})}}else{for(let o=0;o<a;o++)lh.newInstance().getPointsIds().forEach(l=>{t.incrementLinkCount(l)});t.allocateLinks(r),e.maxId=r-1;for(let o=0;o<a;++o)lh.newInstance().getPointsIds().forEach(l=>{t.insertCellReference(l,s[l]++,o)})}},t.allocate=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.array=Array(n).fill().map(()=>({ncells:0,cells:null})),e.extend=r,e.maxId=-1},t.initialize=()=>{e.array=null},t.getLink=n=>e.array[n],t.getNcells=n=>e.array[n].ncells,t.getCells=n=>e.array[n].cells,t.insertNextPoint=n=>{e.array.push({ncells:n,cells:Array(n)}),++e.maxId},t.insertNextCellReference=(n,r)=>{e.array[n].cells[e.array[n].ncells++]=r},t.deletePoint=n=>{e.array[n].ncells=0,e.array[n].cells=null},t.removeCellReference=(n,r)=>{e.array[r].cells=e.array[r].cells.filter(a=>a!==n),e.array[r].ncells=e.array[r].cells.length},t.addCellReference=(n,r)=>{e.array[r].cells[e.array[r].ncells++]=n},t.resizeCellList=(n,r)=>{e.array[n].cells.length=r},t.squeeze=()=>{Zz(e,e.maxId+1)},t.reset=()=>{e.maxId=-1},t.deepCopy=n=>{e.array=[...n.array],e.extend=n.extend,e.maxId=n.maxId},t.incrementLinkCount=n=>{++e.array[n].ncells},t.allocateLinks=n=>{for(let r=0;r<n;++r)e.array[r].cells=new Array(e.array[r].ncells)},t.insertCellReference=(n,r,a)=>{e.array[n].cells[r]=a}}const Qz={array:null,maxId:0,extend:0};function VR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Qz,n),A.obj(t,e),Jz(t,e)}const e5=A.newInstance(VR,"vtkCellLinks");var t5={newInstance:e5,extend:VR};const Tn={VTK_EMPTY_CELL:0,VTK_VERTEX:1,VTK_POLY_VERTEX:2,VTK_LINE:3,VTK_POLY_LINE:4,VTK_TRIANGLE:5,VTK_TRIANGLE_STRIP:6,VTK_POLYGON:7,VTK_PIXEL:8,VTK_QUAD:9,VTK_TETRA:10,VTK_VOXEL:11,VTK_HEXAHEDRON:12,VTK_WEDGE:13,VTK_PYRAMID:14,VTK_PENTAGONAL_PRISM:15,VTK_HEXAGONAL_PRISM:16,VTK_QUADRATIC_EDGE:21,VTK_QUADRATIC_TRIANGLE:22,VTK_QUADRATIC_QUAD:23,VTK_QUADRATIC_POLYGON:36,VTK_QUADRATIC_TETRA:24,VTK_QUADRATIC_HEXAHEDRON:25,VTK_QUADRATIC_WEDGE:26,VTK_QUADRATIC_PYRAMID:27,VTK_BIQUADRATIC_QUAD:28,VTK_TRIQUADRATIC_HEXAHEDRON:29,VTK_QUADRATIC_LINEAR_QUAD:30,VTK_QUADRATIC_LINEAR_WEDGE:31,VTK_BIQUADRATIC_QUADRATIC_WEDGE:32,VTK_BIQUADRATIC_QUADRATIC_HEXAHEDRON:33,VTK_BIQUADRATIC_TRIANGLE:34,VTK_CUBIC_LINE:35,VTK_CONVEX_POINT_SET:41,VTK_POLYHEDRON:42,VTK_PARAMETRIC_CURVE:51,VTK_PARAMETRIC_SURFACE:52,VTK_PARAMETRIC_TRI_SURFACE:53,VTK_PARAMETRIC_QUAD_SURFACE:54,VTK_PARAMETRIC_TETRA_REGION:55,VTK_PARAMETRIC_HEX_REGION:56,VTK_HIGHER_ORDER_EDGE:60,VTK_HIGHER_ORDER_TRIANGLE:61,VTK_HIGHER_ORDER_QUAD:62,VTK_HIGHER_ORDER_POLYGON:63,VTK_HIGHER_ORDER_TETRAHEDRON:64,VTK_HIGHER_ORDER_WEDGE:65,VTK_HIGHER_ORDER_PYRAMID:66,VTK_HIGHER_ORDER_HEXAHEDRON:67,VTK_LAGRANGE_CURVE:68,VTK_LAGRANGE_TRIANGLE:69,VTK_LAGRANGE_QUADRILATERAL:70,VTK_LAGRANGE_TETRAHEDRON:71,VTK_LAGRANGE_HEXAHEDRON:72,VTK_LAGRANGE_WEDGE:73,VTK_LAGRANGE_PYRAMID:74,VTK_NUMBER_OF_CELL_TYPES:75},Jy=["vtkEmptyCell","vtkVertex","vtkPolyVertex","vtkLine","vtkPolyLine","vtkTriangle","vtkTriangleStrip","vtkPolygon","vtkPixel","vtkQuad","vtkTetra","vtkVoxel","vtkHexahedron","vtkWedge","vtkPyramid","vtkPentagonalPrism","vtkHexagonalPrism","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkQuadraticEdge","vtkQuadraticTriangle","vtkQuadraticQuad","vtkQuadraticTetra","vtkQuadraticHexahedron","vtkQuadraticWedge","vtkQuadraticPyramid","vtkBiQuadraticQuad","vtkTriQuadraticHexahedron","vtkQuadraticLinearQuad","vtkQuadraticLinearWedge","vtkBiQuadraticQuadraticWedge","vtkBiQuadraticQuadraticHexahedron","vtkBiQuadraticTriangle","vtkCubicLine","vtkQuadraticPolygon","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkConvexPointSet","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkParametricCurve","vtkParametricSurface","vtkParametricTriSurface","vtkParametricQuadSurface","vtkParametricTetraRegion","vtkParametricHexRegion","UnknownClass","UnknownClass","UnknownClass","vtkHigherOrderEdge","vtkHigherOrderTriangle","vtkHigherOrderQuad","vtkHigherOrderPolygon","vtkHigherOrderTetrahedron","vtkHigherOrderWedge","vtkHigherOrderPyramid","vtkHigherOrderHexahedron"];function n5(t){return t<Jy.length?Jy[t]:"UnknownClass"}function r5(t){return Jy.findIndex(t)}function a5(t){return t<Tn.VTK_QUADRATIC_EDGE||t===Tn.VTK_CONVEX_POINT_SET||t===Tn.VTK_POLYHEDRON}function s5(t){return t===Tn.VTK_TRIANGLE_STRIP||t===Tn.VTK_POLY_LINE||t===Tn.VTK_POLY_VERTEX}const o5={getClassNameFromTypeId:n5,getTypeIdFromClassName:r5,isLinear:a5,hasSubCells:s5};function i5(t,e){e.classHierarchy.push("vtkCellTypes"),t.allocate=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:512,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.size=n>0?n:1,e.extend=r>0?r:1,e.maxId=-1,e.typeArray=new Uint8Array(n),e.locationArray=new Uint32Array(n)},t.insertCell=(n,r,a)=>{e.typeArray[n]=r,e.locationArray[n]=a,n>e.maxId&&(e.maxId=n)},t.insertNextCell=(n,r)=>(t.insertCell(++e.maxId,n,r),e.maxId),t.setCellTypes=(n,r,a)=>{e.size=n,e.typeArray=r,e.locationArray=a,e.maxId=n-1},t.getCellLocation=n=>e.locationArray[n],t.deleteCell=n=>{e.typeArray[n]=Tn.VTK_EMPTY_CELL},t.getNumberOfTypes=()=>e.maxId+1,t.isType=n=>{const r=t.getNumberOfTypes();for(let a=0;a<r;++a)if(n===t.getCellType(a))return!0;return!1},t.insertNextType=n=>t.insertNextCell(n,-1),t.getCellType=n=>e.typeArray[n],t.reset=()=>{e.maxId=-1},t.deepCopy=n=>{t.allocate(n.getSize(),n.getExtend()),e.typeArray.set(n.getTypeArray()),e.locationArray.set(n.getLocationArray()),e.maxId=n.getMaxId()}}const l5={size:0,maxId:-1,extend:1e3};function DR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,l5,n),A.obj(t,e),A.get(t,e,["size","maxId","extend"]),A.getArray(t,e,["typeArray","locationArray"]),i5(t,e)}const c5=A.newInstance(DR,"vtkCellTypes");var u5={newInstance:c5,extend:DR,...o5};const f5={NO_INTERSECTION:0,YES_INTERSECTION:1,ON_LINE:2};var LR={IntersectionState:f5};const{IntersectionState:Qp}=LR;function pc(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;const a={t:Number.MIN_VALUE,distance:0},s=[];let o;s[0]=n[0]-e[0],s[1]=n[1]-e[1],s[2]=n[2]-e[2];const i=s[0]*(t[0]-e[0])+s[1]*(t[1]-e[1])+s[2]*(t[2]-e[2]),l=kt(s,s);let c=1e-5*i;return l!==0&&(a.t=i/l),c<0&&(c=-c),-c<l&&l<c||l<=0||a.t<0?o=e:a.t>1?o=n:(o=s,s[0]=e[0]+a.t*s[0],s[1]=e[1]+a.t*s[1],s[2]=e[2]+a.t*s[2]),r&&(r[0]=o[0],r[1]=o[1],r[2]=o[2]),a.distance=qr(o,t),a}function NR(t,e,n,r,a,s){const o=[],i=[],l=[];a[0]=0,s[0]=0,Es(e,t,o),Es(r,n,i),Es(n,t,l);const c=[kt(o,o),-kt(o,i),-kt(o,i),kt(i,i)],u=[];if(u[0]=kt(o,l),u[1]=-kt(i,l),vM(c,u,2)===0){let f=Number.MAX_VALUE;const d=[t,e,n,r],p=[n,n,t,t],h=[r,r,e,e];s[0],s[0],a[0],a[0],a[0],a[0],s[0],s[0];let g;for(let y=0;y<4;y++)g=pc(d[y],p[y],h[y]),g.distance<f&&(f=g.distance);return Qp.ON_LINE}return a[0]=u[0],s[0]=u[1],a[0]>=0&&a[0]<=1&&s[0]>=0&&s[0]<=1?Qp.YES_INTERSECTION:Qp.NO_INTERSECTION}const d5={distanceToLine:pc,intersection:NR};function p5(t,e){e.classHierarchy.push("vtkLine");function n(r){return r>=0&&r<=1}t.getCellDimension=()=>1,t.intersectWithLine=(r,a,s,o,i)=>{const l={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null};i[1]=0,i[2]=0;const c=[],u=[],f=[];e.points.getPoint(0,u),e.points.getPoint(1,f);const d=[],p=[],h=NR(r,a,u,f,d,p);if(l.t=d[0],l.betweenPoints=n(l.t),i[0]=p[0],h===Qp.YES_INTERSECTION){for(let g=0;g<3;g++)o[g]=u[g]+i[0]*(f[g]-u[g]),c[g]=r[g]+l.t*(a[g]-r[g]);if(qr(o,c)<=s*s)return l.intersect=1,l}else{let g;if(l.t<0)return g=pc(r,u,f,o),g.distance<=s*s&&(l.t=0,l.intersect=1,l.betweenPoints=!0),l;if(l.t>1)return g=pc(a,u,f,o),g.distance<=s*s&&(l.t=1,l.intersect=1,l.betweenPoints=!0),l;if(i[0]<0)return i[0]=0,g=pc(u,r,a,o),l.t=g.t,g.distance<=s*s&&(l.intersect=1),l;if(i[0]>1)return i[0]=1,g=pc(f,r,a,o),l.t=g.t,g.distance<=s*s&&(l.intersect=1),l}return l},t.evaluateLocation=(r,a,s)=>{const o=[],i=[];e.points.getPoint(0,o),e.points.getPoint(1,i);for(let l=0;l<3;l++)a[l]=o[l]+r[0]*(i[l]-o[l]);s[0]=1-r[0],s[1]=r[0]},t.evaluateOrientation=(r,a,s)=>e.orientations?(zp(a,e.orientations[0],e.orientations[1],r[0]),s[0]=1-r[0],s[1]=r[0],!0):!1}const g5={orientations:null};function BR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,g5,n),lh.extend(t,e,n),A.setGet(t,e,["orientations"]),p5(t,e)}const h5=A.newInstance(BR,"vtkLine");var va={newInstance:h5,extend:BR,...d5,...LR};function v5(t,e){e.classHierarchy.push("vtkPointSet"),e.points?e.points=qa(e.points):e.points=ih.newInstance(),t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.getBounds=()=>e.points.getBounds(),t.computeBounds=()=>{t.getBounds()};const n=t.shallowCopy;t.shallowCopy=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n(r,a),e.points=ih.newInstance(),e.points.shallowCopy(r.getPoints())}}const y5={};function FR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,y5,n),Vl.extend(t,e,n),A.setGet(t,e,["points"]),v5(t,e)}const m5=A.newInstance(FR,"vtkPointSet");var C5={newInstance:m5,extend:FR};function kC(t,e,n,r){const a=n[0]-e[0],s=n[1]-e[1],o=n[2]-e[2],i=t[0]-e[0],l=t[1]-e[1],c=t[2]-e[2];r[0]=s*c-o*l,r[1]=o*i-a*c,r[2]=a*l-s*i}function ch(t,e,n,r){kC(t,e,n,r);const a=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);a!==0&&(r[0]/=a,r[1]/=a,r[2]/=a)}function S5(t,e,n,r,a,s){let o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1e-6,i=!1;const l=[],c=[],u=[],f=[],d=[];ch(t,e,n,f),ch(r,a,s,d);const p=-kt(f,t),h=-kt(d,r),g=[kt(d,t)+h,kt(d,e)+h,kt(d,n)+h];if(g[0]*g[1]>o&&g[0]*g[2]>o)return{intersect:!1,coplanar:i,pt1:l,pt2:c,surfaceId:u};const y=[kt(f,r)+p,kt(f,a)+p,kt(f,s)+p];if(y[0]*y[1]>o&&y[0]*y[2]>o)return{intersect:!1,coplanar:i,pt1:l,pt2:c,surfaceId:u};if(Math.abs(f[0]-d[0])<1e-9&&Math.abs(f[1]-d[1])<1e-9&&Math.abs(f[2]-d[2])<1e-9&&Math.abs(p-h)<1e-9)return i=!0,{intersect:!1,coplanar:i,pt1:l,pt2:c,surfaceId:u};const m=[t,e,n],b=[r,a,s],C=kt(f,d),S=(p-h*C)/(C*C-1),T=(h-p*C)/(C*C-1),w=[S*f[0]+T*d[0],S*f[1]+T*d[1],S*f[2]+T*d[2]],x=_r(f,d,[]);ts(x);let E=0,O=0;const k=[],M=[];let D=50,I=50;for(let $=0;$<3;$++){const N=$,W=($+1)%3,_=Ms.intersectWithLine(m[N],m[W],r,d);_.intersection&&_.t>0-o&&_.t<1+o&&(_.t<1+o&&_.t>1-o&&(D=E),k[E++]=kt(_.x,x)-kt(w,x));const L=Ms.intersectWithLine(b[N],b[W],t,f);L.intersection&&L.t>0-o&&L.t<1+o&&(L.t<1+o&&L.t>1-o&&(I=O),M[O++]=kt(L.x,x)-kt(w,x))}if(E>2){E--;const $=k[2];k[2]=k[D],k[D]=$}if(O>2){O--;const $=M[2];M[2]=M[I],M[I]=$}if(E!==2||O!==2)return{intersect:!1,coplanar:i,pt1:l,pt2:c,surfaceId:u};if(Number.isNaN(k[0])||Number.isNaN(k[1])||Number.isNaN(M[0])||Number.isNaN(M[1]))return{intersect:!1,coplanar:i,pt1:l,pt2:c,surfaceId:u};if(k[0]>k[1]){const $=k[1];k[1]=k[0],k[0]=$}if(M[0]>M[1]){const $=M[1];M[1]=M[0],M[0]=$}let B,F;return k[1]<M[0]||M[1]<k[0]?{intersect:!1,coplanar:i,pt1:l,pt2:c,surfaceId:u}:(k[0]<M[0]?k[1]<M[1]?(u[0]=2,u[1]=1,B=M[0],F=k[1]):(u[0]=2,u[1]=2,B=M[0],F=M[1]):k[1]<M[1]?(u[0]=1,u[1]=1,B=k[0],F=k[1]):(u[0]=1,u[1]=2,B=k[0],F=M[1]),Ay(w,x,B,l),Ay(w,x,F,c),{intersect:!0,coplanar:i,pt1:l,pt2:c,surfaceId:u})}const b5={computeNormalDirection:kC,computeNormal:ch,intersectWithTriangle:S5};function w5(t,e){e.classHierarchy.push("vtkTriangle"),t.getCellDimension=()=>2,t.intersectWithLine=(n,r,a,s,o)=>{const i={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1};o[2]=0;const l=[],c=a*a,u=[],f=[],d=[];e.points.getPoint(0,u),e.points.getPoint(1,f),e.points.getPoint(2,d);const p=[],h=[];if(ch(u,f,d,p),p[0]!==0||p[1]!==0||p[2]!==0){const C=Ms.intersectWithLine(n,r,u,p);if(i.betweenPoints=C.betweenPoints,i.t=C.t,s[0]=C.x[0],s[1]=C.x[1],s[2]=C.x[2],!C.intersection)return o[0]=0,o[1]=0,i.intersect=0,i;const S=t.evaluatePosition(s,l,o,h);if(S.evaluation>=0)return S.dist2<=c?(i.intersect=1,i):(i.intersect=S.evaluation,i)}const g=qr(u,f),y=qr(f,d),m=qr(d,u);e.line||(e.line=va.newInstance()),g>y&&g>m?(e.line.getPoints().setPoint(0,u),e.line.getPoints().setPoint(1,f)):y>m&&y>g?(e.line.getPoints().setPoint(0,f),e.line.getPoints().setPoint(1,d)):(e.line.getPoints().setPoint(0,d),e.line.getPoints().setPoint(1,u));const b=e.line.intersectWithLine(n,r,a,s,o);if(i.betweenPoints=b.betweenPoints,i.t=b.t,b.intersect){const C=[],S=[],T=[];for(let w=0;w<3;w++)C[w]=u[w]-d[w],S[w]=f[w]-d[w],T[w]=s[w]-d[w];return o[0]=kt(T,C)/m,o[1]=kt(T,S)/y,i.intersect=1,i}return o[0]=0,o[1]=0,i.intersect=0,i},t.evaluatePosition=(n,r,a,s)=>{const o={subId:0,dist2:0,evaluation:-1};let i,l;const c=[],u=[],f=[],d=[];let p;const h=[],g=[],y=[];let m=0,b=0;const C=[];let S,T,w,x=[];const E=[],O=[],k=[];o.subId=0,a[2]=0,e.points.getPoint(1,c),e.points.getPoint(2,u),e.points.getPoint(0,f),kC(c,u,f,d),Ms.generalizedProjectPoint(n,c,d,k);let M=0;for(i=0;i<3;i++)d[i]<0?p=-d[i]:p=d[i],p>M&&(M=p,b=i);for(l=0,i=0;i<3;i++)i!==b&&(C[l++]=i);for(i=0;i<2;i++)h[i]=k[C[i]]-f[C[i]],g[i]=c[C[i]]-f[C[i]],y[i]=u[C[i]]-f[C[i]];if(m=$n(g,y),m===0)return a[0]=0,a[1]=0,o.evaluation=-1,o;if(a[0]=$n(h,y)/m,a[1]=$n(g,h)/m,s[0]=1-(a[0]+a[1]),s[1]=a[0],s[2]=a[1],s[0]>=0&&s[0]<=1&&s[1]>=0&&s[1]<=1&&s[2]>=0&&s[2]<=1)r&&(o.dist2=qr(k,n),r[0]=k[0],r[1]=k[1],r[2]=k[2]),o.evaluation=1;else{let D;if(r){if(s[1]<0&&s[2]<0)for(S=qr(n,f),T=va.distanceToLine(n,c,f,D,E),w=va.distanceToLine(n,f,u,D,O),S<T?(o.dist2=S,x=f):(o.dist2=T,x=E),w<o.dist2&&(o.dist2=w,x=O),i=0;i<3;i++)r[i]=x[i];else if(s[2]<0&&s[0]<0)for(S=qr(n,c),T=va.distanceToLine(n,c,f,D,E),w=va.distanceToLine(n,c,u,D,O),S<T?(o.dist2=S,x=c):(o.dist2=T,x=E),w<o.dist2&&(o.dist2=w,x=O),i=0;i<3;i++)r[i]=x[i];else if(s[1]<0&&s[0]<0)for(S=qr(n,u),T=va.distanceToLine(n,u,f,D,E),w=va.distanceToLine(n,c,u,D,O),S<T?(o.dist2=S,x=u):(o.dist2=T,x=E),w<o.dist2&&(o.dist2=w,x=O),i=0;i<3;i++)r[i]=x[i];else if(s[0]<0){const I=va.distanceToLine(n,c,u,r);o.dist2=I.distance}else if(s[1]<0){const I=va.distanceToLine(n,u,f,r);o.dist2=I.distance}else if(s[2]<0){const I=va.distanceToLine(n,c,f,r);o.dist2=I.distance}}o.evaluation=0}return o},t.evaluateLocation=(n,r,a)=>{const s=[],o=[],i=[];e.points.getPoint(0,s),e.points.getPoint(1,o),e.points.getPoint(2,i);const l=1-n[0]-n[1];for(let c=0;c<3;c++)r[c]=s[c]*l+o[c]*n[0]+i[c]*n[1];a[0]=l,a[1]=n[0],a[2]=n[1]},t.getParametricDistance=n=>{let r,a=0;const s=[];s[0]=n[0],s[1]=n[1],s[2]=1-n[0]-n[1];for(let o=0;o<3;o++)s[o]<0?r=-s[o]:s[o]>1?r=s[o]-1:r=0,r>a&&(a=r);return a}}const T5={};function $R(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,T5,n),lh.extend(t,e,n),w5(t,e)}const x5=A.newInstance($R,"vtkTriangle");var E5={newInstance:x5,extend:$R,...b5};const S0=["verts","lines","polys","strips"],{vtkWarningMacro:qw}=A,k5={[Tn.VTK_LINE]:va,[Tn.VTK_POLY_LINE]:va,[Tn.VTK_TRIANGLE]:E5};function O5(t,e){e.classHierarchy.push("vtkPolyData");function n(a){return a.replace(/(?:^\w|[A-Z]|\b\w)/g,s=>s.toUpperCase()).replace(/\s+/g,"")}S0.forEach(a=>{t[`getNumberOf${n(a)}`]=()=>e[a].getNumberOfCells(),e[a]?e[a]=qa(e[a]):e[a]=Fc.newInstance()}),t.getNumberOfCells=()=>S0.reduce((a,s)=>a+e[s].getNumberOfCells(),0);const r=t.shallowCopy;t.shallowCopy=function(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r(a,s),S0.forEach(o=>{e[o]=Fc.newInstance(),e[o].shallowCopy(a.getReferenceByName(o))})},t.buildCells=()=>{const a=t.getNumberOfVerts(),s=t.getNumberOfLines(),o=t.getNumberOfPolys(),i=t.getNumberOfStrips(),l=a+s+o+i,c=new Uint8Array(l);let u=c;const f=new Uint32Array(l);let d=f;if(a){let p=0;e.verts.getCellSizes().forEach((h,g)=>{d[g]=p,u[g]=h>1?Tn.VTK_POLY_VERTEX:Tn.VTK_VERTEX,p+=h+1}),d=d.subarray(a),u=u.subarray(a)}if(s){let p=0;e.lines.getCellSizes().forEach((h,g)=>{d[g]=p,u[g]=h>2?Tn.VTK_POLY_LINE:Tn.VTK_LINE,h===1&&qw("Building VTK_LINE ",g," with only one point, but VTK_LINE needs at least two points. Check the input."),p+=h+1}),d=d.subarray(s),u=u.subarray(s)}if(o){let p=0;e.polys.getCellSizes().forEach((h,g)=>{switch(d[g]=p,h){case 3:u[g]=Tn.VTK_TRIANGLE;break;case 4:u[g]=Tn.VTK_QUAD;break;default:u[g]=Tn.VTK_POLYGON;break}h<3&&qw("Building VTK_TRIANGLE ",g," with less than three points, but VTK_TRIANGLE needs at least three points. Check the input."),p+=h+1}),d+=d.subarray(o),u+=u.subarray(o)}if(i){let p=0;u.fill(Tn.VTK_TRIANGLE_STRIP,0,i),e.strips.getCellSizes().forEach((h,g)=>{d[g]=p,p+=h+1})}e.cells=u5.newInstance(),e.cells.setCellTypes(l,c,f)},t.buildLinks=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;e.cells===void 0&&t.buildCells(),e.links=t5.newInstance(),a>0?e.links.allocate(a):e.links.allocate(t.getPoints().getNumberOfPoints()),e.links.buildLinks(t)},t.getCellType=a=>e.cells.getCellType(a),t.getCellPoints=a=>{const s=t.getCellType(a);let o=null;switch(s){case Tn.VTK_VERTEX:case Tn.VTK_POLY_VERTEX:o=e.verts;break;case Tn.VTK_LINE:case Tn.VTK_POLY_LINE:o=e.lines;break;case Tn.VTK_TRIANGLE:case Tn.VTK_QUAD:case Tn.VTK_POLYGON:o=e.polys;break;case Tn.VTK_TRIANGLE_STRIP:o=e.strips;break;default:return o=null,{type:0,cellPointIds:null}}const i=e.cells.getCellLocation(a),l=o.getCell(i);return{cellType:s,cellPointIds:l}},t.getPointCells=a=>e.links.getCells(a),t.getCellEdgeNeighbors=(a,s,o)=>{const i=e.links.getLink(s),l=e.links.getLink(o);return i.cells.filter(c=>c!==a&&l.cells.indexOf(c)!==-1)},t.getCell=function(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const o=t.getCellPoints(a),i=s||k5[o.cellType].newInstance();return i.initialize(t.getPoints(),o.cellPointIds),i}}const M5={};function UR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,M5,n),C5.extend(t,e,n),A.get(t,e,["cells","links"]),A.setGet(t,e,["verts","lines","polys","strips"]),O5(t,e)}const R5=A.newInstance(UR,"vtkPolyData");var or={newInstance:R5,extend:UR};function _5(t,e){e.classHierarchy.push("vtkTexture"),t.imageLoaded=()=>{e.image.removeEventListener("load",t.imageLoaded),e.imageLoaded=!0,t.modified()},t.setJsImageData=n=>{e.jsImageData!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.canvas=null),e.jsImageData=n,e.imageLoaded=!0,t.modified())},t.setCanvas=n=>{e.canvas!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.jsImageData=null),e.canvas=n,t.modified())},t.setImage=n=>{e.image!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.canvas=null,e.jsImageData=null),e.image=n,e.imageLoaded=!1,n.complete?t.imageLoaded():n.addEventListener("load",t.imageLoaded),t.modified())},t.getDimensionality=()=>{let n=0,r=0,a=1;if(t.getInputData()){const o=t.getInputData();n=o.getDimensions()[0],r=o.getDimensions()[1],a=o.getDimensions()[2]}return e.jsImageData&&(n=e.jsImageData.width,r=e.jsImageData.height),e.canvas&&(n=e.canvas.width,r=e.canvas.height),e.image&&(n=e.image.width,r=e.image.height),(n>1)+(r>1)+(a>1)},t.getInputAsJsImageData=()=>{if(!e.imageLoaded||t.getInputData())return null;if(e.jsImageData)return e.jsImageData();if(e.canvas)return e.canvas.getContext("2d").getImageData(0,0,e.canvas.width,e.canvas.height);if(e.image){const n=document.createElement("canvas");n.width=e.image.width,n.height=e.image.height;const r=n.getContext("2d");return r.translate(0,n.height),r.scale(1,-1),r.drawImage(e.image,0,0,e.image.width,e.image.height),r.getImageData(0,0,n.width,n.height)}return null}}const V5=(t,e,n,r)=>{const a=[1,2,1],s=4,o=a,i=s,l=t.length/(e*n);let c=e,u=n,f=t;const d=[f];for(let p=0;p<r;p++){const h=[...f];c/=2,u/=2,f=new Uint8ClampedArray(c*u*l);const g=l*c;let y=0;for(let b=0;b<f.length;b+=l){b%g===0&&(y+=2*l*c);for(let C=0;C<l;C++){let S=h[y+C];S+=h[y+l+C],S+=h[y-2*g+C],S+=h[y-2*g+l+C],S/=4,f[b+C]=S}y+=2*l}let m=[...f];for(let b=0;b<f.length;b+=l)for(let C=0;C<l;C++){let S=-(o.length-1)/2,T=i,w=0;for(let x=0;x<o.length;x++){let E=b+C+S*l;const O=E%g-(b+C)%g;O>l&&(E+=g),O<-l&&(E-=g),m[E]?w+=m[E]*o[x]:T-=o[x],S+=1}f[b+C]=w/T}m=[...f];for(let b=0;b<f.length;b+=l)for(let C=0;C<l;C++){let S=-(o.length-1)/2,T=i,w=0;for(let x=0;x<o.length;x++){const E=b+C+S*g;m[E]?w+=m[E]*o[x]:T-=o[x],S+=1}f[b+C]=w/T}d.push(f)}return d},D5={image:null,canvas:null,jsImageData:null,imageLoaded:!1,repeat:!1,interpolate:!1,edgeClamp:!1,mipLevel:0,resizable:!1};function AR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,D5,n),A.obj(t,e),A.algo(t,e,6,0),A.get(t,e,["canvas","image","jsImageData","imageLoaded","resizable"]),A.setGet(t,e,["repeat","edgeClamp","interpolate","mipLevel"]),_5(t,e)}const L5=A.newInstance(AR,"vtkTexture"),N5={generateMipmaps:V5};var iv={newInstance:L5,extend:AR,...N5};const B5=[[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]],Xw=[[8,7,11,3],[9,1,10,5],[4,9,0,8],[2,11,6,10],[0,3,2,1],[4,5,6,7]],Gd=[[0,1],[1,3],[2,3],[0,2],[4,5],[5,7],[6,7],[4,6],[0,4],[1,5],[3,7],[2,6]],Zw=[0,1,0,1,0,1,0,1,2,2,2,2],Nn=[[1,2],[1,2],[0,2],[0,2],[0,1],[0,1]],Vt=new Float64Array(3),zd=new Float64Array(3),fn=new Float64Array(3),Ii=new Float64Array(3),Ti=new Float64Array(3),Hd=new Float64Array(3),b0=new Float64Array(16);function w0(t,e){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor,t.font=`${e.fontStyle} ${e.fontSize}px ${e.fontFamily}`}function F5(t,e){e.classHierarchy.push("vtkCubeAxesActorHelper"),t.setRenderable=n=>{e.renderable!==n&&(e.renderable=n,e.tmActor.addTexture(e.renderable.getTmTexture()),e.tmActor.setProperty(n.getProperty()),e.tmActor.setParentProp(n),t.modified())},t.createPolyDataForOneLabel=(n,r,a,s,o,i,l)=>{const c=e.renderable.get_tmAtlas().get(n);if(!c)return;const u=e.renderable.getTextPolyData().getPoints().getData(),f=e.lastSize;Vt[0]=u[r*3],Vt[1]=u[r*3+1],Vt[2]=u[r*3+2],It(fn,Vt,a),fn[0]+=.1,It(zd,fn,s),Xo(Ti,zd,Vt),fn[0]-=.1,fn[1]+=.1,It(zd,fn,s),Xo(Hd,zd,Vt);for(let h=0;h<3;h++)Ti[h]/=.5*.1*f[0],Hd[h]/=.5*.1*f[1];let d=l.ptIdx,p=l.cellIdx;Vt[0]=u[r*3],Vt[1]=u[r*3+1],Vt[2]=u[r*3+2],o[0]<-.5?zs(fn,Ti,o[0]*i-c.width):o[0]>.5?zs(fn,Ti,o[0]*i):zs(fn,Ti,o[0]*i-c.width/2),Uu(Vt,Vt,fn),zs(fn,Hd,o[1]*i-c.height/2),Uu(Vt,Vt,fn),l.points[d*3]=Vt[0],l.points[d*3+1]=Vt[1],l.points[d*3+2]=Vt[2],l.tcoords[d*2]=c.tcoords[0],l.tcoords[d*2+1]=c.tcoords[1],d++,zs(fn,Ti,c.width),Uu(Vt,Vt,fn),l.points[d*3]=Vt[0],l.points[d*3+1]=Vt[1],l.points[d*3+2]=Vt[2],l.tcoords[d*2]=c.tcoords[2],l.tcoords[d*2+1]=c.tcoords[3],d++,zs(fn,Hd,c.height),Uu(Vt,Vt,fn),l.points[d*3]=Vt[0],l.points[d*3+1]=Vt[1],l.points[d*3+2]=Vt[2],l.tcoords[d*2]=c.tcoords[4],l.tcoords[d*2+1]=c.tcoords[5],d++,zs(fn,Ti,c.width),Xo(Vt,Vt,fn),l.points[d*3]=Vt[0],l.points[d*3+1]=Vt[1],l.points[d*3+2]=Vt[2],l.tcoords[d*2]=c.tcoords[6],l.tcoords[d*2+1]=c.tcoords[7],d++,l.polys[p*4]=3,l.polys[p*4+1]=d-4,l.polys[p*4+2]=d-3,l.polys[p*4+3]=d-2,p++,l.polys[p*4]=3,l.polys[p*4+1]=d-4,l.polys[p*4+2]=d-2,l.polys[p*4+3]=d-1,l.ptIdx+=4,l.cellIdx+=2},t.updateTexturePolyData=()=>{const n=e.camera.getCompositeProjectionMatrix(e.lastAspectRatio,-1,1);$t(n,n);const r=e.renderable.getTextValues().length,a=r*4,s=r*2,o=new Float64Array(a*3),i=new Uint16Array(s*4),l=new Float32Array(a*2);An(b0,n);const c={ptIdx:0,cellIdx:0,polys:i,points:o,tcoords:l};let u=0,f=0,d=0;const p=e.renderable.getTextPolyData().getPoints().getData(),h=e.renderable.getTextValues();for(;u<p.length/3;){Vt[0]=p[u*3],Vt[1]=p[u*3+1],Vt[2]=p[u*3+2],It(fn,Vt,n),Vt[0]=p[u*3+3],Vt[1]=p[u*3+4],Vt[2]=p[u*3+5],It(Ii,Vt,n),Xo(fn,fn,Ii);const y=[fn[0],fn[1]];lM(y),t.createPolyDataForOneLabel(h[f],u,n,b0,y,e.renderable.getAxisTitlePixelOffset(),c),u+=2,f++;for(let m=0;m<e.renderable.getTickCounts()[d];m++)t.createPolyDataForOneLabel(h[f],u,n,b0,y,e.renderable.getTickLabelPixelOffset(),c),u++,f++;d++}const g=Tt.newInstance({numberOfComponents:2,values:l,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(g),e.tmPolyData.getPoints().setData(o,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(i,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updateAPISpecificData=(n,r,a)=>{(e.lastSize[0]!==n[0]||e.lastSize[1]!==n[1])&&(e.lastSize[0]=n[0],e.lastSize[1]=n[1],e.lastAspectRatio=n[0]/n[1],e.forceUpdate=!0),e.camera=r,t.updateTexturePolyData()}}const $5=A.newInstance(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},n),A.obj(t,e),e.tmPolyData=or.newInstance(),e.tmMapper=ba.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmActor=Ca.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),A.setGet(t,e,["renderable"]),A.get(t,e,["lastSize","lastAspectRatio","axisTextStyle","tickTextStyle","tmActor","ticks"]),e.forceUpdate=!1,e.lastRedrawTime={},A.obj(e.lastRedrawTime,{mtime:0}),e.lastRebuildTime={},A.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.lastTickBounds=[],F5(t,e)},"vtkCubeAxesActorHelper");function U5(t,e){e.classHierarchy.push("vtkCubeAxesActor"),t.setCamera=r=>{e.camera!==r&&(e.cameraModifiedSub&&(e.cameraModifiedSub.unsubscribe(),e.cameraModifiedSub=null),e.camera=r,r&&(e.cameraModifiedSub=r.onModified(t.update)),t.update(),t.modified())},t.computeFacesToDraw=()=>{const r=e.camera.getViewMatrix();$t(r,r);let a=!1;const s=qt.getDiagonalLength(e.dataBounds),o=Math.sin(e.faceVisibilityAngle*Math.PI/180);for(let i=0;i<6;i++){let l=!1;const c=Math.floor(i/2),u=(c+1)%3,f=(c+2)%3;e.dataBounds[u*2]!==e.dataBounds[u*2+1]&&e.dataBounds[f*2]!==e.dataBounds[f*2+1]&&(Vt[c]=e.dataBounds[i]-.1*s*B5[i][c],Vt[u]=.5*(e.dataBounds[u*2]+e.dataBounds[u*2+1]),Vt[f]=.5*(e.dataBounds[f*2]+e.dataBounds[f*2+1]),It(fn,Vt,r),Vt[c]=e.dataBounds[i],It(Ii,Vt,r),Xo(fn,Ii,fn),es(fn,fn),l=fn[2]>o,e.camera.getParallelProjection()||(es(Ii,Ii),l=yf(Ii,fn)>o)),l!==e.lastFacesToDraw[i]&&(e.lastFacesToDraw[i]=l,a=!0)}return a},t.updatePolyData=(r,a,s)=>{let o=0,i=0;o+=8;let l=0;for(let p=0;p<12;p++)a[p]>0&&l++;if(i+=l,e.gridLines)for(let p=0;p<6;p++)r[p]&&(o+=s[Nn[p][0]].length*2+s[Nn[p][1]].length*2,i+=s[Nn[p][0]].length+s[Nn[p][1]].length);const c=new Float64Array(o*3),u=new Uint32Array(i*3);let f=0,d=0;for(let p=0;p<2;p++)for(let h=0;h<2;h++)for(let g=0;g<2;g++)c[f*3]=e.dataBounds[g],c[f*3+1]=e.dataBounds[2+h],c[f*3+2]=e.dataBounds[4+p],f++;for(let p=0;p<12;p++)a[p]>0&&(u[d*3]=2,u[d*3+1]=Gd[p][0],u[d*3+2]=Gd[p][1],d++);if(e.gridLines){for(let p=0;p<6;p++)if(r[p]){const h=Math.floor(p/2);let g=s[Nn[p][0]];for(let y=0;y<g.length;y++)c[f*3+h]=e.dataBounds[p],c[f*3+Nn[p][0]]=g[y],c[f*3+Nn[p][1]]=e.dataBounds[Nn[p][1]*2],f++,c[f*3+h]=e.dataBounds[p],c[f*3+Nn[p][0]]=g[y],c[f*3+Nn[p][1]]=e.dataBounds[Nn[p][1]*2+1],f++,u[d*3]=2,u[d*3+1]=f-2,u[d*3+2]=f-1,d++;g=s[Nn[p][1]];for(let y=0;y<g.length;y++)c[f*3+h]=e.dataBounds[p],c[f*3+Nn[p][1]]=g[y],c[f*3+Nn[p][0]]=e.dataBounds[Nn[p][0]*2],f++,c[f*3+h]=e.dataBounds[p],c[f*3+Nn[p][1]]=g[y],c[f*3+Nn[p][0]]=e.dataBounds[Nn[p][0]*2+1],f++,u[d*3]=2,u[d*3+1]=f-2,u[d*3+2]=f-1,d++}}e.polyData.getPoints().setData(c,3),e.polyData.getPoints().modified(),e.polyData.getLines().setData(u,1),e.polyData.getLines().modified(),e.polyData.modified()},t.updateTextData=(r,a,s,o)=>{let i=0;for(let p=0;p<12;p++)a[p]===1&&(i+=2,i+=s[Zw[p]].length);const l=e.polyData.getPoints().getData(),c=new Float64Array(i*3);let u=0,f=0,d=0;for(let p=0;p<6;p++)if(r[p])for(let h=0;h<4;h++){const g=Xw[p][h];if(a[g]===1){const y=Zw[g],m=Gd[g][0]*3,b=Gd[g][1]*3;c[u*3]=.5*(l[m]+l[b]),c[u*3+1]=.5*(l[m+1]+l[b+1]),c[u*3+2]=.5*(l[m+2]+l[b+2]),u++;const C=Math.floor(p/2);c[u*3+C]=e.dataBounds[p],c[u*3+Nn[p][0]]=.5*(e.dataBounds[Nn[p][0]*2]+e.dataBounds[Nn[p][0]*2+1]),c[u*3+Nn[p][1]]=.5*(e.dataBounds[Nn[p][1]*2]+e.dataBounds[Nn[p][1]*2+1]),u++,e.textValues[f]=e.axisLabels[y],f++;const S=(y+1)%3,T=(y+2)%3,w=s[y],x=o[y];e.tickCounts[d]=w.length;for(let E=0;E<w.length;E++)c[u*3+y]=w[E],c[u*3+S]=l[m+S],c[u*3+T]=l[m+T],u++,e.textValues[f]=x[E],f++;d++}}e.textPolyData.getPoints().setData(c,3),e.textPolyData.modified()},t.update=()=>{if(!e.camera)return;const r=t.computeFacesToDraw(),a=e.lastFacesToDraw;let s=!1;for(let o=0;o<6;o++)e.dataBounds[o]!==e.lastTickBounds[o]&&(s=!0,e.lastTickBounds[o]=e.dataBounds[o]);if(r||s||e.forceUpdate){const o=new Array(12).fill(0);for(let c=0;c<6;c++)if(a[c])for(let u=0;u<4;u++)o[Xw[c][u]]++;const i=[],l=[];for(let c=0;c<3;c++){const u=rC().domain([e.dataBounds[c*2],e.dataBounds[c*2+1]]);i[c]=u.ticks(5);const f=u.tickFormat(5);l[c]=i[c].map(f)}t.updatePolyData(a,o,i),t.updateTextData(a,o,i,l),(s||e.forceUpdate)&&t.updateTextureAtlas(l)}e.forceUpdate=!1},t.updateTextureAtlas=r=>{e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e._tmAtlas.clear();let a=0,s=1;for(let o=0;o<3;o++){if(!e._tmAtlas.has(e.axisLabels[o])){w0(e.tmContext,e.axisTextStyle);const i=e.tmContext.measureText(e.axisLabels[o]),l={height:i.actualBoundingBoxAscent+2,startingHeight:s,width:i.width+2,textStyle:e.axisTextStyle};e._tmAtlas.set(e.axisLabels[o],l),s+=l.height,a<l.width&&(a=l.width)}w0(e.tmContext,e.tickTextStyle);for(let i=0;i<r[o].length;i++)if(!e._tmAtlas.has(r[o][i])){const l=e.tmContext.measureText(r[o][i]),c={height:l.actualBoundingBoxAscent+2,startingHeight:s,width:l.width+2,textStyle:e.tickTextStyle};e._tmAtlas.set(r[o][i],c),s+=c.height,a<c.width&&(a=c.width)}}a=ma(a),s=ma(s),e._tmAtlas.forEach(o=>{o.tcoords=[0,(s-o.startingHeight-o.height)/s,o.width/a,(s-o.startingHeight-o.height)/s,o.width/a,(s-o.startingHeight)/s,0,(s-o.startingHeight)/s]}),e.tmCanvas.width=a,e.tmCanvas.height=s,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,a,s),e._tmAtlas.forEach((o,i)=>{w0(e.tmContext,o.textStyle),e.tmContext.fillText(i,1,o.startingHeight+o.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified()},t.onModified(()=>{e.forceUpdate=!0,t.update()}),t.setTickTextStyle=r=>{e.tickTextStyle={...e.tickTextStyle,...r},t.modified()},t.setAxisTextStyle=r=>{e.axisTextStyle={...e.axisTextStyle,...r},t.modified()},t.get_tmAtlas=()=>e._tmAtlas,t.getBounds=()=>(t.update(),qt.setBounds(e.bounds,e.gridActor.getBounds()),qt.scaleAboutCenter(e.bounds,e.boundsScaleFactor,e.boundsScaleFactor,e.boundsScaleFactor),e.bounds);const n=A.chain(t.setProperty,e.gridActor.setProperty);t.setProperty=r=>n(r)[0]}function A5(t){return{boundsScaleFactor:1.3,camera:null,dataBounds:[...qt.INIT_BOUNDS],faceVisibilityAngle:8,gridLines:!0,axisLabels:null,axisTitlePixelOffset:35,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},tickLabelPixelOffset:12,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"},...t}}function WR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,A5(n)),Ca.extend(t,e,n),e.lastFacesToDraw=[!1,!1,!1,!1,!1,!1],e.axisLabels=["X-Axis","Y-Axis","Z-Axis"],e.tickCounts=[],e.textValues=[],e.lastTickBounds=[],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.tmTexture=iv.newInstance(),e.tmTexture.setInterpolate(!1),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),e.gridMapper=ba.newInstance(),e.polyData=or.newInstance(),e.gridMapper.setInputData(e.polyData),e.gridActor=Ca.newInstance(),e.gridActor.setMapper(e.gridMapper),e.gridActor.setProperty(t.getProperty()),e.gridActor.setParentProp(t),e.textPolyData=or.newInstance(),A.setGet(t,e,["axisTitlePixelOffset","boundsScaleFactor","faceVisibilityAngle","gridLines","tickLabelPixelOffset"]),A.setGetArray(t,e,["dataBounds"],6),A.setGetArray(t,e,["axisLabels"],3),A.get(t,e,["axisTextStyle","tickTextStyle","camera","tmTexture","textValues","textPolyData","tickCounts","gridActor"]),U5(t,e)}const W5=A.newInstance(WR,"vtkCubeAxesActor");var IR={newInstance:W5,extend:WR,newCubeAxesActorHelper:$5};function I5(t,e){e.classHierarchy.push("vtkOpenGLCubeAxesActor"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.CubeAxesActorHelper.getRenderable()||e.CubeAxesActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.CubeAxesActorHelper.getTmActor()),t.addMissingNode(e.renderable.getGridActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const a=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,s=e._openGLRenderer.getTiledSizeAndOrigin();e.CubeAxesActorHelper.updateAPISpecificData([s.usize,s.vsize],a,e._openGLRenderWindow.getRenderable())}}}const P5={};function G5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,P5,n),gn.extend(t,e,n),e.CubeAxesActorHelper=IR.newCubeAxesActorHelper(),I5(t,e)}const z5=Ft(G5,"vtkOpenGLCubeAxesActor");Xn("vtkCubeAxesActor",z5);const eo={ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2};var PR={ObjectType:eo};const{ObjectType:eg}=PR,H5={};function K5(t,e){e.classHierarchy.push("vtkOpenGLBufferObject");function n(i){switch(i){case eg.ELEMENT_ARRAY_BUFFER:return e.context.ELEMENT_ARRAY_BUFFER;case eg.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in e.context)return e.context.TEXTURE_BUFFER;case eg.ARRAY_BUFFER:default:return e.context.ARRAY_BUFFER}}let r=null,a=null,s=!0,o="";t.getType=()=>r,t.setType=i=>{r=i},t.getHandle=()=>a,t.isReady=()=>s===!1,t.generateBuffer=i=>{const l=n(i);return a===null&&(a=e.context.createBuffer(),r=i),n(r)===l},t.upload=(i,l)=>t.generateBuffer(l)?(e.context.bindBuffer(n(r),a),e.context.bufferData(n(r),i,e.context.STATIC_DRAW),e.allocatedGPUMemoryInBytes=i.length*i.BYTES_PER_ELEMENT,s=!1,!0):(o="Trying to upload array buffer to incompatible buffer.",!1),t.bind=()=>a?(e.context.bindBuffer(n(r),a),!0):!1,t.release=()=>a?(e.context.bindBuffer(n(r),null),!0):!1,t.releaseGraphicsResources=()=>{a!==null&&(e.context.bindBuffer(n(r),null),e.context.deleteBuffer(a),a=null,e.allocatedGPUMemoryInBytes=0)},t.setOpenGLRenderWindow=i=>{e._openGLRenderWindow!==i&&(t.releaseGraphicsResources(),e._openGLRenderWindow=i,e.context=null,i&&(e.context=e._openGLRenderWindow.getContext()))},t.getError=()=>o}const j5={objectType:eg.ARRAY_BUFFER,context:null,allocatedGPUMemoryInBytes:0};function GR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,j5,n),A.obj(t,e),A.get(t,e,["_openGLRenderWindow","allocatedGPUMemoryInBytes"]),A.moveToProtected(t,e,["openGLRenderWindow"]),K5(t,e)}const Y5=A.newInstance(GR);var Zs={newInstance:Y5,extend:GR,...H5,...PR};const{vtkErrorMacro:Jw}=A;function q5(t,e){const n=new Float64Array(3);sO(n,e);const r=new Float64Array(16);return Jk(r,vl(),t,n),r}function X5(t,e){return t===null||e===null?!1:!(ew(t,[0,0,0])&&ew(e,[1,1,1]))}function Z5(t,e){e.classHierarchy.push("vtkOpenGLCellArrayBufferObject"),t.setType(eo.ARRAY_BUFFER),t.createVBO=function(n,r,a,s){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!n.getData()||!n.getData().length)return e.elementCount=0,0;e.blockSize=3,e.vertexOffset=0,e.normalOffset=0,e.tCoordOffset=0,e.tCoordComponents=0,e.colorComponents=0,e.colorOffset=0,e.customData=[];const i=s.points.getData();let l=null,c=null,u=null;const f=s.colors?s.colors.getNumberOfComponents():0,d=s.tcoords?s.tcoords.getNumberOfComponents():0;s.normals&&(e.normalOffset=4*e.blockSize,e.blockSize+=3,l=s.normals.getData()),s.customAttributes&&s.customAttributes.forEach(_=>{_&&(e.customData.push({data:_.getData(),offset:4*e.blockSize,components:_.getNumberOfComponents(),name:_.getName()}),e.blockSize+=_.getNumberOfComponents())}),s.tcoords&&(e.tCoordOffset=4*e.blockSize,e.tCoordComponents=d,e.blockSize+=d,c=s.tcoords.getData()),s.colors?(e.colorComponents=s.colors.getNumberOfComponents(),e.colorOffset=0,u=s.colors.getData(),e.colorBO||(e.colorBO=Zs.newInstance()),e.colorBO.setOpenGLRenderWindow(e._openGLRenderWindow)):e.colorBO=null,e.stride=4*e.blockSize;let p=0,h=0,g=0,y=0,m=0,b=0,C;const S={anythingToPoints(_,L,G){for(let K=0;K<_;++K)C(L[G+K])},linesToWireframe(_,L,G){for(let K=0;K<_-1;++K)C(L[G+K]),C(L[G+K+1])},polysToWireframe(_,L,G){if(_>2)for(let K=0;K<_;++K)C(L[G+K]),C(L[G+(K+1)%_])},stripsToWireframe(_,L,G){if(_>2){for(let K=0;K<_-1;++K)C(L[G+K]),C(L[G+K+1]);for(let K=0;K<_-2;K++)C(L[G+K]),C(L[G+K+2])}},polysToSurface(_,L,G){for(let K=0;K<_-2;K++)C(L[G+0]),C(L[G+K+1]),C(L[G+K+2])},stripsToSurface(_,L,G){for(let K=0;K<_-2;K++)C(L[G+K]),C(L[G+K+1+K%2]),C(L[G+K+1+(K+1)%2])}},T={anythingToPoints(_,L){return _},linesToWireframe(_,L){return _>1?(_-1)*2:0},polysToWireframe(_,L){return _>2?_*2:0},stripsToWireframe(_,L){return _>2?_*4-6:0},polysToSurface(_,L){return _>2?(_-2)*3:0},stripsToSurface(_,L,G){return _>2?(_-2)*3:0}};let w=null,x=null;a===Er.POINTS||r==="verts"?(w=S.anythingToPoints,x=T.anythingToPoints):a===Er.WIREFRAME||r==="lines"?(w=S[`${r}ToWireframe`],x=T[`${r}ToWireframe`]):(w=S[`${r}ToSurface`],x=T[`${r}ToSurface`]);const E=n.getData(),O=E.length;let k=0;for(let _=0;_<O;)k+=x(E[_],E),_+=E[_]+1;let M=null;const D=new Float32Array(k*e.blockSize);u&&(M=new Uint8Array(k*4));let I=0,B=0,F=0,$=0;for(let _=0;_<3;++_){const L=s.points.getRange(_),G=L[1]-L[0];F+=G*G;const K=.5*(L[1]+L[0]);$+=K*K}if(F>0&&(Math.abs($)/F>1e6||Math.abs(Math.log10(F))>3||F===0&&$>1e6)){const _=new Float64Array(3),L=new Float64Array(3);for(let G=0;G<3;++G){const K=s.points.getRange(G),Y=K[1]-K[0];_[G]=.5*(K[1]+K[0]),L[G]=Y>0?1/Y:1}t.setCoordShiftAndScale(_,L)}else e.coordShiftAndScaleEnabled===!0&&t.setCoordShiftAndScale(null,null);if(o)if(!o.points&&!o.cells)o.points=new Int32Array(k),o.cells=new Int32Array(k);else{const _=new Int32Array(k+o.points.length);_.set(o.points),o.points=_;const L=new Int32Array(k+o.cells.length);L.set(o.cells),o.cells=L}let W=s.vertexOffset;C=function(L){if(o&&(o.points[W]=L,o.cells[W]=b+s.cellOffset),++W,p=L*3,e.coordShiftAndScaleEnabled?(D[I++]=(i[p++]-e.coordShift[0])*e.coordScale[0],D[I++]=(i[p++]-e.coordShift[1])*e.coordScale[1],D[I++]=(i[p++]-e.coordShift[2])*e.coordScale[2]):(D[I++]=i[p++],D[I++]=i[p++],D[I++]=i[p++]),l!==null&&(s.haveCellNormals?h=(b+s.cellOffset)*3:h=L*3,D[I++]=l[h++],D[I++]=l[h++],D[I++]=l[h++]),e.customData.forEach(G=>{m=L*G.components;for(let K=0;K<G.components;++K)D[I++]=G.data[m++]}),c!==null){g=L*d;for(let G=0;G<d;++G)D[I++]=c[g++]}u!==null&&(s.haveCellScalars?y=(b+s.cellOffset)*f:y=L*f,M[B++]=u[y++],M[B++]=u[y++],M[B++]=u[y++],M[B++]=f===4?u[y++]:255)};for(let _=0;_<O;)w(E[_],E,_+1),_+=E[_]+1,b++;return e.elementCount=k,t.upload(D,eo.ARRAY_BUFFER),e.colorBO&&(e.colorBOStride=4,e.colorBO.upload(M,eo.ARRAY_BUFFER)),b},t.setCoordShiftAndScale=(n,r)=>{if(n!==null&&(n.constructor!==Float64Array||n.length!==3)){Jw("Wrong type for coordShift, expected vec3 or null");return}if(r!==null&&(r.constructor!==Float64Array||r.length!==3)){Jw("Wrong type for coordScale, expected vec3 or null");return}(e.coordShift===null||n===null||!tw(n,e.coordShift))&&(e.coordShift=n),(e.coordScale===null||r===null||!tw(r,e.coordScale))&&(e.coordScale=r),e.coordShiftAndScaleEnabled=X5(e.coordShift,e.coordScale),e.coordShiftAndScaleEnabled?e.inverseShiftAndScaleMatrix=q5(e.coordShift,e.coordScale):e.inverseShiftAndScaleMatrix=null}}const J5={elementCount:0,stride:0,colorBOStride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0,tcoordBO:null,customData:[],coordShift:null,coordScale:null,coordShiftAndScaleEnabled:!1,inverseShiftAndScaleMatrix:null};function zR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,J5,n),Zs.extend(t,e,n),A.setGet(t,e,["colorBO","elementCount","stride","colorBOStride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents","customData"]),A.get(t,e,["coordShift","coordScale","coordShiftAndScaleEnabled","inverseShiftAndScaleMatrix"]),Z5(t,e)}const Q5=A.newInstance(zR);var e6={newInstance:Q5,extend:zR};const{vtkErrorMacro:t6}=A;function n6(t,e){e.classHierarchy.push("vtkShader"),t.compile=()=>{let n=e.context.VERTEX_SHADER;if(!e.source||!e.source.length||e.shaderType==="Unknown")return!1;switch(e.handle!==0&&(e.context.deleteShader(e.handle),e.handle=0),e.shaderType){case"Fragment":n=e.context.FRAGMENT_SHADER;break;case"Vertex":default:n=e.context.VERTEX_SHADER;break}if(e.handle=e.context.createShader(n),e.context.shaderSource(e.handle,e.source),e.context.compileShader(e.handle),!e.context.getShaderParameter(e.handle,e.context.COMPILE_STATUS)){const a=e.context.getShaderInfoLog(e.handle);return t6(`Error compiling shader '${e.source}': ${a}`),e.context.deleteShader(e.handle),e.handle=0,!1}return!0},t.cleanup=()=>{e.shaderType==="Unknown"||e.handle===0||(e.context.deleteShader(e.handle),e.handle=0,e.dirty=!0)}}const r6={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null};function HR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,r6,n),A.obj(t,e),A.setGet(t,e,["shaderType","source","error","handle","context"]),n6(t,e)}const a6=A.newInstance(HR,"vtkShader");var T0={newInstance:a6,extend:HR};const{vtkErrorMacro:us}=A;function s6(t,e,n,r){const a=typeof n=="string"?n:n.join(`
`),s=r===!1?e:new RegExp(e,"g"),o=t.replace(s,a);return{replace:o!==a,result:o}}function o6(t,e){e.classHierarchy.push("vtkShaderProgram"),t.compileShader=()=>e.vertexShader.compile()?e.fragmentShader.compile()?!t.attachShader(e.vertexShader)||!t.attachShader(e.fragmentShader)?(us(e.error),0):t.link()?(t.setCompiled(!0),1):(us(`Links failed: ${e.error}`),0):(us(e.fragmentShader.getSource().split(`
`).map((n,r)=>`${r}: ${n}`).join(`
`)),us(e.fragmentShader.getError()),0):(us(e.vertexShader.getSource().split(`
`).map((n,r)=>`${r}: ${n}`).join(`
`)),us(e.vertexShader.getError()),0),t.cleanup=()=>{e.shaderType==="Unknown"||e.handle===0||(t.release(),e.vertexShaderHandle!==0&&(e.context.detachShader(e.handle,e.vertexShaderHandle),e.vertexShaderHandle=0),e.fragmentShaderHandle!==0&&(e.context.detachShader(e.handle,e.fragmentShaderHandle),e.fragmentShaderHandle=0),e.context.deleteProgram(e.handle),e.handle=0,t.setCompiled(!1))},t.bind=()=>!e.linked&&!t.link()?!1:(e.context.useProgram(e.handle),t.setBound(!0),!0),t.isBound=()=>!!e.bound,t.release=()=>{e.context.useProgram(null),t.setBound(!1)},t.setContext=n=>{e.vertexShader.setContext(n),e.fragmentShader.setContext(n),e.geometryShader.setContext(n)},t.link=()=>{if(e.linked)return!0;if(e.handle===0)return e.error="Program has not been initialized, and/or does not have shaders.",!1;if(e.uniformLocs={},e.context.linkProgram(e.handle),!e.context.getProgramParameter(e.handle,e.context.LINK_STATUS)){const r=e.context.getProgramInfoLog(e.handle);return us(`Error linking shader ${r}`),e.handle=0,!1}return t.setLinked(!0),e.attributeLocs={},!0},t.setUniformMatrix=(n,r)=>{const a=t.findUniform(n);if(a===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;const s=new Float32Array(r);return e.context.uniformMatrix4fv(a,!1,s),!0},t.setUniformMatrix3x3=(n,r)=>{const a=t.findUniform(n);if(a===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;const s=new Float32Array(r);return e.context.uniformMatrix3fv(a,!1,s),!0},t.setUniformf=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1f(a,r),!0)},t.setUniformfv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1fv(a,r),!0)},t.setUniformi=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1i(a,r),!0)},t.setUniformiv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1iv(a,r),!0)},t.setUniform2f=(n,r,a)=>{const s=t.findUniform(n);if(s===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(a===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2f(s,r,a),!0},t.setUniform2fv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform2fv(a,r),!0)},t.setUniform2i=(n,r,a)=>{const s=t.findUniform(n);if(s===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(a===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2i(s,r,a),!0},t.setUniform2iv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform2iv(a,r),!0)},t.setUniform3f=(n,r,a,s)=>{const o=t.findUniform(n);if(o===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(s===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(o,r,a,s),!0},t.setUniform3fArray=(n,r)=>{const a=t.findUniform(n);if(a===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(!Array.isArray(r)||r.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(a,r[0],r[1],r[2]),!0},t.setUniform3fv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform3fv(a,r),!0)},t.setUniform3i=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];let i=s;if(i.length===1&&Array.isArray(i[0])&&(i=i[0]),i.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3i(r,i[0],i[1],i[2]),!0},t.setUniform3iv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform3iv(a,r),!0)},t.setUniform4f=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];let i=s;if(i.length===1&&Array.isArray(i[0])&&(i=i[0]),i.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4f(r,i[0],i[1],i[2],i[3]),!0},t.setUniform4fv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform4fv(a,r),!0)},t.setUniform4i=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];let i=s;if(i.length===1&&Array.isArray(i[0])&&(i=i[0]),i.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4i(r,i[0],i[1],i[2],i[3]),!0},t.setUniform4iv=(n,r)=>{const a=t.findUniform(n);return a===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform4iv(a,r),!0)},t.findUniform=n=>{if(!n||!e.linked)return-1;let r=e.uniformLocs[n];return r!==void 0?r:(r=e.context.getUniformLocation(e.handle,n),r===null?(e.error=`Uniform ${n} not found in current shader program.`,e.uniformLocs[n]=-1,-1):(e.uniformLocs[n]=r,r))},t.isUniformUsed=n=>{if(!n)return!1;let r=e.uniformLocs[n];return r!==void 0?r!==null:e.linked?(r=e.context.getUniformLocation(e.handle,n),e.uniformLocs[n]=r,r!==null):(us("attempt to find uniform when the shader program is not linked"),!1)},t.isAttributeUsed=n=>{if(!n)return!1;if(n in e.attributeLocs)return!0;if(!e.linked)return us("attempt to find uniform when the shader program is not linked"),!1;const r=e.context.getAttribLocation(e.handle,n);return r===-1?!1:(e.attributeLocs[n]=r,!0)},t.attachShader=n=>{if(n.getHandle()===0)return e.error="Shader object was not initialized, cannot attach it.",!1;if(n.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;if(e.handle===0){const r=e.context.createProgram();if(r===0)return e.error="Could not create shader program.",!1;e.handle=r,e.linked=!1}return n.getShaderType()==="Vertex"&&(e.vertexShaderHandle!==0&&e.context.detachShader(e.handle,e.vertexShaderHandle),e.vertexShaderHandle=n.getHandle()),n.getShaderType()==="Fragment"&&(e.fragmentShaderHandle!==0&&e.context.detachShader(e.handle,e.fragmentShaderHandle),e.fragmentShaderHandle=n.getHandle()),e.context.attachShader(e.handle,n.getHandle()),t.setLinked(!1),!0},t.detachShader=n=>{if(n.getHandle()===0)return e.error="shader object was not initialized, cannot attach it.",!1;if(n.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;switch(e.handle===0&&(e.error="This shader program has not been initialized yet."),n.getShaderType()){case"Vertex":return e.vertexShaderHandle!==n.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,n.getHandle()),e.vertexShaderHandle=0,e.linked=!1,!0);case"Fragment":return e.fragmentShaderHandle!==n.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,n.getHandle()),e.fragmentShaderHandle=0,e.linked=!1,!0);default:return!1}},t.setContext=n=>{e.context=n,e.vertexShader.setContext(n),e.fragmentShader.setContext(n),e.geometryShader.setContext(n)},t.setLastCameraMTime=n=>{e.lastCameraMTime=n}}const i6={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null,lastCameraMTime:null};function KR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,i6,n),e.attributesLocs={},e.uniformLocs={},e.vertexShader=T0.newInstance(),e.vertexShader.setShaderType("Vertex"),e.fragmentShader=T0.newInstance(),e.fragmentShader.setShaderType("Fragment"),e.geometryShader=T0.newInstance(),e.geometryShader.setShaderType("Geometry"),A.obj(t,e),A.get(t,e,["lastCameraMTime"]),A.setGet(t,e,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),o6(t,e)}const l6=A.newInstance(KR,"vtkShaderProgram");var ue={newInstance:l6,extend:KR,substitute:s6};function c6(t,e){e.classHierarchy.push("vtkOpenGLVertexArrayObject"),t.exposedMethod=()=>{},t.initialize=()=>{e.instancingExtension=null,e._openGLRenderWindow.getWebgl2()||(e.instancingExtension=e.context.getExtension("ANGLE_instanced_arrays")),!e.forceEmulation&&e._openGLRenderWindow&&e._openGLRenderWindow.getWebgl2()?(e.extension=null,e.supported=!0,e.handleVAO=e.context.createVertexArray()):(e.extension=e.context.getExtension("OES_vertex_array_object"),!e.forceEmulation&&e.extension?(e.supported=!0,e.handleVAO=e.extension.createVertexArrayOES()):e.supported=!1)},t.isReady=()=>e.handleVAO!==0||e.supported===!1,t.bind=()=>{if(t.isReady()||t.initialize(),t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(e.handleVAO):e.context.bindVertexArray(e.handleVAO);else if(t.isReady()){const n=e.context;for(let r=0;r<e.buffers.length;++r){const a=e.buffers[r];e.context.bindBuffer(n.ARRAY_BUFFER,a.buffer);for(let s=0;s<a.attributes.length;++s){const o=a.attributes[s],i=o.isMatrix?o.size:1;for(let l=0;l<i;++l)n.enableVertexAttribArray(o.index+l),n.vertexAttribPointer(o.index+l,o.size,o.type,o.normalize,o.stride,o.offset+o.stride*l/o.size),o.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(o.index+l,1):n.vertexAttribDivisor(o.index+l,1))}}}},t.release=()=>{if(t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(null):e.context.bindVertexArray(null);else if(t.isReady()){const n=e.context;for(let r=0;r<e.buffers.length;++r){const a=e.buffers[r];e.context.bindBuffer(n.ARRAY_BUFFER,a.buffer);for(let s=0;s<a.attributes.length;++s){const o=a.attributes[s],i=o.isMatrix?o.size:1;for(let l=0;l<i;++l)n.enableVertexAttribArray(o.index+l),n.vertexAttribPointer(o.index+l,o.size,o.type,o.normalize,o.stride,o.offset+o.stride*l/o.size),o.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(o.index+l,0):n.vertexAttribDivisor(o.index+l,0)),n.disableVertexAttribArray(o.index+l)}}}},t.shaderProgramChanged=()=>{t.release(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.handleProgram=0},t.releaseGraphicsResources=()=>{t.shaderProgramChanged(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.supported=!0,e.handleProgram=0},t.addAttributeArray=(n,r,a,s,o,i,l,c)=>t.addAttributeArrayWithDivisor(n,r,a,s,o,i,l,c,0,!1),t.addAttributeArrayWithDivisor=(n,r,a,s,o,i,l,c,u,f)=>{if(!n||!n.isBound()||r.getHandle()===0||r.getType()!==eo.ARRAY_BUFFER||(e.handleProgram===0&&(e.handleProgram=n.getHandle()),t.isReady()||t.initialize(),!t.isReady()||e.handleProgram!==n.getHandle()))return!1;const d=e.context,p={};if(p.name=a,p.index=d.getAttribLocation(e.handleProgram,a),p.offset=s,p.stride=o,p.type=i,p.size=l,p.normalize=c,p.isMatrix=f,p.divisor=u,p.Index===-1)return!1;if(r.bind(),d.enableVertexAttribArray(p.index),d.vertexAttribPointer(p.index,p.size,p.type,p.normalize,p.stride,p.offset),u>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(p.index,1):d.vertexAttribDivisor(p.index,1)),p.buffer=r.getHandle(),!e.supported){let h=!1;for(let g=0;g<e.buffers.length;++g){const y=e.buffers[g];if(y.buffer===p.buffer){h=!0;let m=!1;for(let b=0;b<y.attributes.length;++b)y.attributes[b].name===a&&(m=!0,y.attributes[b]=p);m||y.attributes.push(p)}}h||e.buffers.push({buffer:p.buffer,attributes:[p]})}return!0},t.addAttributeMatrixWithDivisor=(n,r,a,s,o,i,l,c,u)=>{const f=t.addAttributeArrayWithDivisor(n,r,a,s,o,i,l,c,u,!0);if(!f)return f;const d=e.context,p=d.getAttribLocation(e.handleProgram,a);for(let h=1;h<l;h++)d.enableVertexAttribArray(p+h),d.vertexAttribPointer(p+h,l,i,c,o,s+o*h/l),u>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(p+h,1):d.vertexAttribDivisor(p+h,1));return!0},t.removeAttributeArray=n=>{if(!t.isReady()||e.handleProgram===0)return!1;if(!e.supported)for(let r=0;r<e.buffers.length;++r){const a=e.buffers[r];for(let s=0;s<a.attributes.length;++s)if(a.attributes[s].name===n)return a.attributes.splice(s,1),a.attributes.length||e.buffers.splice(r,1),!0}return!0},t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))}}const u6={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null};function jR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,u6,n),e.buffers=[],A.obj(t,e),A.get(t,e,["supported"]),A.setGet(t,e,["forceEmulation"]),c6(t,e)}const f6=A.newInstance(jR,"vtkOpenGLVertexArrayObject");var id={newInstance:f6,extend:jR};const Fo={Start:0,Points:0,Lines:1,Tris:2,TriStrips:3,TrisEdges:4,TriStripsEdges:5,End:6};function d6(t,e){e.classHierarchy.push("vtkOpenGLHelper"),t.setOpenGLRenderWindow=n=>{e.context=n.getContext(),e.program.setContext(e.context),e.VAO.setOpenGLRenderWindow(n),e.CABO.setOpenGLRenderWindow(n)},t.releaseGraphicsResources=n=>{e.VAO.releaseGraphicsResources(),e.CABO.releaseGraphicsResources(),e.CABO.setElementCount(0)},t.drawArrays=(n,r,a,s)=>{if(e.CABO.getElementCount()){const o=t.getOpenGLMode(a),i=t.haveWideLines(n,r),l=e.context,c=l.getParameter(l.DEPTH_WRITEMASK);e.pointPicking&&l.depthMask(!1),o===l.LINES&&i?(t.updateShaders(n,r,s),l.drawArraysInstanced(o,0,e.CABO.getElementCount(),2*Math.ceil(r.getProperty().getLineWidth()))):(l.lineWidth(r.getProperty().getLineWidth()),t.updateShaders(n,r,s),l.drawArrays(o,0,e.CABO.getElementCount()),l.lineWidth(1));const f=(o===l.POINTS?1:0)||(o===l.LINES?2:3);return e.pointPicking&&l.depthMask(c),e.CABO.getElementCount()/f}return 0},t.getOpenGLMode=n=>{if(e.pointPicking)return e.context.POINTS;const r=e.primitiveType;return n===Er.POINTS||r===Fo.Points?e.context.POINTS:n===Er.WIREFRAME||r===Fo.Lines||r===Fo.TrisEdges||r===Fo.TriStripsEdges?e.context.LINES:e.context.TRIANGLES},t.haveWideLines=(n,r)=>r.getProperty().getLineWidth()>1?!(e.CABO.getOpenGLRenderWindow()&&e.CABO.getOpenGLRenderWindow().getHardwareMaximumLineWidth()>=r.getProperty().getLineWidth()):!1,t.getNeedToRebuildShaders=(n,r,a)=>!!(a.getNeedToRebuildShaders(t,n,r)||t.getProgram()===0||t.getShaderSourceTime().getMTime()<a.getMTime()||t.getShaderSourceTime().getMTime()<r.getMTime()),t.updateShaders=(n,r,a)=>{if(t.getNeedToRebuildShaders(n,r,a)){const s={Vertex:null,Fragment:null,Geometry:null};a.buildShaders(s,n,r);const o=e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgramArray(s.Vertex,s.Fragment,s.Geometry);o!==t.getProgram()&&(t.setProgram(o),t.getVAO().releaseGraphicsResources()),t.getShaderSourceTime().modified()}else e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgram(t.getProgram());t.getVAO().bind(),a.setMapperShaderParameters(t,n,r),a.setPropertyShaderParameters(t,n,r),a.setCameraShaderParameters(t,n,r),a.setLightingShaderParameters(t,n,r),a.invokeShaderCallbacks(t,n,r)},t.setMapperShaderParameters=(n,r,a)=>{if(t.haveWideLines(n,r)){t.getProgram().setUniform2f("viewportSize",a.usize,a.vsize);const s=parseFloat(r.getProperty().getLineWidth()),o=s/2;t.getProgram().setUniformf("lineWidthStepSize",s/Math.ceil(s)),t.getProgram().setUniformf("halfLineWidth",o)}e.primitiveType===Fo.Points||r.getProperty().getRepresentation()===Er.POINTS?t.getProgram().setUniformf("pointSize",r.getProperty().getPointSize()):e.pointPicking&&t.getProgram().setUniformf("pointSize",t.getPointPickingPrimitiveSize())},t.replaceShaderPositionVC=(n,r,a)=>{let s=n.Vertex;s=ue.substitute(s,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform float pointSize;"]).result,s=ue.substitute(s,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl","  gl_PointSize = pointSize;"],!1).result,t.getOpenGLMode(a.getProperty().getRepresentation())===e.context.LINES&&t.haveWideLines(r,a)&&(s=ue.substitute(s,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform vec2 viewportSize;","uniform float lineWidthStepSize;","uniform float halfLineWidth;"]).result,s=ue.substitute(s,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl"," if (halfLineWidth > 0.0)","   {","   float offset = float(gl_InstanceID / 2) * lineWidthStepSize - halfLineWidth;","   vec4 tmpPos = gl_Position;","   vec3 tmpPos2 = tmpPos.xyz / tmpPos.w;","   tmpPos2.x = tmpPos2.x + 2.0 * mod(float(gl_InstanceID), 2.0) * offset / viewportSize[0];","   tmpPos2.y = tmpPos2.y + 2.0 * mod(float(gl_InstanceID + 1), 2.0) * offset / viewportSize[1];","   gl_Position = vec4(tmpPos2.xyz * tmpPos.w, tmpPos.w);","   }"]).result),n.Vertex=s},t.getPointPickingPrimitiveSize=()=>e.primitiveType===Fo.Points?2:e.primitiveType===Fo.Lines?4:6,t.getAllocatedGPUMemoryInBytes=()=>t.getCABO().getAllocatedGPUMemoryInBytes()}const p6={context:null,program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null,primitiveType:0,pointPicking:!1};function YR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,p6,n),A.obj(t,e),e.shaderSourceTime={},A.obj(e.shaderSourceTime),e.attributeUpdateTime={},A.obj(e.attributeUpdateTime),A.setGet(t,e,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO","primitiveType","pointPicking"]),e.program=ue.newInstance(),e.VAO=id.newInstance(),e.CABO=e6.newInstance(),d6(t,e)}const g6=A.newInstance(YR);var Ba={newInstance:g6,extend:YR,primTypes:Fo};const wf={CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},wt={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5};var qR={Wrap:wf,Filter:wt};const XR=new Float32Array(1),h6=new Int32Array(XR.buffer);function v6(t){XR[0]=t;const e=h6[0];let n=e>>16&32768,r=e>>12&2047;const a=e>>23&255;return a<103?n:a>142?(n|=31744,n|=(a===255?0:1)&&e&8388607,n):a<113?(r|=2048,n|=(r>>114-a)+(r>>113-a&1),n):(n|=a-112<<10|r>>1,n+=r&1,n)}function y6(t){const e=(t&32768)>>15,n=(t&31744)>>10,r=t&1023;return n===0?(e?-1:1)*2**-14*(r/2**10):n===31?r?NaN:(e?-1:1)*(1/0):(e?-1:1)*2**(n-15)*(1+r/2**10)}var ja={fromHalf:y6,toHalf:v6};const{Wrap:Ks,Filter:yr}=qR,{VtkDataTypes:nn}=Tt,{vtkDebugMacro:x0,vtkErrorMacro:jl,vtkWarningMacro:Qw}=nr,{toHalf:m6}=ja;function C6(t,e){e.classHierarchy.push("vtkOpenGLTexture"),t.render=function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(c?e._openGLRenderWindow=c:(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent()),e.context=e._openGLRenderWindow.getContext(),e.renderable.getInterpolate()?(e.generateMipmap?t.setMinificationFilter(yr.LINEAR_MIPMAP_LINEAR):t.setMinificationFilter(yr.LINEAR),t.setMagnificationFilter(yr.LINEAR)):(t.setMinificationFilter(yr.NEAREST),t.setMagnificationFilter(yr.NEAREST)),e.renderable.getRepeat()&&(t.setWrapR(Ks.REPEAT),t.setWrapS(Ks.REPEAT),t.setWrapT(Ks.REPEAT)),e.renderable.getInputData()&&e.renderable.setImage(null),!e.handle||e.renderable.getMTime()>e.textureBuildTime.getMTime()){if(e.renderable.getImage()!==null&&(e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(yr.LINEAR_MIPMAP_LINEAR)),e.renderable.getImage()&&e.renderable.getImageLoaded()&&(t.create2DFromImage(e.renderable.getImage()),t.activate(),t.sendParameters(),e.textureBuildTime.modified())),e.renderable.getCanvas()!==null){e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(yr.LINEAR_MIPMAP_LINEAR));const f=e.renderable.getCanvas();t.create2DFromRaw(f.width,f.height,4,nn.UNSIGNED_CHAR,f,!0),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}if(e.renderable.getJsImageData()!==null){const f=e.renderable.getJsImageData();e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(yr.LINEAR_MIPMAP_LINEAR)),t.create2DFromRaw(f.width,f.height,4,nn.UNSIGNED_CHAR,f.data,!0),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}const u=e.renderable.getInputData(0);if(u&&u.getPointData().getScalars()){const f=u.getExtent(),d=u.getPointData().getScalars(),p=[];for(let h=0;h<e.renderable.getNumberOfInputPorts();++h){const g=e.renderable.getInputData(h),y=g?g.getPointData().getScalars().getData():null;y&&p.push(y)}e.renderable.getInterpolate()&&d.getNumberOfComponents()===4&&(e.generateMipmap=!0,t.setMinificationFilter(yr.LINEAR_MIPMAP_LINEAR)),p.length%6===0?t.createCubeFromRaw(f[1]-f[0]+1,f[3]-f[2]+1,d.getNumberOfComponents(),d.getDataType(),p):t.create2DFromRaw(f[1]-f[0]+1,f[3]-f[2]+1,d.getNumberOfComponents(),d.getDataType(),d.getData()),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}}e.handle&&t.activate()},t.destroyTexture=()=>{t.deactivate(),e.context&&e.handle&&e.context.deleteTexture(e.handle),e.handle=0,e.numberOfDimensions=0,e.target=0,e.components=0,e.width=0,e.height=0,e.depth=0,t.resetFormatAndType()},t.createTexture=()=>{e.handle||(e.handle=e.context.createTexture(),e.target&&(e.context.bindTexture(e.target,e.handle),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.bindTexture(e.target,null)))},t.getTextureUnit=()=>e._openGLRenderWindow?e._openGLRenderWindow.getTextureUnitForTexture(t):-1,t.activate=()=>{e._openGLRenderWindow.activateTexture(t),t.bind()},t.deactivate=()=>{e._openGLRenderWindow&&e._openGLRenderWindow.deactivateTexture(t)},t.releaseGraphicsResources=c=>{c&&e.handle&&(c.activateTexture(t),c.deactivateTexture(t),e.context.deleteTexture(e.handle),e.handle=0,e.numberOfDimensions=0,e.target=0,e.internalFormat=0,e.format=0,e.openGLDataType=0,e.components=0,e.width=0,e.height=0,e.depth=0,e.allocatedGPUMemoryInBytes=0),e.shaderProgram&&(e.shaderProgram.releaseGraphicsResources(c),e.shaderProgram=null)},t.bind=()=>{e.context.bindTexture(e.target,e.handle),e.autoParameters&&t.getMTime()>e.sendParametersTime.getMTime()&&t.sendParameters()},t.isBound=()=>{let c=!1;if(e.context&&e.handle){let u=0;switch(e.target){case e.context.TEXTURE_2D:u=e.context.TEXTURE_BINDING_2D;break;default:Qw("impossible case");break}c=e.context.getIntegerv(u)===e.handle}return c},t.sendParameters=()=>{e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e._openGLRenderWindow.getWebgl2()&&(e.context.texParameteri(e.target,e.context.TEXTURE_BASE_LEVEL,e.baseLevel),e.context.texParameteri(e.target,e.context.TEXTURE_MAX_LEVEL,e.maxLevel)),e.sendParametersTime.modified()},t.getInternalFormat=(c,u)=>(e._forceInternalFormat||(e.internalFormat=t.getDefaultInternalFormat(c,u)),e.internalFormat||x0(`Unable to find suitable internal format for T=${c} NC= ${u}`),[e.context.R32F,e.context.RG32F,e.context.RGB32F,e.context.RGBA32F].includes(e.internalFormat)&&!e.context.getExtension("OES_texture_float_linear")&&Qw("Failed to load OES_texture_float_linear. Texture filtering is not available for *32F internal formats."),e.internalFormat),t.getDefaultInternalFormat=(c,u)=>{let f=0;return f=e._openGLRenderWindow.getDefaultTextureInternalFormat(c,u,e.oglNorm16Ext,e.useHalfFloat),f||(f||(x0("Unsupported internal texture type!"),x0(`Unable to find suitable internal format for T=${c} NC= ${u}`)),f)},t.setInternalFormat=c=>{e._forceInternalFormat=!0,c!==e.internalFormat&&(e.internalFormat=c,t.modified())},t.getFormat=(c,u)=>(e.format=t.getDefaultFormat(c,u),e.format),t.getDefaultFormat=(c,u)=>{if(e._openGLRenderWindow.getWebgl2())switch(u){case 1:return e.context.RED;case 2:return e.context.RG;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}else switch(u){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}},t.resetFormatAndType=()=>{e.format=0,e.internalFormat=0,e._forceInternalFormat=!1,e.openGLDataType=0},t.getDefaultDataType=c=>{if(e._openGLRenderWindow.getWebgl2())switch(c){case nn.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case(e.oglNorm16Ext&&!e.useHalfFloat&&nn.SHORT):return e.context.SHORT;case(e.oglNorm16Ext&&!e.useHalfFloat&&nn.UNSIGNED_SHORT):return e.context.UNSIGNED_SHORT;case(e.useHalfFloat&&nn.SHORT):return e.context.HALF_FLOAT;case(e.useHalfFloat&&nn.UNSIGNED_SHORT):return e.context.HALF_FLOAT;case nn.FLOAT:case nn.VOID:default:return e.context.FLOAT}switch(c){case nn.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case nn.FLOAT:case nn.VOID:default:if(e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear"))return e.context.FLOAT;{const u=e.context.getExtension("OES_texture_half_float");if(u&&e.context.getExtension("OES_texture_half_float_linear"))return u.HALF_FLOAT_OES}return e.context.UNSIGNED_BYTE}},t.getOpenGLDataType=function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(!e.openGLDataType||u)&&(e.openGLDataType=t.getDefaultDataType(c)),e.openGLDataType},t.getShiftAndScale=()=>{let c=0,u=1;switch(e.openGLDataType){case e.context.BYTE:u=127.5,c=u-128;break;case e.context.UNSIGNED_BYTE:u=255,c=0;break;case e.context.SHORT:u=32767.5,c=u-32768;break;case e.context.UNSIGNED_SHORT:u=65536,c=0;break;case e.context.INT:u=21474836475e-1,c=u-2147483648;break;case e.context.UNSIGNED_INT:u=4294967295,c=0;break;case e.context.FLOAT:}return{shift:c,scale:u}},t.getOpenGLFilterMode=c=>{switch(c){case yr.NEAREST:return e.context.NEAREST;case yr.LINEAR:return e.context.LINEAR;case yr.NEAREST_MIPMAP_NEAREST:return e.context.NEAREST_MIPMAP_NEAREST;case yr.NEAREST_MIPMAP_LINEAR:return e.context.NEAREST_MIPMAP_LINEAR;case yr.LINEAR_MIPMAP_NEAREST:return e.context.LINEAR_MIPMAP_NEAREST;case yr.LINEAR_MIPMAP_LINEAR:return e.context.LINEAR_MIPMAP_LINEAR;default:return e.context.NEAREST}},t.getOpenGLWrapMode=c=>{switch(c){case Ks.CLAMP_TO_EDGE:return e.context.CLAMP_TO_EDGE;case Ks.REPEAT:return e.context.REPEAT;case Ks.MIRRORED_REPEAT:return e.context.MIRRORED_REPEAT;default:return e.context.CLAMP_TO_EDGE}};function n(c,u){let f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const d=[];let p=e.width*e.height*e.components;if(f&&(p*=e.depth),c!==nn.FLOAT&&e.openGLDataType===e.context.FLOAT)for(let g=0;g<u.length;g++)if(u[g]){const y=u[g].length>p?u[g].subarray(0,p):u[g];d.push(new Float32Array(y))}else d.push(null);if(c!==nn.UNSIGNED_CHAR&&e.openGLDataType===e.context.UNSIGNED_BYTE)for(let g=0;g<u.length;g++)if(u[g]){const y=u[g].length>p?u[g].subarray(0,p):u[g];d.push(new Uint8Array(y))}else d.push(null);let h=!1;if(e._openGLRenderWindow.getWebgl2())h=e.openGLDataType===e.context.HALF_FLOAT;else{const g=e.context.getExtension("OES_texture_half_float");h=g&&e.openGLDataType===g.HALF_FLOAT_OES}if(h)for(let g=0;g<u.length;g++)if(u[g]){const y=new Uint16Array(p),m=u[g];for(let b=0;b<p;b++)y[b]=m6(m[b]);d.push(y)}else d.push(null);if(d.length===0)for(let g=0;g<u.length;g++)d.push(u[g]);return d}function r(c){if(e._openGLRenderWindow.getWebgl2())return c;const u=[],f=e.width,d=e.height,p=e.components;if(c&&(!Iu(f)||!Iu(d))){const h=e.context.getExtension("OES_texture_half_float"),g=ma(f),y=ma(d),m=g*y*e.components;for(let b=0;b<c.length;b++)if(c[b]!==null){let C=null;const S=d/y,T=f/g;let w=!1;e.openGLDataType===e.context.FLOAT?C=new Float32Array(m):h&&e.openGLDataType===h.HALF_FLOAT_OES?(C=new Uint16Array(m),w=!0):C=new Uint8Array(m);for(let x=0;x<y;x++){const E=x*g*p,O=x*S;let k=Math.floor(O),M=Math.ceil(O);M>=d&&(M=d-1);const D=O-k,I=1-D;k=k*f*p,M=M*f*p;for(let B=0;B<g;B++){const F=B*p,$=B*T;let N=Math.floor($),W=Math.ceil($);W>=f&&(W=f-1);const _=$-N;N*=p,W*=p;for(let L=0;L<p;L++)w?C[E+F+L]=ja.toHalf(ja.fromHalf(c[b][k+N+L])*I*(1-_)+ja.fromHalf(c[b][k+W+L])*I*_+ja.fromHalf(c[b][M+N+L])*D*(1-_)+ja.fromHalf(c[b][M+W+L])*D*_):C[E+F+L]=c[b][k+N+L]*I*(1-_)+c[b][k+W+L]*I*_+c[b][M+N+L]*D*(1-_)+c[b][M+W+L]*D*_}}u.push(C),e.width=g,e.height=y}else u.push(null)}if(u.length===0)for(let h=0;h<c.length;h++)u.push(c[h]);return u}function a(c){var u;return e._openGLRenderWindow?e.resizable||(u=e.renderable)!=null&&u.getResizable()?!1:e._openGLRenderWindow.getWebgl2()?!(e._openGLRenderWindow.getGLInformations().RENDERER.value.match(/WebKit/gi)&&navigator.platform.match(/Mac/gi)&&e.oglNorm16Ext&&(c===nn.UNSIGNED_SHORT||c===nn.SHORT)):!1:!1}t.create2DFromRaw=function(c,u,f,d,p){let h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;if(t.getOpenGLDataType(d,!0),t.getInternalFormat(d,f),t.getFormat(d,f),!e.internalFormat||!e.format||!e.openGLDataType)return jl("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=f,e.width=c,e.height=u,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const y=n(d,[p]),m=r(y);return e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,h),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),a(d)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),m[0]!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,m[0])):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,m[0]),e.generateMipmap&&e.context.generateMipmap(e.target),h&&e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,!1),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*f*e._openGLRenderWindow.getDefaultTextureByteSize(d,e.oglNorm16Ext,e.useHalfFloat),t.deactivate(),!0},t.createCubeFromRaw=(c,u,f,d,p)=>{if(t.getOpenGLDataType(d),t.getInternalFormat(d,f),t.getFormat(d,f),!e.internalFormat||!e.format||!e.openGLDataType)return jl("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_CUBE_MAP,e.components=f,e.width=c,e.height=u,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),e.maxLevel=p.length/6-1,t.createTexture(),t.bind();const h=n(d,p),g=r(h),y=[];let m=e.width,b=e.height;for(let C=0;C<g.length;C++){C%6===0&&C!==0&&(m/=2,b/=2),y[C]=cu(d,b*m*e.components);for(let S=0;S<b;++S){const T=S*m*e.components,w=(b-S-1)*m*e.components;y[C].set(g[C].slice(w,w+m*e.components),T)}}e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),a(d)&&e.context.texStorage2D(e.target,6,e.internalFormat,e.width,e.height);for(let C=0;C<6;C++){let S=0,T=e.width,w=e.height;for(;T>=1&&w>=1;){let x=null;S<=e.maxLevel&&(x=y[6*S+C]),a(d)?x!=null&&e.context.texSubImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+C,S,0,0,T,w,e.format,e.openGLDataType,x):e.context.texImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+C,S,e.internalFormat,T,w,0,e.format,e.openGLDataType,x),S++,T/=2,w/=2}}return e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*f*e._openGLRenderWindow.getDefaultTextureByteSize(d,e.oglNorm16Ext,e.useHalfFloat),t.deactivate(),!0},t.createDepthFromRaw=(c,u,f,d)=>(t.getOpenGLDataType(f),e.format=e.context.DEPTH_COMPONENT,e._openGLRenderWindow.getWebgl2()?f===nn.FLOAT?e.internalFormat=e.context.DEPTH_COMPONENT32F:e.internalFormat=e.context.DEPTH_COMPONENT16:e.internalFormat=e.context.DEPTH_COMPONENT,!e.internalFormat||!e.format||!e.openGLDataType?(jl("Failed to determine texture parameters."),!1):(e.target=e.context.TEXTURE_2D,e.components=1,e.width=c,e.height=u,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),a(f)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),d!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,d)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,d),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(f,e.oglNorm16Ext,e.useHalfFloat),t.deactivate(),!0)),t.create2DFromImage=c=>{if(t.getOpenGLDataType(nn.UNSIGNED_CHAR),t.getInternalFormat(nn.UNSIGNED_CHAR,4),t.getFormat(nn.UNSIGNED_CHAR,4),!e.internalFormat||!e.format||!e.openGLDataType)return jl("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=4,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1);const u=!e._openGLRenderWindow.getWebgl2()&&(!Iu(c.width)||!Iu(c.height)),f=document.createElement("canvas");f.width=u?ma(c.width):c.width,f.height=u?ma(c.height):c.height,e.width=f.width,e.height=f.height;const d=f.getContext("2d");d.translate(0,f.height),d.scale(1,-1),d.drawImage(c,0,0,c.width,c.height,0,0,f.width,f.height);const p=f;return a(nn.UNSIGNED_CHAR)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),p!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,p)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,p),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(nn.UNSIGNED_CHAR,e.oglNorm16Ext,e.useHalfFloat),t.deactivate(),!0};function s(c,u,f){const d=new Array(f),p=new Array(f);for(let h=0;h<f;++h)d[h]=c[h],p[h]=u[h]-c[h]||1;return{scale:p,offset:d}}function o(c,u){for(let f=0;f<c.length;f++){const d=c[f],p=u[f]+d;if(d<-2048||d>2048||p<-2048||p>2048)return!1}return!0}function i(c,u,f,d){t.getOpenGLDataType(c);let p=!1;if(e._openGLRenderWindow.getWebgl2())p=e.openGLDataType===e.context.HALF_FLOAT;else{const g=e.context.getExtension("OES_texture_half_float");p=g&&e.openGLDataType===g.HALF_FLOAT_OES}const h=p&&(o(u,f)||d);e.useHalfFloat=h}function l(c,u){const f=c.getNumberOfComponents(),d=c.getDataType(),p=c.getData(),h=new Array(f),g=new Array(f);for(let m=0;m<f;++m){const[b,C]=c.getRange(m);h[m]=b,g[m]=C}const y=s(h,g,f);return i(d,y.offset,y.scale,u),e.useHalfFloat||t.getOpenGLDataType(d,!0),{numComps:f,dataType:d,data:p,scaleOffsets:y}}t.create2DFilterableFromRaw=function(c,u,f,d,p){let h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;return t.create2DFilterableFromDataArray(c,u,Tt.newInstance({numberOfComponents:f,dataType:d,values:p}),h)},t.create2DFilterableFromDataArray=function(c,u,f){let d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const{numComps:p,dataType:h,data:g}=l(f,d);t.create2DFromRaw(c,u,p,h,g)},t.create3DFromRaw=(c,u,f,d,p,h)=>{if(t.getOpenGLDataType(p),t.getInternalFormat(p,d),t.getFormat(p,d),!e.internalFormat||!e.format||!e.openGLDataType)return jl("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_3D,e.components=d,e.width=c,e.height=u,e.depth=f,e.numberOfDimensions=3,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const m=n(p,[h],!0),b=r(m);return e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),a(p)?(e.context.texStorage3D(e.target,1,e.internalFormat,e.width,e.height,e.depth),b[0]!=null&&e.context.texSubImage3D(e.target,0,0,0,0,e.width,e.height,e.depth,e.format,e.openGLDataType,b[0])):e.context.texImage3D(e.target,0,e.internalFormat,e.width,e.height,e.depth,0,e.format,e.openGLDataType,b[0]),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(p,e.oglNorm16Ext,e.useHalfFloat),t.deactivate(),!0},t.create3DFilterableFromRaw=function(c,u,f,d,p,h){let g=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1;return t.create3DFilterableFromDataArray(c,u,f,Tt.newInstance({numberOfComponents:d,dataType:p,values:h}),g)},t.create3DFilterableFromDataArray=function(c,u,f,d){let p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const{numComps:h,dataType:g,data:y,scaleOffsets:m}=l(d,p),b=c*u*f,C=[],S=[];for(let L=0;L<h;++L)C[L]=0,S[L]=1;e.volumeInfo={scale:S,offset:C,dataComputedScale:m.scale,dataComputedOffset:m.offset,width:c,height:u,depth:f};const T=structuredClone(m);if(e._openGLRenderWindow.getWebgl2()){if(e.oglNorm16Ext&&!e.useHalfFloat&&g===nn.SHORT){for(let Y=0;Y<h;++Y)e.volumeInfo.scale[Y]=32767;return t.create3DFromRaw(c,u,f,h,g,y)}if(e.oglNorm16Ext&&!e.useHalfFloat&&g===nn.UNSIGNED_SHORT){for(let Y=0;Y<h;++Y)e.volumeInfo.scale[Y]=65535;return t.create3DFromRaw(c,u,f,h,g,y)}if(g===nn.FLOAT||e.useHalfFloat&&(g===nn.SHORT||g===nn.UNSIGNED_SHORT))return t.create3DFromRaw(c,u,f,h,g,y);if(g===nn.UNSIGNED_CHAR){for(let Y=0;Y<h;++Y)e.volumeInfo.scale[Y]=255;return t.create3DFromRaw(c,u,f,h,g,y)}const L=new Float32Array(b*h);e.volumeInfo.offset=T.offset,e.volumeInfo.scale=T.scale;let G=0;const K=T.scale.map(Y=>1/Y);for(let Y=0;Y<b;Y++)for(let te=0;te<h;te++)L[G]=(y[G]-T.offset[te])*K[te],G++;return t.create3DFromRaw(c,u,f,h,nn.FLOAT,L)}let w=(L,G,K,Y,te)=>{L[G]=K},x=nn.UNSIGNED_CHAR;if(g===nn.UNSIGNED_CHAR)for(let L=0;L<h;++L)T.offset[L]=0,T.scale[L]=255;else e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear")?(x=nn.FLOAT,w=(L,G,K,Y,te)=>{L[G]=(K-Y)/te}):(x=nn.UNSIGNED_CHAR,w=(L,G,K,Y,te)=>{L[G]=255*(K-Y)/te});if(t.getOpenGLDataType(x),t.getInternalFormat(x,h),t.getFormat(x,h),!e.internalFormat||!e.format||!e.openGLDataType)return jl("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=h,e.depth=1,e.numberOfDimensions=2;let E=e.context.getParameter(e.context.MAX_TEXTURE_SIZE);E>4096&&(x===nn.FLOAT||h>=3)&&(E=4096);let O=1,k=1;b>E*E&&(O=Math.ceil(Math.sqrt(b/(E*E))),k=O);let M=Math.sqrt(b)/O;M=ma(M);const D=Math.floor(M*O/c),I=Math.ceil(f/D),B=ma(u*I/k);e.width=M,e.height=B,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.volumeInfo.xreps=D,e.volumeInfo.yreps=I,e.volumeInfo.xstride=O,e.volumeInfo.ystride=k,e.volumeInfo.offset=T.offset,e.volumeInfo.scale=T.scale;let F;const $=M*B*h;x===nn.FLOAT?F=new Float32Array($):F=new Uint8Array($);let N=0;const W=Math.floor(c/O),_=Math.floor(u/k);for(let L=0;L<I;L++){const G=Math.min(D,f-L*D),K=h*(e.width-G*Math.floor(c/O));for(let Y=0;Y<_;Y++){for(let te=0;te<G;te++){const ve=h*((L*D+te)*c*u+k*Y*c);for(let se=0;se<W;se++)for(let ie=0;ie<h;ie++)w(F,N,y[ve+O*se*h+ie],T.offset[ie],T.scale[ie]),N++}N+=K}}return e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),a(x)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),F!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,F)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,F),t.deactivate(),!0},t.setOpenGLRenderWindow=c=>{e._openGLRenderWindow!==c&&(t.releaseGraphicsResources(),e._openGLRenderWindow=c,e.context=null,c&&(e.context=e._openGLRenderWindow.getContext()))},t.getMaximumTextureSize=c=>c&&c.isCurrent()?c.getIntegerv(c.MAX_TEXTURE_SIZE):-1}const S6={_openGLRenderWindow:null,_forceInternalFormat:!1,context:null,handle:0,sendParametersTime:null,textureBuildTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:Ks.CLAMP_TO_EDGE,wrapT:Ks.CLAMP_TO_EDGE,wrapR:Ks.CLAMP_TO_EDGE,minificationFilter:yr.NEAREST,magnificationFilter:yr.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:1e3,generateMipmap:!1,useHalfFloat:!0,oglNorm16Ext:null,allocatedGPUMemoryInBytes:0};function ZR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,S6,n),gn.extend(t,e,n),e.sendParametersTime={},dn(e.sendParametersTime,{mtime:0}),e.textureBuildTime={},dn(e.textureBuildTime,{mtime:0}),td(t,e,["format","openGLDataType"]),Dn(t,e,["keyMatrixTime","minificationFilter","magnificationFilter","wrapS","wrapT","wrapR","generateMipmap","oglNorm16Ext"]),wr(t,e,["width","height","volumeInfo","components","handle","target","allocatedGPUMemoryInBytes"]),nd(t,e,["openGLRenderWindow"]),C6(t,e)}const JR=Ft(ZR,"vtkOpenGLTexture");var Gt={newInstance:JR,extend:ZR,...qR};Xn("vtkTexture",JR);var OC=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

attribute vec4 vertexMC;

// frag position in VC
//VTK::PositionVC::Dec

// optional normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// Texture coordinates
//VTK::TCoord::Dec

// material property values
//VTK::Color::Dec

// clipping plane vars
//VTK::Clip::Dec

// camera and actor matrix values
//VTK::Camera::Dec

// Apple Bug
//VTK::PrimID::Dec

// picking support
//VTK::Picking::Dec

void main()
{
  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Clip::Impl

  //VTK::PrimID::Impl

  //VTK::PositionVC::Impl

  //VTK::Light::Impl

  //VTK::Picking::Impl
}
`,ld=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the polydata mappers fragment shader

uniform int PrimitiveIDOffset;

// VC position of this fragment
//VTK::PositionVC::Dec

// optional color passed in from the vertex shader, vertexColor
//VTK::Color::Dec

// optional surface normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// define vtkImageLabelOutlineOn
//VTK::ImageLabelOutlineOn

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// Depth Peeling Support
//VTK::DepthPeeling::Dec

// clipping plane vars
//VTK::Clip::Dec

// label outline 
//VTK::LabelOutline::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

// handle coincident offsets
//VTK::Coincident::Dec

//VTK::ZBuffer::Dec

//VTK::LabelOutlineHelperFunction

void main()
{
  // VC position of this fragment. This should not branch/return/discard.
  //VTK::PositionVC::Impl

  // Place any calls that require uniform flow (e.g. dFdx) here.
  //VTK::UniformFlow::Impl

  // Set gl_FragDepth here (gl_FragCoord.z by default)
  //VTK::Depth::Impl

  // Early depth peeling abort:
  //VTK::DepthPeeling::PreColor

  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Clip::Impl

  //VTK::Color::Impl

  // Generate the normal if we are not passed in one
  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Light::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }

  //VTK::DepthPeeling::Impl

  //VTK::Picking::Impl

  // handle coincident offsets
  //VTK::Coincident::Impl

  //VTK::ZBuffer::Impl

  //VTK::RenderPassFragmentShader::Impl
}
`;function b6(t,e){t.replaceShaderCoincidentOffset=(n,r,a)=>{const s=t.getCoincidentParameters(r,a);if(s&&(s.factor!==0||s.offset!==0)){let o=n.Fragment;o=ue.substitute(o,"//VTK::Coincident::Dec",["uniform float cfactor;","uniform float coffset;"]).result,e.context.getExtension("EXT_frag_depth")&&(s.factor!==0?(o=ue.substitute(o,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,o=ue.substitute(o,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):o=ue.substitute(o,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + 0.000016*coffset;").result),e._openGLRenderWindow.getWebgl2()&&(s.factor!==0?(o=ue.substitute(o,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,o=ue.substitute(o,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):o=ue.substitute(o,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + 0.000016*coffset;").result),n.Fragment=o}}}function w6(t,e){t.applyShaderReplacements=(n,r,a)=>{let s=null;if(r&&(s=r.ShaderReplacements),s)for(let o=0;o<s.length;o++){const i=s[o];if(a&&i.replaceFirst||!a&&!i.replaceFirst){const l=i.shaderType,c=n[l],u=ue.substitute(c,i.originalValue,i.replacementValue,i.replaceAll);n[l]=u.result}}},t.buildShaders=(n,r,a)=>{t.getReplacedShaderTemplate(n,r,a),e.lastRenderPassShaderReplacement=e.currentRenderPass?e.currentRenderPass.getShaderReplacement():null,e.lastRenderPassShaderReplacement&&e.lastRenderPassShaderReplacement(n);const s=e.renderable.getViewSpecificProperties().OpenGL;t.applyShaderReplacements(n,s,!0),t.replaceShaderValues(n,r,a),t.applyShaderReplacements(n,s)},t.getReplacedShaderTemplate=(n,r,a)=>{const s=e.renderable.getViewSpecificProperties().OpenGL;t.getShaderTemplate(n,r,a);let o=n.Vertex;if(s){const c=s.VertexShaderCode;c!==void 0&&c!==""&&(o=c)}n.Vertex=o;let i=n.Fragment;if(s){const c=s.FragmentShaderCode;c!==void 0&&c!==""&&(i=c)}n.Fragment=i;let l=n.Geometry;if(s){const c=s.GeometryShaderCode;c!==void 0&&(l=c)}n.Geometry=l}}var io={implementReplaceShaderCoincidentOffset:b6,implementBuildShadersWithReplacements:w6};const{FieldAssociations:E0}=Vl,{primTypes:ar}=Ba,{Representation:Yl,Shading:eT}=vo,{ScalarMode:Kd}=ba,{Filter:tT,Wrap:nT}=Gt,{vtkErrorMacro:xi}=nr,T6={type:"StartEvent"},x6={type:"EndEvent"},{CoordinateSystem:E6}=_l;function k6(t){const e=t.getSelector();return e?e.getCurrentPass():Ur.MIN_KNOWN_PASS-1}function O6(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper"),t.buildPass=r=>{r&&(e.currentRenderPass=null,e.openGLActor=t.getFirstAncestorOfType("vtkOpenGLActor"),e._openGLRenderer=e.openGLActor.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()))},t.translucentPass=(r,a)=>{r&&(e.currentRenderPass=a,t.render())},t.zBufferPass=r=>{r&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=r=>t.zBufferPass(r),t.opaquePass=r=>{r&&t.render()},t.render=()=>{const r=e._openGLRenderWindow.getContext();if(e.context!==r){e.context=r;for(let o=ar.Start;o<ar.End;o++)e.primitives[o].setOpenGLRenderWindow(e._openGLRenderWindow)}const a=e.openGLActor.getRenderable(),s=e._openGLRenderer.getRenderable();t.renderPiece(s,a)},t.getShaderTemplate=(r,a,s)=>{r.Vertex=OC,r.Fragment=ld,r.Geometry=""},t.replaceShaderColor=(r,a,s)=>{let o=r.Vertex,i=r.Geometry,l=r.Fragment;const c=e.lastBoundBO.getReferenceByName("lastLightComplexity");let u=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity","uniform vec3 ambientColorUniform;","uniform vec3 diffuseColorUniform;"];c&&(u=u.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));let f=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];c&&(f=f.concat(["  vec3 specularColor;","  float specularPower;"])),f=f.concat(["  ambientColor = ambientColorUniform;","  diffuseColor = diffuseColorUniform;","  opacity = opacityUniform;"]),c&&(f=f.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges&&(u=u.concat(["varying vec4 vertexColorVSOutput;"]),o=ue.substitute(o,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,o=ue.substitute(o,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,i=ue.substitute(i,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,i=ue.substitute(i,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges?l=ue.substitute(l,"//VTK::Color::Impl",f.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result:e.renderable.getInterpolateScalarsBeforeMapping()&&e.renderable.getColorCoordinates()&&!e.drawingEdges?l=ue.substitute(l,"//VTK::Color::Impl",f.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  ambientColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:(s.getBackfaceProperty()&&!e.drawingEdges&&(u=u.concat(["uniform float opacityUniformBF; // the fragment opacity","uniform float ambientIntensityBF; // the material ambient","uniform float diffuseIntensityBF; // the material diffuse","uniform vec3 ambientColorUniformBF; // ambient material color","uniform vec3 diffuseColorUniformBF; // diffuse material color"]),c?(u=u.concat(["uniform float specularIntensityBF; // the material specular intensity","uniform vec3 specularColorUniformBF; // intensity weighted color","uniform float specularPowerUniformBF;"]),f=f.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  specularColor = specularIntensityBF * specularColorUniformBF;","  specularPower = specularPowerUniformBF;","  opacity = opacityUniformBF; }"])):f=f.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  opacity = opacityUniformBF; }"])),e.haveCellScalars&&!e.drawingEdges&&(u=u.concat(["uniform samplerBuffer texture1;"])),l=ue.substitute(l,"//VTK::Color::Impl",f).result),l=ue.substitute(l,"//VTK::Color::Dec",u).result,r.Vertex=o,r.Geometry=i,r.Fragment=l},t.replaceShaderLight=(r,a,s)=>{let o=r.Fragment;const i="",l=e.lastBoundBO.getReferenceByName("lastLightComplexity"),c=e.lastBoundBO.getReferenceByName("lastLightCount");let u=[];switch(l){case 0:o=ue.substitute(o,"//VTK::Light::Impl",["  gl_FragData[0] = vec4(ambientColor * ambient + diffuseColor * diffuse, opacity);","  //VTK::Light::Impl"],!1).result;break;case 1:o=ue.substitute(o,"//VTK::Light::Impl",["  float df = max(0.0, normalVCVSOutput.z);","  float sf = pow(df, specularPower);","  vec3 diffuseL = df * diffuseColor;","  vec3 specularL = sf * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 2:for(let f=0;f<c;++f)u=u.concat([`uniform vec3 lightColor${f};`,`uniform vec3 lightDirectionVC${f}; // normalized`,`uniform vec3 lightHalfAngleVC${f}; // normalized`]);o=ue.substitute(o,"//VTK::Light::Dec",u).result,u=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  float df;"];for(let f=0;f<c;++f)u=u.concat([`  df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC${f}));`,`  diffuseL += ((df${i}) * lightColor${f});`,`  if (dot(normalVCVSOutput, lightDirectionVC${f}) < 0.0)`,"    {",`    float sf = sign(df)*pow(max(1e-5,
                                              dot(reflect(lightDirectionVC${f},normalVCVSOutput),
                                                  normalize(-vertexVC.xyz))),
                                         specularPower);`,`    specularL += (sf${i} * lightColor${f});`,"    }"]);u=u.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),o=ue.substitute(o,"//VTK::Light::Impl",u,!1).result;break;case 3:for(let f=0;f<c;++f)u=u.concat([`uniform vec3 lightColor${f};`,`uniform vec3 lightDirectionVC${f}; // normalized`,`uniform vec3 lightHalfAngleVC${f}; // normalized`,`uniform vec3 lightPositionVC${f};`,`uniform vec3 lightAttenuation${f};`,`uniform float lightConeAngle${f};`,`uniform float lightExponent${f};`,`uniform int lightPositional${f};`]);o=ue.substitute(o,"//VTK::Light::Dec",u).result,u=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  vec3 vertLightDirectionVC;","  float attenuation;","  float df;"];for(let f=0;f<c;++f)u=u.concat(["  attenuation = 1.0;",`  if (lightPositional${f} == 0)`,"    {",`      vertLightDirectionVC = lightDirectionVC${f};`,"    }","  else","    {",`    vertLightDirectionVC = vertexVC.xyz - lightPositionVC${f};`,"    float distanceVC = length(vertLightDirectionVC);","    vertLightDirectionVC = normalize(vertLightDirectionVC);","    attenuation = 1.0 /",`      (lightAttenuation${f}.x`,`       + lightAttenuation${f}.y * distanceVC`,`       + lightAttenuation${f}.z * distanceVC * distanceVC);`,"    // per OpenGL standard cone angle is 90 or less for a spot light",`    if (lightConeAngle${f} <= 90.0)`,"      {",`      float coneDot = dot(vertLightDirectionVC, lightDirectionVC${f});`,"      // if inside the cone",`      if (coneDot >= cos(radians(lightConeAngle${f})))`,"        {",`        attenuation = attenuation * pow(coneDot, lightExponent${f});`,"        }","      else","        {","        attenuation = 0.0;","        }","      }","    }","    df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));",`    diffuseL += ((df${i}) * lightColor${f});`,"    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)","      {",`      float sf = sign(df)*attenuation*pow(max(1e-5,
                                                           dot(reflect(lightDirectionVC${f},
                                                                       normalVCVSOutput),
                                                               normalize(-vertexVC.xyz))),
                                                       specularPower);`,`    specularL += ((sf${i}) * lightColor${f});`,"    }"]);u=u.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),o=ue.substitute(o,"//VTK::Light::Impl",u,!1).result;break;default:xi("bad light complexity")}r.Fragment=o},t.replaceShaderNormal=(r,a,s)=>{if(e.lastBoundBO.getReferenceByName("lastLightComplexity")>0){let i=r.Vertex,l=r.Geometry,c=r.Fragment;e.lastBoundBO.getCABO().getNormalOffset()?(i=ue.substitute(i,"//VTK::Normal::Dec",["attribute vec3 normalMC;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,i=ue.substitute(i,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * normalMC;"]).result,l=ue.substitute(l,"//VTK::Normal::Dec",["in vec3 normalVCVSOutput[];","out vec3 normalVCGSOutput;"]).result,l=ue.substitute(l,"//VTK::Normal::Impl",["normalVCGSOutput = normalVCVSOutput[i];"]).result,c=ue.substitute(c,"//VTK::Normal::Dec",["varying vec3 normalVCVSOutput;"]).result,c=ue.substitute(c,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalVCVSOutput);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.haveCellNormals?(c=ue.substitute(c,"//VTK::Normal::Dec",["uniform mat3 normalMatrix;","uniform samplerBuffer textureN;"]).result,c=ue.substitute(c,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalMatrix *","    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.lastBoundBO.getOpenGLMode(s.getProperty().getRepresentation())===e.context.LINES?(c=ue.substitute(c,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,c=ue.substitute(c,"//VTK::Normal::Impl",["vec3 normalVCVSOutput;","  if (abs(fdx.x) > 0.0)","    { fdx = normalize(fdx); normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }","  else { fdy = normalize(fdy); normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}"]).result):(c=ue.substitute(c,"//VTK::Normal::Dec",["uniform int cameraParallel;"]).result,c=ue.substitute(c,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,c=ue.substitute(c,"//VTK::Normal::Impl",["  fdx = normalize(fdx);","  fdy = normalize(fdy);","  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));","  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }","  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }"]).result),r.Vertex=i,r.Geometry=l,r.Fragment=c}},t.replaceShaderPositionVC=(r,a,s)=>{e.lastBoundBO.replaceShaderPositionVC(r,a,s);let o=r.Vertex,i=r.Geometry,l=r.Fragment;e.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(o=ue.substitute(o,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,o=ue.substitute(o,"//VTK::PositionVC::Impl",["vertexVCVSOutput = MCVCMatrix * vertexMC;","  gl_Position = MCPCMatrix * vertexMC;"]).result,o=ue.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result,i=ue.substitute(i,"//VTK::PositionVC::Dec",["in vec4 vertexVCVSOutput[];","out vec4 vertexVCGSOutput;"]).result,i=ue.substitute(i,"//VTK::PositionVC::Impl",["vertexVCGSOutput = vertexVCVSOutput[i];"]).result,l=ue.substitute(l,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,l=ue.substitute(l,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;"]).result):(o=ue.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,o=ue.substitute(o,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result),r.Vertex=o,r.Geometry=i,r.Fragment=l},t.replaceShaderTCoord=(r,a,s)=>{if(e.lastBoundBO.getCABO().getTCoordOffset()){let o=r.Vertex,i=r.Geometry,l=r.Fragment;if(e.drawingEdges)return;o=ue.substitute(o,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;const c=e.openGLActor.getActiveTextures();let u=2,f=2;if(c&&c.length>0&&(u=c[0].getComponents(),c[0].getTarget()===e.context.TEXTURE_CUBE_MAP&&(f=3)),e.renderable.getColorTextureMap()&&(u=e.renderable.getColorTextureMap().getPointData().getScalars().getNumberOfComponents(),f=2),f===2){if(o=ue.substitute(o,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,i=ue.substitute(i,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];","out vec2 tcoordVCGSOutput;"]).result,i=ue.substitute(i,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,l=ue.substitute(l,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,c&&c.length>=1)switch(u){case 1:l=ue.substitute(l,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:l=ue.substitute(l,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:l=ue.substitute(l,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}}else switch(o=ue.substitute(o,"//VTK::TCoord::Dec","attribute vec3 tcoordMC; varying vec3 tcoordVCVSOutput;").result,i=ue.substitute(i,"//VTK::TCoord::Dec",["in vec3 tcoordVCVSOutput[];","out vec3 tcoordVCGSOutput;"]).result,i=ue.substitute(i,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,l=ue.substitute(l,"//VTK::TCoord::Dec",["varying vec3 tcoordVCVSOutput;","uniform samplerCube texture1;"]).result,u){case 1:l=ue.substitute(l,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:l=ue.substitute(l,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:l=ue.substitute(l,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}r.Vertex=o,r.Geometry=i,r.Fragment=l}},t.replaceShaderClip=(r,a,s)=>{let o=r.Vertex,i=r.Fragment;if(e.renderable.getNumberOfClippingPlanes()){const l=e.renderable.getNumberOfClippingPlanes();o=ue.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`uniform vec4 clipPlanes[${l}];`,`varying float clipDistancesVSOutput[${l}];`]).result,o=ue.substitute(o,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${l}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,i=ue.substitute(i,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`varying float clipDistancesVSOutput[${l}];`]).result,i=ue.substitute(i,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${l}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}r.Vertex=o,r.Fragment=i},t.getCoincidentParameters=(r,a)=>{let s={factor:0,offset:0};const o=a.getProperty();if(e.renderable.getResolveCoincidentTopology()||o.getEdgeVisibility()&&o.getRepresentation()===Yl.SURFACE){const l=e.lastBoundBO.getPrimitiveType();l===ar.Points||o.getRepresentation()===Yl.POINTS?s=e.renderable.getCoincidentTopologyPointOffsetParameter():l===ar.Lines||o.getRepresentation()===Yl.WIREFRAME?s=e.renderable.getCoincidentTopologyLineOffsetParameters():(l===ar.Tris||l===ar.TriStrips)&&(s=e.renderable.getCoincidentTopologyPolygonOffsetParameters()),(l===ar.TrisEdges||l===ar.TriStripsEdges)&&(s=e.renderable.getCoincidentTopologyPolygonOffsetParameters(),s.factor/=2,s.offset/=2)}const i=e._openGLRenderer.getSelector();return i&&i.getFieldAssociation()===E0.FIELD_ASSOCIATION_POINTS&&(s.offset-=2),s},t.replaceShaderPicking=(r,a,s)=>{let o=r.Fragment,i=r.Vertex;if(o=ue.substitute(o,"//VTK::Picking::Dec",["uniform int picking;","//VTK::Picking::Dec"]).result,!!e._openGLRenderer.getSelector()){switch((e.lastSelectionState===Ur.ID_LOW24||e.lastSelectionState===Ur.ID_HIGH24)&&(i=ue.substitute(i,"//VTK::Picking::Dec",[`flat out int vertexIDVSOutput;
`,`uniform int VertexIDOffset;
`]).result,i=ue.substitute(i,"//VTK::Picking::Impl",`  vertexIDVSOutput = gl_VertexID + VertexIDOffset;
`).result,o=ue.substitute(o,"//VTK::Picking::Dec",`flat in int vertexIDVSOutput;
`).result,o=ue.substitute(o,"//VTK::Picking::Impl",["  int idx = vertexIDVSOutput;","//VTK::Picking::Impl"]).result),e.lastSelectionState){case Ur.ID_LOW24:o=ue.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float(idx%256)/255.0, float((idx/256)%256)/255.0, float((idx/65536)%256)/255.0, 1.0);").result;break;case Ur.ID_HIGH24:o=ue.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float(idx)/255.0, 0.0, 0.0, 1.0);").result;break;default:o=ue.substitute(o,"//VTK::Picking::Dec","uniform vec3 mapperIndex;").result,o=ue.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result}r.Fragment=o,r.Vertex=i}},t.replaceShaderValues=(r,a,s)=>{if(t.replaceShaderColor(r,a,s),t.replaceShaderNormal(r,a,s),t.replaceShaderLight(r,a,s),t.replaceShaderTCoord(r,a,s),t.replaceShaderPicking(r,a,s),t.replaceShaderClip(r,a,s),t.replaceShaderCoincidentOffset(r,a,s),t.replaceShaderPositionVC(r,a,s),e.haveSeenDepthRequest){let o=r.Fragment;o=ue.substitute(o,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,o=ue.substitute(o,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,r.Fragment=o}},t.getNeedToRebuildShaders=(r,a,s)=>{let o=0,i=0;const l=r.getPrimitiveType(),c=e.currentInput;let u=!1;const f=c.getPointData().getNormals(),d=c.getCellData().getNormals(),p=s.getProperty().getInterpolation()===eT.FLAT,h=s.getProperty().getRepresentation(),g=r.getOpenGLMode(h,l);if((g===e.context.TRIANGLES||d&&!f||!p&&f||!p&&g===e.context.LINES)&&(u=!0),s.getProperty().getLighting()&&u){o=0;const C=a.getLightsByReference();for(let S=0;S<C.length;++S){const T=C[S];T.getSwitch()>0&&(i++,o===0&&(o=1)),o===1&&(i>1||T.getIntensity()!==1||!T.lightTypeIsHeadLight())&&(o=2),o<3&&T.getPositional()&&(o=3)}}let y=!1;const m=e.lastBoundBO.getReferenceByName("lastLightComplexity"),b=e.lastBoundBO.getReferenceByName("lastLightCount");return(m!==o||b!==i)&&(e.lastBoundBO.set({lastLightComplexity:o},!0),e.lastBoundBO.set({lastLightCount:i},!0),y=!0),(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(y=!0),e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||r.getShaderSourceTime().getMTime()<e.renderable.getMTime()||r.getShaderSourceTime().getMTime()<e.currentInput.getMTime()||r.getShaderSourceTime().getMTime()<e.selectionStateChanged.getMTime()||y?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,!0):!1},t.invokeShaderCallbacks=(r,a,s)=>{const o=e.renderable.getViewSpecificProperties().ShadersCallbacks;o&&o.forEach(i=>{i.callback(i.userData,r,a,s)})},t.setMapperShaderParameters=(r,a,s)=>{if(r.getProgram().isUniformUsed("PrimitiveIDOffset")&&r.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),r.getProgram().isUniformUsed("VertexIDOffset")&&r.getProgram().setUniformi("VertexIDOffset",e.vertexIDOffset),r.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){const l=e.lastBoundBO.getReferenceByName("lastLightComplexity");r.getProgram().isAttributeUsed("vertexMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"vertexMC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||xi("Error setting vertexMC in shader VAO.")),r.getProgram().isAttributeUsed("normalMC")&&r.getCABO().getNormalOffset()&&l>0?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"normalMC",r.getCABO().getNormalOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||xi("Error setting normalMC in shader VAO."):r.getVAO().removeAttributeArray("normalMC"),e.renderable.getCustomShaderAttributes().forEach((c,u)=>{r.getProgram().isAttributeUsed(`${c}MC`)&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),`${c}MC`,r.getCABO().getCustomData()[u].offset,r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getCustomData()[u].components,!1)||xi(`Error setting ${c}MC in shader VAO.`))}),r.getProgram().isAttributeUsed("tcoordMC")&&r.getCABO().getTCoordOffset()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"tcoordMC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getTCoordComponents(),!1)||xi("Error setting tcoordMC in shader VAO."):r.getVAO().removeAttributeArray("tcoordMC"),r.getProgram().isAttributeUsed("scalarColor")&&r.getCABO().getColorComponents()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO().getColorBO(),"scalarColor",r.getCABO().getColorOffset(),r.getCABO().getColorBOStride(),e.context.UNSIGNED_BYTE,4,!0)||xi("Error setting scalarColor in shader VAO."):r.getVAO().removeAttributeArray("scalarColor"),r.getAttributeUpdateTime().modified()}if(e.renderable.getNumberOfClippingPlanes()){const l=e.renderable.getNumberOfClippingPlanes(),c=[],f=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,d=f?Un(e.tmpMat4,s.getMatrix()):s.getMatrix();f&&($t(d,d),Ut(d,d,f),$t(d,d));for(let p=0;p<l;p++){const h=[];e.renderable.getClippingPlaneInDataCoords(d,p,h);for(let g=0;g<4;g++)c.push(h[g])}r.getProgram().setUniformi("numClipPlanes",l),r.getProgram().setUniform4fv("clipPlanes",c)}e.internalColorTexture&&r.getProgram().isUniformUsed("texture1")&&r.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());const o=e.openGLActor.getActiveTextures();if(o)for(let l=0;l<o.length;++l){const u=o[l].getTextureUnit(),f=`texture${u+1}`;r.getProgram().isUniformUsed(f)&&r.getProgram().setUniformi(f,u)}if(e.haveSeenDepthRequest&&r.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),r.getProgram().isUniformUsed("coffset")){const l=t.getCoincidentParameters(a,s);r.getProgram().setUniformf("coffset",l.offset),r.getProgram().isUniformUsed("cfactor")&&r.getProgram().setUniformf("cfactor",l.factor)}r.setMapperShaderParameters(a,s,e._openGLRenderer.getTiledSizeAndOrigin());const i=e._openGLRenderer.getSelector();r.getProgram().setUniform3fArray("mapperIndex",i?i.getPropColorValue():[0,0,0]),r.getProgram().setUniformi("picking",i?i.getCurrentPass()+1:0)},t.setLightingShaderParameters=(r,a,s)=>{const o=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(o<2)return;const i=r.getProgram();let l=0;const c=a.getLightsByReference();for(let d=0;d<c.length;++d){const p=c[d];if(p.getSwitch()>0){const g=p.getColorByReference(),y=p.getIntensity();e.lightColor[0]=g[0]*y,e.lightColor[1]=g[1]*y,e.lightColor[2]=g[2]*y;const m=p.getDirection(),b=a.getActiveCamera().getViewMatrix(),C=[...m];p.lightTypeIsSceneLight()&&(C[0]=b[0]*m[0]+b[1]*m[1]+b[2]*m[2],C[1]=b[4]*m[0]+b[5]*m[1]+b[6]*m[2],C[2]=b[8]*m[0]+b[9]*m[1]+b[10]*m[2],ts(C)),e.lightDirection[0]=C[0],e.lightDirection[1]=C[1],e.lightDirection[2]=C[2],ts(e.lightDirection),i.setUniform3fArray(`lightColor${l}`,e.lightColor),i.setUniform3fArray(`lightDirectionVC${l}`,e.lightDirection),l++}}if(o<3)return;const f=a.getActiveCamera().getViewMatrix();$t(f,f),l=0;for(let d=0;d<c.length;++d){const p=c[d];if(p.getSwitch()>0){const g=p.getTransformedPosition(),y=new Float64Array(3);It(y,g,f),i.setUniform3fArray(`lightAttenuation${l}`,p.getAttenuationValuesByReference()),i.setUniformi(`lightPositional${l}`,p.getPositional()),i.setUniformf(`lightExponent${l}`,p.getExponent()),i.setUniformf(`lightConeAngle${l}`,p.getConeAngle()),i.setUniform3fArray(`lightPositionVC${l}`,[y[0],y[1],y[2]]),l++}}};function n(r,a,s){return a.identity(s),r.reduce((o,i,l)=>l===0?i?a.copy(o,i):a.identity(o):i?a.multiply(o,o,i):o,s)}t.setCameraShaderParameters=(r,a,s)=>{const o=r.getProgram(),i=e.openGLCamera.getKeyMatrices(a),l=a.getActiveCamera(),c=e.openGLCamera.getKeyMatrixTime().getMTime(),u=o.getLastCameraMTime(),d=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,p=s.getIsIdentity(),h=p?{mcwc:null,normalMatrix:null}:e.openGLActor.getKeyMatrices();if(s.getCoordinateSystem()===E6.DISPLAY){const g=e._openGLRenderer.getTiledSizeAndOrigin();ct(e.tmpMat4),e.tmpMat4[0]=2/g.usize,e.tmpMat4[12]=-1,e.tmpMat4[5]=2/g.vsize,e.tmpMat4[13]=-1,Ut(e.tmpMat4,e.tmpMat4,d),o.setUniformMatrix("MCPCMatrix",e.tmpMat4)}else o.setUniformMatrix("MCPCMatrix",n([i.wcpc,h.mcwc,d],vf,e.tmpMat4));o.isUniformUsed("MCVCMatrix")&&o.setUniformMatrix("MCVCMatrix",n([i.wcvc,h.mcwc,d],vf,e.tmpMat4)),o.isUniformUsed("normalMatrix")&&o.setUniformMatrix3x3("normalMatrix",n([i.normalMatrix,h.normalMatrix],aU,e.tmpMat3)),u!==c&&(o.isUniformUsed("cameraParallel")&&o.setUniformi("cameraParallel",l.getParallelProjection()),o.setLastCameraMTime(c)),p||o.setLastCameraMTime(0)},t.setPropertyShaderParameters=(r,a,s)=>{const o=r.getProgram();let i=s.getProperty(),l=i.getOpacity(),c=e.drawingEdges?i.getEdgeColorByReference():i.getAmbientColorByReference(),u=e.drawingEdges?i.getEdgeColorByReference():i.getDiffuseColorByReference(),f=e.drawingEdges?1:i.getAmbient(),d=e.drawingEdges?0:i.getDiffuse(),p=e.drawingEdges?0:i.getSpecular();const h=i.getSpecularPower();o.setUniformf("opacityUniform",l),o.setUniform3fArray("ambientColorUniform",c),o.setUniform3fArray("diffuseColorUniform",u),o.setUniformf("ambient",f),o.setUniformf("diffuse",d);const g=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(g<1)return;let y=i.getSpecularColorByReference();if(o.setUniform3fArray("specularColorUniform",y),o.setUniformf("specularPowerUniform",h),o.setUniformf("specular",p),o.isUniformUsed("ambientIntensityBF")){if(i=s.getBackfaceProperty(),l=i.getOpacity(),c=i.getAmbientColor(),f=i.getAmbient(),u=i.getDiffuseColor(),d=i.getDiffuse(),y=i.getSpecularColor(),p=i.getSpecular(),o.setUniformf("ambientIntensityBF",f),o.setUniformf("diffuseIntensityBF",d),o.setUniformf("opacityUniformBF",l),o.setUniform3fArray("ambientColorUniformBF",c),o.setUniform3fArray("diffuseColorUniformBF",u),g<1)return;o.setUniformf("specularIntensityBF",p),o.setUniform3fArray("specularColorUniformBF",y),o.setUniformf("specularPowerUniformBF",h)}},t.updateMaximumPointCellIds=(r,a)=>{var i,l,c,u;const s=e._openGLRenderer.getSelector();if(!s)return;if((l=(i=e.selectionWebGLIdsToVTKIds)==null?void 0:i.points)!=null&&l.length){const f=e.selectionWebGLIdsToVTKIds.points.length;s.setMaximumPointId(f-1)}if((u=(c=e.selectionWebGLIdsToVTKIds)==null?void 0:c.cells)!=null&&u.length){const f=e.selectionWebGLIdsToVTKIds.cells.length;s.setMaximumCellId(f-1)}s.getFieldAssociation()===E0.FIELD_ASSOCIATION_POINTS&&(e.pointPicking=!0)},t.renderPieceStart=(r,a)=>{e.primitiveIDOffset=0,e.vertexIDOffset=0;const s=k6(e._openGLRenderer);if(e.lastSelectionState!==s&&(e.selectionStateChanged.modified(),e.lastSelectionState=s),e._openGLRenderer.getSelector())switch(s){default:e._openGLRenderer.getSelector().renderProp(a)}t.updateBufferObjects(r,a),e.renderable.getColorTextureMap()&&e.internalColorTexture.activate(),e.lastBoundBO=null},t.renderPieceDraw=(r,a)=>{const s=a.getProperty().getRepresentation(),o=a.getProperty().getEdgeVisibility()&&s===Yl.SURFACE,i=e._openGLRenderer.getSelector(),l=i&&i.getFieldAssociation()===E0.FIELD_ASSOCIATION_POINTS&&(e.lastSelectionState===Ur.ID_LOW24||e.lastSelectionState===Ur.ID_HIGH24);for(let c=ar.Start;c<ar.End;c++)e.primitives[c].setPointPicking(l),e.primitives[c].getCABO().getElementCount()&&(e.drawingEdges=o&&(c===ar.TrisEdges||c===ar.TriStripsEdges),(!e.drawingEdges||!(e.renderDepth||e.lastSelectionState>=0))&&(e.lastBoundBO=e.primitives[c],e.primitiveIDOffset+=e.primitives[c].drawArrays(r,a,s,t),e.vertexIDOffset+=e.primitives[c].getCABO().getElementCount()))},t.renderPieceFinish=(r,a)=>{e.LastBoundBO&&e.LastBoundBO.getVAO().release(),e.renderable.getColorTextureMap()&&e.internalColorTexture.deactivate()},t.renderPiece=(r,a)=>{if(t.invokeEvent(T6),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent(x6),!e.currentInput){xi("No input!");return}if(!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues())return;const s=e.context,o=a.getProperty().getBackfaceCulling(),i=a.getProperty().getFrontfaceCulling();!o&&!i?e._openGLRenderWindow.disableCullFace():i?(e._openGLRenderWindow.enableCullFace(),s.cullFace(s.FRONT)):(e._openGLRenderWindow.enableCullFace(),s.cullFace(s.BACK)),t.renderPieceStart(r,a),t.renderPieceDraw(r,a),t.renderPieceFinish(r,a)},t.computeBounds=(r,a)=>{if(!t.getInput()){fu(e.bounds);return}e.bounds=t.getInput().getBounds()},t.updateBufferObjects=(r,a)=>{t.getNeedToRebuildBufferObjects(r,a)&&t.buildBufferObjects(r,a)},t.getNeedToRebuildBufferObjects=(r,a)=>{const s=e.VBOBuildTime.getMTime();return s<t.getMTime()||s<e.renderable.getMTime()||s<a.getMTime()||s<e.currentInput.getMTime()},t.buildBufferObjects=(r,a)=>{const s=e.currentInput;if(s===null)return;e.renderable.mapScalars(s,1);const o=e.renderable.getColorMapColors();e.haveCellScalars=!1;const i=e.renderable.getScalarMode();e.renderable.getScalarVisibility()&&(i===Kd.USE_CELL_DATA||i===Kd.USE_CELL_FIELD_DATA||i===Kd.USE_FIELD_DATA||!s.getPointData().getScalars())&&i!==Kd.USE_POINT_FIELD_DATA&&o&&(e.haveCellScalars=!0);let l=a.getProperty().getInterpolation()!==eT.FLAT?s.getPointData().getNormals():null;l===null&&s.getCellData().getNormals()&&(e.haveCellNormals=!0,l=s.getCellData().getNormals());const c=a.getProperty().getRepresentation();let u=s.getPointData().getTCoords();if(e.openGLActor.getActiveTextures()||(u=null),e.renderable.getColorCoordinates()){u=e.renderable.getColorCoordinates(),e.internalColorTexture||(e.internalColorTexture=Gt.newInstance({resizable:!0}));const d=e.internalColorTexture;d.setMinificationFilter(tT.NEAREST),d.setMagnificationFilter(tT.NEAREST),d.setWrapS(nT.CLAMP_TO_EDGE),d.setWrapT(nT.CLAMP_TO_EDGE),d.setOpenGLRenderWindow(e._openGLRenderWindow);const p=e.renderable.getColorTextureMap(),h=p.getExtent(),g=p.getPointData().getScalars();d.create2DFromRaw(h[1]-h[0]+1,h[3]-h[2]+1,g.getNumberOfComponents(),g.getDataType(),g.getData()),d.activate(),d.sendParameters(),d.deactivate()}const f=`${s.getMTime()}A${c}B${s.getMTime()}C${l?l.getMTime():1}D${o?o.getMTime():1}E${a.getProperty().getEdgeVisibility()}F${u?u.getMTime():1}`;if(e.VBOBuildString!==f){const p={points:s.getPoints(),normals:l,tcoords:u,colors:o,cellOffset:0,vertexOffset:0,haveCellScalars:e.haveCellScalars,haveCellNormals:e.haveCellNormals,customAttributes:e.renderable.getCustomShaderAttributes().map(y=>s.getPointData().getArrayByName(y))};e.renderable.getPopulateSelectionSettings()&&(e.selectionWebGLIdsToVTKIds={points:null,cells:null});const h=[{inRep:"verts",cells:s.getVerts()},{inRep:"lines",cells:s.getLines()},{inRep:"polys",cells:s.getPolys()},{inRep:"strips",cells:s.getStrips()},{inRep:"polys",cells:s.getPolys()},{inRep:"strips",cells:s.getStrips()}],g=a.getProperty().getEdgeVisibility()&&c===Yl.SURFACE;for(let y=ar.Start;y<ar.End;y++)y!==ar.TrisEdges&&y!==ar.TriStripsEdges?(p.cellOffset+=e.primitives[y].getCABO().createVBO(h[y].cells,h[y].inRep,c,p,e.selectionWebGLIdsToVTKIds),p.vertexOffset+=e.primitives[y].getCABO().getElementCount()):g?e.primitives[y].getCABO().createVBO(h[y].cells,h[y].inRep,Yl.WIREFRAME,{...p,tcoords:null,colors:null,haveCellScalars:!1,haveCellNormals:!1}):e.primitives[y].releaseGraphicsResources();e.renderable.getPopulateSelectionSettings()&&(e.renderable.setSelectionWebGLIdsToVTKIds(e.selectionWebGLIdsToVTKIds),t.updateMaximumPointCellIds()),e.VBOBuildTime.modified(),e.VBOBuildString=f}},t.getAllocatedGPUMemoryInBytes=()=>{let r=0;return e.primitives.forEach(a=>{r+=a.getAllocatedGPUMemoryInBytes()}),r}}const M6={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null,tmpMat4:null,ambientColor:[],diffuseColor:[],specularColor:[],lightColor:[],lightDirection:[],lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastSelectionState:Ur.MIN_KNOWN_PASS-1,selectionStateChanged:null,selectionWebGLIdsToVTKIds:null,pointPicking:!1};function QR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,M6,n),gn.extend(t,e,n),io.implementReplaceShaderCoincidentOffset(t,e,n),io.implementBuildShadersWithReplacements(t,e,n),e.primitives=[],e.primTypes=ar,e.tmpMat3=Oa(new Float64Array(9)),e.tmpMat4=ct(new Float64Array(16));for(let r=ar.Start;r<ar.End;r++)e.primitives[r]=Ba.newInstance(),e.primitives[r].setPrimitiveType(r),e.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);Dn(t,e,["context"]),e.VBOBuildTime={},dn(e.VBOBuildTime,{mtime:0}),e.selectionStateChanged={},dn(e.selectionStateChanged,{mtime:0}),O6(t,e)}const e_=Ft(QR,"vtkOpenGLPolyDataMapper");var lv={newInstance:e_,extend:QR};Xn("vtkMapper",e_);const{ColorMode:R6,ScalarMode:Ei,GetArray:k0}=nv;function _6(t,e){e.classHierarchy.push("vtkMapper2D"),t.createDefaultLookupTable=()=>{e.lookupTable=Hu.newInstance()},t.getColorModeAsString=()=>A.enumToString(R6,e.colorMode),t.setColorModeToDefault=()=>t.setColorMode(0),t.setColorModeToMapScalars=()=>t.setColorMode(1),t.setColorModeToDirectScalars=()=>t.setColorMode(2),t.getScalarModeAsString=()=>A.enumToString(Ei,e.scalarMode),t.setScalarModeToDefault=()=>t.setScalarMode(0),t.setScalarModeToUsePointData=()=>t.setScalarMode(1),t.setScalarModeToUseCellData=()=>t.setScalarMode(2),t.setScalarModeToUsePointFieldData=()=>t.setScalarMode(3),t.setScalarModeToUseCellFieldData=()=>t.setScalarMode(4),t.setScalarModeToUseFieldData=()=>t.setScalarMode(5),t.getAbstractScalars=(n,r,a,s,o)=>{if(!n||!e.scalarVisibility)return{scalars:null,cellFLag:!1};let i=null,l=!1;if(r===Ei.DEFAULT)i=n.getPointData().getScalars(),i||(i=n.getCellData().getScalars(),l=!0);else if(r===Ei.USE_POINT_DATA)i=n.getPointData().getScalars();else if(r===Ei.USE_CELL_DATA)i=n.getCellData().getScalars(),l=!0;else if(r===Ei.USE_POINT_FIELD_DATA){const c=n.getPointData();a===k0.BY_ID?i=c.getArrayByIndex(s):i=c.getArrayByName(o)}else if(r===Ei.USE_CELL_FIELD_DATA){const c=n.getCellData();l=!0,a===k0.BY_ID?i=c.getArrayByIndex(s):i=c.getArrayByName(o)}else if(r===Ei.USE_FIELD_DATA){const c=n.getFieldData();a===k0.BY_ID?i=c.getArrayByIndex(s):i=c.getArrayByName(o)}return{scalars:i,cellFlag:l}},t.getLookupTable=()=>(e.lookupTable||t.createDefaultLookupTable(),e.lookupTable),t.getMTime=()=>{let n=e.mtime;if(e.lookupTable!==null){const r=e.lookupTable.getMTime();n=r>n?r:n}return n},t.mapScalars=(n,r)=>{const a=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;if(!a){e.colorMapColors=null;return}const s=`${t.getMTime()}${a.getMTime()}${r}`;if(e.colorBuildString===s)return;e.useLookupTableScalarRange||t.getLookupTable().setRange(e.scalarRange[0],e.scalarRange[1]);const o=t.getLookupTable();o&&(o.build(),e.colorMapColors=o.mapScalars(a,e.colorMode,e.fieldDataTupleId)),e.colorBuildString=`${t.getMTime()}${a.getMTime()}${r}`},t.getPrimitiveCount=()=>{const n=t.getInputData();return{points:n.getPoints().getNumberOfValues()/3,verts:n.getVerts().getNumberOfValues()-n.getVerts().getNumberOfCells(),lines:n.getLines().getNumberOfValues()-2*n.getLines().getNumberOfCells(),triangles:n.getPolys().getNumberOfValues()-3*n.getPolys().getNumberOfCells()}}}const V6={static:!1,lookupTable:null,scalarVisibility:!1,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,transformCoordinate:null,viewSpecificProperties:null,customShaderAttributes:[]};function t_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,V6,n),uR.extend(t,e,n),A.get(t,e,["colorMapColors"]),A.setGet(t,e,["arrayAccessMode","colorByArrayName","colorMode","lookupTable","renderTime","scalarMode","scalarVisibility","static","transformCoordinate","useLookupTableScalarRange","viewSpecificProperties","customShaderAttributes"]),A.setGetArray(t,e,["scalarRange"],2),e.viewSpecificProperties||(e.viewSpecificProperties={}),_6(t,e)}const D6=A.newInstance(t_,"vtkMapper2D");var L6={newInstance:D6,extend:t_},N6=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

uniform int PrimitiveIDOffset;

// Texture coordinates
//VTK::TCoord::Dec

// Scalar coloring
//VTK::Color::Dec

// Depth Peeling
//VTK::DepthPeeling::Dec

// picking support
//VTK::Picking::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Color::Impl
  //VTK::TCoord::Impl

  //VTK::DepthPeeling::Impl
  //VTK::Picking::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }
}
`,B6=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

// all variables that represent positions or directions have a suffix
// indicating the coordinate system they are in. The possible values are
// MC - Model Coordinates
// WC - WC world coordinates
// VC - View Coordinates
// DC - Display Coordinates

in vec4 vertexWC;

// frag position in VC
//VTK::PositionVC::Dec

// material property values
//VTK::Color::Dec

// Texture coordinates
//VTK::TCoord::Dec

// Apple Bug
//VTK::PrimID::Dec

uniform mat4 WCVCMatrix;  // World to view matrix

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  gl_Position = WCVCMatrix*vertexWC;

  //VTK::TCoord::Impl

  //VTK::Color::Impl

  //VTK::PositionVC::Impl
}
`;const n_={BACKGROUND:0,FOREGROUND:1};var r_={DisplayLocation:n_};const{primTypes:Ga}=Ba,{ScalarMode:jd}=L6,{vtkErrorMacro:Yd}=nr,F6={type:"StartEvent"},$6={type:"EndEvent"};function U6(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper2D"),t.buildPass=r=>{r&&(e.openGLActor2D=t.getFirstAncestorOfType("vtkOpenGLActor2D"),e._openGLRenderer=e.openGLActor2D.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()))},t.overlayPass=r=>{r&&t.render()},t.getShaderTemplate=(r,a,s)=>{r.Vertex=B6,r.Fragment=N6,r.Geometry=""},t.render=()=>{const r=e._openGLRenderWindow.getContext();if(e.context!==r){e.context=r;for(let o=Ga.Start;o<Ga.End;o++)e.primitives[o].setOpenGLRenderWindow(e._openGLRenderWindow)}const a=e.openGLActor2D.getRenderable(),s=e._openGLRenderer.getRenderable();t.renderPiece(s,a)},t.renderPiece=(r,a)=>{if(t.invokeEvent(F6),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent($6),!e.currentInput){Yd("No input!");return}!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues()||(t.renderPieceStart(r,a),t.renderPieceDraw(r,a),t.renderPieceFinish(r,a))},t.renderPieceStart=(r,a)=>{if(e.primitiveIDOffset=0,e._openGLRenderer.getSelector())switch(e._openGLRenderer.getSelector().getCurrentPass()){default:e._openGLRenderer.getSelector().renderProp(a)}t.updateBufferObjects(r,a),e.lastBoundBO=null},t.getNeedToRebuildShaders=(r,a,s)=>r.getShaderSourceTime().getMTime()<e.renderable.getMTime()||r.getShaderSourceTime().getMTime()<e.currentInput.getMTime(),t.updateBufferObjects=(r,a)=>{t.getNeedToRebuildBufferObjects(r,a)&&t.buildBufferObjects(r,a)},t.getNeedToRebuildBufferObjects=(r,a)=>{const s=e.VBOBuildTime.getMTime();return!!(s<t.getMTime()||s<e._openGLRenderWindow.getMTime()||s<e.renderable.getMTime()||s<a.getMTime()||s<e.currentInput.getMTime()||e.renderable.getTransformCoordinate()&&s<r.getMTime())},t.buildBufferObjects=(r,a)=>{const s=e.currentInput;if(s===null)return;e.renderable.mapScalars(s,a.getProperty().getOpacity());const o=e.renderable.getColorMapColors();e.haveCellScalars=!1;const i=e.renderable.getScalarMode();e.renderable.getScalarVisibility()&&(i===jd.USE_CELL_DATA||i===jd.USE_CELL_FIELD_DATA||i===jd.USE_FIELD_DATA||!s.getPointData().getScalars())&&i!==jd.USE_POINT_FIELD_DATA&&o&&(e.haveCellScalars=!0);const l=a.getProperty().getRepresentation();let c=s.getPointData().getTCoords();e.openGLActor2D.getActiveTextures()||(c=null);const u=e.renderable.getTransformCoordinate(),d=r.getRenderWindow().getViews()[0].getViewportSize(r),p=`${s.getMTime()}A${l}B${s.getMTime()}C${o?o.getMTime():1}D${c?c.getMTime():1}E${u?r.getMTime():1}F${d}`;if(e.VBOBuildString!==p){let h=s.getPoints();if(u){const y=ih.newInstance(),m=h.getNumberOfPoints();y.setNumberOfPoints(m);const b=[];for(let C=0;C<m;++C){h.getPoint(C,b),u.setValue(b);const S=u.getComputedDoubleViewportValue(r);y.setPoint(C,S[0],S[1],0)}h=y}const g={points:h,tcoords:c,colors:o,cellOffset:0,haveCellScalars:e.haveCellSCalars,customAttributes:e.renderable.getCustomShaderAttributes().map(y=>s.getPointData().getArrayByName(y))};g.cellOffset+=e.primitives[Ga.Points].getCABO().createVBO(s.getVerts(),"verts",l,g),g.cellOffset+=e.primitives[Ga.Lines].getCABO().createVBO(s.getLines(),"lines",l,g),g.cellOffset+=e.primitives[Ga.Tris].getCABO().createVBO(s.getPolys(),"polys",l,g),g.cellOffset+=e.primitives[Ga.TriStrips].getCABO().createVBO(s.getStrips(),"strips",l,g),e.VBOBuildTime.modified(),e.VBOBuildString=p}},t.renderPieceDraw=(r,a)=>{const s=a.getProperty().getRepresentation();e.context.depthMask(!0);for(let i=Ga.Start;i<Ga.End;i++)e.primitives[i].getCABO().getElementCount()&&(e.lastBoundBO=e.primitives[i],e.primitiveIDOffset+=e.primitives[i].drawArrays(r,a,s,t))},t.renderPieceFinish=(r,a)=>{e.lastBoundBO&&e.lastBoundBO.getVAO().release()},t.replaceShaderValues=(r,a,s)=>{t.replaceShaderColor(r,a,s),t.replaceShaderTCoord(r,a,s),t.replaceShaderPicking(r,a,s),t.replaceShaderPositionVC(r,a,s)},t.replaceShaderColor=(r,a,s)=>{let o=r.Vertex,i=r.Geometry,l=r.Fragment;e.haveCellScalars&&(l=ue.substitute(l,"//VTK::Color::Dec",["uniform samplerBuffer texture1;"]).result,l=ue.substitute(l,"//VTK::Color::Impl",["gl_FragData[0] = texelFetchBuffer(texture1, gl_PrimitiveID + PrimitiveIDOffset);"]).result),e.lastBoundBO.getCABO().getColorComponents()!==0?(o=ue.substitute(o,"//VTK::Color::Dec",["in vec4 diffuseColor;","out vec4 fcolorVSOutput;"]).result,o=ue.substitute(o,"//VTK::Color::Impl",["fcolorVSOutput = diffuseColor;"]).result,i=ue.substitute(i,"//VTK::Color::Dec",[`in vec4 fcolorVSOutput[];
`,"out vec4 fcolorGSOutput;"]).result,i=ue.substitute(i,"//VTK::Color::Impl",["fcolorGSOutput = fcolorVSOutput[i];"]).result,l=ue.substitute(l,"//VTK::Color::Dec",["in vec4 fcolorVSOutput;"]).result,l=ue.substitute(l,"//VTK::Color::Impl",["gl_FragData[0] = fcolorVSOutput;"]).result):(l=ue.substitute(l,"//VTK::Color::Dec",["uniform vec4 diffuseColor;"]).result,l=ue.substitute(l,"//VTK::Color::Impl",["gl_FragData[0] = diffuseColor;"]).result),r.Vertex=o,r.Geometry=i,r.Fragment=l},t.replaceShaderTCoord=(r,a,s)=>{if(e.lastBoundBO.getCABO().getTCoordOffset()){let o=r.Vertex,i=r.Geometry,l=r.Fragment;const c=e.lastBoundBO.getCABO().getTCoordComponents();c===1?(o=ue.substitute(o,"//VTK::TCoord::Dec",["in float tcoordMC;","out float tcoordVCVSOutput;"]).result,o=ue.substitute(o,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,i=ue.substitute(i,"//VTK::TCoord::Dec",[`in float tcoordVCVSOutput[];
`,"out float tcoordVCGSOutput;"]).result,i=ue.substitute(i,["//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,l=ue.substitute(l,"//VTK::TCoord::Dec",["in float tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,l=ue.substitute(l,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, vec2(tcoordVCVSOutput,0));"]).result):c===2&&(o=ue.substitute(o,"//VTK::TCoord::Dec",["in vec2 tcoordMC;","out vec2 tcoordVCVSOutput;"]).result,o=ue.substitute(o,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,i=ue.substitute(i,"//VTK::TCoord::Dec",[`in vec2 tcoordVCVSOutput[];
`,"out vec2 tcoordVCGSOutput;"]).result,i=ue.substitute(i,"//VTK::TCoord::Impl",["tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,l=ue.substitute(l,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,l=ue.substitute(l,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, tcoordVCVSOutput.st);"]).result),e.haveCellScalars&&(i=ue.substitute(i,"//VTK::PrimID::Impl",["gl_PrimitiveID = gl_PrimitiveIDIn;"]).result),r.Vertex=o,r.Geometry=i,r.Fragment=l}},t.replaceShaderPicking=(r,a,s)=>{let o=r.Fragment;o=ue.substitute(o,"//VTK::Picking::Dec",["uniform vec3 mapperIndex;","uniform int picking;"]).result,o=ue.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result,r.Fragment=o},t.replaceShaderPositionVC=(r,a,s)=>{e.lastBoundBO.replaceShaderPositionVC(r,a,s)},t.invokeShaderCallbacks=(r,a,s)=>{const o=e.renderable.getViewSpecificProperties().ShadersCallbacks;o&&o.forEach(i=>{i.callback(i.userData,r,a,s)})},t.setMapperShaderParameters=(r,a,s)=>{if(r.getProgram().isUniformUsed("PrimitiveIDOffset")&&r.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),r.getProgram().isAttributeUsed("vertexWC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"vertexWC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||Yd("Error setting vertexWC in shader VAO.")),r.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){e.renderable.getCustomShaderAttributes().forEach((l,c)=>{r.getProgram().isAttributeUsed(`${l}MC`)&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),`${l}MC`,r.getCABO().getCustomData()[c].offset,r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getCustomData()[c].components,!1)||Yd(`Error setting ${l}MC in shader VAO.`))}),r.getProgram().isAttributeUsed("tcoordMC")&&r.getCABO().getTCoordOffset()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"tcoordMC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getTCoordComponents(),!1)||Yd("Error setting tcoordMC in shader VAO."):r.getVAO().removeAttributeArray("tcoordMC"),e.internalColorTexture&&r.getProgram().isUniformUsed("texture1")&&r.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());const o=e.openGLActor2D.getActiveTextures();if(o)for(let l=0;l<o.length;++l){const u=o[l].getTextureUnit(),f=`texture${u+1}`;r.getProgram().isUniformUsed(f)&&r.getProgram().setUniformi(f,u)}r.setMapperShaderParameters(a,s,e._openGLRenderer.getTiledSizeAndOrigin());const i=e._openGLRenderer.getSelector();r.getProgram().setUniform3fArray("mapperIndex",i?i.getPropColorValue():[0,0,0]),r.getProgram().setUniformi("picking",i?i.getCurrentPass()+1:0)}},t.setPropertyShaderParameters=(r,a,s)=>{const o=e.renderable.getColorMapColors();if(!o||o.getNumberOfComponents()===0){const i=r.getProgram(),l=s.getProperty(),c=l.getOpacity(),u=l.getColor(),f=[u[0],u[1],u[2],c];i.setUniform4f("diffuseColor",f)}},t.setLightingShaderParameters=(r,a,s)=>{};function n(r,a,s){return a.identity(s),r.reduce((o,i,l)=>l===0?i?a.copy(o,i):a.identity(o):i?a.multiply(o,o,i):o,s)}t.setCameraShaderParameters=(r,a,s)=>{const o=r.getProgram(),l=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,u=a.getRenderWindow().getViews()[0].getViewportSize(a),f=a.getViewport(),d=s.getActualPositionCoordinate().getComputedDoubleViewportValue(a),p=[0,0,1,1],h=[0,0,1,1];if(h[0]=f[0]>=p[0]?f[0]:p[0],h[1]=f[1]>=p[1]?f[1]:p[1],h[2]=f[2]<=p[2]?f[2]:p[2],h[3]=f[3]<=p[3]?f[3]:p[3],h[0]>=h[2]||h[1]>=h[3])return;u[0]=Wu(u[0]*(h[2]-h[0])/(f[2]-f[0])),u[1]=Wu(u[1]*(h[3]-h[1])/(f[3]-f[1]));const g=e._openGLRenderer.getParent().getSize(),y=Wu(d[0]-(h[0]-f[0])*g[0]),m=Wu(d[1]-(h[1]-f[1])*g[1]),b=-y;let C=-y+u[0];const S=-m;let T=-m+u[1];b===C&&(C=b+1),S===T&&(T=S+1);const w=ct(new Float64Array(16));w[0]=2/(C-b),w[1*4+1]=2/(T-S),w[0*4+3]=-1*(C+b)/(C-b),w[1*4+3]=-1*(T+S)/(T-S),w[2*4+2]=0,w[2*4+3]=s.getProperty().getDisplayLocation()===n_.FOREGROUND?-1:1,w[3*4+3]=1,$t(w,w),o.setUniformMatrix("WCVCMatrix",n([w,l],vf,e.tmpMat4))},t.getAllocatedGPUMemoryInBytes=()=>{let r=0;return e.primitives.forEach(a=>{r+=a.getAllocatedGPUMemoryInBytes()}),r}}const A6={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null};function W6(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,A6,n),gn.extend(t,e,n),io.implementReplaceShaderCoincidentOffset(t,e,n),io.implementBuildShadersWithReplacements(t,e,n),e.primitives=[],e.primTypes=Ga,e.tmpMat4=ct(new Float64Array(16));for(let r=Ga.Start;r<Ga.End;r++)e.primitives[r]=Ba.newInstance(),e.primitives[r].setPrimitiveType(r),e.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);Dn(t,e,["context"]),e.VBOBuildTime={},dn(e.VBOBuildTime,{mtime:0}),U6(t,e)}const I6=Ft(W6,"vtkOpenGLPolyDataMapper2D");Xn("vtkMapper2D",I6);const{VectorMode:P6}=rv;function O0(t,e){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor,t.font=`${e.fontStyle} ${e.fontSize}px ${e.fontFamily}`}function a_(t,e){return n=>{const r=n.getLastSize(),a=(r[0]/700)**.8,s=(r[1]/700)**.8,o=Math.min(a,s),i=n.getAxisTextStyle(),l=n.getTickTextStyle();Object.assign(i,e.axisTextStyle),Object.assign(l,e.tickTextStyle),i.fontSize=Math.max(24*o,12),n.getLastAspectRatio()>1?l.fontSize=Math.max(20*o,10):l.fontSize=Math.max(16*o,10);const c=n.updateTextureAtlas();n.setTopTitle(!1);const u=n.getBoxSizeByReference();if(n.getLastAspectRatio()>1)n.setTickLabelPixelOffset(.3*l.fontSize),c.titleWidth<=c.tickWidth+n.getTickLabelPixelOffset()+.8*l.fontSize?(n.setTopTitle(!0),n.setAxisTitlePixelOffset(.2*l.fontSize),u[0]=2*(c.tickWidth+n.getTickLabelPixelOffset()+.8*l.fontSize)/r[0],n.setBoxPosition([.98-u[0],-.92])):(n.setAxisTitlePixelOffset(.2*l.fontSize),u[0]=2*(c.titleHeight+n.getAxisTitlePixelOffset()+c.tickWidth+n.getTickLabelPixelOffset()+.8*l.fontSize)/r[0],n.setBoxPosition([.99-u[0],-.92])),u[1]=Math.max(1.2,Math.min(1.84/s,1.84));else{n.setAxisTitlePixelOffset(1.2*l.fontSize),n.setTickLabelPixelOffset(.1*l.fontSize);const f=2*(.8*l.fontSize+c.titleHeight+n.getAxisTitlePixelOffset())/r[1],d=2*c.tickWidth/r[0];u[0]=Math.min(1.9,Math.max(1.4,1.4*d*(n.getTicks().length+3))),u[1]=f,n.setBoxPosition([-.5*u[0],-.97])}n.recomputeBarSegments(c)}}function s_(t,e){return n=>{const r=n.getLastTickBounds(),a=rC().domain([r[0],r[1]]),s=a.ticks(5),o=a.tickFormat(5);n.setTicks(s),n.setTickStrings(s.map(o))}}function G6(t,e){e.classHierarchy.push("vtkScalarBarActorHelper"),t.setRenderable=a=>{e.renderable!==a&&(e.renderable=a,e.barActor.setProperty(a.getProperty()),e.barActor.setParentProp(a),e.barActor.setCoordinateSystemToDisplay(),e.tmActor.setProperty(a.getProperty()),e.tmActor.setParentProp(a),e.tmActor.setCoordinateSystemToDisplay(),e.generateTicks=a.generateTicks,e.axisTextStyle={...a.getAxisTextStyle()},e.tickTextStyle={...a.getTickTextStyle()},t.modified())},t.updateAPISpecificData=(a,s,o)=>{(e.lastSize[0]!==a[0]||e.lastSize[1]!==a[1])&&(e.lastSize[0]=a[0],e.lastSize[1]=a[1],e.lastAspectRatio=a[0]/a[1],e.forceUpdate=!0);const i=e.renderable.getScalarsToColors();if(!(!i||!e.renderable.getVisibility())&&(e.barMapper.setLookupTable(i),e.camera=s,e.renderWindow=o,e.forceUpdate||Math.max(i.getMTime(),t.getMTime(),e.renderable.getMTime())>e.lastRebuildTime.getMTime())){const l=i.getMappingRange();if(e.lastTickBounds=[...l],e.renderable.getGenerateTicks()(t),e.renderable.getAutomated())e.renderable.getAutoLayout()(t);else{e.axisTextStyle={...e.renderable.getAxisTextStyle()},e.tickTextStyle={...e.renderable.getTickTextStyle()},e.barPosition=[...e.renderable.getBarPosition()],e.barSize=[...e.renderable.getBarSize()],e.boxPosition=[...e.renderable.getBoxPosition()],e.boxSize=[...e.renderable.getBoxSize()],e.axisTitlePixelOffset=e.renderable.getAxisTitlePixelOffset(),e.tickLabelPixelOffset=e.renderable.getTickLabelPixelOffset();const c=t.updateTextureAtlas();t.recomputeBarSegments(c)}t.updatePolyDataForLabels(),t.updatePolyDataForBarSegments(),e.lastRebuildTime.modified(),e.forceUpdate=!1}},t.updateTextureAtlas=()=>{e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left";const a={},s=new Map;let o=0,i=1;O0(e.tmContext,e.axisTextStyle);let l=e.tmContext.measureText(e.renderable.getAxisLabel()),c={height:l.actualBoundingBoxAscent+2,startingHeight:i,width:l.width+2,textStyle:e.axisTextStyle};s.set(e.renderable.getAxisLabel(),c),i+=c.height,o=c.width,a.titleWidth=c.width,a.titleHeight=c.height,a.tickWidth=0,a.tickHeight=0,O0(e.tmContext,e.tickTextStyle);const u=[...t.getTickStrings(),"NaN","Below","Above"];for(let f=0;f<u.length;f++)s.has(u[f])||(l=e.tmContext.measureText(u[f]),c={height:l.actualBoundingBoxAscent+2,startingHeight:i,width:l.width+2,textStyle:e.tickTextStyle},s.set(u[f],c),i+=c.height,o<c.width&&(o=c.width),a.tickWidth<c.width&&(a.tickWidth=c.width),a.tickHeight<c.height&&(a.tickHeight=c.height));return o=ma(o),i=ma(i),s.forEach(f=>{f.tcoords=[0,(i-f.startingHeight-f.height)/i,f.width/o,(i-f.startingHeight-f.height)/i,f.width/o,(i-f.startingHeight)/i,0,(i-f.startingHeight)/i]}),e.tmCanvas.width=o,e.tmCanvas.height=i,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,o,i),s.forEach((f,d)=>{O0(e.tmContext,f.textStyle),e.tmContext.fillText(d,1,f.startingHeight+f.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified(),e._tmAtlas=s,a},t.computeBarSize=a=>{e.vertical=e.boxSize[1]>e.boxSize[0];const s=2*a.tickHeight/e.lastSize[1],o=[1,1];if(e.vertical){const i=2*(a.tickWidth+e.tickLabelPixelOffset)/e.lastSize[0];if(e.topTitle){const l=2*(a.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0]-i,e.barSize[1]=e.boxSize[1]-l}else{const l=2*(a.titleHeight+e.axisTitlePixelOffset)/e.lastSize[0];e.barSize[0]=e.boxSize[0]-l-i,e.barSize[1]=e.boxSize[1]}e.barPosition[0]=e.boxPosition[0]+i,e.barPosition[1]=e.boxPosition[1],o[1]=s}else{const i=(2*a.tickWidth-8)/e.lastSize[0],l=2*(a.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0],e.barPosition[0]=e.boxPosition[0],e.barSize[1]=e.boxSize[1]-l,e.barPosition[1]=e.boxPosition[1],o[0]=i}return o},t.recomputeBarSegments=a=>{var d,p,h,g;const s=t.computeBarSize(a);e.barSegments=[];const o=[0,0],i=e.vertical?1:0,l=e.vertical?.01:.02;function c(y,m){e.barSegments.push({corners:[[...o],[o[0]+s[0],o[1]],[o[0]+s[0],o[1]+s[1]],[o[0],o[1]+s[1]]],scalars:m,title:y}),o[i]+=s[i]+l}e.renderable.getDrawNanAnnotation()&&e.renderable.getScalarsToColors().getNanColor()&&c("NaN",[NaN,NaN,NaN,NaN]),e.renderable.getDrawBelowRangeSwatch()&&((p=(d=e.renderable.getScalarsToColors()).getUseBelowRangeColor)!=null&&p.call(d))&&c("Below",[-.1,-.1,-.1,-.1]);const u=(g=(h=e.renderable.getScalarsToColors()).getUseAboveRangeColor)==null?void 0:g.call(h);o[i]+=l;const f=s[i];s[i]=u?1-2*l-s[i]-o[i]:1-l-o[i],c("ticks",e.vertical?[0,0,.995,.995]:[0,.995,.995,0]),e.renderable.getDrawAboveRangeSwatch()&&u&&(s[i]=f,o[i]+=l,c("Above",[1.1,1.1,1.1,1.1]))};const n=new Float64Array(3);t.createPolyDataForOneLabel=(a,s,o,i,l,c)=>{const u=e._tmAtlas.get(a);if(!u)return;let f=c.ptIdx,d=c.cellIdx;n[0]=(.5*s[0]+.5)*e.lastSize[0],n[1]=(.5*s[1]+.5)*e.lastSize[1],n[2]=s[2],n[0]+=l[0],n[1]+=l[1];const p=[],h=i==="vertical"?[1,0]:[0,1];i==="vertical"?(p[0]=u.width,p[1]=-u.height,o[0]==="middle"?n[1]-=u.width/2:o[0]==="right"&&(n[1]-=u.width),o[1]==="middle"?n[0]+=u.height/2:o[1]==="top"&&(n[0]+=u.height)):(p[0]=u.width,p[1]=u.height,o[0]==="middle"?n[0]-=u.width/2:o[0]==="right"&&(n[0]-=u.width),o[1]==="middle"?n[1]-=u.height/2:o[1]==="top"&&(n[1]-=u.height)),c.points[f*3]=n[0],c.points[f*3+1]=n[1],c.points[f*3+2]=n[2],c.tcoords[f*2]=u.tcoords[0],c.tcoords[f*2+1]=u.tcoords[1],f++,n[h[0]]+=p[0],c.points[f*3]=n[0],c.points[f*3+1]=n[1],c.points[f*3+2]=n[2],c.tcoords[f*2]=u.tcoords[2],c.tcoords[f*2+1]=u.tcoords[3],f++,n[h[1]]+=p[1],c.points[f*3]=n[0],c.points[f*3+1]=n[1],c.points[f*3+2]=n[2],c.tcoords[f*2]=u.tcoords[4],c.tcoords[f*2+1]=u.tcoords[5],f++,n[h[0]]-=p[0],c.points[f*3]=n[0],c.points[f*3+1]=n[1],c.points[f*3+2]=n[2],c.tcoords[f*2]=u.tcoords[6],c.tcoords[f*2+1]=u.tcoords[7],f++,c.polys[d*4]=3,c.polys[d*4+1]=f-4,c.polys[d*4+2]=f-3,c.polys[d*4+3]=f-2,d++,c.polys[d*4]=3,c.polys[d*4+1]=f-4,c.polys[d*4+2]=f-2,c.polys[d*4+3]=f-1,c.ptIdx+=4,c.cellIdx+=2};const r=new Float64Array(3);t.updatePolyDataForLabels=()=>{const a=t.getTickStrings().length+e.barSegments.length,s=a*4,o=a*2,i=new Float64Array(s*3),l=new Uint16Array(o*4),c=new Float32Array(s*2),u={ptIdx:0,cellIdx:0,polys:l,points:i,tcoords:c},f=e.vertical?0:1,d=e.vertical?1:0;r[2]=-.99;const p=e.vertical?["right","middle"]:["middle","bottom"];let h=[0,1];const g=[0,0];e.vertical?(g[0]=-e.tickLabelPixelOffset,e.topTitle?(r[0]=e.boxPosition[0]+.5*e.boxSize[0],r[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],u)):(r[0]=e.barPosition[0]+e.barSize[0],r[1]=e.barPosition[1]+.5*e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","top"],"vertical",[e.axisTitlePixelOffset,0],u)),h=[-1,0]):(g[1]=e.tickLabelPixelOffset,r[0]=e.barPosition[0]+.5*e.barSize[0],r[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],u)),r[f]=e.barPosition[f]+(.5*h[f]+.5)*e.barSize[f],r[d]=e.barPosition[d]+e.barSize[d]*.5;let y=null;for(let w=0;w<e.barSegments.length;w++){const x=e.barSegments[w];x.title==="ticks"?y=x:(r[d]=e.barPosition[d]+.5*e.barSize[d]*(x.corners[2][d]+x.corners[0][d]),t.createPolyDataForOneLabel(x.title,r,p,"horizontal",g,u))}const m=e.barPosition[d]+e.barSize[d]*y.corners[0][d],b=e.barSize[d]*(y.corners[2][d]-y.corners[0][d]),C=t.getTicks(),S=t.getTickStrings();for(let w=0;w<C.length;w++){const x=(C[w]-e.lastTickBounds[0])/(e.lastTickBounds[1]-e.lastTickBounds[0]);r[d]=m+b*x,t.createPolyDataForOneLabel(S[w],r,p,"horizontal",g,u)}const T=Tt.newInstance({numberOfComponents:2,values:c,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(T),e.tmPolyData.getPoints().setData(i,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(l,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updatePolyDataForBarSegments=()=>{var g,y;const a=e.renderable.getScalarsToColors();let s=0;e.renderable.getDrawNanAnnotation()&&a.getNanColor()&&(s+=1),e.renderable.getDrawBelowRangeSwatch()&&((g=a.getUseBelowRangeColor)!=null&&g.call(a))&&(s+=1),e.renderable.getDrawAboveRangeSwatch()&&((y=a.getUseAboveRangeColor)!=null&&y.call(a))&&(s+=1);const o=4*(1+s),i=o;let l=1;a.getVectorMode()===P6.COMPONENT&&(l=a.getVectorComponent()+1);const c=new Float64Array(o*3),u=new Uint16Array(i*5),f=new Float32Array(o*l);let d=0,p=0;for(let m=0;m<e.barSegments.length;m++){const b=e.barSegments[m];for(let C=0;C<4;C++){r[0]=e.barPosition[0]+b.corners[C][0]*e.barSize[0],r[1]=e.barPosition[1]+b.corners[C][1]*e.barSize[1],c[d*3]=(.5*r[0]+.5)*e.lastSize[0],c[d*3+1]=(.5*r[1]+.5)*e.lastSize[1],c[d*3+2]=r[2];for(let S=0;S<l;S++)f[d*l+S]=e.lastTickBounds[0]+b.scalars[C]*(e.lastTickBounds[1]-e.lastTickBounds[0]);d++}u[p*5]=4,u[p*5+1]=d-4,u[p*5+2]=d-3,u[p*5+3]=d-2,u[p*5+4]=d-1,p++}const h=Tt.newInstance({numberOfComponents:l,values:f,name:"Scalars"});e.polyData.getPointData().setScalars(h),e.polyData.getPoints().setData(c,3),e.polyData.getPoints().modified(),e.polyData.getPolys().setData(u,1),e.polyData.getPolys().modified(),e.polyData.modified()}}const z6=A.newInstance(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},n),A.obj(t,e),A.setGet(t,e,["axisTitlePixelOffset","tickLabelPixelOffset","renderable","topTitle","ticks","tickStrings"]),A.get(t,e,["lastSize","lastAspectRatio","lastTickBounds","axisTextStyle","tickTextStyle","barActor","tmActor"]),A.getArray(t,e,["boxPosition","boxSize"]),A.setArray(t,e,["boxPosition","boxSize"],2),e.forceUpdate=!1,e.lastRebuildTime={},A.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.barMapper=ba.newInstance(),e.barMapper.setInterpolateScalarsBeforeMapping(!0),e.barMapper.setUseLookupTableScalarRange(!0),e.polyData=or.newInstance(),e.barMapper.setInputData(e.polyData),e.barActor=Ca.newInstance(),e.barActor.setMapper(e.barMapper),e.tmPolyData=or.newInstance(),e.tmMapper=ba.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmTexture=iv.newInstance({resizable:!0}),e.tmTexture.setInterpolate(!1),e.tmActor=Ca.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),e.tmActor.addTexture(e.tmTexture),e.barPosition=[0,0],e.barSize=[0,0],e.boxPosition=[.88,-.92],e.boxSize=[.1,1.1],e.lastTickBounds=[],G6(t,e)},"vtkScalarBarActorHelper");function H6(t,e){e.classHierarchy.push("vtkScalarBarActor"),t.setTickTextStyle=n=>{e.tickTextStyle={...e.tickTextStyle,...n},t.modified()},t.setAxisTextStyle=n=>{e.axisTextStyle={...e.axisTextStyle,...n},t.modified()},t.resetAutoLayoutToDefault=()=>{t.setAutoLayout(a_(t,e))},t.resetGenerateTicksToDefault=()=>{t.setGenerateTicks(s_())}}function K6(t){return{automated:!0,autoLayout:null,axisLabel:"Scalar Value",barPosition:[0,0],barSize:[0,0],boxPosition:[.88,-.92],boxSize:[.1,1.1],scalarToColors:null,axisTitlePixelOffset:36,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},tickLabelPixelOffset:14,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"},generateTicks:null,drawNanAnnotation:!0,drawBelowRangeSwatch:!0,drawAboveRangeSwatch:!0,...t}}function o_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,K6(n)),e.autoLayout||(e.autoLayout=a_(t,e)),e.generateTicks||(e.generateTicks=s_()),Ca.extend(t,e,n),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),A.setGet(t,e,["automated","autoLayout","axisTitlePixelOffset","axisLabel","scalarsToColors","tickLabelPixelOffset","generateTicks","drawNanAnnotation","drawBelowRangeSwatch","drawAboveRangeSwatch"]),A.get(t,e,["axisTextStyle","tickTextStyle"]),A.getArray(t,e,["barPosition","barSize","boxPosition","boxSize"]),A.setArray(t,e,["barPosition","barSize","boxPosition","boxSize"],2),H6(t,e)}const j6=A.newInstance(o_,"vtkScalarBarActor");var i_={newInstance:j6,extend:o_,newScalarBarActorHelper:z6};function Y6(t,e){e.classHierarchy.push("vtkOpenGLScalarBarActor"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.scalarBarActorHelper.getRenderable()||e.scalarBarActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.scalarBarActorHelper.getBarActor()),t.addMissingNode(e.scalarBarActorHelper.getTmActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const a=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,s=e._openGLRenderer.getTiledSizeAndOrigin();e.scalarBarActorHelper.updateAPISpecificData([s.usize,s.vsize],a,e._openGLRenderWindow.getRenderable())}}}const q6={};function X6(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,q6,n),gn.extend(t,e,n),e.scalarBarActorHelper=i_.newScalarBarActorHelper(),Y6(t,e)}const Z6=Ft(X6,"vtkOpenGLScalarBarActor");Xn("vtkScalarBarActor",Z6);const{vtkErrorMacro:rT}=nr;function J6(t,e){e.classHierarchy.push("vtkOpenGLSkybox"),t.buildPass=n=>{if(n){e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const r=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(r.getActiveCamera())}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementOpaqueActorCount()}},t.opaquePass=(n,r)=>{if(n&&!e._openGLRenderer.getSelector()){t.updateBufferObjects(),e.context.depthMask(!0),e._openGLRenderWindow.getShaderCache().readyShaderProgram(e.tris.getProgram()),e.openGLTexture.render(e._openGLRenderWindow);const a=e.openGLTexture.getTextureUnit();e.tris.getProgram().setUniformi("sbtexture",a);const s=e._openGLRenderer.getRenderable(),o=e.openGLCamera.getKeyMatrices(s),i=new Float64Array(16);if(An(i,o.wcpc),e.tris.getProgram().setUniformMatrix("IMCPCMatrix",i),e.lastFormat==="box"){const l=s.getActiveCamera().getPosition();e.tris.getProgram().setUniform3f("camPos",l[0],l[1],l[2])}e.tris.getVAO().bind(),e.context.drawArrays(e.context.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),e.openGLTexture.deactivate()}},t.updateBufferObjects=()=>{if(!e.tris.getCABO().getElementCount()){const r=new Float32Array(12);for(let i=0;i<4;i++)r[i*3]=i%2*2-1,r[i*3+1]=i>1?1:-1,r[i*3+2]=1;const a=Tt.newInstance({numberOfComponents:3,values:r});a.setName("points");const s=new Uint16Array(8);s[0]=3,s[1]=0,s[2]=1,s[3]=3,s[4]=3,s[5]=0,s[6]=3,s[7]=2;const o=Tt.newInstance({numberOfComponents:1,values:s});e.tris.getCABO().createVBO(o,"polys",Er.SURFACE,{points:a,cellOffset:0})}e.renderable.getFormat()!==e.lastFormat&&(e.lastFormat=e.renderable.getFormat(),e.lastFormat==="box"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec3 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = wpos.xyz/wpos.w;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec3 TexCoords;
             uniform samplerCube sbtexture;
             uniform vec3 camPos;
             void main () {
               // skybox looks from inside out
               // which means we have to adjust
               // our tcoords. Otherwise text would
               // be flipped
               vec3 tc = normalize(TexCoords - camPos);
               if (abs(tc.z) < max(abs(tc.x),abs(tc.y)))
               {
                 tc = vec3(1.0, 1.0, -1.0) * tc;
               }
               else
               {
                 tc = vec3(-1.0, 1.0, 1.0) * tc;
               }
               gl_FragData[0] = textureCube(sbtexture, tc);
             }`,"")),e.lastFormat==="background"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec2 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = vec2(vertexMC.x, vertexMC.y)*0.5 + 0.5;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec2 TexCoords;
             uniform sampler2D sbtexture;
             void main () {
               gl_FragData[0] = texture2D(sbtexture, TexCoords);
             }`,"")),e.tris.getShaderSourceTime().modified(),e.tris.getVAO().bind(),e.tris.getVAO().addAttributeArray(e.tris.getProgram(),e.tris.getCABO(),"vertexMC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||rT("Error setting vertexMC in shader VAO."));const n=e.renderable.getTextures();n.length||rT("vtkSkybox requires a texture map"),e.openGLTexture.getRenderable()!==n[0]&&(e.openGLTexture.releaseGraphicsResources(e._openGLRenderWindow),e.openGLTexture.setRenderable(n[0]))}}const Q6={context:null};function e8(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Q6,n),gn.extend(t,e,n),e.openGLTexture=Gt.newInstance(),e.tris=Ba.newInstance(),e.keyMatrixTime={},dn(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:Oa(new Float64Array(9)),mcwc:ct(new Float64Array(16))},Dn(t,e,["context"]),wr(t,e,["activeTextures"]),J6(t,e)}const t8=Ft(e8);Xn("vtkSkybox",t8);const{FieldAssociations:n8}=Vl;function r8(t,e){e.classHierarchy.push("vtkHardwareSelector"),t.getSourceDataAsync=async(n,r,a,s,o)=>{},t.selectAsync=async(n,r,a,s,o)=>{const i=await t.getSourceDataAsync(n,r,a,s,o);return i?i.generateSelection(r,a,s,o):[]}}const a8={fieldAssociation:n8.FIELD_ASSOCIATION_CELLS,captureZValues:!1};function l_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,a8,n),A.obj(t,e),A.setGet(t,e,["fieldAssociation","captureZValues"]),r8(t,e)}const s8=A.newInstance(l_,"vtkHardwareSelector");var c_={newInstance:s8,extend:l_};function o8(t,e){e.classHierarchy.push("vtkFramebuffer"),t.getBothMode=()=>e.context.FRAMEBUFFER,t.saveCurrentBindingsAndBuffers=n=>{const r=typeof n<"u"?n:t.getBothMode();t.saveCurrentBindings(r),t.saveCurrentBuffers(r)},t.saveCurrentBindings=n=>{if(!e.context){Pt("you must set the OpenGLRenderWindow before calling saveCurrentBindings");return}const r=e.context;e.previousDrawBinding=r.getParameter(e.context.FRAMEBUFFER_BINDING),e.previousActiveFramebuffer=e._openGLRenderWindow.getActiveFramebuffer()},t.saveCurrentBuffers=n=>{},t.restorePreviousBindingsAndBuffers=n=>{const r=typeof n<"u"?n:t.getBothMode();t.restorePreviousBindings(r),t.restorePreviousBuffers(r)},t.restorePreviousBindings=n=>{if(!e.context){Pt("you must set the OpenGLRenderWindow before calling restorePreviousBindings");return}const r=e.context;r.bindFramebuffer(r.FRAMEBUFFER,e.previousDrawBinding),e._openGLRenderWindow.setActiveFramebuffer(e.previousActiveFramebuffer)},t.restorePreviousBuffers=n=>{},t.bind=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;r===null&&(r=e.context.FRAMEBUFFER),e.context.bindFramebuffer(r,e.glFramebuffer);for(let a=0;a<e.colorBuffers.length;a++)e.colorBuffers[a].bind();e._openGLRenderWindow.setActiveFramebuffer(t)},t.create=(n,r)=>{if(!e.context){Pt("you must set the OpenGLRenderWindow before calling create");return}e.glFramebuffer=e.context.createFramebuffer(),e.glFramebuffer.width=n,e.glFramebuffer.height=r},t.setColorBuffer=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const a=e.context;if(!a){Pt("you must set the OpenGLRenderWindow before calling setColorBuffer");return}let s=a.COLOR_ATTACHMENT0;if(r>0)if(e._openGLRenderWindow.getWebgl2())s+=r;else{Pt("Using multiple framebuffer attachments requires WebGL 2");return}e.colorBuffers[r]=n,a.framebufferTexture2D(a.FRAMEBUFFER,s,a.TEXTURE_2D,n.getHandle(),0)},t.removeColorBuffer=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const r=e.context;if(!r){Pt("you must set the OpenGLRenderWindow before calling removeColorBuffer");return}let a=r.COLOR_ATTACHMENT0;if(n>0)if(e._openGLRenderWindow.getWebgl2())a+=n;else{Pt("Using multiple framebuffer attachments requires WebGL 2");return}r.framebufferTexture2D(r.FRAMEBUFFER,a,r.TEXTURE_2D,null,0),e.colorBuffers=e.colorBuffers.splice(n,1)},t.setDepthBuffer=n=>{if(!e.context){Pt("you must set the OpenGLRenderWindow before calling setDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){const r=e.context;r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,n.getHandle(),0)}else Pt("Attaching depth buffer textures to fbo requires WebGL 2")},t.removeDepthBuffer=()=>{if(!e.context){Pt("you must set the OpenGLRenderWindow before calling removeDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){const n=e.context;n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,null,0)}else Pt("Attaching depth buffer textures to framebuffers requires WebGL 2")},t.getGLFramebuffer=()=>e.glFramebuffer,t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))},t.releaseGraphicsResources=()=>{e.glFramebuffer&&e.context.deleteFramebuffer(e.glFramebuffer)},t.getSize=()=>e.glFramebuffer==null?null:[e.glFramebuffer.width,e.glFramebuffer.height],t.populateFramebuffer=()=>{if(!e.context){Pt("you must set the OpenGLRenderWindow before calling populateFrameBuffer");return}t.bind();const n=e.context,r=Gt.newInstance();r.setOpenGLRenderWindow(e._openGLRenderWindow),r.setMinificationFilter(wt.LINEAR),r.setMagnificationFilter(wt.LINEAR),r.create2DFromRaw(e.glFramebuffer.width,e.glFramebuffer.height,4,jt.UNSIGNED_CHAR,null),t.setColorBuffer(r),e.depthTexture=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,e.depthTexture),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e.glFramebuffer.width,e.glFramebuffer.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,e.depthTexture)},t.getColorTexture=()=>e.colorBuffers[0]}const i8={glFramebuffer:null,colorBuffers:null,depthTexture:null,previousDrawBinding:0,previousReadBinding:0,previousDrawBuffer:0,previousReadBuffer:0,previousActiveFramebuffer:null};function u_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,i8,n),dn(t,e),e.colorBuffers&&Pt("you cannot initialize colorBuffers through the constructor. You should call setColorBuffer() instead."),e.colorBuffers=[],uu(t,e,["colorBuffers"]),o8(t,e)}const l8=Ft(u_,"vtkFramebuffer");var Cl={newInstance:l8,extend:u_};const c8={GLOBALIDS:0,PEDIGREEIDS:1,VALUES:2,INDICES:3,FRUSTUM:4,LOCATIONS:5,THRESHOLDS:6,BLOCKS:7,QUERY:8},u8={CELL:0,POINT:1,FIELD:2,VERTEX:3,EDGE:4,ROW:5};var f8={SelectionContent:c8,SelectionField:u8};function d8(t,e){e.classHierarchy.push("vtkSelectionNode"),t.getBounds=()=>e.points.getBounds()}const p8={contentType:-1,fieldType:-1,properties:null,selectionList:[]};function f_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,p8,n),A.obj(t,e),e.properties={},A.setGet(t,e,["contentType","fieldType","properties","selectionList"]),d8(t,e)}const g8=A.newInstance(f_,"vtkSelectionNode");var cv={newInstance:g8,extend:f_,...f8};const{PassTypes:Jn}=xR,{SelectionContent:h8,SelectionField:aT}=cv,{FieldAssociations:ef}=Vl,{vtkErrorMacro:d_}=A,jo=1;function p_(t){return`${t.propID} ${t.compositeID}`}function g_(t,e,n,r){if(!n)return 0;const a=(e*(r[2]-r[0]+1)+t)*4;return n[a+3]}function Ys(t,e,n,r){if(!n)return 0;const a=(e*(r[2]-r[0]+1)+t)*4,s=n[a],o=n[a+1];return(n[a+2]*256+o)*256+s}function h_(t,e){let n=e;return n<<=24,n|=t,n}function sc(t,e,n,r){const a=n<0?0:n;if(a===0){if(r[0]=e[0],r[1]=e[1],e[0]<t.area[0]||e[0]>t.area[2]||e[1]<t.area[1]||e[1]>t.area[3])return null;const l=[e[0]-t.area[0],e[1]-t.area[1]],c=Ys(l[0],l[1],t.pixBuffer[Jn.ACTOR_PASS],t.area);if(c<=0||c-jo>=t.props.length)return null;const u={};u.valid=!0,u.propID=c-jo,u.prop=t.props[u.propID];let f=Ys(l[0],l[1],t.pixBuffer[Jn.COMPOSITE_INDEX_PASS],t.area);if((f<0||f>16777215)&&(f=0),u.compositeID=f-jo,t.captureZValues){const h=(l[1]*(t.area[2]-t.area[0]+1)+l[0])*4;u.zValue=(256*t.zBuffer[h]+t.zBuffer[h+1])/65535,u.displayPosition=e}if(t.pixBuffer[Jn.ID_LOW24]&&g_(l[0],l[1],t.pixBuffer[Jn.ID_LOW24],t.area)===0)return u;const d=Ys(l[0],l[1],t.pixBuffer[Jn.ID_LOW24],t.area),p=Ys(l[0],l[1],t.pixBuffer[Jn.ID_HIGH24],t.area);return u.attributeID=h_(d,p),u}const s=[e[0],e[1]],o=[0,0];let i=sc(t,e,0,r);if(i&&i.valid)return i;for(let l=1;l<a;++l){for(let c=s[1]>l?s[1]-l:0;c<=s[1]+l;++c)if(o[1]=c,s[0]>=l&&(o[0]=s[0]-l,i=sc(t,o,0,r),i&&i.valid)||(o[0]=s[0]+l,i=sc(t,o,0,r),i&&i.valid))return i;for(let c=s[0]>=l?s[0]-(l-1):0;c<=s[0]+(l-1);++c)if(o[0]=c,s[1]>=l&&(o[1]=s[1]-l,i=sc(t,o,0,r),i&&i.valid)||(o[1]=s[1]+l,i=sc(t,o,0,r),i&&i.valid))return i}return r[0]=e[0],r[1]=e[1],null}function v_(t,e,n,r,a){const s=[];let o=0;return e.forEach((i,l)=>{const c=cv.newInstance();switch(c.setContentType(h8.INDICES),t){case ef.FIELD_ASSOCIATION_CELLS:c.setFieldType(aT.CELL);break;case ef.FIELD_ASSOCIATION_POINTS:c.setFieldType(aT.POINT);break;default:d_("Unknown field association")}c.getProperties().propID=i.info.propID,c.getProperties().prop=i.info.prop,c.getProperties().compositeID=i.info.compositeID,c.getProperties().attributeID=i.info.attributeID,c.getProperties().pixelCount=i.pixelCount,n&&(c.getProperties().displayPosition=[i.info.displayPosition[0],i.info.displayPosition[1],i.info.zValue],c.getProperties().worldPosition=a.displayToWorld(i.info.displayPosition[0],i.info.displayPosition[1],i.info.zValue,r)),c.setSelectionList(i.attributeIDs),s[o]=c,o++}),s}function v8(t,e,n,r,a){const s=Math.floor(e),o=Math.floor(n),i=Math.floor(r),l=Math.floor(a),c=new Map,u=[0,0];for(let f=o;f<=l;f++)for(let d=s;d<=i;d++){const h=sc(t,[d,f],0,u);if(h&&h.valid){const g=p_(h);if(!c.has(g))c.set(g,{info:h,pixelCount:1,attributeIDs:[h.attributeID]});else{const y=c.get(g);y.pixelCount++,t.captureZValues&&h.zValue<y.info.zValue&&(y.info=h),y.attributeIDs.indexOf(h.attributeID)===-1&&y.attributeIDs.push(h.attributeID)}}}return v_(t.fieldAssociation,c,t.captureZValues,t.renderer,t.openGLRenderWindow)}function y8(t,e){e.classHierarchy.push("vtkOpenGLHardwareSelector"),t.releasePixBuffers=()=>{e.rawPixBuffer=[],e.pixBuffer=[],e.zBuffer=null},t.beginSelection=()=>{e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer),e.maxAttributeId=0;const r=e._openGLRenderWindow.getSize();if(!e.framebuffer)e.framebuffer=Cl.newInstance(),e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.create(r[0],r[1]),e.framebuffer.populateFramebuffer();else{e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers();const a=e.framebuffer.getSize();!a||a[0]!==r[0]||a[1]!==r[1]?(e.framebuffer.create(r[0],r[1]),e.framebuffer.populateFramebuffer()):e.framebuffer.bind()}if(e._openGLRenderer.clear(),e._openGLRenderer.setSelector(t),e.hitProps={},e.propPixels={},e.props=[],t.releasePixBuffers(),e.fieldAssociation===ef.FIELD_ASSOCIATION_POINTS){const a=e._openGLRenderWindow.getContext(),s=a.isEnabled(a.BLEND);a.disable(a.BLEND),e._openGLRenderWindow.traverseAllPasses(),s&&a.enable(a.BLEND)}},t.endSelection=()=>{e.hitProps={},e._openGLRenderer.setSelector(null),e.framebuffer.restorePreviousBindingsAndBuffers()},t.preCapturePass=()=>{const r=e._openGLRenderWindow.getContext();e.originalBlending=r.isEnabled(r.BLEND),r.disable(r.BLEND)},t.postCapturePass=()=>{const r=e._openGLRenderWindow.getContext();e.originalBlending&&r.enable(r.BLEND)},t.select=()=>{let r=null;return t.captureBuffers()&&(r=t.generateSelection(e.area[0],e.area[1],e.area[2],e.area[3]),t.releasePixBuffers()),r},t.getSourceDataAsync=async(r,a,s,o,i)=>{if(e._renderer=r,a===void 0){const c=e._openGLRenderWindow.getSize();t.setArea(0,0,c[0]-1,c[1]-1)}else t.setArea(a,s,o,i);if(!t.captureBuffers())return!1;const l={area:[...e.area],pixBuffer:[...e.pixBuffer],captureZValues:e.captureZValues,zBuffer:e.zBuffer,props:[...e.props],fieldAssociation:e.fieldAssociation,renderer:r,openGLRenderWindow:e._openGLRenderWindow};return l.generateSelection=function(){for(var c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];return v8(l,...u)},l},t.captureBuffers=()=>{if(!e._renderer||!e._openGLRenderWindow)return d_("Renderer and view must be set before calling Select."),!1;e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer),e._openGLRenderWindow.getRenderable().preRender(),t.invokeEvent({type:"StartEvent"}),e.originalBackground=e._renderer.getBackgroundByReference(),e._renderer.setBackground(0,0,0,0);const r=e._openGLRenderWindow.getRenderPasses();for(t.beginSelection(),e.currentPass=Jn.MIN_KNOWN_PASS;e.currentPass<=Jn.MAX_KNOWN_PASS;e.currentPass++)t.passRequired(e.currentPass)&&(t.preCapturePass(e.currentPass),e.captureZValues&&e.currentPass===Jn.ACTOR_PASS&&typeof r[0].requestDepth=="function"&&typeof r[0].getFramebuffer=="function"&&r[0].requestDepth(),e._openGLRenderWindow.traverseAllPasses(),t.postCapturePass(e.currentPass),t.savePixelBuffer(e.currentPass),t.processPixelBuffers());return t.endSelection(),e._renderer.setBackground(e.originalBackground),t.invokeEvent({type:"EndEvent"}),!0},t.processPixelBuffers=()=>{e.props.forEach((r,a)=>{t.isPropHit(a)&&r.processSelectorPixelBuffers(t,e.propPixels[a])})},t.passRequired=r=>{if(r===Jn.ID_HIGH24){if(e.fieldAssociation===ef.FIELD_ASSOCIATION_POINTS)return e.maximumPointId>16777215;if(e.fieldAssociation===ef.FIELD_ASSOCIATION_CELLS)return e.maximumCellId>16777215}return!0},t.savePixelBuffer=r=>{if(e.pixBuffer[r]=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),!e.rawPixBuffer[r]){const a=(e.area[2]-e.area[0]+1)*(e.area[3]-e.area[1]+1)*4;e.rawPixBuffer[r]=new Uint8Array(a),e.rawPixBuffer[r].set(e.pixBuffer[r])}if(r===Jn.ACTOR_PASS){if(e.captureZValues){const a=e._openGLRenderWindow.getRenderPasses();if(typeof a[0].requestDepth=="function"&&typeof a[0].getFramebuffer=="function"){const s=a[0].getFramebuffer();s.saveCurrentBindingsAndBuffers(),s.bind(),e.zBuffer=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),s.restorePreviousBindingsAndBuffers()}}t.buildPropHitList(e.rawPixBuffer[r])}},t.buildPropHitList=r=>{let a=0;for(let s=0;s<=e.area[3]-e.area[1];s++)for(let o=0;o<=e.area[2]-e.area[0];o++){let i=Ys(o,s,r,e.area);i>0&&(i--,i in e.hitProps||(e.hitProps[i]=!0,e.propPixels[i]=[]),e.propPixels[i].push(a*4)),++a}},t.renderProp=r=>{e.currentPass===Jn.ACTOR_PASS&&(t.setPropColorValueFromInt(e.props.length+jo),e.props.push(r))},t.renderCompositeIndex=r=>{e.currentPass===Jn.COMPOSITE_INDEX_PASS&&t.setPropColorValueFromInt(r+jo)},t.renderAttributeId=r=>{r<0||(e.maxAttributeId=r>e.maxAttributeId?r:e.maxAttributeId)},t.passTypeToString=r=>A.enumToString(Jn,r),t.isPropHit=r=>!!e.hitProps[r],t.setPropColorValueFromInt=r=>{e.propColorValue[0]=r%256/255,e.propColorValue[1]=Math.floor(r/256)%256/255,e.propColorValue[2]=Math.floor(r/65536)%256/255},t.getPixelInformation=(r,a,s)=>{const o=a<0?0:a;if(o===0){if(s[0]=r[0],s[1]=r[1],r[0]<e.area[0]||r[0]>e.area[2]||r[1]<e.area[1]||r[1]>e.area[3])return null;const u=[r[0]-e.area[0],r[1]-e.area[1]],f=Ys(u[0],u[1],e.pixBuffer[Jn.ACTOR_PASS],e.area);if(f<=0||f-jo>=e.props.length)return null;const d={};d.valid=!0,d.propID=f-jo,d.prop=e.props[d.propID];let p=Ys(u[0],u[1],e.pixBuffer[Jn.COMPOSITE_INDEX_PASS],e.area);if((p<0||p>16777215)&&(p=0),d.compositeID=p-jo,e.captureZValues){const y=(u[1]*(e.area[2]-e.area[0]+1)+u[0])*4;d.zValue=(256*e.zBuffer[y]+e.zBuffer[y+1])/65535,d.displayPosition=r}if(e.pixBuffer[Jn.ID_LOW24]&&g_(u[0],u[1],e.pixBuffer[Jn.ID_LOW24],e.area)===0)return d;const h=Ys(u[0],u[1],e.pixBuffer[Jn.ID_LOW24],e.area),g=Ys(u[0],u[1],e.pixBuffer[Jn.ID_HIGH24],e.area);return d.attributeID=h_(h,g),d}const i=[r[0],r[1]],l=[0,0];let c=t.getPixelInformation(r,0,s);if(c&&c.valid)return c;for(let u=1;u<o;++u){for(let f=i[1]>u?i[1]-u:0;f<=i[1]+u;++f)if(l[1]=f,i[0]>=u&&(l[0]=i[0]-u,c=t.getPixelInformation(l,0,s),c&&c.valid)||(l[0]=i[0]+u,c=t.getPixelInformation(l,0,s),c&&c.valid))return c;for(let f=i[0]>=u?i[0]-(u-1):0;f<=i[0]+(u-1);++f)if(l[0]=f,i[1]>=u&&(l[1]=i[1]-u,c=t.getPixelInformation(l,0,s),c&&c.valid)||(l[1]=i[1]+u,c=t.getPixelInformation(l,0,s),c&&c.valid))return c}return s[0]=r[0],s[1]=r[1],null},t.generateSelection=(r,a,s,o)=>{const i=Math.floor(r),l=Math.floor(a),c=Math.floor(s),u=Math.floor(o),f=new Map,d=[0,0];for(let p=l;p<=u;p++)for(let h=i;h<=c;h++){const g=[h,p],y=t.getPixelInformation(g,0,d);if(y&&y.valid){const m=p_(y);if(!f.has(m))f.set(m,{info:y,pixelCount:1,attributeIDs:[y.attributeID]});else{const b=f.get(m);b.pixelCount++,e.captureZValues&&y.zValue<b.info.zValue&&(b.info=y),b.attributeIDs.indexOf(y.attributeID)===-1&&b.attributeIDs.push(y.attributeID)}}}return v_(e.fieldAssociation,f,e.captureZValues,e._renderer,e._openGLRenderWindow)},t.getRawPixelBuffer=r=>e.rawPixBuffer[r],t.getPixelBuffer=r=>e.pixBuffer[r],t.attach=(r,a)=>{e._openGLRenderWindow=r,e._renderer=a};const n=t.setArea;t.setArea=function(){return n(...arguments)?(e.area[0]=Math.floor(e.area[0]),e.area[1]=Math.floor(e.area[1]),e.area[2]=Math.floor(e.area[2]),e.area[3]=Math.floor(e.area[3]),!0):!1}}const m8={area:void 0,currentPass:-1,propColorValue:null,props:null,maximumPointId:0,maximumCellId:0,idOffset:1};function y_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,m8,n),c_.extend(t,e,n),e.propColorValue=[0,0,0],e.props=[],e.area||(e.area=[0,0,0,0]),A.setGetArray(t,e,["area"],4),A.setGet(t,e,["_renderer","currentPass","_openGLRenderWindow","maximumPointId","maximumCellId"]),A.setGetArray(t,e,["propColorValue"],3),A.moveToProtected(t,e,["renderer","openGLRenderWindow"]),A.event(t,e,"event"),y8(t,e)}const C8=A.newInstance(y_,"vtkOpenGLHardwareSelector");var MC={newInstance:C8,extend:y_,...xR};const{vtkErrorMacro:xu}=nr,{Representation:S8}=vo,{ObjectType:qd}=Zs,{PassTypes:b8}=MC,w8={type:"StartEvent"},T8={type:"EndEvent"};function x8(t,e){e.classHierarchy.push("vtkOpenGLGlyph3DMapper");const n={...t};t.renderPiece=(r,a)=>{if(t.invokeEvent(w8),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(1),t.invokeEvent(T8),!e.currentInput){xu("No input!");return}if(!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues())return;const s=e.context;e._openGLRenderWindow.getWebgl2()?(e.hardwareSupport=!0,e.extension=null):e.extension||(e.extension=e.context.getExtension("ANGLE_instanced_arrays"),e.hardwareSupport=!!e.extension);const o=a.getProperty().getBackfaceCulling(),i=a.getProperty().getFrontfaceCulling();!o&&!i?e._openGLRenderWindow.disableCullFace():i?(e._openGLRenderWindow.enableCullFace(),s.cullFace(s.FRONT)):(e._openGLRenderWindow.enableCullFace(),s.cullFace(s.BACK)),t.renderPieceStart(r,a),t.renderPieceDraw(r,a),t.renderPieceFinish(r,a)},t.multiply4x4WithOffset=(r,a,s,o)=>{const i=a[0],l=a[1],c=a[2],u=a[3],f=a[4],d=a[5],p=a[6],h=a[7],g=a[8],y=a[9],m=a[10],b=a[11],C=a[12],S=a[13],T=a[14],w=a[15];let x=s[o],E=s[o+1],O=s[o+2],k=s[o+3];r[0]=x*i+E*f+O*g+k*C,r[1]=x*l+E*d+O*y+k*S,r[2]=x*c+E*p+O*m+k*T,r[3]=x*u+E*h+O*b+k*w,x=s[o+4],E=s[o+5],O=s[o+6],k=s[o+7],r[4]=x*i+E*f+O*g+k*C,r[5]=x*l+E*d+O*y+k*S,r[6]=x*c+E*p+O*m+k*T,r[7]=x*u+E*h+O*b+k*w,x=s[o+8],E=s[o+9],O=s[o+10],k=s[o+11],r[8]=x*i+E*f+O*g+k*C,r[9]=x*l+E*d+O*y+k*S,r[10]=x*c+E*p+O*m+k*T,r[11]=x*u+E*h+O*b+k*w,x=s[o+12],E=s[o+13],O=s[o+14],k=s[o+15],r[12]=x*i+E*f+O*g+k*C,r[13]=x*l+E*d+O*y+k*S,r[14]=x*c+E*p+O*m+k*T,r[15]=x*u+E*h+O*b+k*w},t.replaceShaderNormal=(r,a,s)=>{if(e.hardwareSupport&&e.lastBoundBO.getReferenceByName("lastLightComplexity")>0){let i=r.Vertex;e.lastBoundBO.getCABO().getNormalOffset()&&(i=ue.substitute(i,"//VTK::Normal::Dec",["attribute vec3 normalMC;","attribute mat3 gNormal;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,i=ue.substitute(i,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * gNormal * normalMC;"]).result),r.Vertex=i}n.replaceShaderNormal(r,a,s)},t.replaceShaderColor=(r,a,s)=>{if(e.hardwareSupport&&e.renderable.getColorArray()){let o=r.Vertex,i=r.Geometry,l=r.Fragment;const c=e.lastBoundBO.getReferenceByName("lastLightComplexity");let u=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity"];c&&(u=u.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));let f=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];c&&(f=f.concat(["  vec3 specularColor;","  float specularPower;"])),f=f.concat(["  opacity = opacityUniform;"]),c&&(f=f.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),e.drawingEdges||(u=u.concat(["varying vec4 vertexColorVSOutput;"]),o=ue.substitute(o,"//VTK::Color::Dec",["attribute vec4 gColor;","varying vec4 vertexColorVSOutput;"]).result,o=ue.substitute(o,"//VTK::Color::Impl",["vertexColorVSOutput = gColor;"]).result,i=ue.substitute(i,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,i=ue.substitute(i,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result,f=f.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])),l=ue.substitute(l,"//VTK::Color::Impl",f).result,l=ue.substitute(l,"//VTK::Color::Dec",u).result,r.Vertex=o,r.Geometry=i,r.Fragment=l}n.replaceShaderColor(r,a,s)},t.replaceShaderPositionVC=(r,a,s)=>{if(e.hardwareSupport){let o=r.Vertex;e.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(o=ue.substitute(o,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","vertexVCVSOutput = MCVCMatrix * gVertexMC;","  gl_Position = MCPCMatrix * gVertexMC;"]).result,o=ue.substitute(o,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result):(o=ue.substitute(o,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCPCMatrix;"]).result,o=ue.substitute(o,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","  gl_Position = MCPCMatrix * gVertexMC;"]).result),r.Vertex=o}n.replaceShaderPositionVC(r,a,s)},t.replaceShaderPicking=(r,a,s)=>{if(e.hardwareSupport){let o=r.Fragment,i=r.Vertex;i=ue.substitute(i,"//VTK::Picking::Dec",["attribute vec3 mapperIndexVS;","varying vec3 mapperIndexVSOutput;"]).result,i=ue.substitute(i,"//VTK::Picking::Impl","  mapperIndexVSOutput = mapperIndexVS;").result,r.Vertex=i,o=ue.substitute(o,"//VTK::Picking::Dec",["varying vec3 mapperIndexVSOutput;","uniform vec3 mapperIndex;","uniform int picking;"]).result,o=ue.substitute(o,"//VTK::Picking::Impl",["  vec4 pickColor = picking == 2 ? vec4(mapperIndexVSOutput,1.0) : vec4(mapperIndex,1.0);","  gl_FragData[0] = picking != 0 ? pickColor : gl_FragData[0];"]).result,r.Fragment=o}else n.replaceShaderPicking(r,a,s)},t.updateGlyphShaderParameters=(r,a,s,o,i,l,c,u)=>{const f=s.getProgram();if(r){const d=e.normalMatrix,p=l,h=c*9,g=e.tmpMat3,y=d[0],m=d[1],b=d[2],C=d[3],S=d[4],T=d[5],w=d[6],x=d[7],E=d[8],O=p[h],k=p[h+1],M=p[h+2],D=p[h+3],I=p[h+4],B=p[h+5],F=p[h+6],$=p[h+7],N=p[h+8];g[0]=O*y+k*C+M*w,g[1]=O*m+k*S+M*x,g[2]=O*b+k*T+M*E,g[3]=D*y+I*C+B*w,g[4]=D*m+I*S+B*x,g[5]=D*b+I*T+B*E,g[6]=F*y+$*C+N*w,g[7]=F*m+$*S+N*x,g[8]=F*b+$*T+N*E,f.setUniformMatrix3x3("normalMatrix",e.tmpMat3)}if(t.multiply4x4WithOffset(e.tmpMat4,e.mcpcMatrix,i,c*16),f.setUniformMatrix("MCPCMatrix",e.tmpMat4),a&&(t.multiply4x4WithOffset(e.tmpMat4,e.mcvcMatrix,i,c*16),f.setUniformMatrix("MCVCMatrix",e.tmpMat4)),o){const d=o.getData();e.tmpColor[0]=d[c*4]/255,e.tmpColor[1]=d[c*4+1]/255,e.tmpColor[2]=d[c*4+2]/255,f.setUniform3fArray("ambientColorUniform",e.tmpColor),f.setUniform3fArray("diffuseColorUniform",e.tmpColor)}u&&f.setUniform3fArray("mapperIndex",u.getPropColorValue())},t.renderPieceDraw=(r,a)=>{const s=a.getProperty().getRepresentation(),o=e.context,i=a.getProperty().getEdgeVisibility()&&s===S8.SURFACE,l=e.openGLCamera.getKeyMatrices(r),c=e.openGLActor.getKeyMatrices();Dc(e.normalMatrix,l.normalMatrix,c.normalMatrix),Ut(e.mcpcMatrix,l.wcpc,c.mcwc),Ut(e.mcvcMatrix,l.wcvc,c.mcwc);const u=e.renderable.getMatrixArray(),f=e.renderable.getNormalArray(),d=e.renderable.getColorArray(),p=u.length/16;let h=!1;e._openGLRenderer.getSelector()&&e._openGLRenderer.getSelector().getCurrentPass()===b8.COMPOSITE_INDEX_PASS&&(h=!0);for(let g=e.primTypes.Start;g<e.primTypes.End;g++){const y=e.primitives[g].getCABO();if(y.getElementCount()){e.drawingEdges=i&&(g===e.primTypes.TrisEdges||g===e.primTypes.TriStripsEdges),e.lastBoundBO=e.primitives[g],e.primitives[g].updateShaders(r,a,t);const m=e.primitives[g].getProgram(),b=e.primitives[g].getOpenGLMode(s),C=m.isUniformUsed("normalMatrix"),S=m.isUniformUsed("MCVCMatrix");if(e.hardwareSupport)e.extension?e.extension.drawArraysInstancedANGLE(b,0,y.getElementCount(),p):o.drawArraysInstanced(b,0,y.getElementCount(),p);else for(let T=0;T<p;++T)h&&e._openGLRenderer.getSelector().renderCompositeIndex(T),t.updateGlyphShaderParameters(C,S,e.primitives[g],d,u,f,T,h?e._openGLRenderer.getSelector():null),o.drawArrays(b,0,y.getElementCount())}}},t.setMapperShaderParameters=(r,a,s)=>{if(r.getCABO().getElementCount()&&(e.glyphBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){r.getProgram().isAttributeUsed("gMatrix")?r.getVAO().addAttributeMatrixWithDivisor(r.getProgram(),e.matrixBuffer,"gMatrix",0,64,e.context.FLOAT,4,!1,1)||xu("Error setting gMatrix in shader VAO."):r.getVAO().removeAttributeArray("gMatrix"),r.getProgram().isAttributeUsed("gNormal")?r.getVAO().addAttributeMatrixWithDivisor(r.getProgram(),e.normalBuffer,"gNormal",0,36,e.context.FLOAT,3,!1,1)||xu("Error setting gNormal in shader VAO."):r.getVAO().removeAttributeArray("gNormal"),r.getProgram().isAttributeUsed("gColor")?r.getVAO().addAttributeArrayWithDivisor(r.getProgram(),e.colorBuffer,"gColor",0,4,e.context.UNSIGNED_BYTE,4,!0,1,!1)||xu("Error setting gColor in shader VAO."):r.getVAO().removeAttributeArray("gColor"),r.getProgram().isAttributeUsed("mapperIndexVS")?r.getVAO().addAttributeArrayWithDivisor(r.getProgram(),e.pickBuffer,"mapperIndexVS",0,4,e.context.UNSIGNED_BYTE,4,!0,1,!1)||xu("Error setting mapperIndexVS in shader VAO."):r.getVAO().removeAttributeArray("mapperIndexVS"),n.setMapperShaderParameters(r,a,s),r.getAttributeUpdateTime().modified();return}n.setMapperShaderParameters(r,a,s)},t.getNeedToRebuildBufferObjects=(r,a)=>(e.renderable.buildArrays(),e.VBOBuildTime.getMTime()<e.renderable.getBuildTime().getMTime()?!0:n.getNeedToRebuildBufferObjects(r,a)),t.getNeedToRebuildShaders=(r,a,s)=>!!(n.getNeedToRebuildShaders(r,a,s)||r.getShaderSourceTime().getMTime()<e.renderable.getMTime()||r.getShaderSourceTime().getMTime()<e.currentInput.getMTime()),t.buildBufferObjects=(r,a)=>{if(e.hardwareSupport){const s=e.renderable.getMatrixArray(),o=e.renderable.getNormalArray(),i=e.renderable.getColorArray();if(e.matrixBuffer||(e.matrixBuffer=Zs.newInstance(),e.matrixBuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.normalBuffer=Zs.newInstance(),e.normalBuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.colorBuffer=Zs.newInstance(),e.colorBuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.pickBuffer=Zs.newInstance(),e.pickBuffer.setOpenGLRenderWindow(e._openGLRenderWindow)),e.renderable.getBuildTime().getMTime()>e.glyphBOBuildTime.getMTime()){e.matrixBuffer.upload(s,qd.ARRAY_BUFFER),e.normalBuffer.upload(o,qd.ARRAY_BUFFER),i?e.colorBuffer.upload(i.getData(),qd.ARRAY_BUFFER):e.colorBuffer.releaseGraphicsResources();const l=s.length/16,c=new Uint8Array(4*l);for(let u=0;u<l;++u){let f=u+1;const d=u*4;c[d]=f%256,f-=c[d],f/=256,c[d+1]=f%256,f-=c[d+1],f/=256,c[d+2]=f%256,c[d+3]=255}e.pickBuffer.upload(c,qd.ARRAY_BUFFER),e.glyphBOBuildTime.modified()}}return n.buildBufferObjects(r,a)}}const E8={normalMatrix:null,mcpcMatrix:null,mcwcMatrix:null};function k8(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,E8,n),lv.extend(t,e,n),e.tmpMat3=Oa(new Float64Array(9)),e.normalMatrix=Oa(new Float64Array(9)),e.mcpcMatrix=ct(new Float64Array(16)),e.mcvcMatrix=ct(new Float64Array(16)),e.tmpColor=[],e.glyphBOBuildTime={},dn(e.glyphBOBuildTime,{mtime:0}),x8(t,e)}const O8=Ft(k8,"vtkOpenGLGlyph3DMapper");Xn("vtkGlyph3DMapper",O8);const{vtkErrorMacro:M8}=A;class R8{constructor(){this.segmentMapping={},this.segments=[null],this.faces=[]}addSegment(e){const n=e[0],r=e[e.length-1];if(n===r||e.length<2)return;const a=this.segmentMapping[n],s=this.segmentMapping[r];if(a!==void 0&&s!==void 0)if(Math.abs(a)===Math.abs(s)){const o=a<s?s:a,i=this.segments[o];if(a>0)for(let l=1;l<e.length-1;l++)i.push(e[l]);else for(let l=1;l<e.length-1;l++)i.unshift(e[e.length-1-l]);this.faces.push(i),this.segments[o]=null,this.segmentMapping[n]=void 0,this.segmentMapping[r]=void 0}else{const o=Math.abs(a),i=Math.abs(s),l=this.segments[o],c=this.segments[i];this.segments[o]=null,this.segments[i]=null,this.segmentMapping[l[0]]=void 0,this.segmentMapping[c[0]]=void 0,this.segmentMapping[l[l.length-1]]=void 0,this.segmentMapping[c[c.length-1]]=void 0,this.addSegment(e),this.addSegment(l),this.addSegment(c)}else if(a!==void 0){if(a>0){const o=this.segments[a];for(let i=1;i<e.length;i++)o.push(e[i]);this.segmentMapping[r]=a}else{const o=this.segments[-a];this.segmentMapping[r]=a;for(let i=1;i<e.length;i++)o.unshift(e[i])}this.segmentMapping[n]=void 0}else if(s!==void 0){if(s>0){const o=this.segments[s];for(let i=1;i<e.length;i++)o.push(e[e.length-1-i]);this.segmentMapping[n]=s}else{const o=this.segments[-s];this.segmentMapping[n]=s;for(let i=1;i<e.length;i++)o.unshift(e[e.length-i-1])}this.segmentMapping[r]=void 0}else{const o=this.segments.length;this.segments.push(e),this.segmentMapping[n]=-o,this.segmentMapping[r]=o}}}function _8(t,e){e.classHierarchy.push("vtkClosedPolyLineToSurfaceFilter"),t.requestData=(n,r)=>{const a=n[0];if(!a){M8("Invalid or missing input");return}const s=or.newInstance();s.shallowCopy(a);const o=new R8,i=a.getLines().getData();let l=0;for(;l<i.length;){const d=i[l++],p=[];for(let h=0;h<d;h++)p.push(i[l+h]);o.addSegment(p),l+=d}const{faces:c}=o;let u=c.length;for(let d=0;d<c.length;d++)u+=c[d].length;const f=new Uint16Array(u);l=0;for(let d=0;d<c.length;d++){const p=c[d];f[l++]=p.length;for(let h=0;h<p.length;h++)f[l++]=p[h]}s.setPolys(Fc.newInstance({values:f,name:"faces"})),r[0]=s}}const V8={};function m_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,V8,n),A.obj(t,e),A.algo(t,e,1,1),_8(t,e)}const D8=A.newInstance(m_,"vtkClosedPolyLineToSurfaceFilter");var C_={newInstance:D8,extend:m_};const{vtkErrorMacro:sT}=nr;function L8(t){const e=t.getPolys().getData(),n=t.getStrips().getData(),r={cellSize:0,cell:[],done:!1,polyIdx:0,stripIdx:0,remainingStripLength:0,next(){if(r.polyIdx<e.length){r.cellSize=e[r.polyIdx];const a=r.polyIdx+1,s=a+r.cellSize;r.polyIdx=s;let o=0;for(let i=a;i<s;++i)r.cell[o++]=e[i]}else if(r.stripIdx<n.length){r.cellSize=3,r.remainingStripLength===0&&(r.remainingStripLength=n[r.stripIdx]-2,r.stripIdx+=3);const a=r.stripIdx-2,s=r.stripIdx+1;r.stripIdx++,r.remainingStripLength--;let o=0;for(let i=a;i<s;++i)r.cell[o++]=n[i]}else if(!r.done)r.done=!0;else throw new Error("Iterator is done")}};return r.next(),r}function N8(t,e){e.classHierarchy.push("vtkCutter");const n={...t};t.getMTime=()=>{let a=n.getMTime();return e.cutFunction&&(a=Math.max(a,e.cutFunction.getMTime())),a};function r(a,s){const o=a.getPoints(),i=o.getData(),l=o.getNumberOfPoints(),c=[],u=[],f=[];(!e.cutScalars||e.cutScalars.length<l)&&(e.cutScalars=new Float32Array(l));let d=0,p=0;for(;d<i.length;)e.cutScalars[p++]=e.cutFunction.evaluateFunction(i[d++],i[d++],i[d++]);const h=[],g=new Array(3),y=new Array(3),m=[];for(const C=L8(a);!C.done;C.next()){if(C.cellSize<=2)continue;for(let E=0;E<C.cellSize;)m[E]=e.cutScalars[C.cell[E++]];const S=m[0]>0;let T=!0;for(let E=1;E<C.cell.length;E++)if(m[E]>0!==S){T=!1;break}if(T)continue;const w=[];for(let E=0;E<C.cellSize;E++){const O=E+1===C.cellSize?0:E+1,k=m[E]>0;if(m[O]>0===k)continue;let D=E,I=O,B=m[I]-m[D];B<=0&&(D=O,I=E,B*=-1);let F=0;B!==0&&(F=(e.cutValue-m[D])/B);const $=C.cell[D],N=C.cell[I];g[0]=i[$*3],g[1]=i[$*3+1],g[2]=i[$*3+2],y[0]=i[N*3],y[1]=i[N*3+1],y[2]=i[N*3+2];const W=[g[0]+F*(y[0]-g[0]),g[1]+F*(y[1]-g[1]),g[2]+F*(y[2]-g[2])];w.push({pointEdge1:$,pointEdge2:N,intersectedPoint:W,newPointID:-1})}for(let E=0;E<w.length;E++){const O=w[E];let k=!1;for(let M=0;M<h.length;M++){const D=h[M],I=O.pointEdge1===D.pointEdge1&&O.pointEdge2===D.pointEdge2,B=O.intersectedPoint[0]===D.intersectedPoint[0]&&O.intersectedPoint[1]===D.intersectedPoint[1]&&O.intersectedPoint[2]===D.intersectedPoint[2];if(I||B){k=!0,w[E].newPointID=h[M].newPointID;break}}k||(c.push(O.intersectedPoint[0]),c.push(O.intersectedPoint[1]),c.push(O.intersectedPoint[2]),w[E].newPointID=c.length/3-1,h.push(w[E]))}const x=w.length;x===2?u.push(x,w[0].newPointID,w[1].newPointID):x>2&&(f.push(x),w.forEach(E=>{f.push(E.newPointID)}))}s.getPoints().setData(Xh(o.getDataType(),c),3),u.length!==0&&s.getLines().setData(Uint16Array.from(u)),f.length!==0&&s.getPolys().setData(Uint16Array.from(f))}t.requestData=(a,s)=>{const o=a[0];if(!o){sT("Invalid or missing input");return}if(!e.cutFunction){sT("Missing cut function");return}const i=or.newInstance();r(o,i),s[0]=i}}const B8={cutFunction:null,cutScalars:null,cutValue:0};function S_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,B8,n),dn(t,e),Y1(t,e,1,1),Dn(t,e,["cutFunction","cutValue"]),N8(t,e)}const F8=Ft(S_,"vtkCutter");var b_={newInstance:F8,extend:S_};const $8=t=>t,oT=1e-6;class w_{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.matrix=ct(new Float64Array(16)),this.tmp=new Float64Array(3),this.angleConv=e?L4:$8}rotateFromDirections(e,n){const r=new Float64Array(3),a=new Float64Array(3),s=new Float64Array(16);hn(r,e[0],e[1],e[2]),hn(a,n[0],n[1],n[2]),es(r,r),es(a,a);const o=yf(r,a);return o>=1?this:(mc(this.tmp,r,a),yc(this.tmp)<oT&&(mc(this.tmp,[1,0,0],e),yc(this.tmp)<oT&&mc(this.tmp,[0,1,0],e)),Yk(s,Math.acos(o),this.tmp),Ut(this.matrix,this.matrix,s),this)}rotate(e,n){return hn(this.tmp,...n),es(this.tmp,this.tmp),ia(this.matrix,this.matrix,this.angleConv(e),this.tmp),this}rotateX(e){return U1(this.matrix,this.matrix,this.angleConv(e)),this}rotateY(e){return A1(this.matrix,this.matrix,this.angleConv(e)),this}rotateZ(e){return W1(this.matrix,this.matrix,this.angleConv(e)),this}translate(e,n,r){return hn(this.tmp,e,n,r),Rn(this.matrix,this.matrix,this.tmp),this}scale(e,n,r){return hn(this.tmp,e,n,r),so(this.matrix,this.matrix,this.tmp),this}multiply(e){return Ut(this.matrix,this.matrix,e),this}multiply3x3(e){return Ut(this.matrix,this.matrix,[e[0],e[1],e[2],0,e[3],e[4],e[5],0,e[6],e[7],e[8],0,0,0,0,1]),this}invert(){return An(this.matrix,this.matrix),this}identity(){return ct(this.matrix),this}apply(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(sd(uC,this.matrix))return this;const a=r===-1?e.length:n+r*3;for(let s=n;s<a;s+=3)hn(this.tmp,e[s],e[s+1],e[s+2]),It(this.tmp,this.tmp,this.matrix),e[s]=this.tmp[0],e[s+1]=this.tmp[1],e[s+2]=this.tmp[2];return this}getMatrix(){return this.matrix}setMatrix(e){return e&&e.length===16&&Un(this.matrix,e),this}}function U8(){return new w_(!0)}function A8(){return new w_(!1)}var Zo={buildFromDegree:U8,buildFromRadian:A8};const W8=[2,0,1,2,2,3,2,4,5,2,6,7,2,0,2,2,1,3,2,4,6,2,5,7,2,0,4,2,1,5,2,2,6,2,3,7],I8=[4,0,1,3,2,4,4,6,7,5,4,8,10,11,9,4,12,13,15,14,4,16,18,19,17,4,20,21,23,22];function P8(t,e){e.classHierarchy.push("vtkCubeSource");function n(r,a){if(e.deleted)return;const s=or.newInstance();a[0]=s;const o=24,i=A.newTypedArray(e.pointType,o*3);s.getPoints().setData(i,3);const l=A.newTypedArray(e.pointType,o*3),c=Tt.newInstance({name:"Normals",values:l,numberOfComponents:3});s.getPointData().setNormals(c);let u=2;e.generate3DTextureCoordinates===!0&&(u=3);const f=A.newTypedArray(e.pointType,o*u),d=Tt.newInstance({name:"TextureCoordinates",values:f,numberOfComponents:u});s.getPointData().setTCoords(d);const p=[0,0,0],h=[0,0,0],g=[0,0];let y=0;p[0]=-e.xLength/2,h[0]=-1,h[1]=0,h[2]=0;for(let m=0;m<2;m++){p[1]=-e.yLength/2;for(let b=0;b<2;b++){g[1]=p[1]+.5,p[2]=-e.zLength/2;for(let C=0;C<2;C++)g[0]=(p[2]+.5)*(1-2*m),i[y*3]=p[0],i[y*3+1]=p[1],i[y*3+2]=p[2],l[y*3]=h[0],l[y*3+1]=h[1],l[y*3+2]=h[2],u===2?(f[y*u]=g[0],f[y*u+1]=g[1]):(f[y*u]=2*m-1,f[y*u+1]=2*b-1,f[y*u+2]=2*C-1),y++,p[2]+=e.zLength;p[1]+=e.yLength}p[0]+=e.xLength,h[0]+=2}p[1]=-e.yLength/2,h[1]=-1,h[0]=0,h[2]=0;for(let m=0;m<2;m++){p[0]=-e.xLength/2;for(let b=0;b<2;b++){g[0]=(p[0]+.5)*(2*m-1),p[2]=-e.zLength/2;for(let C=0;C<2;C++)g[1]=(p[2]+.5)*-1,i[y*3]=p[0],i[y*3+1]=p[1],i[y*3+2]=p[2],l[y*3]=h[0],l[y*3+1]=h[1],l[y*3+2]=h[2],u===2?(f[y*u]=g[0],f[y*u+1]=g[1]):(f[y*u]=2*b-1,f[y*u+1]=2*m-1,f[y*u+2]=2*C-1),y++,p[2]+=e.zLength;p[0]+=e.xLength}p[1]+=e.yLength,h[1]+=2}p[2]=-e.zLength/2,h[2]=-1,h[0]=0,h[1]=0;for(let m=0;m<2;m++){p[1]=-e.yLength/2;for(let b=0;b<2;b++){g[1]=p[1]+.5,p[0]=-e.xLength/2;for(let C=0;C<2;C++)g[0]=(p[0]+.5)*(2*m-1),i[y*3]=p[0],i[y*3+1]=p[1],i[y*3+2]=p[2],l[y*3]=h[0],l[y*3+1]=h[1],l[y*3+2]=h[2],u===2?(f[y*u]=g[0],f[y*u+1]=g[1]):(f[y*u]=2*C-1,f[y*u+1]=2*b-1,f[y*u+2]=2*m-1),y++,p[0]+=e.xLength;p[1]+=e.yLength}p[2]+=e.zLength,h[2]+=2}if(e.rotations&&Zo.buildFromDegree().rotateX(e.rotations[0]).rotateY(e.rotations[1]).rotateZ(e.rotations[2]).apply(i).apply(l),e.center&&Zo.buildFromRadian().translate(...e.center).apply(i),e.matrix){Zo.buildFromRadian().setMatrix(e.matrix).apply(i);const m=[e.matrix[0],e.matrix[1],e.matrix[2],0,e.matrix[4],e.matrix[5],e.matrix[6],0,e.matrix[8],e.matrix[9],e.matrix[10],0,0,0,0,1];Zo.buildFromRadian().setMatrix(m).apply(l)}e.generateFaces?s.getPolys().deepCopy(e._polys):s.getPolys().initialize(),e.generateLines?(s.getLines().deepCopy(e._lineCells),s.getPointData().setNormals(null)):s.getLines().initialize(),s.modified()}t.setBounds=function(){let r=[];if(Array.isArray(arguments.length<=0?void 0:arguments[0]))r=arguments.length<=0?void 0:arguments[0];else for(let a=0;a<arguments.length;a++)r.push(a<0||arguments.length<=a?void 0:arguments[a]);r.length===6&&(t.setXLength(r[1]-r[0]),t.setYLength(r[3]-r[2]),t.setZLength(r[5]-r[4]),t.setCenter([(r[0]+r[1])/2,(r[2]+r[3])/2,(r[4]+r[5])/2]))},t.requestData=n}const G8={xLength:1,yLength:1,zLength:1,pointType:"Float64Array",generate3DTextureCoordinates:!1,generateFaces:!0,generateLines:!1};function T_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,G8,n),A.obj(t,e),A.setGet(t,e,["xLength","yLength","zLength","generate3DTextureCoordinates","generateFaces","generateLines"]),A.setGetArray(t,e,["center","rotations"],3),A.setGetArray(t,e,["matrix"],16),e._polys=Fc.newInstance({values:Uint16Array.from(I8)}),e._lineCells=Fc.newInstance({values:Uint16Array.from(W8)}),A.moveToProtected(t,e,["polys","lineCells"]),A.algo(t,e,0,1),P8(t,e)}const z8=A.newInstance(T_,"vtkCubeSource");var x_={newInstance:z8,extend:T_};const{vtkErrorMacro:iT}=A;function H8(t,e){e.classHierarchy.push("vtkImageDataOutlineFilter");const n={...t};t.requestData=(r,a)=>{const s=r[0];if(!s||!s.isA("vtkImageData")){iT("Invalid or missing input");return}const o=s.getSpatialExtent();if(!o){iT("Unable to fetch spatial extents of input image.");return}e._cubeSource.setBounds(o),e._cubeSource.setMatrix(s.getIndexToWorld()),a[0]=e._cubeSource.getOutputData()},t.getMTime=()=>Math.max(n.getMTime(),e._cubeSource.getMTime()),t.setGenerateFaces=e._cubeSource.setGenerateFaces,t.setGenerateLines=e._cubeSource.setGenerateLines,t.getGenerateFaces=e._cubeSource.getGenerateFaces,t.getGenerateLines=e._cubeSource.getGenerateLines}const K8={};function E_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,K8,n),A.obj(t,e),A.algo(t,e,1,1),e._cubeSource=x_.newInstance(),A.moveToProtected(t,e,["cubeSource","tmpOut"]),H8(t,e)}const j8=A.newInstance(E_,"vtkImageDataOutlineFilter");var Y8={newInstance:j8,extend:E_};let RC;function q8(t,e){e.classHierarchy.push("vtkAbstractTransform","vtkHomogeneousTransform","vtkTransform"),t.transformPoint=(n,r)=>(It(r,n,e.matrix),r),t.transformPoints=(n,r)=>{const a=new Float64Array(3),s=new Float64Array(3);for(let o=0;o<n.length;o+=3)a[0]=n[o],a[1]=n[o+1],a[2]=n[o+2],It(s,a,e.matrix),r[o]=s[0],r[o+1]=s[1],r[o+2]=s[2];return r},t.preMultiply=()=>{t.setPreMultiplyFlag(!0)},t.postMultiply=()=>{t.setPreMultiplyFlag(!1)},t.transformMatrix=(n,r)=>(e.preMultiplyFlag?Ut(r,e.matrix,n):Ut(r,n,e.matrix),r),t.transformMatrices=(n,r)=>{const a=new Float64Array(16),s=new Float64Array(16),o=e.preMultiplyFlag?()=>Ut(s,e.matrix,a):()=>Ut(s,a,e.matrix);for(let i=0;i<n.length;i+=16){for(let l=0;l<16;++l)a[l]=n[i+l];o();for(let l=0;l<16;++l)r[i+l]=s[l]}return r},t.getInverse=()=>RC({matrix:bs.invertMatrix(Array.from(e.matrix),[],4),preMultiplyFlag:e.preMultiplyFlag})}const X8={preMultiplyFlag:!1,matrix:[...uC]};function k_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,X8,n),A.obj(t,e),A.setGet(t,e,["preMultiplyFlag"]),A.setGetArray(t,e,["matrix"],16),q8(t,e)}RC=A.newInstance(k_,"vtkTransform");var Z8={newInstance:RC,extend:k_},J8=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkImageResliceMapperVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

// all variables that represent positions or directions have a suffix
// indicating the coordinate system they are in. The possible values are
// MC - Model coordinates
// WC - World coordinates
// VC - View coordinates
// DC - Display coordinates
// TC - Texture coordinates

// frag position in VC
//VTK::PositionVC::Dec

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// camera and actor matrix values
//VTK::Camera::Dec

void main()
{
  //VTK::PositionVC::Impl

  //VTK::TCoord::Impl

  //VTK::Picking::Impl
}
`,Q8=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkImageResliceMapperFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the gpu image mapper fragment shader

// VC position of this fragment
//VTK::PositionVC::Dec

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// handle coincident offsets
//VTK::Coincident::Dec

//VTK::ZBuffer::Dec

// the output of this shader
//VTK::Output::Dec

void main()
{
  // VC position of this fragment. This should not branch/return/discard.
  //VTK::PositionVC::Impl

  // Place any calls that require uniform flow (e.g. dFdx) here.
  //VTK::UniformFlow::Impl

  // Set gl_FragDepth here (gl_FragCoord.z by default)
  //VTK::Depth::Impl

  // Early depth peeling abort:
  //VTK::DepthPeeling::PreColor

  //VTK::TCoord::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }

  //VTK::DepthPeeling::Impl

  //VTK::Picking::Impl

  // handle coincident offsets
  //VTK::Coincident::Impl

  //VTK::ZBuffer::Impl

  //VTK::RenderPassFragmentShader::Impl
}
`;const il={NEAREST:0,LINEAR:1};var eH={InterpolationType:il};const{vtkErrorMacro:ki}=nr;function lT(t,e,n){if(e){const r=t.getIndependentComponents();return`${e.getMTime()}-${r}-${n}`}return"0"}function cT(t,e,n){return e.identity(n),t.reduce((r,a,s)=>s===0?a?e.copy(r,a):e.identity(r):a?e.multiply(r,r,a):r,n)}function tH(t,e){e.classHierarchy.push("vtkOpenGLImageResliceMapper"),t.buildPass=r=>{if(r){e.currentRenderPass=null,e._openGLImageSlice=t.getFirstAncestorOfType("vtkOpenGLImageSlice"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer");const a=e._openGLRenderer.getRenderable();e._openGLCamera=e._openGLRenderer.getViewNodeFor(a.getActiveCamera()),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow)}},t.translucentPass=(r,a)=>{r&&(e.currentRenderPass=a,t.render())},t.zBufferPass=r=>{r&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=r=>t.zBufferPass(r),t.opaquePass=r=>{r&&t.render()},t.getCoincidentParameters=(r,a)=>e.renderable.getResolveCoincidentTopology()?e.renderable.getCoincidentTopologyPolygonOffsetParameters():null,t.render=()=>{const r=e._openGLImageSlice.getRenderable(),a=e._openGLRenderer.getRenderable();t.renderPiece(a,r)},t.renderPiece=(r,a)=>{if(t.invokeEvent({type:"StartEvent"}),e.renderable.update(),e.currentInput=e.renderable.getInputData(),!e.currentInput){ki("No input!");return}t.updateResliceGeometry(),t.renderPieceStart(r,a),t.renderPieceDraw(r,a),t.renderPieceFinish(r,a),t.invokeEvent({type:"EndEvent"})},t.renderPieceStart=(r,a)=>{t.updateBufferObjects(r,a),a.getProperty().getInterpolationType()===il.NEAREST?(e.openGLTexture.setMinificationFilter(wt.NEAREST),e.openGLTexture.setMagnificationFilter(wt.NEAREST),e.colorTexture.setMinificationFilter(wt.NEAREST),e.colorTexture.setMagnificationFilter(wt.NEAREST),e.pwfTexture.setMinificationFilter(wt.NEAREST),e.pwfTexture.setMagnificationFilter(wt.NEAREST)):(e.openGLTexture.setMinificationFilter(wt.LINEAR),e.openGLTexture.setMagnificationFilter(wt.LINEAR),e.colorTexture.setMinificationFilter(wt.LINEAR),e.colorTexture.setMagnificationFilter(wt.LINEAR),e.pwfTexture.setMinificationFilter(wt.LINEAR),e.pwfTexture.setMagnificationFilter(wt.LINEAR)),e.lastBoundBO=null},t.renderPieceDraw=(r,a)=>{const s=e.context;e.openGLTexture.activate(),e.colorTexture.activate(),e.pwfTexture.activate(),t.updateShaders(e.tris,r,a),s.drawArrays(s.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),e.openGLTexture.deactivate(),e.colorTexture.deactivate(),e.pwfTexture.deactivate()},t.renderPieceFinish=(r,a)=>{},t.updateBufferObjects=(r,a)=>{t.getNeedToRebuildBufferObjects(r,a)&&t.buildBufferObjects(r,a)},t.getNeedToRebuildBufferObjects=(r,a)=>e.VBOBuildTime.getMTime()<t.getMTime()||e.VBOBuildTime.getMTime()<a.getMTime()||e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<a.getProperty().getMTime()||e.VBOBuildTime.getMTime()<e.currentInput.getMTime()||e.VBOBuildTime.getMTime()<e.resliceGeom.getMTime(),t.buildBufferObjects=(r,a)=>{var w;const s=e.currentInput;if(!s)return;const o=(w=s.getPointData())==null?void 0:w.getScalars();if(!o)return;e._scalars!==o&&(e._openGLRenderWindow.releaseGraphicsResourcesForObject(e._scalars),e._scalars=o);const i=o.getNumberOfComponents();let l=`${s.getMTime()}A${o.getMTime()}`;const c=e._openGLRenderWindow.getGraphicsResourceForObject(o);if(!(c!=null&&c.vtkObj)||(c==null?void 0:c.hash)!==l||e.openGLTextureString!==l){e.openGLTexture||(e.openGLTexture=Gt.newInstance(),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow));const x=s.getDimensions();e.openGLTexture.setOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),e.openGLTexture.releaseGraphicsResources(e._openGLRenderWindow),e.openGLTexture.resetFormatAndType(),e.openGLTexture.create3DFilterableFromDataArray(x[0],x[1],x[2],o),e.openGLTextureString=l,o&&e._openGLRenderWindow.setGraphicsResourceForObject(o,e.openGLTexture,e.openGLTextureString)}else e.openGLTexture=c.vtkObj,e.openGLTextureString=c.hash;const f=a.getProperty(),d=f.getIndependentComponents(),p=d?i:1,h=d?2*p:1,g=f.getRGBTransferFunction();l=lT(f,g,p);const y=e._openGLRenderWindow.getGraphicsResourceForObject(g);if(!(y!=null&&y.vtkObj)||(y==null?void 0:y.hash)!==l||e.colorTextureString!==l){const E=1024*h*3,O=new Uint8ClampedArray(E);if(e.colorTexture||(e.colorTexture=Gt.newInstance(),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow)),g){const k=new Float32Array(3072);for(let M=0;M<p;M++){const D=f.getRGBTransferFunction(M),I=D.getRange();if(D.getTable(I[0],I[1],1024,k,1),d)for(let B=0;B<1024*3;B++)O[M*1024*6+B]=255*k[B],O[M*1024*6+B+1024*3]=255*k[B];else for(let B=0;B<1024*3;B++)O[M*1024*6+B]=255*k[B]}e.colorTexture.releaseGraphicsResources(e._openGLRenderWindow),e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw(1024,h,3,jt.UNSIGNED_CHAR,O)}else{for(let k=0;k<1024*3;++k)O[k]=255*k/(1023*3),O[k+1]=255*k/(1023*3),O[k+2]=255*k/(1023*3);e.colorTexture.releaseGraphicsResources(e._openGLRenderWindow),e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw(1024,1,3,jt.UNSIGNED_CHAR,O)}e.colorTextureString=l,g&&e._openGLRenderWindow.setGraphicsResourceForObject(g,e.colorTexture,e.colorTextureString)}else e.colorTexture=y.vtkObj,e.colorTextureString=y.hash;const b=f.getPiecewiseFunction();l=lT(f,b,p);const C=e._openGLRenderWindow.getGraphicsResourceForObject(b);if(!(C!=null&&C.vtkObj)||(C==null?void 0:C.hash)!==l||e.pwfTextureString!==l){const E=1024*h,O=new Uint8ClampedArray(E);if(e.pwfTexture||(e.pwfTexture=Gt.newInstance(),e.pwfTexture.setOpenGLRenderWindow(e._openGLRenderWindow)),b){const k=new Float32Array(E),M=new Float32Array(1024);for(let D=0;D<p;++D){const I=f.getPiecewiseFunction(D);if(I===null)k.fill(1);else{const B=I.getRange();if(I.getTable(B[0],B[1],1024,M,1),d)for(let F=0;F<1024;F++)k[D*1024*2+F]=M[F],k[D*1024*2+F+1024]=M[F];else for(let F=0;F<1024;F++)k[D*1024*2+F]=M[F]}}e.pwfTexture.releaseGraphicsResources(e._openGLRenderWindow),e.pwfTexture.resetFormatAndType(),e.pwfTexture.create2DFromRaw(1024,h,1,jt.FLOAT,k)}else O.fill(255),e.pwfTexture.releaseGraphicsResources(e._openGLRenderWindow),e.pwfTexture.resetFormatAndType(),e.pwfTexture.create2DFromRaw(1024,1,1,jt.UNSIGNED_CHAR,O);e.pwfTextureString=l,b&&e._openGLRenderWindow.setGraphicsResourceForObject(b,e.pwfTexture,e.pwfTextureString)}else e.pwfTexture=C.vtkObj,e.pwfTextureString=C.hash;const T=`${e.resliceGeom.getMTime()}A${e.renderable.getSlabThickness()}`;if(!e.tris.getCABO().getElementCount()||e.VBOBuildString!==T){const x=Tt.newInstance({numberOfComponents:3,values:e.resliceGeom.getPoints().getData()});x.setName("points");const E=Tt.newInstance({numberOfComponents:1,values:e.resliceGeom.getPolys().getData()}),O={points:x,cellOffset:0};if(e.renderable.getSlabThickness()>0){const k=e.resliceGeom.getPointData().getNormals();k?O.normals=k:ki("Slab mode requested without normals")}e.tris.getCABO().createVBO(E,"polys",Er.SURFACE,O)}e.VBOBuildString=T,e.VBOBuildTime.modified()},t.updateShaders=(r,a,s)=>{if(e.lastBoundBO=r,t.getNeedToRebuildShaders(r,a,s)){const o={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(o,a,s);const i=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(o.Vertex,o.Fragment,o.Geometry);i!==r.getProgram()&&(r.setProgram(i),r.getVAO().releaseGraphicsResources()),r.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(r.getProgram());r.getVAO().bind(),t.setMapperShaderParameters(r,a,s),t.setCameraShaderParameters(r,a,s),t.setPropertyShaderParameters(r,a,s)},t.setMapperShaderParameters=(r,a,s)=>{const o=r.getProgram();if(r.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){o.isUniformUsed("texture1")&&o.setUniformi("texture1",e.openGLTexture.getTextureUnit()),o.isAttributeUsed("vertexWC")&&(r.getVAO().addAttributeArray(o,r.getCABO(),"vertexWC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||ki("Error setting vertexWC in shader VAO.")),o.isAttributeUsed("normalWC")&&(r.getVAO().addAttributeArray(o,r.getCABO(),"normalWC",r.getCABO().getNormalOffset(),r.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||ki("Error setting normalWC in shader VAO.")),o.isUniformUsed("slabThickness")&&o.setUniformf("slabThickness",e.renderable.getSlabThickness()),o.isUniformUsed("spacing")&&o.setUniform3fv("spacing",e.currentInput.getSpacing()),o.isUniformUsed("slabType")&&o.setUniformi("slabType",e.renderable.getSlabType()),o.isUniformUsed("slabType")&&o.setUniformi("slabType",e.renderable.getSlabType()),o.isUniformUsed("slabTrapezoid")&&o.setUniformi("slabTrapezoid",e.renderable.getSlabTrapezoidIntegration());const l=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null;if(o.isUniformUsed("WCTCMatrix")){const c=e.currentInput,u=c.getDimensions();Un(e.tmpMat4,c.getIndexToWorld()),so(e.tmpMat4,e.tmpMat4,u),An(e.tmpMat4,e.tmpMat4),l&&Ut(e.tmpMat4,e.tmpMat4,l),o.setUniformMatrix("WCTCMatrix",e.tmpMat4)}o.isUniformUsed("vboScaling")&&o.setUniform3fv("vboScaling",r.getCABO().getCoordScale()),r.getAttributeUpdateTime().modified()}if(e.haveSeenDepthRequest&&r.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),r.getProgram().isUniformUsed("coffset")){const i=t.getCoincidentParameters(a,s);r.getProgram().setUniformf("coffset",i.offset),r.getProgram().isUniformUsed("cfactor")&&r.getProgram().setUniformf("cfactor",i.factor)}},t.setCameraShaderParameters=(r,a,s)=>{const o=e._openGLCamera.getKeyMatrices(a),i=e._openGLImageSlice.getKeyMatrices(),c=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,u=r.getProgram();u.isUniformUsed("MCPCMatrix")&&(ct(e.tmpMat4),u.setUniformMatrix("MCPCMatrix",cT([o.wcpc,i.mcwc,c],vf,e.tmpMat4))),u.isUniformUsed("MCVCMatrix")&&(ct(e.tmpMat4),u.setUniformMatrix("MCVCMatrix",cT([o.wcvc,i.mcwc,c],vf,e.tmpMat4)))},t.setPropertyShaderParameters=(r,a,s)=>{const o=r.getProgram(),i=s.getProperty(),l=i.getOpacity();o.setUniformf("opacity",l);const c=e.openGLTexture.getComponents(),u=i.getIndependentComponents();if(u)for(let h=0;h<c;++h)o.setUniformf(`mix${h}`,i.getComponentWeight(h));const f=e.openGLTexture.getVolumeInfo();for(let h=0;h<c;h++){let g=i.getColorWindow(),y=i.getColorLevel();const m=u?h:0,b=i.getRGBTransferFunction(m);if(b&&i.getUseLookupTableScalarRange()){const T=b.getRange();g=T[1]-T[0],y=.5*(T[1]+T[0])}const C=f.scale[h]/g,S=(f.offset[h]-y)/g+.5;o.setUniformf(`cshift${h}`,S),o.setUniformf(`cscale${h}`,C)}const d=e.colorTexture.getTextureUnit();o.setUniformi("colorTexture1",d);for(let h=0;h<c;h++){let g=1,y=0;const m=u?h:0,b=i.getPiecewiseFunction(m);if(b){const C=b.getRange(),S=C[1]-C[0],T=.5*(C[0]+C[1]);g=f.scale[h]/S,y=(f.offset[h]-T)/S+.5}o.setUniformf(`pwfshift${h}`,y),o.setUniformf(`pwfscale${h}`,g)}const p=e.pwfTexture.getTextureUnit();o.setUniformi("pwfTexture1",p),o.setUniform4fv("backgroundColor",e.renderable.getBackgroundColor())},t.getNeedToRebuildShaders=(r,a,s)=>{var d;const o=e.openGLTexture.getComponents(),i=s.getProperty().getIndependentComponents(),l=e.renderable.getSlabThickness(),c=e.renderable.getSlabType(),u=e.renderable.getSlabTrapezoidIntegration();let f=!1;return(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(f=!0),f||e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||((d=r.getProgram())==null?void 0:d.getHandle())===0||e.lastTextureComponents!==o||e.lastIndependentComponents!==i||e.lastSlabThickness!==l||e.lastSlabType!==c||e.lastSlabTrapezoidIntegration!==u?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,e.lastTextureComponents=o,e.lastIndependentComponents=i,e.lastSlabThickness=l,e.lastSlabType=c,e.lastSlabTrapezoidIntegration=u,!0):!1},t.getShaderTemplate=(r,a,s)=>{r.Vertex=J8,r.Fragment=Q8,r.Geometry=""},t.replaceShaderValues=(r,a,s)=>{if(t.replaceShaderTCoord(r,a,s),t.replaceShaderPositionVC(r,a,s),e.haveSeenDepthRequest){let o=r.Fragment;o=ue.substitute(o,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,o=ue.substitute(o,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,r.Fragment=o}t.replaceShaderCoincidentOffset(r,a,s)},t.replaceShaderTCoord=(r,a,s)=>{let o=r.Vertex;const i=r.Geometry;let l=r.Fragment;const c=["uniform mat4 WCTCMatrix;","out vec3 fragTexCoord;"],u=e.renderable.getSlabThickness();o=ue.substitute(o,"//VTK::TCoord::Dec",c).result;const f=["fragTexCoord = (WCTCMatrix * vertexWC).xyz;"];o=ue.substitute(o,"//VTK::TCoord::Impl",f).result;const d=e.openGLTexture.getComponents(),p=s.getProperty().getIndependentComponents();let h=["in vec3 fragTexCoord;","uniform highp sampler3D texture1;","uniform mat4 WCTCMatrix;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform float opacity;","uniform vec4 backgroundColor;"];if(p){for(let y=1;y<d;y++)h=h.concat([`uniform float cshift${y};`,`uniform float cscale${y};`,`uniform float pwfshift${y};`,`uniform float pwfscale${y};`]);switch(d){case 1:h=h.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:h=h.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:h=h.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:h=h.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:ki("Unsupported number of independent coordinates.")}}u>0&&(h=h.concat(["uniform vec3 spacing;","uniform float slabThickness;","uniform int slabType;","uniform int slabTrapezoid;","uniform vec3 vboScaling;"]),h=h.concat(["vec4 compositeValue(vec4 currVal, vec4 valToComp, int trapezoid)","{","  vec4 retVal = vec4(1.0);","  if (slabType == 0) // min","  {","    retVal = min(currVal, valToComp);","  }","  else if (slabType == 1) // max","  {","    retVal = max(currVal, valToComp);","  }","  else if (slabType == 3) // sum","  {","    retVal = currVal + (trapezoid > 0 ? 0.5 * valToComp : valToComp); ","  }","  else // mean","  {","    retVal = currVal + (trapezoid > 0 ? 0.5 * valToComp : valToComp); ","  }","  return retVal;","}"])),l=ue.substitute(l,"//VTK::TCoord::Dec",h).result;let g=["if (any(greaterThan(fragTexCoord, vec3(1.0))) || any(lessThan(fragTexCoord, vec3(0.0))))","{","  // set the background color and exit","  gl_FragData[0] = backgroundColor;","  return;","}","vec4 tvalue = texture(texture1, fragTexCoord);"];if(u>0&&(g=g.concat(["// Get the first and last samples","int numSlices = 1;","float scaling = min(min(spacing.x, spacing.y), spacing.z) * 0.5;","vec3 normalxspacing = scaling * normalWCVSOutput;","float distTraveled = length(normalxspacing);","int trapezoid = 0;","while (distTraveled < slabThickness * 0.5)","{","  distTraveled += length(normalxspacing);","  float fnumSlices = float(numSlices);","  if (distTraveled > slabThickness * 0.5)","  {","    // Before stepping outside the slab, sample at the boundaries","    normalxspacing = normalWCVSOutput * slabThickness * 0.5 / fnumSlices;","    trapezoid = slabTrapezoid;","  }","  vec3 fragTCoordNeg = (WCTCMatrix * vec4(vertexWCVSOutput.xyz - fnumSlices * normalxspacing * vboScaling, 1.0)).xyz;","  if (!any(greaterThan(fragTCoordNeg, vec3(1.0))) && !any(lessThan(fragTCoordNeg, vec3(0.0))))","  {","    vec4 newVal = texture(texture1, fragTCoordNeg);","    tvalue = compositeValue(tvalue, newVal, trapezoid);","    numSlices += 1;","  }","  vec3 fragTCoordPos = (WCTCMatrix * vec4(vertexWCVSOutput.xyz + fnumSlices * normalxspacing * vboScaling, 1.0)).xyz;","  if (!any(greaterThan(fragTCoordNeg, vec3(1.0))) && !any(lessThan(fragTCoordNeg, vec3(0.0))))","  {","    vec4 newVal = texture(texture1, fragTCoordPos);","    tvalue = compositeValue(tvalue, newVal, trapezoid);","    numSlices += 1;","  }","}","// Finally, if slab type is *mean*, divide the sum by the numSlices","if (slabType == 2)","{","  tvalue = tvalue / float(numSlices);","}"])),p){const y=["r","g","b","a"];for(let m=0;m<d;++m)g=g.concat([`vec3 tcolor${m} = mix${m} * texture2D(colorTexture1, vec2(tvalue.${y[m]} * cscale${m} + cshift${m}, height${m})).rgb;`,`float compWeight${m} = mix${m} * texture2D(pwfTexture1, vec2(tvalue.${y[m]} * pwfscale${m} + pwfshift${m}, height${m})).r;`]);switch(d){case 1:g=g.concat(["gl_FragData[0] = vec4(tcolor0.rgb, compWeight0 * opacity);"]);break;case 2:g=g.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:g=g.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:g=g.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:ki("Unsupported number of independent coordinates.")}}else switch(d){case 1:g=g.concat(["// Dependent components","float intensity = tvalue.r;","vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;","float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;","gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);"]);break;case 2:g=g.concat(["float intensity = tvalue.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tvalue.g + pwfshift0);"]);break;case 3:g=g.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]);break;default:g=g.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"])}l=ue.substitute(l,"//VTK::TCoord::Impl",g).result,r.Vertex=o,r.Fragment=l,r.Geometry=i},t.replaceShaderPositionVC=(r,a,s)=>{let o=r.Vertex;const i=r.Geometry;let l=r.Fragment;const c=e.renderable.getSlabThickness();let u=["attribute vec4 vertexWC;"];u=u.concat([`//${t.getMTime()}${e.resliceGeomUpdateString}`]),c>0&&(u=u.concat(["attribute vec3 normalWC;","varying vec3 normalWCVSOutput;","varying vec4 vertexWCVSOutput;"])),o=ue.substitute(o,"//VTK::PositionVC::Dec",u).result;let f=["gl_Position = MCPCMatrix * vertexWC;"];c>0&&(f=f.concat(["normalWCVSOutput = normalWC;","vertexWCVSOutput = vertexWC;"])),o=ue.substitute(o,"//VTK::PositionVC::Impl",f).result,o=ue.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result;let d=[];c>0&&(d=d.concat(["varying vec3 normalWCVSOutput;","varying vec4 vertexWCVSOutput;"])),l=ue.substitute(l,"//VTK::PositionVC::Dec",d).result,r.Vertex=o,r.Geometry=i,r.Fragment=l};function n(r){bs.normalize(r);const a=[0,0,0];for(let s=0;s<3;++s){VU(a),a[s]=1;const o=bs.dot(r,a);if(o<-.999||o>.999)return[!0,s]}return[!1,2]}t.updateResliceGeometry=()=>{var u;let r="";const a=e.currentInput,s=a==null?void 0:a.getBounds();let o=!0,i=2;const l=e.renderable.getSlicePolyData(),c=e.renderable.getSlicePlane();if(l)r=r.concat(`PolyData${l.getMTime()}`);else if(c){r=r.concat(`Plane${c.getMTime()}`),a&&(r=r.concat(`Image${a.getMTime()}`));const f=Kk(a==null?void 0:a.getDirection());Qf(f,f);const d=[...c.getNormal()];Gp(d,d,f),[o,i]=n(d)}else{const f=Ms.newInstance();f.setNormal(0,0,1);let d=[0,1,0,1,0,1];a&&(d=s),f.setOrigin(d[0],d[2],.5*(d[5]+d[4])),e.renderable.setSlicePlane(f),r=r.concat(`Plane${c==null?void 0:c.getMTime()}`),a&&(r=r.concat(`Image${a.getMTime()}`))}if(!e.resliceGeom||e.resliceGeomUpdateString!==r){if(l)e.resliceGeom||(e.resliceGeom=or.newInstance()),e.resliceGeom.getPoints().setData(l.getPoints().getData(),3),e.resliceGeom.getPolys().setData(l.getPolys().getData(),1),e.resliceGeom.getPointData().setNormals(l.getPointData().getNormals());else if(c)if(o){const f=new Float32Array(12),d=a.worldToIndex(c.getOrigin(),[0,0,0]),p=[(i+1)%3,(i+2)%3].sort(),h=a.getDimensions(),g=[0,h[0]-1,0,h[1]-1,0,h[2]-1];let y=0;for(let T=0;T<2;++T)for(let w=0;w<2;++w)f[y+i]=d[i],f[y+p[0]]=g[2*p[0]+w],f[y+p[1]]=g[2*p[1]+T],y+=3;e.transform.setMatrix(a.getIndexToWorld()),e.transform.transformPoints(f,f);const m=new Uint16Array(8);m[0]=3,m[1]=0,m[2]=1,m[3]=3,m[4]=3,m[5]=0,m[6]=3,m[7]=2;const b=c.getNormal();bs.normalize(b);const C=new Float32Array(12);for(let T=0;T<4;++T)C[3*T]=b[0],C[3*T+1]=b[1],C[3*T+2]=b[2];e.resliceGeom||(e.resliceGeom=or.newInstance()),e.resliceGeom.getPoints().setData(f,3),e.resliceGeom.getPolys().setData(m,1);const S=Tt.newInstance({numberOfComponents:3,values:C,name:"Normals"});e.resliceGeom.getPointData().setNormals(S)}else{e.outlineFilter.setInputData(a),e.cutter.setInputConnection(e.outlineFilter.getOutputPort()),e.cutter.setCutFunction(c),e.lineToSurfaceFilter.setInputConnection(e.cutter.getOutputPort()),e.lineToSurfaceFilter.update(),e.resliceGeom||(e.resliceGeom=or.newInstance());const f=e.lineToSurfaceFilter.getOutputData();e.resliceGeom.getPoints().setData(f.getPoints().getData(),3),e.resliceGeom.getPolys().setData(f.getPolys().getData(),1),e.resliceGeom.getPointData().setNormals(f.getPointData().getNormals());const d=c.getNormal(),p=e.resliceGeom.getNumberOfPoints();bs.normalize(d);const h=new Float32Array(p*3);for(let y=0;y<p;++y)h[3*y]=d[0],h[3*y+1]=d[1],h[3*y+2]=d[2];const g=Tt.newInstance({numberOfComponents:3,values:h,name:"Normals"});e.resliceGeom.getPointData().setNormals(g)}else ki("Something went wrong.","A default slice plane should have been created in the beginning of","updateResliceGeometry.");e.resliceGeomUpdateString=r,(u=e.resliceGeom)==null||u.modified()}},t.setOpenGLTexture=r=>{r&&(e.openGLTexture=r,e._externalOpenGLTexture=!0)}}const nH={VBOBuildTime:{},VBOBuildString:null,haveSeenDepthRequest:!1,lastHaveSeenDepthRequest:!1,lastIndependentComponents:!1,lastTextureComponents:0,lastSlabThickness:0,lastSlabTrapezoidIntegration:0,lastSlabType:-1,openGLTexture:null,openGLTextureString:null,colorTextureString:null,pwfTextureString:null,resliceGeom:null,resliceGeomUpdateString:null,tris:null,colorTexture:null,pwfTexture:null,_externalOpenGLTexture:!1,_scalars:null};function rH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,nH,n),gn.extend(t,e,n),io.implementReplaceShaderCoincidentOffset(t,e,n),io.implementBuildShadersWithReplacements(t,e,n),e.tris=Ba.newInstance(),e.openGLTexture=null,e.colorTexture=null,e.pwfTexture=null,e.VBOBuildTime={},dn(e.VBOBuildTime),e.tmpMat4=ct(new Float64Array(16)),e.outlineFilter=Y8.newInstance(),e.outlineFilter.setGenerateFaces(!0),e.outlineFilter.setGenerateLines(!1),e.cubePolyData=or.newInstance(),e.cutter=b_.newInstance(),e.lineToSurfaceFilter=C_.newInstance(),e.transform=Z8.newInstance(),wr(t,e,["openGLTexture"]),tH(t,e)}const aH=Ft(rH,"vtkOpenGLImageResliceMapper");Xn("vtkImageResliceMapper",aH);const ll={NONE:-1,I:0,J:1,K:2,X:3,Y:4,Z:5};var uv={SlicingMode:ll};const{vtkErrorMacro:ql}=nr,{SlicingMode:Ua}=uv;function uT(t,e,n){if(e){const r=t.getIndependentComponents();return`${e.getMTime()}-${r}-${n}`}return"0"}function sH(t){const e=t.split(`
`),n=[];for(let r=0;r<e.length;++r){const a=e[r].trim();a.length>0&&n.push(a)}return n}function oH(t,e){e.classHierarchy.push("vtkOpenGLImageMapper"),t.buildPass=n=>{if(n){e.currentRenderPass=null,e.openGLImageSlice=t.getFirstAncestorOfType("vtkOpenGLImageSlice"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow);const r=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(r.getActiveCamera()),e.renderable.isA("vtkImageMapper")&&e.renderable.getSliceAtFocalPoint()&&e.renderable.setSliceFromCamera(r.getActiveCamera())}},t.translucentPass=(n,r)=>{n&&(e.currentRenderPass=r,t.render())},t.zBufferPass=n=>{n&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=n=>t.zBufferPass(n),t.opaquePass=n=>{n&&t.render()},t.getCoincidentParameters=(n,r)=>e.renderable.getResolveCoincidentTopology()?e.renderable.getCoincidentTopologyPolygonOffsetParameters():null,t.render=()=>{const n=e.openGLImageSlice.getRenderable(),r=e._openGLRenderer.getRenderable();t.renderPiece(r,n)},t.getShaderTemplate=(n,r,a)=>{n.Vertex=OC,n.Fragment=ld,n.Geometry=""},t.replaceShaderValues=(n,r,a)=>{let s=n.Vertex,o=n.Fragment;s=ue.substitute(s,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,s=ue.substitute(s,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result,s=ue.substitute(s,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result,s=ue.substitute(s,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result;const i=e.openGLTexture.getComponents(),l=a.getProperty().getIndependentComponents();let c=["varying vec2 tcoordVCVSOutput;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;","uniform sampler2D texture1;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform sampler2D labelOutlineTexture1;","uniform float opacity;","uniform float outlineOpacity;"];if(l){for(let f=1;f<i;f++)c=c.concat([`uniform float cshift${f};`,`uniform float cscale${f};`,`uniform float pwfshift${f};`,`uniform float pwfscale${f};`]);switch(i){case 1:c=c.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:c=c.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:c=c.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:c=c.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:ql("Unsupported number of independent coordinates.")}}if(o=ue.substitute(o,"//VTK::TCoord::Dec",c).result,a.getProperty().getUseLabelOutline()===!0&&(o=ue.substitute(o,"//VTK::LabelOutline::Dec",["uniform int outlineThickness;","uniform float vpWidth;","uniform float vpHeight;","uniform float vpOffsetX;","uniform float vpOffsetY;","uniform mat4 PCWCMatrix;","uniform mat4 vWCtoIDX;","uniform ivec3 imageDimensions;"]).result,o=ue.substitute(o,"//VTK::ImageLabelOutlineOn","#define vtkImageLabelOutlineOn").result,o=ue.substitute(o,"//VTK::LabelOutlineHelperFunction",["#ifdef vtkImageLabelOutlineOn","vec3 fragCoordToIndexSpace(vec4 fragCoord) {","  vec4 pcPos = vec4(","    (fragCoord.x / vpWidth - vpOffsetX - 0.5) * 2.0,","    (fragCoord.y / vpHeight - vpOffsetY - 0.5) * 2.0,","    (fragCoord.z - 0.5) * 2.0,","    1.0);","","  vec4 worldCoord = PCWCMatrix * pcPos;","  vec4 vertex = (worldCoord/worldCoord.w);","","  vec3 index = (vWCtoIDX * vertex).xyz;","","  // half voxel fix for labelmapOutline","  return (index + vec3(0.5)) / vec3(imageDimensions);","}","#endif"]).result),l){const f=["r","g","b","a"];let d=["vec4 tvalue = texture2D(texture1, tcoordVCVSOutput);"];for(let p=0;p<i;p++)d=d.concat([`vec3 tcolor${p} = mix${p} * texture2D(colorTexture1, vec2(tvalue.${f[p]} * cscale${p} + cshift${p}, height${p})).rgb;`,`float compWeight${p} = mix${p} * texture2D(pwfTexture1, vec2(tvalue.${f[p]} * pwfscale${p} + pwfshift${p}, height${p})).r;`]);switch(i){case 1:d=d.concat(["gl_FragData[0] = vec4(tcolor0.rgb, opacity);"]);break;case 2:d=d.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:d=d.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:d=d.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:ql("Unsupported number of independent coordinates.")}o=ue.substitute(o,"//VTK::TCoord::Impl",d).result}else switch(i){case 1:o=ue.substitute(o,"//VTK::TCoord::Impl",[...sH(`
                #ifdef vtkImageLabelOutlineOn
                  vec3 centerPosIS = fragCoordToIndexSpace(gl_FragCoord); 
                  float centerValue = texture2D(texture1, centerPosIS.xy).r;
                  bool pixelOnBorder = false;
                  vec3 tColor = texture2D(colorTexture1, vec2(centerValue * cscale0 + cshift0, 0.5)).rgb;
                  float scalarOpacity = texture2D(pwfTexture1, vec2(centerValue * pwfscale0 + pwfshift0, 0.5)).r;
                  float opacityToUse = scalarOpacity * opacity;
                  int segmentIndex = int(centerValue * 255.0);
                  float textureCoordinate = float(segmentIndex - 1) / 1024.0;
                  float textureValue = texture2D(labelOutlineTexture1, vec2(textureCoordinate, 0.5)).r;
                  int actualThickness = int(textureValue * 255.0);

                  if (segmentIndex == 0){
                    gl_FragData[0] = vec4(0.0, 1.0, 1.0, 0.0);
                    return;
                  }

                  if (actualThickness == 0) {
                    gl_FragData[0] = vec4(0.0, 0.0, 1.0, 1.0);
                    return;
                  }

                  for (int i = -actualThickness; i <= actualThickness; i++) {
                    for (int j = -actualThickness; j <= actualThickness; j++) {
                      if (i == 0 || j == 0) {
                        continue;
                      }
                      vec4 neighborPixelCoord = vec4(gl_FragCoord.x + float(i),
                        gl_FragCoord.y + float(j),
                        gl_FragCoord.z, gl_FragCoord.w);
                      vec3 neighborPosIS = fragCoordToIndexSpace(neighborPixelCoord);
                      float value = texture2D(texture1, neighborPosIS.xy).r;
                      if (value != centerValue) {
                        pixelOnBorder = true;
                        break;
                      }
                    }
                    if (pixelOnBorder == true) {
                      break;
                    }
                  }
                  if (pixelOnBorder == true) {
                    gl_FragData[0] = vec4(tColor, outlineOpacity);
                  }
                  else {
                    gl_FragData[0] = vec4(tColor, opacityToUse);
                  }
                #else
                  float intensity = texture2D(texture1, tcoordVCVSOutput).r;
                  vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;
                  float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;
                  gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);
                #endif
                `)]).result;break;case 2:o=ue.substitute(o,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","float intensity = tcolor.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tcolor.g + pwfshift0);"]).result;break;case 3:o=ue.substitute(o,"//VTK::TCoord::Impl",["vec4 tcolor = cscale0*texture2D(texture1, tcoordVCVSOutput.st) + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]).result;break;default:o=ue.substitute(o,"//VTK::TCoord::Impl",["vec4 tcolor = cscale0*texture2D(texture1, tcoordVCVSOutput.st) + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"]).result}e.haveSeenDepthRequest&&(o=ue.substitute(o,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,o=ue.substitute(o,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),n.Vertex=s,n.Fragment=o,t.replaceShaderClip(n,r,a),t.replaceShaderCoincidentOffset(n,r,a)},t.replaceShaderClip=(n,r,a)=>{let s=n.Vertex,o=n.Fragment;if(e.renderable.getNumberOfClippingPlanes()){let i=e.renderable.getNumberOfClippingPlanes();i>6&&(Pt("OpenGL has a limit of 6 clipping planes"),i=6),s=ue.substitute(s,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[6];","varying float clipDistancesVSOutput[6];"]).result,s=ue.substitute(s,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,o=ue.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[6];"]).result,o=ue.substitute(o,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}n.Vertex=s,n.Fragment=o},t.getNeedToRebuildShaders=(n,r,a)=>{var l;const s=e.openGLTexture.getComponents(),o=a.getProperty().getIndependentComponents();let i=!1;return(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(i=!0),i||e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||((l=n.getProgram())==null?void 0:l.getHandle())===0||e.lastTextureComponents!==s||e.lastIndependentComponents!==o?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,e.lastTextureComponents=s,e.lastIndependentComponents=o,!0):!1},t.updateShaders=(n,r,a)=>{if(e.lastBoundBO=n,t.getNeedToRebuildShaders(n,r,a)){const s={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(s,r,a);const o=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(s.Vertex,s.Fragment,s.Geometry);o!==n.getProgram()&&(n.setProgram(o),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),t.setMapperShaderParameters(n,r,a),t.setCameraShaderParameters(n,r,a),t.setPropertyShaderParameters(n,r,a)},t.setMapperShaderParameters=(n,r,a)=>{n.getCABO().getElementCount()&&(e.VBOBuildTime>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&(n.getProgram().isAttributeUsed("vertexMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"vertexMC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||ql("Error setting vertexMC in shader VAO.")),n.getProgram().isAttributeUsed("tcoordMC")&&n.getCABO().getTCoordOffset()&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"tcoordMC",n.getCABO().getTCoordOffset(),n.getCABO().getStride(),e.context.FLOAT,n.getCABO().getTCoordComponents(),e.context.FALSE)||ql("Error setting tcoordMC in shader VAO.")),n.getAttributeUpdateTime().modified());const s=e.openGLTexture.getTextureUnit();n.getProgram().setUniformi("texture1",s);const o=e.openGLTexture.getComponents(),i=a.getProperty().getIndependentComponents();if(i)for(let p=0;p<o;p++)n.getProgram().setUniformf(`mix${p}`,a.getProperty().getComponentWeight(p));const l=e.openGLTexture.getShiftAndScale();for(let p=0;p<o;p++){let h=a.getProperty().getColorWindow(),g=a.getProperty().getColorLevel();const y=i?p:0,m=a.getProperty().getRGBTransferFunction(y);if(m&&a.getProperty().getUseLookupTableScalarRange()){const S=m.getRange();h=S[1]-S[0],g=.5*(S[1]+S[0])}const b=l.scale/h,C=(l.shift-g)/h+.5;n.getProgram().setUniformf(`cshift${p}`,C),n.getProgram().setUniformf(`cscale${p}`,b)}for(let p=0;p<o;p++){let h=1,g=0;const y=i?p:0,m=a.getProperty().getPiecewiseFunction(y);if(m){const b=m.getRange(),C=b[1]-b[0],S=.5*(b[0]+b[1]);h=l.scale/C,g=(l.shift-S)/C+.5}n.getProgram().setUniformf(`pwfshift${p}`,g),n.getProgram().setUniformf(`pwfscale${p}`,h)}if(e.haveSeenDepthRequest&&n.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),n.getProgram().isUniformUsed("coffset")){const p=t.getCoincidentParameters(r,a);n.getProgram().setUniformf("coffset",p.offset),n.getProgram().isUniformUsed("cfactor")&&n.getProgram().setUniformf("cfactor",p.factor)}const c=e.colorTexture.getTextureUnit();n.getProgram().setUniformi("colorTexture1",c);const u=e.pwfTexture.getTextureUnit();n.getProgram().setUniformi("pwfTexture1",u);const f=e.labelOutlineThicknessTexture.getTextureUnit();if(n.getProgram().setUniformi("labelOutlineTexture1",f),e.renderable.getNumberOfClippingPlanes()){let p=e.renderable.getNumberOfClippingPlanes();p>6&&(Pt("OpenGL has a limit of 6 clipping planes"),p=6);const g=n.getCABO().getCoordShiftAndScaleEnabled()?n.getCABO().getInverseShiftAndScaleMatrix():null,y=g?Un(e.imagematinv,a.getMatrix()):a.getMatrix();g&&($t(y,y),Ut(y,y,g),$t(y,y)),$t(e.imagemat,e.currentInput.getIndexToWorld()),Ut(e.imagematinv,y,e.imagemat);const m=[];for(let b=0;b<p;b++){const C=[];e.renderable.getClippingPlaneInDataCoords(e.imagematinv,b,C);for(let S=0;S<4;S++)m.push(C[S])}n.getProgram().setUniformi("numClipPlanes",p),n.getProgram().setUniform4fv("clipPlanes",m)}if(a.getProperty().getUseLabelOutline()===!0){const p=a.getProperty().getLabelOutlineOpacity();n.getProgram().setUniformf("outlineOpacity",p)}},t.setCameraShaderParameters=(n,r,a)=>{const s=n.getProgram(),o=e.openGLImageSlice.getKeyMatrices(),i=e.currentInput,l=i.getIndexToWorld();Ut(e.imagemat,o.mcwc,l);const c=e.openGLCamera.getKeyMatrices(r);if(Ut(e.imagemat,c.wcpc,e.imagemat),n.getCABO().getCoordShiftAndScaleEnabled()){const f=n.getCABO().getInverseShiftAndScaleMatrix();Ut(e.imagemat,e.imagemat,f)}if(s.setUniformMatrix("MCPCMatrix",e.imagemat),a.getProperty().getUseLabelOutline()===!0){const f=i.getWorldToIndex(),d=i.getDimensions();s.setUniform3i("imageDimensions",d[0],d[1],1),s.setUniformMatrix("vWCtoIDX",f);const p=e.openGLCamera.getKeyMatrices(r);An(e.projectionToWorld,p.wcpc),e.openGLCamera.getKeyMatrices(r),s.setUniformMatrix("PCWCMatrix",e.projectionToWorld);const h=t.getRenderTargetSize();s.setUniformf("vpWidth",h[0]),s.setUniformf("vpHeight",h[1]);const g=t.getRenderTargetOffset();s.setUniformf("vpOffsetX",g[0]/h[0]),s.setUniformf("vpOffsetY",g[1]/h[1])}},t.setPropertyShaderParameters=(n,r,a)=>{const s=n.getProgram(),i=a.getProperty().getOpacity();s.setUniformf("opacity",i)},t.renderPieceStart=(n,r)=>{t.updateBufferObjects(n,r),e.lastBoundBO=null},t.renderPieceDraw=(n,r)=>{const a=e.context;e.openGLTexture.activate(),e.colorTexture.activate(),e.labelOutlineThicknessTexture.activate(),e.pwfTexture.activate(),e.tris.getCABO().getElementCount()&&(t.updateShaders(e.tris,n,r),a.drawArrays(a.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release()),e.openGLTexture.deactivate(),e.colorTexture.deactivate(),e.labelOutlineThicknessTexture.deactivate(),e.pwfTexture.deactivate()},t.renderPieceFinish=(n,r)=>{},t.renderPiece=(n,r)=>{if(t.invokeEvent({type:"StartEvent"}),e.renderable.update(),e.currentInput=e.renderable.getCurrentImage(),t.invokeEvent({type:"EndEvent"}),!e.currentInput){ql("No input!");return}t.renderPieceStart(n,r),t.renderPieceDraw(n,r),t.renderPieceFinish(n,r)},t.computeBounds=(n,r)=>{if(!t.getInput()){fu(e.bounds);return}e.bounds=t.getInput().getBounds()},t.updateBufferObjects=(n,r)=>{t.getNeedToRebuildBufferObjects(n,r)&&t.buildBufferObjects(n,r)},t.getNeedToRebuildBufferObjects=(n,r)=>e.VBOBuildTime.getMTime()<t.getMTime()||e.VBOBuildTime.getMTime()<r.getMTime()||e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<r.getProperty().getMTime()||e.VBOBuildTime.getMTime()<e.currentInput.getMTime(),t.buildBufferObjects=(n,r)=>{var M,D;const a=e.currentInput;if(!a)return;const s=a.getPointData()&&a.getPointData().getScalars();if(!s)return;const o=s.getDataType(),i=s.getNumberOfComponents(),l=r.getProperty(),c=l.getInterpolationType(),u=l.getIndependentComponents(),f=u?i:1,d=u?2*f:1,p=l.getRGBTransferFunction(),h=uT(l,p,f),g=e._openGLRenderWindow.getGraphicsResourceForObject(p);if(!(g!=null&&g.vtkObj)||(g==null?void 0:g.hash)!==h||e.colorTextureString!==h){const B=1024*d*3,F=new Uint8ClampedArray(B);if(e.colorTexture||(e.colorTexture=Gt.newInstance({resizable:!0}),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow)),c===il.NEAREST?(e.colorTexture.setMinificationFilter(wt.NEAREST),e.colorTexture.setMagnificationFilter(wt.NEAREST)):(e.colorTexture.setMinificationFilter(wt.LINEAR),e.colorTexture.setMagnificationFilter(wt.LINEAR)),p){const $=new Float32Array(3072);for(let N=0;N<f;N++){const W=l.getRGBTransferFunction(N),_=W.getRange();if(W.getTable(_[0],_[1],1024,$,1),u)for(let L=0;L<1024*3;L++)F[N*1024*6+L]=255*$[L],F[N*1024*6+L+1024*3]=255*$[L];else for(let L=0;L<1024*3;L++)F[N*1024*6+L]=255*$[L]}e.colorTexture.releaseGraphicsResources(e._openGLRenderWindow),e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw(1024,d,3,jt.UNSIGNED_CHAR,F)}else{for(let $=0;$<1024*3;++$)F[$]=255*$/(1023*3),F[$+1]=255*$/(1023*3),F[$+2]=255*$/(1023*3);e.colorTexture.create2DFromRaw(1024,1,3,jt.UNSIGNED_CHAR,F)}e.colorTextureString=h,p&&e._openGLRenderWindow.setGraphicsResourceForObject(p,e.colorTexture,e.colorTextureString)}else e.colorTexture=g.vtkObj,e.colorTextureString=g.hash;const m=l.getPiecewiseFunction(),b=uT(l,m,f),C=e._openGLRenderWindow.getGraphicsResourceForObject(m);if(!(C!=null&&C.vtkObj)||(C==null?void 0:C.hash)!==b||e.pwfTextureString!==b){const B=1024*d,F=new Uint8ClampedArray(B);if(e.pwfTexture||(e.pwfTexture=Gt.newInstance({resizable:!0}),e.pwfTexture.setOpenGLRenderWindow(e._openGLRenderWindow)),c===il.NEAREST?(e.pwfTexture.setMinificationFilter(wt.NEAREST),e.pwfTexture.setMagnificationFilter(wt.NEAREST)):(e.pwfTexture.setMinificationFilter(wt.LINEAR),e.pwfTexture.setMagnificationFilter(wt.LINEAR)),m){const $=new Float32Array(B),N=new Float32Array(1024);for(let W=0;W<f;++W){const _=l.getPiecewiseFunction(W);if(_===null)$.fill(1);else{const L=_.getRange();if(_.getTable(L[0],L[1],1024,N,1),u)for(let G=0;G<1024;G++)$[W*1024*2+G]=N[G],$[W*1024*2+G+1024]=N[G];else for(let G=0;G<1024;G++)$[W*1024*2+G]=N[G]}}e.pwfTexture.releaseGraphicsResources(e._openGLRenderWindow),e.pwfTexture.resetFormatAndType(),e.pwfTexture.create2DFromRaw(1024,d,1,jt.FLOAT,$)}else F.fill(255),e.pwfTexture.create2DFromRaw(1024,1,1,jt.UNSIGNED_CHAR,F);e.pwfTextureString=b,m&&e._openGLRenderWindow.setGraphicsResourceForObject(m,e.pwfTexture,e.pwfTextureString)}else e.pwfTexture=C.vtkObj,e.pwfTextureString=C.hash;t.updatelabelOutlineThicknessTexture(r);const{ijkMode:T}=e.renderable.getClosestIJKAxis();let w=e.renderable.getSlice();T!==e.renderable.getSlicingMode()&&(w=e.renderable.getSliceAtPosition(w));const x=e.renderable.isA("vtkImageArrayMapper")?e.renderable.getSubSlice():Math.round(w),E=a.getExtent();let O;T===Ua.I&&(O=x-E[0]),T===Ua.J&&(O=x-E[2]),(T===Ua.K||T===Ua.NONE)&&(O=x-E[4]);const k=`${w}A${a.getMTime()}A${s.getMTime()}B${t.getMTime()}C${e.renderable.getSlicingMode()}D${r.getProperty().getInterpolationType()}`;if(e.VBOBuildString!==k){const I=a.getDimensions();e.openGLTexture||(e.openGLTexture=Gt.newInstance({resizable:!0}),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow)),e.openGLTexture.setOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),c===il.NEAREST?(new Set([1,3,4]).has(i)&&o===jt.UNSIGNED_CHAR&&!u&&e.openGLTexture.setGenerateMipmap(!0),e.openGLTexture.setMinificationFilter(wt.NEAREST),e.openGLTexture.setMagnificationFilter(wt.NEAREST)):(i===4&&o===jt.UNSIGNED_CHAR&&!u?(e.openGLTexture.setGenerateMipmap(!0),e.openGLTexture.setMinificationFilter(wt.LINEAR_MIPMAP_LINEAR)):e.openGLTexture.setMinificationFilter(wt.LINEAR),e.openGLTexture.setMagnificationFilter(wt.LINEAR)),e.openGLTexture.setWrapS(wf.CLAMP_TO_EDGE),e.openGLTexture.setWrapT(wf.CLAMP_TO_EDGE);const B=I[0]*I[1]*i,F=new Float32Array(12),$=new Float32Array(8);for(let se=0;se<4;se++)$[se*2]=se%2?1:0,$[se*2+1]=se>1?1:0;const N=[Ua.X,Ua.Y,Ua.Z].includes(e.renderable.getSlicingMode())?w:x,W=a.getSpatialExtent(),_=s.getData();let L=null;if(T===Ua.I){L=new _.constructor(I[2]*I[1]*i);let se=0;for(let ie=0;ie<I[2];ie++)for(let re=0;re<I[1];re++){let be=(O+re*I[0]+ie*I[0]*I[1])*i;se=(ie*I[1]+re)*i;const ge=be+i;for(;be<ge;)L[se++]=_[be++]}I[0]=I[1],I[1]=I[2],F[0]=N,F[1]=W[2],F[2]=W[4],F[3]=N,F[4]=W[3],F[5]=W[4],F[6]=N,F[7]=W[2],F[8]=W[5],F[9]=N,F[10]=W[3],F[11]=W[5]}else if(T===Ua.J){L=new _.constructor(I[2]*I[0]*i);let se=0;for(let ie=0;ie<I[2];ie++)for(let re=0;re<I[0];re++){let be=(re+O*I[0]+ie*I[0]*I[1])*i;se=(ie*I[0]+re)*i;const ge=be+i;for(;be<ge;)L[se++]=_[be++]}I[1]=I[2],F[0]=W[0],F[1]=N,F[2]=W[4],F[3]=W[1],F[4]=N,F[5]=W[4],F[6]=W[0],F[7]=N,F[8]=W[5],F[9]=W[1],F[10]=N,F[11]=W[5]}else T===Ua.K||T===Ua.NONE?(L=_.subarray(O*B,(O+1)*B),F[0]=W[0],F[1]=W[2],F[2]=N,F[3]=W[1],F[4]=W[2],F[5]=N,F[6]=W[0],F[7]=W[3],F[8]=N,F[9]=W[1],F[10]=W[3],F[11]=N):ql("Reformat slicing not yet supported.");const G=e._openGLRenderWindow.getGraphicsResourceForObject(L);G!=null&&G.vtkObj?(e.openGLTexture=G.vtkObj,e.VBOBuildString=G.hash):(e._scalars!==L&&(e._openGLRenderWindow.releaseGraphicsResourcesForObject(e._scalars),e._scalars=L),e.openGLTexture.resetFormatAndType(),e.openGLTexture.create2DFilterableFromRaw(I[0],I[1],i,s.getDataType(),L,(D=(M=e.renderable).getPreferSizeOverAccuracy)==null?void 0:D.call(M)),e._openGLRenderWindow.setGraphicsResourceForObject(L,e.openGLTexture,e.VBOBuildString)),e.openGLTexture.activate(),e.openGLTexture.sendParameters(),e.openGLTexture.deactivate();const K=Tt.newInstance({numberOfComponents:3,values:F});K.setName("points");const Y=Tt.newInstance({numberOfComponents:2,values:$});Y.setName("tcoords");const te=new Uint16Array(8);te[0]=3,te[1]=0,te[2]=1,te[3]=3,te[4]=3,te[5]=0,te[6]=3,te[7]=2;const ve=Tt.newInstance({numberOfComponents:1,values:te});e.tris.getCABO().createVBO(ve,"polys",Er.SURFACE,{points:K,tcoords:Y,cellOffset:0}),e.VBOBuildTime.modified(),e.VBOBuildString=k}},t.updatelabelOutlineThicknessTexture=n=>{e.labelOutlineThicknessTexture||(e.labelOutlineThicknessTexture=Gt.newInstance({resizable:!1}),e.labelOutlineThicknessTexture.setOpenGLRenderWindow(e._openGLRenderWindow));const r=n.getProperty().getLabelOutlineThickness(),a=e._openGLRenderWindow.getGraphicsResourceForObject(r),s=`${r.join("-")}`;if(!(a!=null&&a.vtkObj)||(a==null?void 0:a.hash)!==s||e.labelOutlineThicknessTextureString!==s){const u=new Uint8Array(1024);for(let f=0;f<1024;++f){const d=r[f]||r[0];u[f]=d}e.labelOutlineThicknessTexture.releaseGraphicsResources(e._openGLRenderWindow),e.labelOutlineThicknessTexture.resetFormatAndType(),e.labelOutlineThicknessTexture.setMinificationFilter(wt.NEAREST),e.labelOutlineThicknessTexture.setMagnificationFilter(wt.NEAREST),e.labelOutlineThicknessTexture.create2DFromRaw(1024,1,1,jt.UNSIGNED_CHAR,u),e.labelOutlineThicknessTextureString=s,r&&e._openGLRenderWindow.setGraphicsResourceForObject(r,e.labelOutlineThicknessTexture,e.labelOutlineThicknessTextureString)}else e.labelOutlineThicknessTexture=a.vtkObj,e.labelOutlineThicknessTextureString=a.hash},t.getRenderTargetSize=()=>{if(e._useSmallViewport)return[e._smallViewportWidth,e._smallViewportHeight];const{usize:n,vsize:r}=e._openGLRenderer.getTiledSizeAndOrigin();return[n,r]},t.getRenderTargetOffset=()=>{const{lowerLeftU:n,lowerLeftV:r}=e._openGLRenderer.getTiledSizeAndOrigin();return[n,r]}}const iH={VBOBuildTime:0,VBOBuildString:null,openGLTexture:null,tris:null,imagemat:null,imagematinv:null,colorTexture:null,pwfTexture:null,labelOutlineThicknessTexture:null,labelOutlineThicknessTextureString:null,lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastTextureComponents:0,_scalars:null};function lH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,iH,n),gn.extend(t,e,n),io.implementReplaceShaderCoincidentOffset(t,e,n),io.implementBuildShadersWithReplacements(t,e,n),e.tris=Ba.newInstance(),e.imagemat=ct(new Float64Array(16)),e.imagematinv=ct(new Float64Array(16)),e.projectionToWorld=ct(new Float64Array(16)),e.idxToView=ct(new Float64Array(16)),e.idxNormalMatrix=Oa(new Float64Array(9)),e.modelToView=ct(new Float64Array(16)),e.projectionToView=ct(new Float64Array(16)),Dn(t,e,[]),e.VBOBuildTime={},dn(e.VBOBuildTime),oH(t,e)}const cH=Ft(lH,"vtkOpenGLImageMapper");Xn("vtkAbstractImageMapper",cH);const{vtkErrorMacro:Xd}=A;function fT(t,e,n){if(e.apply(t)){const a=t.getIndependentComponents();return`${t.getMTime()}-${a}-${n}`}return"0"}function uH(t,e){e.classHierarchy.push("vtkOpenGLImageCPRMapper"),t.buildPass=n=>{n&&(e.currentRenderPass=null,e.openGLImageSlice=t.getFirstAncestorOfType("vtkOpenGLImageSlice"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext(),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.volumeTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.pwfTexture.setOpenGLRenderWindow(e._openGLRenderWindow))},t.opaquePass=(n,r)=>{n&&(e.currentRenderPass=r,t.render())},t.opaqueZBufferPass=n=>{n&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.getCoincidentParameters=(n,r)=>e.renderable.getResolveCoincidentTopology()?e.renderable.getCoincidentTopologyPolygonOffsetParameters():null,t.render=()=>{const n=e.openGLImageSlice.getRenderable(),r=e._openGLRenderer.getRenderable();t.renderPiece(r,n)},t.renderPiece=(n,r)=>{t.invokeEvent({type:"StartEvent"}),e.renderable.update(),t.invokeEvent({type:"EndEvent"}),e.renderable.preRenderCheck()&&(e.currentImageDataInput=e.renderable.getInputData(0),e.currentCenterlineInput=e.renderable.getOrientedCenterline(),t.renderPieceStart(n,r),t.renderPieceDraw(n,r),t.renderPieceFinish(n,r))},t.renderPieceStart=(n,r)=>{t.updateBufferObjects(n,r)},t.renderPieceDraw=(n,r)=>{const a=e.context;e.volumeTexture.activate(),e.colorTexture.activate(),e.pwfTexture.activate(),e.tris.getCABO().getElementCount()&&(t.updateShaders(e.tris,n,r),a.drawArrays(a.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release()),e.volumeTexture.deactivate(),e.colorTexture.deactivate(),e.pwfTexture.deactivate()},t.renderPieceFinish=(n,r)=>{},t.updateBufferObjects=(n,r)=>{t.getNeedToRebuildBufferObjects(n,r)&&t.buildBufferObjects(n,r)},t.getNeedToRebuildBufferObjects=(n,r)=>{const a=e.VBOBuildTime.getMTime();return a<t.getMTime()||a<e.renderable.getMTime()||a<r.getMTime()||a<e.currentImageDataInput.getMTime()||a<e.currentCenterlineInput.getMTime()},t.buildBufferObjects=(n,r)=>{const a=e.currentImageDataInput,s=e.currentCenterlineInput;r.getProperty().getInterpolationType()===il.NEAREST?(e.volumeTexture.setMinificationFilter(wt.NEAREST),e.volumeTexture.setMagnificationFilter(wt.NEAREST),e.colorTexture.setMinificationFilter(wt.NEAREST),e.colorTexture.setMagnificationFilter(wt.NEAREST),e.pwfTexture.setMinificationFilter(wt.NEAREST),e.pwfTexture.setMagnificationFilter(wt.NEAREST)):(e.volumeTexture.setMinificationFilter(wt.LINEAR),e.volumeTexture.setMagnificationFilter(wt.LINEAR),e.colorTexture.setMinificationFilter(wt.LINEAR),e.colorTexture.setMagnificationFilter(wt.LINEAR),e.pwfTexture.setMinificationFilter(wt.LINEAR),e.pwfTexture.setMagnificationFilter(wt.LINEAR));const i=a.getMTime();if(e.volumeTextureTime!==i){const y=a.getDimensions(),m=a.getPointData().getScalars();if(!m)return;e.volumeTexture.setOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),e.volumeTexture.releaseGraphicsResources(e._openGLRenderWindow),e.volumeTexture.resetFormatAndType(),e.volumeTexture.create3DFilterableFromRaw(y[0],y[1],y[2],m.getNumberOfComponents(),m.getDataType(),m.getData(),e.renderable.getPreferSizeOverAccuracy()),e.volumeTextureTime=i}const l=a.getPointData()&&a.getPointData().getScalars();if(!l)return;const c=l.getNumberOfComponents(),u=r.getProperty(),f=u.getIndependentComponents(),d=f?c:1,p=f?2*d:1,h=fT(u,u.getRGBTransferFunction,d);if(e.colorTextureString!==h){const m=1024*p*3,b=new Uint8ClampedArray(m);let C=u.getRGBTransferFunction();if(C){const S=new Float32Array(3072);for(let T=0;T<d;T++){C=u.getRGBTransferFunction(T);const w=C.getRange();if(C.getTable(w[0],w[1],1024,S,1),f)for(let x=0;x<1024*3;x++)b[T*1024*6+x]=255*S[x],b[T*1024*6+x+1024*3]=255*S[x];else for(let x=0;x<1024*3;x++)b[T*1024*6+x]=255*S[x]}e.colorTexture.releaseGraphicsResources(e._openGLRenderWindow),e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw(1024,p,3,jt.UNSIGNED_CHAR,b)}else{for(let S=0;S<1024*3;++S)b[S]=255*S/(1023*3),b[S+1]=255*S/(1023*3),b[S+2]=255*S/(1023*3);e.colorTexture.create2DFromRaw(1024,1,3,jt.UNSIGNED_CHAR,b)}e.colorTextureString=h}const g=fT(u,u.getPiecewiseFunction,d);if(e.pwfTextureString!==g){const m=1024*p,b=new Uint8ClampedArray(m);let C=u.getPiecewiseFunction();if(e.pwfTexture.releaseGraphicsResources(e._openGLRenderWindow),e.pwfTexture.resetFormatAndType(),C){const S=new Float32Array(m),T=new Float32Array(1024);for(let w=0;w<d;++w)if(C=u.getPiecewiseFunction(w),C===null)S.fill(1);else{const x=C.getRange();if(C.getTable(x[0],x[1],1024,T,1),f)for(let E=0;E<1024;E++)S[w*1024*2+E]=T[E],S[w*1024*2+E+1024]=T[E];else for(let E=0;E<1024;E++)S[w*1024*2+E]=T[E]}e.pwfTexture.create2DFromRaw(1024,p,1,jt.FLOAT,S)}else b.fill(255),e.pwfTexture.create2DFromRaw(1024,1,1,jt.UNSIGNED_CHAR,b);e.pwfTextureString=g}if(e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<s.getMTime()){const y=s.getNumberOfPoints(),m=y<=1?0:y-1,b=s.getDistancesToFirstPoint(),C=e.renderable.getHeight(),S=4*m,T=new Float32Array(3*S),w=e.renderable.getWidth();for(let W=0,_=0;W<m;++W)T.set([0,C-b[W],0],_),_+=3,T.set([w,C-b[W],0],_),_+=3,T.set([w,C-b[W+1],0],_),_+=3,T.set([0,C-b[W+1],0],_),_+=3;const x=Tt.newInstance({numberOfComponents:3,values:T});x.setName("points");const E=new Uint16Array(5*m);for(let W=0,_=0,L=0;W<m;++W)E.set([4,L+3,L+2,L+1,L],_),_+=5,L+=4;const O=Tt.newInstance({numberOfComponents:1,values:E}),k=s.getPoints(),M=new Float32Array(3*S),D=new Array(3),I=new Array(3);for(let W=0,_=0;W<m;++W)k.getPoint(W,D),k.getPoint(W+1,I),M.set(D,_),_+=3,M.set(D,_),_+=3,M.set(I,_),_+=3,M.set(I,_),_+=3;const B=Tt.newInstance({numberOfComponents:3,values:M,name:"centerlinePosition"}),F=new Float32Array(S);for(let W=0,_=0;W<m;++W)F.set([0,1,3,2],_),_+=4;const $=Tt.newInstance({numberOfComponents:1,values:F,name:"quadIndex"}),N=[B,$];if(!e.renderable.getUseUniformOrientation()){const W=e.renderable.getCenterlineTangentDirections(),_=new Float32Array(3*S),L=new Float32Array(3*S);for(let Y=0,te=0;Y<m;++Y){const ve=3*Y;for(let se=0;se<4;++se)_[te+0]=W[ve+0],_[te+1]=W[ve+1],_[te+2]=W[ve+2],L[te+0]=W[ve+3],L[te+1]=W[ve+4],L[te+2]=W[ve+5],te+=3}const G=Tt.newInstance({numberOfComponents:3,values:_,name:"centerlineTopDirection"}),K=Tt.newInstance({numberOfComponents:3,values:L,name:"centerlineBotDirection"});N.push(G,K)}e.tris.getCABO().createVBO(O,"polys",Er.SURFACE,{points:x,customAttributes:N}),e.VBOBuildTime.modified()}},t.getNeedToRebuildShaders=(n,r,a)=>{const s=e.volumeTexture.getComponents(),o=a.getProperty().getIndependentComponents(),i=!!e.renderable.getCenterPoint(),l=e.renderable.getUseUniformOrientation();return n.getProgram()===0||e.lastUseCenterPoint!==i||e.lastUseUniformOrientation!==l||e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||e.lastTextureComponents!==s||e.lastIndependentComponents!==o?(e.lastUseCenterPoint=i,e.lastUseUniformOrientation=l,e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,e.lastTextureComponents=s,e.lastIndependentComponents=o,!0):!1},t.buildShaders=(n,r,a)=>{t.getShaderTemplate(n,r,a),t.replaceShaderValues(n,r,a)},t.replaceShaderValues=(n,r,a)=>{let s=n.Vertex,o=n.Fragment;s=ue.substitute(s,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,s=ue.substitute(s,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result;const i=["attribute vec3 centerlinePosition;","attribute float quadIndex;","uniform float width;","out vec2 quadOffsetVSOutput;","out vec3 centerlinePosVSOutput;"],l=e.renderable.getUseUniformOrientation();l?i.push("out vec3 centerlineDirVSOutput;","uniform vec3 centerlineDirection;"):i.push("out vec3 centerlineTopDirVSOutput;","out vec3 centerlineBotDirVSOutput;","out float centerlineAngleVSOutput;","attribute vec3 centerlineTopDirection;","attribute vec3 centerlineBotDirection;"),s=ue.substitute(s,"//VTK::Color::Dec",i).result;const c=["quadOffsetVSOutput = vec2(width * (mod(quadIndex, 2.0) == 0.0 ? -0.5 : 0.5), quadIndex > 1.0 ? 0.0 : 1.0);","centerlinePosVSOutput = centerlinePosition;"];l?c.push("centerlineDirVSOutput = centerlineDirection;"):c.push("vec3 sumVec = centerlineTopDirection + centerlineBotDirection;","float sumLen2 = dot(sumVec, sumVec);","float diffLen2 = 4.0 - sumLen2;","if (diffLen2 < 0.001) {","  // vectors are too close to each other, use lerp","  centerlineAngleVSOutput = -1.0; // use negative angle as a flag for lerp","  centerlineTopDirVSOutput = centerlineTopDirection;","  centerlineBotDirVSOutput = centerlineBotDirection;","} else if (sumLen2 == 0.0) {","  // vector are opposite to each other, don't make a choice for the user","  // use slerp without direction, it will display the centerline color on each row of pixel","  centerlineAngleVSOutput = 0.0;","  centerlineTopDirVSOutput = vec3(0.0);","  centerlineBotDirVSOutput = vec3(0.0);","} else {","  // use slerp","  centerlineAngleVSOutput = 2.0 * atan(sqrt(diffLen2/sumLen2));","  float sinAngle = sin(centerlineAngleVSOutput);","  centerlineTopDirVSOutput = centerlineTopDirection / sinAngle;","  centerlineBotDirVSOutput = centerlineBotDirection / sinAngle;","}"),s=ue.substitute(s,"//VTK::Color::Impl",c).result;const u=e.volumeTexture.getComponents(),f=a.getProperty().getIndependentComponents();let d=["uniform mat4 MCTCMatrix; // Model coordinates to texture coordinates","in vec2 quadOffsetVSOutput;","in vec3 centerlinePosVSOutput;","uniform highp sampler3D volumeTexture;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform float opacity;","uniform vec4 backgroundColor;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;"];l?d.push("in vec3 centerlineDirVSOutput;"):d.push("in vec3 centerlineTopDirVSOutput;","in vec3 centerlineBotDirVSOutput;","in float centerlineAngleVSOutput;");const p=e.renderable.getCenterPoint();if(p&&d.push("uniform vec3 globalCenterPoint;"),f){for(let g=1;g<u;g++)d=d.concat([`uniform float cshift${g};`,`uniform float cscale${g};`,`uniform float pwfshift${g};`,`uniform float pwfscale${g};`]);switch(u){case 1:d=d.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:d=d.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:d=d.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:d=d.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:Xd("Unsupported number of independent coordinates.")}}o=ue.substitute(o,"//VTK::TCoord::Dec",d).result;let h=[];if(l?h.push("vec3 interpolatedCenterlineDir = centerlineDirVSOutput;"):h.push("vec3 interpolatedCenterlineDir;","if (centerlineAngleVSOutput < 0.0) {","  // Lerp","  interpolatedCenterlineDir = quadOffsetVSOutput.y * centerlineTopDirVSOutput + (1.0 - quadOffsetVSOutput.y) * centerlineBotDirVSOutput;","} else {","  // Slerp","  float topInterpolationAngle = quadOffsetVSOutput.y * centerlineAngleVSOutput;","  float botInterpolationAngle = centerlineAngleVSOutput - topInterpolationAngle;","  interpolatedCenterlineDir = sin(topInterpolationAngle) * centerlineTopDirVSOutput + sin(botInterpolationAngle) * centerlineBotDirVSOutput;","}","// Slerp should give a normalized vector but when sin(angle) is small, rounding error occurs","// Normalize for both lerp and slerp","interpolatedCenterlineDir = normalize(interpolatedCenterlineDir);"),p?h.push("float baseOffset = dot(interpolatedCenterlineDir, globalCenterPoint - centerlinePosVSOutput);","float horizontalOffset = quadOffsetVSOutput.x + baseOffset;"):h.push("float horizontalOffset = quadOffsetVSOutput.x;"),h.push("vec3 volumePosMC = centerlinePosVSOutput + horizontalOffset * interpolatedCenterlineDir;","vec3 volumePosTC = (MCTCMatrix * vec4(volumePosMC, 1.0)).xyz;","if (any(lessThan(volumePosTC, vec3(0.0))) || any(greaterThan(volumePosTC, vec3(1.0))))","{","  // set the background color and exit","  gl_FragData[0] = backgroundColor;","  return;","}","vec4 tvalue = texture(volumeTexture, volumePosTC);"),f){const g=["r","g","b","a"];for(let y=0;y<u;++y)h=h.concat([`vec3 tcolor${y} = mix${y} * texture2D(colorTexture1, vec2(tvalue.${g[y]} * cscale${y} + cshift${y}, height${y})).rgb;`,`float compWeight${y} = mix${y} * texture2D(pwfTexture1, vec2(tvalue.${g[y]} * pwfscale${y} + pwfshift${y}, height${y})).r;`]);switch(u){case 1:h=h.concat(["gl_FragData[0] = vec4(tcolor0.rgb, compWeight0 * opacity);"]);break;case 2:h=h.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:h=h.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:h=h.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:Xd("Unsupported number of independent coordinates.")}}else switch(u){case 1:h=h.concat(["// Dependent components","float intensity = tvalue.r;","vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;","float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;","gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);"]);break;case 2:h=h.concat(["float intensity = tvalue.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tvalue.g + pwfshift0);"]);break;case 3:h=h.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]);break;default:h=h.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"])}o=ue.substitute(o,"//VTK::TCoord::Impl",h).result,e.haveSeenDepthRequest&&(o=ue.substitute(o,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,o=ue.substitute(o,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),n.Vertex=s,n.Fragment=o,t.replaceShaderClip(n,r,a),t.replaceShaderCoincidentOffset(n,r,a)},t.replaceShaderClip=(n,r,a)=>{let s=n.Vertex,o=n.Fragment;if(e.renderable.getNumberOfClippingPlanes()){let i=e.renderable.getNumberOfClippingPlanes();i>6&&(A.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),i=6),s=ue.substitute(s,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[6];","varying float clipDistancesVSOutput[6];"]).result,s=ue.substitute(s,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,o=ue.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[6];"]).result,o=ue.substitute(o,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}n.Vertex=s,n.Fragment=o},t.getShaderTemplate=(n,r,a)=>{n.Vertex=OC,n.Fragment=ld,n.Geometry=""},t.setMapperShaderParameters=(n,r,a)=>{n.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&(n.getProgram().isAttributeUsed("vertexMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"vertexMC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||Xd("Error setting vertexMC in shader VAO.")),n.getCABO().getCustomData().forEach(u=>{u&&n.getProgram().isAttributeUsed(u.name)&&!n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),u.name,u.offset,n.getCABO().getStride(),e.context.FLOAT,u.components,e.context.FALSE)&&Xd(`Error setting ${u.name} in shader VAO.`)}),n.getAttributeUpdateTime().modified());const s=e.volumeTexture.getTextureUnit();if(n.getProgram().setUniformi("volumeTexture",s),n.getProgram().setUniformf("width",e.renderable.getWidth()),n.getProgram().setUniform4f("backgroundColor",...e.renderable.getBackgroundColor()),n.getProgram().isUniformUsed("centerlineDirection")){const u=e.renderable.getUniformDirection();n.getProgram().setUniform3fArray("centerlineDirection",u)}if(n.getProgram().isUniformUsed("globalCenterPoint")){const u=e.renderable.getCenterPoint();n.getProgram().setUniform3fArray("globalCenterPoint",u)}const o=e.currentImageDataInput,i=o.getWorldToIndex(),l=P1(new Float32Array(16),sO([],o.getDimensions())),c=zg(l,l,i);if(n.getProgram().setUniformMatrix("MCTCMatrix",c),e.haveSeenDepthRequest&&n.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),e.renderable.getNumberOfClippingPlanes()){let u=e.renderable.getNumberOfClippingPlanes();u>6&&(A.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),u=6);const d=n.getCABO().getCoordShiftAndScaleEnabled()?n.getCABO().getInverseShiftAndScaleMatrix():null,p=d?Un(e.imagematinv,a.getMatrix()):a.getMatrix();d&&($t(p,p),Ut(p,p,d),$t(p,p)),$t(e.imagemat,e.currentImageDataInput.getIndexToWorld()),Ut(e.imagematinv,p,e.imagemat);const h=[];for(let g=0;g<u;g++){const y=[];e.renderable.getClippingPlaneInDataCoords(e.imagematinv,g,y);for(let m=0;m<4;m++)h.push(y[m])}n.getProgram().setUniformi("numClipPlanes",u),n.getProgram().setUniform4fv("clipPlanes",h)}if(n.getProgram().isUniformUsed("coffset")){const u=t.getCoincidentParameters(r,a);n.getProgram().setUniformf("coffset",u.offset),n.getProgram().isUniformUsed("cfactor")&&n.getProgram().setUniformf("cfactor",u.factor)}},t.setCameraShaderParameters=(n,r,a)=>{const s=e.openGLImageSlice.getKeyMatrices().mcwc,o=e.openGLCamera.getKeyMatrices(r).wcpc;if(Ut(e.imagemat,o,s),n.getCABO().getCoordShiftAndScaleEnabled()){const i=n.getCABO().getInverseShiftAndScaleMatrix();Ut(e.imagemat,e.imagemat,i)}n.getProgram().setUniformMatrix("MCPCMatrix",e.imagemat)},t.setPropertyShaderParameters=(n,r,a)=>{const s=n.getProgram(),o=a.getProperty(),i=o.getOpacity();s.setUniformf("opacity",i);const l=e.volumeTexture.getComponents(),c=o.getIndependentComponents();if(c)for(let p=0;p<l;++p)s.setUniformf(`mix${p}`,o.getComponentWeight(p));const u=e.volumeTexture.getVolumeInfo();for(let p=0;p<l;p++){let h=o.getColorWindow(),g=o.getColorLevel();const y=c?p:0,m=o.getRGBTransferFunction(y);if(m&&o.getUseLookupTableScalarRange()){const S=m.getRange();h=S[1]-S[0],g=.5*(S[1]+S[0])}const b=u.scale[p]/h,C=(u.offset[p]-g)/h+.5;s.setUniformf(`cshift${p}`,C),s.setUniformf(`cscale${p}`,b)}const f=e.colorTexture.getTextureUnit();s.setUniformi("colorTexture1",f);for(let p=0;p<l;p++){let h=1,g=0;const y=c?p:0,m=o.getPiecewiseFunction(y);if(m){const b=m.getRange(),C=b[1]-b[0],S=.5*(b[0]+b[1]);h=u.scale[p]/C,g=(u.offset[p]-S)/C+.5}s.setUniformf(`pwfshift${p}`,g),s.setUniformf(`pwfscale${p}`,h)}const d=e.pwfTexture.getTextureUnit();s.setUniformi("pwfTexture1",d)},t.updateShaders=(n,r,a)=>{if(t.getNeedToRebuildShaders(n,r,a)){const s={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(s,r,a);const o=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(s.Vertex,s.Fragment,s.Geometry);o!==n.getProgram()&&(n.setProgram(o),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),t.setMapperShaderParameters(n,r,a),t.setCameraShaderParameters(n,r,a),t.setPropertyShaderParameters(n,r,a)}}const fH={currentRenderPass:null,volumeTexture:null,volumeTextureTime:0,colorTexture:null,colorTextureString:null,pwfTexture:null,pwfTextureString:null,tris:null,lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastTextureComponents:0,lastIndependentComponents:0,imagemat:null,imagematinv:null};function dH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,fH,n),gn.extend(t,e,n),io.implementReplaceShaderCoincidentOffset(t,e,n),A.algo(t,e,2,0),e.tris=Ba.newInstance(),e.volumeTexture=Gt.newInstance(),e.colorTexture=Gt.newInstance(),e.pwfTexture=Gt.newInstance(),e.imagemat=ct(new Float64Array(16)),e.imagematinv=ct(new Float64Array(16)),e.VBOBuildTime={},A.obj(e.VBOBuildTime,{mtime:0}),uH(t,e)}const pH=A.newInstance(dH,"vtkOpenGLImageCPRMapper");Xn("vtkImageCPRMapper",pH);function gH(t,e){e.classHierarchy.push("vtkOpenGLImageSlice"),t.buildPass=n=>{if(!(!e.renderable||!e.renderable.getVisibility())&&n){if(!e.renderable)return;e._openGLRenderWindow=t.getFirstAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes()}},t.traverseZBufferPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children.forEach(r=>{r.traverse(n)}),t.apply(n,!1))},t.traverseOpaqueZBufferPass=n=>t.traverseOpaquePass(n),t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children.forEach(r=>{r.traverse(n)}),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children.forEach(r=>{r.traverse(n)}),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.zBufferPass=(n,r)=>t.opaquePass(n,r),t.opaqueZBufferPass=(n,r)=>t.opaquePass(n,r),t.opaquePass=(n,r)=>{n&&e.context.depthMask(!0)},t.translucentPass=(n,r)=>{e.context.depthMask(!n)},t.getKeyMatrices=()=>(e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(Un(e.keyMatrices.mcwc,e.renderable.getMatrix()),$t(e.keyMatrices.mcwc,e.keyMatrices.mcwc),e.keyMatrixTime.modified()),e.keyMatrices)}const hH={context:null,keyMatrixTime:null,keyMatrices:null};function vH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,hH,n),gn.extend(t,e,n),e.keyMatrixTime={},dn(e.keyMatrixTime,{mtime:0}),e.keyMatrices={mcwc:ct(new Float64Array(16))},Dn(t,e,["context"]),gH(t,e)}const yH=Ft(vH,"vtkOpenGLImageSlice");Xn("vtkImageSlice",yH);function mH(t,e){e.classHierarchy.push("vtkOpenGLVolume"),t.buildPass=n=>{!e.renderable||!e.renderable.getVisibility()||n&&(e._openGLRenderWindow=t.getFirstAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementVolumeCount()}},t.traverseVolumePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0].traverse(n),t.apply(n,!1))},t.volumePass=n=>{!e.renderable||!e.renderable.getVisibility()||e.context.depthMask(!n)},t.getKeyMatrices=()=>(e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(e.renderable.computeMatrix(),Un(e.MCWCMatrix,e.renderable.getMatrix()),$t(e.MCWCMatrix,e.MCWCMatrix),e.renderable.getIsIdentity()?Oa(e.normalMatrix):(Yh(e.normalMatrix,e.MCWCMatrix),Qf(e.normalMatrix,e.normalMatrix),F1(e.normalMatrix,e.normalMatrix)),e.keyMatrixTime.modified()),{mcwc:e.MCWCMatrix,normalMatrix:e.normalMatrix})}const CH={};function SH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,CH,n),gn.extend(t,e,n),e.keyMatrixTime={},dn(e.keyMatrixTime,{mtime:0}),e.normalMatrix=new Float64Array(9),e.MCWCMatrix=new Float64Array(16),Dn(t,e,["context"]),mH(t,e)}const bH=Ft(SH,"vtkOpenGLVolume");Xn("vtkVolume",bH);const dT={NEAREST:0,LINEAR:1,FAST_LINEAR:2},wH={FRACTIONAL:0,PROPORTIONAL:1},Ni={COMPOSITE_BLEND:0,MAXIMUM_INTENSITY_BLEND:1,MINIMUM_INTENSITY_BLEND:2,AVERAGE_INTENSITY_BLEND:3,ADDITIVE_INTENSITY_BLEND:4,RADON_TRANSFORM_BLEND:5};var TH=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

attribute vec4 vertexDC;

varying vec3 vertexVCVSOutput;
uniform mat4 PCVCMatrix;

uniform float dcxmin;
uniform float dcxmax;
uniform float dcymin;
uniform float dcymax;

void main()
{
  // dcsmall is the device coords reduced to the
  // x y area covered by the volume
  vec4 dcsmall = vec4(
    dcxmin + 0.5 * (vertexDC.x + 1.0) * (dcxmax - dcxmin),
    dcymin + 0.5 * (vertexDC.y + 1.0) * (dcymax - dcymin),
    vertexDC.z,
    vertexDC.w);
  vec4 vcpos = PCVCMatrix * dcsmall;
  vertexVCVSOutput = vcpos.xyz/vcpos.w;
  gl_Position = dcsmall;
}
`,xH=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkVolumeFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the volume mappers fragment shader

// the output of this shader
//VTK::Output::Dec

varying vec3 vertexVCVSOutput;

// first declare the settings from the mapper
// that impact the code paths in here

// always set vtkNumComponents 1,2,3,4
//VTK::NumComponents

// possibly define vtkTrilinearOn
//VTK::TrilinearOn

// possibly define vtkIndependentComponents
//VTK::IndependentComponentsOn

// possibly define any "proportional" components
//VTK::vtkProportionalComponents

// Define the blend mode to use
#define vtkBlendMode //VTK::BlendMode

// Possibly define vtkImageLabelOutlineOn
//VTK::ImageLabelOutlineOn

#ifdef vtkImageLabelOutlineOn

uniform float outlineOpacity;
uniform float vpWidth;
uniform float vpHeight;
uniform float vpOffsetX;
uniform float vpOffsetY;
uniform mat4 PCWCMatrix;
uniform mat4 vWCtoIDX;
#endif

// define vtkLightComplexity
//VTK::LightComplexity
#if vtkLightComplexity > 0
uniform float vSpecularPower;
uniform float vAmbient;
uniform float vDiffuse;
uniform float vSpecular;
//VTK::Light::Dec
#endif

//VTK::VolumeShadowOn
//VTK::SurfaceShadowOn
//VTK::localAmbientOcclusionOn
//VTK::LAO::Dec
//VTK::VolumeShadow::Dec

// define vtkComputeNormalFromOpacity
//VTK::vtkComputeNormalFromOpacity

// possibly define vtkGradientOpacityOn
//VTK::GradientOpacityOn
#ifdef vtkGradientOpacityOn
uniform float goscale0;
uniform float goshift0;
uniform float gomin0;
uniform float gomax0;
#if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)
uniform float goscale1;
uniform float goshift1;
uniform float gomin1;
uniform float gomax1;
#if vtkNumComponents >= 3
uniform float goscale2;
uniform float goshift2;
uniform float gomin2;
uniform float gomax2;
#endif
#if vtkNumComponents >= 4
uniform float goscale3;
uniform float goshift3;
uniform float gomin3;
uniform float gomax3;
#endif
#endif
#endif

// if you want to see the raw tiled
// data in webgl1 uncomment the following line
// #define debugtile

// camera values
uniform float camThick;
uniform float camNear;
uniform float camFar;
uniform int cameraParallel;

// values describing the volume geometry
uniform vec3 vOriginVC;
uniform vec3 vSpacing;
uniform ivec3 volumeDimensions; // 3d texture dimensions
uniform vec3 vPlaneNormal0;
uniform float vPlaneDistance0;
uniform vec3 vPlaneNormal1;
uniform float vPlaneDistance1;
uniform vec3 vPlaneNormal2;
uniform float vPlaneDistance2;
uniform vec3 vPlaneNormal3;
uniform float vPlaneDistance3;
uniform vec3 vPlaneNormal4;
uniform float vPlaneDistance4;
uniform vec3 vPlaneNormal5;
uniform float vPlaneDistance5;

//VTK::ClipPlane::Dec

// opacity and color textures
uniform sampler2D otexture;
uniform float oshift0;
uniform float oscale0;
uniform sampler2D ctexture;
uniform float cshift0;
uniform float cscale0;

// jitter texture
uniform sampler2D jtexture;
uniform sampler2D ttexture;


// some 3D texture values
uniform float sampleDistance;
uniform vec3 vVCToIJK;

// the heights defined below are the locations
// for the up to four components of the tfuns
// the tfuns have a height of 2XnumComps pixels so the
// values are computed to hit the middle of the two rows
// for that component
#ifdef vtkIndependentComponentsOn
#if vtkNumComponents == 2
uniform float mix0;
uniform float mix1;
#define height0 0.25
#define height1 0.75
#endif
#if vtkNumComponents == 3
uniform float mix0;
uniform float mix1;
uniform float mix2;
#define height0 0.17
#define height1 0.5
#define height2 0.83
#endif
#if vtkNumComponents == 4
uniform float mix0;
uniform float mix1;
uniform float mix2;
uniform float mix3;
#define height0 0.125
#define height1 0.375
#define height2 0.625
#define height3 0.875
#endif
#endif

#if vtkNumComponents >= 2
uniform float oshift1;
uniform float oscale1;
uniform float cshift1;
uniform float cscale1;
#endif
#if vtkNumComponents >= 3
uniform float oshift2;
uniform float oscale2;
uniform float cshift2;
uniform float cscale2;
#endif
#if vtkNumComponents >= 4
uniform float oshift3;
uniform float oscale3;
uniform float cshift3;
uniform float cscale3;
#endif

uniform vec4 ipScalarRangeMin;
uniform vec4 ipScalarRangeMax;

// declaration for intermixed geometry
//VTK::ZBuffer::Dec

//=======================================================================
// global and custom variables (a temporary section before photorealistics rendering module is complete)
vec3 rayDirVC;
float sampleDistanceISVS;
float sampleDistanceIS;

#define SQRT3    1.7321
#define INV4PI   0.0796
#define EPSILON  0.001
#define PI       3.1415
#define PI2      9.8696

//=======================================================================
// Webgl2 specific version of functions
#if __VERSION__ == 300

uniform highp sampler3D texture1;

vec4 getTextureValue(vec3 pos)
{
  vec4 tmp = texture(texture1, pos);
#if vtkNumComponents == 1
  tmp.a = tmp.r;
#endif
#if vtkNumComponents == 2
  tmp.a = tmp.g;
#endif
#if vtkNumComponents == 3
  tmp.a = length(tmp.rgb);
#endif
  return tmp;
}

//=======================================================================
// WebGL1 specific version of functions
#else

uniform sampler2D texture1;

uniform float texWidth;
uniform float texHeight;
uniform int xreps;
uniform int xstride;
uniform int ystride;

// if computing trilinear values from multiple z slices
#ifdef vtkTrilinearOn
vec4 getTextureValue(vec3 ijk)
{
  float zoff = 1.0/float(volumeDimensions.z);
  vec4 val1 = getOneTextureValue(ijk);
  vec4 val2 = getOneTextureValue(vec3(ijk.xy, ijk.z + zoff));

  float indexZ = float(volumeDimensions)*ijk.z;
  float zmix =  indexZ - floor(indexZ);

  return mix(val1, val2, zmix);
}

vec4 getOneTextureValue(vec3 ijk)
#else // nearest or fast linear
vec4 getTextureValue(vec3 ijk)
#endif
{
  vec3 tdims = vec3(volumeDimensions);

#ifdef debugtile
  vec2 tpos = vec2(ijk.x, ijk.y);
  vec4 tmp = texture2D(texture1, tpos);
  tmp.a = 1.0;

#else
  int z = int(ijk.z * tdims.z);
  int yz = z / xreps;
  int xz = z - yz*xreps;

  int tileWidth = volumeDimensions.x/xstride;
  int tileHeight = volumeDimensions.y/ystride;

  xz *= tileWidth;
  yz *= tileHeight;

  float ni = float(xz) + (ijk.x*float(tileWidth));
  float nj = float(yz) + (ijk.y*float(tileHeight));

  vec2 tpos = vec2(ni/texWidth, nj/texHeight);

  vec4 tmp = texture2D(texture1, tpos);

#if vtkNumComponents == 1
  tmp.a = tmp.r;
#endif
#if vtkNumComponents == 2
  tmp.g = tmp.a;
#endif
#if vtkNumComponents == 3
  tmp.a = length(tmp.rgb);
#endif
#endif

  return tmp;
}

// End of Webgl1 specific code
//=======================================================================
#endif

//=======================================================================
// transformation between VC and IS space

// convert vector position from idx to vc
#if (vtkLightComplexity > 0) || (defined vtkClippingPlanesOn)
vec3 IStoVC(vec3 posIS){
  vec3 posVC = posIS / vVCToIJK;
  return posVC.x * vPlaneNormal0 +
         posVC.y * vPlaneNormal2 +
         posVC.z * vPlaneNormal4 +
         vOriginVC;
}

// convert vector position from vc to idx
vec3 VCtoIS(vec3 posVC){
  posVC = posVC - vOriginVC;
  posVC = vec3(
    dot(posVC, vPlaneNormal0),
    dot(posVC, vPlaneNormal2),
    dot(posVC, vPlaneNormal4));
  return posVC * vVCToIJK;
}
#endif

//Rotate vector to view coordinate
#if (vtkLightComplexity > 0) || (defined vtkGradientOpacityOn)
void rotateToViewCoord(inout vec3 dirIS){
  dirIS.xyz =
    dirIS.x * vPlaneNormal0 +
    dirIS.y * vPlaneNormal2 +
    dirIS.z * vPlaneNormal4;
}

//Rotate vector to idx coordinate
vec3 rotateToIDX(vec3 dirVC){
  vec3 dirIS;
  dirIS.xyz = vec3(
    dot(dirVC, vPlaneNormal0),
    dot(dirVC, vPlaneNormal2),
    dot(dirVC, vPlaneNormal4));
  return dirIS;
}
#endif

//=======================================================================
// Given a normal compute the gradient opacity factors
float computeGradientOpacityFactor(
  float normalMag, float goscale, float goshift, float gomin, float gomax)
{
#if defined(vtkGradientOpacityOn)
  return clamp(normalMag * goscale + goshift, gomin, gomax);
#else
  return 1.0;
#endif
}

//=======================================================================
// compute the normal and gradient magnitude for a position, uses forward difference
#if (vtkLightComplexity > 0) || (defined vtkGradientOpacityOn)
#ifdef vtkClippingPlanesOn
  void adjustClippedVoxelValues(vec3 pos, vec3 texPos[3], inout vec3 g1)
  {
    vec3 g1VC[3];
    for (int i = 0; i < 3; ++i)
    {
      g1VC[i] = IStoVC(texPos[i]);
    }
    vec3 posVC = IStoVC(pos);
    for (int i = 0; i < clip_numPlanes; ++i)
    {
      for (int j = 0; j < 3; ++j)
      {
        if(dot(vec3(vClipPlaneOrigins[i] - g1VC[j].xyz), vClipPlaneNormals[i]) > 0.0)
        {
          g1[j] = 0.0;
        }
      }
    }
  }
#endif

  #ifdef vtkComputeNormalFromOpacity
    #ifdef vtkGradientOpacityOn
      vec4 computeDensityNormal(float gradientMag, vec3 scalarInterp[2])
      {
    #else
      //if gradient opacity not on but using density gradient
      vec4 computeDensityNormal(vec3 scalarInterp[2])
      {
    #endif
        vec3 opacityG1, opacityG2;
        opacityG1.x = texture2D(otexture, vec2(scalarInterp[0].x * oscale0 + oshift0, 0.5)).r;
        opacityG1.y = texture2D(otexture, vec2(scalarInterp[0].y * oscale0 + oshift0, 0.5)).r;
        opacityG1.z = texture2D(otexture, vec2(scalarInterp[0].z * oscale0 + oshift0, 0.5)).r;
        opacityG2.x = texture2D(otexture, vec2(scalarInterp[1].x * oscale0 + oshift0, 0.5)).r;
        opacityG2.y = texture2D(otexture, vec2(scalarInterp[1].y * oscale0 + oshift0, 0.5)).r;
        opacityG2.z = texture2D(otexture, vec2(scalarInterp[1].z * oscale0 + oshift0, 0.5)).r;
    #ifdef vtkGradientOpacityOn
        float gradOpacityFactor = 1.0f;
        if (gradientMag >= 0.0){
          gradOpacityFactor = computeGradientOpacityFactor(gradientMag, goscale0, goshift0, gomin0, gomax0);
        }
        opacityG1.xyz *= gradOpacityFactor;
        opacityG2.xyz *= gradOpacityFactor;
    #endif

        vec4 opacityG = vec4(opacityG1 - opacityG2, 1.0f);
        // divide by spacing
        opacityG.xyz /= vSpacing;
        opacityG.w = length(opacityG.xyz);
        // rotate to View Coords
        rotateToViewCoord(opacityG.xyz);
        if (length(opacityG.xyz) > 0.0) {
          return vec4(normalize(opacityG.xyz),opacityG.w);
        } else {
          return vec4(0.0);
        }
      }

      vec4 computeNormalForDensity(vec3 pos, vec3 tstep, out vec3 scalarInterp[2])
      {
        vec3 xvec = vec3(tstep.x, 0.0, 0.0);
        vec3 yvec = vec3(0.0, tstep.y, 0.0);
        vec3 zvec = vec3(0.0, 0.0, tstep.z);
        vec3 texPosPVec[3];
        texPosPVec[0] = pos + xvec;
        texPosPVec[1] = pos + yvec;
        texPosPVec[2] = pos + zvec;
        vec3 texPosNVec[3];
        texPosNVec[0] = pos - xvec;
        texPosNVec[1] = pos - yvec;
        texPosNVec[2] = pos - zvec;
        vec3 g1, g2;

        scalarInterp[0].x = getTextureValue(texPosPVec[0]).a;
        scalarInterp[0].y = getTextureValue(texPosPVec[1]).a;
        scalarInterp[0].z = getTextureValue(texPosPVec[2]).a;
        scalarInterp[1].x = getTextureValue(texPosNVec[0]).a;
        scalarInterp[1].y = getTextureValue(texPosNVec[1]).a;
        scalarInterp[1].z = getTextureValue(texPosNVec[2]).a;

        #ifdef vtkClippingPlanesOn
          adjustClippedVoxelValues(pos, texPosPVec, scalarInterp[0]);
          adjustClippedVoxelValues(pos, texPosNVec, scalarInterp[1]);
        #endif
        vec4 result;
        result.x = scalarInterp[0].x - scalarInterp[1].x;
        result.y = scalarInterp[0].y - scalarInterp[1].y;
        result.z = scalarInterp[0].z - scalarInterp[1].z;
        // divide by spacing
        result.xyz /= vSpacing;
        result.w = length(result.xyz);
        // rotate to View Coords
        rotateToViewCoord(result.xyz);
        if (length(result.xyz) > 0.0) {
          return vec4(normalize(result.xyz),result.w);
        } else {
          return vec4(0.0);
        }
      }
  #endif

  vec4 computeNormal(vec3 pos, vec3 tstep)
  {
    vec3 xvec = vec3(tstep.x, 0.0, 0.0);
    vec3 yvec = vec3(0.0, tstep.y, 0.0);
    vec3 zvec = vec3(0.0, 0.0, tstep.z);
    vec3 texPosPVec[3];
    texPosPVec[0] = pos + xvec;
    texPosPVec[1] = pos + yvec;
    texPosPVec[2] = pos + zvec;
    vec3 texPosNVec[3];
    texPosNVec[0] = pos - xvec;
    texPosNVec[1] = pos - yvec;
    texPosNVec[2] = pos - zvec;
    vec3 g1, g2;
    g1.x = getTextureValue(texPosPVec[0]).a;
    g1.y = getTextureValue(texPosPVec[1]).a;
    g1.z = getTextureValue(texPosPVec[2]).a;
    g2.x = getTextureValue(texPosNVec[0]).a;
    g2.y = getTextureValue(texPosNVec[1]).a;
    g2.z = getTextureValue(texPosNVec[2]).a;
    #ifdef vtkClippingPlanesOn
      adjustClippedVoxelValues(pos, texPosPVec, g1);
      adjustClippedVoxelValues(pos, texPosNVec, g2);
    #endif
    vec4 result;
    result = vec4(g1 - g2, -1.0);
    // divide by spacing
    result.xyz /= vSpacing;
    result.w = length(result.xyz);
    if (result.w > 0.0){
      // rotate to View Coords
      rotateToViewCoord(result.xyz);
      return vec4(normalize(result.xyz),result.w);
    } else {
      return vec4(0.0);
    }
  }
#endif

#ifdef vtkImageLabelOutlineOn
vec3 fragCoordToIndexSpace(vec4 fragCoord) {
  vec4 pcPos = vec4(
    (fragCoord.x / vpWidth - vpOffsetX - 0.5) * 2.0,
    (fragCoord.y / vpHeight - vpOffsetY - 0.5) * 2.0,
    (fragCoord.z - 0.5) * 2.0,
    1.0);

  vec4 worldCoord = PCWCMatrix * pcPos;
  vec4 vertex = (worldCoord/worldCoord.w);

  vec3 index = (vWCtoIDX * vertex).xyz;

  // half voxel fix for labelmapOutline
  return (index + vec3(0.5)) / vec3(volumeDimensions);
}
#endif

//=======================================================================
// compute the normals and gradient magnitudes for a position
// for independent components
mat4 computeMat4Normal(vec3 pos, vec4 tValue, vec3 tstep)
{
  mat4 result;
  vec4 distX = getTextureValue(pos + vec3(tstep.x, 0.0, 0.0)) - tValue;
  vec4 distY = getTextureValue(pos + vec3(0.0, tstep.y, 0.0)) - tValue;
  vec4 distZ = getTextureValue(pos + vec3(0.0, 0.0, tstep.z)) - tValue;

  // divide by spacing
  distX /= vSpacing.x;
  distY /= vSpacing.y;
  distZ /= vSpacing.z;

  mat3 rot;
  rot[0] = vPlaneNormal0;
  rot[1] = vPlaneNormal2;
  rot[2] = vPlaneNormal4;

#if !defined(vtkComponent0Proportional)
  result[0].xyz = vec3(distX.r, distY.r, distZ.r);
  result[0].a = length(result[0].xyz);
  result[0].xyz *= rot;
  if (result[0].w > 0.0)
  {
    result[0].xyz /= result[0].w;
  }
#endif

// optionally compute the 2nd component
#if vtkNumComponents >= 2 && !defined(vtkComponent1Proportional)
  result[1].xyz = vec3(distX.g, distY.g, distZ.g);
  result[1].a = length(result[1].xyz);
  result[1].xyz *= rot;
  if (result[1].w > 0.0)
  {
    result[1].xyz /= result[1].w;
  }
#endif

// optionally compute the 3rd component
#if vtkNumComponents >= 3 && !defined(vtkComponent2Proportional)
  result[2].xyz = vec3(distX.b, distY.b, distZ.b);
  result[2].a = length(result[2].xyz);
  result[2].xyz *= rot;
  if (result[2].w > 0.0)
  {
    result[2].xyz /= result[2].w;
  }
#endif

// optionally compute the 4th component
#if vtkNumComponents >= 4 && !defined(vtkComponent3Proportional)
  result[3].xyz = vec3(distX.a, distY.a, distZ.a);
  result[3].a = length(result[3].xyz);
  result[3].xyz *= rot;
  if (result[3].w > 0.0)
  {
    result[3].xyz /= result[3].w;
  }
#endif

  return result;
}

//=======================================================================
// global shadow - secondary ray
#if defined(VolumeShadowOn) || defined(localAmbientOcclusionOn)
float random()
{
  float rand = fract(sin(dot(gl_FragCoord.xy,vec2(12.9898,78.233)))*43758.5453123);
  float jitter=texture2D(jtexture,gl_FragCoord.xy/32.).r;
  uint pcg_state = floatBitsToUint(jitter);
  uint state = pcg_state;
  pcg_state = pcg_state * uint(747796405) + uint(2891336453);
  uint word = ((state >> ((state >> uint(28)) + uint(4))) ^ state) * uint(277803737);
  return (float((((word >> uint(22)) ^ word) >> 1 ))/float(2147483647) + rand)/2.0;
}
#endif

#ifdef VolumeShadowOn
// henyey greenstein phase function
float phase_function(float cos_angle)
{
  // divide by 2.0 instead of 4pi to increase intensity
  return ((1.0-anisotropy2)/pow(1.0+anisotropy2-2.0*anisotropy*cos_angle, 1.5))/2.0;
}

// Computes the intersection between a ray and a box
struct Hit
{
  float tmin;
  float tmax;
};

struct Ray
{
  vec3 origin;
  vec3 dir;
  vec3 invDir;
};

bool BBoxIntersect(vec3 boundMin, vec3 boundMax, const Ray r, out Hit hit)
{
  vec3 tbot = r.invDir * (boundMin - r.origin);
  vec3 ttop = r.invDir * (boundMax - r.origin);
  vec3 tmin = min(ttop, tbot);
  vec3 tmax = max(ttop, tbot);
  vec2 t = max(tmin.xx, tmin.yz);
  float t0 = max(t.x, t.y);
  t = min(tmax.xx, tmax.yz);
  float t1 = min(t.x, t.y);
  hit.tmin = t0;
  hit.tmax = t1;
  return t1 > max(t0,0.0);
}

// As BBoxIntersect requires the inverse of the ray coords,
// this function is used to avoid numerical issues
void safe_0_vector(inout Ray ray)
{
  if(abs(ray.dir.x) < EPSILON) ray.dir.x = sign(ray.dir.x) * EPSILON;
  if(abs(ray.dir.y) < EPSILON) ray.dir.y = sign(ray.dir.y) * EPSILON;
  if(abs(ray.dir.z) < EPSILON) ray.dir.z = sign(ray.dir.z) * EPSILON;
}

float volume_shadow(vec3 posIS, vec3 lightDirNormIS)
{
  float shadow = 1.0;
  float opacity = 0.0;

  // modify sample distance with a random number between 1.5 and 3.0
  float sampleDistanceISVS_jitter = sampleDistanceISVS * mix(1.5, 3.0, random());
  float opacityPrev = texture2D(otexture, vec2(getTextureValue(posIS).r * oscale0 + oshift0, 0.5)).r;

  // in case the first sample near surface has a very tiled light ray, we need to offset start position
  posIS += sampleDistanceISVS_jitter * lightDirNormIS;

  // compute the start and end points for the ray
  Ray ray;
  Hit hit;
  ray.origin = posIS;
  ray.dir = lightDirNormIS;
  safe_0_vector(ray);
  ray.invDir = 1.0/ray.dir;

  if(!BBoxIntersect(vec3(0.0),vec3(1.0), ray, hit))
  {
    return 1.0;
  }
  float maxdist = hit.tmax;

  // interpolate shadow ray length between: 1 unit of sample distance in IS to SQRT3, based on globalIlluminationReach
  float maxgi = mix(sampleDistanceISVS_jitter,SQRT3,giReach);
  maxdist = min(maxdist,maxgi);
  if(maxdist < EPSILON) {
    return 1.0;
  }

  // support gradient opacity
  #ifdef vtkGradientOpacityOn
    vec4 normal;
  #endif

  float current_dist = 0.0;
  float current_step = length(sampleDistanceISVS_jitter * lightDirNormIS);
  float clamped_step = 0.0;

  vec4 scalar = vec4(0.0);
  while(current_dist < maxdist)
  {
#ifdef vtkClippingPlanesOn
    vec3 posVC = IStoVC(posIS);
    for (int i = 0; i < clip_numPlanes; ++i)
    {
      if (dot(vec3(vClipPlaneOrigins[i] - posVC), vClipPlaneNormals[i]) > 0.0)
      {
        current_dist = maxdist;
      }
    }
#endif
    scalar = getTextureValue(posIS);
    opacity = texture2D(otexture, vec2(scalar.r * oscale0 + oshift0, 0.5)).r;
    #ifdef vtkGradientOpacityOn
      normal = computeNormal(posIS, vec3(1.0/vec3(volumeDimensions)));
      opacity *= computeGradientOpacityFactor(normal.w, goscale0, goshift0, gomin0, gomax0);
    #endif
    shadow *= 1.0 - opacity;

    // optimization: early termination
    if (shadow < EPSILON){
      return 0.0;
    }

    clamped_step = min(maxdist - current_dist, current_step);
    posIS += clamped_step * lightDirNormIS;
    current_dist += current_step;
  }

  return shadow;
}

vec3 applyShadowRay(vec3 tColor, vec3 posIS, vec3 viewDirectionVC)
{
  vec3 vertLight = vec3(0.0);
  vec3 secondary_contrib = vec3(0.0);
  // here we assume only positional light, no effect of cones
  for (int i = 0; i < lightNum; i++)
  {
    #if(vtkLightComplexity==3)
      if (lightPositional[i] == 1){
        vertLight = lightPositionVC[i] - IStoVC(posIS);
      }else{
        vertLight = - lightDirectionVC[i];
      }
    #else
      vertLight = - lightDirectionVC[i];
    #endif
    // here we assume achromatic light, only intensity
    float dDotL = dot(viewDirectionVC, normalize(vertLight));
    // isotropic scatter returns 0.5 instead of 1/4pi to increase intensity
    float phase_attenuation = 0.5;
    if (abs(anisotropy) > EPSILON){
      phase_attenuation = phase_function(dDotL);
    }
    float vol_shadow = volume_shadow(posIS, normalize(rotateToIDX(vertLight)));
    secondary_contrib += tColor * vDiffuse * lightColor[i] * vol_shadow * phase_attenuation;
    secondary_contrib += tColor * vAmbient;
  }
  return secondary_contrib;
}
#endif

//=======================================================================
// local ambient occlusion
#ifdef localAmbientOcclusionOn
vec3 sample_direction_uniform(int i)
{
  float rand = random() * 0.5;
  float theta = PI2 * (kernelSample[i][0] + rand);
  float phi = acos(2.0 * (kernelSample[i][1] + rand) -1.0) / 2.5;
  return normalize(vec3(cos(theta)*sin(phi), sin(theta)*sin(phi), cos(phi)));
}

// return a matrix that transform startDir into z axis; startDir should be normalized
mat3 zBaseRotationalMatrix(vec3 startDir){
  vec3 axis = cross(startDir, vec3(0.0,0.0,1.0));
  float cosA = startDir.z;
  float k = 1.0 / (1.0 + cosA);
  mat3 matrix = mat3((axis.x * axis.x * k) + cosA, (axis.y * axis.x * k) - axis.z, (axis.z * axis.x * k) + axis.y,
              (axis.x * axis.y * k) + axis.z, (axis.y * axis.y * k) + cosA, (axis.z * axis.y * k) - axis.x,
              (axis.x * axis.z * k) - axis.y, (axis.y * axis.z * k) + axis.x, (axis.z * axis.z * k) + cosA);
  return matrix;
}

float computeLAO(vec3 posIS, float op, vec3 lightDir, vec4 normal){
  // apply LAO only at selected locations, otherwise return full brightness
  if (normal.w > 0.0 && op > 0.05){
    float total_transmittance = 0.0;
    mat3 inverseRotateBasis = inverse(zBaseRotationalMatrix(normalize(-normal.xyz)));
    vec3 currPos, randomDirStep;
    float weight, transmittance, opacity;
    for (int i = 0; i < kernelSize; i++)
    {
      randomDirStep = inverseRotateBasis * sample_direction_uniform(i) * sampleDistanceIS;
      weight = 1.0 - dot(normalize(lightDir), normalize(randomDirStep));
      currPos = posIS;
      transmittance = 1.0;
      for (int j = 0; j < kernelRadius ; j++){
        currPos += randomDirStep;
        // check if it's at clipping plane, if so return full brightness
        if (all(greaterThan(currPos, vec3(EPSILON))) && all(lessThan(currPos,vec3(1.0-EPSILON)))){
          opacity = texture2D(otexture, vec2(getTextureValue(currPos).r * oscale0 + oshift0, 0.5)).r;
          #ifdef vtkGradientOpacityOn
             opacity *= computeGradientOpacityFactor(normal.w, goscale0, goshift0, gomin0, gomax0);
          #endif
          transmittance *= 1.0 - opacity;
        }
        else{
          break;
        }
      }
      total_transmittance += transmittance / float(kernelRadius) * weight;

      // early termination if fully translucent
      if (total_transmittance > 1.0 - EPSILON){
        return 1.0;
      }
    }
    // average transmittance and reduce variance
    return clamp(total_transmittance / float(kernelSize), 0.3, 1.0);
  } else {
    return 1.0;
  }
}
#endif

//=======================================================================
// surface light contribution
#if vtkLightComplexity > 0
  void applyLighting(inout vec3 tColor, vec4 normal)
  {
    vec3 diffuse = vec3(0.0, 0.0, 0.0);
    vec3 specular = vec3(0.0, 0.0, 0.0);
    float df, sf = 0.0;
    for (int i = 0; i < lightNum; i++){
        df = abs(dot(normal.rgb, -lightDirectionVC[i]));
        diffuse += df * lightColor[i];
        sf = pow( abs(dot(lightHalfAngleVC[i],normal.rgb)), vSpecularPower);
        specular += sf * lightColor[i];
    }
    tColor.rgb = tColor.rgb*(diffuse*vDiffuse + vAmbient) + specular*vSpecular;
  }
  #ifdef SurfaceShadowOn
  #if vtkLightComplexity < 3
    vec3 applyLightingDirectional(vec3 posIS, vec4 tColor, vec4 normal)
    {
      // everything in VC
      vec3 diffuse = vec3(0.0);
      vec3 specular = vec3(0.0);
      #ifdef localAmbientOcclusionOn
        vec3 ambient = vec3(0.0);
      #endif
      vec3 vertLightDirection;
      for (int i = 0; i < lightNum; i++){
        float ndotL,vdotR;
        vertLightDirection = lightDirectionVC[i];
        ndotL = dot(normal.xyz, vertLightDirection);
        if (ndotL < 0.0 && twoSidedLighting)
        {
          ndotL = -ndotL;
        }
        if (ndotL > 0.0)
        {
          diffuse += ndotL * lightColor[i];
          //specular
          vdotR = dot(-rayDirVC, normalize(2.0 * ndotL * -normal.xyz + vertLightDirection));
          if (vdotR > 0.0)
          {
            specular += pow(vdotR, vSpecularPower) * lightColor[i];
          }
        }
        #ifdef localAmbientOcclusionOn
            ambient += computeLAO(posIS, tColor.a, vertLightDirection, normal);
        #endif
      }
      #ifdef localAmbientOcclusionOn
        return tColor.rgb * (diffuse * vDiffuse + vAmbient * ambient) + specular*vSpecular;
      #else
        return tColor.rgb * (diffuse * vDiffuse + vAmbient) + specular*vSpecular;
      #endif
    }
  #else
    vec3 applyLightingPositional(vec3 posIS, vec4 tColor, vec4 normal, vec3 posVC)
    {
      // everything in VC
      vec3 diffuse = vec3(0.0);
      vec3 specular = vec3(0.0);
      #ifdef localAmbientOcclusionOn
        vec3 ambient = vec3(0.0);
      #endif
      vec3 vertLightDirection;
      for (int i = 0; i < lightNum; i++){
        float distance,attenuation,ndotL,vdotR;
        vec3 lightDir;
        if (lightPositional[i] == 1){
          lightDir = lightDirectionVC[i];
          vertLightDirection = posVC - lightPositionVC[i];
          distance = length(vertLightDirection);
          vertLightDirection = normalize(vertLightDirection);
          attenuation = 1.0 / (lightAttenuation[i].x
                              + lightAttenuation[i].y * distance
                              + lightAttenuation[i].z * distance * distance);
          // per OpenGL standard cone angle is 90 or less for a spot light
          if (lightConeAngle[i] <= 90.0){
            float coneDot = dot(vertLightDirection, lightDir);
            if (coneDot >= cos(radians(lightConeAngle[i]))){  // if inside cone
              attenuation = attenuation * pow(coneDot, lightExponent[i]);
            }
            else {
              attenuation = 0.0;
            }
          }
          ndotL = dot(normal.xyz, vertLightDirection);
          if (ndotL < 0.0 && twoSidedLighting)
          {
            ndotL = -ndotL;
          }
          if (ndotL > 0.0)
          {
            diffuse += ndotL * attenuation * lightColor[i];
            //specular
            vdotR = dot(-rayDirVC, normalize(2.0 * ndotL * -normal.xyz + vertLightDirection));
            if (vdotR > 0.0)
            {
              specular += pow(vdotR, vSpecularPower) * attenuation * lightColor[i];
            }
          }
          #ifdef localAmbientOcclusionOn
            ambient += computeLAO(posIS, tColor.a, vertLightDirection, normal);
          #endif
        } else {
          vertLightDirection = lightDirectionVC[i];
          ndotL = dot(normal.xyz, vertLightDirection);
          if (ndotL < 0.0 && twoSidedLighting)
          {
            ndotL = -ndotL;
          }
          if (ndotL > 0.0)
          {
            diffuse += ndotL * lightColor[i];
            //specular
            vdotR = dot(-rayDirVC, normalize(2.0 * ndotL * -normal.xyz + vertLightDirection));
            if (vdotR > 0.0)
            {
              specular += pow(vdotR, vSpecularPower) * lightColor[i];
            }
          }
          #ifdef localAmbientOcclusionOn
            ambient += computeLAO(posIS, tColor.a, vertLightDirection, normal);
          #endif
        }
      }
      #ifdef localAmbientOcclusionOn
        return tColor.rgb * (diffuse * vDiffuse + vAmbient * ambient) + specular*vSpecular;
      #else
        return tColor.rgb * (diffuse * vDiffuse + vAmbient) + specular*vSpecular;
      #endif
    }
  #endif
  #endif
#endif

//=======================================================================
// Given a texture value compute the color and opacity
//
vec4 getColorForValue(vec4 tValue, vec3 posIS, vec3 tstep)
{
#ifdef vtkImageLabelOutlineOn
  vec3 centerPosIS = fragCoordToIndexSpace(gl_FragCoord); // pos in texture space
  vec4 centerValue = getTextureValue(centerPosIS);
  bool pixelOnBorder = false;
  vec4 tColor = texture2D(ctexture, vec2(centerValue.r * cscale0 + cshift0, 0.5));

  // Get alpha of segment from opacity function.
  tColor.a = texture2D(otexture, vec2(centerValue.r * oscale0 + oshift0, 0.5)).r;

  int segmentIndex = int(centerValue.r * 255.0);
  
  // Use texture sampling for outlineThickness
  float textureCoordinate = float(segmentIndex - 1) / 1024.0;
  float textureValue = texture2D(ttexture, vec2(textureCoordinate, 0.5)).r;

  int actualThickness = int(textureValue * 255.0);

  if (actualThickness == 0) {
    return vec4(0, 0, 1, 1);
  }

  // If it is the background (segment index 0), we should quickly bail out. 
  // Previously, this was determined by tColor.a, which was incorrect as it
  // prevented the outline from appearing when the fill is 0.
  if (segmentIndex == 0){
    return vec4(0, 0, 0, 0);
  }

  // Only perform outline check on fragments rendering voxels that aren't invisible.
  // Saves a bunch of needless checks on the background.
  // TODO define epsilon when building shader?
  for (int i = -actualThickness; i <= actualThickness; i++) {
    for (int j = -actualThickness; j <= actualThickness; j++) {
      if (i == 0 || j == 0) {
        continue;
      }

      vec4 neighborPixelCoord = vec4(gl_FragCoord.x + float(i),
        gl_FragCoord.y + float(j),
        gl_FragCoord.z, gl_FragCoord.w);

      vec3 neighborPosIS = fragCoordToIndexSpace(neighborPixelCoord);
      vec4 value = getTextureValue(neighborPosIS);

      // If any of my neighbours are not the same value as I
      // am, this means I am on the border of the segment.
      // We can break the loops
      if (any(notEqual(value, centerValue))) {
        pixelOnBorder = true;
        break;
      }
    }

    if (pixelOnBorder == true) {
      break;
    }
  }

  // If I am on the border, I am displayed at full opacity
  if (pixelOnBorder == true) {
    tColor.a = outlineOpacity;
  }

#else
  // compute the normal and gradient magnitude if needed
  // We compute it as a vec4 if possible otherwise a mat4
  //
  vec4 goFactor = vec4(1.0,1.0,1.0,1.0);

  // compute the normal vectors as needed
  #if (vtkLightComplexity > 0) || defined(vtkGradientOpacityOn)
    #if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)
      mat4 normalMat = computeMat4Normal(posIS, tValue, tstep);
      #if !defined(vtkComponent0Proportional)
        vec4 normal0 = normalMat[0];
      #endif
      #if !defined(vtkComponent1Proportional)
        vec4 normal1 = normalMat[1];
      #endif
      #if vtkNumComponents > 2
        #if !defined(vtkComponent2Proportional)
          vec4 normal2 = normalMat[2];
        #endif
        #if vtkNumComponents > 3
          #if !defined(vtkComponent3Proportional)
            vec4 normal3 = normalMat[3];
          #endif
        #endif
      #endif
    #else
      vec4 normalLight;
      #ifdef vtkComputeNormalFromOpacity
        vec3 scalarInterp[2];
        vec4 normal0 = computeNormalForDensity(posIS, tstep, scalarInterp);
        if (length(normal0)>0.0){
          #ifdef vtkGradientOpacityOn
            normalLight = computeDensityNormal(normal0.w, scalarInterp);
          #else
            normalLight = computeDensityNormal(scalarInterp);
          #endif
          if (length(normalLight) == 0.0){
            normalLight = normal0;
          }
        }
      #else
        vec4 normal0 = computeNormal(posIS, tstep);
        normalLight = normal0;
      #endif
    #endif
  #endif

  // compute gradient opacity factors as needed
  #if defined(vtkGradientOpacityOn)
    #if !defined(vtkComponent0Proportional)
      goFactor.x =
        computeGradientOpacityFactor(normal0.a, goscale0, goshift0, gomin0, gomax0);
    #endif
    #if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)
      #if !defined(vtkComponent1Proportional)
        goFactor.y =
          computeGradientOpacityFactor(normal1.a, goscale1, goshift1, gomin1, gomax1);
      #endif
      #if vtkNumComponents > 2
        #if !defined(vtkComponent2Proportional)
          goFactor.z =
            computeGradientOpacityFactor(normal2.a, goscale2, goshift2, gomin2, gomax2);
        #endif
        #if vtkNumComponents > 3
          #if !defined(vtkComponent3Proportional)
            goFactor.w =
              computeGradientOpacityFactor(normal3.a, goscale3, goshift3, gomin3, gomax3);
          #endif
        #endif
      #endif
    #endif
  #endif

  // single component is always independent
  #if vtkNumComponents == 1
    vec4 tColor = texture2D(ctexture, vec2(tValue.r * cscale0 + cshift0, 0.5));
    tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;
    if (tColor.a < EPSILON){
      return vec4(0.0);
    }
  #endif

  #if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2
    vec4 tColor = mix0*texture2D(ctexture, vec2(tValue.r * cscale0 + cshift0, height0));
    #if !defined(vtkComponent0Proportional)
      tColor.a = goFactor.x*mix0*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, height0)).r;
    #else
      float pwfValue = texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, height0)).r;
      tColor *= pwfValue;
      tColor.a *= mix(pwfValue, 1.0, (1.0 - mix0));
    #endif

    vec3 tColor1 = mix1*texture2D(ctexture, vec2(tValue.g * cscale1 + cshift1, height1)).rgb;
    #if !defined(vtkComponent1Proportional)
      tColor.a += goFactor.y*mix1*texture2D(otexture, vec2(tValue.g * oscale1 + oshift1, height1)).r;
    #else
      float pwfValue = texture2D(otexture, vec2(tValue.g * oscale1 + oshift1, height1)).r;
      tColor1 *= pwfValue;
      tColor.a *= mix(pwfValue, 1.0, (1.0 - mix1));
    #endif

    #if vtkNumComponents >= 3
      vec3 tColor2 = mix2*texture2D(ctexture, vec2(tValue.b * cscale2 + cshift2, height2)).rgb;
      #if !defined(vtkComponent2Proportional)
        tColor.a += goFactor.z*mix2*texture2D(otexture, vec2(tValue.b * oscale2 + oshift2, height2)).r;
      #else
        float pwfValue = texture2D(otexture, vec2(tValue.b * oscale2 + oshift2, height2)).r;
        tColor2 *= pwfValue;
        tColor.a *= mix(pwfValue, 1.0, (1.0 - mix2));
      #endif

      #if vtkNumComponents >= 4
        vec3 tColor3 = mix3*texture2D(ctexture, vec2(tValue.a * cscale3 + cshift3, height3)).rgb;
        #if !defined(vtkComponent3Proportional)
          tColor.a += goFactor.w*mix3*texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, height3)).r;
        #else
          float pwfValue = texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, height3)).r;
          tColor3 *= pwfValue;
          tColor.a *= mix(pwfValue, 1.0, (1.0 - mix3));
        #endif
      #endif
    #endif
  #else // then not independent

  #if vtkNumComponents == 2
    float lum = tValue.r * cscale0 + cshift0;
    float alpha = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale1 + oshift1, 0.5)).r;
    vec4 tColor = vec4(lum, lum, lum, alpha);
  #endif
  #if vtkNumComponents == 3
    vec4 tColor;
    tColor.r = tValue.r * cscale0 + cshift0;
    tColor.g = tValue.g * cscale1 + cshift1;
    tColor.b = tValue.b * cscale2 + cshift2;
    tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale0 + oshift0, 0.5)).r;
  #endif
  #if vtkNumComponents == 4
    vec4 tColor;
    tColor.r = tValue.r * cscale0 + cshift0;
    tColor.g = tValue.g * cscale1 + cshift1;
    tColor.b = tValue.b * cscale2 + cshift2;
    tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, 0.5)).r;
  #endif
  #endif // dependent

  // apply lighting if requested as appropriate
  #if vtkLightComplexity > 0
    #if !defined(vtkComponent0Proportional)
      #if vtkNumComponents == 1
        #ifdef SurfaceShadowOn
            #if vtkLightComplexity < 3
                vec3 tColorS = applyLightingDirectional(posIS, tColor, normalLight);
            #else
                vec3 tColorS = applyLightingPositional(posIS, tColor, normalLight, IStoVC(posIS));
            #endif
        #endif

        #ifdef VolumeShadowOn
          vec3 tColorVS = applyShadowRay(tColor.rgb, posIS, rayDirVC);
          #ifdef SurfaceShadowOn
            float vol_coef = volumetricScatteringBlending * (1.0 - tColor.a / 2.0) * (1.0 - atan(normalLight.w) * INV4PI);
            tColor.rgb = (1.0-vol_coef) * tColorS + vol_coef * tColorVS;
          #else
            tColor.rgb = tColorVS;
          #endif
        #else
            tColor.rgb = tColorS;
        #endif

      #else
        applyLighting(tColor.rgb, normal0);
      #endif
    #endif

    #if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2
      #if !defined(vtkComponent1Proportional)
        applyLighting(tColor1, normal1);
      #endif
    #if vtkNumComponents >= 3
      #if !defined(vtkComponent2Proportional)
        applyLighting(tColor2, normal2);
      #endif
    #if vtkNumComponents >= 4
      #if !defined(vtkComponent3Proportional)
        applyLighting(tColor3, normal3);
      #endif
    #endif
    #endif
    #endif
  #endif

// perform final independent blend as needed
#if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2
  tColor.rgb += tColor1;
#if vtkNumComponents >= 3
  tColor.rgb += tColor2;
#if vtkNumComponents >= 4
  tColor.rgb += tColor3;
#endif
#endif
#endif

#endif
return tColor;
}

bool valueWithinScalarRange(vec4 val, vec4 min, vec4 max) {
  bool withinRange = false;
  #if vtkNumComponents == 1
    if (val.r >= min.r && val.r <= max.r) {
      withinRange = true;
    }
  #endif
  #if defined(vtkIndependentComponentsOn) && vtkNumComponents == 2
     if (val.r >= min.r && val.r <= max.r &&
        val.g >= min.g && val.g <= max.g) {
      withinRange = true;
    }
  #endif
  #if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 3
    if (all(greaterThanEqual(val, ipScalarRangeMin)) &&
        all(lessThanEqual(val, ipScalarRangeMax))) {
      withinRange = true;
    }
  #endif
  return withinRange;
}

//=======================================================================
// Apply the specified blend mode operation along the ray's path.
//
void applyBlend(vec3 posIS, vec3 endIS, vec3 tdims)
{
  vec3 tstep = 1.0/tdims;

  // start slightly inside and apply some jitter
  vec3 delta = endIS - posIS;
  vec3 stepIS = normalize(delta)*sampleDistanceIS;
  float raySteps = length(delta)/sampleDistanceIS;

  // avoid 0.0 jitter
  float jitter = 0.01 + 0.99*texture2D(jtexture, gl_FragCoord.xy/32.0).r;
  float stepsTraveled = jitter;

  // local vars for the loop
  vec4 color = vec4(0.0, 0.0, 0.0, 0.0);
  vec4 tValue;
  vec4 tColor;

  // if we have less than one step then pick the middle point
  // as our value
  // if (raySteps <= 1.0)
  // {
  //   posIS = (posIS + endIS)*0.5;
  // }

  // Perform initial step at the volume boundary
  // compute the scalar
  tValue = getTextureValue(posIS);

  #if vtkBlendMode == 0 // COMPOSITE_BLEND
    // now map through opacity and color
    tColor = getColorForValue(tValue, posIS, tstep);

    // handle very thin volumes
    if (raySteps <= 1.0)
    {
      tColor.a = 1.0 - pow(1.0 - tColor.a, raySteps);
      gl_FragData[0] = tColor;
      return;
    }

    tColor.a = 1.0 - pow(1.0 - tColor.a, jitter);
    color = vec4(tColor.rgb*tColor.a, tColor.a);
    posIS += (jitter*stepIS);

    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar
      tValue = getTextureValue(posIS);

      // now map through opacity and color
      tColor = getColorForValue(tValue, posIS, tstep);

      float mix = (1.0 - color.a);

      // this line should not be needed but nvidia seems to not handle
      // the break correctly on windows/chrome 58 angle
      //mix = mix * sign(max(raySteps - stepsTraveled - 1.0, 0.0));

      color = color + vec4(tColor.rgb*tColor.a, tColor.a)*mix;
      stepsTraveled++;
      posIS += stepIS;
      if (color.a > 0.99) { color.a = 1.0; break; }
    }

    if (color.a < 0.99 && (raySteps - stepsTraveled) > 0.0)
    {
      posIS = endIS;

      // compute the scalar
      tValue = getTextureValue(posIS);

      // now map through opacity and color
      tColor = getColorForValue(tValue, posIS, tstep);
      tColor.a = 1.0 - pow(1.0 - tColor.a, raySteps - stepsTraveled);

      float mix = (1.0 - color.a);
      color = color + vec4(tColor.rgb*tColor.a, tColor.a)*mix;
    }

    gl_FragData[0] = vec4(color.rgb/color.a, color.a);
  #endif
  #if vtkBlendMode == 1 || vtkBlendMode == 2
    // MAXIMUM_INTENSITY_BLEND || MINIMUM_INTENSITY_BLEND
    // Find maximum/minimum intensity along the ray.

    // Define the operation we will use (min or max)
    #if vtkBlendMode == 1
    #define OP max
    #else
    #define OP min
    #endif

    // If the clipping range is shorter than the sample distance
    // we can skip the sampling loop along the ray.
    if (raySteps <= 1.0)
    {
      gl_FragData[0] = getColorForValue(tValue, posIS, tstep);
      return;
    }

    vec4 value = tValue;
    posIS += (jitter*stepIS);

    // Sample along the ray until MaximumSamplesValue,
    // ending slightly inside the total distance
    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      // If we have reached the last step, break
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar
      tValue = getTextureValue(posIS);

      // Update the maximum value if necessary
      value = OP(tValue, value);

      // Otherwise, continue along the ray
      stepsTraveled++;
      posIS += stepIS;
    }

    // Perform the last step along the ray using the
    // residual distance
    posIS = endIS;
    tValue = getTextureValue(posIS);
    value = OP(tValue, value);

    // Now map through opacity and color
    gl_FragData[0] = getColorForValue(value, posIS, tstep);
  #endif
  #if vtkBlendMode == 3 || vtkBlendMode == 4 //AVERAGE_INTENSITY_BLEND || ADDITIVE_BLEND
    vec4 sum = vec4(0.);

    if (valueWithinScalarRange(tValue, ipScalarRangeMin, ipScalarRangeMax)) {
      sum += tValue;
    }

    if (raySteps <= 1.0) {
      gl_FragData[0] = getColorForValue(sum, posIS, tstep);
      return;
    }

    posIS += (jitter*stepIS);

    // Sample along the ray until MaximumSamplesValue,
    // ending slightly inside the total distance
    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      // If we have reached the last step, break
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar
      tValue = getTextureValue(posIS);

      // One can control the scalar range by setting the AverageIPScalarRange to disregard scalar values, not in the range of interest, from the average computation.
      // Notes:
      // - We are comparing all values in the texture to see if any of them
      //   are outside of the scalar range. In the future we might want to allow
      //   scalar ranges for each component.
      if (valueWithinScalarRange(tValue, ipScalarRangeMin, ipScalarRangeMax)) {
        // Sum the values across each step in the path
        sum += tValue;
      }
      stepsTraveled++;
      posIS += stepIS;
    }

    // Perform the last step along the ray using the
    // residual distance
    posIS = endIS;

    // compute the scalar
    tValue = getTextureValue(posIS);

    // One can control the scalar range by setting the IPScalarRange to disregard scalar values, not in the range of interest, from the average computation
    if (valueWithinScalarRange(tValue, ipScalarRangeMin, ipScalarRangeMax)) {
      sum += tValue;

      stepsTraveled++;
    }

    #if vtkBlendMode == 3 // Average
      sum /= vec4(stepsTraveled, stepsTraveled, stepsTraveled, 1.0);
    #endif

    gl_FragData[0] = getColorForValue(sum, posIS, tstep);
  #endif
  #if vtkBlendMode == 5 // RADON
    float normalizedRayIntensity = 1.0;

    // handle very thin volumes
    if (raySteps <= 1.0)
    {
      tValue = getTextureValue(posIS);
      normalizedRayIntensity = normalizedRayIntensity - sampleDistance*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;
      gl_FragData[0] = texture2D(ctexture, vec2(normalizedRayIntensity, 0.5));
      return;
    }

    posIS += (jitter*stepIS);

    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar value
      tValue = getTextureValue(posIS);

      // Convert scalar value to normalizedRayIntensity coefficient and accumulate normalizedRayIntensity
      normalizedRayIntensity = normalizedRayIntensity - sampleDistance*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;

      posIS += stepIS;
      stepsTraveled++;
    }

    // map normalizedRayIntensity to color
    gl_FragData[0] = texture2D(ctexture, vec2(normalizedRayIntensity , 0.5));

  #endif
}

//=======================================================================
// Compute a new start and end point for a given ray based
// on the provided bounded clipping plane (aka a rectangle)
void getRayPointIntersectionBounds(
  vec3 rayPos, vec3 rayDir,
  vec3 planeDir, float planeDist,
  inout vec2 tbounds, vec3 vPlaneX, vec3 vPlaneY,
  float vSize1, float vSize2)
{
  float result = dot(rayDir, planeDir);
  if (abs(result) < 1e-6)
  {
    return;
  }
  result = -1.0 * (dot(rayPos, planeDir) + planeDist) / result;
  vec3 xposVC = rayPos + rayDir*result;
  vec3 vxpos = xposVC - vOriginVC;
  vec2 vpos = vec2(
    dot(vxpos, vPlaneX),
    dot(vxpos, vPlaneY));

  // on some apple nvidia systems this does not work
  // if (vpos.x < 0.0 || vpos.x > vSize1 ||
  //     vpos.y < 0.0 || vpos.y > vSize2)
  // even just
  // if (vpos.x < 0.0 || vpos.y < 0.0)
  // fails
  // so instead we compute a value that represents in and out
  //and then compute the return using this value
  float xcheck = max(0.0, vpos.x * (vpos.x - vSize1)); //  0 means in bounds
  float check = sign(max(xcheck, vpos.y * (vpos.y - vSize2))); //  0 means in bounds, 1 = out

  tbounds = mix(
   vec2(min(tbounds.x, result), max(tbounds.y, result)), // in value
   tbounds, // out value
   check);  // 0 in 1 out
}

//=======================================================================
// given a
// - ray direction (rayDir)
// - starting point (vertexVCVSOutput)
// - bounding planes of the volume
// - optionally depth buffer values
// - far clipping plane
// compute the start/end distances of the ray we need to cast
vec2 computeRayDistances(vec3 rayDir, vec3 tdims)
{
  vec2 dists = vec2(100.0*camFar, -1.0);

  vec3 vSize = vSpacing*tdims;

  // all this is in View Coordinates
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal0, vPlaneDistance0, dists, vPlaneNormal2, vPlaneNormal4,
    vSize.y, vSize.z);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal1, vPlaneDistance1, dists, vPlaneNormal2, vPlaneNormal4,
    vSize.y, vSize.z);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal2, vPlaneDistance2, dists, vPlaneNormal0, vPlaneNormal4,
    vSize.x, vSize.z);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal3, vPlaneDistance3, dists, vPlaneNormal0, vPlaneNormal4,
    vSize.x, vSize.z);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal4, vPlaneDistance4, dists, vPlaneNormal0, vPlaneNormal2,
    vSize.x, vSize.y);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal5, vPlaneDistance5, dists, vPlaneNormal0, vPlaneNormal2,
    vSize.x, vSize.y);

  //VTK::ClipPlane::Impl

  // do not go behind front clipping plane
  dists.x = max(0.0,dists.x);

  // do not go PAST far clipping plane
  float farDist = -camThick/rayDir.z;
  dists.y = min(farDist,dists.y);

  // Do not go past the zbuffer value if set
  // This is used for intermixing opaque geometry
  //VTK::ZBuffer::Impl

  return dists;
}

//=======================================================================
// Compute the index space starting position (pos) and end
// position
//
void computeIndexSpaceValues(out vec3 pos, out vec3 endPos, vec3 rayDir, vec2 dists)
{
  // compute starting and ending values in volume space
  pos = vertexVCVSOutput + dists.x*rayDir;
  pos = pos - vOriginVC;
  // convert to volume basis and origin
  pos = vec3(
    dot(pos, vPlaneNormal0),
    dot(pos, vPlaneNormal2),
    dot(pos, vPlaneNormal4));

  endPos = vertexVCVSOutput + dists.y*rayDir;
  endPos = endPos - vOriginVC;
  endPos = vec3(
    dot(endPos, vPlaneNormal0),
    dot(endPos, vPlaneNormal2),
    dot(endPos, vPlaneNormal4));

  float delta = length(endPos - pos);

  pos *= vVCToIJK;
  endPos *= vVCToIJK;

  float delta2 = length(endPos - pos);
  sampleDistanceIS = sampleDistance*delta2/delta;
  #ifdef VolumeShadowOn
    sampleDistanceISVS = sampleDistanceIS * volumeShadowSamplingDistFactor;
  #endif
}

void main()
{

  if (cameraParallel == 1)
  {
    // Camera is parallel, so the rayDir is just the direction of the camera.
    rayDirVC = vec3(0.0, 0.0, -1.0);
  } else {
    // camera is at 0,0,0 so rayDir for perspective is just the vc coord
    rayDirVC = normalize(vertexVCVSOutput);
  }

  vec3 tdims = vec3(volumeDimensions);

  // compute the start and end points for the ray
  vec2 rayStartEndDistancesVC = computeRayDistances(rayDirVC, tdims);

  // do we need to composite? aka does the ray have any length
  // If not, bail out early
  if (rayStartEndDistancesVC.y <= rayStartEndDistancesVC.x)
  {
    discard;
  }

  // IS = Index Space
  vec3 posIS;
  vec3 endIS;
  computeIndexSpaceValues(posIS, endIS, rayDirVC, rayStartEndDistancesVC);

  // Perform the blending operation along the ray
  applyBlend(posIS, endIS, tdims);
}
`;const{vtkWarningMacro:EH,vtkErrorMacro:M0}=nr;function kH(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}function pT(t,e,n){if(e){const r=t.getIndependentComponents();return`${e.getMTime()}-${r}-${n}`}return"0"}function OH(t,e){e.classHierarchy.push("vtkOpenGLVolumeMapper"),t.buildPass=()=>{e.zBufferTexture=null},t.zBufferPass=(n,r)=>{if(n){const a=r.getZBufferTexture();a!==e.zBufferTexture&&(e.zBufferTexture=a)}},t.opaqueZBufferPass=(n,r)=>t.zBufferPass(n,r),t.volumePass=(n,r)=>{if(n){e._openGLRenderWindow=t.getFirstAncestorOfType("vtkOpenGLRenderWindow"),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.jitterTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.scalarTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.opacityTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.labelOutlineThicknessTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLVolume=t.getFirstAncestorOfType("vtkOpenGLVolume");const a=e.openGLVolume.getRenderable();e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer");const s=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(s.getActiveCamera()),t.renderPiece(s,a)}},t.buildShaders=(n,r,a)=>{t.getShaderTemplate(n,r,a),t.replaceShaderValues(n,r,a)},t.getShaderTemplate=(n,r,a)=>{n.Vertex=TH,n.Fragment=xH,n.Geometry=""},t.replaceShaderValues=(n,r,a)=>{let s=n.Fragment;a.getProperty().getInterpolationType()===dT.LINEAR&&(s=ue.substitute(s,"//VTK::TrilinearOn","#define vtkTrilinearOn").result),a.getProperty().getUseLabelOutline()===!0&&(s=ue.substitute(s,"//VTK::ImageLabelOutlineOn","#define vtkImageLabelOutlineOn").result);const l=e.scalarTexture.getComponents();s=ue.substitute(s,"//VTK::NumComponents",`#define vtkNumComponents ${l}`).result;const c=a.getProperty().getIndependentComponents();if(c){s=ue.substitute(s,"//VTK::IndependentComponentsOn","#define vtkIndependentComponentsOn").result;const h=[];for(let g=0;g<l;g++)a.getProperty().getOpacityMode(g)===wH.PROPORTIONAL&&h.push(`#define vtkComponent${g}Proportional`);h.length>0&&(s=ue.substitute(s,"//VTK::vtkProportionalComponents",h.join(`
`)).result)}const u=e.currentInput.getSpatialExtent(),f=e.currentInput.getSpacing(),d=new Float64Array(3);hn(d,(u[1]-u[0])*f[0],(u[3]-u[2])*f[1],(u[5]-u[4])*f[2]);const p=yc(d)/t.getCurrentSampleDistance(r);s=ue.substitute(s,"//VTK::MaximumSamplesValue",`${Math.ceil(p)}`).result,s=ue.substitute(s,"//VTK::LightComplexity",`#define vtkLightComplexity ${e.lastLightComplexity}`).result,e.lastLightComplexity>0&&(e.renderable.getVolumetricScatteringBlending()>0&&(s=ue.substitute(s,"//VTK::VolumeShadowOn","#define VolumeShadowOn").result),e.renderable.getVolumetricScatteringBlending()<1&&(s=ue.substitute(s,"//VTK::SurfaceShadowOn","#define SurfaceShadowOn").result),e.renderable.getLocalAmbientOcclusion()&&a.getProperty().getAmbient()>0&&(s=ue.substitute(s,"//VTK::localAmbientOcclusionOn","#define localAmbientOcclusionOn").result)),e.gopacity=a.getProperty().getUseGradientOpacity(0);for(let h=1;c&&!e.gopacity&&h<l;++h)a.getProperty().getUseGradientOpacity(h)&&(e.gopacity=!0);e.gopacity&&(s=ue.substitute(s,"//VTK::GradientOpacityOn","#define vtkGradientOpacityOn").result),e.renderable.getComputeNormalFromOpacity()&&(s=ue.substitute(s,"//VTK::vtkComputeNormalFromOpacity","#define vtkComputeNormalFromOpacity").result),e.zBufferTexture!==null&&(s=ue.substitute(s,"//VTK::ZBuffer::Dec",["uniform sampler2D zBufferTexture;","uniform float vpZWidth;","uniform float vpZHeight;"]).result,s=ue.substitute(s,"//VTK::ZBuffer::Impl",["vec4 depthVec = texture2D(zBufferTexture, vec2(gl_FragCoord.x / vpZWidth, gl_FragCoord.y/vpZHeight));","float zdepth = (depthVec.r*256.0 + depthVec.g)/257.0;","zdepth = zdepth * 2.0 - 1.0;","if (cameraParallel == 0) {","zdepth = -2.0 * camFar * camNear / (zdepth*(camFar-camNear)-(camFar+camNear)) - camNear;}","else {",`zdepth = (zdepth + 1.0) * 0.5 * (camFar - camNear);}
`,"zdepth = -zdepth/rayDir.z;","dists.y = min(zdepth,dists.y);"]).result),s=ue.substitute(s,"//VTK::BlendMode",`${e.renderable.getBlendMode()}`).result,n.Fragment=s,t.replaceShaderLight(n,r,a),t.replaceShaderClippingPlane(n,r,a)},t.replaceShaderLight=(n,r,a)=>{if(e.lastLightComplexity===0)return;let s=n.Fragment,o=0;r.getLights().forEach(i=>{i.getSwitch()&&(o+=1)}),s=ue.substitute(s,"//VTK::Light::Dec",["uniform int lightNum;","uniform bool twoSidedLighting;",`uniform vec3 lightColor[${o}];`,`uniform vec3 lightDirectionVC[${o}]; // normalized`,`uniform vec3 lightHalfAngleVC[${o}];`,"//VTK::Light::Dec"],!1).result,e.lastLightComplexity===3&&(s=ue.substitute(s,"//VTK::Light::Dec",[`uniform vec3 lightPositionVC[${o}];`,`uniform vec3 lightAttenuation[${o}];`,`uniform float lightConeAngle[${o}];`,`uniform float lightExponent[${o}];`,`uniform int lightPositional[${o}];`],!1).result),e.renderable.getVolumetricScatteringBlending()>0&&(s=ue.substitute(s,"//VTK::VolumeShadow::Dec",["uniform float volumetricScatteringBlending;","uniform float giReach;","uniform float volumeShadowSamplingDistFactor;","uniform float anisotropy;","uniform float anisotropy2;"],!1).result),e.renderable.getLocalAmbientOcclusion()&&a.getProperty().getAmbient()>0&&(s=ue.substitute(s,"//VTK::LAO::Dec",["uniform int kernelRadius;",`uniform vec2 kernelSample[${e.renderable.getLAOKernelRadius()}];`,"uniform int kernelSize;"],!1).result),n.Fragment=s},t.replaceShaderClippingPlane=(n,r,a)=>{let s=n.Fragment;if(e.renderable.getClippingPlanes().length>0){const o=e.renderable.getClippingPlanes().length;s=ue.substitute(s,"//VTK::ClipPlane::Dec",["uniform vec3 vClipPlaneNormals[6];","uniform float vClipPlaneDistances[6];","uniform vec3 vClipPlaneOrigins[6];","uniform int clip_numPlanes;","//VTK::ClipPlane::Dec","#define vtkClippingPlanesOn"],!1).result,s=ue.substitute(s,"//VTK::ClipPlane::Impl",[`for(int i = 0; i < ${o}; i++) {`,"  float rayDirRatio = dot(rayDir, vClipPlaneNormals[i]);","  float equationResult = dot(vertexVCVSOutput, vClipPlaneNormals[i]) + vClipPlaneDistances[i];","  if (rayDirRatio == 0.0)","  {","    if (equationResult < 0.0) dists.x = dists.y;","    continue;","  }","  float result = -1.0 * equationResult / rayDirRatio;","  if (rayDirRatio < 0.0) dists.y = min(dists.y, result);","  else dists.x = max(dists.x, result);","}","//VTK::ClipPlane::Impl"],!1).result}n.Fragment=s},t.getNeedToRebuildShaders=(n,r,a)=>{var y;let s=0;a.getProperty().getShade()&&e.renderable.getBlendMode()===Ni.COMPOSITE_BLEND&&(s=0,e.numberOfLights=0,r.getLights().forEach(m=>{m.getSwitch()>0&&(e.numberOfLights++,s===0&&(s=1)),s===1&&(e.numberOfLights>1||m.getIntensity()!==1||!m.lightTypeIsHeadLight())&&(s=2),s<3&&m.getPositional()&&(s=3)}));let o=!1;e.lastLightComplexity!==s&&(e.lastLightComplexity=s,o=!0);const i=e.scalarTexture.getComponents(),l=a.getProperty().getIndependentComponents();let c=!1;const u=[];if(l){for(let m=0;m<i;m++)u.push(a.getProperty().getOpacityMode(m));u.length>0&&(c=!0)}const f=e.currentInput.getSpatialExtent(),d=e.currentInput.getSpacing(),p=new Float64Array(3);hn(p,(f[1]-f[0])*d[0],(f[3]-f[2])*d[1],(f[5]-f[4])*d[2]);const h=yc(p)/t.getCurrentSampleDistance(r),g={interpolationType:a.getProperty().getInterpolationType(),useLabelOutline:a.getProperty().getUseLabelOutline(),numComp:i,usesProportionalComponents:c,iComps:l,maxSamples:h,useGradientOpacity:a.getProperty().getUseGradientOpacity(0),blendMode:e.renderable.getBlendMode(),proportionalComponents:u};return!e.previousState||e.previousState.interpolationType!==g.interpolationType||e.previousState.useLabelOutline!==g.useLabelOutline||e.previousState.numComp!==g.numComp||e.previousState.usesProportionalComponents!==g.usesProportionalComponents||e.previousState.iComps!==g.iComps||e.previousState.maxSamples!==g.maxSamples||e.previousState.useGradientOpacity!==g.useGradientOpacity||e.previousState.blendMode!==g.blendMode||!kH(e.previousState.proportionalComponents,g.proportionalComponents)?(e.previousState={...g},!0):((y=n.getProgram())==null?void 0:y.getHandle())===0||o||e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||!!e.lastZBufferTexture!=!!e.zBufferTexture||n.getShaderSourceTime().getMTime()<t.getMTime()||n.getShaderSourceTime().getMTime()<e.renderable.getMTime()?(e.lastZBufferTexture=e.zBufferTexture,!0):!1},t.updateShaders=(n,r,a)=>{if(e.lastBoundBO=n,t.getNeedToRebuildShaders(n,r,a)){const s={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(s,r,a);const o=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(s.Vertex,s.Fragment,s.Geometry);o!==n.getProgram()&&(n.setProgram(o),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),t.setMapperShaderParameters(n,r,a),t.setCameraShaderParameters(n,r,a),t.setPropertyShaderParameters(n,r,a),t.getClippingPlaneShaderParameters(n,r,a)},t.setMapperShaderParameters=(n,r,a)=>{const s=n.getProgram();n.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&(s.isAttributeUsed("vertexDC")&&(n.getVAO().addAttributeArray(s,n.getCABO(),"vertexDC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||M0("Error setting vertexDC in shader VAO.")),n.getAttributeUpdateTime().modified()),s.setUniformi("texture1",e.scalarTexture.getTextureUnit()),s.setUniformf("sampleDistance",t.getCurrentSampleDistance(r));const o=e.scalarTexture.getVolumeInfo(),i=e.renderable.getIpScalarRange(),l=[],c=[];for(let u=0;u<4;u++)l[u]=i[0]*o.dataComputedScale[u]+o.dataComputedOffset[u],c[u]=i[1]*o.dataComputedScale[u]+o.dataComputedOffset[u],l[u]=(l[u]-o.offset[u])/o.scale[u],c[u]=(c[u]-o.offset[u])/o.scale[u];if(s.setUniform4f("ipScalarRangeMin",l[0],l[1],l[2],l[3]),s.setUniform4f("ipScalarRangeMax",c[0],c[1],c[2],c[3]),e.zBufferTexture!==null){s.setUniformi("zBufferTexture",e.zBufferTexture.getTextureUnit());const u=e._useSmallViewport?[e._smallViewportWidth,e._smallViewportHeight]:e._openGLRenderWindow.getFramebufferSize();s.setUniformf("vpZWidth",u[0]),s.setUniformf("vpZHeight",u[1])}},t.setCameraShaderParameters=(n,r,a)=>{const s=e.openGLCamera.getKeyMatrices(r),o=e.openGLVolume.getKeyMatrices();Ut(e.modelToView,s.wcvc,o.mcwc);const i=n.getProgram(),l=e.openGLCamera.getRenderable(),c=l.getClippingRange();i.setUniformf("camThick",c[1]-c[0]),i.setUniformf("camNear",c[0]),i.setUniformf("camFar",c[1]);const u=e.currentInput.getBounds(),f=e.currentInput.getDimensions(),d=new Float64Array(3),p=new Float64Array(3);let h=1,g=-1,y=1,m=-1;for(let B=0;B<8;++B){if(hn(d,u[B%2],u[2+Math.floor(B/2)%2],u[4+Math.floor(B/4)]),It(d,d,e.modelToView),!l.getParallelProjection()){es(p,d);const F=-c[0]/d[2];zs(d,p,F)}It(d,d,s.vcpc),h=Math.min(d[0],h),g=Math.max(d[0],g),y=Math.min(d[1],y),m=Math.max(d[1],m)}i.setUniformf("dcxmin",h),i.setUniformf("dcxmax",g),i.setUniformf("dcymin",y),i.setUniformf("dcymax",m),i.isUniformUsed("cameraParallel")&&i.setUniformi("cameraParallel",l.getParallelProjection());const b=e.currentInput.getSpatialExtent(),C=e.currentInput.getSpacing(),S=new Float64Array(3);hn(S,(b[1]-b[0])*C[0],(b[3]-b[2])*C[1],(b[5]-b[4])*C[2]),i.setUniform3f("vSpacing",C[0],C[1],C[2]),hn(d,b[0],b[2],b[4]),e.currentInput.indexToWorldVec3(d,d),It(d,d,e.modelToView),i.setUniform3f("vOriginVC",d[0],d[1],d[2]);const T=e.currentInput.getIndexToWorld();Ut(e.idxToView,e.modelToView,T),Dc(e.idxNormalMatrix,s.normalMatrix,o.normalMatrix),Dc(e.idxNormalMatrix,e.idxNormalMatrix,e.currentInput.getDirectionByReference());const w=yc(S)/t.getCurrentSampleDistance(r);w>e.renderable.getMaximumSamplesPerRay()&&EH(`The number of steps required ${Math.ceil(w)} is larger than the
        specified maximum number of steps ${e.renderable.getMaximumSamplesPerRay()}.
        Please either change the
        volumeMapper sampleDistance or its maximum number of samples.`);const x=new Float64Array(3);if(hn(x,1,1,1),_U(x,x,S),i.setUniform3f("vVCToIJK",x[0],x[1],x[2]),i.setUniform3i("volumeDimensions",f[0],f[1],f[2]),!e._openGLRenderWindow.getWebgl2()){const B=e.scalarTexture.getVolumeInfo();i.setUniformf("texWidth",e.scalarTexture.getWidth()),i.setUniformf("texHeight",e.scalarTexture.getHeight()),i.setUniformi("xreps",B.xreps),i.setUniformi("xstride",B.xstride),i.setUniformi("ystride",B.ystride)}const E=new Float64Array(3),O=new Float64Array(3);for(let B=0;B<6;++B){switch(B){case 1:hn(E,-1,0,0),hn(O,b[0],b[2],b[4]);break;case 2:hn(E,0,1,0),hn(O,b[1],b[3],b[5]);break;case 3:hn(E,0,-1,0),hn(O,b[0],b[2],b[4]);break;case 4:hn(E,0,0,1),hn(O,b[1],b[3],b[5]);break;case 5:hn(E,0,0,-1),hn(O,b[0],b[2],b[4]);break;case 0:default:hn(E,1,0,0),hn(O,b[1],b[3],b[5]);break}Gp(E,E,e.idxNormalMatrix),It(O,O,e.idxToView);const F=-1*yf(O,E);i.setUniform3f(`vPlaneNormal${B}`,E[0],E[1],E[2]),i.setUniformf(`vPlaneDistance${B}`,F)}if(a.getProperty().getUseLabelOutline()){const F=e.currentInput.getWorldToIndex();i.setUniformMatrix("vWCtoIDX",F);const $=r.getActiveCamera(),[N,W]=$.getClippingRange(),_=$.getDistance();$.setClippingRange(_,_+.1);const L=e.openGLCamera.getKeyMatrices(r);An(e.projectionToWorld,L.wcpc),$.setClippingRange(N,W),e.openGLCamera.getKeyMatrices(r),i.setUniformMatrix("PCWCMatrix",e.projectionToWorld);const G=t.getRenderTargetSize();i.setUniformf("vpWidth",G[0]),i.setUniformf("vpHeight",G[1]);const K=t.getRenderTargetOffset();i.setUniformf("vpOffsetX",K[0]/G[0]),i.setUniformf("vpOffsetY",K[1]/G[1])}if(An(e.projectionToView,s.vcpc),i.setUniformMatrix("PCVCMatrix",e.projectionToView),e.lastLightComplexity===0)return;let k=0;const M=[],D=[],I=[];if(r.getLights().forEach(B=>{if(B.getSwitch()>0){const $=B.getColor(),N=B.getIntensity();M[0+k*3]=$[0]*N,M[1+k*3]=$[1]*N,M[2+k*3]=$[2]*N;const W=B.getDirection();hn(E,W[0],W[1],W[2]),Gp(E,E,s.normalMatrix),es(E,E),D[0+k*3]=E[0],D[1+k*3]=E[1],D[2+k*3]=E[2],I[0+k*3]=-.5*E[0],I[1+k*3]=-.5*E[1],I[2+k*3]=-.5*(E[2]-1),k++}}),i.setUniformi("twoSidedLighting",r.getTwoSidedLighting()),i.setUniformi("lightNum",k),i.setUniform3fv("lightColor",M),i.setUniform3fv("lightDirectionVC",D),i.setUniform3fv("lightHalfAngleVC",I),e.lastLightComplexity===3){k=0;const B=[],F=[],$=[],N=[],W=[];r.getLights().forEach(_=>{if(_.getSwitch()>0){const G=_.getAttenuationValues();F[0+k*3]=G[0],F[1+k*3]=G[1],F[2+k*3]=G[2],N[k]=_.getExponent(),$[k]=_.getConeAngle(),W[k]=_.getPositional();const K=_.getTransformedPosition();It(K,K,e.modelToView),B[0+k*3]=K[0],B[1+k*3]=K[1],B[2+k*3]=K[2],k+=1}}),i.setUniform3fv("lightPositionVC",B),i.setUniform3fv("lightAttenuation",F),i.setUniformfv("lightConeAngle",$),i.setUniformfv("lightExponent",N),i.setUniformiv("lightPositional",W)}if(e.renderable.getVolumetricScatteringBlending()>0&&(i.setUniformf("giReach",e.renderable.getGlobalIlluminationReach()),i.setUniformf("volumetricScatteringBlending",e.renderable.getVolumetricScatteringBlending()),i.setUniformf("volumeShadowSamplingDistFactor",e.renderable.getVolumeShadowSamplingDistFactor()),i.setUniformf("anisotropy",e.renderable.getAnisotropy()),i.setUniformf("anisotropy2",e.renderable.getAnisotropy()**2)),e.renderable.getLocalAmbientOcclusion()&&a.getProperty().getAmbient()>0){const B=e.renderable.getLAOKernelSize();i.setUniformi("kernelSize",B);const F=[];for(let $=0;$<B;$++)F[$*2]=Math.random()*.5,F[$*2+1]=Math.random()*.5;i.setUniform2fv("kernelSample",F),i.setUniformi("kernelRadius",e.renderable.getLAOKernelRadius())}},t.setPropertyShaderParameters=(n,r,a)=>{const s=n.getProgram();s.setUniformi("ctexture",e.colorTexture.getTextureUnit()),s.setUniformi("otexture",e.opacityTexture.getTextureUnit()),s.setUniformi("jtexture",e.jitterTexture.getTextureUnit()),s.setUniformi("ttexture",e.labelOutlineThicknessTexture.getTextureUnit());const o=e.scalarTexture.getVolumeInfo(),i=a.getProperty(),l=e.scalarTexture.getComponents(),c=a.getProperty().getIndependentComponents();if(c&&l>=2)for(let f=0;f<l;f++)s.setUniformf(`mix${f}`,a.getProperty().getComponentWeight(f));for(let f=0;f<l;f++){const d=c?f:0,p=o.scale[f],g=i.getScalarOpacity(d).getRange(),y=p/(g[1]-g[0]),m=(o.offset[f]-g[0])/(g[1]-g[0]);s.setUniformf(`oshift${f}`,m),s.setUniformf(`oscale${f}`,y);const C=i.getRGBTransferFunction(d).getRange(),S=(o.offset[f]-C[0])/(C[1]-C[0]),T=p/(C[1]-C[0]);s.setUniformf(`cshift${f}`,S),s.setUniformf(`cscale${f}`,T)}if(e.gopacity)if(c)for(let f=0;f<l;++f){const d=o.scale[f];if(i.getUseGradientOpacity(f)){const h=i.getGradientOpacityMinimumOpacity(f),g=i.getGradientOpacityMaximumOpacity(f);s.setUniformf(`gomin${f}`,h),s.setUniformf(`gomax${f}`,g);const y=[i.getGradientOpacityMinimumValue(f),i.getGradientOpacityMaximumValue(f)];s.setUniformf(`goscale${f}`,d*(g-h)/(y[1]-y[0])),s.setUniformf(`goshift${f}`,-y[0]*(g-h)/(y[1]-y[0])+h)}else s.setUniformf(`gomin${f}`,1),s.setUniformf(`gomax${f}`,1),s.setUniformf(`goscale${f}`,0),s.setUniformf(`goshift${f}`,1)}else{const f=o.scale[l-1],d=i.getGradientOpacityMinimumOpacity(0),p=i.getGradientOpacityMaximumOpacity(0);s.setUniformf("gomin0",d),s.setUniformf("gomax0",p);const h=[i.getGradientOpacityMinimumValue(0),i.getGradientOpacityMaximumValue(0)];s.setUniformf("goscale0",f*(p-d)/(h[1]-h[0])),s.setUniformf("goshift0",-h[0]*(p-d)/(h[1]-h[0])+d)}if(a.getProperty().getUseLabelOutline()===!0){const f=a.getProperty().getLabelOutlineOpacity();s.setUniformf("outlineOpacity",f)}e.lastLightComplexity>0&&(s.setUniformf("vAmbient",i.getAmbient()),s.setUniformf("vDiffuse",i.getDiffuse()),s.setUniformf("vSpecular",i.getSpecular()),s.setUniformf("vSpecularPower",i.getSpecularPower()))},t.getClippingPlaneShaderParameters=(n,r,a)=>{if(e.renderable.getClippingPlanes().length>0){const s=e.openGLCamera.getKeyMatrices(r),o=[],i=[],l=[],c=e.renderable.getClippingPlanes(),u=c.length;for(let d=0;d<u;++d){const p=c[d].getNormal(),h=c[d].getOrigin();Gp(p,p,s.normalMatrix),It(h,h,s.wcvc);const g=-1*yf(h,p);o.push(p[0]),o.push(p[1]),o.push(p[2]),i.push(g),l.push(h[0]),l.push(h[1]),l.push(h[2])}const f=n.getProgram();f.setUniform3fv("vClipPlaneNormals",o),f.setUniformfv("vClipPlaneDistances",i),f.setUniform3fv("vClipPlaneOrigins",l),f.setUniformi("clip_numPlanes",u)}},t.delete=X1(()=>{e._animationRateSubscription&&(e._animationRateSubscription.unsubscribe(),e._animationRateSubscription=null)},t.delete),t.getRenderTargetSize=()=>{if(e._useSmallViewport)return[e._smallViewportWidth,e._smallViewportHeight];const{usize:n,vsize:r}=e._openGLRenderer.getTiledSizeAndOrigin();return[n,r]},t.getRenderTargetOffset=()=>{const{lowerLeftU:n,lowerLeftV:r}=e._openGLRenderer.getTiledSizeAndOrigin();return[n,r]},t.getCurrentSampleDistance=n=>{const r=n.getVTKWindow().getInteractor(),a=e.renderable.getSampleDistance();if(r.isAnimating()){const s=e.renderable.getInteractionSampleDistanceFactor();return a*s}return a},t.renderPieceStart=(n,r)=>{const a=n.getVTKWindow().getInteractor();if(e._lastScale||(e._lastScale=e.renderable.getInitialInteractionScale()),e._useSmallViewport=!1,a.isAnimating()&&e._lastScale>1.5&&(e._useSmallViewport=!0),e._animationRateSubscription||(e._animationRateSubscription=a.onAnimationFrameRateUpdate(()=>{if(e.renderable.getAutoAdjustSampleDistances()){const o=a.getRecentAnimationFrameRate(),i=a.getDesiredUpdateRate()/o;(i>1.15||i<.85)&&(e._lastScale*=i),e._lastScale>400&&(e._lastScale=400),e._lastScale<1.5&&(e._lastScale=1.5)}else e._lastScale=e.renderable.getImageSampleDistance()*e.renderable.getImageSampleDistance()})),e._useSmallViewport){const o=e._openGLRenderWindow.getFramebufferSize(),i=1/Math.sqrt(e._lastScale);if(e._smallViewportWidth=Math.ceil(i*o[0]),e._smallViewportHeight=Math.ceil(i*o[1]),e._smallViewportHeight>o[1]&&(e._smallViewportHeight=o[1]),e._smallViewportWidth>o[0]&&(e._smallViewportWidth=o[0]),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.getGLFramebuffer()===null)e.framebuffer.create(o[0],o[1]),e.framebuffer.populateFramebuffer();else{const c=e.framebuffer.getSize();(!c||c[0]!==o[0]||c[1]!==o[1])&&(e.framebuffer.create(o[0],o[1]),e.framebuffer.populateFramebuffer())}e.framebuffer.bind();const l=e.context;l.clearColor(0,0,0,0),l.colorMask(!0,!0,!0,!0),l.clear(l.COLOR_BUFFER_BIT),l.viewport(0,0,e._smallViewportWidth,e._smallViewportHeight),e.fvp=[e._smallViewportWidth/o[0],e._smallViewportHeight/o[1]]}e.context.disable(e.context.DEPTH_TEST),t.updateBufferObjects(n,r),r.getProperty().getInterpolationType()===dT.NEAREST?(e.scalarTexture.setMinificationFilter(wt.NEAREST),e.scalarTexture.setMagnificationFilter(wt.NEAREST)):(e.scalarTexture.setMinificationFilter(wt.LINEAR),e.scalarTexture.setMagnificationFilter(wt.LINEAR)),e.lastBoundBO=null,e.zBufferTexture!==null&&e.zBufferTexture.activate()},t.renderPieceDraw=(n,r)=>{const a=e.context;e.scalarTexture.activate(),e.opacityTexture.activate(),e.labelOutlineThicknessTexture.activate(),e.colorTexture.activate(),e.jitterTexture.activate(),t.updateShaders(e.tris,n,r),a.drawArrays(a.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),e.scalarTexture.deactivate(),e.colorTexture.deactivate(),e.opacityTexture.deactivate(),e.labelOutlineThicknessTexture.deactivate(),e.jitterTexture.deactivate()},t.renderPieceFinish=(n,r)=>{if(e.zBufferTexture!==null&&e.zBufferTexture.deactivate(),e._useSmallViewport){if(e.framebuffer.restorePreviousBindingsAndBuffers(),e.copyShader===null){e.copyShader=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","uniform vec2 tfactor;","varying vec2 tcoord;","void main() { tcoord = vec2(vertexDC.x*0.5 + 0.5, vertexDC.y*0.5 + 0.5) * tfactor; gl_Position = vertexDC; }"].join(`
`),["//VTK::System::Dec","//VTK::Output::Dec","uniform sampler2D texture1;","varying vec2 tcoord;","void main() { gl_FragData[0] = texture2D(texture1,tcoord); }"].join(`
`),"");const i=e.copyShader;e.copyVAO=id.newInstance(),e.copyVAO.setOpenGLRenderWindow(e._openGLRenderWindow),e.tris.getCABO().bind(),e.copyVAO.addAttributeArray(i,e.tris.getCABO(),"vertexDC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||M0("Error setting vertexDC in copy shader VAO.")}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(e.copyShader);const a=e._openGLRenderWindow.getFramebufferSize();e.context.viewport(0,0,a[0],a[1]);const s=e.framebuffer.getColorTexture();s.activate(),e.copyShader.setUniformi("texture",s.getTextureUnit()),e.copyShader.setUniform2f("tfactor",e.fvp[0],e.fvp[1]);const o=e.context;o.blendFuncSeparate(o.ONE,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),e.context.drawArrays(e.context.TRIANGLES,0,e.tris.getCABO().getElementCount()),s.deactivate(),o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA)}},t.renderPiece=(n,r)=>{if(t.invokeEvent({type:"StartEvent"}),e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent({type:"EndEvent"}),!e.currentInput){M0("No input!");return}t.renderPieceStart(n,r),t.renderPieceDraw(n,r),t.renderPieceFinish(n,r)},t.computeBounds=(n,r)=>{if(!t.getInput()){fu(e.Bounds);return}e.bounds=t.getInput().getBounds()},t.updateBufferObjects=(n,r)=>{t.getNeedToRebuildBufferObjects(n,r)&&t.buildBufferObjects(n,r)},t.getNeedToRebuildBufferObjects=(n,r)=>e.VBOBuildTime.getMTime()<t.getMTime()||e.VBOBuildTime.getMTime()<r.getMTime()||e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<r.getProperty().getMTime()||e.VBOBuildTime.getMTime()<e.currentInput.getMTime(),t.buildBufferObjects=(n,r)=>{const a=e.currentInput;if(!a)return;const s=a.getPointData()&&a.getPointData().getScalars();if(!s)return;e._scalars!==s&&(e._openGLRenderWindow.releaseGraphicsResourcesForObject(e._scalars),e._scalars=s);const o=r.getProperty();if(!e.jitterTexture.getHandle()){const C=new Uint8Array(1024);for(let S=0;S<32*32;++S)C[S]=255*Math.random();e.jitterTexture.setMinificationFilter(wt.LINEAR),e.jitterTexture.setMagnificationFilter(wt.LINEAR),e.jitterTexture.create2DFromRaw(32,32,1,jt.UNSIGNED_CHAR,C)}const i=s.getNumberOfComponents(),c=o.getIndependentComponents()?i:1,u=o.getScalarOpacity(),f=e._openGLRenderWindow.getGraphicsResourceForObject(u);let d=pT(o,u,c);if(!f.vtkObj||f.hash!==d||e.opacityTextureString!==d){const S=2048*c,T=new Float32Array(S),w=new Float32Array(1024);for(let x=0;x<c;++x){const E=o.getScalarOpacity(x),O=t.getCurrentSampleDistance(n)/o.getScalarOpacityUnitDistance(x),k=E.getRange();E.getTable(k[0],k[1],1024,w,1);for(let M=0;M<1024;++M)T[x*1024*2+M]=1-(1-w[M])**O,T[x*1024*2+M+1024]=T[x*1024*2+M]}if(e.opacityTexture.releaseGraphicsResources(e._openGLRenderWindow),e.opacityTexture.resetFormatAndType(),e.opacityTexture.setMinificationFilter(wt.LINEAR),e.opacityTexture.setMagnificationFilter(wt.LINEAR),e._openGLRenderWindow.getWebgl2()||e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear"))e.opacityTexture.create2DFromRaw(1024,2*c,1,jt.FLOAT,T);else{const x=new Uint8ClampedArray(S);for(let E=0;E<S;++E)x[E]=255*T[E];e.opacityTexture.create2DFromRaw(1024,2*c,1,jt.UNSIGNED_CHAR,x)}e.opacityTextureString=d,u&&e._openGLRenderWindow.setGraphicsResourceForObject(u,e.opacityTexture,e.opacityTextureString)}else e.opacityTexture=f.vtkObj,e.opacityTextureString=f.hash;const h=o.getRGBTransferFunction();d=pT(o,h,c);const g=e._openGLRenderWindow.getGraphicsResourceForObject(h);if(!(g!=null&&g.vtkObj)||(g==null?void 0:g.hash)!==d||e.colorTextureString!==d){const S=2048*c*3,T=new Uint8ClampedArray(S),w=new Float32Array(1024*3);for(let x=0;x<c;++x){const E=o.getRGBTransferFunction(x),O=E.getRange();E.getTable(O[0],O[1],1024,w,1);for(let k=0;k<1024*3;++k)T[x*1024*6+k]=255*w[k],T[x*1024*6+k+1024*3]=255*w[k]}e.colorTexture.releaseGraphicsResources(e._openGLRenderWindow),e.colorTexture.resetFormatAndType(),e.colorTexture.setMinificationFilter(wt.LINEAR),e.colorTexture.setMagnificationFilter(wt.LINEAR),e.colorTexture.create2DFromRaw(1024,2*c,3,jt.UNSIGNED_CHAR,T),e.colorTextureString=d,h&&e._openGLRenderWindow.setGraphicsResourceForObject(h,e.colorTexture,e.colorTextureString)}else e.colorTexture=g.vtkObj,e.colorTextureString=g.hash;t.updateLabelOutlineThicknessTexture(r);const m=e._openGLRenderWindow.getGraphicsResourceForObject(s);if(d=`${a.getMTime()}A${s.getMTime()}`,!(m!=null&&m.vtkObj)||(m==null?void 0:m.hash)!==d||e.scalarTextureString!==d){const C=a.getDimensions();e.scalarTexture.setOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),e.scalarTexture.releaseGraphicsResources(e._openGLRenderWindow),e.scalarTexture.resetFormatAndType(),e.scalarTexture.create3DFilterableFromDataArray(C[0],C[1],C[2],s,e.renderable.getPreferSizeOverAccuracy()),e.scalarTextureString=d,s&&e._openGLRenderWindow.setGraphicsResourceForObject(s,e.scalarTexture,e.scalarTextureString)}else e.scalarTexture=m.vtkObj,e.scalarTextureString=m.hash;if(!e.tris.getCABO().getElementCount()){const C=new Float32Array(12);for(let x=0;x<4;x++)C[x*3]=x%2*2-1,C[x*3+1]=x>1?1:-1,C[x*3+2]=-1;const S=new Uint16Array(8);S[0]=3,S[1]=0,S[2]=1,S[3]=3,S[4]=3,S[5]=0,S[6]=3,S[7]=2;const T=Tt.newInstance({numberOfComponents:3,values:C});T.setName("points");const w=Tt.newInstance({numberOfComponents:1,values:S});e.tris.getCABO().createVBO(w,"polys",Er.SURFACE,{points:T,cellOffset:0})}e.VBOBuildTime.modified()},t.updateLabelOutlineThicknessTexture=n=>{const r=n.getProperty().getLabelOutlineThickness(),a=e._openGLRenderWindow.getGraphicsResourceForObject(r),s=`${r.join("-")}`;if(!(a!=null&&a.vtkObj)||(a==null?void 0:a.hash)!==s||e.labelOutlineThicknessTextureString!==s){const u=new Uint8Array(1024);for(let f=0;f<1024;++f){const d=r[f]||r[0];u[f]=d}e.labelOutlineThicknessTexture.releaseGraphicsResources(e._openGLRenderWindow),e.labelOutlineThicknessTexture.resetFormatAndType(),e.labelOutlineThicknessTexture.setMinificationFilter(wt.NEAREST),e.labelOutlineThicknessTexture.setMagnificationFilter(wt.NEAREST),e.labelOutlineThicknessTexture.create2DFromRaw(1024,1,1,jt.UNSIGNED_CHAR,u),e.labelOutlineThicknessTextureString=s,r&&e._openGLRenderWindow.setGraphicsResourceForObject(r,e.labelOutlineThicknessTexture,e.labelOutlineThicknessTextureString)}else e.labelOutlineThicknessTexture=a.vtkObj,e.labelOutlineThicknessTextureString=a.hash}}const MH={context:null,VBOBuildTime:null,scalarTexture:null,scalarTextureString:null,opacityTexture:null,opacityTextureString:null,colorTexture:null,colorTextureString:null,jitterTexture:null,labelOutlineThicknessTexture:null,labelOutlineThicknessTextureString:null,tris:null,framebuffer:null,copyShader:null,copyVAO:null,lastXYF:1,targetXYF:1,zBufferTexture:null,lastZBufferTexture:null,lastLightComplexity:0,fullViewportTime:1,idxToView:null,idxNormalMatrix:null,modelToView:null,projectionToView:null,avgWindowArea:0,avgFrameTime:0,_scalars:null};function RH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,MH,n),gn.extend(t,e,n),e.VBOBuildTime={},dn(e.VBOBuildTime,{mtime:0}),e.tris=Ba.newInstance(),e.scalarTexture=Gt.newInstance(),e.opacityTexture=Gt.newInstance(),e.colorTexture=Gt.newInstance(),e.jitterTexture=Gt.newInstance(),e.jitterTexture.setWrapS(wf.REPEAT),e.jitterTexture.setWrapT(wf.REPEAT),e.labelOutlineThicknessTexture=Gt.newInstance(),e.framebuffer=Cl.newInstance(),e.idxToView=ct(new Float64Array(16)),e.idxNormalMatrix=Oa(new Float64Array(9)),e.modelToView=ct(new Float64Array(16)),e.projectionToView=ct(new Float64Array(16)),e.projectionToWorld=ct(new Float64Array(16)),Dn(t,e,["context"]),OH(t,e)}const _H=Ft(RH,"vtkOpenGLVolumeMapper");Xn("vtkVolumeMapper",_H);const{vtkDebugMacro:VH}=nr;function DH(t,e){e.classHierarchy.push("vtkOpenGLPixelSpaceCallbackMapper"),t.opaquePass=(n,r)=>{e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent();const a=e._openGLRenderer.getAspectRatio(),s=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,o=e._openGLRenderer.getTiledSizeAndOrigin();let i=null;if(e.renderable.getUseZValues()){const l=r.getZBufferTexture(),c=Math.floor(l.getWidth()),u=Math.floor(l.getHeight()),f=e._openGLRenderWindow.getContext();l.bind();const d=r.getFramebuffer();d?d.saveCurrentBindingsAndBuffers():VH("No framebuffer to save/restore");const p=f.createFramebuffer();f.bindFramebuffer(f.FRAMEBUFFER,p),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,l.getHandle(),0),f.checkFramebufferStatus(f.FRAMEBUFFER)===f.FRAMEBUFFER_COMPLETE&&(i=new Uint8Array(c*u*4),f.viewport(0,0,c,u),f.readPixels(0,0,c,u,f.RGBA,f.UNSIGNED_BYTE,i)),d&&d.restorePreviousBindingsAndBuffers(),f.deleteFramebuffer(p)}e.renderable.invokeCallback(e.renderable.getInputData(),s,a,o,i)},t.queryPass=(n,r)=>{n&&e.renderable.getUseZValues()&&r.requestDepth()}}const LH={};function NH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,LH,n),gn.extend(t,e,n),DH(t,e)}const BH=Ft(NH,"vtkOpenGLPixelSpaceCallbackMapper");Xn("vtkPixelSpaceCallbackMapper",BH);var FH=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_LIC0.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

/**
This shader initializes the convolution for the LIC computation.
*/

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;

uniform sampler2D texMaskVectors;
uniform sampler2D texNoise;
uniform sampler2D texLIC;

uniform int   uStepNo;         // in step 0 initialize lic and seeds, else just seeds
uniform int   uPassNo;         // in pass 1 hpf of pass 0 is convolved.
uniform float uMaskThreshold;  // if |V| < uMaskThreshold render transparent
uniform vec2  uNoiseBoundsPt1; // tc of upper right pt of noise texture

in vec2 tcoordVC;

// convert from vector coordinate space to noise coordinate space.
// the noise texture is tiled across the *whole* domain
vec2 VectorTCToNoiseTC(vec2 vectc)
{
  return vectc/uNoiseBoundsPt1;
}

// get the texture coordidnate to lookup noise value. this
// depends on the pass number.
vec2 getNoiseTC(vec2 vectc)
{
  // in pass 1 : convert from vector tc to noise tc
  // in pass 2 : use vector tc
  if (uPassNo == 0)
    {
    return VectorTCToNoiseTC(vectc);
    }
  else
    {
    return vectc;
    }
}

// look up noise value at the given location. The location
// is supplied in vector texture coordinates, hence the
// need to convert to noise texture coordinates.
float getNoise(vec2 vectc)
{
  return texture2D(texNoise, getNoiseTC(vectc)).r;
}

void main(void)
{
  vec2 vectc = tcoordVC.st;

  // lic => (convolution, mask, 0, step count)
  if (uStepNo == 0)
    {
    float maskCriteria = length(texture2D(texMaskVectors, vectc).xyz);
    float maskFlag;
    if (maskCriteria <= uMaskThreshold)
      {
      maskFlag = 1.0;
      }
    else
      {
      maskFlag = 0.0;
      }
    float noise = getNoise(vectc);
    LICOutput = vec4(noise, maskFlag, 0.0, 1.0);
    }
  else
    {
    LICOutput = texture2D(texLIC, vectc);
    }

  // initial seed
  SeedOutput = vec4(vectc, 0.0, 1.0);
}
`,$H=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_fs1.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;

uniform sampler2D  texVectors;
uniform sampler2D  texNoise;
uniform sampler2D  texLIC;
uniform sampler2D  texSeedPts;

uniform int   uPassNo;          // in pass 1 hpf of pass 0 is convolved.
uniform float uStepSize;        // step size in parametric space

uniform vec2  uNoiseBoundsPt1;  // tc of upper right pt of noise texture

in vec2 tcoordVC;

//VTK::LICVectorLookup::Impl

// We need to do this manually since CLAMP_TO_BORDER and and borderColor
// are very poorly supported in webgl
vec2 clampToBorder(vec2 uv){
  if(uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0)
  {
    return vec2(0.0, 0.0);
  }
  return getVector(uv);
}

// convert from vector coordinate space to noise coordinate space.
// the noise texture is tiled across the whole domain
vec2 VectorTCToNoiseTC(vec2 vectc)
{
  return vectc/uNoiseBoundsPt1;
}

// get the texture coordidnate to lookup noise value.
// in pass 1 repeatedly tile the noise texture across
// the computational domain.
vec2 getNoiseTC(vec2 tc)
{
  if (uPassNo == 0)
    {
    return VectorTCToNoiseTC(tc);
    }
  else
    {
    return tc;
    }
}

// look up noise value at the given location. The location
// is supplied in vector texture coordinates, hence the need
// to convert to either noise or lic texture coordinates in
// pass 1 and 2 respectively.
float getNoise(vec2 vectc)
{
  return texture2D(texNoise, getNoiseTC(vectc)).r;
}

// fourth-order Runge-Kutta streamline integration
// no bounds checks are made, therefore it's essential
// to have the entire texture initialized to 0
// and set clamp to border and have border color 0
// an integer is set if the step was taken, keeping
// an accurate step count is necessary to prevent
// boundary artifacts. Don't count the step if
// all vector lookups are identically 0. This is
// a proxy for "stepped outside valid domain"
vec2 rk4(vec2 pt0, float dt, out bool count)
{
  count=true;
  float dtHalf = dt * 0.5;
  vec2 pt1;

  vec2 v0 = clampToBorder(pt0);
  pt1 = pt0 + v0 * dtHalf;

  vec2 v1 = clampToBorder(pt1);
  pt1 = pt0 + v1 * dtHalf;

  vec2 v2 = clampToBorder(pt1);
  pt1 = pt0 + v2 * dt;

  vec2 v3 = clampToBorder(pt1);
  vec2 vSum = v0 + v1 + v1 + v2 + v2 + v3;

  if (vSum == vec2(0.0, 0.0))
    {
      count = false;
    }

  pt1 = pt0 + (vSum) * (dt * (1.0/6.0));

 return pt1;
}

void main(void)
{
  vec2 lictc = tcoordVC.st;
  vec4 lic = texture2D(texLIC, lictc);
  vec2 pt0 = texture2D(texSeedPts, lictc).st;

  bool count;
  vec2 pt1 = rk4(pt0, uStepSize, count);

  if (count)
    {
    // accumulate lic step
    // (lic, mask, 0, step count)
    float noise = getNoise(pt1);
    LICOutput = vec4(lic.r + noise, lic.g, 0.0, lic.a + 1.0);
    SeedOutput = vec4(pt1, 0.0, 1.0);
    }
  else
    {
    // keep existing values
    LICOutput = lic;
    SeedOutput = vec4(pt0, 0.0, 1.0);
    }
}
`,UH=` //VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_LICN.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;

/**
This shader finalizes the convolution for the LIC computation
applying the normalization. eg. if box kernel is used the this
is the number of steps taken.
*/

uniform sampler2D texLIC;

in vec2 tcoordVC;

void main(void)
{
  vec4 conv = texture2D(texLIC, tcoordVC.st);
  conv.r = conv.r/conv.a;
  // lic => (convolution, mask, 0, 1)
  LICOutput = vec4(conv.rg , 0.0, 1.0);
  SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);
}
`,AH=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_CE.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// gray scale contrast enhance stage implemented via histogram stretching
// if the min and max are tweaked it can generate out-of-range values
// these will be clamped in 0 to 1

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;


uniform sampler2D texLIC;  // most recent lic pass
uniform float uMin;        // min gray scale color value
uniform float uMaxMinDiff; // max-min

in vec2 tcoordVC;

void main( void )
{
  vec4 lic = texture2D(texLIC, tcoordVC.st);
  if (lic.g!=0.0)
    {
    LICOutput = lic;
    }
  else
    {
    float CElic = clamp((lic.r - uMin)/uMaxMinDiff, 0.0, 1.0);
    LICOutput = vec4(CElic, lic.gb, 1.0);
    }
    SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);
}
`,WH=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_fs2.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// high-pass filter stage employed by vtkLineIntegralConvolution2D
// between LIC pass 1 and LIC pass 2. filtered LIC pass 1, becomes
// noise for pass2.

// the output of this shader
layout(location = 0) out vec4 EEOutput;

uniform sampler2D texLIC; // most recent lic pass
uniform float     uDx;    // fragment size
uniform float     uDy;    // fragment size

in vec2 tcoordVC;

// kernel for simple laplace edge enhancement.
// p=Laplace(p)+p
float K[9] = float[9](
  -1.0, -1.0, -1.0,
  -1.0,  9.0, -1.0,
  -1.0, -1.0, -1.0
  );

// determine if the fragment was masked
bool Masked(float val) { return val != 0.0; }

void main(void)
{
  // tex coord neighbor offsets
  vec2 fragDx[9] = vec2[9](
    vec2(-uDx, uDy), vec2(0.0, uDy), vec2(uDx, uDy),
    vec2(-uDx, 0.0), vec2(0.0, 0.0), vec2(uDx, 0.0),
    vec2(-uDx,-uDy), vec2(0.0,-uDy), vec2(uDx,-uDy)
    );

  vec2 lictc = tcoordVC.st;

  // compute the convolution but don't use convovled values if
  // any masked fragments on the stencil. Fragments outside
  // the valid domain are masked during initialization, and
  // texture wrap parameters are clamp to border with border
  // color that contains masked flag
  float conv = 0.0;
  bool dontUse = false;
  for (int i=0; i<9; ++i)
    {
    vec2 tc = lictc + fragDx[i];
    vec4 lic = texture2D(texLIC, tc);
    dontUse = dontUse || Masked(lic.g);
    conv = conv + K[i] * lic.r;
    }

  if (dontUse)
    {
    EEOutput = vec4(texture2D(texLIC, lictc).rg, 0.0, 1.0);
    }
  else
    {
    conv = clamp(conv, 0.0, 1.0);
    EEOutput = vec4(conv,texture2D(texLIC, lictc).g, 0.0, 1.0);
    }

}
`,IH=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_AAH.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// Anti-alias stage in vtkLineIntegralConvolution2D
// horizontal pass of a Gaussian convolution

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;

uniform sampler2D texLIC; // input texture
uniform float     uDx;    // fragment size

in vec2 tcoordVC;

// factored 3x3 Gaussian kernel
// K^T*K = G
float K[3] = float[3](0.141421356, 0.707106781, 0.141421356);

// determine if the fragment was masked
bool Masked(float val){ return val != 0.0; }

void main(void)
{
// neighbor offsets
vec2 fragDx[3] = vec2[3](vec2(-uDx,0.0), vec2(0.0,0.0), vec2(uDx,0.0));

  vec2 lictc = tcoordVC.st;
  vec4 lic[3];
  bool dontUse = false;
  float conv = 0.0;
  for (int i=0; i<3; ++i)
    {
    vec2 tc = lictc + fragDx[i];
    lic[i] = texture2D(texLIC, tc);
    dontUse = dontUse || Masked(lic[i].g);
    conv = conv + K[i] * lic[i].r;
    }
  // output is (conv, mask, skip, 1)
  if (dontUse)
    {
    LICOutput = vec4(lic[1].rg, 1.0, 1.0);
    }
  else
    {
    LICOutput = vec4(conv, lic[1].gb, 1.0);
    }
  SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);
}
`,PH=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_VT.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// move vector field to normalized image space
// pre-processing for vtkLineIntegralConvolution2D

// the output of this shader
//VTK::Output::Dec

// Fragment shader used by the gaussian blur filter render pass.

uniform sampler2D texVectors; // input texture
uniform vec2      uTexSize;   // size of texture

in vec2 tcoordVC;

void main(void)
{
  //VTK::LICComponentSelection::Impl
  V = V/uTexSize;
  gl_FragData[0] = vec4(V, 0.0, 1.0);
}
`,GH=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_AAV.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// Anti-alias stage in vtkLineIntegralConvolution2D
// vertical pass of a Gaussian convolution

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;

uniform sampler2D texLIC; // input texture
uniform float     uDy;    // fragment size

in vec2 tcoordVC;


// factored 3x3 Gaussian kernel
// K^T*K = G
float K[3] = float[3](0.141421356, 0.707106781, 0.141421356);

// determine if the fragment was masked
bool Masked(float val){ return val != 0.0; }

void main(void)
{
// neighbor offsets
vec2 fragDy[3] = vec2[3](vec2(0.0,-uDy), vec2(0.0,0.0), vec2(0.0,uDy));


  vec2 lictc = tcoordVC.st;
  vec4 lic[3];
  bool dontUse = false;
  float conv = 0.0;
  for (int i=0; i<3; ++i)
    {
    vec2 tc = lictc + fragDy[i];
    lic[i] = texture2D(texLIC, tc);
    dontUse = dontUse || Masked(lic[i].g);
    conv = conv + K[i] * lic[i].r;
    }
  // output is (conv, mask, skip, 1)
  if (dontUse)
    {
    LICOutput = vec4(lic[1].rg, 1.0, 1.0);
    }
  else
    {
    LICOutput = vec4(conv, lic[1].gb, 1.0);
    }
  SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);
}
`,O_=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtktextureObjectVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

attribute vec4 vertexDC;
attribute vec2 tcoordDC;
varying vec2 tcoordVC;

void main()
{
  tcoordVC = tcoordDC;
  gl_Position = vertexDC;
}
`;const{Representation:zH}=vo;function HH(t){const e=Ba.newInstance();e.setOpenGLRenderWindow(t);const n=new Float32Array(12);for(let l=0;l<4;l++)n[l*3]=l%2*2-1,n[l*3+1]=l>1?1:-1,n[l*3+2]=0;const r=new Float32Array([0,0,1,0,0,1,1,1]),a=new Uint16Array(8);a[0]=3,a[1]=0,a[2]=1,a[3]=3,a[4]=3,a[5]=0,a[6]=3,a[7]=2;const s=Tt.newInstance({numberOfComponents:3,values:n});s.setName("points");const o=Tt.newInstance({numberOfComponents:1,values:a}),i=Tt.newInstance({numberOfComponents:2,values:r});return e.getCABO().createVBO(o,"polys",zH.SURFACE,{points:s,cellOffset:0,tcoords:i}),e}function _C(t,e,n,r){let[a,s]=e;const o=t.getContext(),i=Gt.newInstance({autoParameters:!1,wrapS:r,wrapT:r,minificationFilter:n,magnificationFilter:n,generateMipmap:!1,openGLDataType:o.FLOAT,baseLevel:0,maxLevel:0});return i.setOpenGLRenderWindow(t),i.setInternalFormat(o.RGBA32F),i.create2DFromRaw(a,s,4,"Float32Array",null),i.activate(),i.sendParameters(),i.deactivate(),i}function Zd(t,e){return _C(t,e,Gt.Filter.NEAREST,Gt.Wrap.CLAMP_TO_EDGE)}function KH(t,e){return _C(t,e,Gt.Filter.NEAREST,Gt.Wrap.CLAMP_TO_EDGE)}function jH(t,e){return _C(t,e,Gt.Filter.LINEAR,Gt.Wrap.CLAMP_TO_EDGE)}function YH(t,e){if(e.classHierarchy.push("vtkLICPingPongBufferManager"),!e._openGLRenderWindow){console.error("Pass renderwindow to ping pong manager");return}e.quad=HH(e._openGLRenderWindow),e.context=e._openGLRenderWindow.getContext(),e.licTexture0=Zd(e._openGLRenderWindow,e.size),e.seedTexture0=Zd(e._openGLRenderWindow,e.size),e.licTexture1=Zd(e._openGLRenderWindow,e.size),e.seedTexture1=Zd(e._openGLRenderWindow,e.size),e.eeTexture=e.doEEPass?KH(e._openGLRenderWindow,e.size):null,e.imageVectorTexture=e.doVTPass?jH(e._openGLRenderWindow,e.size):null,e.pingTextures[0]=e.licTexture0,e.pingTextures[1]=e.seedTexture0,e.pongTextures[0]=e.licTexture1,e.pongTextures[1]=e.seedTexture1,e.textures[0]=e.pingTextures,e.textures[1]=e.pongTextures,t.swap=()=>{e.readIndex=1-e.readIndex},t.renderQuad=(n,r)=>{const a=e.quad,s=e.context;let o=e.quadVAO;o||(o=id.newInstance(),o.setOpenGLRenderWindow(e._openGLRenderWindow),e.quadVAO=o),e.previousProgramHash!==r.getMd5Hash()&&(o.shaderProgramChanged(),a.getCABO().bind(),o.addAttributeArray(r,a.getCABO(),"vertexDC",a.getCABO().getVertexOffset(),a.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE),o.addAttributeArray(r,a.getCABO(),"tcoordDC",a.getCABO().getTCoordOffset(),a.getCABO().getStride(),e.context.FLOAT,2,e.context.FALSE),e.previousProgramHash=r.getMd5Hash()),s.drawArrays(s.TRIANGLES,0,a.getCABO().getElementCount()),o.release()},t.getLastLICBuffer=()=>e.readIndex===0?e.licTexture0:e.licTexture1,t.getLastSeedBuffer=()=>e.readIndex===0?e.seedTexture0:e.seedTexture1,t.getLICBuffer=()=>1-e.readIndex===0?e.licTexture0:e.licTexture1,t.getSeedBuffer=()=>1-e.readIndex===0?e.seedTexture0:e.seedTexture1,t.getLICTextureUnit=()=>{const n=e.textures[e.readIndex][0];return n.activate(),n.getTextureUnit()},t.getSeedTextureUnit=()=>{const n=e.textures[e.readIndex][1];return n.activate(),n.getTextureUnit()},t.getNoiseTextureUnit=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:0)===0?(e.noiseTexture.activate(),e.noiseTexture.getTextureUnit()):(e.eeTexture.activate(),e.eeTexture.getTextureUnit())},t.getVectorTextureUnit=()=>(e.vectorTexture.activate(),e.vectorTexture.getTextureUnit()),t.getImageVectorTextureUnit=()=>e.imageVectorTexture?(e.imageVectorTexture.activate(),e.imageVectorTexture.getTextureUnit()):t.getVectorTextureUnit(),t.getMaskVectorTextureUnit=()=>e.maskVectorTexture?(e.maskVectorTexture.activate(),e.maskVectorTexture.getTextureUnit()):t.getImageVectorTextureUnit(),t.clearBuffers=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const r=e.framebuffer,a=e.context;r.removeColorBuffer(0),r.removeColorBuffer(1),r.removeColorBuffer(2),r.removeColorBuffer(3),r.setColorBuffer(e.licTexture0,0),r.setColorBuffer(e.seedTexture0,1),r.setColorBuffer(e.licTexture1,2),r.setColorBuffer(e.seedTexture1,3);const s=[a.COLOR_ATTACHMENT0,a.COLOR_ATTACHMENT1,a.COLOR_ATTACHMENT2,a.COLOR_ATTACHMENT3];n&&(r.removeColorBuffer(4),r.setColorBuffer(e.eeTexture,4),s.push(a.COLOR_ATTACHMENT4)),a.drawBuffers(s),a.clearColor(0,1,0,0),a.disable(a.SCISSOR_TEST),a.disable(a.BLEND),a.clear(a.COLOR_BUFFER_BIT),r.removeColorBuffer(0),r.removeColorBuffer(1),r.removeColorBuffer(2),r.removeColorBuffer(3),n&&r.removeColorBuffer(4),a.drawBuffers([a.NONE])},t.clearBuffer=n=>{const r=e.framebuffer,a=e.context;r.removeColorBuffer(0),r.setColorBuffer(n,0),a.drawBuffers([a.COLOR_ATTACHMENT0]),a.clearColor(0,1,0,0),a.disable(a.SCISSOR_TEST),a.disable(a.BLEND),a.clear(a.COLOR_BUFFER_BIT),r.removeColorBuffer(n,0),a.drawBuffers([a.NONE])},t.activateVectorTextures=()=>{e.imageVectorTexture?e.imageVectorTexture.activate():e.vectorTexture.activate(),e.maskVectorTexture&&e.maskVectorTexture.activate()},t.deactivateVectorTextures=()=>{e.imageVectorTexture?e.imageVectorTexture.deactivate():e.vectorTexture.deactivate(),e.maskVectorTexture&&e.maskVectorTexture.deactivate()},t.activateNoiseTexture=function(){switch(arguments.length>0&&arguments[0]!==void 0?arguments[0]:0){case 0:e.noiseTexture.activate();break;case 1:e.eeTexture.activate();break;default:console.error("Wrong LIC pass number")}},t.deactivateNoiseTexture=function(){switch(arguments.length>0&&arguments[0]!==void 0?arguments[0]:0){case 0:e.noiseTexture.deactivate();break;case 1:e.eeTexture.deactivate();break;default:console.error("Wrong LIC pass number")}},t.attachLICBuffers=()=>{const n=e.textures[e.readIndex],r=e.textures[1-e.readIndex],a=e.framebuffer,s=e.context;n[0].activate(),n[1].activate(),a.removeColorBuffer(0),a.removeColorBuffer(1),a.setColorBuffer(r[0],0),a.setColorBuffer(r[1],1),s.drawBuffers([s.COLOR_ATTACHMENT0,s.COLOR_ATTACHMENT1])},t.detachLICBuffers=()=>{const n=e.textures[e.readIndex],r=e.context,a=e.framebuffer;n[0].deactivate(),n[1].deactivate(),a.removeColorBuffer(0),a.removeColorBuffer(1),r.drawBuffers([r.NONE])},t.attachImageVectorBuffer=()=>{const n=e.framebuffer,r=e.context;e.vectorTexture.activate(),n.removeColorBuffer(0),n.setColorBuffer(e.imageVectorTexture,0),r.drawBuffers([r.COLOR_ATTACHMENT0])},t.detachImageVectorBuffer=()=>{const n=e.context,r=e.framebuffer;e.vectorTexture.deactivate(),r.removeColorBuffer(0),n.drawBuffers([n.NONE])},t.attachEEBuffer=()=>{e.textures[e.readIndex][0].activate(),e.framebuffer.removeColorBuffer(0),e.framebuffer.setColorBuffer(e.eeTexture,0);const r=e.context;r.drawBuffers([r.COLOR_ATTACHMENT0])},t.detachEEBuffer=()=>{const n=e.context;e.framebuffer.removeColorBuffer(0),n.drawBuffers([n.NONE]),e.textures[e.readIndex][0].deactivate()},t.detachBuffers=()=>{const n=e.context,r=e.framebuffer;r.removeColorBuffer(0),r.removeColorBuffer(1),n.drawBuffers([n.NONE]);const a=e.textures[e.readIndex],s=e.textures[1-e.readIndex];a[0]&&a[0].deactivate(),a[1]&&a[1].deactivate(),s[0]&&s[0].deactivate(),s[1]&&s[1].deactivate(),e.eeTexture&&e.eeTexture.deactivate(),e.noiseTexture&&e.noiseTexture.deactivate()},t.getWriteIndex=()=>1-e.readIndex,t.detachBuffers()}const qH={vectorTexture:null,maskVectorTexture:null,noiseTexture:null,doEEPass:!1,doVTPass:!1,readIndex:0,quad:null,lastProgramHash:null,framebuffer:null,size:null,pingTextures:[],pongTextures:[],textures:[]};function M_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,qH,n),A.obj(t,e),A.get(t,e,["readIndex"]),A.setGet(t,e,["doEEPass","doVTPass","_openGLRenderWindow","vectorTexture","maskVectorTexture","noiseTexture","framebuffer","size"]),A.moveToProtected(t,e,["openGLRenderWindow"]),YH(t,e)}const XH=A.newInstance(M_,"vtkLICPingPongBufferManager");var ZH={newInstance:XH,extend:M_};const qi={NONE:0,LIC:1,COLOR:2,BOTH:3},Qy={UNIFORM:0,GAUSSIAN:1},JH={BLEND:0,MULTIPLY:1};function QH(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const e=`
    vec2 getVector( vec2 vectc )

      {

      vec2 V = texture2D( texVectors, vectc ).xy;

      // normalize if |V| not 0

      float lenV = length( V );

      if ( lenV > 1.0e-8 )

        {

        return V/lenV;

        }

      else

        {

        return vec2( 0.0, 0.0 );

        }

      }

    `,n=`
    vec2 getVector( vec2 vectc )

      {

      return texture2D( texVectors, vectc ).xy;

      }

    `;return t?e:n}function eK(t,e){e.classHierarchy.push("vtkLineIntegralConvolution2D"),t.buildAShader=a=>e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(O_,a,""),t.dumpTextureValues=function(a,s){let[o,i]=s,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.context,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e._openGLRenderWindow,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:4;const f=Cl.newInstance(),d=l;let p=null;return f.setOpenGLRenderWindow(c),f.saveCurrentBindingsAndBuffers(),f.create(o,i),f.populateFramebuffer(),f.setColorBuffer(a),p=new Float32Array(o*i*u),d.readPixels(0,0,o,i,u===4?d.RGBA:d.RGB,d.FLOAT,p),f.restorePreviousBindingsAndBuffers(),p},t.getTextureMinMax=function(a,s){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.context,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e._openGLRenderWindow;const l=t.dumpTextureValues(a,s,o,i,4);let c=Number.MAX_VALUE,u=Number.MIN_VALUE;for(let f=0;f<l.length;f+=4)if(l[f+1]===0){const d=l[f];d<c&&(c=d),d>u&&(u=d)}return{min:c,max:u}},t.getComponentSelectionProgram=a=>{const s="xyzw";return`.${s[a[0]]}${s[a[1]]}`},t.buildShaders=()=>{e.LIC0ShaderProgram=t.buildAShader(FH);const a=ue.substitute(PH,"//VTK::LICComponentSelection::Impl",`vec2 V = texture2D(texVectors, tcoordVC.st)${t.getComponentSelectionProgram(e.componentIds)};`).result;e.VTProgram=t.buildAShader(a);const s=ue.substitute($H,"//VTK::LICVectorLookup::Impl",QH(e.normalizeVectors),!0).result;e.LICIShaderProgram=t.buildAShader(s),e.LICNShaderProgram=t.buildAShader(UH),e.CEProgram=t.buildAShader(AH),e.EEProgram=t.buildAShader(WH),e.AAHProgram=t.buildAShader(IH),e.AAVProgram=t.buildAShader(GH)};function n(a,s){a.setUniformi("texLIC",s.getLICTextureUnit()),a.setUniformi("texSeedPts",s.getSeedTextureUnit())}function r(a,s,o){a.attachLICBuffers(),a.renderQuad(s,o),a.detachLICBuffers(),a.swap()}t.executeLIC=(a,s,o,i,l,c)=>{if(e._openGLRenderWindow=l,e.context=l.getContext(),Object.assign(e,c),a[0]<=0||a[1]<=0)return null;const u=[1/a[0],1/a[1]];let f=e.stepSize*Math.sqrt(u[0]*u[0]+u[1]*u[1]);f<=0&&(f=1e-10);const d=e.context;let p=e.framebuffer;const h=p.getSize();(!p||!h||a[0]!==h||a[1]!==h)&&(p=Cl.newInstance(),p.setOpenGLRenderWindow(e._openGLRenderWindow),p.saveCurrentBindingsAndBuffers(),p.create(...a),p.populateFramebuffer(),p.restorePreviousBindingsAndBuffers(),e.framebuffer=p),p.saveCurrentBindingsAndBuffers(),p.bind(),d.viewport(0,0,...a),d.scissor(0,0,...a),e.shadersNeedBuild&&(t.buildShaders(),e.shadersNeedBuild=!1),e.bufs?(e.bufs.setVectorTexture(s),e.bufs.setMaskVectorTexture(o),e.bufs.setNoiseTexture(i)):e.bufs=ZH.newInstance({openGLRenderWindow:l,doEEPass:e.enhancedLIC,doVTPass:e.transformVectors,vectorTexture:s,maskVectorTexture:o,noiseTexture:i,framebuffer:p,size:a});const g=[(i.getWidth()+1)/a[0],(i.getHeight()+1)/a[1]],y=1/a[0],m=1/a[1],b=e._openGLRenderWindow.getShaderCache();if(e.transformVectors){const w=e.VTProgram;b.readyShaderProgram(w),e.bufs.attachImageVectorBuffer(),w.setUniform2f("uTexSize",...a),w.setUniformi("texVectors",e.bufs.getVectorTextureUnit()),d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT),e.bufs.renderQuad(a,w),e.bufs.detachImageVectorBuffer()}e.bufs.clearBuffers(e.enhancedLIC),e.bufs.activateVectorTextures(),e.bufs.activateNoiseTexture(0);const{LIC0ShaderProgram:C}=e;b.readyShaderProgram(C),C.setUniformi("uStepNo",0),C.setUniformi("uPassNo",0),C.setUniformf("uMaskThreshold",e.maskThreshold),C.setUniform2f("uNoiseBoundsPt1",...g),C.setUniformi("texMaskVectors",e.bufs.getMaskVectorTextureUnit()),C.setUniformi("texLIC",e.bufs.getLICTextureUnit()),C.setUniformi("texNoise",e.bufs.getNoiseTextureUnit(0)),r(e.bufs,a,C);const{LICIShaderProgram:S}=e;b.readyShaderProgram(S),S.setUniformi("uPassNo",0),S.setUniformf("uStepSize",-f),S.setUniform2f("uNoiseBoundsPt1",...g),S.setUniformi("texVectors",e.bufs.getImageVectorTextureUnit()),S.setUniformi("texNoise",e.bufs.getNoiseTextureUnit(0));for(let w=0;w<e.numberOfSteps;++w)n(S,e.bufs),r(e.bufs,a,S);b.readyShaderProgram(C),C.setUniformi("uStepNo",1),n(C,e.bufs),r(e.bufs,a,C),b.readyShaderProgram(S),S.setUniformf("uStepSize",f);for(let w=0;w<e.numberOfSteps;++w)n(S,e.bufs),r(e.bufs,a,S);e.bufs.deactivateNoiseTexture(0),e.bufs.deactivateVectorTextures();const{LICNShaderProgram:T}=e;if(b.readyShaderProgram(T),T.setUniformi("texLIC",e.bufs.getLICTextureUnit()),r(e.bufs,a,T),e.enhancedLIC){(e.enhanceContrast===qi.LIC||e.enhanceContrast===qi.BOTH)&&t.contrastEnhance(!1,a),e.bufs.attachEEBuffer();const{EEProgram:w}=e;b.readyShaderProgram(w),w.setUniformi("texLIC",e.bufs.getLICTextureUnit()),w.setUniformf("uDx",y),w.setUniformf("uDy",m),e.bufs.renderQuad(a,w),e.bufs.detachEEBuffer(),e.bufs.detachBuffers(),e.bufs.clearBuffers(!1),e.bufs.activateVectorTextures(),e.bufs.activateNoiseTexture(1),b.readyShaderProgram(C),C.setUniformi("uStepNo",0),C.setUniformi("uPassNo",1),n(C,e.bufs),C.setUniformi("texNoise",e.bufs.getNoiseTextureUnit(1)),r(e.bufs,a,C),b.readyShaderProgram(S),S.setUniformi("uPassNo",1),S.setUniformf("uStepSize",-f),S.setUniformi("texNoise",e.bufs.getNoiseTextureUnit(1));const x=e.numberOfSteps/2;for(let E=0;E<x;++E)n(S,e.bufs),r(e.bufs,a,S);b.readyShaderProgram(C),C.setUniformi("uStepNo",1),n(C,e.bufs),r(e.bufs,a,C),b.readyShaderProgram(S),S.setUniformf("uStepSize",f);for(let E=0;E<x;++E)n(S,e.bufs),r(e.bufs,a,S);e.bufs.deactivateNoiseTexture(1),e.bufs.deactivateVectorTextures(),b.readyShaderProgram(T),T.setUniformi("texLIC",e.bufs.getLICTextureUnit()),T.setUniformi("texSeedPts",e.bufs.getSeedTextureUnit()),r(e.bufs,a,T)}if(e.antiAlias){const w=e.AAHProgram;b.readyShaderProgram(w),w.setUniformi("texLIC",e.bufs.getLICTextureUnit()),w.setUniformf("uDx",y);const x=e.AAVProgram;b.readyShaderProgram(x),x.setUniformi("texLIC",e.bufs.getLICTextureUnit()),x.setUniformf("uDy",m);for(let E=0;E<e.antiAlias;++E)b.readyShaderProgram(w),n(w,e.bufs),r(e.bufs,a,w),b.readyShaderProgram(x),n(x,e.bufs),r(e.bufs,a,x)}return(e.enhanceContrast===qi.LIC||e.enhanceContrast===qi.BOTH)&&t.contrastEnhance(!0,a),e.bufs.detachBuffers(),p.restorePreviousBindingsAndBuffers(),e.bufs.getLastLICBuffer()},t.contrastEnhance=(a,s)=>{const o=e._openGLRenderWindow.getShaderCache();let{min:i,max:l}=t.getTextureMinMax(e.bufs.getLastLICBuffer(),s,e.context,e._openGLRenderWindow);(l<=i||l>1||i<0)&&(console.error("Invalid color range: ",i,l),i=0,l=1);let c=l-i;a&&(i+=c*e.lowLICContrastEnhancementFactor,l-=c*e.highLICContrastEnhancementFactor,c=l-i);const{CEProgram:u}=e;o.readyShaderProgram(u),u.setUniformi("texLIC",e.bufs.getLICTextureUnit()),u.setUniformf("uMin",i),u.setUniformf("uMaxMinDiff",c),r(e.bufs,s,u)}}const tK={shadersNeedBuild:!0,stepSize:1,numberOfSteps:10,enhancedLIC:!0,enhanceContrast:!1,lowContrastEnhancementFactor:0,highContrastEnhancementFactor:0,antiAlias:0,componentIds:[0,1],normalizeVectors:!0,maskThreshold:0,transformVectors:!0,bufs:null,isComposite:!0};function R_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,tK,n),A.obj(t,e),A.setGet(t,e,["context","_openGLRenderWindow","nuberOfSteps","stepSize","normalizeVectors","maskThreshold","enhancedLIC","enhanceContrast","lowLICContrastEnhancementFactor","highLICContrastEnhancementFactor","antiAlias","componentIds","isComposite"]),A.moveToProtected(t,e,["openGLRenderWindow"]),eK(t,e)}const nK=A.newInstance(R_,"vtkLineIntegralConvolution2D");var rK={newInstance:nK,extend:R_},aK=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkSurfaceLICMapper_fs2.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// This shader combines surface geometry, LIC, and  scalar colors.

// the output of this shader
layout(location = 0) out vec4 RGBOutput;
layout(location = 1) out vec4 HSLOutput;

uniform sampler2D texVectors;       // vectors, depth
uniform sampler2D texGeomColors;    // scalar colors + lighting
uniform sampler2D texLIC;           // image lic
uniform int       uScalarColorMode; // select between blend, and map shader
uniform float     uLICIntensity;    // blend shader: blending factor for lic'd colors
uniform float     uMapBias;         // map shader: adjust the brightness of the result
uniform float     uMaskIntensity;   // blending factor for mask color
uniform vec3      uMaskColor;       // color for the masked out fragments

in vec2 tcoordVC;

/**
Convert from RGB color space into HSL colorspace.
*/
vec3 RGBToHSL(vec3 RGB)
{
  vec3 HSL = vec3(0.0, 0.0, 0.0);

  float RGBMin = min(min(RGB.r, RGB.g), RGB.b);
  float RGBMax = max(max(RGB.r, RGB.g), RGB.b);
  float RGBMaxMinDiff = RGBMax - RGBMin;

  HSL.z = (RGBMax + RGBMin) / 2.0;

  if (RGBMaxMinDiff == 0.0)
    {
    // Gray scale
    HSL.x = 0.0;
    HSL.y = 0.0;
    }
  else
    {
    // Color
    if (HSL.z < 0.5)
      HSL.y = RGBMaxMinDiff / (RGBMax + RGBMin);
    else
      HSL.y = RGBMaxMinDiff / (2.0 - RGBMax - RGBMin);

    float dR
      = (((RGBMax - RGB.r) / 6.0) + (RGBMaxMinDiff / 2.0)) / RGBMaxMinDiff;
    float dG
      = (((RGBMax - RGB.g) / 6.0) + (RGBMaxMinDiff / 2.0)) / RGBMaxMinDiff;
    float dB
      = (((RGBMax - RGB.b) / 6.0) + (RGBMaxMinDiff / 2.0)) / RGBMaxMinDiff;

    if (RGB.r == RGBMax)
      HSL.x = dB - dG;
    else
    if (RGB.g == RGBMax)
      HSL.x = (1.0 / 3.0) + dR - dB;
    else
    if (RGB.b == RGBMax)
      HSL.x = (2.0 / 3.0) + dG - dR;

    if (HSL.x < 0.0)
      HSL.x += 1.0;

    if (HSL.x > 1.0)
      HSL.x -= 1.0;
    }

  return HSL;
}

/**
Helper for HSL to RGB conversion.
*/
float Util(float v1, float v2, float vH)
{
  if (vH < 0.0)
    vH += 1.0;

  if (vH > 1.0)
     vH -= 1.0;

  if ((6.0 * vH) < 1.0)
    return (v1 + (v2 - v1) * 6.0 * vH);

  if ((2.0 * vH) < 1.0)
    return (v2);

  if ((3.0 * vH) < 2.0)
    return (v1 + (v2 - v1) * ((2.0 / 3.0) - vH) * 6.0);

  return v1;
}

/**
Convert from HSL space into RGB space.
*/
vec3 HSLToRGB(vec3 HSL)
{
  vec3 RGB;
  if (HSL.y == 0.0)
    {
    // Gray
    RGB.r = HSL.z;
    RGB.g = HSL.z;
    RGB.b = HSL.z;
    }
  else
    {
    // Chromatic
    float v2;
    if (HSL.z < 0.5)
      v2 = HSL.z * (1.0 + HSL.y);
    else
      v2 = (HSL.z + HSL.y) - (HSL.y * HSL.z);

    float v1 = 2.0 * HSL.z - v2;

    RGB.r = Util(v1, v2, HSL.x + (1.0 / 3.0));
    RGB.g = Util(v1, v2, HSL.x);
    RGB.b = Util(v1, v2, HSL.x - (1.0 / 3.0));
    }

  return RGB.rgb;
}

void main()
{
  vec4 lic = texture2D(texLIC, tcoordVC.st);
  vec4 geomColor = texture2D(texGeomColors, tcoordVC.st);

  // depth is used to determine which fragment belong to us
  // and we can change
  float depth = texture2D(texVectors, tcoordVC.st).a;

  vec3 fragColorRGB;
  float valid;
  if (depth > 1.0e-3)
    {
    // we own it
    // shade LIC'ed geometry, or apply mask
    if (lic.g!=0.0)
      {
      // it's masked
      // apply fragment mask
      fragColorRGB = uMaskIntensity * uMaskColor + (1.0 - uMaskIntensity) * geomColor.rgb;
      valid = 0.0;
      }
    else
      {
      if (uScalarColorMode==0)
        {
        // blend with scalars
        fragColorRGB = lic.rrr * uLICIntensity + geomColor.rgb * (1.0 - uLICIntensity);
        }
      else
        {
        // multiply with scalars
        fragColorRGB = geomColor.rgb * clamp((uMapBias + lic.r), 0.0, 1.0);
        }
      if (lic.b != 0.0)
        {
        // didn't have the required guard pixels
        // don't consider it in min max estimation
        // for histpgram stretching
        valid = 0.0;
        }
      else
        {
        // ok to use in min/max estimates for histogram
        // stretching
        valid = 1.0;
        }
      }
    }
  else
    {
    // we don't own it
    // pass through scalars
    fragColorRGB = geomColor.rgb;
    valid = 0.0;
    }

  // if no further stages this texture is
  // copied to the screen
  RGBOutput = vec4(fragColorRGB, geomColor.a);

  // if further stages, move to hsl space for contrast
  // enhancement. encoding validity saves moving a texture to the cpu
  vec3 fragColorHSL = RGBToHSL(fragColorRGB);
  HSLOutput = vec4(fragColorHSL, valid);
}
`,sK=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkSurfaceLICMapper_DCpy.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// This shader copies fragments and depths to the output buffer

// the output of this shader
//VTK::Output::Dec

uniform sampler2D texDepth;     // z values from vertex shader
uniform sampler2D texRGBColors; // final rgb LIC colors

in vec2 tcoordVC;

void main()
{
  gl_FragDepth = texture2D(texDepth, tcoordVC).x;
  gl_FragData[0] = texture2D(texRGBColors, tcoordVC);

  // since we render a screen aligned quad
  // we're going to be writing fragments
  // not touched by the original geometry
  // it's critical not to modify those
  // fragments.
  if (gl_FragDepth == 1.0)
    {
    discard;
    }
}
`,oK=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkSurfaceLICMapper_CE.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// color contrast enhance stage implemented via histogram stretching
// on lightness channel. if the min and max are tweaked it can generate
// out-of-range values these will be clamped in 0 to 1

// the output of this shader
//VTK::Output::Dec

uniform sampler2D texGeomColors; // scalars + lighting
uniform sampler2D texLIC;        // image lic, mask
uniform sampler2D texHSLColors;  // hsla colors

uniform float     uLMin;         // min lightness over all fragments
uniform float     uLMaxMinDiff;  // max - min lightness over all fragments

in vec2 tcoordVC;

vec3 HSLToRGB(vec3 HSL)
{
  vec3 RGB;
  float v;
  float h = HSL.x;
  float sl = HSL.y;
  float l = HSL.z;

  v = (l <= 0.5) ? (l * (1.0 + sl)) : (l + sl - l * sl);
  if (v <= 0.0) {
    RGB = vec3(0.0,0.0,0.0);
  } else {
    float m;
    int sextant;
    float fract, vsf, mid1, mid2;

    m = l + l - v;
    h *= 6.0;
    sextant = int(h);
    fract = h - float(sextant);

    vsf = (v - m) * fract;
    mid1 = m + vsf;
    mid2 = v - vsf;
    switch (sextant) {
      case 0: RGB.r = v; RGB.g = mid1; RGB.b = m; break;
      case 1: RGB.r = mid2; RGB.g = v; RGB.b = m; break;
      case 2: RGB.r = m; RGB.g = v; RGB.b = mid1; break;
      case 3: RGB.r = m; RGB.g = mid2; RGB.b = v; break;
      case 4: RGB.r = mid1; RGB.g = m; RGB.b = v; break;
      case 5: RGB.r = v; RGB.g = m; RGB.b = mid2; break;
    }
  }
  return RGB;
}

void main()
{
  // lookup hsl color , mask
  vec4 fragColor = texture2D(texHSLColors, tcoordVC.st);

  // don't modify masked fragments (masked => lic.g==1)
  vec4 lic = texture2D(texLIC, tcoordVC.st);
  if (lic.g==0.0)
    {
    // normalize lightness channel
    fragColor.z = clamp((fragColor.z - uLMin)/uLMaxMinDiff, 0.0, 1.0);
    }

  // back into rgb space
  fragColor.rgb = HSLToRGB(fragColor.xyz);

  // add alpha
  vec4 geomColor = texture2D(texGeomColors, tcoordVC.st);
  fragColor.a = geomColor.a;

  gl_FragData[0] = fragColor;
}
`;function iK(t,e){e.classHierarchy.push("vtkSurfaceLICInterface")}const lK={enableLIC:!1,nuberOfSteps:40,stepSize:.25,transformVectors:!0,normalizeVectors:!0,maskOnSurface:!1,maskThreshold:0,maskColor:[0,0,0],maskIntensity:0,enhancedLIC:!0,enhanceContrast:qi.NONE,lowLICContrastEnhancementFactor:0,highLICContrastEnhancementFactor:0,lowColorContrastEnhancementFactor:0,highColorContrastEnhancementFactor:0,antiAlias:0,colorMode:JH.BLEND,LICIntensity:1,mapModeBias:0,noiseTextureSize:200,noiseTextureType:Qy.GAUSSIAN,noiseGrainSize:8,noiseImpulseProbability:.1,noiseImpulseBackgroundValue:0,noiseGeneratorSeed:0,minNoiseValue:0,maxNoiseValue:1,numberOfNoiseLevels:2,shadersNeedBuilding:!0,reallocateTextures:!0,rebuildNoiseTexture:!1,viewPortScale:1};function __(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,lK,n),A.obj(t,e),A.setGet(t,e,["enableLIC","numberOfSteps","stepSize","normalizeVectors","transformVectors","maskOnSurface","maskThreshold","maskColor","maskIntensity","enhancedLIC","enhanceContrast","lowLICContrastEnhancementFactor","highLICContrastEnhancementFactor","lowColorContrastEnhancementFactor","highColorContrastEnhancementFactor","antiAlias","colorMode","LICIntensity","mapModeBias","noiseTextureSize","noiseTextureType","noiseGrainSize","minNoiseValue","maxNoiseValue","numberOfNoiseLevels","noiseImpulseProbability","noiseImpulseBackgroundValue","noiseGeneratorSeed","viewPortScale","rebuildNoiseTexture"]),iK(t,e)}const cK=A.newInstance(__,"vtkSurfaceLICInterface");var V_={newInstance:cK,extend:__};const{Representation:uK}=vo;function fK(t){const e=Ba.newInstance();e.setOpenGLRenderWindow(t);const n=new Float32Array(12);for(let l=0;l<4;l++)n[l*3]=l%2*2-1,n[l*3+1]=l>1?1:-1,n[l*3+2]=0;const r=new Float32Array([0,0,1,0,0,1,1,1]),a=new Uint16Array(8);a[0]=3,a[1]=0,a[2]=1,a[3]=3,a[4]=3,a[5]=0,a[6]=3,a[7]=2;const s=Tt.newInstance({numberOfComponents:3,values:n});s.setName("points");const o=Tt.newInstance({numberOfComponents:1,values:a}),i=Tt.newInstance({numberOfComponents:2,values:r});return e.getCABO().createVBO(o,"polys",uK.SURFACE,{points:s,cellOffset:0,tcoords:i}),e}function dK(t,e){e.classHierarchy.push("vtkOpenGLSurfaceLICInterface"),t.renderQuad=(a,s)=>{const o=e.licQuad,i=e.context;let l=e.licQuadVAO;l||(l=id.newInstance(),l.setOpenGLRenderWindow(e._openGLRenderWindow),e.licQuadVAO=l),e.previousProgramHash!==s.getMd5Hash()&&(l.shaderProgramChanged(),o.getCABO().bind(),l.addAttributeArray(s,o.getCABO(),"vertexDC",o.getCABO().getVertexOffset(),o.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE),l.addAttributeArray(s,o.getCABO(),"tcoordDC",o.getCABO().getTCoordOffset(),o.getCABO().getStride(),e.context.FLOAT,2,e.context.FALSE),e.previousProgramHash=s.getMd5Hash()),i.drawArrays(i.TRIANGLES,0,o.getCABO().getElementCount()),l.release()};function n(a,s,o,i,l,c){const f=Math.max(0,Math.min(1,o)),d=Float32Array.from({length:a*a},()=>{let C=0;if(f===1||Math.random()>1-f)for(let S=0;S<2048;++S)C+=Math.random();return C});let p=0,h=2049;d.forEach(C=>{f===1?h=C<h?C:h:h=C<h&&C>0?C:h,p=C>p?C:p});let g=p-h;g===0&&(h=0,p===0?g=1:g=p);const y=s-1,m=y!==0?1/y:0,b=c-l;return d.map(C=>{const S=C<h?C:(C-h)/g,T=Math.floor(S*s),w=T>y?y:T;return C>=h?s===1?c:l+w*m*b:i})}function r(a,s,o,i){let[l,c]=a;const u=i-o;return Float32Array.from({length:l*c},()=>{let f=Math.random();return f=Math.floor(f*s)/s,f=f*u+o,f>1?1:f<0?0:f})}t.generateNoiseTexture=a=>{if(!e.noiseTexture||e.licInterface.getRebuildNoiseTexture()){e.licInterface.setRebuildNoiseTexture(!1),e.noiseTexture&&e.noiseTexture.releaseGraphicsResources(),nM(e.noiseGeneratorSeed,{global:!0});let s=[];const{noiseTextureType:o,noiseGrainSize:i,numberOfNoiseLevels:l,noiseImpulseProbability:c,noiseImpulseBackgroundValue:u,minNoiseValue:f,maxNoiseValue:d}=e.licInterface.get("noiseTextureType","noiseGrainSize","numberOfNoiseLevels","noiseImpulseProbability","noiseImpulseBackgroundValue","minNoiseValue","maxNoiseValue");switch(o){case Qy.GAUSSIAN:s=n(Math.floor(a/i),l,c,u,f,d);break;case Qy.UNIFORM:default:s=r([Math.ceil(a/i),Math.ceil(a/i)],l,f,d)}const p=1/i,h=Float32Array.from({length:a*a*4},(y,m)=>{const b=m/4;if(m%4===0){const C=Math.floor(b%a*p),S=Math.floor(b/a*p);return s[S*(a/i)+C]}return m%4===1||m%4===3?1:0}),g=Gt.newInstance({wrapS:Gt.Wrap.REPEAT,wrapT:Gt.Wrap.REPEAT,minificationFilter:Gt.Filter.NEAREST,magnificationFilter:Gt.Filter.NEAREST,generateMipMap:!1,openGLDataType:e.context.FLOAT,baseLevel:0,maxLevel:0,autoParameters:!1});g.setOpenGLRenderWindow(e._openGLRenderWindow),g.create2DFromRaw(a,a,4,"Float32Array",h),g.activate(),g.sendParameters(),g.deactivate(),e.noiseTexture=g}},t.buildAShader=a=>e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(O_,a,""),t.allocateTextures=()=>{const a=Gt.Filter.NEAREST,s=Gt.Filter.LINEAR,o=e._openGLRenderWindow;e.geometryImage||(e.geometryImage=t.allocateTexture(o,a)),e.vectorImage||(e.vectorImage=t.allocateTexture(o,s)),e.maskVectorImage||(e.maskVectorImage=t.allocateTexture(o,s)),e.LICImage||(e.LICImage=t.allocateTexture(o,a)),e.RGBColorImage||(e.RGBColorImage=t.allocateTexture(o,a)),e.HSLColorImage||(e.HSLColorImage=t.allocateTexture(o,a)),e.depthTexture||(e.depthTexture=t.allocateDepthTexture(o))},t.allocateTexture=(a,s)=>{const o=e.context,i=Gt.newInstance({wrapS:Gt.Wrap.CLAMP_TO_EDGE,wrapT:Gt.Wrap.CLAMP_TO_EDGE,minificationFilter:s,magnificationFilter:s,generateMipmap:!1,openGLDataType:o.FLOAT,baseLevel:0,maxLevel:0,autoParameters:!1});return i.setOpenGLRenderWindow(a),i.setInternalFormat(o.RGBA32F),i.create2DFromRaw(...e.size,4,"Float32Array",null),i.activate(),i.sendParameters(),i.deactivate(),i},t.allocateDepthTexture=a=>{const s=e.context,o=Gt.newInstance({generateMipmap:!1,openGLDataType:s.FLOAT,autoParameters:!1});return o.setOpenGLRenderWindow(a),o.createDepthFromRaw(...e.size,"Float32Array",null),o.activate(),o.sendParameters(),o.deactivate(),o},t.createFBO=()=>{if(!e.framebuffer){e.licHelper=null;const a=Cl.newInstance();a.setOpenGLRenderWindow(e._openGLRenderWindow),a.saveCurrentBindingsAndBuffers(),a.create(...e.size),a.populateFramebuffer(),e.framebuffer=a,a.restorePreviousBindingsAndBuffers()}},t.completedGeometry=()=>{const a=e.context,s=e.framebuffer;s.removeColorBuffer(0),s.removeColorBuffer(1),s.removeColorBuffer(2),s.removeDepthBuffer(),a.drawBuffers([a.NONE]),s.restorePreviousBindingsAndBuffers()},t.buildAllShaders=()=>{e.shadersNeedBuilding&&(e.licColorPass=t.buildAShader(aK),e.licCopyPass=t.buildAShader(sK),e.enhanceContrastPass=t.buildAShader(oK),e.shadersNeedBuilding=!1)},t.initializeResources=()=>{t.createFBO(),t.generateNoiseTexture(e.licInterface.getNoiseTextureSize()),t.allocateTextures(),t.buildAllShaders(),e.licQuad||(e.licQuad=fK(e._openGLRenderWindow)),e.licHelper||(e.licHelper=rK.newInstance())},t.prepareForGeometry=()=>{const a=e.framebuffer;a.saveCurrentBindingsAndBuffers(),a.bind(),e.geometryImage.activate(),e.vectorImage.activate(),e.maskVectorImage.activate(),a.removeColorBuffer(0),a.removeColorBuffer(2),a.removeColorBuffer(3),a.setColorBuffer(e.geometryImage,0),a.setColorBuffer(e.vectorImage,2),a.setColorBuffer(e.maskVectorImage,3),a.setDepthBuffer(e.depthTexture);const s=e.context;s.drawBuffers([s.COLOR_ATTACHMENT0,s.NONE,s.COLOR_ATTACHMENT2,s.COLOR_ATTACHMENT3]),s.viewport(0,0,...e.size),s.scissor(0,0,...e.size),s.disable(s.BLEND),s.disable(s.DEPTH_TEST),s.disable(s.SCISSOR_TEST),s.clearColor(0,0,0,0),s.clear(s.DEPTH_BUFFER_BIT|s.COLOR_BUFFER_BIT)},t.copyToScreen=a=>{e.RGBColorImage.activate(),e.depthTexture.activate(),e.licCopyPass||t.initializeResources();const s=e.licCopyPass;e._openGLRenderWindow.getShaderCache().readyShaderProgram(s);const o=e.context;o.viewport(0,0,...a),o.scissor(0,0,...a),o.disable(o.BLEND),o.enable(o.DEPTH_TEST),o.disable(o.SCISSOR_TEST),s.setUniformi("texDepth",e.depthTexture.getTextureUnit()),s.setUniformi("texRGBColors",e.RGBColorImage.getTextureUnit()),t.renderQuad(a,s),e.RGBColorImage.deactivate(),e.depthTexture.deactivate()},t.combineColorsAndLIC=()=>{const a=e.context,s=e.framebuffer;s.saveCurrentBindingsAndBuffers(),s.bind(),s.create(...e.size),s.removeColorBuffer(0),s.removeColorBuffer(1),s.setColorBuffer(e.RGBColorImage,0),s.setColorBuffer(e.HSLColorImage,1),a.drawBuffers([a.COLOR_ATTACHMENT0,a.COLOR_ATTACHMENT1]),a.disable(a.DEPTH_TEST),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT),e.vectorImage.activate(),e.geometryImage.activate(),e.LICImage.activate(),e.licColorPass||t.initializeResources();const o=e.licColorPass;e._openGLRenderWindow.getShaderCache().readyShaderProgram(o),o.setUniformi("texVectors",e.vectorImage.getTextureUnit()),o.setUniformi("texGeomColors",e.geometryImage.getTextureUnit());const{colorMode:i,LICIntensity:l,mapModeBias:c,maskIntensity:u,maskColor:f,enhanceContrast:d,lowColorContrastEnhancementFactor:p,highColorContrastEnhancementFactor:h}=e.licInterface.get("colorMode","LICIntensity","mapModeBias","maskIntensity","maskColor","enhanceContrast","lowColorContrastEnhancementFactor","highColorContrastEnhancementFactor");if(o.setUniformi("texLIC",e.LICImage.getTextureUnit()),o.setUniformi("uScalarColorMode",i),o.setUniformf("uLICIntensity",l),o.setUniformf("uMapBias",c),o.setUniformf("uMaskIntensity",u),o.setUniform3f("uMaskColor",...f),t.renderQuad(e.size,o),e.vectorImage.deactivate(),e.geometryImage.deactivate(),e.LICImage.deactivate(),s.removeColorBuffer(0),s.removeColorBuffer(1),a.drawBuffers([a.NONE]),d===qi.COLOR||d===qi.BOTH){let g=0,y=1,m=y-g;g+=m*p,y-=m*h,m=y-g,s.setColorBuffer(e.RGBColorImage),a.drawBuffers([a.COLOR_ATTACHMENT0]),e.geometryImage.activate(),e.HSLColorImage.activate(),e.LICImage.activate(),e.enhanceContrastPass||t.initializeResources();const{enhanceContrastPass:b}=e;e._openGLRenderWindow.getShaderCache().readyShaderProgram(b),b.setUniformi("texGeomColors",e.geometryImage.getTextureUnit()),b.setUniformi("texHSLColors",e.HSLColorImage.getTextureUnit()),b.setUniformi("texLIC",e.LICImage.getTextureUnit()),b.setUniformf("uLMin",g),b.setUniformf("uLMaxMinDiff",m),t.renderQuad(e.size,b),e.geometryImage.deactivate(),e.HSLColorImage.deactivate(),e.LICImage.deactivate(),s.removeColorBuffer(0),a.drawBuffers([a.NONE])}s.restorePreviousBindingsAndBuffers()},t.applyLIC=()=>{const a=e.licInterface.get("stepSize","numberOfSteps","enhancedLIC","enhanceContrast","lowLICContrastEnhancementFactor","highLICContrastEnhancementFactor","antiAlias","normalizeVectors","maskThreshold","transformVectors"),s=e.licHelper.executeLIC(e.size,e.vectorImage,e.maskVectorImage,e.noiseTexture,e._openGLRenderWindow,a);if(!s){console.error("Failed to compute image LIC"),e.LICImage=null;return}e.LICImage=s},t.setSize=a=>{Array.isArray(a)&&a.length===2&&(!e.size||e.size[0]!==a[0]||e.size[1]!==a[1])&&(e.size=a,t.releaseGraphicsResources())},t.releaseGraphicsResources=()=>{e.geometryImage&&(e.geometryImage.releaseGraphicsResources(),e.geometryImage=null),e.vectorImage&&(e.vectorImage.releaseGraphicsResources(),e.vectorImage=null),e.maskVectorImage&&(e.maskVectorImage.releaseGraphicsResources(),e.maskVectorImage=null),e.LICImage&&(e.LICImage.releaseGraphicsResources(),e.LICImage=null),e.RGBColorImage&&(e.RGBColorImage.releaseGraphicsResources(),e.RGBColorImage=null),e.HSLColorImage&&(e.HSLColorImage.releaseGraphicsResources(),e.HSLColorImage=null),e.depthTexture&&(e.depthTexture.releaseGraphicsResources(),e.depthTexture=null),e.framebuffer&&(e.framebuffer.releaseGraphicsResources(),e.framebuffer=null)}}const pK={context:null,shadersNeedBuilding:!0,reallocateTextures:!0,size:null,licInterface:null};function D_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,pK,n),V_.extend(t,e,n),A.obj(t,e),A.setGet(t,e,["context","_openGLRenderWindow","reallocateTextures","licInterface","size"]),A.moveToProtected(t,e,["openGLRenderWindow"]),dK(t,e)}const gK=A.newInstance(D_,"vtkSurfaceLICInterface");var hK={newInstance:gK,extend:D_};const{vtkErrorMacro:Jd}=nr;function vK(t,e){e.classHierarchy.push("vtkOpenGLSurfaceLICMapper");const n={...t};t.getNeedToRebuildShaders=(r,a,s)=>e.rebuildLICShaders||n.getNeedToRebuildShaders(r,a,s),t.replaceShaderValues=(r,a,s)=>{const o=e.lastBoundBO.getReferenceByName("lastLightComplexity");let i=r.Vertex,l=r.Fragment;const c=e.renderable.getInputArrayToProcess(0);if(c&&e.canDrawLIC){l=ue.substitute(l,"//VTK::Output::Dec",["//VTK::Output::Dec","layout(location = 2) out vec4 vectorTexture;","layout(location = 3) out vec4 maskVectorTexture;"]).result;const f=`${c.getName()}MC`;o===0&&e.lastBoundBO.set({lastLightComplexity:1},!0),i=ue.substitute(i,"//VTK::TCoord::Dec",[`attribute vec3 ${f};`,"out vec3 licOutput;","//VTK::TCoord::Dec"]).result,i=ue.substitute(i,"//VTK::TCoord::Impl",[`licOutput = ${f};`,"//VTK::TCoord::Impl"]).result,l=ue.substitute(l,"//VTK::TCoord::Dec",["uniform int uMaskOnSurface;","uniform mat3 normalMatrix;","in vec3 licOutput;","//VTK::TCoord::Dec"]).result,l=ue.substitute(l,"//VTK::TCoord::Impl",["// projected vectors","  vec3 tcoordLIC = normalMatrix * licOutput;","  vec3 normN = normalize(normalVCVSOutput);","  float k = dot(tcoordLIC, normN);","  vec3 projected = (tcoordLIC - k*normN);","  vectorTexture = vec4(projected.x, projected.y, 0.0 , 1.0);","// vectors for fragment masking","  if (uMaskOnSurface == 0)","    {","    maskVectorTexture = vec4(licOutput, 1.0);","    }","  else","    {","    maskVectorTexture = vec4(projected.x, projected.y, 0.0 , 1.0);","    }","//VTK::TCoord::Impl"],!1).result,r.Vertex=i}e.rebuildLICShaders=!1,r.Fragment=l,n.replaceShaderValues(r,a,s),o>0&&e.lastBoundBO.set({lastLightComplexity:o},!0)},t.setMapperShaderParameters=(r,a,s)=>{n.setMapperShaderParameters(r,a,s),e.canDrawLIC&&r.getProgram().setUniformi("uMaskOnSurface",e.maskOnSurface)},t.getNeedToRebuildBufferObjects=(r,a)=>e.rebuildLICBuffers||n.getNeedToRebuildBufferObjects(r,a),t.buildBufferObjects=(r,a)=>{if(e.canDrawLIC){const s=e.renderable.getInputArrayToProcess(0);s&&s.getNumberOfComponents()>1&&e.renderable.setCustomShaderAttributes([s.getName()])}e.rebuildLICBuffers=!1,n.buildBufferObjects(r,a)},t.pushState=r=>{e.stateCache={[r.BLEND]:r.isEnabled(r.BLEND),[r.DEPTH_TEST]:r.isEnabled(r.DEPTH_TEST),[r.SCISSOR_TEST]:r.isEnabled(r.SCISSOR_TEST),[r.CULL_FACE]:r.isEnabled(r.CULL_FACE)}},t.popState=r=>{const a=s=>e.stateCache[s]?r.enable(s):r.disable(s);a(r.BLEND),a(r.DEPTH_TEST),a(r.SCISSOR_TEST),a(r.CULL_FACE)},t.renderPiece=(r,a)=>{let s=!0;e._openGLRenderWindow.getWebgl2()||(Jd("SurfaceLICMapper Requires WebGL 2"),s=!1),(!e.context.getExtension("EXT_color_buffer_float")||!e.context.getExtension("OES_texture_float_linear"))&&(Jd("SurfaceLICMapper requires the EXT_color_buffer_float and OES_texture_float_linear WebGL2 extensions."),s=!1),e.currentInput=e.renderable.getInputData(),e.currentInput||(Jd("No input"),s=!1);let i=e.renderable.getLicInterface();i||(i=V_.newInstance(),e.renderable.setLicInterface(i)),e.openGLLicInterface||(e.openGLLicInterface=hK.newInstance()),i!==e.openGLLicInterface.getLicInterface()&&e.openGLLicInterface.setLicInterface(i);const l=e.renderable.getInputArrayToProcess(0);if(i.getEnableLIC()&&(!l||l.getNumberOfComponents()<2)&&(Jd("No vector input array"),s=!1),i.getEnableLIC()||(s=!1),e.canDrawLIC!==s&&(e.rebuildLICShaders=!0,e.rebuildLICBuffers=!0),e.canDrawLIC=s,!s||!i.getEnableLIC()){n.renderPiece(r,a);return}const c=e.context,u=a.getProperty().getBackfaceCulling(),f=a.getProperty().getFrontfaceCulling();!u&&!f?e._openGLRenderWindow.disableCullFace():f?(e._openGLRenderWindow.enableCullFace(),c.cullFace(c.FRONT)):(e._openGLRenderWindow.enableCullFace(),c.cullFace(c.BACK));const d=e._openGLRenderWindow.getSize(),p=d.map(h=>Math.round(h*i.getViewPortScale()));e.openGLLicInterface.setSize(p),e.openGLLicInterface.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLLicInterface.setContext(e.context),t.pushState(e.context),e.openGLLicInterface.initializeResources(),e.openGLLicInterface.prepareForGeometry(),t.popState(e.context),n.renderPieceStart(r,a),n.renderPieceDraw(r,a),n.renderPieceFinish(r,a),t.pushState(e.context),e.VBOBuildTime.modified(),e.openGLLicInterface.completedGeometry(),e.context.disable(e.context.CULL_FACE),e.openGLLicInterface.applyLIC(),e.openGLLicInterface.combineColorsAndLIC(),e.openGLLicInterface.copyToScreen(d),t.popState(e.context)}}const yK={canDrawLIC:!1,rebuildLICShaders:!1,rebuildLICBuffers:!1,openGLLicInterface:null};function mK(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,yK,n),lv.extend(t,e,n),vK(t,e),Dn(t,e,["openGLLicInterface"])}const CK=Ft(mK,"vtkOpenGLSurfaceLICMapper");Xn("vtkSurfaceLICMapper",CK);var SK=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkSphereMapperVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// this shader implements imposters in OpenGL for Spheres

attribute vec4 vertexMC;
attribute vec2 offsetMC;

// optional normal declaration
//VTK::Normal::Dec

//VTK::Picking::Dec

// Texture coordinates
//VTK::TCoord::Dec

uniform mat3 normalMatrix; // transform model coordinate directions to view coordinates

// material property values
//VTK::Color::Dec

// clipping plane vars
//VTK::Clip::Dec

// camera and actor matrix values
//VTK::Camera::Dec

varying vec4 vertexVCVSOutput;
varying float radiusVCVSOutput;
varying vec3 centerVCVSOutput;

uniform int cameraParallel;
uniform float scaleFactor;

void main()
{
  //VTK::Picking::Impl

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Clip::Impl

  // compute the projected vertex position
  vec2 scaledOffsetMC = scaleFactor * offsetMC;
  vertexVCVSOutput = MCVCMatrix * vertexMC;
  centerVCVSOutput = vertexVCVSOutput.xyz;
  radiusVCVSOutput = length(scaledOffsetMC)*0.5;

  // make the triangle face the camera
  if (cameraParallel == 0)
    {
    vec3 dir = normalize(-vertexVCVSOutput.xyz);
    vec3 base2 = normalize(cross(dir,vec3(1.0,0.0,0.0)));
    vec3 base1 = cross(base2,dir);
    vertexVCVSOutput.xyz = vertexVCVSOutput.xyz + scaledOffsetMC.x*base1 + scaledOffsetMC.y*base2;
    }
  else
    {
    // add in the offset
    vertexVCVSOutput.xy = vertexVCVSOutput.xy + scaledOffsetMC;
    }

  gl_Position = VCPCMatrix * vertexVCVSOutput;
}
`;const{vtkErrorMacro:bK}=nr;function wK(t,e){e.classHierarchy.push("vtkOpenGLSphereMapper");const n={...t};t.getShaderTemplate=(r,a,s)=>{r.Vertex=SK,r.Fragment=ld,r.Geometry=""},t.replaceShaderValues=(r,a,s)=>{let o=r.Vertex,i=r.Fragment;o=ue.substitute(o,"//VTK::Camera::Dec",[`uniform mat4 VCPCMatrix;
`,"uniform mat4 MCVCMatrix;"]).result,i=ue.substitute(i,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,i=ue.substitute(i,"//VTK::PositionVC::Impl",[`vec4 vertexVC = vertexVCVSOutput;
`]).result;const l=[`uniform float invertedDepth;
`,`uniform int cameraParallel;
`,`varying float radiusVCVSOutput;
`,`varying vec3 centerVCVSOutput;
`,`uniform mat4 VCPCMatrix;
`];i=ue.substitute(i,"//VTK::Normal::Dec",l).result;let c="";e.context.getExtension("EXT_frag_depth")&&(c=`gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;
`),e._openGLRenderWindow.getWebgl2()&&(c=`gl_FragDepth = (pos.z / pos.w + 1.0) / 2.0;
`),i=ue.substitute(i,"//VTK::Depth::Impl",[`  vec3 EyePos;
`,`  vec3 EyeDir;
`,`  if (cameraParallel != 0) {
`,`    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);
`,`    EyeDir = vec3(0.0,0.0,-1.0); }
`,`  else {
`,`    EyeDir = vertexVC.xyz;
`,`    EyePos = vec3(0.0,0.0,0.0);
`,`    float lengthED = length(EyeDir);
`,`    EyeDir = normalize(EyeDir);
`,`    if (lengthED > radiusVCVSOutput*3.0) {
`,`      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }
`,`    }
`,`  EyePos = EyePos - centerVCVSOutput;
`,`  EyePos = EyePos/radiusVCVSOutput;
`,`  float b = 2.0*dot(EyePos,EyeDir);
`,`  float c = dot(EyePos,EyePos) - 1.0;
`,`  float d = b*b - 4.0*c;
`,`  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);
`,`  if (d < 0.0) { discard; }
`,`  else {
`,`    float t = (-b - invertedDepth*sqrt(d))*0.5;
`,`    normalVCVSOutput = invertedDepth*normalize(EyePos + t*EyeDir);
`,`    vertexVC.xyz = normalVCVSOutput*radiusVCVSOutput + centerVCVSOutput;
`,`    }
`,`  vec4 pos = VCPCMatrix * vertexVC;
`,c]).result,i=ue.substitute(i,"//VTK::Normal::Impl","").result,e.haveSeenDepthRequest&&(i=ue.substitute(i,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),r.Vertex=o,r.Fragment=i,n.replaceShaderValues(r,a,s)},t.setMapperShaderParameters=(r,a,s)=>{if(r.getCABO().getElementCount()&&(e.VBOBuildTime>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())&&r.getProgram().isAttributeUsed("offsetMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"offsetMC",12,r.getCABO().getStride(),e.context.FLOAT,2,!1)||bK("Error setting 'offsetMC' in shader VAO.")),r.getProgram().isUniformUsed("invertedDepth")&&r.getProgram().setUniformf("invertedDepth",e.invert?-1:1),r.getProgram().isUniformUsed("scaleFactor")){const i=e.currentInput.getPointData();e.renderable.getScaleArray()!=null&&i.hasArray(e.renderable.getScaleArray())?r.getProgram().setUniformf("scaleFactor",e.renderable.getScaleFactor()):r.getProgram().setUniformf("scaleFactor",1)}n.setMapperShaderParameters(r,a,s)},t.setCameraShaderParameters=(r,a,s)=>{const o=r.getProgram(),i=a.getActiveCamera(),l=e.openGLCamera.getKeyMatrices(a);if(o.isUniformUsed("VCPCMatrix")&&o.setUniformMatrix("VCPCMatrix",l.vcpc),o.isUniformUsed("MCVCMatrix"))if(s.getIsIdentity())o.setUniformMatrix("MCVCMatrix",l.wcvc);else{const c=e.openGLActor.getKeyMatrices(),u=new Float64Array(16);Ut(u,l.wcvc,c.mcwc),o.setUniformMatrix("MCVCMatrix",u)}o.isUniformUsed("cameraParallel")&&r.getProgram().setUniformi("cameraParallel",i.getParallelProjection())},t.getOpenGLMode=(r,a)=>e.context.TRIANGLES,t.buildBufferObjects=(r,a)=>{const s=e.currentInput;if(s===null)return;e.renderable.mapScalars(s,1);const o=e.renderable.getColorMapColors(),i=e.primitives[e.primTypes.Tris].getCABO(),l=s.getPointData(),c=s.getPoints(),u=c.getNumberOfPoints(),f=c.getData(),d=5;let p=null;e.renderable.getScaleArray()!=null&&l.hasArray(e.renderable.getScaleArray())&&(p=l.getArray(e.renderable.getScaleArray()).getData());let h=null,g=0,y=null;o?(g=o.getNumberOfComponents(),i.setColorOffset(0),i.setColorBOStride(4),h=o.getData(),y=new Uint8Array(3*u*4),i.getColorBO()||i.setColorBO(Zs.newInstance()),i.getColorBO().setOpenGLRenderWindow(e._openGLRenderWindow)):i.getColorBO()&&i.setColorBO(null),i.setColorComponents(g);const m=new Float32Array(d*u*3);i.setStride(d*4);const b=Math.cos(xn(30));let C=0,S=0,T=0,w=0;for(let x=0;x<u;++x){let E=e.renderable.getRadius();p&&(E=p[x]),C=x*3,m[T++]=f[C++],m[T++]=f[C++],m[T++]=f[C++],m[T++]=-2*E*b,m[T++]=-E,h&&(S=x*g,y[w++]=h[S],y[w++]=h[S+1],y[w++]=h[S+2],y[w++]=h[S+3]),C=x*3,m[T++]=f[C++],m[T++]=f[C++],m[T++]=f[C++],m[T++]=2*E*b,m[T++]=-E,h&&(y[w++]=h[S],y[w++]=h[S+1],y[w++]=h[S+2],y[w++]=h[S+3]),C=x*3,m[T++]=f[C++],m[T++]=f[C++],m[T++]=f[C++],m[T++]=0,m[T++]=2*E,h&&(y[w++]=h[S],y[w++]=h[S+1],y[w++]=h[S+2],y[w++]=h[S+3])}i.setElementCount(T/d),i.upload(m,eo.ARRAY_BUFFER),o&&i.getColorBO().upload(y,eo.ARRAY_BUFFER),e.VBOBuildTime.modified()}}const TK={};function xK(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,TK,n),lv.extend(t,e,n),wK(t,e)}const EK=Ft(xK,"vtkOpenGLSphereMapper");Xn("vtkSphereMapper",EK);var kK=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkStickMapperVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// this shader implements imposters in OpenGL for Sticks

attribute vec4 vertexMC;
attribute vec3 orientMC;
attribute vec4 offsetMC;
attribute float radiusMC;

// optional normal declaration
//VTK::Normal::Dec

//VTK::Picking::Dec

// Texture coordinates
//VTK::TCoord::Dec

uniform mat3 normalMatrix; // transform model coordinate directions to view coordinates

// material property values
//VTK::Color::Dec

// clipping plane vars
//VTK::Clip::Dec

// camera and actor matrix values
//VTK::Camera::Dec

varying vec4 vertexVCVSOutput;
varying float radiusVCVSOutput;
varying float lengthVCVSOutput;
varying vec3 centerVCVSOutput;
varying vec3 orientVCVSOutput;

uniform int cameraParallel;

void main()
{
  //VTK::Picking::Impl

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Clip::Impl

  vertexVCVSOutput = MCVCMatrix * vertexMC;
  centerVCVSOutput = vertexVCVSOutput.xyz;
  radiusVCVSOutput = radiusMC;
  lengthVCVSOutput = length(orientMC);
  orientVCVSOutput = normalMatrix * normalize(orientMC);

  // make sure it is pointing out of the screen
  if (orientVCVSOutput.z < 0.0)
    {
    orientVCVSOutput = -orientVCVSOutput;
    }

  // make the basis
  vec3 xbase;
  vec3 ybase;
  vec3 dir = vec3(0.0,0.0,1.0);
  if (cameraParallel == 0)
    {
    dir = normalize(-vertexVCVSOutput.xyz);
    }
  if (abs(dot(dir,orientVCVSOutput)) == 1.0)
    {
    xbase = normalize(cross(vec3(0.0,1.0,0.0),orientVCVSOutput));
    ybase = cross(xbase,orientVCVSOutput);
    }
  else
    {
    xbase = normalize(cross(orientVCVSOutput,dir));
    ybase = cross(orientVCVSOutput,xbase);
    }

  vec3 offsets = offsetMC.xyz*2.0-1.0;
  vertexVCVSOutput.xyz = vertexVCVSOutput.xyz +
    radiusVCVSOutput*offsets.x*xbase +
    radiusVCVSOutput*offsets.y*ybase +
    0.5*lengthVCVSOutput*offsets.z*orientVCVSOutput;

  gl_Position = VCPCMatrix * vertexVCVSOutput;
}
`;const{vtkErrorMacro:Qd}=nr;function OK(t,e){e.classHierarchy.push("vtkOpenGLStickMapper");const n={...t};t.getShaderTemplate=(r,a,s)=>{r.Vertex=kK,r.Fragment=ld,r.Geometry=""},t.replaceShaderValues=(r,a,s)=>{let o=r.Vertex,i=r.Fragment;o=ue.substitute(o,"//VTK::Camera::Dec",[`uniform mat4 VCPCMatrix;
`,"uniform mat4 MCVCMatrix;"]).result,i=ue.substitute(i,"//VTK::PositionVC::Dec","varying vec4 vertexVCVSOutput;").result,i=ue.substitute(i,"//VTK::PositionVC::Impl",`  vec4 vertexVC = vertexVCVSOutput;
`).result;const l=[`uniform int cameraParallel;
`,`varying float radiusVCVSOutput;
`,`varying vec3 orientVCVSOutput;
`,`varying float lengthVCVSOutput;
`,`varying vec3 centerVCVSOutput;
`,`uniform mat4 VCPCMatrix;
`];i=ue.substitute(i,"//VTK::Normal::Dec",l).result;let c="";e.context.getExtension("EXT_frag_depth")&&(c=`  gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;
`),e._openGLRenderWindow.getWebgl2()&&(c=`gl_FragDepth = (pos.z / pos.w + 1.0) / 2.0;
`),i=ue.substitute(i,"//VTK::Depth::Impl",[`  vec3 EyePos;
`,`  vec3 EyeDir;
`,`  if (cameraParallel != 0) {
`,`    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);
`,`    EyeDir = vec3(0.0,0.0,-1.0); }
`,`  else {
`,`    EyeDir = vertexVC.xyz;
`,`    EyePos = vec3(0.0,0.0,0.0);
`,`    float lengthED = length(EyeDir);
`,`    EyeDir = normalize(EyeDir);
`,`    if (lengthED > radiusVCVSOutput*3.0) {
`,`      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }
`,`    }
`,`  EyePos = EyePos - centerVCVSOutput;
`,`  vec3 base1;
`,`  if (abs(orientVCVSOutput.z) < 0.99) {
`,`    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,0.0,1.0))); }
`,`  else {
`,`    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,1.0,0.0))); }
`,`  vec3 base2 = cross(orientVCVSOutput,base1);
`,`  EyePos = vec3(dot(EyePos,base1),dot(EyePos,base2),dot(EyePos,orientVCVSOutput));
`,`  EyeDir = vec3(dot(EyeDir,base1),dot(EyeDir,base2),dot(EyeDir,orientVCVSOutput));
`,`  EyePos = EyePos/radiusVCVSOutput;
`,`  float a = EyeDir.x*EyeDir.x + EyeDir.y*EyeDir.y;
`,`  float b = 2.0*(EyePos.x*EyeDir.x + EyePos.y*EyeDir.y);
`,`  float c = EyePos.x*EyePos.x + EyePos.y*EyePos.y - 1.0;
`,`  float d = b*b - 4.0*a*c;
`,`  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);
`,`  if (d < 0.0) { discard; }
`,`  else {
`,`    float t =  (-b - sqrt(d))/(2.0*a);
`,`    float tz = EyePos.z + t*EyeDir.z;
`,`    vec3 iPoint = EyePos + t*EyeDir;
`,`    if (abs(iPoint.z)*radiusVCVSOutput > lengthVCVSOutput*0.5) {
`,`      float t2 = (-b + sqrt(d))/(2.0*a);
`,`      float tz2 = EyePos.z + t2*EyeDir.z;
`,`      if (tz2*radiusVCVSOutput > lengthVCVSOutput*0.5 || tz*radiusVCVSOutput < -0.5*lengthVCVSOutput) { discard; }
`,`      else {
`,`        normalVCVSOutput = orientVCVSOutput;
`,`        float t3 = (lengthVCVSOutput*0.5/radiusVCVSOutput - EyePos.z)/EyeDir.z;
`,`        iPoint = EyePos + t3*EyeDir;
`,`        vertexVC.xyz = radiusVCVSOutput*(iPoint.x*base1 + iPoint.y*base2 + iPoint.z*orientVCVSOutput) + centerVCVSOutput;
`,`        }
`,`      }
`,`    else {
`,`      normalVCVSOutput = iPoint.x*base1 + iPoint.y*base2;
`,`      vertexVC.xyz = radiusVCVSOutput*(normalVCVSOutput + iPoint.z*orientVCVSOutput) + centerVCVSOutput;
`,`      }
`,`    }
`,`  vec4 pos = VCPCMatrix * vertexVC;
`,c]).result,i=ue.substitute(i,"//VTK::Normal::Impl","").result,e.haveSeenDepthRequest&&(i=ue.substitute(i,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),r.Vertex=o,r.Fragment=i,n.replaceShaderValues(r,a,s)},t.setMapperShaderParameters=(r,a,s)=>{r.getCABO().getElementCount()&&(e.VBOBuildTime>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())&&(r.getProgram().isAttributeUsed("orientMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"orientMC",12,r.getCABO().getStride(),e.context.FLOAT,3,!1)||Qd("Error setting 'orientMC' in shader VAO.")),r.getProgram().isAttributeUsed("offsetMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO().getColorBO(),"offsetMC",0,r.getCABO().getColorBOStride(),e.context.UNSIGNED_BYTE,3,!0)||Qd("Error setting 'offsetMC' in shader VAO.")),r.getProgram().isAttributeUsed("radiusMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"radiusMC",24,r.getCABO().getStride(),e.context.FLOAT,1,!1)||Qd("Error setting 'radiusMC' in shader VAO."))),n.setMapperShaderParameters(r,a,s)},t.setCameraShaderParameters=(r,a,s)=>{const o=r.getProgram(),i=a.getActiveCamera(),l=e.openGLCamera.getKeyMatrices(a);if(o.isUniformUsed("VCPCMatrix")&&o.setUniformMatrix("VCPCMatrix",l.vcpc),s.getIsIdentity())o.isUniformUsed("MCVCMatrix")&&o.setUniformMatrix("MCVCMatrix",l.wcvc),o.isUniformUsed("normalMatrix")&&o.setUniformMatrix3x3("normalMatrix",l.normalMatrix);else{const c=e.openGLActor.getKeyMatrices();if(o.isUniformUsed("MCVCMatrix")){const u=new Float64Array(16);Ut(u,l.wcvc,c.mcwc),o.setUniformMatrix("MCVCMatrix",u)}if(o.isUniformUsed("normalMatrix")){const u=new Float64Array(9);Dc(u,l.normalMatrix,c.normalMatrix),o.setUniformMatrix3x3("normalMatrix",u)}}o.isUniformUsed("cameraParallel")&&r.getProgram().setUniformi("cameraParallel",i.getParallelProjection())},t.getOpenGLMode=(r,a)=>e.context.TRIANGLES,t.buildBufferObjects=(r,a)=>{const s=e.currentInput;if(s===null)return;e.renderable.mapScalars(s,1);const o=e.renderable.getColorMapColors(),i=e.primitives[e.primTypes.Tris].getCABO(),l=s.getPointData(),c=s.getPoints(),u=c.getNumberOfPoints(),f=c.getData();let d=3;d+=4;let p=null,h=0;i.setColorBOStride(4),i.getColorBO()||i.setColorBO(Zs.newInstance()),i.getColorBO().setOpenGLRenderWindow(e._openGLRenderWindow),o&&(h=o.getNumberOfComponents(),i.setColorOffset(4),p=o.getData(),i.setColorBOStride(8)),i.setColorComponents(h),i.setStride(d*4);const g=new Float32Array(d*u*12),y=new Uint8Array(12*u*(p?8:4));let m=null,b=null;e.renderable.getScaleArray()!=null&&l.hasArray(e.renderable.getScaleArray())&&(m=l.getArray(e.renderable.getScaleArray()).getData()),e.renderable.getOrientationArray()!=null&&l.hasArray(e.renderable.getOrientationArray())?b=l.getArray(e.renderable.getOrientationArray()).getData():Qd([`Error setting orientationArray.
`,"You have to specify the stick orientation"]);const C=[0,1,3,0,3,2,2,3,5,2,5,4];let S=0,T=0,w=0,x=0;for(let E=0;E<u;++E){let O=e.renderable.getLength(),k=e.renderable.getRadius();m&&(O=m[E*2],k=m[E*2+1]);for(let M=0;M<C.length;++M)S=E*3,g[w++]=f[S++],g[w++]=f[S++],g[w++]=f[S++],S=E*3,g[w++]=b[S++]*O,g[w++]=b[S++]*O,g[w++]=b[S++]*O,g[w++]=k,y[x++]=255*(C[M]%2),y[x++]=C[M]>=4?255:0,y[x++]=C[M]>=2?255:0,y[x++]=255,T=E*h,p&&(y[x++]=p[T],y[x++]=p[T+1],y[x++]=p[T+2],y[x++]=p[T+3])}i.setElementCount(w/d),i.upload(g,eo.ARRAY_BUFFER),i.getColorBO().upload(y,eo.ARRAY_BUFFER),e.VBOBuildTime.modified()}}const MK={};function RK(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,MK,n),lv.extend(t,e,n),OK(t,e)}const _K=Ft(RK,"vtkOpenGLStickMapper");Xn("vtkStickMapper",_K);const L_=Object.create(null);function zr(t,e){L_[t]=e}function VK(t,e){e.classHierarchy.push("vtkWebGPUViewNodeFactory")}const DK={};function N_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,DK,n),e.overrides=L_,HO.extend(t,e,n),VK(t,e)}const LK=A.newInstance(N_,"vtkWebGPUViewNodeFactory");var NK={newInstance:LK,extend:N_};function BK(t,e){e.classHierarchy.push("vtkWebGPUCamera"),t.getProjectionMatrix=(n,r,a,s)=>{if(ct(n),e.renderable.getParallelProjection()){const o=e.renderable.getParallelScale(),i=o*r,l=o,c=(s[0]-1)*i,u=(s[0]+1)*i,f=(s[1]-1)*l,d=(s[1]+1)*l,p=1/(u-c),h=1/(d-f);n[0]=2*p,n[5]=2*h,n[10]=1/(a[1]-a[0]),n[12]=(u+c)*p,n[13]=(d+f)*h,n[14]=a[1]/(a[1]-a[0])}else{const o=Math.tan(Math.PI*e.renderable.getViewAngle()/360);let i,l;e.renderable.getUseHorizontalViewAngle()===!0?(i=a[0]*o,l=a[0]*o/r):(i=a[0]*o*r,l=a[0]*o);const c=(s[0]-1)*i,u=(s[0]+1)*i,f=(s[1]-1)*l,d=(s[1]+1)*l;n[0]=2*a[0]/(u-c),n[5]=2*a[0]/(d-f),n[12]=(c+u)/(u-c),n[13]=(f+d)/(d-f),n[10]=0,n[14]=a[0],n[11]=-1,n[15]=0}},t.convertToOpenGLDepth=n=>{if(e.renderable.getParallelProjection())return 1-n;const r=e.renderable.getClippingRangeByReference();let a=-r[0]/n;return a=(r[0]+r[1])/(r[1]-r[0])+2*r[0]*r[1]/(a*(r[1]-r[0])),.5*a+.5},t.getKeyMatrices=n=>{const r=n.getRenderable(),a=n.getParent();if(Math.max(a.getMTime(),t.getMTime(),r.getMTime(),e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatrixTime.getMTime()){const s=e.renderable.getViewMatrix();Un(e.keyMatrices.normalMatrix,s),e.keyMatrices.normalMatrix[3]=0,e.keyMatrices.normalMatrix[7]=0,e.keyMatrices.normalMatrix[11]=0,An(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),$t(e.keyMatrices.wcvc,s);const o=n.getStabilizedCenterByReference();Rn(e.keyMatrices.scvc,e.keyMatrices.wcvc,o);const i=n.getAspectRatio(),l=e.renderable.getClippingRangeByReference();t.getProjectionMatrix(e.keyMatrices.vcpc,i,l,e.renderable.getWindowCenterByReference()),Ut(e.keyMatrices.scpc,e.keyMatrices.vcpc,e.keyMatrices.scvc),An(e.keyMatrices.pcsc,e.keyMatrices.scpc),e.keyMatrixTime.modified()}return e.keyMatrices}}const FK={keyMatrixTime:null,keyMatrices:null};function $K(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,FK,n),gn.extend(t,e,n),e.keyMatrixTime={},A.obj(e.keyMatrixTime),e.keyMatrices={normalMatrix:new Float64Array(16),vcpc:new Float64Array(16),pcsc:new Float64Array(16),wcvc:new Float64Array(16),scpc:new Float64Array(16),scvc:new Float64Array(16)},A.setGet(t,e,["keyMatrixTime"]),BK(t,e)}const UK=A.newInstance($K);zr("vtkCamera",UK);function AK(t,e){e.classHierarchy.push("vtkWebGPUBindGroup"),t.setBindables=n=>{if(e.bindables.length===n.length){let r=!0;for(let a=0;a<e.bindables.length;a++)e.bindables[a]!==n[a]&&(r=!1);if(r)return}e.bindables=n,t.modified()},t.getBindGroupLayout=n=>{const r=[];for(let a=0;a<e.bindables.length;a++){const s=e.bindables[a].getBindGroupLayoutEntry();s.binding=a,r.push(s)}return n.getBindGroupLayout({entries:r})},t.getBindGroup=n=>{let r=t.getMTime();for(let s=0;s<e.bindables.length;s++){const o=e.bindables[s].getBindGroupTime().getMTime();r=o>r?o:r}if(r<e.bindGroupTime.getMTime())return e.bindGroup;const a=[];for(let s=0;s<e.bindables.length;s++){const o=e.bindables[s].getBindGroupEntry();o.binding=s,a.push(o)}return e.bindGroup=n.getHandle().createBindGroup({layout:t.getBindGroupLayout(n),entries:a,label:e.label}),e.bindGroupTime.modified(),e.bindGroup},t.getShaderCode=n=>{const r=[],a=n.getBindGroupLayoutCount(e.label);for(let s=0;s<e.bindables.length;s++)r.push(e.bindables[s].getShaderCode(s,a));return r.join(`
`)}}const WK={device:null,handle:null,label:null};function B_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,WK,n),A.obj(t,e),e.bindables=[],e.bindGroupTime={},A.obj(e.bindGroupTime,{mtime:0}),A.get(t,e,["bindGroupTime","handle","sizeInBytes","usage"]),A.setGet(t,e,["label","device","arrayInformation"]),AK(t,e)}const IK=A.newInstance(B_);var F_={newInstance:IK,extend:B_};function PK(t,e){e.classHierarchy.push("vtkWebGPUShaderModule"),t.initialize=(n,r)=>{e.device=n,e.handle=e.device.getHandle().createShaderModule({code:r.getCode()})}}const GK={device:null,handle:null};function $_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,GK,n),A.obj(t,e),A.get(t,e,["lastCameraMTime"]),A.setGet(t,e,["device","handle"]),PK(t,e)}const zK=A.newInstance($_,"vtkWebGPUShaderModule");var HK={newInstance:zK,extend:$_};function KK(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const a=Array.isArray(n)?n.join(`
`):n;let s=!1;t.search(e)!==-1&&(s=!0);let o="";r&&(o="g");const i=new RegExp(e,o),l=t.replace(i,a);return{replace:s,result:l}}function jK(t,e){e.classHierarchy.push("vtkWebGPUShaderCache"),t.getShaderModule=n=>{const r=n.getType(),a=n.getHash(),s=e._shaderModules.keys();for(let i=0;i<s.length;i++){const l=s[i];if(l.getHash()===a&&l.getType()===r)return e._shaderModules.get(l)}const o=HK.newInstance();return o.initialize(e.device,n),e._shaderModules.set(n,o),o}}const YK={shaderModules:null,device:null,window:null};function U_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,YK,n),e._shaderModules=new Map,A.obj(t,e),A.setGet(t,e,["device","window"]),jK(t,e)}const qK=A.newInstance(U_,"vtkWebGPUShaderCache");var St={newInstance:qK,extend:U_,substitute:KK};function XK(t,e){e.classHierarchy.push("vtkWebGPUPipeline"),t.getShaderDescriptions=()=>e.shaderDescriptions,t.initialize=(n,r)=>{e.pipelineDescription=e.renderEncoder.getPipelineSettings(),e.pipelineDescription.primitive.topology=e.topology,e.pipelineDescription.vertex=e.vertexState,e.pipelineDescription.label=r;const a=[];for(let s=0;s<e.layouts.length;s++)a.push(e.layouts[s].layout);e.pipelineLayout=n.getHandle().createPipelineLayout({bindGroupLayouts:a}),e.pipelineDescription.layout=e.pipelineLayout;for(let s=0;s<e.shaderDescriptions.length;s++){const o=e.shaderDescriptions[s],i=n.getShaderModule(o);o.getType()==="vertex"&&(e.pipelineDescription.vertex.module=i.getHandle(),e.pipelineDescription.vertex.entryPoint="main"),o.getType()==="fragment"&&(e.pipelineDescription.fragment.module=i.getHandle(),e.pipelineDescription.fragment.entryPoint="main")}e.handle=n.getHandle().createRenderPipeline(e.pipelineDescription)},t.getShaderDescription=n=>{for(let r=0;r<e.shaderDescriptions.length;r++)if(e.shaderDescriptions[r].getType()===n)return e.shaderDescriptions[r];return null},t.addBindGroupLayout=n=>{n&&e.layouts.push({layout:n.getBindGroupLayout(e.device),label:n.getLabel()})},t.getBindGroupLayout=n=>e.layouts[n].layout,t.getBindGroupLayoutCount=n=>{for(let r=0;r<e.layouts.length;r++)if(e.layouts[r].label===n)return r;return 0},t.bindVertexInput=(n,r)=>{r.bindBuffers(n)}}const ZK={handle:null,layouts:null,renderEncoder:null,shaderDescriptions:null,vertexState:null,topology:null,pipelineDescription:null};function A_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ZK,n),dn(t,e),e.layouts=[],e.shaderDescriptions=[],wr(t,e,["handle","pipelineDescription"]),Dn(t,e,["device","renderEncoder","topology","vertexState"]),XK(t,e)}const JK=Ft(A_,"vtkWebGPUPipeline");var QK={newInstance:JK,extend:A_};function ej(t,e){e.classHierarchy.push("vtkWebGPUShaderDescription"),t.hasOutput=n=>e.outputNames.includes(n),t.addOutput=function(n,r){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;e.outputTypes.push(n),e.outputNames.push(r),e.outputInterpolations.push(a)},t.addBuiltinOutput=(n,r)=>{e.builtinOutputTypes.push(n),e.builtinOutputNames.push(r)},t.addBuiltinInput=(n,r)=>{e.builtinInputTypes.push(n),e.builtinInputNames.push(r)},t.replaceShaderCode=(n,r)=>{const a=[];let s=[];if(r&&a.push(r.getShaderCode()),n||e.builtinInputNames.length){const o=[];if(o.push(`struct ${e.type}Input
{`),n){const i=n.getOutputNamesByReference(),l=n.getOutputTypesByReference(),c=n.getOutputInterpolationsByReference();for(let u=0;u<i.length;u++)c[u]!==void 0?o.push(`  @location(${u}) @interpolate(${c[u]}) ${i[u]} : ${l[u]},`):o.push(`  @location(${u}) ${i[u]} : ${l[u]},`)}for(let i=0;i<e.builtinInputNames.length;i++)o.push(`  ${e.builtinInputNames[i]} : ${e.builtinInputTypes[i]},`);o.length>1&&(o.push("};"),s=o,a[a.length-1]+=",",a.push(`input: ${e.type}Input`))}if(a.length&&(e.code=St.substitute(e.code,"//VTK::IOStructs::Input",a).result),e.outputNames.length+e.builtinOutputNames.length){const o=[`struct ${e.type}Output
{`];for(let i=0;i<e.outputNames.length;i++)e.outputInterpolations[i]!==void 0?o.push(`  @location(${i}) @interpolate(${e.outputInterpolations[i]}) ${e.outputNames[i]} : ${e.outputTypes[i]},`):o.push(`  @location(${i}) ${e.outputNames[i]} : ${e.outputTypes[i]},`);for(let i=0;i<e.builtinOutputNames.length;i++)o.push(`  ${e.builtinOutputNames[i]} : ${e.builtinOutputTypes[i]},`);o.push("};"),s=s.concat(o),e.code=St.substitute(e.code,"//VTK::IOStructs::Output",[`-> ${e.type}Output`]).result}e.code=St.substitute(e.code,"//VTK::IOStructs::Dec",s).result}}const tj={type:null,hash:null,code:null,outputNames:null,outputTypes:null};function W_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,tj,n),e.outputNames=[],e.outputTypes=[],e.outputInterpolations=[],e.builtinOutputNames=[],e.builtinOutputTypes=[],e.builtinInputNames=[],e.builtinInputTypes=[],A.obj(t,e),A.setGet(t,e,["type","hash","code"]),A.getArray(t,e,["outputTypes","outputNames","outputInterpolations"]),ej(t,e)}const nj=A.newInstance(W_,"vtkWebGPUShaderDescription");var gT={newInstance:nj,extend:W_};const hT={r8unorm:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"float"},r8snorm:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"float"},r8uint:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},r8sint:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"sint"},r16uint:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"uint"},r16sint:{numComponents:1,nativeType:Int16Array,stride:2,elementSize:2,sampleType:"sint"},r16float:{numComponents:1,nativeType:Float32Array,stride:2,elementSize:2,sampleType:"float"},rg8unorm:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"float"},rg8snorm:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"float"},rg8uint:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"uint"},rg8sint:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"sint"},r32uint:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:4,sampleType:"uint"},r32sint:{numComponents:1,nativeType:Int32Array,stride:4,elementSize:4,sampleType:"sint"},r32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"unfilterable-float"},rg16uint:{numComponents:2,nativeType:Uint16Array,stride:4,elementSize:2,sampleType:"uint"},rg16sint:{numComponents:2,nativeType:Int16Array,stride:4,elementSize:2,sampleType:"sint"},rg16float:{numComponents:2,nativeType:Float32Array,stride:4,elementSize:2,sampleType:"float"},rgba8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"rgba8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgba8snorm:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"float"},rgba8uint:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"uint"},rgba8sint:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"sint"},bgra8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"bgra8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgb9e5ufloat:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rgb10a2unorm:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rg11b10ufloat:{numComponents:4,nativeType:Float32Array,stride:4,sampleType:"float"},rg32uint:{numComponents:2,nativeType:Uint32Array,stride:8,elementSize:4,sampleType:"uint"},rg32sint:{numComponents:2,nativeType:Int32Array,stride:8,elementSize:4,sampleType:"sint"},rg32float:{numComponents:2,nativeType:Float32Array,stride:8,elementSize:4,sampleType:"unfilterable-float"},rgba16uint:{numComponents:4,nativeType:Uint16Array,stride:8,elementSize:2,sampleType:"uint"},rgba16sint:{numComponents:4,nativeType:Int16Array,stride:8,elementSize:2,sampleType:"sint"},rgba16float:{numComponents:4,nativeType:Float32Array,stride:8,elementSize:2,sampleType:"float"},rgba32uint:{numComponents:4,nativeType:Uint32Array,stride:16,elementSize:4,sampleType:"uint"},rgba32sint:{numComponents:4,nativeType:Int32Array,stride:16,elementSize:4,sampleType:"sint"},rgba32float:{numComponents:4,nativeType:Float32Array,stride:16,elementSize:4,sampleType:"unfilterable-float"},stencil8:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},depth16unorm:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"depth"},depth24plus:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:3,sampleType:"depth"},"depth24plus-stencil8":{numComponents:2,nativeType:Uint32Array,stride:4,sampleType:"mixed"},depth32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"depth"}};function rj(t){return!t||t.length<6?0:t in hT?hT[t]:(Pt(`unknown format ${t}`),null)}function aj(t){if(!t||t.length<5)return 0;let e=1;t[t.length-2]==="x"&&(e=Number(t[t.length-1]));const n=e===1?t.length-1:t.length-3,r=Number(t[n]);if(Number.isNaN(r))return Pt(`unknown format ${t}`),0;const a=5-r/2;return e*a}function sj(t){if(!t||t.length<5)return 0;let e=1;return t[t.length-2]==="x"&&(e=Number(t[t.length-1])),e}function oj(t){if(!t||t.length<5)return 0;let e;if(t[0]==="f")e="Float";else if(t[0]==="s")e="Int";else if(t[0]==="u")e="Uint";else{Pt(`unknown format ${t}`);return}const n=t.split("x")[0],r=Number(n[n.length-1]);if(Number.isNaN(r)){Pt(`unknown format ${t}`);return}return e+=8*(5-r/2),e+="Array",e}function ij(t){let e;if(t[0]==="f"||t[1]==="n")e="f32";else if(t[0]==="s"&&t[1]==="i")e="i32";else if(t[0]==="u"&&t[1]==="i")e="u32";else{Pt(`unknown format ${t}`);return}let n=1;return t[t.length-2]==="x"&&(n=Number(t[t.length-1])),n===4?`vec4<${e}>`:n===3?`vec3<${e}>`:n===2?`vec2<${e}>`:e}function lj(t){if(!t)return 0;let e=1;return t.substring(0,3)==="vec"?e=Number(t[3]):t.substring(0,3)==="mat"&&(e=t[3]*t[5]),e*4}function cj(t){if(t){if(t.includes("f32"))return"Float32Array";if(t.includes("i32"))return"Int32Array";if(t.includes("u32"))return"Uint32Array";Pt(`unknown format ${t}`)}}var pr={getDetailsFromTextureFormat:rj,getByteStrideFromBufferFormat:aj,getNumberOfComponentsFromBufferFormat:sj,getNativeTypeFromBufferFormat:oj,getShaderTypeFromBufferFormat:ij,getByteStrideFromShaderFormat:lj,getNativeTypeFromShaderFormat:cj};function uj(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!e.includes(t[n]))return!1;return!0}function fj(t,e){e.classHierarchy.push("vtkWebGPUVertexInput"),t.addBuffer=function(n,r){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"vertex",s=r;Array.isArray(s)||(s=[s]);for(let o=0;o<e.inputs.length;o++)if(uj(e.inputs[o].names,s)){if(e.inputs[o].buffer===n)return;e.inputs[o].buffer=n;return}e.inputs.push({buffer:n,stepMode:a,names:s}),e.inputs=e.inputs.sort((o,i)=>o.names[0]<i.names[0]?-1:o.names[0]>i.names[0]?1:0)},t.removeBufferIfPresent=n=>{for(let r=0;r<e.inputs.length;r++)e.inputs[r].names.includes(n)&&e.inputs.splice(r,1)},t.getBuffer=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return e.inputs[r].buffer;return null},t.hasAttribute=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return!0;return!1},t.getAttributeTime=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return e.inputs[r].buffer.getSourceTime();return 0},t.getShaderCode=()=>{let n="",r=0;for(let a=0;a<e.inputs.length;a++)for(let s=0;s<e.inputs[a].names.length;s++){const o=e.inputs[a].buffer.getArrayInformation()[s],i=pr.getShaderTypeFromBufferFormat(o.format);r>0&&(n+=`,
`),n=`${n}  @location(${r}) ${e.inputs[a].names[s]} : ${i}`,r++}return n},t.getVertexInputInformation=()=>{const n={};if(e.inputs.length){const r=[];let a=0;for(let s=0;s<e.inputs.length;s++){const o=e.inputs[s].buffer,i={arrayStride:o.getStrideInBytes(),stepMode:e.inputs[s].stepMode,attributes:[]},l=o.getArrayInformation();for(let c=0;c<e.inputs[s].names.length;c++)i.attributes.push({shaderLocation:a,offset:l[c].offset,format:l[c].format}),a++;r.push(i)}n.buffers=r}return n},t.bindBuffers=n=>{for(let r=0;r<e.inputs.length;r++)n.setVertexBuffer(r,e.inputs[r].buffer.getHandle());e.indexBuffer&&n.setIndexBuffer(e.indexBuffer.getHandle(),e.indexBuffer.getArrayInformation()[0].format)},t.getReady=()=>{},t.releaseGraphicsResources=()=>{e.created&&(e.inputs=[],e.bindingDescriptions=[],e.attributeDescriptions=[])}}const dj={inputs:null,bindingDescriptions:!1,attributeDescriptions:null,indexBuffer:null};function I_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dj,n),dn(t,e),e.bindingDescriptions=[],e.attributeDescriptions=[],e.inputs=[],Dn(t,e,["created","device","handle","indexBuffer"]),fj(t,e)}const pj=Ft(I_,"vtkWebGPUVertexInput");var gj={newInstance:pj,extend:I_};const hj=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@vertex
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : vertexOutput;

  // var vertex: vec4<f32> = vertexBC;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  //VTK::Position::Impl

  return output;
}
`,vj=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::RenderEncoder::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : fragmentOutput;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::Light::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  // var computedColor:vec4<f32> = vec4<f32>(1.0,0.5,0.5,1.0);

  //VTK::RenderEncoder::Impl
  return output;
}
`;function yj(t,e){e.classHierarchy.push("vtkWebGPUSimpleMapper"),t.generateShaderDescriptions=(n,r,a)=>{const s=gT.newInstance({type:"vertex",hash:n,code:e.vertexShaderTemplate}),o=gT.newInstance({type:"fragment",hash:n,code:e.fragmentShaderTemplate}),i=r.getShaderDescriptions();i.push(s),i.push(o);const l=e.vertexShaderTemplate+e.fragmentShaderTemplate,c=new RegExp("//VTK::[^:]*::","g"),f=l.match(c).filter((d,p,h)=>h.indexOf(d)===p).map(d=>`replaceShader${d.substring(7,d.length-2)}`);for(let d=0;d<f.length;d++){const p=f[d];p!=="replaceShaderIOStructs"&&e.shaderReplacements.has(p)&&e.shaderReplacements.get(p)(n,r,a)}t.replaceShaderIOStructs(n,r,a)},t.replaceShaderIOStructs=(n,r,a)=>{const s=r.getShaderDescription("vertex");s.replaceShaderCode(null,a),r.getShaderDescription("fragment").replaceShaderCode(s)},t.replaceShaderRenderEncoder=(n,r,a)=>{e.renderEncoder.replaceShaderCode(r)},e.shaderReplacements.set("replaceShaderRenderEncoder",t.replaceShaderRenderEncoder),t.replaceShaderRenderer=(n,r,a)=>{if(!e.WebGPURenderer)return;const s=e.WebGPURenderer.getBindGroup().getShaderCode(r),o=r.getShaderDescription("vertex");let i=o.getCode();i=St.substitute(i,"//VTK::Renderer::Dec",[s]).result,o.setCode(i);const l=r.getShaderDescription("fragment");i=l.getCode(),i=St.substitute(i,"//VTK::Renderer::Dec",[s]).result,l.setCode(i)},e.shaderReplacements.set("replaceShaderRenderer",t.replaceShaderRenderer),t.replaceShaderMapper=(n,r,a)=>{const s=e.bindGroup.getShaderCode(r),o=r.getShaderDescription("vertex");let i=o.getCode();i=St.substitute(i,"//VTK::Mapper::Dec",[s]).result,o.setCode(i);const l=r.getShaderDescription("fragment");l.addBuiltinInput("bool","@builtin(front_facing) frontFacing"),i=l.getCode(),i=St.substitute(i,"//VTK::Mapper::Dec",[s]).result,l.setCode(i)},e.shaderReplacements.set("replaceShaderMapper",t.replaceShaderMapper),t.replaceShaderPosition=(n,r,a)=>{const s=r.getShaderDescription("vertex");s.addBuiltinOutput("vec4<f32>","@builtin(position) Position");let o=s.getCode();o=St.substitute(o,"//VTK::Position::Impl",["    output.Position = rendererUBO.SCPCMatrix*vertexBC;"]).result,s.setCode(o)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderTCoord=(n,r,a)=>{r.getShaderDescription("vertex").addOutput("vec2<f32>","tcoordVS")},e.shaderReplacements.set("replaceShaderTCoord",t.replaceShaderTCoord),t.addTextureView=n=>{e.textureViews.includes(n)||e.textureViews.push(n)},t.prepareToDraw=n=>{e.renderEncoder=n,t.updateInput(),t.updateBuffers(),t.updateBindings(),t.updatePipeline()},t.updateInput=()=>{},t.updateBuffers=()=>{},t.updateBindings=()=>{e.bindGroup.setBindables(t.getBindables())},t.computePipelineHash=()=>{},t.registerDrawCallback=n=>{n.registerDrawCallback(e.pipeline,t.draw)},t.prepareAndDraw=n=>{t.prepareToDraw(n),n.setPipeline(e.pipeline),t.draw(n)},t.draw=n=>{const r=n.getBoundPipeline();n.activateBindGroup(e.bindGroup),e.WebGPURenderer&&e.WebGPURenderer.bindUBO(n),r.bindVertexInput(n,e.vertexInput);const a=e.vertexInput.getIndexBuffer();a?n.drawIndexed(a.getIndexCount(),e.numberOfInstances,0,0,0):n.draw(e.numberOfVertices,e.numberOfInstances,0,0)},t.getBindables=()=>{const n=[...e.additionalBindables];e.UBO&&n.push(e.UBO),e.SSBO&&n.push(e.SSBO);for(let r=0;r<e.textureViews.length;r++){n.push(e.textureViews[r]);const a=e.textureViews[r].getSampler();a&&n.push(a)}return n},t.updatePipeline=()=>{t.computePipelineHash(),e.pipeline=e.device.getPipeline(e.pipelineHash),e.pipeline||(e.pipeline=QK.newInstance(),e.pipeline.setDevice(e.device),e.WebGPURenderer&&e.pipeline.addBindGroupLayout(e.WebGPURenderer.getBindGroup()),e.pipeline.addBindGroupLayout(e.bindGroup),t.generateShaderDescriptions(e.pipelineHash,e.pipeline,e.vertexInput),e.pipeline.setTopology(e.topology),e.pipeline.setRenderEncoder(e.renderEncoder),e.pipeline.setVertexState(e.vertexInput.getVertexInputInformation()),e.device.createPipeline(e.pipelineHash,e.pipeline))}}const mj={additionalBindables:void 0,bindGroup:null,device:null,fragmentShaderTemplate:null,numberOfInstances:1,numberOfVertices:0,pipelineHash:null,shaderReplacements:null,SSBO:null,textureViews:null,topology:"triangle-list",UBO:null,vertexShaderTemplate:null,WebGPURenderer:null};function P_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,mj,n),gn.extend(t,e,n),e.textureViews=[],e.vertexInput=gj.newInstance(),e.bindGroup=F_.newInstance({label:"mapperBG"}),e.additionalBindables=[],e.fragmentShaderTemplate=e.fragmentShaderTemplate||vj,e.vertexShaderTemplate=e.vertexShaderTemplate||hj,e.shaderReplacements=new Map,A.get(t,e,["pipeline","vertexInput"]),A.setGet(t,e,["additionalBindables","device","fragmentShaderTemplate","interpolate","numberOfInstances","numberOfVertices","pipelineHash","shaderReplacements","SSBO","textureViews","topology","UBO","vertexShaderTemplate","WebGPURenderer"]),yj(t,e)}const Cj=A.newInstance(P_,"vtkWebGPUSimpleMapper");var VC={newInstance:Cj,extend:P_};function Sj(t,e){e.classHierarchy.push("vtkWebGPUFullScreenQuad"),t.replaceShaderPosition=(n,r,a)=>{const s=r.getShaderDescription("vertex");s.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),s.addOutput("vec4<f32>","vertexVC");let o=s.getCode();o=St.substitute(o,"//VTK::Position::Impl",["output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);","output.Position = vec4<f32>(vertexBC, 1.0);","output.vertexVC = vec4<f32>(vertexBC, 1);"]).result,s.setCode(o)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.updateBuffers=()=>{const n=e.device.getBufferManager().getFullScreenQuadBuffer();e.vertexInput.addBuffer(n,["vertexBC"]),e.numberOfVertices=6}}const bj={};function G_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bj,n),VC.extend(t,e,n),Sj(t,e)}const wj=A.newInstance(G_,"vtkWebGPUFullScreenQuad");var Sl={newInstance:wj,extend:G_};const Tj={Verts:0,Lines:1,Triangles:2,Strips:3,LinesFromStrips:4,LinesFromTriangles:5,Points:6,UniformArray:7,PointArray:8,NormalsFromPoints:9,Texture:10,RawVertex:11,Storage:12,Index:13},xj={Start:0,Points:0,Lines:1,Triangles:2,TriangleStrips:3,TriangleEdges:4,TriangleStripEdges:5,End:6};var cd={BufferUsage:Tj,PrimitiveTypes:xj};const R0=["getMappedRange","mapAsync","unmap"];function Ej(t,e,n,r){const a=r.byteLength,s=t.createBuffer({size:a,usage:GPUBufferUsage.COPY_SRC,mappedAtCreation:!0}),o=s.getMappedRange(0,a);new Uint8Array(o).set(new Uint8Array(r)),s.unmap();const i=t.createCommandEncoder();i.copyBufferToBuffer(s,0,e,n,a);const l=i.finish();t.queue.submit([l]),s.destroy()}function kj(t,e){e.classHierarchy.push("vtkWebGPUBuffer"),t.create=(n,r)=>{e.handle=e.device.getHandle().createBuffer({size:n,usage:r,label:e.label}),e.sizeInBytes=n,e.usage=r},t.write=n=>{Ej(e.device.getHandle(),e.handle,0,n.buffer)},t.createAndWrite=(n,r)=>{e.handle=e.device.getHandle().createBuffer({size:n.byteLength,usage:r,mappedAtCreation:!0,label:e.label}),e.sizeInBytes=n.byteLength,e.usage=r,new Uint8Array(e.handle.getMappedRange()).set(new Uint8Array(n.buffer)),e.handle.unmap()};for(let n=0;n<R0.length;n++)t[R0[n]]=function(){return e.handle[R0[n]](...arguments)}}const Oj={device:null,handle:null,sizeInBytes:0,strideInBytes:0,arrayInformation:null,usage:null,label:null,sourceTime:null};function z_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Oj,n),A.obj(t,e),A.get(t,e,["handle","sizeInBytes","usage"]),A.setGet(t,e,["strideInBytes","device","arrayInformation","label","sourceTime"]),kj(t,e)}const Mj=A.newInstance(z_);var $c={newInstance:Mj,extend:z_,...cd};const{Representation:vT}=vo,{PrimitiveTypes:Po}=cd;class Rj{constructor(){this.keys=new Uint32Array(10),this.values=new Uint32Array(10),this.count=0}clear(){this.count=0}has(e){for(let n=0;n<this.count;n++)if(this.keys[n]===e)return!0}get(e){for(let n=0;n<this.count;n++)if(this.keys[n]===e)return this.values[n]}set(e,n){this.count<9&&(this.keys[this.count]=e,this.values[this.count++]=n)}}function _j(t){switch(t){case Po.Points:return"points";case Po.Lines:return"lines";case Po.Triangles:case Po.TriangleEdges:return"polys";case Po.TriangleStripEdges:case Po.TriangleStrips:return"strips";default:return""}}function ep(t,e,n){let r=t.pointIdToFlatId[e];return r<0&&(r=t.flatId,t.pointIdToFlatId[e]=r,t.flatIdToPointId[t.flatId]=e,t.flatIdToCellId[t.flatId]=n,t.flatId++),r}function Vj(t,e,n){const r=t.length;for(let o=0;o<r;o++){let i=t[o];if(n.cellProvokedMap.has(i)){n.ibo[n.iboId++]=n.cellProvokedMap.get(i);for(let l=o+1;l<o+r;l++){i=t[l%r];const c=ep(n,i,e);n.ibo[n.iboId++]=c}return}}for(let o=0;o<r;o++){let i=t[o];if(!n.provokedPointIds[i]){let l=ep(n,i,e);n.provokedPointIds[i]=1,n.cellProvokedMap.set(i,l),n.flatIdToCellId[l]=e,n.ibo[n.iboId++]=l;for(let c=o+1;c<o+r;c++)i=t[c%r],l=ep(n,i,e),n.ibo[n.iboId++]=l;return}}let a=t[0],s=n.flatId;n.cellProvokedMap.set(a,s),n.flatIdToPointId[n.flatId]=a,n.flatIdToCellId[n.flatId]=e,n.flatId++,n.ibo[n.iboId++]=s;for(let o=1;o<r;o++)a=t[o],s=ep(n,a,e),n.ibo[n.iboId++]=s}function Dj(t,e,n){const r=t.length;n.iboSize+=r;for(let a=0;a<r;a++){const s=t[a];if(n.cellProvokedMap.has(s))return}for(let a=0;a<r;a++){const s=t[a];if(!n.provokedPointIds[s]){n.provokedPointIds[s]=1,n.cellProvokedMap.set(s,1);return}}n.cellProvokedMap.set(t[0],1),n.extraPoints++}let Hs;const yT=new Uint32Array(1),pa=new Uint32Array(2),Mo=new Uint32Array(3),_0={anythingToPoints(t,e,n,r,a){for(let s=0;s<t;++s)yT[0]=e[n+s],Hs(yT,r,a)},linesToWireframe(t,e,n,r,a){for(let s=0;s<t-1;++s)pa[0]=e[n+s],pa[1]=e[n+s+1],Hs(pa,r,a)},polysToWireframe(t,e,n,r,a){if(t>2)for(let s=0;s<t;++s)pa[0]=e[n+s],pa[1]=e[n+(s+1)%t],Hs(pa,r,a)},stripsToWireframe(t,e,n,r,a){if(t>2){for(let s=0;s<t-1;++s)pa[0]=e[n+s],pa[1]=e[n+s+1],Hs(pa,r,a);for(let s=0;s<t-2;s++)pa[0]=e[n+s],pa[1]=e[n+s+2],Hs(pa,r,a)}},polysToSurface(t,e,n,r,a){for(let s=0;s<t-2;s++)Mo[0]=e[n],Mo[1]=e[n+s+1],Mo[2]=e[n+s+2],Hs(Mo,r,a)},stripsToSurface(t,e,n,r,a){for(let s=0;s<t-2;s++)Mo[0]=e[n+s],Mo[1]=e[n+s+1+s%2],Mo[2]=e[n+s+1+(s+1)%2],Hs(Mo,r,a)}};function Lj(t,e){e.classHierarchy.push("vtkWebGPUIndexBuffer"),t.buildIndexBuffer=n=>{const r=n.cells,a=n.primitiveType,s=n.representation,o=n.cellOffset,i=r.getData(),l=i.length,c=_j(a),u=n.numberOfPoints,f={provokedPointIds:new Uint8Array(u),extraPoints:0,iboSize:0,flatId:0,iboId:0,cellProvokedMap:new Rj};let d=null;s===vT.POINTS||a===Po.Points?d=_0.anythingToPoints:s===vT.WIREFRAME||a===Po.Lines?d=_0[`${c}ToWireframe`]:d=_0[`${c}ToSurface`],Hs=Dj;let p=o||0;for(let h=0;h<l;)f.cellProvokedMap.clear(),d(i[h],i,h+1,p,f),h+=i[h]+1,p++;u<=65535?f.flatIdToPointId=new Uint16Array(u+f.extraPoints):f.flatIdToPointId=new Uint32Array(u+f.extraPoints),u+f.extraPoints<36863?f.pointIdToFlatId=new Int16Array(u):f.pointIdToFlatId=new Int32Array(u),u+f.extraPoints<=65535?(f.ibo=new Uint16Array(f.iboSize),n.format="uint16"):(f.ibo=new Uint32Array(f.iboSize),n.format="uint32"),p<=65535?f.flatIdToCellId=new Uint16Array(u+f.extraPoints):f.flatIdToCellId=new Uint32Array(u+f.extraPoints),f.pointIdToFlatId.fill(-1),f.provokedPointIds.fill(0),Hs=Vj,p=o||0;for(let h=0;h<l;)f.cellProvokedMap.clear(),d(i[h],i,h+1,p,f),h+=i[h]+1,p++;delete f.provokedPointIds,delete f.pointIdToFlatId,n.nativeArray=f.ibo,e.flatIdToPointId=f.flatIdToPointId,e.flatIdToCellId=f.flatIdToCellId,e.flatSize=f.flatId,e.indexCount=f.iboId}}const Nj={flatIdToPointId:null,flatIdToCellId:null,flatSize:0,indexCount:0};function H_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Nj,n),$c.extend(t,e,n),A.setGet(t,e,["flatIdToPointId","flatIdToCellId","flatSize","indexCount"]),Lj(t,e)}const Bj=A.newInstance(H_);var Fj={newInstance:Bj,extend:H_,...cd};const{BufferUsage:Ro}=cd,{vtkErrorMacro:$j}=nr,{VtkDataTypes:Oi}=Tt,Uj={};function Aj(t){let e;switch(t.getDataType()){case Oi.UNSIGNED_CHAR:e="uint8";break;case Oi.FLOAT:e="float32";break;case Oi.UNSIGNED_INT:e="uint32";break;case Oi.INT:e="sint32";break;case Oi.DOUBLE:e="float32";break;case Oi.UNSIGNED_SHORT:e="uint16";break;case Oi.SHORT:e="sin16";break;default:e="float32";break}switch(t.getNumberOfComponents()){case 2:e+="x2";break;case 3:e.includes("32")||$j(`unsupported x3 type for ${e}`),e+="x3";break;case 4:e+="x4";break}return e}function mT(t,e,n,r,a){const s={},o=t.getFlatSize();if(!o)return s;let i=[0,0,0,0];a.shift&&(a.shift.length?i=a.shift:i.fill(a.shift));let l=[1,1,1,1];a.scale&&(a.scale.length?l=a.scale:l.fill(a.scale));const c=Object.prototype.hasOwnProperty.call(a,"packExtra")?a.packExtra:!1;let u,f=0;const d=n+(c?1:0),p=cu(r,o*d);let h=t.getFlatIdToPointId();a.cellData&&(h=t.getFlatIdToCellId()),n===1?u=function(y){p[f++]=l[0]*e[y]+i[0]}:n===2?u=function(y){p[f++]=l[0]*e[y]+i[0],p[f++]=l[1]*e[y+1]+i[1]}:n===3&&!c?u=function(y){p[f++]=l[0]*e[y]+i[0],p[f++]=l[1]*e[y+1]+i[1],p[f++]=l[2]*e[y+2]+i[2]}:n===3&&c?u=function(y){p[f++]=l[0]*e[y]+i[0],p[f++]=l[1]*e[y+1]+i[1],p[f++]=l[2]*e[y+2]+i[2],p[f++]=l[3]*1+i[3]}:n===4&&(u=function(y){p[f++]=l[0]*e[y]+i[0],p[f++]=l[1]*e[y+1]+i[1],p[f++]=l[2]*e[y+2]+i[2],p[f++]=l[3]*e[y+3]+i[3]});for(let g=0;g<o;g++){const y=n*h[g];u(y)}return s.nativeArray=p,s}function Wj(t,e,n,r){const a=[t[r*3]-t[n*3],t[r*3+1]-t[n*3+1],t[r*3+2]-t[n*3+2]],s=[t[e*3]-t[n*3],t[e*3+1]-t[n*3+1],t[e*3+2]-t[n*3+2]],o=[];return _r(a,s,o),ts(o),o}function Ij(t,e){const n=e.getData(),r=t.getData();if(!r||!n)return null;const a=new Int8Array(t.getNumberOfCells()*4),s=r.length;let o=0;for(let i=0;i<s;){const l=Wj(n,r[i+1],r[i+2],r[i+3]);a[o++]=127*l[0],a[o++]=127*l[1],a[o++]=127*l[2],a[o++]=127,i+=r[i]+1}return a}function Pj(t,e){e.classHierarchy.push("vtkWebGPUBufferManager");function n(r){r.dataArray&&!r.nativeArray&&(r.nativeArray=r.dataArray.getData());let a,s;if(r.usage===Ro.Index&&(a=Fj.newInstance({label:r.label}),a.setDevice(e.device),s=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST,a.buildIndexBuffer(r),a.createAndWrite(r.nativeArray,s),a.setArrayInformation([{format:r.format}])),a||(a=$c.newInstance({label:r.label}),a.setDevice(e.device)),r.usage===Ro.UniformArray&&(s=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,a.createAndWrite(r.nativeArray,s)),r.usage===Ro.Storage&&(s=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,a.createAndWrite(r.nativeArray,s)),r.usage===Ro.Texture&&(s=GPUBufferUsage.COPY_SRC,a.createAndWrite(r.nativeArray,s)),r.usage===Ro.PointArray){s=GPUBufferUsage.VERTEX;const o=pr.getNativeTypeFromBufferFormat(r.format),i=mT(r.indexBuffer,r.dataArray.getData(),r.dataArray.getNumberOfComponents(),o,{packExtra:r.packExtra,shift:r.shift,scale:r.scale,cellData:r.cellData,cellOffset:r.cellOffset});a.createAndWrite(i.nativeArray,s),a.setStrideInBytes(pr.getByteStrideFromBufferFormat(r.format)),a.setArrayInformation([{offset:0,format:r.format,interpolation:r.cellData?"flat":"perspective"}])}if(r.usage===Ro.NormalsFromPoints){s=GPUBufferUsage.VERTEX;const o=pr.getNativeTypeFromBufferFormat(r.format),i=Ij(r.cells,r.dataArray),l=mT(r.indexBuffer,i,4,o,{cellData:!0});a.createAndWrite(l.nativeArray,s),a.setStrideInBytes(pr.getByteStrideFromBufferFormat(r.format)),a.setArrayInformation([{offset:0,format:r.format,interpolation:"flat"}])}return r.usage===Ro.RawVertex&&(s=GPUBufferUsage.VERTEX,a.createAndWrite(r.nativeArray,s),a.setStrideInBytes(pr.getByteStrideFromBufferFormat(r.format)),a.setArrayInformation([{offset:0,format:r.format}])),a.setSourceTime(r.time),a}t.hasBuffer=r=>e.device.hasCachedObject(r),t.getBuffer=r=>r.hash?e.device.getCachedObject(r.hash,n,r):n(r),t.getBufferForPointArray=(r,a)=>{const s=Aj(r),o={hash:`${r.getMTime()}I${a.getMTime()}${s}`,usage:Ro.PointArray,format:s,dataArray:r,indexBuffer:a};return t.getBuffer(o)},t.getFullScreenQuadBuffer=()=>{if(e.fullScreenQuadBuffer)return e.fullScreenQuadBuffer;e.fullScreenQuadBuffer=$c.newInstance(),e.fullScreenQuadBuffer.setDevice(e.device);const r=new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,-1,0,1,1,0,-1,1,0]);return e.fullScreenQuadBuffer.createAndWrite(r,GPUBufferUsage.VERTEX),e.fullScreenQuadBuffer.setStrideInBytes(12),e.fullScreenQuadBuffer.setArrayInformation([{offset:0,format:"float32x3"}]),e.fullScreenQuadBuffer}}const Gj={device:null,fullScreenQuadBuffer:null};function K_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Gj,n),dn(t,e),Dn(t,e,["device"]),Pj(t,e)}const zj=Ft(K_);var Ls={newInstance:zj,extend:K_,...Uj,...cd};const{BufferUsage:Hj}=Ls,{vtkErrorMacro:Xl}=A;function Kj(t,e){e.classHierarchy.push("vtkWebGPUStorageBuffer"),t.addEntry=(n,r)=>{if(e._bufferEntryNames.has(n)){Xl(`entry named ${n} already exists`);return}e._bufferEntryNames.set(n,e.bufferEntries.length);const a=pr.getByteStrideFromShaderFormat(r);e.bufferEntries.push({name:n,type:r,sizeInBytes:a,offset:e.sizeInBytes,nativeType:pr.getNativeTypeFromShaderFormat(r)}),e.sizeInBytes+=a},t.send=n=>{if(!e._buffer){const r={nativeArray:e.Float32Array,usage:Hj.Storage,label:e.label};e._buffer=n.getBufferManager().getBuffer(r),e.bindGroupTime.modified(),e._sendTime.modified();return}n.getHandle().queue.writeBuffer(e._buffer.getHandle(),0,e.arrayBuffer,0,e.sizeInBytes*e.numberOfInstances),e._sendTime.modified()},t.createView=n=>{n in e||(e.arrayBuffer||(e.arrayBuffer=new ArrayBuffer(e.sizeInBytes*e.numberOfInstances)),e[n]=A.newTypedArray(n,e.arrayBuffer))},t.setValue=(n,r,a)=>{const s=e._bufferEntryNames.get(n);if(s===void 0){Xl(`entry named ${n} not found in UBO`);return}const o=e.bufferEntries[s];t.createView(o.nativeType);const i=e[o.nativeType];i[(o.offset+r*e.sizeInBytes)/i.BYTES_PER_ELEMENT]=a},t.setArray=(n,r,a)=>{const s=e._bufferEntryNames.get(n);if(s===void 0){Xl(`entry named ${n} not found in UBO`);return}const o=e.bufferEntries[s];t.createView(o.nativeType);const i=e[o.nativeType],l=(o.offset+r*e.sizeInBytes)/i.BYTES_PER_ELEMENT;for(let c=0;c<a.length;c++)i[l+c]=a[c]},t.setAllInstancesFromArray=(n,r)=>{const a=e._bufferEntryNames.get(n);if(a===void 0){Xl(`entry named ${n} not found in UBO`);return}const s=e.bufferEntries[a];t.createView(s.nativeType);const o=e[s.nativeType],i=r.length/e.numberOfInstances;for(let l=0;l<e.numberOfInstances;l++){const c=(s.offset+l*e.sizeInBytes)/o.BYTES_PER_ELEMENT;for(let u=0;u<i;u++)o[c+u]=r[l*i+u]}},t.setAllInstancesFromArrayColorToFloat=(n,r)=>{const a=e._bufferEntryNames.get(n);if(a===void 0){Xl(`entry named ${n} not found in UBO`);return}const s=e.bufferEntries[a];t.createView(s.nativeType);const o=e[s.nativeType],i=r.length/e.numberOfInstances;for(let l=0;l<e.numberOfInstances;l++){const c=(s.offset+l*e.sizeInBytes)/o.BYTES_PER_ELEMENT;for(let u=0;u<i;u++)o[c+u]=r[l*i+u]/255}},t.setAllInstancesFromArray3x3To4x4=(n,r)=>{const a=e._bufferEntryNames.get(n);if(a===void 0){Xl(`entry named ${n} not found in UBO`);return}const s=e.bufferEntries[a];t.createView(s.nativeType);const o=e[s.nativeType],i=9;for(let l=0;l<e.numberOfInstances;l++){const c=(s.offset+l*e.sizeInBytes)/o.BYTES_PER_ELEMENT;for(let u=0;u<3;u++)for(let f=0;f<3;f++)o[c+u*4+f]=r[l*i+u*3+f]}},t.getSendTime=()=>e._sendTime.getMTime(),t.getShaderCode=(n,r)=>{const a=[`struct ${e.label}StructEntry
{`];for(let s=0;s<e.bufferEntries.length;s++){const o=e.bufferEntries[s];a.push(`  ${o.name}: ${o.type},`)}return a.push(`
};
struct ${e.label}Struct
{
  values: array<${e.label}StructEntry>,
};
@binding(${n}) @group(${r}) var<storage, read> ${e.label}: ${e.label}Struct;
`),a.join(`
`)},t.getBindGroupEntry=()=>({resource:{buffer:e._buffer.getHandle()}}),t.clearData=()=>{e.numberOfInstances=0,e.sizeInBytes=0,e.bufferEntries=[],e._bufferEntryNames=new Map,e._buffer=null,delete e.arrayBuffer,delete e.Float32Array}}const jj={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,numberOfInstances:1};function j_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,jj,n),A.obj(t,e),e._bufferEntryNames=new Map,e.bufferEntries=[],e._sendTime={},A.obj(e._sendTime,{mtime:0}),e.bindGroupTime={},A.obj(e.bindGroupTime,{mtime:0}),e.bindGroupLayoutEntry=e.bindGroupLayoutEntry||{buffer:{type:"read-only-storage"}},A.get(t,e,["bindGroupTime"]),A.setGet(t,e,["device","bindGroupLayoutEntry","label","numberOfInstances","sizeInBytes"]),Kj(t,e)}const Yj=A.newInstance(j_,"vtkWebGPUStorageBuffer");var uh={newInstance:Yj,extend:j_};const{BufferUsage:qj}=Ls,{vtkErrorMacro:V0}=A;function Xj(t,e){e.classHierarchy.push("vtkWebGPUUniformBuffer"),t.addEntry=(n,r)=>{if(e._bufferEntryNames.has(n)){V0(`entry named ${n} already exists`);return}e.sortDirty=!0,e._bufferEntryNames.set(n,e.bufferEntries.length),e.bufferEntries.push({name:n,type:r,sizeInBytes:pr.getByteStrideFromShaderFormat(r),offset:-1,nativeType:pr.getNativeTypeFromShaderFormat(r),packed:!1})},t.sortBufferEntries=()=>{if(!e.sortDirty)return;let n=0;const r=[];let a=4;for(let s=0;s<e.bufferEntries.length;s++){const o=e.bufferEntries[s];o.sizeInBytes%16===0&&(a=Math.max(16,a)),o.sizeInBytes%8===0&&(a=Math.max(8,a))}for(let s=0;s<e.bufferEntries.length;s++){const o=e.bufferEntries[s];o.packed===!1&&o.sizeInBytes%16===0&&(o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes)}for(let s=0;s<e.bufferEntries.length;s++){const o=e.bufferEntries[s];if(o.packed===!1&&o.sizeInBytes===12)for(let i=0;i<e.bufferEntries.length;i++){const l=e.bufferEntries[i];if(l.packed===!1&&l.sizeInBytes===4){o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes,l.packed=!0,l.offset=n,r.push(l),n+=l.sizeInBytes;break}}}for(let s=0;s<e.bufferEntries.length;s++){const o=e.bufferEntries[s];if(!o.packed&&o.sizeInBytes%8===0)for(let i=s+1;i<e.bufferEntries.length;i++){const l=e.bufferEntries[i];if(!l.packed&&l.sizeInBytes%8===0){o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes,l.packed=!0,l.offset=n,r.push(l),n+=l.sizeInBytes;break}}}for(let s=0;s<e.bufferEntries.length;s++){const o=e.bufferEntries[s];if(!o.packed&&o.sizeInBytes%8===0){let i=!1;for(let l=0;!i&&l<e.bufferEntries.length;l++){const c=e.bufferEntries[l];if(!c.packed&&c.sizeInBytes===4)for(let u=l+1;u<e.bufferEntries.length;u++){const f=e.bufferEntries[u];if(!f.packed&&f.sizeInBytes===4){o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes,c.packed=!0,c.offset=n,r.push(c),n+=c.sizeInBytes,f.packed=!0,f.offset=n,r.push(f),n+=f.sizeInBytes,i=!0;break}}}}}for(let s=0;s<e.bufferEntries.length;s++){const o=e.bufferEntries[s];!o.packed&&o.sizeInBytes>4&&(o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes)}for(let s=0;s<e.bufferEntries.length;s++){const o=e.bufferEntries[s];o.packed||(o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes)}e.bufferEntries=r,e._bufferEntryNames.clear();for(let s=0;s<e.bufferEntries.length;s++)e._bufferEntryNames.set(e.bufferEntries[s].name,s);e.sizeInBytes=n,e.sizeInBytes=a*Math.ceil(e.sizeInBytes/a),e.sortDirty=!1},t.sendIfNeeded=n=>{if(!e.UBO){const r={nativeArray:e.Float32Array,usage:qj.UniformArray,label:e.label};e.UBO=n.getBufferManager().getBuffer(r),e.bindGroupTime.modified(),e.sendDirty=!1}e.sendDirty&&(n.getHandle().queue.writeBuffer(e.UBO.getHandle(),0,e.arrayBuffer,0,e.sizeInBytes),e.sendDirty=!1),e.sendTime.modified()},t.createView=n=>{n in e||(e.arrayBuffer||(e.arrayBuffer=new ArrayBuffer(e.sizeInBytes)),e[n]=A.newTypedArray(n,e.arrayBuffer))},t.setValue=(n,r)=>{t.sortBufferEntries();const a=e._bufferEntryNames.get(n);if(a===void 0){V0(`entry named ${n} not found in UBO`);return}const s=e.bufferEntries[a];t.createView(s.nativeType);const o=e[s.nativeType];s.lastValue!==r&&(o[s.offset/o.BYTES_PER_ELEMENT]=r,e.sendDirty=!0),s.lastValue=r},t.setArray=(n,r)=>{t.sortBufferEntries();const a=e._bufferEntryNames.get(n);if(a===void 0){V0(`entry named ${n} not found in UBO`);return}const s=e.bufferEntries[a];t.createView(s.nativeType);const o=e[s.nativeType];let i=!1;for(let l=0;l<r.length;l++)(!s.lastValue||s.lastValue[l]!==r[l])&&(o[s.offset/o.BYTES_PER_ELEMENT+l]=r[l],i=!0);i&&(e.sendDirty=!0,s.lastValue=[...r])},t.getBindGroupEntry=()=>({resource:{buffer:e.UBO.getHandle()}}),t.getSendTime=()=>e.sendTime.getMTime(),t.getShaderCode=(n,r)=>{t.sortBufferEntries();const a=[`struct ${e.label}Struct
{`];for(let s=0;s<e.bufferEntries.length;s++){const o=e.bufferEntries[s];a.push(`  ${o.name}: ${o.type},`)}return a.push(`};
@binding(${n}) @group(${r}) var<uniform> ${e.label}: ${e.label}Struct;`),a.join(`
`)}}const Zj={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,bindGroupLayoutEntry:null,bindGroupEntry:null};function Y_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Zj,n),A.obj(t,e),e._bufferEntryNames=new Map,e.bufferEntries=[],e.bindGroupLayoutEntry=e.bindGroupLayoutEntry||{buffer:{type:"uniform"}},e.sendTime={},A.obj(e.sendTime,{mtime:0}),e.bindGroupTime={},A.obj(e.bindGroupTime,{mtime:0}),e.sendDirty=!0,e.sortDirty=!0,A.get(t,e,["binding","bindGroupTime"]),A.setGet(t,e,["bindGroupLayoutEntry","device","label","sizeInBytes"]),Xj(t,e)}const Jj=A.newInstance(Y_,"vtkWebGPUUniformBuffer");var ei={newInstance:Jj,extend:Y_};const{vtkDebugMacro:Qj}=nr,CT=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var computedColor: vec4<f32> = mapperUBO.BackgroundColor;

  //VTK::RenderEncoder::Impl
  return output;
}
`,e9=`
fn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {
  var tau: f32 = 6.28318530718;
  var pi: f32 = 3.14159265359;
  var out: vec2<f32> = vec2<f32>(0.0);

  out.x = atan2(dir.z, dir.x) / tau;
  out.x += 0.5;

  var phix: f32 = length(vec2(dir.x, dir.z));
  out.y = atan2(dir.y, phix) / pi + 0.5;

  return out;
}

//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var tcoord: vec4<f32> = vec4<f32>(input.vertexVC.xy, -1, 1);
  var V: vec4<f32> = normalize(mapperUBO.FSQMatrix * tcoord); // vec2<f32>((input.tcoordVS.x - 0.5) * 2, -(input.tcoordVS.y - 0.5) * 2);
  // textureSampleLevel gets rid of some ugly artifacts
  var background = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, vecToRectCoord(V.xyz), 0.0);
  var computedColor: vec4<f32> = vec4<f32>(background.rgb, 1);

  //VTK::RenderEncoder::Impl
  return output;
}
`,tp=new Float64Array(16),ST=new Float64Array(16);function t9(t){return t.getPositional()?t.getConeAngle()>=90?0:2:1}function n9(t,e){e.classHierarchy.push("vtkWebGPURenderer"),t.buildPass=n=>{if(n){if(!e.renderable)return;e.camera=e.renderable.getActiveCamera(),t.updateLights(),t.prepareNodes(),t.addMissingNode(e.camera),t.addMissingNodes(e.renderable.getViewPropsWithNestedProps()),t.removeUnusedNodes(),e.webgpuCamera=t.getViewNodeFor(e.camera),t.updateStabilizedMatrix()}},t.updateStabilizedMatrix=()=>{const n=e.camera.getClippingRange(),r=e.camera.getPositionByReference(),a=e.camera.getDirectionOfProjectionByReference(),s=[],o=[];zs(o,a,.5*(n[0]+n[1])),Uu(s,r,o),Dy(o,s,e.stabilizedCenter),oO(o)/(n[1]-n[0])>e.recenterThreshold&&(e.stabilizedCenter=s,e.stabilizedTime.modified())},t.updateLights=()=>{let n=0;const r=e.renderable.getLightsByReference();for(let a=0;a<r.length;++a)r[a].getSwitch()>0&&n++;return n||(Qj("No lights are on, creating one."),e.renderable.createLight()),n},t.updateUBO=()=>{var r;const n=e.UBO.getSendTime();if(e._parent.getMTime()>n||t.getMTime()>n||e.camera.getMTime()>n||e.renderable.getMTime()>n){const a=e.webgpuCamera.getKeyMatrices(t);e.UBO.setArray("WCVCMatrix",a.wcvc),e.UBO.setArray("SCPCMatrix",a.scpc),e.UBO.setArray("PCSCMatrix",a.pcsc),e.UBO.setArray("SCVCMatrix",a.scvc),e.UBO.setArray("VCPCMatrix",a.vcpc),e.UBO.setArray("WCVCNormals",a.normalMatrix),e.UBO.setValue("LightCount",e.renderable.getLights().length),e.UBO.setValue("MaxEnvironmentMipLevel",(r=e.renderable.getEnvironmentTexture())==null?void 0:r.getMipLevel()),e.UBO.setValue("BackgroundDiffuseStrength",e.renderable.getEnvironmentTextureDiffuseStrength()),e.UBO.setValue("BackgroundSpecularStrength",e.renderable.getEnvironmentTextureSpecularStrength());const s=t.getYInvertedTiledSizeAndOrigin();e.UBO.setArray("viewportSize",[s.usize,s.vsize]),e.UBO.setValue("cameraParallel",e.camera.getParallelProjection());const o=e._parent.getDevice();e.UBO.sendIfNeeded(o)}},t.updateSSBO=()=>{const n=e.renderable.getLights(),r=e.webgpuCamera.getKeyMatrices(t);let a=`${e.renderable.getMTime()}`;for(let s=0;s<n.length;s++)a+=n[s].getMTime();if(a!==e.lightTimeString){const s=new Float32Array(n.length*4),o=new Float32Array(n.length*4),i=new Float32Array(n.length*4),l=new Float32Array(n.length*4);for(let u=0;u<n.length;u++){const f=u*4,d=n[u].getPosition();It(d,d,r.wcvc),s[f]=d[0],s[f+1]=d[1],s[f+2]=d[2],s[f+3]=0,o[f]=-n[u].getDirection()[0],o[f+1]=-n[u].getDirection()[1],o[f+2]=-n[u].getDirection()[2],o[f+3]=0,i[f]=n[u].getColor()[0],i[f+1]=n[u].getColor()[1],i[f+2]=n[u].getColor()[2],i[f+3]=n[u].getIntensity()*5,l[f]=t9(n[u]),l[f+1]=Math.cos(xn(n[u].getConeAngle())),l[f+2]=Math.cos(xn(n[u].getConeAngle()+n[u].getConeFalloff())),l[f+3]=0}e.SSBO.clearData(),e.SSBO.setNumberOfInstances(n.length),e.SSBO.addEntry("LightPos","vec4<f32>"),e.SSBO.addEntry("LightDir","vec4<f32>"),e.SSBO.addEntry("LightColor","vec4<f32>"),e.SSBO.addEntry("LightData","vec4<f32>"),e.SSBO.setAllInstancesFromArray("LightPos",s),e.SSBO.setAllInstancesFromArray("LightDir",o),e.SSBO.setAllInstancesFromArray("LightColor",i),e.SSBO.setAllInstancesFromArray("LightData",l);const c=e._parent.getDevice();e.SSBO.send(c)}e.lightTimeString=a},t.scissorAndViewport=n=>{const r=t.getYInvertedTiledSizeAndOrigin();n.getHandle().setViewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize,0,1),n.getHandle().setScissorRect(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize)},t.bindUBO=n=>{n.activateBindGroup(e.bindGroup)},t.opaquePass=n=>{n?(e.renderEncoder.begin(e._parent.getCommandEncoder()),t.updateUBO(),t.updateSSBO()):(t.scissorAndViewport(e.renderEncoder),t.clear(),e.renderEncoder.end())},t.clear=()=>{var s;if(e.renderable.getTransparent()||e.suppressClear)return;const n=e._parent.getDevice();if(!e.clearFSQ){e.clearFSQ=Sl.newInstance(),e.clearFSQ.setDevice(n),e.clearFSQ.setPipelineHash("clearfsq"),e.clearFSQ.setFragmentShaderTemplate(CT);const o=ei.newInstance({label:"mapperUBO"});o.addEntry("FSQMatrix","mat4x4<f32>"),o.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(o),e.backgroundTex=e.renderable.getEnvironmentTexture()}if(e.clearFSQ.getPipelineHash()!=="clearfsqwithtexture"&&e.renderable.getUseEnvironmentTextureAsBackground()&&((s=e.backgroundTex)!=null&&s.getImageLoaded())){e.clearFSQ.setFragmentShaderTemplate(e9);const o=ei.newInstance({label:"mapperUBO"});o.addEntry("FSQMatrix","mat4x4<f32>"),o.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(o);const i=n.getTextureManager().getTextureForVTKTexture(e.backgroundTex);if(i.getReady()){const l=i.createView("EnvironmentTexture");e.clearFSQ.setTextureViews([l]),e.backgroundTexLoaded=!0;const c=e.backgroundTex.getInterpolate()?"linear":"nearest";l.addSampler(n,{addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:c,magFilter:c,mipmapFilter:"linear"})}e.clearFSQ.setPipelineHash("clearfsqwithtexture")}else if(e.clearFSQ.getPipelineHash()==="clearfsqwithtexture"&&!e.renderable.getUseEnvironmentTextureAsBackground()){e.clearFSQ=Sl.newInstance(),e.clearFSQ.setDevice(n),e.clearFSQ.setPipelineHash("clearfsq"),e.clearFSQ.setFragmentShaderTemplate(CT);const o=ei.newInstance({label:"mapperUBO"});o.addEntry("FSQMatrix","mat4x4<f32>"),o.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(o)}const r=e.webgpuCamera.getKeyMatrices(t),a=e.renderable.getBackgroundByReference();e.clearFSQ.getUBO().setArray("BackgroundColor",a),$t(ST,r.normalMatrix),zg(tp,r.scvc,r.pcsc),zg(tp,ST,tp),e.clearFSQ.getUBO().setArray("FSQMatrix",tp),e.clearFSQ.getUBO().sendIfNeeded(n),e.clearFSQ.prepareAndDraw(e.renderEncoder)},t.translucentPass=n=>{n?e.renderEncoder.begin(e._parent.getCommandEncoder()):(t.scissorAndViewport(e.renderEncoder),e.renderEncoder.end())},t.volumeDepthRangePass=n=>{n?e.renderEncoder.begin(e._parent.getCommandEncoder()):(t.scissorAndViewport(e.renderEncoder),e.renderEncoder.end())},t.getAspectRatio=()=>{const n=e._parent.getSizeByReference(),r=e.renderable.getViewportByReference();return n[0]*(r[2]-r[0])/((r[3]-r[1])*n[1])},t.convertToOpenGLDepth=n=>e.webgpuCamera.convertToOpenGLDepth(n),t.getYInvertedTiledSizeAndOrigin=()=>{const n=t.getTiledSizeAndOrigin(),r=e._parent.getSizeByReference();return n.lowerLeftV=r[1]-n.vsize-n.lowerLeftV,n},t.getTiledSizeAndOrigin=()=>{const n=e.renderable.getViewportByReference(),r=[0,0,1,1],a=n[0]-r[0],s=n[1]-r[1],o=e._parent.normalizedDisplayToDisplay(a,s),i=Math.round(o[0]),l=Math.round(o[1]),c=n[2]-r[0],u=n[3]-r[1],f=e._parent.normalizedDisplayToDisplay(c,u);let d=Math.round(f[0])-i,p=Math.round(f[1])-l;return d<0&&(d=0),p<0&&(p=0),{usize:d,vsize:p,lowerLeftU:i,lowerLeftV:l}},t.getPropFromID=n=>{for(let r=0;r<e.children.length;r++)if((e.children[r].getPropID?e.children[r].getPropID():-1)===n)return e.children[r];return null},t.getStabilizedTime=()=>e.stabilizedTime.getMTime(),t.releaseGraphicsResources=()=>{e.selector!==null&&e.selector.releaseGraphicsResources()}}const r9={bindGroup:null,selector:null,renderEncoder:null,recenterThreshold:20,suppressClear:!1,stabilizedCenter:[0,0,0]};function a9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,r9,n),gn.extend(t,e,n),e.UBO=ei.newInstance({label:"rendererUBO"}),e.UBO.addEntry("WCVCMatrix","mat4x4<f32>"),e.UBO.addEntry("SCPCMatrix","mat4x4<f32>"),e.UBO.addEntry("PCSCMatrix","mat4x4<f32>"),e.UBO.addEntry("SCVCMatrix","mat4x4<f32>"),e.UBO.addEntry("VCPCMatrix","mat4x4<f32>"),e.UBO.addEntry("WCVCNormals","mat4x4<f32>"),e.UBO.addEntry("viewportSize","vec2<f32>"),e.UBO.addEntry("LightCount","i32"),e.UBO.addEntry("MaxEnvironmentMipLevel","f32"),e.UBO.addEntry("BackgroundDiffuseStrength","f32"),e.UBO.addEntry("BackgroundSpecularStrength","f32"),e.UBO.addEntry("cameraParallel","u32"),e.SSBO=uh.newInstance({label:"rendererLightSSBO"}),e.lightTimeString="",e.bindGroup=F_.newInstance({label:"rendererBG"}),e.bindGroup.setBindables([e.UBO,e.SSBO]),e.tmpMat4=ct(new Float64Array(16)),e.stabilizedTime={},dn(e.stabilizedTime,{mtime:0}),wr(t,e,["bindGroup","stabilizedTime"]),uu(t,e,["stabilizedCenter"]),Dn(t,e,["renderEncoder","selector","suppressClear","UBO"]),n9(t,e)}const s9=Ft(a9,"vtkWebGPURenderer");zr("vtkRenderer",s9);const{CoordinateSystem:bT}=_l;function o9(t,e){e.classHierarchy.push("vtkWebGPUActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.getBufferShift=n=>(t.getKeyMatrices(n),e.bufferShift),t.getKeyMatrices=n=>{if(Math.max(e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.renderable.computeMatrix();const r=e.renderable.getMatrix();e.bufferShift[0]=r[3],e.bufferShift[1]=r[7],e.bufferShift[2]=r[11];const a=n.getStabilizedCenterByReference();e.renderable.getCoordinateSystem()===bT.WORLD&&(e.bufferShift[0]-=a[0],e.bufferShift[1]-=a[1],e.bufferShift[2]-=a[2]),$t(e.keyMatrices.bcwc,r),e.renderable.getIsIdentity()?ct(e.keyMatrices.normalMatrix):(Un(e.keyMatrices.normalMatrix,e.keyMatrices.bcwc),e.keyMatrices.normalMatrix[3]=0,e.keyMatrices.normalMatrix[7]=0,e.keyMatrices.normalMatrix[11]=0,An(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),$t(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),Rn(e.keyMatrices.bcwc,e.keyMatrices.bcwc,[-e.bufferShift[0],-e.bufferShift[1],-e.bufferShift[2]]),e.renderable.getCoordinateSystem()===bT.WORLD?Rn(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-a[0],-a[1],-a[2]]):Un(e.keyMatrices.bcsc,e.keyMatrices.bcwc),e.keyMatricesTime.modified()}return e.keyMatrices}}const i9={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function l9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,i9,n),gn.extend(t,e,n),e.keyMatricesTime={},A.obj(e.keyMatricesTime,{mtime:0}),e.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},A.get(t,e,["propID","keyMatricesTime"]),e.bufferShift=[0,0,0,0],o9(t,e)}const c9=A.newInstance(l9);zr("vtkActor",c9);const{CoordinateSystem:wT}=_l;function u9(t,e){e.classHierarchy.push("vtkWebGPUActor2D"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.getBufferShift=n=>(t.getKeyMatrices(n),e.bufferShift),t.getKeyMatrices=n=>{if(Math.max(e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.bufferShift[0]=0,e.bufferShift[1]=0,e.bufferShift[2]=0;const r=n.getStabilizedCenterByReference();e.renderable.getCoordinateSystem()===wT.WORLD&&(e.bufferShift[0]-=r[0],e.bufferShift[1]-=r[1],e.bufferShift[2]-=r[2]),ct(e.keyMatrices.bcwc),ct(e.keyMatrices.normalMatrix),Rn(e.keyMatrices.bcwc,e.keyMatrices.bcwc,[-e.bufferShift[0],-e.bufferShift[1],-e.bufferShift[2]]),e.renderable.getCoordinateSystem()===wT.WORLD?Rn(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-r[0],-r[1],-r[2]]):Un(e.keyMatrices.bcsc,e.keyMatrices.bcwc),e.keyMatricesTime.modified()}return e.keyMatrices}}const f9={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function d9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,f9,n),gn.extend(t,e,n),e.keyMatricesTime={},A.obj(e.keyMatricesTime,{mtime:0}),e.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},A.get(t,e,["propID","keyMatricesTime"]),e.bufferShift=[0,0,0,0],u9(t,e)}const p9=A.newInstance(d9);zr("vtkActor2D",p9);function g9(t,e){e.classHierarchy.push("vtkWebGPUCubeAxesActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.CubeAxesActorHelper.getRenderable()||e.CubeAxesActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.CubeAxesActorHelper.getTmActor()),t.addMissingNode(e.renderable.getGridActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const a=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,s=e.WebGPURenderer.getTiledSizeAndOrigin();e.CubeAxesActorHelper.updateAPISpecificData([s.usize,s.vsize],a,e.WebGPURenderWindow.getRenderable())}}}const h9={};function v9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,h9,n),gn.extend(t,e,n),e.CubeAxesActorHelper=IR.newCubeAxesActorHelper(),g9(t,e)}const y9=Ft(v9,"vtkWebGPUCubeAxesActor");zr("vtkCubeAxesActor",y9);const{DisplayLocation:em}=r_;function m9(t,e){e.classHierarchy.push("vtkProperty2D"),t.setDisplayLocationToBackground=()=>t.setDisplayLocation(em.BACKGROUND),t.setDisplayLocationToForeground=()=>t.setDisplayLocation(em.FOREGROUND),t.setRepresentationToWireframe=()=>t.setRepresentation(Er.WIREFRAME),t.setRepresentationToSurface=()=>t.setRepresentation(Er.SURFACE),t.setRepresentationToPoints=()=>t.setRepresentation(Er.POINTS),t.getRepresentationAsString=()=>A.enumToString(Er,e.representation)}const C9={color:[1,1,1],opacity:1,pointSize:1,lineWidth:1,representation:Er.SURFACE,displayLocation:em.FOREGROUND};function q_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,C9,n),A.obj(t,e),A.setGet(t,e,["opacity","lineWidth","pointSize","displayLocation","representation"]),A.setGetArray(t,e,["color"],3),m9(t,e)}const S9=A.newInstance(q_,"vtkProperty2D");var b9={newInstance:S9,extend:q_,...r_};const{BufferUsage:ur,PrimitiveTypes:Lr}=Ls,{Representation:np}=vo,{ScalarMode:rp}=ba,{CoordinateSystem:w9}=_l,{DisplayLocation:T9}=b9,x9=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@vertex
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : vertexOutput;

  var vertex: vec4<f32> = vertexBC;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  //VTK::Position::Impl

  return output;
}
`,E9=`
struct PBRData {
  diffuse: vec3<f32>,
  specular: vec3<f32>,
}

// Dot product with the max already in it
fn mdot(a: vec3<f32>, b: vec3<f32>) -> f32 {
  return max(0.0, dot(a, b));
}
// Dot product with a max in it that does not allow for negative values
// Physically based rendering is accurate as long as normals are accurate,
// however this is pretty often not the case. In order to prevent negative
// values from ruining light calculations and creating zones of zero light,
// this remapping is used, which smoothly clamps the dot product between
// zero and one while still maintaining a good amount of accuracy.
fn cdot(a: vec3<f32>, b: vec3<f32>) -> f32 {
  var d: f32 = max(0.0, dot(a, b));
  d = pow((d + 1.0) / 2.0, 2.6);
  return d;
}

// Lambertian diffuse model
fn lambertDiffuse(base: vec3<f32>, N: vec3<f32>, L: vec3<f32>) -> vec3<f32> {
  var pi: f32 = 3.14159265359; 
  var NdotL: f32 = mdot(N, L);
  NdotL = pow(NdotL, 1.5);
  return (base/pi)*NdotL;
}

// Yasuhiro Fujii improvement on the Oren-Nayar model
// https://mimosa-pudica.net/improved-oren-nayar.html
// p is surface color, o is roughness
fn fujiiOrenNayar(p: vec3<f32>, o: f32, N: vec3<f32>, L: vec3<f32>, V: vec3<f32>) -> vec3<f32> {
  var invpi: f32 = 0.31830988618; // 1/pi

  var o2 = o*o;
  var NdotL: f32 = mdot(N, L);
  NdotL = pow(NdotL, 1.5); // Less physically accurate, but hides the "seams" between lights better

  var NdotV: f32 = mdot(N, V);
  var LdotV: f32 = mdot(L, V);

  var s: f32 = LdotV - NdotL*NdotV;
  var t: f32 = mix(1.0, max(NdotL, NdotV), step(0.0, s)); // Mix with step is the equivalent of an if statement
  var A: vec3<f32> = 0.5*(o2 / (o2 + 0.33)) + 0.17*p*(o2 / (o2 + 0.13));
  A = invpi*(1 - A);
  var B: f32 = 0.45*(o2 / (o2 + 0.09));
  B = invpi*B;

  return p*NdotL*(A + B*(s/t));
}

// Fresnel portion of BRDF (IOR only, simplified)
fn schlickFresnelIOR(V: vec3<f32>, N: vec3<f32>, ior: f32, k: f32) -> f32 {
  var NdotV: f32 = mdot(V, N);
  var F0: f32 = (pow((ior - 1.0), 2.0) + k*k) / (pow((ior + 1.0), 2.0) + k*k); // This takes into account the roughness, which the other one does not
  return F0 + (1.0 - F0) * pow((1.0-NdotV), 5.0);
}

// Fresnel portion of BRDF (Color ior, better)
fn schlickFresnelRGB(V: vec3<f32>, N: vec3<f32>, F0: vec3<f32>) -> vec3<f32> {
  var NdotV: f32 = mdot(V, N);
  return F0 + (1.0 - F0) * pow((1-NdotV), 5.0);
}

// Normal portion of BRDF
// https://learnopengl.com/PBR/Theory
// Trowbridge-Reitz GGX functions: normal, halfway, roughness^2
fn trGGX(N: vec3<f32>, H: vec3<f32>, a: f32) -> f32 {
  var pi: f32 = 3.14159265359; 

  var a2: f32 = a*a;
  var NdotH = mdot(N, H);
  var NdotH2 = NdotH*NdotH;
  
  var denom: f32 = NdotH2 * (a2 - 1.0) + 1.0;

  return a2 / max((pi*denom*denom), 0.000001);
}

// A VERY bad approximation of anisotropy. Real anisotropic calculations require tangent and bitangent
fn anisotrophicTrGGX(N: vec3<f32>, H: vec3<f32>, O: vec3<f32>, s: f32, a: f32) -> f32 {
  var Op: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(O) * s, 0.)).xyz;

  var ggx1: f32 = trGGX(N + Op*s, H, a);
  var ggx2: f32 = trGGX(N - Op*s, H, a);
  return (0.5 * ggx1 + 0.5 * ggx2);
}

// Geometry portion of BRDF
fn schlickGGX(N: vec3<f32>, X: vec3<f32>, k: f32) -> f32 {
  var NdotX = cdot(N, X);
  return NdotX / max(0.000001, (NdotX*(1.0-k) + k));
}

fn smithSurfaceRoughness(N: vec3<f32>, V: vec3<f32>, L: vec3<f32>, k: f32) -> f32 {
  var ggx1: f32 = min(1.0, schlickGGX(N, V, k));
  var ggx2: f32 = min(1.0, schlickGGX(N, L, k));
  return ggx1*ggx2;
}

// BRDF Combination
fn cookTorrance(D: f32, F: f32, G: f32, N: vec3<f32>, V: vec3<f32>, L: vec3<f32>) -> f32 {
  var num: f32 = D*F*G;
  var denom: f32 = 4*cdot(V, N)*cdot(L, N);

  return num / max(denom, 0.000001);
}

// Different lighting calculations for different light sources
fn calcDirectionalLight(N: vec3<f32>, V: vec3<f32>, ior: f32, roughness: f32, metallic: f32, direction: vec3<f32>, color: vec3<f32>, base: vec3<f32>) -> PBRData {  
  var L: vec3<f32> = normalize(direction); // Light Vector
  var H: vec3<f32> = normalize(L + V); // Halfway Vector

  var alpha = roughness*roughness;
  var k: f32 = alpha*alpha / 2;

  var D: f32 = trGGX(N, H, alpha); // Distribution
  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L); // Fresnel term is replaced with 1 because it is added later
  var incoming: vec3<f32> = color;
  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5);

  var specular: vec3<f32> = brdf*incoming*angle;
  // Oren-Nayar gives a clay-like effect when fully rough which some people may not want, so it might be better to give a separate
  // control property for the diffuse vs specular roughness
  var diffuse: vec3<f32> = incoming*fujiiOrenNayar(base, roughness, N, L, V); 
  // Stores the specular and diffuse separately to allow for finer post processing
  var out = PBRData(diffuse, specular);
  
  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

// TODO: find some way to reduce the number of arguments going in here
fn calcPointLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, ior: f32, roughness: f32, metallic: f32, position: vec3<f32>, color: vec3<f32>, base: vec3<f32>) -> PBRData {
  var L: vec3<f32> = normalize(position - fragPos); // Light Vector
  var H: vec3<f32> = normalize(L + V); // Halfway Vector
  var dist = distance(position, fragPos);

  var alpha = roughness*roughness;
  var k: f32 = alpha*alpha / 2.0; // could also be pow(alpha + 1.0, 2) / 8

  var D: f32 = trGGX(N, H, alpha); // Distribution
  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);
  var incoming: vec3<f32> = color * (1.0 / (dist*dist));
  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" bewteen light sources

  var specular: vec3<f32> = brdf*incoming*angle;
  var diffuse: vec3<f32> = incoming*fujiiOrenNayar(base, roughness, N, L, V);

  // Stores the specular and diffuse separately to allow for finer post processing
  // Could also be done (propably more properly) with a struct
  var out = PBRData(diffuse, specular);
  
  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

// For a reason unknown to me, spheres dont seem to behave propperly with head-on spot lights
fn calcSpotLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, ior: f32, roughness: f32, metallic: f32, position: vec3<f32>, direction: vec3<f32>, cones: vec2<f32>, color: vec3<f32>, base: vec3<f32>) -> PBRData {
  var L: vec3<f32> = normalize(position - fragPos);
  var H: vec3<f32> = normalize(L + V); // Halfway Vector
  var dist = distance(position, fragPos);

  var alpha = roughness*roughness;
  var k: f32 = alpha*alpha / 2.0; // could also be pow(alpha + 1.0, 2) / 8

  var D: f32 = trGGX(N, H, alpha); // Distribution
  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);
  
  // Cones.x is the inner phi and cones.y is the outer phi
  var theta: f32 = mdot(normalize(direction), L);
  var epsilon: f32 = cones.x - cones.y;
  var intensity: f32 = (theta - cones.y) / epsilon;
  intensity = clamp(intensity, 0.0, 1.0);
  intensity /= dist*dist;

  var incoming: vec3<f32> = color * intensity;

  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" bewteen light sources

  var specular: vec3<f32> = brdf*incoming*angle;
  var diffuse: vec3<f32> = incoming*fujiiOrenNayar(base, roughness, N, L, V);

  // Stores the specular and diffuse separately to allow for finer post processing
  // Could also be done (propably more properly) with a struct
  var out = PBRData(diffuse, specular);
  
  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

// Environment mapping stuff
// Takes in a vector and converts it to an equivalent coordinate in a rectilinear texture. Should be replaced with cubemaps at some point
fn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {
  var tau: f32 = 6.28318530718;
  var pi: f32 = 3.14159265359;
  var out: vec2<f32> = vec2<f32>(0.0);

  out.x = atan2(dir.z, dir.x) / tau;
  out.x += 0.5;

  var phix: f32 = length(vec2(dir.x, dir.z));
  out.y = atan2(dir.y, phix) / pi + 0.5;

  return out;
}

//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::TCoord::Dec

// optional surface normal declaration
//VTK::Normal::Dec

//VTK::Select::Dec

//VTK::RenderEncoder::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : fragmentOutput;

  // Temporary ambient, diffuse, and opacity
  var ambientColor: vec4<f32> = mapperUBO.AmbientColor;
  var diffuseColor: vec4<f32> = mapperUBO.DiffuseColor;
  var opacity: f32 = mapperUBO.Opacity;

  // This should be declared somewhere else
  var _diffuseMap: vec4<f32> = vec4<f32>(1.0);
  var _roughnessMap: vec4<f32> = vec4<f32>(1.0);
  var _metallicMap: vec4<f32> = vec4<f32>(1.0);
  var _normalMap: vec4<f32> = vec4<f32>(0.0, 0.0, 1.0, 0.0); // normal map was setting off the normal vector detection in fragment
  var _ambientOcclusionMap: vec4<f32> = vec4<f32>(1.);
  var _emissionMap: vec4<f32> = vec4<f32>(0.);

  //VTK::Color::Impl

  //VTK::TCoord::Impl

  //VTK::Normal::Impl

  var computedColor: vec4<f32> = vec4<f32>(diffuseColor.rgb, 1.0);

  //VTK::Light::Impl

  //VTK::Select::Impl

  if (computedColor.a == 0.0) { discard; };

  //VTK::Position::Impl

  //VTK::RenderEncoder::Impl

  return output;
}
`;function TT(t){return t.indexOf("edge")>=0}function k9(t,e){e.classHierarchy.push("vtkWebGPUCellArrayMapper"),t.buildPass=n=>{n&&(e.is2D?(e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor2D"),e.forceZValue=!0):(e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor"),e.forceZValue=!1),e.coordinateSystem=e.WebGPUActor.getRenderable().getCoordinateSystem(),e.useRendererMatrix=e.coordinateSystem!==w9.DISPLAY,e.WebGPURenderer=e.WebGPUActor.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.device=e.WebGPURenderWindow.getDevice())},t.translucentPass=n=>{n&&(t.prepareToDraw(e.WebGPURenderer.getRenderEncoder()),e.renderEncoder.registerDrawCallback(e.pipeline,t.draw))},t.opaquePass=n=>{n&&(t.prepareToDraw(e.WebGPURenderer.getRenderEncoder()),e.renderEncoder.registerDrawCallback(e.pipeline,t.draw))},t.updateUBO=()=>{var s;const r=e.WebGPUActor.getRenderable().getProperty(),a=e.UBO.getSendTime();if(t.getMTime()>a||r.getMTime()>a||e.renderable.getMTime()>a){const o=e.WebGPUActor.getKeyMatrices(e.WebGPURenderer);if(e.UBO.setArray("BCWCMatrix",o.bcwc),e.UBO.setArray("BCSCMatrix",o.bcsc),e.UBO.setArray("MCWCNormals",o.normalMatrix),e.is2D){e.UBO.setValue("ZValue",e.WebGPUActor.getRenderable().getProperty().getDisplayLocation()===T9.FOREGROUND?1:0);const c=r.getColorByReference();e.UBO.setValue("AmbientIntensity",1),e.UBO.setArray("DiffuseColor",[c[0],c[1],c[2],1]),e.UBO.setValue("DiffuseIntensity",0),e.UBO.setValue("SpecularIntensity",0)}else{let c=r.getAmbientColorByReference();e.UBO.setValue("AmbientIntensity",r.getAmbient()),e.UBO.setArray("AmbientColor",[c[0],c[1],c[2],1]),e.UBO.setValue("DiffuseIntensity",r.getDiffuse()),c=r.getDiffuseColorByReference(),e.UBO.setArray("DiffuseColor",[c[0],c[1],c[2],1]),e.UBO.setValue("Roughness",r.getRoughness()),e.UBO.setValue("BaseIOR",r.getBaseIOR()),e.UBO.setValue("Metallic",r.getMetallic()),e.UBO.setValue("NormalStrength",r.getNormalStrength()),e.UBO.setValue("Emission",r.getEmission()),e.UBO.setValue("SpecularIntensity",r.getSpecular()),c=r.getSpecularColorByReference(),e.UBO.setArray("SpecularColor",[c[0],c[1],c[2],1])}const i=(s=r.getEdgeColorByReference)==null?void 0:s.call(r);i&&e.UBO.setArray("EdgeColor",[i[0],i[1],i[2],1]),e.UBO.setValue("LineWidth",r.getLineWidth()),e.UBO.setValue("Opacity",r.getOpacity()),e.UBO.setValue("PropID",e.WebGPUActor.getPropID());const l=e.WebGPURenderWindow.getDevice();e.UBO.sendIfNeeded(l)}},t.haveWideLines=()=>{const n=e.WebGPUActor.getRenderable(),r=n.getProperty().getRepresentation();return n.getProperty().getLineWidth()<=1||e.primitiveType===Lr.Verts?!1:e.primitiveType===Lr.Triangles||e.primitiveType===Lr.TriangleStrips?r===np.WIREFRAME:!0},t.replaceShaderPosition=(n,r,a)=>{const s=r.getShaderDescription("vertex");s.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),s.hasOutput("vertexVC")||s.addOutput("vec4<f32>","vertexVC");let o=s.getCode();e.useRendererMatrix?(o=St.substitute(o,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = rendererUBO.SCPCMatrix*mapperUBO.BCSCMatrix*vertexBC;","    output.vertexVC = rendererUBO.SCVCMatrix * mapperUBO.BCSCMatrix * vec4<f32>(vertexBC.xyz, 1.0);","//VTK::Position::Impl"]).result,e.forceZValue&&(o=St.substitute(o,"//VTK::Position::Impl",["pCoord = vec4<f32>(pCoord.xyz/pCoord.w, 1.0);","pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)):(o=St.substitute(o,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = mapperUBO.BCSCMatrix*vertexBC;","    pCoord.x = 2.0* pCoord.x / rendererUBO.viewportSize.x - 1.0;","    pCoord.y = 2.0* pCoord.y / rendererUBO.viewportSize.y - 1.0;","    pCoord.z = 0.5 - 0.5 * pCoord.z;","//VTK::Position::Impl"]).result,e.forceZValue&&(o=St.substitute(o,"//VTK::Position::Impl",["    pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)),t.haveWideLines()&&(s.addBuiltinInput("u32","@builtin(instance_index) instanceIndex"),o=St.substitute(o,"//VTK::Position::Impl",["    var tmpPos: vec4<f32> = pCoord;","    var numSteps: f32 = ceil(mapperUBO.LineWidth - 1.0);","    var offset: f32 = (mapperUBO.LineWidth - 1.0) * (f32(input.instanceIndex / 2u) - numSteps/2.0) / numSteps;","    var tmpPos2: vec3<f32> = tmpPos.xyz / tmpPos.w;","    tmpPos2.x = tmpPos2.x + 2.0 * (f32(input.instanceIndex) % 2.0) * offset / rendererUBO.viewportSize.x;","    tmpPos2.y = tmpPos2.y + 2.0 * (f32(input.instanceIndex + 1u) % 2.0) * offset / rendererUBO.viewportSize.y;","    tmpPos2.z = min(1.0, tmpPos2.z + 0.00001);","    pCoord = vec4<f32>(tmpPos2.xyz * tmpPos.w, tmpPos.w);","//VTK::Position::Impl"]).result),o=St.substitute(o,"//VTK::Position::Impl",["    output.Position = pCoord;"]).result,s.setCode(o)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderNormal=(n,r,a)=>{const s=a.getBuffer("normalMC"),o=e.WebGPUActor.getRenderable();if(s){const i=r.getShaderDescription("vertex");i.hasOutput("normalVC")||i.addOutput("vec3<f32>","normalVC",s.getArrayInformation()[0].interpolation),i.hasOutput("tangentVC")||i.addOutput("vec3<f32>","tangentVC",s.getArrayInformation()[0].interpolation),i.hasOutput("bitangentVC")||i.addOutput("vec3<f32>","bitangentVC",s.getArrayInformation()[0].interpolation);let l=i.getCode();l=St.substitute(l,"//VTK::Normal::Impl",["  output.normalVC = normalize((rendererUBO.WCVCNormals * mapperUBO.MCWCNormals * normalMC).xyz);","  var c1: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 0, 1));","  var c2: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 1, 0));","  var tangent: vec3<f32> = mix(c1, c2, distance(c1, c2));","  output.tangentVC = normalize(tangent);","  output.bitangentVC = normalize(cross(output.normalVC, tangent));"]).result,i.setCode(l);const c=r.getShaderDescription("fragment");l=c.getCode(),o.getProperty().getNormalTexture()?l=St.substitute(l,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  var tangent: vec3<f32> = input.tangentVC;","  var bitangent: vec3<f32> = input.bitangentVC;","  var TCVCMatrix: mat3x3<f32> = mat3x3<f32>(","    tangent.x, bitangent.x, normal.x,","    tangent.y, bitangent.y, normal.y,","    tangent.z, bitangent.z, normal.z,","  );","  var mappedNormal: vec3<f32> = TCVCMatrix * (_normalMap.xyz * 2 - 1);","  normal = mix(normal, mappedNormal, mapperUBO.NormalStrength);","  normal = normalize(normal);"]).result:l=St.substitute(l,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  normal = normalize(normal);"]).result,c.setCode(l)}},e.shaderReplacements.set("replaceShaderNormal",t.replaceShaderNormal),t.replaceShaderLight=(n,r,a)=>{var c;if(n.includes("sel"))return;const s=r.getShaderDescription("vertex");s.hasOutput("vertexVC")||s.addOutput("vec4<f32>","vertexVC");const o=e.WebGPURenderer.getRenderable(),i=r.getShaderDescription("fragment");let l=i.getCode();if(l.includes("var normal:")&&e.useRendererMatrix&&!TT(n)&&!e.is2D&&!n.includes("sel")){const u=["  var pi: f32 = 3.14159265359;","  var fragPos: vec3<f32> = vec3<f32>(input.vertexVC.xyz);","  var V: vec3<f32> = mix(normalize(-fragPos), vec3<f32>(0, 0, 1), f32(rendererUBO.cameraParallel)); // View Vector","  var baseColor: vec3<f32> = _diffuseMap.rgb * diffuseColor.rgb;","  var roughness: f32 = max(0.000001, mapperUBO.Roughness * _roughnessMap.r);","  var metallic: f32 = mapperUBO.Metallic * _metallicMap.r;","  var alpha: f32 = roughness*roughness;","  var ior: f32 = mapperUBO.BaseIOR;","  var k: f32 = alpha*alpha / 2;","  var diffuse: vec3<f32> = vec3<f32>(0.);","  var specular: vec3<f32> = vec3<f32>(0.);","  var emission: vec3<f32> = _emissionMap.rgb * mapperUBO.Emission;","  {","    var i: i32 = 0;","    loop {","      if !(i < rendererUBO.LightCount) { break; }","      switch (i32(rendererLightSSBO.values[i].LightData.x)) {","         // Point Light","         case 0 {","           var color: vec3<f32> = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           var pos: vec3<f32> = (rendererLightSSBO.values[i].LightPos).xyz;","           var calculated: PBRData = calcPointLight(normal, V, fragPos, ior, roughness, metallic, pos, color, baseColor);","           diffuse += max(vec3<f32>(0), calculated.diffuse);","           specular += max(vec3<f32>(0), calculated.specular);","          }","         // Directional light","         case 1 {","           var dir: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz;","           dir = normalize(dir);","           var color: vec3<f32> = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           var calculated: PBRData = calcDirectionalLight(normal, V, ior, roughness, metallic, dir, color, baseColor); // diffuseColor.rgb needs to be fixed with a more dynamic diffuse color","           diffuse += max(vec3<f32>(0), calculated.diffuse);","           specular += max(vec3<f32>(0), calculated.specular);","         }","         // Spot Light","         case 2 {","           var color: vec3<f32> = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           var pos: vec3<f32> = (rendererLightSSBO.values[i].LightPos).xyz;","           var dir: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz;","           dir = normalize(dir);","           var cones: vec2<f32> = vec2<f32>(rendererLightSSBO.values[i].LightData.y, rendererLightSSBO.values[i].LightData.z);","           var calculated: PBRData = calcSpotLight(normal, V, fragPos, ior, roughness, metallic, pos, dir, cones, color, baseColor);","           diffuse += max(vec3<f32>(0), calculated.diffuse);","           specular += max(vec3<f32>(0), calculated.specular);","         }","         default { continue; }","       }","      continuing { i++; }","    }","  }","  var fresnel: f32 = schlickFresnelIOR(V, normal, ior, k); // Fresnel","  fresnel = min(1.0, fresnel);","  // This could be controlled with its own variable (that isnt base color) for better artistic control","  var fresnelMetallic: vec3<f32> = schlickFresnelRGB(V, normal, baseColor); // Fresnel for metal, takes color into account","  var kS: vec3<f32> = mix(vec3<f32>(fresnel), fresnelMetallic, metallic);","  kS = min(vec3<f32>(1.0), kS);","  var kD: vec3<f32> = (1.0 - kS) * (1.0 - metallic);","  var PBR: vec3<f32> = mapperUBO.DiffuseIntensity*kD*diffuse + kS*specular;","  PBR += emission;","  computedColor = vec4<f32>(PBR, mapperUBO.Opacity);"];(c=o.getEnvironmentTexture())!=null&&c.getImageLoaded()&&u.push("  // To get diffuse IBL, the texture is sampled with normals in worldspace","  var diffuseIBLCoords: vec3<f32> = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(normal, 1.)).xyz;","  var diffuseCoords: vec2<f32> = vecToRectCoord(diffuseIBLCoords);","  // To get specular IBL, the texture is sampled as the worldspace reflection between the normal and view vectors","  // Reflections are first calculated in viewspace, then converted to worldspace to sample the environment","  var VreflN: vec3<f32> = normalize(reflect(-V, normal));","  var reflectionIBLCoords = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(VreflN, 1.)).xyz;","  var specularCoords: vec2<f32> = vecToRectCoord(reflectionIBLCoords);","  var diffuseIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, diffuseCoords, rendererUBO.MaxEnvironmentMipLevel);","  var level = roughness * rendererUBO.MaxEnvironmentMipLevel;","  var specularIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, specularCoords, level);","  var specularIBLContribution: vec3<f32> = specularIBL.rgb*rendererUBO.BackgroundSpecularStrength;","  computedColor += vec4<f32>(specularIBLContribution*kS, 0);","  var diffuseIBLContribution: vec3<f32> = diffuseIBL.rgb*rendererUBO.BackgroundDiffuseStrength;","  diffuseIBLContribution *= baseColor * _ambientOcclusionMap.rgb;","  computedColor += vec4<f32>(diffuseIBLContribution*kD, 0);"),l=St.substitute(l,"//VTK::Light::Impl",u).result,i.setCode(l)}else l=St.substitute(l,"//VTK::Light::Impl",["  var diffuse: vec3<f32> = diffuseColor.rgb;","  var specular: vec3<f32> = mapperUBO.SpecularColor.rgb * mapperUBO.SpecularColor.a;","  computedColor = vec4<f32>(diffuse * _diffuseMap.rgb, mapperUBO.Opacity);"]).result,i.setCode(l)},e.shaderReplacements.set("replaceShaderLight",t.replaceShaderLight),t.replaceShaderColor=(n,r,a)=>{if(TT(n)){const c=r.getShaderDescription("fragment");let u=c.getCode();u=St.substitute(u,"//VTK::Color::Impl",["ambientColor = mapperUBO.EdgeColor;","diffuseColor = mapperUBO.EdgeColor;"]).result,c.setCode(u);return}const s=a.getBuffer("colorVI");if(!s)return;const o=r.getShaderDescription("vertex");o.addOutput("vec4<f32>","color",s.getArrayInformation()[0].interpolation);let i=o.getCode();i=St.substitute(i,"//VTK::Color::Impl",["  output.color = colorVI;"]).result,o.setCode(i);const l=r.getShaderDescription("fragment");i=l.getCode(),i=St.substitute(i,"//VTK::Color::Impl",["ambientColor = input.color;","diffuseColor = input.color;","opacity = mapperUBO.Opacity * input.color.a;"]).result,l.setCode(i)},e.shaderReplacements.set("replaceShaderColor",t.replaceShaderColor),t.replaceShaderTCoord=(n,r,a)=>{var p,h,g,y,m,b,C,S,T,w,x,E,O,k,M,D,I,B,F,$;if(!a.hasAttribute("tcoord"))return;const s=r.getShaderDescription("vertex"),o=a.getBuffer("tcoord"),i=pr.getNumberOfComponentsFromBufferFormat(o.getArrayInformation()[0].format);let l=s.getCode();s.addOutput(`vec${i}<f32>`,"tcoordVS"),l=St.substitute(l,"//VTK::TCoord::Impl",["  output.tcoordVS = tcoord;"]).result,s.setCode(l);const c=r.getShaderDescription("fragment");l=c.getCode();const u=e.WebGPUActor.getRenderable(),f=N=>N?N.getDimensionality()===i:!1,d=[];((g=(h=(p=u.getProperty()).getDiffuseTexture)==null?void 0:h.call(p))!=null&&g.getImageLoaded()||u.getTextures()[0]||e.colorTexture)&&(f((m=(y=u.getProperty()).getDiffuseTexture)==null?void 0:m.call(y))||f(u.getTextures()[0])||f(e.colorTexture))&&d.push("_diffuseMap = textureSample(DiffuseTexture, DiffuseTextureSampler, input.tcoordVS);"),(S=(C=(b=u.getProperty()).getRoughnessTexture)==null?void 0:C.call(b))!=null&&S.getImageLoaded()&&f(u.getProperty().getRoughnessTexture())&&d.push("_roughnessMap = textureSample(RoughnessTexture, RoughnessTextureSampler, input.tcoordVS);"),(x=(w=(T=u.getProperty()).getMetallicTexture)==null?void 0:w.call(T))!=null&&x.getImageLoaded()&&f(u.getProperty().getMetallicTexture())&&d.push("_metallicMap = textureSample(MetallicTexture, MetallicTextureSampler, input.tcoordVS);"),(k=(O=(E=u.getProperty()).getNormalTexture)==null?void 0:O.call(E))!=null&&k.getImageLoaded()&&f(u.getProperty().getNormalTexture())&&d.push("_normalMap = textureSample(NormalTexture, NormalTextureSampler, input.tcoordVS);"),(I=(D=(M=u.getProperty()).getAmbientOcclusionTexture)==null?void 0:D.call(M))!=null&&I.getImageLoaded()&&f(u.getProperty().getAmbientOcclusionTexture())&&d.push("_ambientOcclusionMap = textureSample(AmbientOcclusionTexture, AmbientOcclusionTextureSampler, input.tcoordVS);"),($=(F=(B=u.getProperty()).getEmissionTexture)==null?void 0:F.call(B))!=null&&$.getImageLoaded()&&f(u.getProperty().getEmissionTexture())&&d.push("_emissionMap = textureSample(EmissionTexture, EmissionTextureSampler, input.tcoordVS);"),l=St.substitute(l,"//VTK::TCoord::Impl",d).result,c.setCode(l)},e.shaderReplacements.set("replaceShaderTCoord",t.replaceShaderTCoord),t.replaceShaderSelect=(n,r,a)=>{if(n.includes("sel")){const s=r.getShaderDescription("fragment");let o=s.getCode();o=St.substitute(o,"//VTK::Select::Impl",["  var compositeID: u32 = 0u;"]).result,s.setCode(o)}},e.shaderReplacements.set("replaceShaderSelect",t.replaceShaderSelect),t.getUsage=(n,r)=>n===np.POINTS||r===Lr.Points?ur.Verts:r===Lr.Lines?ur.Lines:n===np.WIREFRAME?r===Lr.Triangles?ur.LinesFromTriangles:ur.LinesFromStrips:r===Lr.Triangles?ur.Triangles:r===Lr.TriangleStrips?ur.Strips:r===Lr.TriangleEdges?ur.LinesFromTriangles:ur.LinesFromStrips,t.getHashFromUsage=n=>`pt${n}`,t.getTopologyFromUsage=n=>{switch(n){case ur.Triangles:return"triangle-list";case ur.Verts:return"point-list";case ur.Lines:default:return"line-list"}},t.buildVertexInput=()=>{var g,y;const n=e.currentInput,r=e.cellArray,a=e.primitiveType;let o=e.WebGPUActor.getRenderable().getProperty().getRepresentation();const i=e.WebGPURenderWindow.getDevice();let l=!1;a===Lr.TriangleEdges&&(l=!0,o=np.WIREFRAME);const c=e.vertexInput,u=n.getPoints();let f;if(r){const m={hash:`R${o}P${a}${r.getMTime()}`,usage:ur.Index,cells:r,numberOfPoints:u.getNumberOfPoints(),primitiveType:a,representation:o};f=i.getBufferManager().getBuffer(m),c.setIndexBuffer(f)}else c.setIndexBuffer(null);if(u){const m=e.WebGPUActor.getBufferShift(e.WebGPURenderer),b={hash:`${u.getMTime()}I${f.getMTime()}${m.join()}float32x4`,usage:ur.PointArray,format:"float32x4",dataArray:u,indexBuffer:f,shift:m,packExtra:!0},C=i.getBufferManager().getBuffer(b);c.addBuffer(C,["vertexBC"])}else c.removeBufferIfPresent("vertexBC");const d=t.getUsage(o,a);if(e._usesCellNormals=!1,!e.is2D&&(d===ur.Triangles||d===ur.Strips)){const m=n.getPointData().getNormals(),b={format:"snorm8x4",indexBuffer:f,packExtra:!0,shift:0,scale:127};if(m){b.hash=`${m.getMTime()}I${f.getMTime()}snorm8x4`,b.dataArray=m,b.usage=ur.PointArray;const C=i.getBufferManager().getBuffer(b);c.addBuffer(C,["normalMC"])}else if(a===Lr.Triangles){e._usesCellNormals=!0,b.hash=`PFN${u.getMTime()}I${f.getMTime()}snorm8x4`,b.dataArray=u,b.cells=r,b.usage=ur.NormalsFromPoints;const C=i.getBufferManager().getBuffer(b);c.addBuffer(C,["normalMC"])}else c.removeBufferIfPresent("normalMC")}else c.removeBufferIfPresent("normalMC");let p=!1;if(e.renderable.getScalarVisibility()){const m=e.renderable.getColorMapColors();if(m&&!l){const b=e.renderable.getScalarMode();let C=!1;(b===rp.USE_CELL_DATA||b===rp.USE_CELL_FIELD_DATA||b===rp.USE_FIELD_DATA||!n.getPointData().getScalars())&&b!==rp.USE_POINT_FIELD_DATA&&m&&(C=!0);const S={usage:ur.PointArray,format:"unorm8x4",hash:`${C}${m.getMTime()}I${f.getMTime()}unorm8x4`,dataArray:m,indexBuffer:f,cellData:C,cellOffset:0},T=i.getBufferManager().getBuffer(S);c.addBuffer(T,["colorVI"]),p=!0}}p||c.removeBufferIfPresent("colorVI");let h=null;if((y=(g=e.renderable).getInterpolateScalarsBeforeMapping)!=null&&y.call(g)&&e.renderable.getColorCoordinates()?h=e.renderable.getColorCoordinates():h=n.getPointData().getTCoords(),h&&!l){const m=i.getBufferManager().getBufferForPointArray(h,c.getIndexBuffer());c.addBuffer(m,["tcoord"])}else c.removeBufferIfPresent("tcoord")},t.updateTextures=()=>{var l,c,u,f,d,p,h,g,y,m,b,C,S,T,w;const n=[],r=[],a=(c=(l=e.renderable).getColorTextureMap)==null?void 0:c.call(l);a&&(e.colorTexture||(e.colorTexture=iv.newInstance({label:"polyDataColor"})),e.colorTexture.setInputData(a),r.push(["Diffuse",e.colorTexture]));const s=e.WebGPUActor.getRenderable(),o=e.WebGPURenderer.getRenderable(),i=[];if((f=(u=s.getProperty()).getDiffuseTexture)!=null&&f.call(u)){const x=["Diffuse",s.getProperty().getDiffuseTexture()];i.push(x)}if(s.getTextures()[0]){const x=["Diffuse",s.getTextures()[0]];i.push(x)}if(e.colorTexture){const x=["Diffuse",e.colorTexture];i.push(x)}if((p=(d=s.getProperty()).getRoughnessTexture)!=null&&p.call(d)){const x=["Roughness",s.getProperty().getRoughnessTexture()];i.push(x)}if((g=(h=s.getProperty()).getMetallicTexture)!=null&&g.call(h)){const x=["Metallic",s.getProperty().getMetallicTexture()];i.push(x)}if((m=(y=s.getProperty()).getNormalTexture)!=null&&m.call(y)){const x=["Normal",s.getProperty().getNormalTexture()];i.push(x)}if((C=(b=s.getProperty()).getAmbientOcclusionTexture)!=null&&C.call(b)){const x=["AmbientOcclusion",s.getProperty().getAmbientOcclusionTexture()];i.push(x)}if((T=(S=s.getProperty()).getEmissionTexture)!=null&&T.call(S)){const x=["Emission",s.getProperty().getEmissionTexture()];i.push(x)}if((w=o.getEnvironmentTexture)!=null&&w.call(o)){const x=["Environment",o.getEnvironmentTexture()];i.push(x)}for(let x=0;x<i.length;x++)(i[x][1].getInputData()||i[x][1].getJsImageData()||i[x][1].getCanvas())&&r.push(i[x]),i[x][1].getImage()&&i[x][1].getImageLoaded()&&r.push(i[x]);for(let x=0;x<r.length;x++){const E=r[x][1],O=r[x][0],k=e.device.getTextureManager().getTextureForVTKTexture(E);if(k.getReady()){let M=!1;for(let D=0;D<e.textures.length;D++)e.textures[D]===k&&(M=!0,n[D]=!0);if(!M){n[e.textures.length]=!0;const D=k.createView(`${O}Texture`);e.textures.push(k),e.textureViews.push(D);const I=E.getInterpolate()?"linear":"nearest";let B=null;!B&&E.getEdgeClamp()&&E.getRepeat()&&(B="mirror-repeat"),!B&&E.getEdgeClamp()&&(B="clamp-to-edge"),!B&&E.getRepeat()&&(B="repeat"),O!=="Environment"?D.addSampler(e.device,{addressModeU:B,addressModeV:B,addressModeW:B,minFilter:I,magFilter:I}):D.addSampler(e.device,{addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:I,magFilter:I,mipmapFilter:"linear"})}}}for(let x=e.textures.length-1;x>=0;x--)n[x]||(e.textures.splice(x,1),e.textureViews.splice(x,1))},t.computePipelineHash=()=>{let n=`pd${e.useRendererMatrix?"r":""}${e.forceZValue?"z":""}`;if(e.primitiveType===Lr.TriangleEdges||e.primitiveType===Lr.TriangleStripEdges)n+="edge";else{if(e.vertexInput.hasAttribute("normalMC")&&(n+="n"),e.vertexInput.hasAttribute("colorVI")&&(n+="c"),e.vertexInput.hasAttribute("tcoord")){const a=e.vertexInput.getBuffer("tcoord"),s=pr.getNumberOfComponentsFromBufferFormat(a.getArrayInformation()[0].format);n+=`t${s}`}e.textures.length&&(n+=`tx${e.textures.length}`)}e._usesCellNormals&&(n+="cn"),e.SSBO&&(n+="ssbo");const r=t.getHashFromUsage(e.usage);n+=r,n+=e.renderEncoder.getPipelineHash(),e.pipelineHash=n},t.updateBuffers=()=>{e.primitiveType!==Lr.TriangleEdges&&e.primitiveType!==Lr.TriangleStripEdges&&t.updateTextures();const n=e.WebGPUActor.getRenderable(),r=n.getProperty().getRepresentation();e.usage=t.getUsage(r,e.primitiveType),t.buildVertexInput();const a=e.vertexInput.getBuffer("vertexBC");if(t.setNumberOfVertices(a.getSizeInBytes()/a.getStrideInBytes()),t.setTopology(t.getTopologyFromUsage(e.usage)),t.updateUBO(),t.haveWideLines()){const s=n.getProperty();t.setNumberOfInstances(Math.ceil(s.getLineWidth()*2))}else t.setNumberOfInstances(1)}}const O9={is2D:!1,cellArray:null,currentInput:null,cellOffset:0,primitiveType:0,colorTexture:null,renderEncoder:null,textures:null};function X_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,O9,n),VC.extend(t,e,n),e.fragmentShaderTemplate=E9,e.vertexShaderTemplate=x9,e._tmpMat3=Oa(new Float64Array(9)),e._tmpMat4=ct(new Float64Array(16)),e.UBO=ei.newInstance({label:"mapperUBO"}),e.UBO.addEntry("BCWCMatrix","mat4x4<f32>"),e.UBO.addEntry("BCSCMatrix","mat4x4<f32>"),e.UBO.addEntry("MCWCNormals","mat4x4<f32>"),e.UBO.addEntry("AmbientColor","vec4<f32>"),e.UBO.addEntry("DiffuseColor","vec4<f32>"),e.UBO.addEntry("EdgeColor","vec4<f32>"),e.UBO.addEntry("SpecularColor","vec4<f32>"),e.UBO.addEntry("AmbientIntensity","f32"),e.UBO.addEntry("DiffuseIntensity","f32"),e.UBO.addEntry("Roughness","f32"),e.UBO.addEntry("Metallic","f32"),e.UBO.addEntry("Ambient","f32"),e.UBO.addEntry("Normal","f32"),e.UBO.addEntry("Emission","f32"),e.UBO.addEntry("NormalStrength","f32"),e.UBO.addEntry("BaseIOR","f32"),e.UBO.addEntry("SpecularIntensity","f32"),e.UBO.addEntry("LineWidth","f32"),e.UBO.addEntry("Opacity","f32"),e.UBO.addEntry("ZValue","f32"),e.UBO.addEntry("PropID","u32"),e.UBO.addEntry("ClipNear","f32"),e.UBO.addEntry("ClipFar","f32"),e.UBO.addEntry("Time","u32"),Dn(t,e,["cellArray","currentInput","cellOffset","is2D","primitiveType","renderEncoder"]),e.textures=[],k9(t,e)}const M9=Ft(X_,"vtkWebGPUCellArrayMapper");var ud={newInstance:M9,extend:X_};const{PrimitiveTypes:ap}=Ls;function R9(t,e){e.classHierarchy.push("vtkWebGPUPolyDataMapper"),t.createCellArrayMapper=()=>ud.newInstance(),t.buildPass=n=>{if(n){e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor"),e.renderable.getStatic()||e.renderable.update();const r=e.renderable.getInputData();e.renderable.mapScalars(r,1),t.updateCellArrayMappers(r)}},t.updateCellArrayMappers=n=>{const r=[n.getVerts(),n.getLines(),n.getPolys(),n.getStrips()],a=[];let s=0;for(let o=ap.Points;o<=ap.Triangles;o++)if(r[o].getNumberOfValues()>0){e.primitives[o]||(e.primitives[o]=t.createCellArrayMapper());const i=e.primitives[o];i.setCellArray(r[o]),i.setCurrentInput(n),i.setCellOffset(s),i.setPrimitiveType(o),i.setRenderable(e.renderable),s+=r[o].getNumberOfCells(),a.push(i)}else e.primitives[o]=null;if(e.WebGPUActor.getRenderable().getProperty().getEdgeVisibility())for(let o=ap.TriangleEdges;o<=ap.TriangleStripEdges;o++)if(r[o-2].getNumberOfValues()>0){e.primitives[o]||(e.primitives[o]=t.createCellArrayMapper());const i=e.primitives[o];i.setCellArray(r[o-2]),i.setCurrentInput(n),i.setCellOffset(e.primitives[o-2].getCellOffset()),i.setPrimitiveType(o),i.setRenderable(e.renderable),a.push(i)}else e.primitives[o]=null;t.prepareNodes(),t.addMissingChildren(a),t.removeUnusedNodes()}}const _9={primitives:null};function Z_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_9,n),gn.extend(t,e,n),e.primitives=[],R9(t,e)}const J_=Ft(Z_,"vtkWebGPUPolyDataMapper");var V9={newInstance:J_,extend:Z_};zr("vtkMapper",J_);const{PrimitiveTypes:xT}=Ls;function D9(t,e){e.classHierarchy.push("vtkWebGPUPolyDataMapper2D"),t.createCellArrayMapper=()=>ud.newInstance(),t.buildPass=n=>{if(n){e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor2D"),e.renderable.getStatic()||e.renderable.update();const r=e.renderable.getInputData();e.renderable.mapScalars(r,1),t.updateCellArrayMappers(r)}},t.updateCellArrayMappers=n=>{const r=[n.getVerts(),n.getLines(),n.getPolys(),n.getStrips()],a=[];let s=0;for(let o=xT.Points;o<=xT.Triangles;o++)if(r[o].getNumberOfValues()>0){e.primitives[o]||(e.primitives[o]=t.createCellArrayMapper());const i=e.primitives[o];i.setCellArray(r[o]),i.setCurrentInput(n),i.setCellOffset(s),i.setPrimitiveType(o),i.setRenderable(e.renderable),i.setIs2D(!0),s+=r[o].getNumberOfCells(),a.push(i)}else e.primitives[o]=null;t.prepareNodes(),t.addMissingChildren(a),t.removeUnusedNodes()}}function L9(t){return{primitives:[],...t}}function N9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,L9(n)),gn.extend(t,e,n),e.primitives=[],D9(t,e)}const B9=Ft(N9,"vtkWebGPUPolyDataMapper2D");zr("vtkMapper2D",B9);function F9(t,e){e.classHierarchy.push("vtkWebGPUScalarBarActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.scalarBarActorHelper.getRenderable()||e.scalarBarActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.scalarBarActorHelper.getBarActor()),t.addMissingNode(e.scalarBarActorHelper.getTmActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const a=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,s=e.WebGPURenderer.getTiledSizeAndOrigin();e.scalarBarActorHelper.updateAPISpecificData([s.usize,s.vsize],a,e.WebGPURenderWindow.getRenderable())}}}const $9={};function U9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,$9,n),gn.extend(t,e,n),e.scalarBarActorHelper=i_.newScalarBarActorHelper(),F9(t,e)}const A9=Ft(U9,"vtkWebGPUScalarBarActor");zr("vtkScalarBarActor",A9);function W9(t,e){e.classHierarchy.push("vtkWebGPUSampler"),t.create=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.device=n,e.options.addressModeU=r.addressModeU?r.addressModeU:"clamp-to-edge",e.options.addressModeV=r.addressModeV?r.addressModeV:"clamp-to-edge",e.options.addressModeW=r.addressModeW?r.addressModeW:"clamp-to-edge",e.options.magFilter=r.magFilter?r.magFilter:"nearest",e.options.minFilter=r.minFilter?r.minFilter:"nearest",e.options.mipmapFilter=r.mipmapFilter?r.mipmapFilter:"nearest",e.options.label=e.label,e.handle=e.device.getHandle().createSampler(e.options),e.bindGroupTime.modified()},t.getShaderCode=(n,r)=>`@binding(${n}) @group(${r}) var ${e.label}: sampler;`,t.getBindGroupEntry=()=>({resource:e.handle})}const I9={device:null,handle:null,label:null,options:null};function Q_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,I9,n),A.obj(t,e),e.options={},e.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,sampler:{}},e.bindGroupTime={},A.obj(e.bindGroupTime,{mtime:0}),A.get(t,e,["bindGroupTime","handle","options"]),A.setGet(t,e,["bindGroupLayoutEntry","device","label"]),W9(t,e)}const P9=A.newInstance(Q_);var fv={newInstance:P9,extend:Q_};function G9(t,e){e.classHierarchy.push("vtkWebGPUTextureView"),t.create=(n,r)=>{e.texture=n,e.options=r,e.options.dimension=e.options.dimension||"2d",e.options.label=e.label,e.textureHandle=n.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupLayoutEntry.texture.viewDimension=e.options.dimension;const a=pr.getDetailsFromTextureFormat(e.texture.getFormat());e.bindGroupLayoutEntry.texture.sampleType=a.sampleType},t.createFromTextureHandle=(n,r)=>{e.texture=null,e.options=r,e.options.dimension=e.options.dimension||"2d",e.options.label=e.label,e.textureHandle=n,e.handle=e.textureHandle.createView(e.options),e.bindGroupLayoutEntry.texture.viewDimension=e.options.dimension;const a=pr.getDetailsFromTextureFormat(r.format);e.bindGroupLayoutEntry.texture.sampleType=a.sampleType,e.bindGroupTime.modified()},t.getBindGroupEntry=()=>({resource:t.getHandle()}),t.getShaderCode=(n,r)=>{let a="f32";e.bindGroupLayoutEntry.texture.sampleType==="sint"?a="i32":e.bindGroupLayoutEntry.texture.sampleType==="uint"&&(a="u32");let s=`@binding(${n}) @group(${r}) var ${e.label}: texture_${e.options.dimension}<${a}>;`;return e.bindGroupLayoutEntry.texture.sampleType==="depth"&&(s=`@binding(${n}) @group(${r}) var ${e.label}: texture_depth_${e.options.dimension};`),s},t.addSampler=(n,r)=>{const a=fv.newInstance({label:`${e.label}Sampler`});a.create(n,r),t.setSampler(a)},t.getBindGroupTime=()=>(e.texture&&e.texture.getHandle()!==e.textureHandle&&(e.textureHandle=e.texture.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupTime.modified()),e.bindGroupTime),t.getHandle=()=>(e.texture&&e.texture.getHandle()!==e.textureHandle&&(e.textureHandle=e.texture.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupTime.modified()),e.handle)}const z9={texture:null,handle:null,sampler:null,label:null};function eV(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,z9,n),A.obj(t,e),e.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}},e.bindGroupTime={},A.obj(e.bindGroupTime,{mtime:0}),A.get(t,e,["bindGroupTime","texture"]),A.setGet(t,e,["bindGroupLayoutEntry","label","sampler"]),G9(t,e)}const H9=A.newInstance(eV);var tV={newInstance:H9,extend:eV};const{BufferUsage:ET}=Ls;function K9(t,e){e.classHierarchy.push("vtkWebGPUTexture"),t.create=(n,r)=>{e.device=n,e.width=r.width,e.height=r.height,e.depth=r.depth?r.depth:1;const a=e.depth===1?"2d":"3d";e.format=r.format?r.format:"rgba8unorm",e.mipLevel=r.mipLevel?r.mipLevel:0,e.usage=r.usage?r.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label,dimension:a,mipLevelCount:e.mipLevel+1})},t.assignFromHandle=(n,r,a)=>{e.device=n,e.handle=r,e.width=a.width,e.height=a.height,e.depth=a.depth?a.depth:1,e.format=a.format?a.format:"rgba8unorm",e.usage=a.usage?a.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST},t.writeImageData=n=>{let r=[];if(n.canvas){e.device.getHandle().queue.copyExternalImageToTexture({source:n.canvas,flipY:n.flip},{texture:e.handle,premultipliedAlpha:!0},[e.width,e.height,e.depth]),e.ready=!0;return}n.jsImageData&&!n.nativeArray&&(n.width=n.jsImageData.width,n.height=n.jsImageData.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,n.nativeArray=n.jsImageData.data);const a=pr.getDetailsFromTextureFormat(e.format);let s=e.width*a.stride;const o=(l,c,u)=>{const f=l.length/(c*u)*l.BYTES_PER_ELEMENT,d=a.elementSize===2&&a.sampleType==="float";if(d||f%256){const p=l,h=f/p.BYTES_PER_ELEMENT,g=a.elementSize,y=256*Math.floor((h*g+255)/256),m=y/g,b=A.newTypedArray(d?"Uint16Array":p.constructor.name,m*c*u);for(let C=0;C<c*u;C++)if(d)for(let S=0;S<h;S++)b[C*m+S]=ja.toHalf(p[C*h+S]);else b.set(p.subarray(C*h,(C+1)*h),C*m);return[b,y]}return[l,f]};if(n.nativeArray&&(r=n.nativeArray),n.image){const l=document.createElement("canvas");l.width=n.image.width,l.height=n.image.height;const c=l.getContext("2d");c.translate(0,l.height),c.scale(1,-1),c.drawImage(n.image,0,0,n.image.width,n.image.height,0,0,l.width,l.height),r=c.getImageData(0,0,n.image.width,n.image.height).data}const i=e.device.createCommandEncoder();if(t.getDimensionality()!==3){const l=iv.generateMipmaps(r,e.width,e.height,e.mipLevel);let c=e.width,u=e.height;for(let f=0;f<=e.mipLevel;f++){const d=o(l[f],u,1);s=d[1];const p={dataArray:n.dataArray?n.dataArray:null,nativeArray:d[0],usage:ET.Texture},h=e.device.getBufferManager().getBuffer(p);i.copyBufferToTexture({buffer:h.getHandle(),offset:0,bytesPerRow:s,rowsPerImage:u},{texture:e.handle,mipLevel:f},[c,u,1]),c/=2,u/=2}e.device.submitCommandEncoder(i),e.ready=!0}else{const l=o(r,e.height,e.depth);s=l[1];const c={dataArray:n.dataArray?n.dataArray:null,usage:ET.Texture};c.nativeArray=l[0];const u=e.device.getBufferManager().getBuffer(c);i.copyBufferToTexture({buffer:u.getHandle(),offset:0,bytesPerRow:s,rowsPerImage:e.height},{texture:e.handle},[e.width,e.height,e.depth]),e.device.submitCommandEncoder(i),e.ready=!0}},t.getScale=()=>{const n=pr.getDetailsFromTextureFormat(e.format);return n.elementSize===2&&n.sampleType==="float"?1:255},t.getNumberOfComponents=()=>pr.getDetailsFromTextureFormat(e.format).numComponents,t.getDimensionality=()=>{let n=0;return e.width>1&&n++,e.height>1&&n++,e.depth>1&&n++,n},t.resizeToMatch=n=>{(n.getWidth()!==e.width||n.getHeight()!==e.height||n.getDepth()!==e.depth)&&(e.width=n.getWidth(),e.height=n.getHeight(),e.depth=n.getDepth(),e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label}))},t.resize=function(n,r){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;(n!==e.width||r!==e.height||a!==e.depth)&&(e.width=n,e.height=r,e.depth=a,e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label}))},t.createView=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};r.dimension||(r.dimension=e.depth===1?"2d":"3d");const a=tV.newInstance({label:n});return a.create(t,r),a}}const j9={device:null,handle:null,buffer:null,ready:!1,label:null};function nV(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,j9,n),A.obj(t,e),A.get(t,e,["handle","ready","width","height","depth","format","usage"]),A.setGet(t,e,["device","label"]),K9(t,e)}const Y9=A.newInstance(nV);var ks={newInstance:Y9,extend:nV};function q9(t,e){e.classHierarchy.push("vtkWebGPUGlyph3DCellArrayMapper");const n={...t};t.setGlyphInstances=r=>{e.glyphInstances=r},t.updateBuffers=()=>{n.updateBuffers(),t.setNumberOfInstances(e.glyphInstances)},t.replaceShaderPosition=(r,a,s)=>{const o=a.getShaderDescription("vertex");o.addBuiltinInput("u32","@builtin(instance_index) instanceIndex"),o.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),o.hasOutput("vertexVC")||o.addOutput("vec3<f32>","vertexVC");let i=o.getCode();i=St.substitute(i,"//VTK::Position::Impl",["    var vertexSC: vec4<f32> = mapperUBO.BCSCMatrix*glyphSSBO.values[input.instanceIndex].matrix*vertexBC;","    output.vertexVC = (rendererUBO.SCVCMatrix*vertexSC).xyz;","    output.Position = rendererUBO.SCPCMatrix*vertexSC;"]).result,o.setCode(i)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderNormal=(r,a,s)=>{if(s.hasAttribute("normalMC")){const o=a.getShaderDescription("vertex");let i=o.getCode();i=St.substitute(i,"//VTK::Normal::Impl",["  output.normalVC = normalize((rendererUBO.WCVCNormals"," * mapperUBO.MCWCNormals"," * glyphSSBO.values[input.instanceIndex].normal*normalMC).xyz);"]).result,o.setCode(i)}n.replaceShaderNormal(r,a,s)},e.shaderReplacements.set("replaceShaderNormal",t.replaceShaderNormal),t.replaceShaderColor=(r,a,s)=>{if(!e.renderable.getColorArray()){n.replaceShaderColor(r,a,s);return}const o=a.getShaderDescription("vertex");o.addOutput("vec4<f32>","color");let i=o.getCode();i=St.substitute(i,"//VTK::Color::Impl",["  output.color = glyphSSBO.values[input.instanceIndex].color;"]).result,o.setCode(i);const l=a.getShaderDescription("fragment");i=l.getCode(),i=St.substitute(i,"//VTK::Color::Impl",["ambientColor = input.color;","diffuseColor = input.color;","opacity = mapperUBO.Opacity * input.color.a;"]).result,l.setCode(i)},e.shaderReplacements.set("replaceShaderColor",t.replaceShaderColor),t.replaceShaderSelect=(r,a,s)=>{if(r.includes("sel")){const o=a.getShaderDescription("vertex");o.addOutput("u32","compositeID","flat");let i=o.getCode();i=St.substitute(i,"//VTK::Select::Impl",["  output.compositeID = input.instanceIndex;"]).result,o.setCode(i);const l=a.getShaderDescription("fragment");i=l.getCode(),i=St.substitute(i,"//VTK::Select::Impl",["var compositeID: u32 = input.compositeID;"]).result,l.setCode(i)}},e.shaderReplacements.set("replaceShaderSelect",t.replaceShaderSelect)}function X9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,{},n),ud.extend(t,e,n),q9(t,e)}const Z9=Ft(X9,"vtkWebGPUGlyph3DCellArrayMapper");function J9(t,e){e.classHierarchy.push("vtkWebGPUGlyph3DMapper"),t.createCellArrayMapper=()=>{const n=Z9();return n.setSSBO(e.SSBO),n.setRenderable(e.renderable),n},t.buildPass=n=>{if(n){e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor"),e.renderable.getStatic()||e.renderable.update();const r=e.renderable.getInputData(1);e.renderable.mapScalars(r,1),t.updateSSBO(),t.updateCellArrayMappers(r);for(let a=0;a<e.children.length;a++)e.children[a].setGlyphInstances(e.numInstances)}},t.updateSSBO=()=>{e.currentInput=e.renderable.getInputData(1),e.renderable.buildArrays();const n=e.renderable.getMatrixArray(),r=e.renderable.getNormalArray();if(e.carray=e.renderable.getColorArray(),e.numInstances=n.length/16,e.renderable.getBuildTime().getMTime()>e.glyphBOBuildTime.getMTime()){e.WebGPURenderWindow=t.getFirstAncestorOfType("vtkWebGPURenderWindow");const a=e.WebGPURenderWindow.getDevice();e.SSBO.clearData(),e.SSBO.setNumberOfInstances(e.numInstances),e.SSBO.addEntry("matrix","mat4x4<f32>"),e.SSBO.addEntry("normal","mat4x4<f32>"),e.carray&&e.SSBO.addEntry("color","vec4<f32>"),e.SSBO.setAllInstancesFromArray("matrix",n),e.SSBO.setAllInstancesFromArray3x3To4x4("normal",r),e.carray&&e.SSBO.setAllInstancesFromArrayColorToFloat("color",e.carray.getData()),e.SSBO.send(a),e.glyphBOBuildTime.modified()}}}const Q9={};function e7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Q9,n),V9.extend(t,e,n),e.glyphBOBuildTime={},dn(e.glyphBOBuildTime,{mtime:0}),e.SSBO=uh.newInstance({label:"glyphSSBO"}),J9(t,e)}const t7=Ft(e7,"vtkWebGPUGlyph3DMapper");zr("vtkGlyph3DMapper",t7);const{SlicingMode:kT}=uv,n7=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::Image::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  //VTK::Image::Sample

  // var computedColor: vec4<f32> = vec4<f32>(1.0,0.7, 0.5, 1.0);

//VTK::RenderEncoder::Impl

  return output;
}
`;function r7(t,e,n){if(e.apply(t)){const a=t.getIndependentComponents();return`${t.getMTime()}-${a}-${n}`}return"0"}const aa=new Float64Array(16),fs=new Float64Array(16),sp=new Float64Array(16),Ws=new Float64Array(4),Zn=new Float64Array(4);function a7(t,e){e.classHierarchy.push("vtkWebGPUImageMapper"),t.buildPass=a=>{if(a){e.WebGPUImageSlice=t.getFirstAncestorOfType("vtkWebGPUImageSlice"),e.WebGPURenderer=e.WebGPUImageSlice.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.device=e.WebGPURenderWindow.getDevice();const s=e.WebGPURenderer.getRenderable();e.renderable.getSliceAtFocalPoint()&&e.renderable.setSliceFromCamera(s.getActiveCamera())}},t.translucentPass=a=>{a&&t.render()},t.opaquePass=a=>{a&&t.render()},t.render=()=>{e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.prepareToDraw(e.WebGPURenderer.getRenderEncoder()),e.renderEncoder.registerDrawCallback(e.pipeline,t.draw)},t.computePipelineHash=()=>{const a=e.currentInput.getExtent();a[0]===a[1]||a[2]===a[3]||a[4]===a[5]?(e.dimensions=2,e.pipelineHash="img2"):(e.dimensions=3,e.pipelineHash="img3")},t.updateUBO=()=>{const a=e.UBO.getSendTime(),s=e.WebGPUImageSlice.getRenderable(),o=s.getMapper();if(t.getMTime()>a||e.renderable.getMTime()>a||s.getProperty().getMTime()>a){const i=o.getInputData(),l=e.WebGPURenderer.getStabilizedCenterByReference();ct(aa),Rn(aa,aa,l);const c=s.getMatrix();$t(fs,c),An(fs,fs),Ut(aa,fs,aa);const u=i.getWorldToIndex();Ut(aa,u,aa),An(sp,aa),I1(fs,[.5,.5,.5]),Ut(aa,fs,aa);const f=i.getDimensions();ct(fs),so(fs,fs,[1/f[0],1/f[1],1/f[2]]),Ut(aa,fs,aa),e.UBO.setArray("SCTCMatrix",aa);const d=e.currentInput.getExtent(),{ijkMode:p}=e.renderable.getClosestIJKAxis();let h=e.renderable.getSlice();p!==e.renderable.getSlicingMode()&&(h=e.renderable.getSliceAtPosition(h));let g=2,y=0,m=1;p===kT.I?(g=0,y=1,m=2):p===kT.J&&(g=1,y=2,m=0),Ws[g]=h,Ws[y]=d[y*2]-.5,Ws[m]=d[m*2]-.5,Ws[3]=1,Xs(Ws,Ws,sp),e.UBO.setArray("Origin",Ws),Zn[g]=h,Zn[y]=d[y*2+1]+.5,Zn[m]=d[m*2]-.5,Zn[3]=1,Xs(Zn,Zn,sp),nw(Zn,Zn,Ws),Zn[3]=1,e.UBO.setArray("Axis1",Zn),Zn[g]=h,Zn[y]=d[y*2]-.5,Zn[m]=d[m*2+1]+.5,Zn[3]=1,Xs(Zn,Zn,sp),nw(Zn,Zn,Ws),Zn[3]=1,e.UBO.setArray("Axis2",Zn);const b=[1,1,1,1],C=[0,0,0,0],S=e.textureViews[0],T=S.getTexture().getScale(),w=S.getTexture().getNumberOfComponents();for(let x=0;x<w;x++){let E=s.getProperty().getColorWindow(),O=s.getProperty().getColorLevel();const M=s.getProperty().getRGBTransferFunction(0);if(M){const D=M.getRange();E=D[1]-D[0],O=.5*(D[1]+D[0])}b[x]=T/E,C[x]=-O/E+.5}e.UBO.setArray("cScale",b),e.UBO.setArray("cShift",C),e.UBO.sendIfNeeded(e.device)}},t.updateLUTImage=()=>{const a=e.WebGPUImageSlice.getRenderable().getProperty();t.getTextureViews()[0].getTexture().getNumberOfComponents();const o=1,i=r7(a,a.getRGBTransferFunction,o);if(e.colorTextureString!==i){e.numRows=o;const l=new Uint8ClampedArray(e.numRows*2*e.rowLength*4);let c=a.getRGBTransferFunction();if(c){const u=new Float32Array(e.rowLength*3);for(let f=0;f<o;f++){c=a.getRGBTransferFunction(f);const d=c.getRange();c.getTable(d[0],d[1],e.rowLength,u,1);for(let p=0;p<e.rowLength;p++){const h=f*e.rowLength*8+p*4;l[h]=255*u[p*3],l[h+1]=255*u[p*3+1],l[h+2]=255*u[p*3+2],l[h+3]=255;for(let g=0;g<4;g++)l[h+e.rowLength*4+g]=l[h+g]}}}else for(let u=0;u<e.rowLength;++u){const f=255*u/(e.rowLength-1);l[u*4]=f,l[u*4+1]=f,l[u*4+2]=f,l[u*4+3]=255;for(let d=0;d<4;d++)l[u*4+e.rowLength*4+d]=l[u*4+d]}{const u={nativeArray:l,width:e.rowLength,height:e.numRows*2,depth:1,format:"rgba8unorm"},d=e.device.getTextureManager().getTexture(u).createView("tfunTexture");e.textureViews[1]=d}e.colorTextureString=i}};const n=t.updateBuffers;t.updateBuffers=()=>{n();const a=e.device.getTextureManager().getTextureForImageData(e.currentInput),s=e.textureViews;if(!s[0]||s[0].getTexture()!==a){const l=a.createView("imgTexture");s[0]=l}t.updateLUTImage(),t.updateUBO();const i=e.WebGPUImageSlice.getRenderable().getProperty().getInterpolationType()===il.NEAREST?"nearest":"linear";(!e.clampSampler||i!==e.clampSampler.getOptions().minFilter)&&(e.clampSampler=fv.newInstance({label:"clampSampler"}),e.clampSampler.create(e.device,{minFilter:i,magFilter:i}),e.additionalBindables=[e.clampSampler])};const r=t.getShaderReplacements();t.replaceShaderPosition=(a,s,o)=>{const i=s.getShaderDescription("vertex");i.addBuiltinOutput("vec4<f32>","@builtin(position) Position");let l=i.getCode();const c=["var pos: vec4<f32> = mapperUBO.Origin +","   (vertexBC.x * 0.5 + 0.5) * mapperUBO.Axis1 + (vertexBC.y * 0.5 + 0.5) * mapperUBO.Axis2;","pos.w = 1.0;"];e.dimensions===2?c.push("var tcoord : vec2<f32> = (mapperUBO.SCTCMatrix * pos).xy;"):c.push("var tcoord : vec3<f32> = (mapperUBO.SCTCMatrix * pos).xyz;"),c.push("output.tcoordVS = tcoord;","output.Position = rendererUBO.SCPCMatrix * pos;"),l=St.substitute(l,"//VTK::Position::Impl",c).result,i.setCode(l)},r.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderTCoord=(a,s,o)=>{const i=s.getShaderDescription("vertex");e.dimensions===2?i.addOutput("vec2<f32>","tcoordVS"):i.addOutput("vec3<f32>","tcoordVS")},r.set("replaceShaderTCoord",t.replaceShaderTCoord),t.replaceShaderImage=(a,s,o)=>{const i=s.getShaderDescription("fragment");let l=i.getCode();e.dimensions===3?l=St.substitute(l,"//VTK::Image::Sample",["    var computedColor: vec4<f32> =","      textureSampleLevel(imgTexture, clampSampler, input.tcoordVS, 0.0);","//VTK::Image::Sample"]).result:l=St.substitute(l,"//VTK::Image::Sample",["    var computedColor: vec4<f32> =","      textureSampleLevel(imgTexture, clampSampler, input.tcoordVS, 0.0);","//VTK::Image::Sample"]).result,l=St.substitute(l,"//VTK::Image::Sample",["    var coord: vec2<f32> =","      vec2<f32>(computedColor.r * mapperUBO.cScale.r + mapperUBO.cShift.r, 0.5);","    computedColor = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);"]).result,i.setCode(l)},r.set("replaceShaderImage",t.replaceShaderImage)}const s7={rowLength:1024};function o7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,s7,n),Sl.extend(t,e,n),t.setFragmentShaderTemplate(n7),e.UBO=ei.newInstance({label:"mapperUBO"}),e.UBO.addEntry("SCTCMatrix","mat4x4<f32>"),e.UBO.addEntry("Origin","vec4<f32>"),e.UBO.addEntry("Axis2","vec4<f32>"),e.UBO.addEntry("Axis1","vec4<f32>"),e.UBO.addEntry("cScale","vec4<f32>"),e.UBO.addEntry("cShift","vec4<f32>"),e.lutBuildTime={},dn(e.lutBuildTime,{mtime:0}),e.imagemat=ct(new Float64Array(16)),e.imagematinv=ct(new Float64Array(16)),e.VBOBuildTime={},dn(e.VBOBuildTime),a7(t,e)}const i7=Ft(o7,"vtkWebGPUImageMapper");zr("vtkImageMapper",i7);function l7(t,e){e.classHierarchy.push("vtkWebGPUImageSlice"),t.buildPass=n=>{if(!(!e.renderable||!e.renderable.getVisibility())&&n){if(!e.renderable)return;e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes()}},t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children.forEach(r=>{r.traverse(n)}),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children.forEach(r=>{r.traverse(n)}),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.getBufferShift=n=>(t.getKeyMatrices(n),e.bufferShift),t.getKeyMatrices=n=>{if(Math.max(e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.renderable.computeMatrix();const r=e.renderable.getMatrix(),a=n.getStabilizedCenterByReference();e.bufferShift[0]=r[3]-a[0],e.bufferShift[1]=r[7]-a[1],e.bufferShift[2]=r[11]-a[2],$t(e.keyMatrices.bcwc,r),e.renderable.getIsIdentity()?ct(e.keyMatrices.normalMatrix):(Un(e.keyMatrices.normalMatrix,e.keyMatrices.bcwc),e.keyMatrices.normalMatrix[3]=0,e.keyMatrices.normalMatrix[7]=0,e.keyMatrices.normalMatrix[11]=0,An(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),$t(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),Rn(e.keyMatrices.bcwc,e.keyMatrices.bcwc,[-e.bufferShift[0],-e.bufferShift[1],-e.bufferShift[2]]),Rn(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-a[0],-a[1],-a[2]]),e.keyMatricesTime.modified()}return e.keyMatrices}}const c7={bufferShift:void 0,keyMatrixTime:null,keyMatrices:null,propID:void 0};function u7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,c7,n),gn.extend(t,e,n),e.keyMatricesTime={},dn(e.keyMatricesTime,{mtime:0}),e.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},e.keyMatrixTime={},dn(e.keyMatrixTime,{mtime:0}),e.keyMatrices={mcwc:ct(new Float64Array(16))},e.bufferShift=[0,0,0,0],wr(t,e,["propID","keyMatricesTime"]),l7(t,e)}const f7=Ft(u7,"vtkWebGPUImageSlice");zr("vtkImageSlice",f7);function d7(t,e){e.classHierarchy.push("vtkWebGPUVolume"),t.buildPass=a=>{!e.renderable||!e.renderable.getVisibility()||a&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),e.renderable.getMapper().update())},t.queryPass=(a,s)=>{if(a){if(!e.renderable||!e.renderable.getVisibility())return;const o=e.renderable.getMapper().getBounds();if(!o||o.length!==6||o[0]>o[1])return;s.addVolume(t)}};const n=new Float64Array(3),r=new Float64Array(3);t.getBoundingCubePoints=(a,s)=>{const o=e.renderable.getMapper().getInputData();if(!o)return;const i=o.getExtent(),l=e.renderable.getMatrix();let c=0;for(let u=4;u<6;u++){n[2]=i[u];for(let f=2;f<4;f++){n[1]=i[f];for(let d=0;d<2;d++){n[0]=i[d],o.indexToWorld(n,r);let p=s+c*3;a[p++]=l[0]*r[0]+l[1]*r[1]+l[2]*r[2]+l[3],a[p++]=l[4]*r[0]+l[5]*r[1]+l[6]*r[2]+l[7],a[p++]=l[8]*r[0]+l[9]*r[1]+l[10]*r[2]+l[11],c++}}}},t.getKeyMatrices=a=>{if(Math.max(e.renderable.getMTime(),a.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.renderable.computeMatrix();const s=e.renderable.getMatrix(),o=a.getStabilizedCenterByReference();$t(e.keyMatrices.bcwc,s),Rn(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-o[0],-o[1],-o[2]]),e.keyMatricesTime.modified()}return e.keyMatrices}}const p7={propID:void 0,keyMatricesTime:null};function g7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,p7,n),gn.extend(t,e,n),e.keyMatricesTime={},A.obj(e.keyMatricesTime,{mtime:0}),e.keyMatrices={bcwc:new Float64Array(16),bcsc:new Float64Array(16)},A.get(t,e,["propID","keyMatricesTime"]),d7(t,e)}const h7=A.newInstance(g7,"vtkWebGPUVolume");zr("vtkVolume",h7);function v7(t,e){e.classHierarchy.push("vtkWebGPUPixelSpaceCallbackMapper"),t.opaquePass=(n,r)=>{e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent();const a=e.WebGPURenderer.getAspectRatio(),s=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,o=e.WebGPURenderer.getTiledSizeAndOrigin(),i=null;e.renderable.getUseZValues(),e.renderable.invokeCallback(e.renderable.getInputData(),s,a,o,i)}}const y7={};function m7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,y7,n),gn.extend(t,e,n),v7(t,e)}const C7=A.newInstance(m7,"vtkWebGPUPixelSpaceCallbackMapper");zr("vtkPixelSpaceCallbackMapper",C7);const{BufferUsage:D0}=Ls,{vtkErrorMacro:S7}=nr,b7=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::Color::Dec

//VTK::IOStructs::Dec

@vertex
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : vertexOutput;

  var vertexVC: vec4<f32> = rendererUBO.SCVCMatrix * mapperUBO.BCSCMatrix * vec4<f32>(vertexBC.xyz, 1.0);

  //VTK::Color::Impl

  // compute the projected vertex position
  output.centerVC = vertexVC.xyz;
  output.radiusVC = length(offsetMC)*0.5;

  // make the triangle face the camera
  if (rendererUBO.cameraParallel == 0u)
    {
    var dir: vec3<f32> = normalize(-vertexVC.xyz);
    var base2: vec3<f32> = normalize(cross(dir,vec3<f32>(1.0,0.0,0.0)));
    var base1: vec3<f32> = cross(base2,dir);
    dir = vertexVC.xyz + offsetMC.x*base1 + offsetMC.y*base2;
    vertexVC = vec4<f32>(dir, 1.0);
    }
  else
    {
    // add in the offset
    var tmp2: vec2<f32> = vertexVC.xy + offsetMC;
    vertexVC = vec4<f32>(tmp2, vertexVC.zw);
    }

  output.vertexVC = vec4<f32>(vertexVC.xyz, 0.0);

  //VTK::Position::Impl

  return output;
}
`;function w7(t,e){e.classHierarchy.push("vtkWebGPUSphereMapper");const n=t.buildPass;t.buildPass=r=>{if(r){e.renderable.getStatic()||e.renderable.update();const a=e.renderable.getInputData();t.setCellArray(a.getVerts()),t.setCurrentInput(a)}n(r)},t.replaceShaderNormal=(r,a,s)=>{const o=a.getShaderDescription("vertex");o.hasOutput("vertexVC")||o.addOutput("vec4<f32>","vertexVC"),o.addOutput("vec3<f32>","centerVC"),o.addOutput("f32","radiusVC");const i=a.getShaderDescription("fragment");i.addBuiltinOutput("f32","@builtin(frag_depth) fragDepth");const l=`
    // compute the eye position and unit direction
    var vertexVC: vec4<f32>;
    var EyePos: vec3<f32>;
    var EyeDir: vec3<f32>;
    var invertedDepth: f32 = 1.0;
    if (rendererUBO.cameraParallel != 0u) {
      EyePos = vec3<f32>(input.vertexVC.x, input.vertexVC.y, input.vertexVC.z + 3.0*input.radiusVC);
      EyeDir = vec3<f32>(0.0, 0.0, -1.0);
    }
    else {
      EyeDir = input.vertexVC.xyz;
      EyePos = vec3<f32>(0.0,0.0,0.0);
      var lengthED: f32 = length(EyeDir);
      EyeDir = normalize(EyeDir);
      // we adjust the EyePos to be closer if it is too far away
      // to prevent floating point precision noise
      if (lengthED > input.radiusVC*3.0) {
        EyePos = input.vertexVC.xyz - EyeDir*3.0*input.radiusVC;
      }
    }

    // translate to Sphere center
    EyePos = EyePos - input.centerVC;
    // scale to radius 1.0
    EyePos = EyePos * (1.0 / input.radiusVC);
    // find the intersection
    var b: f32 = 2.0*dot(EyePos,EyeDir);
    var c: f32 = dot(EyePos,EyePos) - 1.0;
    var d: f32 = b*b - 4.0*c;
    var normal: vec3<f32> = vec3<f32>(0.0,0.0,1.0);
    if (d < 0.0) { discard; }
    else {
      var t: f32 = (-b - invertedDepth*sqrt(d))*0.5;

      // compute the normal, for unit sphere this is just
      // the intersection point
      normal = invertedDepth*normalize(EyePos + t*EyeDir);
      // compute the intersection point in VC
      vertexVC = vec4<f32>(normal * input.radiusVC + input.centerVC, 1.0);
    }
    // compute the pixel's depth
    var pos: vec4<f32> = rendererUBO.VCPCMatrix * vertexVC;
    output.fragDepth = pos.z / pos.w;
    `;let c=i.getCode();c=St.substitute(c,"//VTK::Normal::Impl",[l]).result,i.setCode(c)},t.replaceShaderPosition=(r,a,s)=>{const o=a.getShaderDescription("vertex");o.addBuiltinOutput("vec4<f32>","@builtin(position) Position");let i=o.getCode();i=St.substitute(i,"//VTK::Position::Impl",["  output.Position = rendererUBO.VCPCMatrix*vertexVC;"]).result,o.setCode(i)},t.computePipelineHash=()=>{e.pipelineHash="spm",e.vertexInput.hasAttribute("colorVI")&&(e.pipelineHash+="c"),e.pipelineHash+=e.renderEncoder.getPipelineHash()},t.updateBuffers=()=>{const r=e.currentInput;e.renderable.mapScalars(r,1);const a=r.getPoints(),s=a.getNumberOfPoints(),o=a.getData();t.setNumberOfInstances(1),t.setNumberOfVertices(3*s);const i=e.vertexInput;let l=`spm${a.getMTime()}float32x3`;if(!e.device.getBufferManager().hasBuffer(l)){const p={hash:l,usage:D0.RawVertex,format:"float32x3"},h=new Float32Array(3*s*3);let g=0,y=0;for(let b=0;b<s;++b)g=b*3,h[y++]=o[g],h[y++]=o[g+1],h[y++]=o[g+2],h[y++]=o[g],h[y++]=o[g+1],h[y++]=o[g+2],h[y++]=o[g],h[y++]=o[g+1],h[y++]=o[g+2];p.nativeArray=h;const m=e.device.getBufferManager().getBuffer(p);i.addBuffer(m,["vertexBC"])}const c=r.getPointData();let u=null;e.renderable.getScaleArray()!=null&&c.hasArray(e.renderable.getScaleArray())&&(u=c.getArray(e.renderable.getScaleArray()).getData());const f=e.renderable.getRadius();if(u||f!==e._lastRadius){if(l=`spm${u?c.getArray(e.renderable.getScaleArray()).getMTime():f}float32x2`,!e.device.getBufferManager().hasBuffer(l)){const p={hash:l,usage:D0.RawVertex,format:"float32x2"},h=new Float32Array(3*s*2),g=Math.cos(xn(30));let y=0;for(let b=0;b<s;++b){let C=e.renderable.getRadius();u&&(C=u[b]*e.renderable.getScaleFactor()),h[y++]=-2*C*g,h[y++]=-C,h[y++]=2*C*g,h[y++]=-C,h[y++]=0,h[y++]=2*C}p.nativeArray=h;const m=e.device.getBufferManager().getBuffer(p);i.addBuffer(m,["offsetMC"])}e._lastRadius=f}let d=!1;if(e.renderable.getScalarVisibility()){const p=e.renderable.getColorMapColors();if(p){if(l=`spm${p.getMTime()}unorm8x4`,!e.device.getBufferManager().hasBuffer(l)){const h={hash:l,usage:D0.RawVertex,format:"unorm8x4"},g=p.getNumberOfComponents();g!==4&&S7("this should be 4");const y=new Uint8ClampedArray(3*s*4);let m=0;const b=p.getData();for(let S=0;S<s;++S){const T=S*g;for(let w=0;w<3;w++)y[m++]=b[T],y[m++]=b[T+1],y[m++]=b[T+2],y[m++]=b[T+3]}h.nativeArray=y;const C=e.device.getBufferManager().getBuffer(h);i.addBuffer(C,["colorVI"])}d=!0}}d||i.removeBufferIfPresent("colorVI"),t.setTopology("triangle-list"),t.updateUBO()}}const T7={};function x7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,T7,n),ud.extend(t,e,n),t.setVertexShaderTemplate(b7),w7(t,e);const r=e.shaderReplacements;r.set("replaceShaderPosition",t.replaceShaderPosition),r.set("replaceShaderNormal",t.replaceShaderNormal)}const E7=Ft(x7,"vtkWebGPUSphereMapper");zr("vtkSphereMapper",E7);const{BufferUsage:op}=Ls,{vtkErrorMacro:OT}=nr,k7=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::Color::Dec

//VTK::IOStructs::Dec

@vertex
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var offsetsArray: array<vec3<f32>, 12> = array<vec3<f32>, 12>(
    vec3<f32>(-1.0, -1.0, -1.0),
    vec3<f32>(1.0, -1.0, -1.0),
    vec3<f32>(1.0, -1.0, 1.0),

    vec3<f32>(-1.0, -1.0, -1.0),
    vec3<f32>(1.0, -1.0, 1.0),
    vec3<f32>(-1.0, -1.0, 1.0),

    vec3<f32>(-1.0, -1.0, 1.0),
    vec3<f32>(1.0, -1.0, 1.0),
    vec3<f32>(1.0, 1.0, 1.0),

    vec3<f32>(-1.0, -1.0, 1.0),
    vec3<f32>(1.0, 1.0, 1.0),
    vec3<f32>(-1.0, 1.0, 1.0)
  );

  var output : vertexOutput;

  var vertexVC: vec4<f32> = rendererUBO.SCVCMatrix * mapperUBO.BCSCMatrix * vec4<f32>(vertexBC.xyz, 1.0);

  //VTK::Color::Impl

  // compute the projected vertex position
  output.centerVC = vertexVC.xyz;
  output.radiusVC = radiusMC;
  output.lengthVC = length(orientMC);
  output.orientVC = (rendererUBO.WCVCNormals * vec4<f32>(normalize(orientMC), 0.0)).xyz;

  // make sure it is pointing out of the screen
  if (output.orientVC.z < 0.0)
    {
    output.orientVC = -output.orientVC;
    }

  // make the basis
  var xbase: vec3<f32>;
  var ybase: vec3<f32>;
  var dir: vec3<f32> = vec3<f32>(0.0,0.0,1.0);
  if (rendererUBO.cameraParallel == 0u)
    {
    dir = normalize(-vertexVC.xyz);
    }
  if (abs(dot(dir,output.orientVC)) == 1.0)
    {
    xbase = normalize(cross(vec3<f32>(0.0,1.0,0.0),output.orientVC));
    ybase = cross(xbase,output.orientVC);
    }
  else
    {
    xbase = normalize(cross(output.orientVC,dir));
    ybase = cross(output.orientVC,xbase);
    }


  var vertIdx: u32 = input.vertexIndex % 12u;
  var offsets: vec3<f32> = offsetsArray[vertIdx];

  vertexVC = vec4<f32>(vertexVC.xyz +
    output.radiusVC * offsets.x * xbase +
    output.radiusVC * offsets.y * ybase +
    0.5 * output.lengthVC * offsets.z * output.orientVC, 1.0);

  output.vertexVC = vertexVC;

  //VTK::Position::Impl

  return output;
}
`;function O7(t,e){e.classHierarchy.push("vtkWebGPUStickMapper");const n=t.buildPass;t.buildPass=r=>{if(r){e.renderable.getStatic()||e.renderable.update();const a=e.renderable.getInputData();t.setCellArray(a.getVerts()),t.setCurrentInput(a)}n(r)},t.replaceShaderNormal=(r,a,s)=>{const o=a.getShaderDescription("vertex");o.hasOutput("vertexVC")||o.addOutput("vec4<f32>","vertexVC"),o.addOutput("vec3<f32>","centerVC"),o.addOutput("vec3<f32>","orientVC"),o.addOutput("f32","radiusVC"),o.addOutput("f32","lengthVC"),o.addBuiltinInput("u32","@builtin(vertex_index) vertexIndex");const i=a.getShaderDescription("fragment");i.addBuiltinOutput("f32","@builtin(frag_depth) fragDepth");const l=`
    // compute the eye position and unit direction
    var vertexVC: vec4<f32>;
    var EyePos: vec3<f32>;
    var EyeDir: vec3<f32>;

    if (rendererUBO.cameraParallel != 0u)
    {
      EyePos = vec3<f32>(input.vertexVC.x, input.vertexVC.y, input.vertexVC.z + 3.0*input.radiusVC);
      EyeDir = vec3<f32>(0.0, 0.0, -1.0);
    }
    else
    {
      EyeDir = input.vertexVC.xyz;
      EyePos = vec3<f32>(0.0,0.0,0.0);
      var lengthED: f32 = length(EyeDir);
      EyeDir = normalize(EyeDir);
      // we adjust the EyePos to be closer if it is too far away
      // to prevent floating point precision noise
      if (lengthED > input.radiusVC*3.0)
      {
        EyePos = input.vertexVC.xyz - EyeDir*3.0*input.radiusVC;
      }
    }
    // translate to Sphere center
    EyePos = EyePos - input.centerVC;

    // rotate to new basis
    // base1, base2, orientVC
    var base1: vec3<f32>;
    if (abs(input.orientVC.z) < 0.99)
    {
      base1 = normalize(cross(input.orientVC,vec3<f32>(0.0,0.0,1.0)));
    }
    else
    {
      base1 = normalize(cross(input.orientVC,vec3<f32>(0.0,1.0,0.0)));
    }
    var base2: vec3<f32> = cross(input.orientVC,base1);
    EyePos = vec3<f32>(dot(EyePos,base1),dot(EyePos,base2),dot(EyePos,input.orientVC));
    EyeDir = vec3<f32>(dot(EyeDir,base1),dot(EyeDir,base2),dot(EyeDir,input.orientVC));

    // scale to radius 1.0
    EyePos = EyePos * (1.0 / input.radiusVC);

    // find the intersection
    var a: f32 = EyeDir.x*EyeDir.x + EyeDir.y*EyeDir.y;
    var b: f32 = 2.0*(EyePos.x*EyeDir.x + EyePos.y*EyeDir.y);
    var c: f32 = EyePos.x*EyePos.x + EyePos.y*EyePos.y - 1.0;
    var d: f32 = b*b - 4.0*a*c;
    var normal: vec3<f32> = vec3<f32>(0.0,0.0,1.0);
    if (d < 0.0) { discard; }
    else
    {
      var t: f32 = (-b - sqrt(d))*(0.5 / a);
      var tz: f32 = EyePos.z + t*EyeDir.z;
      var iPoint: vec3<f32> = EyePos + t*EyeDir;
      if (abs(iPoint.z)*input.radiusVC > input.lengthVC*0.5)
      {
        // test for end cap
        var t2: f32 = (-b + sqrt(d))*(0.5 / a);
        var tz2: f32 = EyePos.z + t2*EyeDir.z;
        if (tz2*input.radiusVC > input.lengthVC*0.5 || tz*input.radiusVC < -0.5*input.lengthVC) { discard; }
        else
        {
          normal = input.orientVC;
          var t3: f32 = (input.lengthVC*0.5/input.radiusVC - EyePos.z)/EyeDir.z;
          iPoint = EyePos + t3*EyeDir;
          vertexVC = vec4<f32>(input.radiusVC*(iPoint.x*base1 + iPoint.y*base2 + iPoint.z*input.orientVC) + input.centerVC, 1.0);
        }
      }
      else
      {
        // The normal is the iPoint.xy rotated back into VC
        normal = iPoint.x*base1 + iPoint.y*base2;
        // rescale rerotate and translate
        vertexVC = vec4<f32>(input.radiusVC*(normal + iPoint.z*input.orientVC) + input.centerVC, 1.0);
      }
    }
    // compute the pixel's depth
    var pos: vec4<f32> = rendererUBO.VCPCMatrix * vertexVC;
    output.fragDepth = pos.z / pos.w;
  `;let c=i.getCode();c=St.substitute(c,"//VTK::Normal::Impl",[l]).result,i.setCode(c)},t.replaceShaderPosition=(r,a,s)=>{const o=a.getShaderDescription("vertex");o.addBuiltinOutput("vec4<f32>","@builtin(position) Position");let i=o.getCode();i=St.substitute(i,"//VTK::Position::Impl",["  output.Position = rendererUBO.VCPCMatrix*vertexVC;"]).result,o.setCode(i)},t.computePipelineHash=()=>{e.pipelineHash="stm",e.vertexInput.hasAttribute("colorVI")&&(e.pipelineHash+="c"),e.pipelineHash+=e.renderEncoder.getPipelineHash()},t.updateBuffers=()=>{const r=e.currentInput;e.renderable.mapScalars(r,1);const a=e.device,s=r.getPoints(),o=r.getPointData(),i=s.getNumberOfPoints(),l=s.getData();t.setNumberOfInstances(i),t.setNumberOfVertices(12);const c=e.vertexInput;let u=`stm${s.getMTime()}float32x3`;if(!a.getBufferManager().hasBuffer(u)){const g={hash:u,usage:op.RawVertex,format:"float32x3"},y=new Float32Array(i*3);let m=0,b=0;for(let S=0;S<i;++S)m=S*3,y[b++]=l[m],y[b++]=l[m+1],y[b++]=l[m+2];g.nativeArray=y;const C=a.getBufferManager().getBuffer(g);c.addBuffer(C,["vertexBC"],"instance")}let f=null;e.renderable.getScaleArray()!=null&&o.hasArray(e.renderable.getScaleArray())&&(f=o.getArray(e.renderable.getScaleArray()).getData());const d=e.renderable.getRadius();if(f||d!==e._lastRadius){if(u=`stm${f?o.getArray(e.renderable.getScaleArray()).getMTime():d}float32`,!a.getBufferManager().hasBuffer(u)){const g={hash:u,usage:op.RawVertex,format:"float32"},y=new Float32Array(i);let m=0;for(let C=0;C<i;++C){let S=e.renderable.getRadius();f&&(S=f[C*2+1]),y[m++]=S}g.nativeArray=y;const b=a.getBufferManager().getBuffer(g);c.addBuffer(b,["radiusMC"],"instance")}e._lastRadius=d}let p=null;if(e.renderable.getOrientationArray()!=null&&o.hasArray(e.renderable.getOrientationArray())?p=o.getArray(e.renderable.getOrientationArray()).getData():OT([`Error setting orientationArray.
`,"You have to specify the stick orientation"]),u=`stm${o.getArray(e.renderable.getOrientationArray()).getMTime()}float32x3`,!a.getBufferManager().hasBuffer(u)){const g={hash:u,usage:op.RawVertex,format:"float32x3"},y=new Float32Array(i*3);let m=0,b=0;for(let S=0;S<i;++S){m=S*3;let T=e.renderable.getLength();f&&(T=f[S*2]),y[b++]=p[m]*T,y[b++]=p[m+1]*T,y[b++]=p[m+2]*T}g.nativeArray=y;const C=a.getBufferManager().getBuffer(g);c.addBuffer(C,["orientMC"],"instance")}let h=!1;if(e.renderable.getScalarVisibility()){const g=e.renderable.getColorMapColors();if(g){if(u=`stm${g.getMTime()}unorm8x4`,!a.getBufferManager().hasBuffer(u)){const y={usage:op.RawVertex,format:"unorm8x4"},m=g.getNumberOfComponents();m!==4&&OT("this should be 4");const b=new Uint8ClampedArray(i*4);let C=0;const S=g.getData();for(let w=0;w<i;++w){const x=w*m;b[C++]=S[x],b[C++]=S[x+1],b[C++]=S[x+2],b[C++]=S[x+3]}y.nativeArray=b;const T=a.getBufferManager().getBuffer(y);c.addBuffer(T,["colorVI"],"instance")}h=!0}}h||c.removeBufferIfPresent("colorVI"),t.setTopology("triangle-list"),t.updateUBO()}}const M7={};function R7(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,M7,n),ud.extend(t,e,n),t.setVertexShaderTemplate(k7),O7(t,e);const r=e.shaderReplacements;r.set("replaceShaderPosition",t.replaceShaderPosition),r.set("replaceShaderNormal",t.replaceShaderNormal)}const _7=Ft(R7,"vtkWebGPUStickMapper");zr("vtkStickMapper",_7);/**
* @vue/shared v3.4.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function DC(t,e){const n=new Set(t.split(","));return e?r=>n.has(r.toLowerCase()):r=>n.has(r)}const _n={},wc=[],zt=()=>{},V7=()=>!1,dv=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),LC=t=>t.startsWith("onUpdate:"),tr=Object.assign,NC=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},D7=Object.prototype.hasOwnProperty,Et=(t,e)=>D7.call(t,e),Be=Array.isArray,Tc=t=>fd(t)==="[object Map]",pv=t=>fd(t)==="[object Set]",bl=t=>fd(t)==="[object Date]",Je=t=>typeof t=="function",tt=t=>typeof t=="string",oi=t=>typeof t=="symbol",pt=t=>t!==null&&typeof t=="object",Tf=t=>(pt(t)||Je(t))&&Je(t.then)&&Je(t.catch),rV=Object.prototype.toString,fd=t=>rV.call(t),tg=t=>fd(t).slice(8,-1),fh=t=>fd(t)==="[object Object]",BC=t=>tt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,tf=DC(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),gv=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},L7=/-(\w)/g,Ma=gv(t=>t.replace(L7,(e,n)=>n?n.toUpperCase():"")),N7=/\B([A-Z])/g,gi=gv(t=>t.replace(N7,"-$1").toLowerCase()),dd=gv(t=>t.charAt(0).toUpperCase()+t.slice(1)),ng=gv(t=>t?`on${dd(t)}`:""),ii=(t,e)=>!Object.is(t,e),rg=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},dh=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},tm=t=>{const e=parseFloat(t);return isNaN(e)?t:e},B7=t=>{const e=tt(t)?Number(t):NaN;return isNaN(e)?t:e};let MT;const aV=()=>MT||(MT=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Pe(t){if(Be(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],a=tt(r)?A7(r):Pe(r);if(a)for(const s in a)e[s]=a[s]}return e}else if(tt(t)||pt(t))return t}const F7=/;(?![^(]*\))/g,$7=/:([^]+)/,U7=/\/\*[^]*?\*\//g;function A7(t){const e={};return t.replace(U7,"").split(F7).forEach(n=>{if(n){const r=n.split($7);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function U(t){let e="";if(tt(t))e=t;else if(Be(t))for(let n=0;n<t.length;n++){const r=U(t[n]);r&&(e+=r+" ")}else if(pt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Za(t){if(!t)return null;let{class:e,style:n}=t;return e&&!tt(e)&&(t.class=U(e)),n&&(t.style=Pe(n)),t}const W7="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",I7=DC(W7);function sV(t){return!!t||t===""}function P7(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Uc(t[r],e[r]);return n}function Uc(t,e){if(t===e)return!0;let n=bl(t),r=bl(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=oi(t),r=oi(e),n||r)return t===e;if(n=Be(t),r=Be(e),n||r)return n&&r?P7(t,e):!1;if(n=pt(t),r=pt(e),n||r){if(!n||!r)return!1;const a=Object.keys(t).length,s=Object.keys(e).length;if(a!==s)return!1;for(const o in t){const i=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(i&&!l||!i&&l||!Uc(t[o],e[o]))return!1}}return String(t)===String(e)}function oV(t,e){return t.findIndex(n=>Uc(n,e))}const Te=t=>tt(t)?t:t==null?"":Be(t)||pt(t)&&(t.toString===rV||!Je(t.toString))?JSON.stringify(t,iV,2):String(t),iV=(t,e)=>e&&e.__v_isRef?iV(t,e.value):Tc(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,a],s)=>(n[L0(r,s)+" =>"]=a,n),{})}:pv(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>L0(n))}:oi(e)?L0(e):pt(e)&&!Be(e)&&!fh(e)?String(e):e,L0=(t,e="")=>{var n;return oi(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let la;class lV{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=la,!e&&la&&(this.index=(la.scopes||(la.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=la;try{return la=this,e()}finally{la=n}}}on(){la=this}off(){la=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0,this._active=!1}}}function G7(t){return new lV(t)}function z7(t,e=la){e&&e.active&&e.effects.push(t)}function cV(){return la}function uV(t){la&&la.cleanups.push(t)}let cl;class FC{constructor(e,n,r,a){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,z7(this,a)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Dl();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(H7(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Ll()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=ti,n=cl;try{return ti=!0,cl=this,this._runnings++,RT(this),this.fn()}finally{_T(this),this._runnings--,cl=n,ti=e}}stop(){var e;this.active&&(RT(this),_T(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function H7(t){return t.value}function RT(t){t._trackId++,t._depsLength=0}function _T(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)fV(t.deps[e],t);t.deps.length=t._depsLength}}function fV(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let ti=!0,nm=0;const dV=[];function Dl(){dV.push(ti),ti=!1}function Ll(){const t=dV.pop();ti=t===void 0?!0:t}function $C(){nm++}function UC(){for(nm--;!nm&&rm.length;)rm.shift()()}function pV(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&fV(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const rm=[];function gV(t,e,n){$C();for(const r of t.keys()){let a;r._dirtyLevel<e&&(a??(a=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(a??(a=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&rm.push(r.scheduler)))}UC()}const hV=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},ph=new WeakMap,ul=Symbol(""),am=Symbol("");function ea(t,e,n){if(ti&&cl){let r=ph.get(t);r||ph.set(t,r=new Map);let a=r.get(n);a||r.set(n,a=hV(()=>r.delete(n))),pV(cl,a)}}function to(t,e,n,r,a,s){const o=ph.get(t);if(!o)return;let i=[];if(e==="clear")i=[...o.values()];else if(n==="length"&&Be(t)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!oi(u)&&u>=l)&&i.push(c)})}else switch(n!==void 0&&i.push(o.get(n)),e){case"add":Be(t)?BC(n)&&i.push(o.get("length")):(i.push(o.get(ul)),Tc(t)&&i.push(o.get(am)));break;case"delete":Be(t)||(i.push(o.get(ul)),Tc(t)&&i.push(o.get(am)));break;case"set":Tc(t)&&i.push(o.get(ul));break}$C();for(const l of i)l&&gV(l,4);UC()}function K7(t,e){var n;return(n=ph.get(t))==null?void 0:n.get(e)}const j7=DC("__proto__,__v_isRef,__isVue"),vV=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(oi)),VT=Y7();function Y7(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Ht(this);for(let s=0,o=this.length;s<o;s++)ea(r,"get",s+"");const a=r[e](...n);return a===-1||a===!1?r[e](...n.map(Ht)):a}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Dl(),$C();const r=Ht(this)[e].apply(this,n);return UC(),Ll(),r}}),t}function q7(t){const e=Ht(this);return ea(e,"has",t),e.hasOwnProperty(t)}class yV{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const a=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!a;if(n==="__v_isReadonly")return a;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(a?s?lY:bV:s?SV:CV).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Be(e);if(!a){if(o&&Et(VT,n))return Reflect.get(VT,n,r);if(n==="hasOwnProperty")return q7}const i=Reflect.get(e,n,r);return(oi(n)?vV.has(n):j7(n))||(a||ea(e,"get",n),s)?i:cn(i)?o&&BC(n)?i:i.value:pt(i)?a?du(i):Dt(i):i}}class mV extends yV{constructor(e=!1){super(!1,e)}set(e,n,r,a){let s=e[n];if(!this._isShallow){const l=Ac(s);if(!gh(r)&&!Ac(r)&&(s=Ht(s),r=Ht(r)),!Be(e)&&cn(s)&&!cn(r))return l?!1:(s.value=r,!0)}const o=Be(e)&&BC(n)?Number(n)<e.length:Et(e,n),i=Reflect.set(e,n,r,a);return e===Ht(a)&&(o?ii(r,s)&&to(e,"set",n,r):to(e,"add",n,r)),i}deleteProperty(e,n){const r=Et(e,n);e[n];const a=Reflect.deleteProperty(e,n);return a&&r&&to(e,"delete",n,void 0),a}has(e,n){const r=Reflect.has(e,n);return(!oi(n)||!vV.has(n))&&ea(e,"has",n),r}ownKeys(e){return ea(e,"iterate",Be(e)?"length":ul),Reflect.ownKeys(e)}}class X7 extends yV{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Z7=new mV,J7=new X7,Q7=new mV(!0),AC=t=>t,hv=t=>Reflect.getPrototypeOf(t);function ip(t,e,n=!1,r=!1){t=t.__v_raw;const a=Ht(t),s=Ht(e);n||(ii(e,s)&&ea(a,"get",e),ea(a,"get",s));const{has:o}=hv(a),i=r?AC:n?PC:xf;if(o.call(a,e))return i(t.get(e));if(o.call(a,s))return i(t.get(s));t!==a&&t.get(e)}function lp(t,e=!1){const n=this.__v_raw,r=Ht(n),a=Ht(t);return e||(ii(t,a)&&ea(r,"has",t),ea(r,"has",a)),t===a?n.has(t):n.has(t)||n.has(a)}function cp(t,e=!1){return t=t.__v_raw,!e&&ea(Ht(t),"iterate",ul),Reflect.get(t,"size",t)}function DT(t){t=Ht(t);const e=Ht(this);return hv(e).has.call(e,t)||(e.add(t),to(e,"add",t,t)),this}function LT(t,e){e=Ht(e);const n=Ht(this),{has:r,get:a}=hv(n);let s=r.call(n,t);s||(t=Ht(t),s=r.call(n,t));const o=a.call(n,t);return n.set(t,e),s?ii(e,o)&&to(n,"set",t,e):to(n,"add",t,e),this}function NT(t){const e=Ht(this),{has:n,get:r}=hv(e);let a=n.call(e,t);a||(t=Ht(t),a=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return a&&to(e,"delete",t,void 0),s}function BT(){const t=Ht(this),e=t.size!==0,n=t.clear();return e&&to(t,"clear",void 0,void 0),n}function up(t,e){return function(r,a){const s=this,o=s.__v_raw,i=Ht(o),l=e?AC:t?PC:xf;return!t&&ea(i,"iterate",ul),o.forEach((c,u)=>r.call(a,l(c),l(u),s))}}function fp(t,e,n){return function(...r){const a=this.__v_raw,s=Ht(a),o=Tc(s),i=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=a[t](...r),u=n?AC:e?PC:xf;return!e&&ea(s,"iterate",l?am:ul),{next(){const{value:f,done:d}=c.next();return d?{value:f,done:d}:{value:i?[u(f[0]),u(f[1])]:u(f),done:d}},[Symbol.iterator](){return this}}}}function _o(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function eY(){const t={get(s){return ip(this,s)},get size(){return cp(this)},has:lp,add:DT,set:LT,delete:NT,clear:BT,forEach:up(!1,!1)},e={get(s){return ip(this,s,!1,!0)},get size(){return cp(this)},has:lp,add:DT,set:LT,delete:NT,clear:BT,forEach:up(!1,!0)},n={get(s){return ip(this,s,!0)},get size(){return cp(this,!0)},has(s){return lp.call(this,s,!0)},add:_o("add"),set:_o("set"),delete:_o("delete"),clear:_o("clear"),forEach:up(!0,!1)},r={get(s){return ip(this,s,!0,!0)},get size(){return cp(this,!0)},has(s){return lp.call(this,s,!0)},add:_o("add"),set:_o("set"),delete:_o("delete"),clear:_o("clear"),forEach:up(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=fp(s,!1,!1),n[s]=fp(s,!0,!1),e[s]=fp(s,!1,!0),r[s]=fp(s,!0,!0)}),[t,n,e,r]}const[tY,nY,rY,aY]=eY();function WC(t,e){const n=e?t?aY:rY:t?nY:tY;return(r,a,s)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?r:Reflect.get(Et(n,a)&&a in r?n:r,a,s)}const sY={get:WC(!1,!1)},oY={get:WC(!1,!0)},iY={get:WC(!0,!1)},CV=new WeakMap,SV=new WeakMap,bV=new WeakMap,lY=new WeakMap;function cY(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function uY(t){return t.__v_skip||!Object.isExtensible(t)?0:cY(tg(t))}function Dt(t){return Ac(t)?t:IC(t,!1,Z7,sY,CV)}function wV(t){return IC(t,!1,Q7,oY,SV)}function du(t){return IC(t,!0,J7,iY,bV)}function IC(t,e,n,r,a){if(!pt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=a.get(t);if(s)return s;const o=uY(t);if(o===0)return t;const i=new Proxy(t,o===2?r:n);return a.set(t,i),i}function xc(t){return Ac(t)?xc(t.__v_raw):!!(t&&t.__v_isReactive)}function Ac(t){return!!(t&&t.__v_isReadonly)}function gh(t){return!!(t&&t.__v_isShallow)}function TV(t){return xc(t)||Ac(t)}function Ht(t){const e=t&&t.__v_raw;return e?Ht(e):t}function fl(t){return Object.isExtensible(t)&&dh(t,"__v_skip",!0),t}const xf=t=>pt(t)?Dt(t):t,PC=t=>pt(t)?du(t):t;class xV{constructor(e,n,r,a){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new FC(()=>e(this._value),()=>ag(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=r}get value(){const e=Ht(this);return(!e._cacheable||e.effect.dirty)&&ii(e._value,e._value=e.effect.run())&&ag(e,4),kV(e),e.effect._dirtyLevel>=2&&ag(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function EV(t,e,n=!1){let r,a;const s=Je(t);return s?(r=t,a=zt):(r=t.get,a=t.set),new xV(r,a,s||!a,n)}function kV(t){var e;ti&&cl&&(t=Ht(t),pV(cl,(e=t.dep)!=null?e:t.dep=hV(()=>t.dep=void 0,t instanceof xV?t:void 0)))}function ag(t,e=4,n){t=Ht(t);const r=t.dep;r&&gV(r,e)}function cn(t){return!!(t&&t.__v_isRef===!0)}function P(t){return OV(t,!1)}function on(t){return OV(t,!0)}function OV(t,e){return cn(t)?t:new fY(t,e)}class fY{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ht(e),this._value=n?e:xf(e)}get value(){return kV(this),this._value}set value(e){const n=this.__v_isShallow||gh(e)||Ac(e);e=n?e:Ht(e),ii(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:xf(e),ag(this,4))}}function v(t){return cn(t)?t.value:t}const dY={get:(t,e,n)=>v(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const a=t[e];return cn(a)&&!cn(n)?(a.value=n,!0):Reflect.set(t,e,n,r)}};function MV(t){return xc(t)?t:new Proxy(t,dY)}function hr(t){const e=Be(t)?new Array(t.length):{};for(const n in t)e[n]=RV(t,n);return e}class pY{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return K7(Ht(this._object),this._key)}}class gY{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function tn(t,e,n){return cn(t)?t:Je(t)?new gY(t):pt(t)&&arguments.length>1?RV(t,e,n):P(t)}function RV(t,e,n){const r=t[e];return cn(r)?r:new pY(t,e,n)}/**
* @vue/runtime-core v3.4.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ni(t,e,n,r){try{return r?t(...r):t()}catch(a){vv(a,e,n)}}function xa(t,e,n,r){if(Je(t)){const s=ni(t,e,n,r);return s&&Tf(s)&&s.catch(o=>{vv(o,e,n)}),s}const a=[];for(let s=0;s<t.length;s++)a.push(xa(t[s],e,n,r));return a}function vv(t,e,n,r=!0){const a=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,i=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,i)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){ni(l,null,10,[t,o,i]);return}}hY(t,n,a,r)}function hY(t,e,n,r=!0){console.error(t)}let Ef=!1,sm=!1;const xr=[];let Cs=0;const Ec=[];let Go=null,Pi=0;const _V=Promise.resolve();let GC=null;function Ye(t){const e=GC||_V;return t?e.then(this?t.bind(this):t):e}function vY(t){let e=Cs+1,n=xr.length;for(;e<n;){const r=e+n>>>1,a=xr[r],s=kf(a);s<t||s===t&&a.pre?e=r+1:n=r}return e}function zC(t){(!xr.length||!xr.includes(t,Ef&&t.allowRecurse?Cs+1:Cs))&&(t.id==null?xr.push(t):xr.splice(vY(t.id),0,t),VV())}function VV(){!Ef&&!sm&&(sm=!0,GC=_V.then(LV))}function yY(t){const e=xr.indexOf(t);e>Cs&&xr.splice(e,1)}function mY(t){Be(t)?Ec.push(...t):(!Go||!Go.includes(t,t.allowRecurse?Pi+1:Pi))&&Ec.push(t),VV()}function FT(t,e,n=Ef?Cs+1:0){for(;n<xr.length;n++){const r=xr[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;xr.splice(n,1),n--,r()}}}function DV(t){if(Ec.length){const e=[...new Set(Ec)].sort((n,r)=>kf(n)-kf(r));if(Ec.length=0,Go){Go.push(...e);return}for(Go=e,Pi=0;Pi<Go.length;Pi++)Go[Pi]();Go=null,Pi=0}}const kf=t=>t.id==null?1/0:t.id,CY=(t,e)=>{const n=kf(t)-kf(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function LV(t){sm=!1,Ef=!0,xr.sort(CY);try{for(Cs=0;Cs<xr.length;Cs++){const e=xr[Cs];e&&e.active!==!1&&ni(e,null,14)}}finally{Cs=0,xr.length=0,DV(),Ef=!1,GC=null,(xr.length||Ec.length)&&LV()}}function SY(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||_n;let a=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:d}=r[u]||_n;d&&(a=n.map(p=>tt(p)?p.trim():p)),f&&(a=n.map(tm))}let i,l=r[i=ng(e)]||r[i=ng(Ma(e))];!l&&s&&(l=r[i=ng(gi(e))]),l&&xa(l,t,6,a);const c=r[i+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[i])return;t.emitted[i]=!0,xa(c,t,6,a)}}function NV(t,e,n=!1){const r=e.emitsCache,a=r.get(t);if(a!==void 0)return a;const s=t.emits;let o={},i=!1;if(!Je(t)){const l=c=>{const u=NV(c,e,!0);u&&(i=!0,tr(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!i?(pt(t)&&r.set(t,null),null):(Be(s)?s.forEach(l=>o[l]=null):tr(o,s),pt(t)&&r.set(t,o),o)}function yv(t,e){return!t||!dv(e)?!1:(e=e.slice(2).replace(/Once$/,""),Et(t,e[0].toLowerCase()+e.slice(1))||Et(t,gi(e))||Et(t,e))}let sr=null,BV=null;function hh(t){const e=sr;return sr=t,BV=t&&t.type.__scopeId||null,e}function Z(t,e=sr,n){if(!e||t._n)return t;const r=(...a)=>{r._d&&XT(-1);const s=hh(e);let o;try{o=t(...a)}finally{hh(s),r._d&&XT(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function N0(t){const{type:e,vnode:n,proxy:r,withProxy:a,props:s,propsOptions:[o],slots:i,attrs:l,emit:c,render:u,renderCache:f,data:d,setupState:p,ctx:h,inheritAttrs:g}=t;let y,m;const b=hh(t);try{if(n.shapeFlag&4){const S=a||r,T=S;y=ys(u.call(T,S,f,s,p,d,h)),m=l}else{const S=e;y=ys(S.length>1?S(s,{attrs:l,slots:i,emit:c}):S(s,null)),m=e.props?l:bY(l)}}catch(S){of.length=0,vv(S,t,1),y=j(Ar)}let C=y;if(m&&g!==!1){const S=Object.keys(m),{shapeFlag:T}=C;S.length&&T&7&&(o&&S.some(LC)&&(m=wY(m,o)),C=co(C,m))}return n.dirs&&(C=co(C),C.dirs=C.dirs?C.dirs.concat(n.dirs):n.dirs),n.transition&&(C.transition=n.transition),y=C,hh(b),y}const bY=t=>{let e;for(const n in t)(n==="class"||n==="style"||dv(n))&&((e||(e={}))[n]=t[n]);return e},wY=(t,e)=>{const n={};for(const r in t)(!LC(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function TY(t,e,n){const{props:r,children:a,component:s}=t,{props:o,children:i,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?$T(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const d=u[f];if(o[d]!==r[d]&&!yv(c,d))return!0}}}else return(a||i)&&(!i||!i.$stable)?!0:r===o?!1:r?o?$T(r,o,c):!0:!!o;return!1}function $T(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let a=0;a<r.length;a++){const s=r[a];if(e[s]!==t[s]&&!yv(n,s))return!0}return!1}function xY({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const HC="components",EY="directives";function et(t,e){return KC(HC,t,!0,e)||t}const FV=Symbol.for("v-ndc");function dt(t){return tt(t)?KC(HC,t,!1)||t:t||FV}function mv(t){return KC(EY,t)}function KC(t,e,n=!0,r=!1){const a=sr||mr;if(a){const s=a.type;if(t===HC){const i=hq(s,!1);if(i&&(i===e||i===Ma(e)||i===dd(Ma(e))))return s}const o=UT(a[t]||s[t],e)||UT(a.appContext[t],e);return!o&&r?s:o}}function UT(t,e){return t&&(t[e]||t[Ma(e)]||t[dd(Ma(e))])}const kY=t=>t.__isSuspense;function OY(t,e){e&&e.pendingBranch?Be(t)?e.effects.push(...t):e.effects.push(t):mY(t)}const MY=Symbol.for("v-scx"),RY=()=>We(MY);function Sr(t,e){return jC(t,null,e)}const dp={};function pe(t,e,n){return jC(t,e,n)}function jC(t,e,{immediate:n,deep:r,flush:a,once:s,onTrack:o,onTrigger:i}=_n){if(e&&s){const w=e;e=(...x)=>{w(...x),T()}}const l=mr,c=w=>r===!0?w:Xi(w,r===!1?1:void 0);let u,f=!1,d=!1;if(cn(t)?(u=()=>t.value,f=gh(t)):xc(t)?(u=()=>c(t),f=!0):Be(t)?(d=!0,f=t.some(w=>xc(w)||gh(w)),u=()=>t.map(w=>{if(cn(w))return w.value;if(xc(w))return c(w);if(Je(w))return ni(w,l,2)})):Je(t)?e?u=()=>ni(t,l,2):u=()=>(p&&p(),xa(t,l,3,[h])):u=zt,e&&r){const w=u;u=()=>Xi(w())}let p,h=w=>{p=C.onStop=()=>{ni(w,l,4),p=C.onStop=void 0}},g;if(xv)if(h=zt,e?n&&xa(e,l,3,[u(),d?[]:void 0,h]):u(),a==="sync"){const w=RY();g=w.__watcherHandles||(w.__watcherHandles=[])}else return zt;let y=d?new Array(t.length).fill(dp):dp;const m=()=>{if(!(!C.active||!C.dirty))if(e){const w=C.run();(r||f||(d?w.some((x,E)=>ii(x,y[E])):ii(w,y)))&&(p&&p(),xa(e,l,3,[w,y===dp?void 0:d&&y[0]===dp?[]:y,h]),y=w)}else C.run()};m.allowRecurse=!!e;let b;a==="sync"?b=m:a==="post"?b=()=>Yr(m,l&&l.suspense):(m.pre=!0,l&&(m.id=l.uid),b=()=>zC(m));const C=new FC(u,zt,b),S=cV(),T=()=>{C.stop(),S&&NC(S.effects,C)};return e?n?m():y=C.run():a==="post"?Yr(C.run.bind(C),l&&l.suspense):C.run(),g&&g.push(T),T}function _Y(t,e,n){const r=this.proxy,a=tt(t)?t.includes(".")?$V(r,t):()=>r[t]:t.bind(r,r);let s;Je(e)?s=e:(s=e.handler,n=e);const o=pd(this),i=jC(a,s.bind(r),n);return o(),i}function $V(t,e){const n=e.split(".");return()=>{let r=t;for(let a=0;a<n.length&&r;a++)r=r[n[a]];return r}}function Xi(t,e,n=0,r){if(!pt(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(r=r||new Set,r.has(t))return t;if(r.add(t),cn(t))Xi(t.value,e,n,r);else if(Be(t))for(let a=0;a<t.length;a++)Xi(t[a],e,n,r);else if(pv(t)||Tc(t))t.forEach(a=>{Xi(a,e,n,r)});else if(fh(t))for(const a in t)Xi(t[a],e,n,r);return t}function rt(t,e){if(sr===null)return t;const n=Ev(sr)||sr.proxy,r=t.dirs||(t.dirs=[]);for(let a=0;a<e.length;a++){let[s,o,i,l=_n]=e[a];s&&(Je(s)&&(s={mounted:s,updated:s}),s.deep&&Xi(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:i,modifiers:l}))}return t}function Mi(t,e,n,r){const a=t.dirs,s=e&&e.dirs;for(let o=0;o<a.length;o++){const i=a[o];s&&(i.oldValue=s[o].value);let l=i.dir[r];l&&(Dl(),xa(l,n,8,[t.el,i,t,e]),Ll())}}const zo=Symbol("_leaveCb"),pp=Symbol("_enterCb");function UV(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return at(()=>{t.isMounted=!0}),ln(()=>{t.isUnmounting=!0}),t}const ga=[Function,Array],AV={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ga,onEnter:ga,onAfterEnter:ga,onEnterCancelled:ga,onBeforeLeave:ga,onLeave:ga,onAfterLeave:ga,onLeaveCancelled:ga,onBeforeAppear:ga,onAppear:ga,onAfterAppear:ga,onAppearCancelled:ga},VY={name:"BaseTransition",props:AV,setup(t,{slots:e}){const n=ot(),r=UV();return()=>{const a=e.default&&YC(e.default(),!0);if(!a||!a.length)return;let s=a[0];if(a.length>1){for(const d of a)if(d.type!==Ar){s=d;break}}const o=Ht(t),{mode:i}=o;if(r.isLeaving)return B0(s);const l=AT(s);if(!l)return B0(s);const c=Of(l,o,r,n);Mf(l,c);const u=n.subTree,f=u&&AT(u);if(f&&f.type!==Ar&&!Gi(l,f)){const d=Of(f,o,r,n);if(Mf(f,d),i==="out-in")return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},B0(s);i==="in-out"&&l.type!==Ar&&(d.delayLeave=(p,h,g)=>{const y=WV(r,f);y[String(f.key)]=f,p[zo]=()=>{h(),p[zo]=void 0,delete c.delayedLeave},c.delayedLeave=g})}return s}}},DY=VY;function WV(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Of(t,e,n,r){const{appear:a,mode:s,persisted:o=!1,onBeforeEnter:i,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:f,onLeave:d,onAfterLeave:p,onLeaveCancelled:h,onBeforeAppear:g,onAppear:y,onAfterAppear:m,onAppearCancelled:b}=e,C=String(t.key),S=WV(n,t),T=(E,O)=>{E&&xa(E,r,9,O)},w=(E,O)=>{const k=O[1];T(E,O),Be(E)?E.every(M=>M.length<=1)&&k():E.length<=1&&k()},x={mode:s,persisted:o,beforeEnter(E){let O=i;if(!n.isMounted)if(a)O=g||i;else return;E[zo]&&E[zo](!0);const k=S[C];k&&Gi(t,k)&&k.el[zo]&&k.el[zo](),T(O,[E])},enter(E){let O=l,k=c,M=u;if(!n.isMounted)if(a)O=y||l,k=m||c,M=b||u;else return;let D=!1;const I=E[pp]=B=>{D||(D=!0,B?T(M,[E]):T(k,[E]),x.delayedLeave&&x.delayedLeave(),E[pp]=void 0)};O?w(O,[E,I]):I()},leave(E,O){const k=String(t.key);if(E[pp]&&E[pp](!0),n.isUnmounting)return O();T(f,[E]);let M=!1;const D=E[zo]=I=>{M||(M=!0,O(),I?T(h,[E]):T(p,[E]),E[zo]=void 0,S[k]===t&&delete S[k])};S[k]=t,d?w(d,[E,D]):D()},clone(E){return Of(E,e,n,r)}};return x}function B0(t){if(Cv(t))return t=co(t),t.children=null,t}function AT(t){return Cv(t)?t.children?t.children[0]:void 0:t}function Mf(t,e){t.shapeFlag&6&&t.component?Mf(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function YC(t,e=!1,n){let r=[],a=0;for(let s=0;s<t.length;s++){let o=t[s];const i=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===Ue?(o.patchFlag&128&&a++,r=r.concat(YC(o.children,e,i))):(e||o.type!==Ar)&&r.push(i!=null?co(o,{key:i}):o)}if(a>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function q(t,e){return Je(t)?tr({name:t.name},e,{setup:t}):t}const nf=t=>!!t.type.__asyncLoader,Cv=t=>t.type.__isKeepAlive;function LY(t,e){PV(t,"a",e)}function IV(t,e){PV(t,"da",e)}function PV(t,e,n=mr){const r=t.__wdc||(t.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return t()});if(Sv(e,r,n),n){let a=n.parent;for(;a&&a.parent;)Cv(a.parent.vnode)&&NY(r,e,n,a),a=a.parent}}function NY(t,e,n,r){const a=Sv(e,t,r,!0);hi(()=>{NC(r[e],a)},n)}function Sv(t,e,n=mr,r=!1){if(n){const a=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;Dl();const i=pd(n),l=xa(e,n,t,o);return i(),Ll(),l});return r?a.unshift(s):a.push(s),s}}const yo=t=>(e,n=mr)=>(!xv||t==="sp")&&Sv(t,(...r)=>e(...r),n),bv=yo("bm"),at=yo("m"),GV=yo("bu"),mo=yo("u"),ln=yo("bum"),hi=yo("um"),BY=yo("sp"),FY=yo("rtg"),$Y=yo("rtc");function UY(t,e=mr){Sv("ec",t,e)}function gt(t,e,n,r){let a;const s=n&&n[r];if(Be(t)||tt(t)){a=new Array(t.length);for(let o=0,i=t.length;o<i;o++)a[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){a=new Array(t);for(let o=0;o<t;o++)a[o]=e(o+1,o,void 0,s&&s[o])}else if(pt(t))if(t[Symbol.iterator])a=Array.from(t,(o,i)=>e(o,i,void 0,s&&s[i]));else{const o=Object.keys(t);a=new Array(o.length);for(let i=0,l=o.length;i<l;i++){const c=o[i];a[i]=e(t[c],c,i,s&&s[i])}}else a=[];return n&&(n[r]=a),a}function lo(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(Be(r))for(let a=0;a<r.length;a++)t[r[a].name]=r[a].fn;else r&&(t[r.name]=r.key?(...a)=>{const s=r.fn(...a);return s&&(s.key=r.key),s}:r.fn)}return t}function ce(t,e,n={},r,a){if(sr.isCE||sr.parent&&nf(sr.parent)&&sr.parent.isCE)return e!=="default"&&(n.name=e),j("slot",n,r&&r());let s=t[e];s&&s._c&&(s._d=!1),V();const o=s&&zV(s(n)),i=ae(Ue,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!a&&i.scopeId&&(i.slotScopeIds=[i.scopeId+"-s"]),s&&s._c&&(s._d=!0),i}function zV(t){return t.some(e=>yn(e)?!(e.type===Ar||e.type===Ue&&!zV(e.children)):!0)?t:null}function AY(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:ng(r)]=t[r];return n}const om=t=>t?rD(t)?Ev(t)||t.proxy:om(t.parent):null,rf=tr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>om(t.parent),$root:t=>om(t.root),$emit:t=>t.emit,$options:t=>qC(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,zC(t.update)}),$nextTick:t=>t.n||(t.n=Ye.bind(t.proxy)),$watch:t=>_Y.bind(t)}),F0=(t,e)=>t!==_n&&!t.__isScriptSetup&&Et(t,e),WY={get({_:t},e){const{ctx:n,setupState:r,data:a,props:s,accessCache:o,type:i,appContext:l}=t;let c;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return a[e];case 4:return n[e];case 3:return s[e]}else{if(F0(r,e))return o[e]=1,r[e];if(a!==_n&&Et(a,e))return o[e]=2,a[e];if((c=t.propsOptions[0])&&Et(c,e))return o[e]=3,s[e];if(n!==_n&&Et(n,e))return o[e]=4,n[e];im&&(o[e]=0)}}const u=rf[e];let f,d;if(u)return e==="$attrs"&&ea(t,"get",e),u(t);if((f=i.__cssModules)&&(f=f[e]))return f;if(n!==_n&&Et(n,e))return o[e]=4,n[e];if(d=l.config.globalProperties,Et(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:a,ctx:s}=t;return F0(a,e)?(a[e]=n,!0):r!==_n&&Et(r,e)?(r[e]=n,!0):Et(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:a,propsOptions:s}},o){let i;return!!n[o]||t!==_n&&Et(t,o)||F0(e,o)||(i=s[0])&&Et(i,o)||Et(r,o)||Et(rf,o)||Et(a.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Et(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function rr(){return HV().slots}function Nl(){return HV().attrs}function HV(){const t=ot();return t.setupContext||(t.setupContext=sD(t))}function WT(t){return Be(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let im=!0;function IY(t){const e=qC(t),n=t.proxy,r=t.ctx;im=!1,e.beforeCreate&&IT(e.beforeCreate,t,"bc");const{data:a,computed:s,methods:o,watch:i,provide:l,inject:c,created:u,beforeMount:f,mounted:d,beforeUpdate:p,updated:h,activated:g,deactivated:y,beforeDestroy:m,beforeUnmount:b,destroyed:C,unmounted:S,render:T,renderTracked:w,renderTriggered:x,errorCaptured:E,serverPrefetch:O,expose:k,inheritAttrs:M,components:D,directives:I,filters:B}=e;if(c&&PY(c,r,null),o)for(const N in o){const W=o[N];Je(W)&&(r[N]=W.bind(n))}if(a){const N=a.call(n,n);pt(N)&&(t.data=Dt(N))}if(im=!0,s)for(const N in s){const W=s[N],_=Je(W)?W.bind(n,n):Je(W.get)?W.get.bind(n,n):zt,L=!Je(W)&&Je(W.set)?W.set.bind(n):zt,G=R({get:_,set:L});Object.defineProperty(r,N,{enumerable:!0,configurable:!0,get:()=>G.value,set:K=>G.value=K})}if(i)for(const N in i)KV(i[N],r,n,N);if(l){const N=Je(l)?l.call(n):l;Reflect.ownKeys(N).forEach(W=>{bt(W,N[W])})}u&&IT(u,t,"c");function $(N,W){Be(W)?W.forEach(_=>N(_.bind(n))):W&&N(W.bind(n))}if($(bv,f),$(at,d),$(GV,p),$(mo,h),$(LY,g),$(IV,y),$(UY,E),$($Y,w),$(FY,x),$(ln,b),$(hi,S),$(BY,O),Be(k))if(k.length){const N=t.exposed||(t.exposed={});k.forEach(W=>{Object.defineProperty(N,W,{get:()=>n[W],set:_=>n[W]=_})})}else t.exposed||(t.exposed={});T&&t.render===zt&&(t.render=T),M!=null&&(t.inheritAttrs=M),D&&(t.components=D),I&&(t.directives=I)}function PY(t,e,n=zt){Be(t)&&(t=lm(t));for(const r in t){const a=t[r];let s;pt(a)?"default"in a?s=We(a.from||r,a.default,!0):s=We(a.from||r):s=We(a),cn(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function IT(t,e,n){xa(Be(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function KV(t,e,n,r){const a=r.includes(".")?$V(n,r):()=>n[r];if(tt(t)){const s=e[t];Je(s)&&pe(a,s)}else if(Je(t))pe(a,t.bind(n));else if(pt(t))if(Be(t))t.forEach(s=>KV(s,e,n,r));else{const s=Je(t.handler)?t.handler.bind(n):e[t.handler];Je(s)&&pe(a,s,t)}}function qC(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:a,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,i=s.get(e);let l;return i?l=i:!a.length&&!n&&!r?l=e:(l={},a.length&&a.forEach(c=>vh(l,c,o,!0)),vh(l,e,o)),pt(e)&&s.set(e,l),l}function vh(t,e,n,r=!1){const{mixins:a,extends:s}=e;s&&vh(t,s,n,!0),a&&a.forEach(o=>vh(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const i=GY[o]||n&&n[o];t[o]=i?i(t[o],e[o]):e[o]}return t}const GY={data:PT,props:GT,emits:GT,methods:Ku,computed:Ku,beforeCreate:$r,created:$r,beforeMount:$r,mounted:$r,beforeUpdate:$r,updated:$r,beforeDestroy:$r,beforeUnmount:$r,destroyed:$r,unmounted:$r,activated:$r,deactivated:$r,errorCaptured:$r,serverPrefetch:$r,components:Ku,directives:Ku,watch:HY,provide:PT,inject:zY};function PT(t,e){return e?t?function(){return tr(Je(t)?t.call(this,this):t,Je(e)?e.call(this,this):e)}:e:t}function zY(t,e){return Ku(lm(t),lm(e))}function lm(t){if(Be(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function $r(t,e){return t?[...new Set([].concat(t,e))]:e}function Ku(t,e){return t?tr(Object.create(null),t,e):e}function GT(t,e){return t?Be(t)&&Be(e)?[...new Set([...t,...e])]:tr(Object.create(null),WT(t),WT(e??{})):e}function HY(t,e){if(!t)return e;if(!e)return t;const n=tr(Object.create(null),t);for(const r in e)n[r]=$r(t[r],e[r]);return n}function jV(){return{app:null,config:{isNativeTag:V7,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let KY=0;function jY(t,e){return function(r,a=null){Je(r)||(r=tr({},r)),a!=null&&!pt(a)&&(a=null);const s=jV(),o=new WeakSet;let i=!1;const l=s.app={_uid:KY++,_component:r,_props:a,_container:null,_context:s,_instance:null,version:yq,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&Je(c.install)?(o.add(c),c.install(l,...u)):Je(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,f){if(!i){const d=j(r,a);return d.appContext=s,f===!0?f="svg":f===!1&&(f=void 0),u&&e?e(d,c):t(d,c,f),i=!0,l._container=c,c.__vue_app__=l,Ev(d.component)||d.component.proxy}},unmount(){i&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){const u=af;af=l;try{return c()}finally{af=u}}};return l}}let af=null;function bt(t,e){if(mr){let n=mr.provides;const r=mr.parent&&mr.parent.provides;r===n&&(n=mr.provides=Object.create(r)),n[t]=e}}function We(t,e,n=!1){const r=mr||sr;if(r||af){const a=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:af._context.provides;if(a&&t in a)return a[t];if(arguments.length>1)return n&&Je(e)?e.call(r&&r.proxy):e}}function YY(t,e,n,r=!1){const a={},s={};dh(s,wv,1),t.propsDefaults=Object.create(null),YV(t,e,a,s);for(const o in t.propsOptions[0])o in a||(a[o]=void 0);n?t.props=r?a:wV(a):t.type.props?t.props=a:t.props=s,t.attrs=s}function qY(t,e,n,r){const{props:a,attrs:s,vnode:{patchFlag:o}}=t,i=Ht(a),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let d=u[f];if(yv(t.emitsOptions,d))continue;const p=e[d];if(l)if(Et(s,d))p!==s[d]&&(s[d]=p,c=!0);else{const h=Ma(d);a[h]=cm(l,i,h,p,t,!1)}else p!==s[d]&&(s[d]=p,c=!0)}}}else{YV(t,e,a,s)&&(c=!0);let u;for(const f in i)(!e||!Et(e,f)&&((u=gi(f))===f||!Et(e,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(a[f]=cm(l,i,f,void 0,t,!0)):delete a[f]);if(s!==i)for(const f in s)(!e||!Et(e,f))&&(delete s[f],c=!0)}c&&to(t,"set","$attrs")}function YV(t,e,n,r){const[a,s]=t.propsOptions;let o=!1,i;if(e)for(let l in e){if(tf(l))continue;const c=e[l];let u;a&&Et(a,u=Ma(l))?!s||!s.includes(u)?n[u]=c:(i||(i={}))[u]=c:yv(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=Ht(n),c=i||_n;for(let u=0;u<s.length;u++){const f=s[u];n[f]=cm(a,l,f,c[f],t,!Et(c,f))}}return o}function cm(t,e,n,r,a,s){const o=t[n];if(o!=null){const i=Et(o,"default");if(i&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Je(l)){const{propsDefaults:c}=a;if(n in c)r=c[n];else{const u=pd(a);r=c[n]=l.call(null,e),u()}}else r=l}o[0]&&(s&&!i?r=!1:o[1]&&(r===""||r===gi(n))&&(r=!0))}return r}function qV(t,e,n=!1){const r=e.propsCache,a=r.get(t);if(a)return a;const s=t.props,o={},i=[];let l=!1;if(!Je(t)){const u=f=>{l=!0;const[d,p]=qV(f,e,!0);tr(o,d),p&&i.push(...p)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!l)return pt(t)&&r.set(t,wc),wc;if(Be(s))for(let u=0;u<s.length;u++){const f=Ma(s[u]);zT(f)&&(o[f]=_n)}else if(s)for(const u in s){const f=Ma(u);if(zT(f)){const d=s[u],p=o[f]=Be(d)||Je(d)?{type:d}:tr({},d);if(p){const h=jT(Boolean,p.type),g=jT(String,p.type);p[0]=h>-1,p[1]=g<0||h<g,(h>-1||Et(p,"default"))&&i.push(f)}}}const c=[o,i];return pt(t)&&r.set(t,c),c}function zT(t){return t[0]!=="$"&&!tf(t)}function HT(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function KT(t,e){return HT(t)===HT(e)}function jT(t,e){return Be(e)?e.findIndex(n=>KT(n,t)):Je(e)&&KT(e,t)?0:-1}const XV=t=>t[0]==="_"||t==="$stable",XC=t=>Be(t)?t.map(ys):[ys(t)],XY=(t,e,n)=>{if(e._n)return e;const r=Z((...a)=>XC(e(...a)),n);return r._c=!1,r},ZV=(t,e,n)=>{const r=t._ctx;for(const a in t){if(XV(a))continue;const s=t[a];if(Je(s))e[a]=XY(a,s,r);else if(s!=null){const o=XC(s);e[a]=()=>o}}},JV=(t,e)=>{const n=XC(e);t.slots.default=()=>n},ZY=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ht(e),dh(e,"_",n)):ZV(e,t.slots={})}else t.slots={},e&&JV(t,e);dh(t.slots,wv,1)},JY=(t,e,n)=>{const{vnode:r,slots:a}=t;let s=!0,o=_n;if(r.shapeFlag&32){const i=e._;i?n&&i===1?s=!1:(tr(a,e),!n&&i===1&&delete a._):(s=!e.$stable,ZV(e,a)),o=e}else e&&(JV(t,e),o={default:1});if(s)for(const i in a)!XV(i)&&o[i]==null&&delete a[i]};function um(t,e,n,r,a=!1){if(Be(t)){t.forEach((d,p)=>um(d,e&&(Be(e)?e[p]:e),n,r,a));return}if(nf(r)&&!a)return;const s=r.shapeFlag&4?Ev(r.component)||r.component.proxy:r.el,o=a?null:s,{i,r:l}=t,c=e&&e.r,u=i.refs===_n?i.refs={}:i.refs,f=i.setupState;if(c!=null&&c!==l&&(tt(c)?(u[c]=null,Et(f,c)&&(f[c]=null)):cn(c)&&(c.value=null)),Je(l))ni(l,i,12,[o,u]);else{const d=tt(l),p=cn(l);if(d||p){const h=()=>{if(t.f){const g=d?Et(f,l)?f[l]:u[l]:l.value;a?Be(g)&&NC(g,s):Be(g)?g.includes(s)||g.push(s):d?(u[l]=[s],Et(f,l)&&(f[l]=u[l])):(l.value=[s],t.k&&(u[t.k]=l.value))}else d?(u[l]=o,Et(f,l)&&(f[l]=o)):p&&(l.value=o,t.k&&(u[t.k]=o))};o?(h.id=-1,Yr(h,n)):h()}}}const Yr=OY;function QY(t){return eq(t)}function eq(t,e){const n=aV();n.__VUE__=!0;const{insert:r,remove:a,patchProp:s,createElement:o,createText:i,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:d,setScopeId:p=zt,insertStaticContent:h}=t,g=(X,ne,me,Ee=null,de=null,xe=null,ke=void 0,ye=null,_e=!!ne.dynamicChildren)=>{if(X===ne)return;X&&!Gi(X,ne)&&(Ee=ie(X),K(X,de,xe,!0),X=null),ne.patchFlag===-2&&(_e=!1,ne.dynamicChildren=null);const{type:Oe,ref:Fe,shapeFlag:ze}=ne;switch(Oe){case gu:y(X,ne,me,Ee);break;case Ar:m(X,ne,me,Ee);break;case sg:X==null&&b(ne,me,Ee,ke);break;case Ue:D(X,ne,me,Ee,de,xe,ke,ye,_e);break;default:ze&1?T(X,ne,me,Ee,de,xe,ke,ye,_e):ze&6?I(X,ne,me,Ee,de,xe,ke,ye,_e):(ze&64||ze&128)&&Oe.process(X,ne,me,Ee,de,xe,ke,ye,_e,ge)}Fe!=null&&de&&um(Fe,X&&X.ref,xe,ne||X,!ne)},y=(X,ne,me,Ee)=>{if(X==null)r(ne.el=i(ne.children),me,Ee);else{const de=ne.el=X.el;ne.children!==X.children&&c(de,ne.children)}},m=(X,ne,me,Ee)=>{X==null?r(ne.el=l(ne.children||""),me,Ee):ne.el=X.el},b=(X,ne,me,Ee)=>{[X.el,X.anchor]=h(X.children,ne,me,Ee,X.el,X.anchor)},C=({el:X,anchor:ne},me,Ee)=>{let de;for(;X&&X!==ne;)de=d(X),r(X,me,Ee),X=de;r(ne,me,Ee)},S=({el:X,anchor:ne})=>{let me;for(;X&&X!==ne;)me=d(X),a(X),X=me;a(ne)},T=(X,ne,me,Ee,de,xe,ke,ye,_e)=>{ne.type==="svg"?ke="svg":ne.type==="math"&&(ke="mathml"),X==null?w(ne,me,Ee,de,xe,ke,ye,_e):O(X,ne,de,xe,ke,ye,_e)},w=(X,ne,me,Ee,de,xe,ke,ye)=>{let _e,Oe;const{props:Fe,shapeFlag:ze,transition:he,dirs:Ae}=X;if(_e=X.el=o(X.type,xe,Fe&&Fe.is,Fe),ze&8?u(_e,X.children):ze&16&&E(X.children,_e,null,Ee,de,$0(X,xe),ke,ye),Ae&&Mi(X,null,Ee,"created"),x(_e,X,X.scopeId,ke,Ee),Fe){for(const st in Fe)st!=="value"&&!tf(st)&&s(_e,st,null,Fe[st],xe,X.children,Ee,de,se);"value"in Fe&&s(_e,"value",null,Fe.value,xe),(Oe=Fe.onVnodeBeforeMount)&&ds(Oe,Ee,X)}Ae&&Mi(X,null,Ee,"beforeMount");const qe=tq(de,he);qe&&he.beforeEnter(_e),r(_e,ne,me),((Oe=Fe&&Fe.onVnodeMounted)||qe||Ae)&&Yr(()=>{Oe&&ds(Oe,Ee,X),qe&&he.enter(_e),Ae&&Mi(X,null,Ee,"mounted")},de)},x=(X,ne,me,Ee,de)=>{if(me&&p(X,me),Ee)for(let xe=0;xe<Ee.length;xe++)p(X,Ee[xe]);if(de){let xe=de.subTree;if(ne===xe){const ke=de.vnode;x(X,ke,ke.scopeId,ke.slotScopeIds,de.parent)}}},E=(X,ne,me,Ee,de,xe,ke,ye,_e=0)=>{for(let Oe=_e;Oe<X.length;Oe++){const Fe=X[Oe]=ye?Ho(X[Oe]):ys(X[Oe]);g(null,Fe,ne,me,Ee,de,xe,ke,ye)}},O=(X,ne,me,Ee,de,xe,ke)=>{const ye=ne.el=X.el;let{patchFlag:_e,dynamicChildren:Oe,dirs:Fe}=ne;_e|=X.patchFlag&16;const ze=X.props||_n,he=ne.props||_n;let Ae;if(me&&Ri(me,!1),(Ae=he.onVnodeBeforeUpdate)&&ds(Ae,me,ne,X),Fe&&Mi(ne,X,me,"beforeUpdate"),me&&Ri(me,!0),Oe?k(X.dynamicChildren,Oe,ye,me,Ee,$0(ne,de),xe):ke||W(X,ne,ye,null,me,Ee,$0(ne,de),xe,!1),_e>0){if(_e&16)M(ye,ne,ze,he,me,Ee,de);else if(_e&2&&ze.class!==he.class&&s(ye,"class",null,he.class,de),_e&4&&s(ye,"style",ze.style,he.style,de),_e&8){const qe=ne.dynamicProps;for(let st=0;st<qe.length;st++){const vt=qe[st],Ke=ze[vt],fe=he[vt];(fe!==Ke||vt==="value")&&s(ye,vt,Ke,fe,de,X.children,me,Ee,se)}}_e&1&&X.children!==ne.children&&u(ye,ne.children)}else!ke&&Oe==null&&M(ye,ne,ze,he,me,Ee,de);((Ae=he.onVnodeUpdated)||Fe)&&Yr(()=>{Ae&&ds(Ae,me,ne,X),Fe&&Mi(ne,X,me,"updated")},Ee)},k=(X,ne,me,Ee,de,xe,ke)=>{for(let ye=0;ye<ne.length;ye++){const _e=X[ye],Oe=ne[ye],Fe=_e.el&&(_e.type===Ue||!Gi(_e,Oe)||_e.shapeFlag&70)?f(_e.el):me;g(_e,Oe,Fe,null,Ee,de,xe,ke,!0)}},M=(X,ne,me,Ee,de,xe,ke)=>{if(me!==Ee){if(me!==_n)for(const ye in me)!tf(ye)&&!(ye in Ee)&&s(X,ye,me[ye],null,ke,ne.children,de,xe,se);for(const ye in Ee){if(tf(ye))continue;const _e=Ee[ye],Oe=me[ye];_e!==Oe&&ye!=="value"&&s(X,ye,Oe,_e,ke,ne.children,de,xe,se)}"value"in Ee&&s(X,"value",me.value,Ee.value,ke)}},D=(X,ne,me,Ee,de,xe,ke,ye,_e)=>{const Oe=ne.el=X?X.el:i(""),Fe=ne.anchor=X?X.anchor:i("");let{patchFlag:ze,dynamicChildren:he,slotScopeIds:Ae}=ne;Ae&&(ye=ye?ye.concat(Ae):Ae),X==null?(r(Oe,me,Ee),r(Fe,me,Ee),E(ne.children||[],me,Fe,de,xe,ke,ye,_e)):ze>0&&ze&64&&he&&X.dynamicChildren?(k(X.dynamicChildren,he,me,de,xe,ke,ye),(ne.key!=null||de&&ne===de.subTree)&&ZC(X,ne,!0)):W(X,ne,me,Fe,de,xe,ke,ye,_e)},I=(X,ne,me,Ee,de,xe,ke,ye,_e)=>{ne.slotScopeIds=ye,X==null?ne.shapeFlag&512?de.ctx.activate(ne,me,Ee,ke,_e):B(ne,me,Ee,de,xe,ke,_e):F(X,ne,_e)},B=(X,ne,me,Ee,de,xe,ke)=>{const ye=X.component=fq(X,Ee,de);if(Cv(X)&&(ye.ctx.renderer=ge),dq(ye),ye.asyncDep){if(de&&de.registerDep(ye,$),!X.el){const _e=ye.subTree=j(Ar);m(null,_e,ne,me)}}else $(ye,X,ne,me,de,xe,ke)},F=(X,ne,me)=>{const Ee=ne.component=X.component;if(TY(X,ne,me))if(Ee.asyncDep&&!Ee.asyncResolved){N(Ee,ne,me);return}else Ee.next=ne,yY(Ee.update),Ee.effect.dirty=!0,Ee.update();else ne.el=X.el,Ee.vnode=ne},$=(X,ne,me,Ee,de,xe,ke)=>{const ye=()=>{if(X.isMounted){let{next:Fe,bu:ze,u:he,parent:Ae,vnode:qe}=X;{const le=QV(X);if(le){Fe&&(Fe.el=qe.el,N(X,Fe,ke)),le.asyncDep.then(()=>{X.isUnmounted||ye()});return}}let st=Fe,vt;Ri(X,!1),Fe?(Fe.el=qe.el,N(X,Fe,ke)):Fe=qe,ze&&rg(ze),(vt=Fe.props&&Fe.props.onVnodeBeforeUpdate)&&ds(vt,Ae,Fe,qe),Ri(X,!0);const Ke=N0(X),fe=X.subTree;X.subTree=Ke,g(fe,Ke,f(fe.el),ie(fe),X,de,xe),Fe.el=Ke.el,st===null&&xY(X,Ke.el),he&&Yr(he,de),(vt=Fe.props&&Fe.props.onVnodeUpdated)&&Yr(()=>ds(vt,Ae,Fe,qe),de)}else{let Fe;const{el:ze,props:he}=ne,{bm:Ae,m:qe,parent:st}=X,vt=nf(ne);if(Ri(X,!1),Ae&&rg(Ae),!vt&&(Fe=he&&he.onVnodeBeforeMount)&&ds(Fe,st,ne),Ri(X,!0),ze&&De){const Ke=()=>{X.subTree=N0(X),De(ze,X.subTree,X,de,null)};vt?ne.type.__asyncLoader().then(()=>!X.isUnmounted&&Ke()):Ke()}else{const Ke=X.subTree=N0(X);g(null,Ke,me,Ee,X,de,xe),ne.el=Ke.el}if(qe&&Yr(qe,de),!vt&&(Fe=he&&he.onVnodeMounted)){const Ke=ne;Yr(()=>ds(Fe,st,Ke),de)}(ne.shapeFlag&256||st&&nf(st.vnode)&&st.vnode.shapeFlag&256)&&X.a&&Yr(X.a,de),X.isMounted=!0,ne=me=Ee=null}},_e=X.effect=new FC(ye,zt,()=>zC(Oe),X.scope),Oe=X.update=()=>{_e.dirty&&_e.run()};Oe.id=X.uid,Ri(X,!0),Oe()},N=(X,ne,me)=>{ne.component=X;const Ee=X.vnode.props;X.vnode=ne,X.next=null,qY(X,ne.props,Ee,me),JY(X,ne.children,me),Dl(),FT(X),Ll()},W=(X,ne,me,Ee,de,xe,ke,ye,_e=!1)=>{const Oe=X&&X.children,Fe=X?X.shapeFlag:0,ze=ne.children,{patchFlag:he,shapeFlag:Ae}=ne;if(he>0){if(he&128){L(Oe,ze,me,Ee,de,xe,ke,ye,_e);return}else if(he&256){_(Oe,ze,me,Ee,de,xe,ke,ye,_e);return}}Ae&8?(Fe&16&&se(Oe,de,xe),ze!==Oe&&u(me,ze)):Fe&16?Ae&16?L(Oe,ze,me,Ee,de,xe,ke,ye,_e):se(Oe,de,xe,!0):(Fe&8&&u(me,""),Ae&16&&E(ze,me,Ee,de,xe,ke,ye,_e))},_=(X,ne,me,Ee,de,xe,ke,ye,_e)=>{X=X||wc,ne=ne||wc;const Oe=X.length,Fe=ne.length,ze=Math.min(Oe,Fe);let he;for(he=0;he<ze;he++){const Ae=ne[he]=_e?Ho(ne[he]):ys(ne[he]);g(X[he],Ae,me,null,de,xe,ke,ye,_e)}Oe>Fe?se(X,de,xe,!0,!1,ze):E(ne,me,Ee,de,xe,ke,ye,_e,ze)},L=(X,ne,me,Ee,de,xe,ke,ye,_e)=>{let Oe=0;const Fe=ne.length;let ze=X.length-1,he=Fe-1;for(;Oe<=ze&&Oe<=he;){const Ae=X[Oe],qe=ne[Oe]=_e?Ho(ne[Oe]):ys(ne[Oe]);if(Gi(Ae,qe))g(Ae,qe,me,null,de,xe,ke,ye,_e);else break;Oe++}for(;Oe<=ze&&Oe<=he;){const Ae=X[ze],qe=ne[he]=_e?Ho(ne[he]):ys(ne[he]);if(Gi(Ae,qe))g(Ae,qe,me,null,de,xe,ke,ye,_e);else break;ze--,he--}if(Oe>ze){if(Oe<=he){const Ae=he+1,qe=Ae<Fe?ne[Ae].el:Ee;for(;Oe<=he;)g(null,ne[Oe]=_e?Ho(ne[Oe]):ys(ne[Oe]),me,qe,de,xe,ke,ye,_e),Oe++}}else if(Oe>he)for(;Oe<=ze;)K(X[Oe],de,xe,!0),Oe++;else{const Ae=Oe,qe=Oe,st=new Map;for(Oe=qe;Oe<=he;Oe++){const $e=ne[Oe]=_e?Ho(ne[Oe]):ys(ne[Oe]);$e.key!=null&&st.set($e.key,Oe)}let vt,Ke=0;const fe=he-qe+1;let le=!1,oe=0;const we=new Array(fe);for(Oe=0;Oe<fe;Oe++)we[Oe]=0;for(Oe=Ae;Oe<=ze;Oe++){const $e=X[Oe];if(Ke>=fe){K($e,de,xe,!0);continue}let nt;if($e.key!=null)nt=st.get($e.key);else for(vt=qe;vt<=he;vt++)if(we[vt-qe]===0&&Gi($e,ne[vt])){nt=vt;break}nt===void 0?K($e,de,xe,!0):(we[nt-qe]=Oe+1,nt>=oe?oe=nt:le=!0,g($e,ne[nt],me,null,de,xe,ke,ye,_e),Ke++)}const J=le?nq(we):wc;for(vt=J.length-1,Oe=fe-1;Oe>=0;Oe--){const $e=qe+Oe,nt=ne[$e],yt=$e+1<Fe?ne[$e+1].el:Ee;we[Oe]===0?g(null,nt,me,yt,de,xe,ke,ye,_e):le&&(vt<0||Oe!==J[vt]?G(nt,me,yt,2):vt--)}}},G=(X,ne,me,Ee,de=null)=>{const{el:xe,type:ke,transition:ye,children:_e,shapeFlag:Oe}=X;if(Oe&6){G(X.component.subTree,ne,me,Ee);return}if(Oe&128){X.suspense.move(ne,me,Ee);return}if(Oe&64){ke.move(X,ne,me,ge);return}if(ke===Ue){r(xe,ne,me);for(let ze=0;ze<_e.length;ze++)G(_e[ze],ne,me,Ee);r(X.anchor,ne,me);return}if(ke===sg){C(X,ne,me);return}if(Ee!==2&&Oe&1&&ye)if(Ee===0)ye.beforeEnter(xe),r(xe,ne,me),Yr(()=>ye.enter(xe),de);else{const{leave:ze,delayLeave:he,afterLeave:Ae}=ye,qe=()=>r(xe,ne,me),st=()=>{ze(xe,()=>{qe(),Ae&&Ae()})};he?he(xe,qe,st):st()}else r(xe,ne,me)},K=(X,ne,me,Ee=!1,de=!1)=>{const{type:xe,props:ke,ref:ye,children:_e,dynamicChildren:Oe,shapeFlag:Fe,patchFlag:ze,dirs:he}=X;if(ye!=null&&um(ye,null,me,X,!0),Fe&256){ne.ctx.deactivate(X);return}const Ae=Fe&1&&he,qe=!nf(X);let st;if(qe&&(st=ke&&ke.onVnodeBeforeUnmount)&&ds(st,ne,X),Fe&6)ve(X.component,me,Ee);else{if(Fe&128){X.suspense.unmount(me,Ee);return}Ae&&Mi(X,null,ne,"beforeUnmount"),Fe&64?X.type.remove(X,ne,me,de,ge,Ee):Oe&&(xe!==Ue||ze>0&&ze&64)?se(Oe,ne,me,!1,!0):(xe===Ue&&ze&384||!de&&Fe&16)&&se(_e,ne,me),Ee&&Y(X)}(qe&&(st=ke&&ke.onVnodeUnmounted)||Ae)&&Yr(()=>{st&&ds(st,ne,X),Ae&&Mi(X,null,ne,"unmounted")},me)},Y=X=>{const{type:ne,el:me,anchor:Ee,transition:de}=X;if(ne===Ue){te(me,Ee);return}if(ne===sg){S(X);return}const xe=()=>{a(me),de&&!de.persisted&&de.afterLeave&&de.afterLeave()};if(X.shapeFlag&1&&de&&!de.persisted){const{leave:ke,delayLeave:ye}=de,_e=()=>ke(me,xe);ye?ye(X.el,xe,_e):_e()}else xe()},te=(X,ne)=>{let me;for(;X!==ne;)me=d(X),a(X),X=me;a(ne)},ve=(X,ne,me)=>{const{bum:Ee,scope:de,update:xe,subTree:ke,um:ye}=X;Ee&&rg(Ee),de.stop(),xe&&(xe.active=!1,K(ke,X,ne,me)),ye&&Yr(ye,ne),Yr(()=>{X.isUnmounted=!0},ne),ne&&ne.pendingBranch&&!ne.isUnmounted&&X.asyncDep&&!X.asyncResolved&&X.suspenseId===ne.pendingId&&(ne.deps--,ne.deps===0&&ne.resolve())},se=(X,ne,me,Ee=!1,de=!1,xe=0)=>{for(let ke=xe;ke<X.length;ke++)K(X[ke],ne,me,Ee,de)},ie=X=>X.shapeFlag&6?ie(X.component.subTree):X.shapeFlag&128?X.suspense.next():d(X.anchor||X.el);let re=!1;const be=(X,ne,me)=>{X==null?ne._vnode&&K(ne._vnode,null,null,!0):g(ne._vnode||null,X,ne,null,null,null,me),re||(re=!0,FT(),DV(),re=!1),ne._vnode=X},ge={p:g,um:K,m:G,r:Y,mt:B,mc:E,pc:W,pbc:k,n:ie,o:t};let Se,De;return e&&([Se,De]=e(ge)),{render:be,hydrate:Se,createApp:jY(be,Se)}}function $0({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ri({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function tq(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function ZC(t,e,n=!1){const r=t.children,a=e.children;if(Be(r)&&Be(a))for(let s=0;s<r.length;s++){const o=r[s];let i=a[s];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=a[s]=Ho(a[s]),i.el=o.el),n||ZC(o,i)),i.type===gu&&(i.el=o.el)}}function nq(t){const e=t.slice(),n=[0];let r,a,s,o,i;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(a=n[n.length-1],t[a]<c){e[r]=a,n.push(r);continue}for(s=0,o=n.length-1;s<o;)i=s+o>>1,t[n[i]]<c?s=i+1:o=i;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function QV(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:QV(e)}const rq=t=>t.__isTeleport,sf=t=>t&&(t.disabled||t.disabled===""),YT=t=>typeof SVGElement<"u"&&t instanceof SVGElement,qT=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,fm=(t,e)=>{const n=t&&t.to;return tt(n)?e?e(n):null:n},aq={name:"Teleport",__isTeleport:!0,process(t,e,n,r,a,s,o,i,l,c){const{mc:u,pc:f,pbc:d,o:{insert:p,querySelector:h,createText:g,createComment:y}}=c,m=sf(e.props);let{shapeFlag:b,children:C,dynamicChildren:S}=e;if(t==null){const T=e.el=g(""),w=e.anchor=g("");p(T,n,r),p(w,n,r);const x=e.target=fm(e.props,h),E=e.targetAnchor=g("");x&&(p(E,x),o==="svg"||YT(x)?o="svg":(o==="mathml"||qT(x))&&(o="mathml"));const O=(k,M)=>{b&16&&u(C,k,M,a,s,o,i,l)};m?O(n,w):x&&O(x,E)}else{e.el=t.el;const T=e.anchor=t.anchor,w=e.target=t.target,x=e.targetAnchor=t.targetAnchor,E=sf(t.props),O=E?n:w,k=E?T:x;if(o==="svg"||YT(w)?o="svg":(o==="mathml"||qT(w))&&(o="mathml"),S?(d(t.dynamicChildren,S,O,a,s,o,i),ZC(t,e,!0)):l||f(t,e,O,k,a,s,o,i,!1),m)E?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):gp(e,n,T,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const M=e.target=fm(e.props,h);M&&gp(e,M,null,c,0)}else E&&gp(e,w,x,c,1)}eD(e)},remove(t,e,n,r,{um:a,o:{remove:s}},o){const{shapeFlag:i,children:l,anchor:c,targetAnchor:u,target:f,props:d}=t;if(f&&s(u),o&&s(c),i&16){const p=o||!sf(d);for(let h=0;h<l.length;h++){const g=l[h];a(g,e,n,p,!!g.dynamicChildren)}}},move:gp,hydrate:sq};function gp(t,e,n,{o:{insert:r},m:a},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:i,shapeFlag:l,children:c,props:u}=t,f=s===2;if(f&&r(o,e,n),(!f||sf(u))&&l&16)for(let d=0;d<c.length;d++)a(c[d],e,n,2);f&&r(i,e,n)}function sq(t,e,n,r,a,s,{o:{nextSibling:o,parentNode:i,querySelector:l}},c){const u=e.target=fm(e.props,l);if(u){const f=u._lpa||u.firstChild;if(e.shapeFlag&16)if(sf(e.props))e.anchor=c(o(t),e,i(t),n,r,a,s),e.targetAnchor=f;else{e.anchor=o(t);let d=f;for(;d;)if(d=o(d),d&&d.nodeType===8&&d.data==="teleport anchor"){e.targetAnchor=d,u._lpa=e.targetAnchor&&o(e.targetAnchor);break}c(f,e,u,n,r,a,s)}eD(e)}return e.anchor&&o(e.anchor)}const pu=aq;function eD(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const Ue=Symbol.for("v-fgt"),gu=Symbol.for("v-txt"),Ar=Symbol.for("v-cmt"),sg=Symbol.for("v-stc"),of=[];let Ja=null;function V(t=!1){of.push(Ja=t?null:[])}function oq(){of.pop(),Ja=of[of.length-1]||null}let Rf=1;function XT(t){Rf+=t}function tD(t){return t.dynamicChildren=Rf>0?Ja||wc:null,oq(),Rf>0&&Ja&&Ja.push(t),t}function z(t,e,n,r,a,s){return tD(H(t,e,n,r,a,s,!0))}function ae(t,e,n,r,a){return tD(j(t,e,n,r,a,!0))}function yn(t){return t?t.__v_isVNode===!0:!1}function Gi(t,e){return t.type===e.type&&t.key===e.key}const wv="__vInternal",nD=({key:t})=>t??null,og=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?tt(t)||cn(t)||Je(t)?{i:sr,r:t,k:e,f:!!n}:t:null);function H(t,e=null,n=null,r=0,a=null,s=t===Ue?0:1,o=!1,i=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&nD(e),ref:e&&og(e),scopeId:BV,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:sr};return i?(JC(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=tt(n)?8:16),Rf>0&&!o&&Ja&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Ja.push(l),l}const j=iq;function iq(t,e=null,n=null,r=0,a=null,s=!1){if((!t||t===FV)&&(t=Ar),yn(t)){const i=co(t,e,!0);return n&&JC(i,n),Rf>0&&!s&&Ja&&(i.shapeFlag&6?Ja[Ja.indexOf(t)]=i:Ja.push(i)),i.patchFlag|=-2,i}if(vq(t)&&(t=t.__vccOpts),e){e=Tv(e);let{class:i,style:l}=e;i&&!tt(i)&&(e.class=U(i)),pt(l)&&(TV(l)&&!Be(l)&&(l=tr({},l)),e.style=Pe(l))}const o=tt(t)?1:kY(t)?128:rq(t)?64:pt(t)?4:Je(t)?2:0;return H(t,e,n,r,a,o,s,!0)}function Tv(t){return t?TV(t)||wv in t?tr({},t):t:null}function co(t,e,n=!1){const{props:r,ref:a,patchFlag:s,children:o}=t,i=e?ft(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:i,key:i&&nD(i),ref:e&&e.ref?n&&a?Be(a)?a.concat(og(e)):[a,og(e)]:og(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ue?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&co(t.ssContent),ssFallback:t.ssFallback&&co(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Ct(t=" ",e=0){return j(gu,null,t,e)}function lq(t,e){const n=j(sg,null,t);return n.staticCount=e,n}function ee(t="",e=!1){return e?(V(),ae(Ar,null,t)):j(Ar,null,t)}function ys(t){return t==null||typeof t=="boolean"?j(Ar):Be(t)?j(Ue,null,t.slice()):typeof t=="object"?Ho(t):j(gu,null,String(t))}function Ho(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:co(t)}function JC(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Be(e))n=16;else if(typeof e=="object")if(r&65){const a=e.default;a&&(a._c&&(a._d=!1),JC(t,a()),a._c&&(a._d=!0));return}else{n=32;const a=e._;!a&&!(wv in e)?e._ctx=sr:a===3&&sr&&(sr.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Je(e)?(e={default:e,_ctx:sr},n=32):(e=String(e),r&64?(n=16,e=[Ct(e)]):n=8);t.children=e,t.shapeFlag|=n}function ft(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const a in r)if(a==="class")e.class!==r.class&&(e.class=U([e.class,r.class]));else if(a==="style")e.style=Pe([e.style,r.style]);else if(dv(a)){const s=e[a],o=r[a];o&&s!==o&&!(Be(s)&&s.includes(o))&&(e[a]=s?[].concat(s,o):o)}else a!==""&&(e[a]=r[a])}return e}function ds(t,e,n,r=null){xa(t,e,7,[n,r])}const cq=jV();let uq=0;function fq(t,e,n){const r=t.type,a=(e?e.appContext:t.appContext)||cq,s={uid:uq++,vnode:t,type:r,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new lV(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:qV(r,a),emitsOptions:NV(r,a),emit:null,emitted:null,propsDefaults:_n,inheritAttrs:r.inheritAttrs,ctx:_n,data:_n,props:_n,attrs:_n,slots:_n,refs:_n,setupState:_n,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=SY.bind(null,s),t.ce&&t.ce(s),s}let mr=null;const ot=()=>mr||sr;let yh,dm;{const t=aV(),e=(n,r)=>{let a;return(a=t[n])||(a=t[n]=[]),a.push(r),s=>{a.length>1?a.forEach(o=>o(s)):a[0](s)}};yh=e("__VUE_INSTANCE_SETTERS__",n=>mr=n),dm=e("__VUE_SSR_SETTERS__",n=>xv=n)}const pd=t=>{const e=mr;return yh(t),t.scope.on(),()=>{t.scope.off(),yh(e)}},ZT=()=>{mr&&mr.scope.off(),yh(null)};function rD(t){return t.vnode.shapeFlag&4}let xv=!1;function dq(t,e=!1){e&&dm(e);const{props:n,children:r}=t.vnode,a=rD(t);YY(t,n,a,e),ZY(t,r);const s=a?pq(t,e):void 0;return e&&dm(!1),s}function pq(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=fl(new Proxy(t.ctx,WY));const{setup:r}=n;if(r){const a=t.setupContext=r.length>1?sD(t):null,s=pd(t);Dl();const o=ni(r,t,0,[t.props,a]);if(Ll(),s(),Tf(o)){if(o.then(ZT,ZT),e)return o.then(i=>{JT(t,i,e)}).catch(i=>{vv(i,t,0)});t.asyncDep=o}else JT(t,o,e)}else aD(t,e)}function JT(t,e,n){Je(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:pt(e)&&(t.setupState=MV(e)),aD(t,n)}let QT;function aD(t,e,n){const r=t.type;if(!t.render){if(!e&&QT&&!r.render){const a=r.template||qC(t).template;if(a){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:i,compilerOptions:l}=r,c=tr(tr({isCustomElement:s,delimiters:i},o),l);r.render=QT(a,c)}}t.render=r.render||zt}{const a=pd(t);Dl();try{IY(t)}finally{Ll(),a()}}}function gq(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return ea(t,"get","$attrs"),e[n]}}))}function sD(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return gq(t)},slots:t.slots,emit:t.emit,expose:e}}function Ev(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(MV(fl(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in rf)return rf[n](t)},has(e,n){return n in e||n in rf}}))}function hq(t,e=!0){return Je(t)?t.displayName||t.name:t.name||e&&t.__name}function vq(t){return Je(t)&&"__vccOpts"in t}const R=(t,e)=>EV(t,e,xv);function je(t,e,n){const r=arguments.length;return r===2?pt(e)&&!Be(e)?yn(e)?j(t,null,[e]):j(t,e):j(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&yn(n)&&(n=[n]),j(t,e,n))}const yq="3.4.20",mq=zt;/**
* @vue/runtime-dom v3.4.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Cq="http://www.w3.org/2000/svg",Sq="http://www.w3.org/1998/Math/MathML",Ko=typeof document<"u"?document:null,e2=Ko&&Ko.createElement("template"),bq={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const a=e==="svg"?Ko.createElementNS(Cq,t):e==="mathml"?Ko.createElementNS(Sq,t):Ko.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&a.setAttribute("multiple",r.multiple),a},createText:t=>Ko.createTextNode(t),createComment:t=>Ko.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ko.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,a,s){const o=n?n.previousSibling:e.lastChild;if(a&&(a===s||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),n),!(a===s||!(a=a.nextSibling)););else{e2.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const i=e2.content;if(r==="svg"||r==="mathml"){const l=i.firstChild;for(;l.firstChild;)i.appendChild(l.firstChild);i.removeChild(l)}e.insertBefore(i,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Vo="transition",Eu="animation",Wc=Symbol("_vtc"),jn=(t,{slots:e})=>je(DY,iD(t),e);jn.displayName="Transition";const oD={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},wq=jn.props=tr({},AV,oD),_i=(t,e=[])=>{Be(t)?t.forEach(n=>n(...e)):t&&t(...e)},t2=t=>t?Be(t)?t.some(e=>e.length>1):t.length>1:!1;function iD(t){const e={};for(const D in t)D in oD||(e[D]=t[D]);if(t.css===!1)return e;const{name:n="v",type:r,duration:a,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:i=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=i,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,h=Tq(a),g=h&&h[0],y=h&&h[1],{onBeforeEnter:m,onEnter:b,onEnterCancelled:C,onLeave:S,onLeaveCancelled:T,onBeforeAppear:w=m,onAppear:x=b,onAppearCancelled:E=C}=e,O=(D,I,B)=>{$o(D,I?u:i),$o(D,I?c:o),B&&B()},k=(D,I)=>{D._isLeaving=!1,$o(D,f),$o(D,p),$o(D,d),I&&I()},M=D=>(I,B)=>{const F=D?x:b,$=()=>O(I,D,B);_i(F,[I,$]),n2(()=>{$o(I,D?l:s),Gs(I,D?u:i),t2(F)||r2(I,r,g,$)})};return tr(e,{onBeforeEnter(D){_i(m,[D]),Gs(D,s),Gs(D,o)},onBeforeAppear(D){_i(w,[D]),Gs(D,l),Gs(D,c)},onEnter:M(!1),onAppear:M(!0),onLeave(D,I){D._isLeaving=!0;const B=()=>k(D,I);Gs(D,f),cD(),Gs(D,d),n2(()=>{D._isLeaving&&($o(D,f),Gs(D,p),t2(S)||r2(D,r,y,B))}),_i(S,[D,B])},onEnterCancelled(D){O(D,!1),_i(C,[D])},onAppearCancelled(D){O(D,!0),_i(E,[D])},onLeaveCancelled(D){k(D),_i(T,[D])}})}function Tq(t){if(t==null)return null;if(pt(t))return[U0(t.enter),U0(t.leave)];{const e=U0(t);return[e,e]}}function U0(t){return B7(t)}function Gs(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Wc]||(t[Wc]=new Set)).add(e)}function $o(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Wc];n&&(n.delete(e),n.size||(t[Wc]=void 0))}function n2(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let xq=0;function r2(t,e,n,r){const a=t._endId=++xq,s=()=>{a===t._endId&&r()};if(n)return setTimeout(s,n);const{type:o,timeout:i,propCount:l}=lD(t,e);if(!o)return r();const c=o+"end";let u=0;const f=()=>{t.removeEventListener(c,d),s()},d=p=>{p.target===t&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},i+1),t.addEventListener(c,d)}function lD(t,e){const n=window.getComputedStyle(t),r=h=>(n[h]||"").split(", "),a=r(`${Vo}Delay`),s=r(`${Vo}Duration`),o=a2(a,s),i=r(`${Eu}Delay`),l=r(`${Eu}Duration`),c=a2(i,l);let u=null,f=0,d=0;e===Vo?o>0&&(u=Vo,f=o,d=s.length):e===Eu?c>0&&(u=Eu,f=c,d=l.length):(f=Math.max(o,c),u=f>0?o>c?Vo:Eu:null,d=u?u===Vo?s.length:l.length:0);const p=u===Vo&&/\b(transform|all)(,|$)/.test(r(`${Vo}Property`).toString());return{type:u,timeout:f,propCount:d,hasTransform:p}}function a2(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>s2(n)+s2(t[r])))}function s2(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function cD(){return document.body.offsetHeight}function Eq(t,e,n){const r=t[Wc];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const mh=Symbol("_vod"),uD=Symbol("_vsh"),Rt={beforeMount(t,{value:e},{transition:n}){t[mh]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):ku(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),ku(t,!0),r.enter(t)):r.leave(t,()=>{ku(t,!1)}):ku(t,e))},beforeUnmount(t,{value:e}){ku(t,e)}};function ku(t,e){t.style.display=e?t[mh]:"none",t[uD]=!e}const kq=Symbol(""),Oq=/(^|;)\s*display\s*:/;function Mq(t,e,n){const r=t.style,a=tt(n);let s=!1;if(n&&!a){if(e)if(tt(e))for(const o of e.split(";")){const i=o.slice(0,o.indexOf(":")).trim();n[i]==null&&ig(r,i,"")}else for(const o in e)n[o]==null&&ig(r,o,"");for(const o in n)o==="display"&&(s=!0),ig(r,o,n[o])}else if(a){if(e!==n){const o=r[kq];o&&(n+=";"+o),r.cssText=n,s=Oq.test(n)}}else e&&t.removeAttribute("style");mh in t&&(t[mh]=s?r.display:"",t[uD]&&(r.display="none"))}const o2=/\s*!important$/;function ig(t,e,n){if(Be(n))n.forEach(r=>ig(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Rq(t,e);o2.test(n)?t.setProperty(gi(r),n.replace(o2,""),"important"):t[r]=n}}const i2=["Webkit","Moz","ms"],A0={};function Rq(t,e){const n=A0[e];if(n)return n;let r=Ma(e);if(r!=="filter"&&r in t)return A0[e]=r;r=dd(r);for(let a=0;a<i2.length;a++){const s=i2[a]+r;if(s in t)return A0[e]=s}return e}const l2="http://www.w3.org/1999/xlink";function _q(t,e,n,r,a){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(l2,e.slice(6,e.length)):t.setAttributeNS(l2,e,n);else{const s=I7(e);n==null||s&&!sV(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function Vq(t,e,n,r,a,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,a,s),t[e]=n??"";return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){t._value=n;const c=i==="OPTION"?t.getAttribute("value")||"":t.value,u=n??"";c!==u&&(t.value=u),n==null&&t.removeAttribute(e);return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=sV(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function Yo(t,e,n,r){t.addEventListener(e,n,r)}function Dq(t,e,n,r){t.removeEventListener(e,n,r)}const c2=Symbol("_vei");function Lq(t,e,n,r,a=null){const s=t[c2]||(t[c2]={}),o=s[e];if(r&&o)o.value=r;else{const[i,l]=Nq(e);if(r){const c=s[e]=$q(r,a);Yo(t,i,c,l)}else o&&(Dq(t,i,o,l),s[e]=void 0)}}const u2=/(?:Once|Passive|Capture)$/;function Nq(t){let e;if(u2.test(t)){e={};let r;for(;r=t.match(u2);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):gi(t.slice(2)),e]}let W0=0;const Bq=Promise.resolve(),Fq=()=>W0||(Bq.then(()=>W0=0),W0=Date.now());function $q(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;xa(Uq(r,n.value),e,5,[r])};return n.value=t,n.attached=Fq(),n}function Uq(t,e){if(Be(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>a=>!a._stopped&&r&&r(a))}else return e}const f2=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Aq=(t,e,n,r,a,s,o,i,l)=>{const c=a==="svg";e==="class"?Eq(t,r,c):e==="style"?Mq(t,n,r):dv(e)?LC(e)||Lq(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Wq(t,e,r,c))?Vq(t,e,r,s,o,i,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),_q(t,e,r,c))};function Wq(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&f2(e)&&Je(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const a=t.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return f2(e)&&tt(n)?!1:e in t}const fD=new WeakMap,dD=new WeakMap,Ch=Symbol("_moveCb"),d2=Symbol("_enterCb"),pD={name:"TransitionGroup",props:tr({},wq,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=ot(),r=UV();let a,s;return mo(()=>{if(!a.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!Hq(a[0].el,n.vnode.el,o))return;a.forEach(Pq),a.forEach(Gq);const i=a.filter(zq);cD(),i.forEach(l=>{const c=l.el,u=c.style;Gs(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const f=c[Ch]=d=>{d&&d.target!==c||(!d||/transform$/.test(d.propertyName))&&(c.removeEventListener("transitionend",f),c[Ch]=null,$o(c,o))};c.addEventListener("transitionend",f)})}),()=>{const o=Ht(t),i=iD(o);let l=o.tag||Ue;a=s,s=e.default?YC(e.default()):[];for(let c=0;c<s.length;c++){const u=s[c];u.key!=null&&Mf(u,Of(u,i,r,n))}if(a)for(let c=0;c<a.length;c++){const u=a[c];Mf(u,Of(u,i,r,n)),fD.set(u,u.el.getBoundingClientRect())}return j(l,null,s)}}},Iq=t=>delete t.mode;pD.props;const gD=pD;function Pq(t){const e=t.el;e[Ch]&&e[Ch](),e[d2]&&e[d2]()}function Gq(t){dD.set(t,t.el.getBoundingClientRect())}function zq(t){const e=fD.get(t),n=dD.get(t),r=e.left-n.left,a=e.top-n.top;if(r||a){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${a}px)`,s.transitionDuration="0s",t}}function Hq(t,e,n){const r=t.cloneNode(),a=t[Wc];a&&a.forEach(i=>{i.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(i=>i&&r.classList.add(i)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=lD(r);return s.removeChild(r),o}const Ic=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Be(e)?n=>rg(e,n):e};function Kq(t){t.target.composing=!0}function p2(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const no=Symbol("_assign"),Pc={created(t,{modifiers:{lazy:e,trim:n,number:r}},a){t[no]=Ic(a);const s=r||a.props&&a.props.type==="number";Yo(t,e?"change":"input",o=>{if(o.target.composing)return;let i=t.value;n&&(i=i.trim()),s&&(i=tm(i)),t[no](i)}),n&&Yo(t,"change",()=>{t.value=t.value.trim()}),e||(Yo(t,"compositionstart",Kq),Yo(t,"compositionend",p2),Yo(t,"change",p2))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:a}},s){if(t[no]=Ic(s),t.composing)return;const o=a||t.type==="number"?tm(t.value):t.value,i=e??"";o!==i&&(document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===i)||(t.value=i))}},Gc={deep:!0,created(t,e,n){t[no]=Ic(n),Yo(t,"change",()=>{const r=t._modelValue,a=vD(t),s=t.checked,o=t[no];if(Be(r)){const i=oV(r,a),l=i!==-1;if(s&&!l)o(r.concat(a));else if(!s&&l){const c=[...r];c.splice(i,1),o(c)}}else if(pv(r)){const i=new Set(r);s?i.add(a):i.delete(a),o(i)}else o(yD(t,s))})},mounted:g2,beforeUpdate(t,e,n){t[no]=Ic(n),g2(t,e,n)}};function g2(t,{value:e,oldValue:n},r){t._modelValue=e,Be(e)?t.checked=oV(e,r.props.value)>-1:pv(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=Uc(e,yD(t,!0)))}const hD={created(t,{value:e},n){t.checked=Uc(e,n.props.value),t[no]=Ic(n),Yo(t,"change",()=>{t[no](vD(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[no]=Ic(r),e!==n&&(t.checked=Uc(e,r.props.value))}};function vD(t){return"_value"in t?t._value:t.value}function yD(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const jq=["ctrl","shift","alt","meta"],Yq={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>jq.some(n=>t[`${n}Key`]&&!e.includes(n))},Ze=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(a,...s)=>{for(let o=0;o<e.length;o++){const i=Yq[e[o]];if(i&&i(a,e))return}return t(a,...s)})},qq={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Xt=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=a=>{if(!("key"in a))return;const s=gi(a.key);if(e.some(o=>o===s||qq[o]===s))return t(a)})},Xq=tr({patchProp:Aq},bq);let h2;function mD(){return h2||(h2=QY(Xq))}const li=(...t)=>{mD().render(...t)},CD=(...t)=>{const e=mD().createApp(...t),{mount:n}=e;return e.mount=r=>{const a=Jq(r);if(!a)return;const s=e._component;!Je(s)&&!s.render&&!s.template&&(s.template=a.innerHTML),a.innerHTML="";const o=n(a,!1,Zq(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),o},e};function Zq(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Jq(t){return tt(t)?document.querySelector(t):t}const Qq='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',eX=t=>getComputedStyle(t).position==="fixed"?!1:t.offsetParent!==null,v2=t=>Array.from(t.querySelectorAll(Qq)).filter(e=>tX(e)&&eX(e)),tX=t=>{if(t.tabIndex>0||t.tabIndex===0&&t.getAttribute("tabIndex")!==null)return!0;if(t.disabled)return!1;switch(t.nodeName){case"A":return!!t.href&&t.rel!=="ignore";case"INPUT":return!(t.type==="hidden"||t.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},lg=function(t,e,...n){let r;e.includes("mouse")||e.includes("click")?r="MouseEvents":e.includes("key")?r="KeyboardEvent":r="HTMLEvents";const a=document.createEvent(r);return a.initEvent(e,...n),t.dispatchEvent(a),t},SD=t=>!t.getAttribute("aria-owns"),bD=(t,e,n)=>{const{parentNode:r}=t;if(!r)return null;const a=r.querySelectorAll(n),s=Array.prototype.indexOf.call(a,t);return a[s+e]||null},cg=t=>{t&&(t.focus(),!SD(t)&&t.click())},kn=(t,e,{checkForDefaultPrevented:n=!0}={})=>a=>{const s=t==null?void 0:t(a);if(n===!1||!s)return e==null?void 0:e(a)},y2=t=>e=>e.pointerType==="mouse"?t(e):void 0;var nX=Object.defineProperty,rX=Object.defineProperties,aX=Object.getOwnPropertyDescriptors,m2=Object.getOwnPropertySymbols,sX=Object.prototype.hasOwnProperty,oX=Object.prototype.propertyIsEnumerable,C2=(t,e,n)=>e in t?nX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iX=(t,e)=>{for(var n in e||(e={}))sX.call(e,n)&&C2(t,n,e[n]);if(m2)for(var n of m2(e))oX.call(e,n)&&C2(t,n,e[n]);return t},lX=(t,e)=>rX(t,aX(e));function S2(t,e){var n;const r=on();return Sr(()=>{r.value=t()},lX(iX({},e),{flush:(n=e==null?void 0:e.flush)!=null?n:"sync"})),du(r)}var b2;const Ot=typeof window<"u",cX=t=>typeof t<"u",uX=t=>typeof t=="function",fX=t=>typeof t=="string",zc=()=>{},dX=Ot&&((b2=window==null?void 0:window.navigator)==null?void 0:b2.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function ci(t){return typeof t=="function"?t():v(t)}function wD(t,e){function n(...r){return new Promise((a,s)=>{Promise.resolve(t(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})).then(a).catch(s)})}return n}function pX(t,e={}){let n,r,a=zc;const s=i=>{clearTimeout(i),a(),a=zc};return i=>{const l=ci(t),c=ci(e.maxWait);return n&&s(n),l<=0||c!==void 0&&c<=0?(r&&(s(r),r=null),Promise.resolve(i())):new Promise((u,f)=>{a=e.rejectOnCancel?f:u,c&&!r&&(r=setTimeout(()=>{n&&s(n),r=null,u(i())},c)),n=setTimeout(()=>{r&&s(r),r=null,u(i())},l)})}}function gX(t,e=!0,n=!0,r=!1){let a=0,s,o=!0,i=zc,l;const c=()=>{s&&(clearTimeout(s),s=void 0,i(),i=zc)};return f=>{const d=ci(t),p=Date.now()-a,h=()=>l=f();return c(),d<=0?(a=Date.now(),h()):(p>d&&(n||!o)?(a=Date.now(),h()):e&&(l=new Promise((g,y)=>{i=r?y:g,s=setTimeout(()=>{a=Date.now(),o=!0,g(h()),c()},Math.max(0,d-p))})),!n&&!s&&(s=setTimeout(()=>o=!0,d)),o=!1,l)}}function hX(t){return t}function gd(t){return cV()?(uV(t),!0):!1}function vX(t,e=200,n={}){return wD(pX(e,n),t)}function yX(t,e=200,n={}){const r=P(t.value),a=vX(()=>{r.value=t.value},e,n);return pe(t,()=>a()),r}function TD(t,e=200,n=!1,r=!0,a=!1){return wD(gX(e,n,r,a),t)}function QC(t,e=!0){ot()?at(t):e?t():Ye(t)}function wl(t,e,n={}){const{immediate:r=!0}=n,a=P(!1);let s=null;function o(){s&&(clearTimeout(s),s=null)}function i(){a.value=!1,o()}function l(...c){o(),a.value=!0,s=setTimeout(()=>{a.value=!1,s=null,t(...c)},ci(e))}return r&&(a.value=!0,Ot&&l()),gd(i),{isPending:du(a),start:l,stop:i}}function Zr(t){var e;const n=ci(t);return(e=n==null?void 0:n.$el)!=null?e:n}const Bl=Ot?window:void 0,mX=Ot?window.document:void 0;function vn(...t){let e,n,r,a;if(fX(t[0])||Array.isArray(t[0])?([n,r,a]=t,e=Bl):[e,n,r,a]=t,!e)return zc;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const s=[],o=()=>{s.forEach(u=>u()),s.length=0},i=(u,f,d,p)=>(u.addEventListener(f,d,p),()=>u.removeEventListener(f,d,p)),l=pe(()=>[Zr(e),ci(a)],([u,f])=>{o(),u&&s.push(...n.flatMap(d=>r.map(p=>i(u,d,p,f))))},{immediate:!0,flush:"post"}),c=()=>{l(),o()};return gd(c),c}let w2=!1;function eS(t,e,n={}){const{window:r=Bl,ignore:a=[],capture:s=!0,detectIframe:o=!1}=n;if(!r)return;dX&&!w2&&(w2=!0,Array.from(r.document.body.children).forEach(d=>d.addEventListener("click",zc)));let i=!0;const l=d=>a.some(p=>{if(typeof p=="string")return Array.from(r.document.querySelectorAll(p)).some(h=>h===d.target||d.composedPath().includes(h));{const h=Zr(p);return h&&(d.target===h||d.composedPath().includes(h))}}),u=[vn(r,"click",d=>{const p=Zr(t);if(!(!p||p===d.target||d.composedPath().includes(p))){if(d.detail===0&&(i=!l(d)),!i){i=!0;return}e(d)}},{passive:!0,capture:s}),vn(r,"pointerdown",d=>{const p=Zr(t);p&&(i=!d.composedPath().includes(p)&&!l(d))},{passive:!0}),o&&vn(r,"blur",d=>{var p;const h=Zr(t);((p=r.document.activeElement)==null?void 0:p.tagName)==="IFRAME"&&!(h!=null&&h.contains(r.document.activeElement))&&e(d)})].filter(Boolean);return()=>u.forEach(d=>d())}function xD(t,e=!1){const n=P(),r=()=>n.value=!!t();return r(),QC(r,e),n}function CX(t){return JSON.parse(JSON.stringify(t))}const T2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},x2="__vueuse_ssr_handlers__";T2[x2]=T2[x2]||{};function SX(t,e,{window:n=Bl,initialValue:r=""}={}){const a=P(r),s=R(()=>{var o;return Zr(e)||((o=n==null?void 0:n.document)==null?void 0:o.documentElement)});return pe([s,()=>ci(t)],([o,i])=>{var l;if(o&&n){const c=(l=n.getComputedStyle(o).getPropertyValue(i))==null?void 0:l.trim();a.value=c||r}},{immediate:!0}),pe(a,o=>{var i;(i=s.value)!=null&&i.style&&s.value.style.setProperty(ci(t),o)}),a}function bX({document:t=mX}={}){if(!t)return P("visible");const e=P(t.visibilityState);return vn(t,"visibilitychange",()=>{e.value=t.visibilityState}),e}var E2=Object.getOwnPropertySymbols,wX=Object.prototype.hasOwnProperty,TX=Object.prototype.propertyIsEnumerable,xX=(t,e)=>{var n={};for(var r in t)wX.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&E2)for(var r of E2(t))e.indexOf(r)<0&&TX.call(t,r)&&(n[r]=t[r]);return n};function Sn(t,e,n={}){const r=n,{window:a=Bl}=r,s=xX(r,["window"]);let o;const i=xD(()=>a&&"ResizeObserver"in a),l=()=>{o&&(o.disconnect(),o=void 0)},c=pe(()=>Zr(t),f=>{l(),i.value&&a&&f&&(o=new ResizeObserver(e),o.observe(f,s))},{immediate:!0,flush:"post"}),u=()=>{l(),c()};return gd(u),{isSupported:i,stop:u}}function k2(t,e={}){const{reset:n=!0,windowResize:r=!0,windowScroll:a=!0,immediate:s=!0}=e,o=P(0),i=P(0),l=P(0),c=P(0),u=P(0),f=P(0),d=P(0),p=P(0);function h(){const g=Zr(t);if(!g){n&&(o.value=0,i.value=0,l.value=0,c.value=0,u.value=0,f.value=0,d.value=0,p.value=0);return}const y=g.getBoundingClientRect();o.value=y.height,i.value=y.bottom,l.value=y.left,c.value=y.right,u.value=y.top,f.value=y.width,d.value=y.x,p.value=y.y}return Sn(t,h),pe(()=>Zr(t),g=>!g&&h()),a&&vn("scroll",h,{capture:!0,passive:!0}),r&&vn("resize",h,{passive:!0}),QC(()=>{s&&h()}),{height:o,bottom:i,left:l,right:c,top:u,width:f,x:d,y:p,update:h}}var O2=Object.getOwnPropertySymbols,EX=Object.prototype.hasOwnProperty,kX=Object.prototype.propertyIsEnumerable,OX=(t,e)=>{var n={};for(var r in t)EX.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&O2)for(var r of O2(t))e.indexOf(r)<0&&kX.call(t,r)&&(n[r]=t[r]);return n};function ED(t,e,n={}){const r=n,{window:a=Bl}=r,s=OX(r,["window"]);let o;const i=xD(()=>a&&"MutationObserver"in a),l=()=>{o&&(o.disconnect(),o=void 0)},c=pe(()=>Zr(t),f=>{l(),i.value&&a&&f&&(o=new MutationObserver(e),o.observe(f,s))},{immediate:!0}),u=()=>{l(),c()};return gd(u),{isSupported:i,stop:u}}var M2;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(M2||(M2={}));var MX=Object.defineProperty,R2=Object.getOwnPropertySymbols,RX=Object.prototype.hasOwnProperty,_X=Object.prototype.propertyIsEnumerable,_2=(t,e,n)=>e in t?MX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,VX=(t,e)=>{for(var n in e||(e={}))RX.call(e,n)&&_2(t,n,e[n]);if(R2)for(var n of R2(e))_X.call(e,n)&&_2(t,n,e[n]);return t};const DX={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};VX({linear:hX},DX);function kD(t,e,n,r={}){var a,s,o;const{clone:i=!1,passive:l=!1,eventName:c,deep:u=!1,defaultValue:f}=r,d=ot(),p=n||(d==null?void 0:d.emit)||((a=d==null?void 0:d.$emit)==null?void 0:a.bind(d))||((o=(s=d==null?void 0:d.proxy)==null?void 0:s.$emit)==null?void 0:o.bind(d==null?void 0:d.proxy));let h=c;e||(e="modelValue"),h=c||h||`update:${e.toString()}`;const g=m=>i?uX(i)?i(m):CX(m):m,y=()=>cX(t[e])?g(t[e]):f;if(l){const m=y(),b=P(m);return pe(()=>t[e],C=>b.value=g(C)),pe(b,C=>{(C!==t[e]||u)&&p(h,C)},{deep:u}),b}else return R({get(){return y()},set(m){p(h,m)}})}function LX({window:t=Bl}={}){if(!t)return P(!1);const e=P(t.document.hasFocus());return vn(t,"blur",()=>{e.value=!1}),vn(t,"focus",()=>{e.value=!0}),e}function NX(t={}){const{window:e=Bl,initialWidth:n=1/0,initialHeight:r=1/0,listenOrientation:a=!0,includeScrollbar:s=!0}=t,o=P(n),i=P(r),l=()=>{e&&(s?(o.value=e.innerWidth,i.value=e.innerHeight):(o.value=e.document.documentElement.clientWidth,i.value=e.document.documentElement.clientHeight))};return l(),QC(l),vn("resize",l,{passive:!0}),a&&vn("orientationchange",l,{passive:!0}),{width:o,height:i}}const OD=()=>Ot&&/firefox/i.test(window.navigator.userAgent),BX=(t,e)=>{if(!Ot||!t||!e)return!1;const n=t.getBoundingClientRect();let r;return e instanceof Element?r=e.getBoundingClientRect():r={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},n.top<r.bottom&&n.bottom>r.top&&n.right>r.left&&n.left<r.right},V2=t=>{let e=0,n=t;for(;n;)e+=n.offsetTop,n=n.offsetParent;return e},FX=(t,e)=>Math.abs(V2(t)-V2(e)),tS=t=>{let e,n;return t.type==="touchend"?(n=t.changedTouches[0].clientY,e=t.changedTouches[0].clientX):t.type.startsWith("touch")?(n=t.touches[0].clientY,e=t.touches[0].clientX):(n=t.clientY,e=t.clientX),{clientX:e,clientY:n}};var MD=typeof global=="object"&&global&&global.Object===Object&&global,$X=typeof self=="object"&&self&&self.Object===Object&&self,ss=MD||$X||Function("return this")(),Ra=ss.Symbol,RD=Object.prototype,UX=RD.hasOwnProperty,AX=RD.toString,Ou=Ra?Ra.toStringTag:void 0;function WX(t){var e=UX.call(t,Ou),n=t[Ou];try{t[Ou]=void 0;var r=!0}catch{}var a=AX.call(t);return r&&(e?t[Ou]=n:delete t[Ou]),a}var IX=Object.prototype,PX=IX.toString;function GX(t){return PX.call(t)}var zX="[object Null]",HX="[object Undefined]",D2=Ra?Ra.toStringTag:void 0;function Fl(t){return t==null?t===void 0?HX:zX:D2&&D2 in Object(t)?WX(t):GX(t)}function Rs(t){return t!=null&&typeof t=="object"}var KX="[object Symbol]";function kv(t){return typeof t=="symbol"||Rs(t)&&Fl(t)==KX}function nS(t,e){for(var n=-1,r=t==null?0:t.length,a=Array(r);++n<r;)a[n]=e(t[n],n,t);return a}var Pr=Array.isArray,jX=1/0,L2=Ra?Ra.prototype:void 0,N2=L2?L2.toString:void 0;function _D(t){if(typeof t=="string")return t;if(Pr(t))return nS(t,_D)+"";if(kv(t))return N2?N2.call(t):"";var e=t+"";return e=="0"&&1/t==-jX?"-0":e}var YX=/\s/;function qX(t){for(var e=t.length;e--&&YX.test(t.charAt(e)););return e}var XX=/^\s+/;function ZX(t){return t&&t.slice(0,qX(t)+1).replace(XX,"")}function Gr(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var B2=NaN,JX=/^[-+]0x[0-9a-f]+$/i,QX=/^0b[01]+$/i,eZ=/^0o[0-7]+$/i,tZ=parseInt;function pm(t){if(typeof t=="number")return t;if(kv(t))return B2;if(Gr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Gr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=ZX(t);var n=QX.test(t);return n||eZ.test(t)?tZ(t.slice(2),n?2:8):JX.test(t)?B2:+t}var F2=1/0,nZ=17976931348623157e292;function rZ(t){if(!t)return t===0?t:0;if(t=pm(t),t===F2||t===-F2){var e=t<0?-1:1;return e*nZ}return t===t?t:0}function aZ(t){var e=rZ(t),n=e%1;return e===e?n?e-n:e:0}function rS(t){return t}var sZ="[object AsyncFunction]",oZ="[object Function]",iZ="[object GeneratorFunction]",lZ="[object Proxy]";function aS(t){if(!Gr(t))return!1;var e=Fl(t);return e==oZ||e==iZ||e==sZ||e==lZ}var I0=ss["__core-js_shared__"],$2=function(){var t=/[^.]+$/.exec(I0&&I0.keys&&I0.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function cZ(t){return!!$2&&$2 in t}var uZ=Function.prototype,fZ=uZ.toString;function $l(t){if(t!=null){try{return fZ.call(t)}catch{}try{return t+""}catch{}}return""}var dZ=/[\\^$.*+?()[\]{}|]/g,pZ=/^\[object .+?Constructor\]$/,gZ=Function.prototype,hZ=Object.prototype,vZ=gZ.toString,yZ=hZ.hasOwnProperty,mZ=RegExp("^"+vZ.call(yZ).replace(dZ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function CZ(t){if(!Gr(t)||cZ(t))return!1;var e=aS(t)?mZ:pZ;return e.test($l(t))}function SZ(t,e){return t==null?void 0:t[e]}function Ul(t,e){var n=SZ(t,e);return CZ(n)?n:void 0}var gm=Ul(ss,"WeakMap"),U2=Object.create,bZ=function(){function t(){}return function(e){if(!Gr(e))return{};if(U2)return U2(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function wZ(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function TZ(){}function VD(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var xZ=800,EZ=16,kZ=Date.now;function OZ(t){var e=0,n=0;return function(){var r=kZ(),a=EZ-(r-n);if(n=r,a>0){if(++e>=xZ)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function MZ(t){return function(){return t}}var Sh=function(){try{var t=Ul(Object,"defineProperty");return t({},"",{}),t}catch{}}(),RZ=Sh?function(t,e){return Sh(t,"toString",{configurable:!0,enumerable:!1,value:MZ(e),writable:!0})}:rS;const _Z=RZ;var DD=OZ(_Z);function VZ(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function LD(t,e,n,r){for(var a=t.length,s=n+(r?1:-1);r?s--:++s<a;)if(e(t[s],s,t))return s;return-1}function DZ(t){return t!==t}function LZ(t,e,n){for(var r=n-1,a=t.length;++r<a;)if(t[r]===e)return r;return-1}function NZ(t,e,n){return e===e?LZ(t,e,n):LD(t,DZ,n)}function BZ(t,e){var n=t==null?0:t.length;return!!n&&NZ(t,e,0)>-1}var FZ=9007199254740991,$Z=/^(?:0|[1-9]\d*)$/;function Ov(t,e){var n=typeof t;return e=e??FZ,!!e&&(n=="number"||n!="symbol"&&$Z.test(t))&&t>-1&&t%1==0&&t<e}function sS(t,e,n){e=="__proto__"&&Sh?Sh(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function hd(t,e){return t===e||t!==t&&e!==e}var UZ=Object.prototype,AZ=UZ.hasOwnProperty;function oS(t,e,n){var r=t[e];(!(AZ.call(t,e)&&hd(r,n))||n===void 0&&!(e in t))&&sS(t,e,n)}function hu(t,e,n,r){var a=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var i=e[s],l=r?r(n[i],t[i],i,n,t):void 0;l===void 0&&(l=t[i]),a?sS(n,i,l):oS(n,i,l)}return n}var A2=Math.max;function ND(t,e,n){return e=A2(e===void 0?t.length-1:e,0),function(){for(var r=arguments,a=-1,s=A2(r.length-e,0),o=Array(s);++a<s;)o[a]=r[e+a];a=-1;for(var i=Array(e+1);++a<e;)i[a]=r[a];return i[e]=n(o),wZ(t,this,i)}}function BD(t,e){return DD(ND(t,e,rS),t+"")}var WZ=9007199254740991;function iS(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=WZ}function vu(t){return t!=null&&iS(t.length)&&!aS(t)}function IZ(t,e,n){if(!Gr(n))return!1;var r=typeof e;return(r=="number"?vu(n)&&Ov(e,n.length):r=="string"&&e in n)?hd(n[e],t):!1}function PZ(t){return BD(function(e,n){var r=-1,a=n.length,s=a>1?n[a-1]:void 0,o=a>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(a--,s):void 0,o&&IZ(n[0],n[1],o)&&(s=a<3?void 0:s,a=1),e=Object(e);++r<a;){var i=n[r];i&&t(e,i,r,s)}return e})}var GZ=Object.prototype;function lS(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||GZ;return t===n}function zZ(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var HZ="[object Arguments]";function W2(t){return Rs(t)&&Fl(t)==HZ}var FD=Object.prototype,KZ=FD.hasOwnProperty,jZ=FD.propertyIsEnumerable,_f=W2(function(){return arguments}())?W2:function(t){return Rs(t)&&KZ.call(t,"callee")&&!jZ.call(t,"callee")};function YZ(){return!1}var $D=typeof exports=="object"&&exports&&!exports.nodeType&&exports,I2=$D&&typeof module=="object"&&module&&!module.nodeType&&module,qZ=I2&&I2.exports===$D,P2=qZ?ss.Buffer:void 0,XZ=P2?P2.isBuffer:void 0,Vf=XZ||YZ,ZZ="[object Arguments]",JZ="[object Array]",QZ="[object Boolean]",eJ="[object Date]",tJ="[object Error]",nJ="[object Function]",rJ="[object Map]",aJ="[object Number]",sJ="[object Object]",oJ="[object RegExp]",iJ="[object Set]",lJ="[object String]",cJ="[object WeakMap]",uJ="[object ArrayBuffer]",fJ="[object DataView]",dJ="[object Float32Array]",pJ="[object Float64Array]",gJ="[object Int8Array]",hJ="[object Int16Array]",vJ="[object Int32Array]",yJ="[object Uint8Array]",mJ="[object Uint8ClampedArray]",CJ="[object Uint16Array]",SJ="[object Uint32Array]",Mn={};Mn[dJ]=Mn[pJ]=Mn[gJ]=Mn[hJ]=Mn[vJ]=Mn[yJ]=Mn[mJ]=Mn[CJ]=Mn[SJ]=!0;Mn[ZZ]=Mn[JZ]=Mn[uJ]=Mn[QZ]=Mn[fJ]=Mn[eJ]=Mn[tJ]=Mn[nJ]=Mn[rJ]=Mn[aJ]=Mn[sJ]=Mn[oJ]=Mn[iJ]=Mn[lJ]=Mn[cJ]=!1;function bJ(t){return Rs(t)&&iS(t.length)&&!!Mn[Fl(t)]}function cS(t){return function(e){return t(e)}}var UD=typeof exports=="object"&&exports&&!exports.nodeType&&exports,lf=UD&&typeof module=="object"&&module&&!module.nodeType&&module,wJ=lf&&lf.exports===UD,P0=wJ&&MD.process,Hc=function(){try{var t=lf&&lf.require&&lf.require("util").types;return t||P0&&P0.binding&&P0.binding("util")}catch{}}(),G2=Hc&&Hc.isTypedArray,uS=G2?cS(G2):bJ,TJ=Object.prototype,xJ=TJ.hasOwnProperty;function AD(t,e){var n=Pr(t),r=!n&&_f(t),a=!n&&!r&&Vf(t),s=!n&&!r&&!a&&uS(t),o=n||r||a||s,i=o?zZ(t.length,String):[],l=i.length;for(var c in t)(e||xJ.call(t,c))&&!(o&&(c=="length"||a&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Ov(c,l)))&&i.push(c);return i}function WD(t,e){return function(n){return t(e(n))}}var EJ=WD(Object.keys,Object),kJ=Object.prototype,OJ=kJ.hasOwnProperty;function MJ(t){if(!lS(t))return EJ(t);var e=[];for(var n in Object(t))OJ.call(t,n)&&n!="constructor"&&e.push(n);return e}function vd(t){return vu(t)?AD(t):MJ(t)}function RJ(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var _J=Object.prototype,VJ=_J.hasOwnProperty;function DJ(t){if(!Gr(t))return RJ(t);var e=lS(t),n=[];for(var r in t)r=="constructor"&&(e||!VJ.call(t,r))||n.push(r);return n}function yd(t){return vu(t)?AD(t,!0):DJ(t)}var LJ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,NJ=/^\w*$/;function fS(t,e){if(Pr(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||kv(t)?!0:NJ.test(t)||!LJ.test(t)||e!=null&&t in Object(e)}var Df=Ul(Object,"create");function BJ(){this.__data__=Df?Df(null):{},this.size=0}function FJ(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var $J="__lodash_hash_undefined__",UJ=Object.prototype,AJ=UJ.hasOwnProperty;function WJ(t){var e=this.__data__;if(Df){var n=e[t];return n===$J?void 0:n}return AJ.call(e,t)?e[t]:void 0}var IJ=Object.prototype,PJ=IJ.hasOwnProperty;function GJ(t){var e=this.__data__;return Df?e[t]!==void 0:PJ.call(e,t)}var zJ="__lodash_hash_undefined__";function HJ(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Df&&e===void 0?zJ:e,this}function Tl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Tl.prototype.clear=BJ;Tl.prototype.delete=FJ;Tl.prototype.get=WJ;Tl.prototype.has=GJ;Tl.prototype.set=HJ;function KJ(){this.__data__=[],this.size=0}function Mv(t,e){for(var n=t.length;n--;)if(hd(t[n][0],e))return n;return-1}var jJ=Array.prototype,YJ=jJ.splice;function qJ(t){var e=this.__data__,n=Mv(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():YJ.call(e,n,1),--this.size,!0}function XJ(t){var e=this.__data__,n=Mv(e,t);return n<0?void 0:e[n][1]}function ZJ(t){return Mv(this.__data__,t)>-1}function JJ(t,e){var n=this.__data__,r=Mv(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Co(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Co.prototype.clear=KJ;Co.prototype.delete=qJ;Co.prototype.get=XJ;Co.prototype.has=ZJ;Co.prototype.set=JJ;var Lf=Ul(ss,"Map");function QJ(){this.size=0,this.__data__={hash:new Tl,map:new(Lf||Co),string:new Tl}}function eQ(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Rv(t,e){var n=t.__data__;return eQ(e)?n[typeof e=="string"?"string":"hash"]:n.map}function tQ(t){var e=Rv(this,t).delete(t);return this.size-=e?1:0,e}function nQ(t){return Rv(this,t).get(t)}function rQ(t){return Rv(this,t).has(t)}function aQ(t,e){var n=Rv(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function So(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}So.prototype.clear=QJ;So.prototype.delete=tQ;So.prototype.get=nQ;So.prototype.has=rQ;So.prototype.set=aQ;var sQ="Expected a function";function _v(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(sQ);var n=function(){var r=arguments,a=e?e.apply(this,r):r[0],s=n.cache;if(s.has(a))return s.get(a);var o=t.apply(this,r);return n.cache=s.set(a,o)||s,o};return n.cache=new(_v.Cache||So),n}_v.Cache=So;var oQ=500;function iQ(t){var e=_v(t,function(r){return n.size===oQ&&n.clear(),r}),n=e.cache;return e}var lQ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,cQ=/\\(\\)?/g,uQ=iQ(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(lQ,function(n,r,a,s){e.push(a?s.replace(cQ,"$1"):r||n)}),e});function fQ(t){return t==null?"":_D(t)}function yu(t,e){return Pr(t)?t:fS(t,e)?[t]:uQ(fQ(t))}var dQ=1/0;function mu(t){if(typeof t=="string"||kv(t))return t;var e=t+"";return e=="0"&&1/t==-dQ?"-0":e}function Vv(t,e){e=yu(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[mu(e[n++])];return n&&n==r?t:void 0}function Vn(t,e,n){var r=t==null?void 0:Vv(t,e);return r===void 0?n:r}function dS(t,e){for(var n=-1,r=e.length,a=t.length;++n<r;)t[a+n]=e[n];return t}var z2=Ra?Ra.isConcatSpreadable:void 0;function pQ(t){return Pr(t)||_f(t)||!!(z2&&t&&t[z2])}function md(t,e,n,r,a){var s=-1,o=t.length;for(n||(n=pQ),a||(a=[]);++s<o;){var i=t[s];e>0&&n(i)?e>1?md(i,e-1,n,r,a):dS(a,i):r||(a[a.length]=i)}return a}function ID(t){var e=t==null?0:t.length;return e?md(t,1):[]}function PD(t){return DD(ND(t,void 0,ID),t+"")}var gQ=WD(Object.getPrototypeOf,Object);const pS=gQ;var hQ="[object Object]",vQ=Function.prototype,yQ=Object.prototype,GD=vQ.toString,mQ=yQ.hasOwnProperty,CQ=GD.call(Object);function zD(t){if(!Rs(t)||Fl(t)!=hQ)return!1;var e=pS(t);if(e===null)return!0;var n=mQ.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&GD.call(n)==CQ}function SQ(t,e,n){var r=-1,a=t.length;e<0&&(e=-e>a?0:a+e),n=n>a?a:n,n<0&&(n+=a),a=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(a);++r<a;)s[r]=t[r+e];return s}function xl(){if(!arguments.length)return[];var t=arguments[0];return Pr(t)?t:[t]}function bQ(){this.__data__=new Co,this.size=0}function wQ(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function TQ(t){return this.__data__.get(t)}function xQ(t){return this.__data__.has(t)}var EQ=200;function kQ(t,e){var n=this.__data__;if(n instanceof Co){var r=n.__data__;if(!Lf||r.length<EQ-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new So(r)}return n.set(t,e),this.size=n.size,this}function ns(t){var e=this.__data__=new Co(t);this.size=e.size}ns.prototype.clear=bQ;ns.prototype.delete=wQ;ns.prototype.get=TQ;ns.prototype.has=xQ;ns.prototype.set=kQ;function OQ(t,e){return t&&hu(e,vd(e),t)}function MQ(t,e){return t&&hu(e,yd(e),t)}var HD=typeof exports=="object"&&exports&&!exports.nodeType&&exports,H2=HD&&typeof module=="object"&&module&&!module.nodeType&&module,RQ=H2&&H2.exports===HD,K2=RQ?ss.Buffer:void 0,j2=K2?K2.allocUnsafe:void 0;function KD(t,e){if(e)return t.slice();var n=t.length,r=j2?j2(n):new t.constructor(n);return t.copy(r),r}function _Q(t,e){for(var n=-1,r=t==null?0:t.length,a=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[a++]=o)}return s}function jD(){return[]}var VQ=Object.prototype,DQ=VQ.propertyIsEnumerable,Y2=Object.getOwnPropertySymbols,gS=Y2?function(t){return t==null?[]:(t=Object(t),_Q(Y2(t),function(e){return DQ.call(t,e)}))}:jD;function LQ(t,e){return hu(t,gS(t),e)}var NQ=Object.getOwnPropertySymbols,YD=NQ?function(t){for(var e=[];t;)dS(e,gS(t)),t=pS(t);return e}:jD;function BQ(t,e){return hu(t,YD(t),e)}function qD(t,e,n){var r=e(t);return Pr(t)?r:dS(r,n(t))}function hm(t){return qD(t,vd,gS)}function XD(t){return qD(t,yd,YD)}var vm=Ul(ss,"DataView"),ym=Ul(ss,"Promise"),kc=Ul(ss,"Set"),q2="[object Map]",FQ="[object Object]",X2="[object Promise]",Z2="[object Set]",J2="[object WeakMap]",Q2="[object DataView]",$Q=$l(vm),UQ=$l(Lf),AQ=$l(ym),WQ=$l(kc),IQ=$l(gm),Bi=Fl;(vm&&Bi(new vm(new ArrayBuffer(1)))!=Q2||Lf&&Bi(new Lf)!=q2||ym&&Bi(ym.resolve())!=X2||kc&&Bi(new kc)!=Z2||gm&&Bi(new gm)!=J2)&&(Bi=function(t){var e=Fl(t),n=e==FQ?t.constructor:void 0,r=n?$l(n):"";if(r)switch(r){case $Q:return Q2;case UQ:return q2;case AQ:return X2;case WQ:return Z2;case IQ:return J2}return e});const Nf=Bi;var PQ=Object.prototype,GQ=PQ.hasOwnProperty;function zQ(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&GQ.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var bh=ss.Uint8Array;function hS(t){var e=new t.constructor(t.byteLength);return new bh(e).set(new bh(t)),e}function HQ(t,e){var n=e?hS(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var KQ=/\w*$/;function jQ(t){var e=new t.constructor(t.source,KQ.exec(t));return e.lastIndex=t.lastIndex,e}var ex=Ra?Ra.prototype:void 0,tx=ex?ex.valueOf:void 0;function YQ(t){return tx?Object(tx.call(t)):{}}function ZD(t,e){var n=e?hS(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var qQ="[object Boolean]",XQ="[object Date]",ZQ="[object Map]",JQ="[object Number]",QQ="[object RegExp]",eee="[object Set]",tee="[object String]",nee="[object Symbol]",ree="[object ArrayBuffer]",aee="[object DataView]",see="[object Float32Array]",oee="[object Float64Array]",iee="[object Int8Array]",lee="[object Int16Array]",cee="[object Int32Array]",uee="[object Uint8Array]",fee="[object Uint8ClampedArray]",dee="[object Uint16Array]",pee="[object Uint32Array]";function gee(t,e,n){var r=t.constructor;switch(e){case ree:return hS(t);case qQ:case XQ:return new r(+t);case aee:return HQ(t,n);case see:case oee:case iee:case lee:case cee:case uee:case fee:case dee:case pee:return ZD(t,n);case ZQ:return new r;case JQ:case tee:return new r(t);case QQ:return jQ(t);case eee:return new r;case nee:return YQ(t)}}function JD(t){return typeof t.constructor=="function"&&!lS(t)?bZ(pS(t)):{}}var hee="[object Map]";function vee(t){return Rs(t)&&Nf(t)==hee}var nx=Hc&&Hc.isMap,yee=nx?cS(nx):vee,mee="[object Set]";function Cee(t){return Rs(t)&&Nf(t)==mee}var rx=Hc&&Hc.isSet,See=rx?cS(rx):Cee,bee=1,wee=2,Tee=4,QD="[object Arguments]",xee="[object Array]",Eee="[object Boolean]",kee="[object Date]",Oee="[object Error]",eL="[object Function]",Mee="[object GeneratorFunction]",Ree="[object Map]",_ee="[object Number]",tL="[object Object]",Vee="[object RegExp]",Dee="[object Set]",Lee="[object String]",Nee="[object Symbol]",Bee="[object WeakMap]",Fee="[object ArrayBuffer]",$ee="[object DataView]",Uee="[object Float32Array]",Aee="[object Float64Array]",Wee="[object Int8Array]",Iee="[object Int16Array]",Pee="[object Int32Array]",Gee="[object Uint8Array]",zee="[object Uint8ClampedArray]",Hee="[object Uint16Array]",Kee="[object Uint32Array]",wn={};wn[QD]=wn[xee]=wn[Fee]=wn[$ee]=wn[Eee]=wn[kee]=wn[Uee]=wn[Aee]=wn[Wee]=wn[Iee]=wn[Pee]=wn[Ree]=wn[_ee]=wn[tL]=wn[Vee]=wn[Dee]=wn[Lee]=wn[Nee]=wn[Gee]=wn[zee]=wn[Hee]=wn[Kee]=!0;wn[Oee]=wn[eL]=wn[Bee]=!1;function Oc(t,e,n,r,a,s){var o,i=e&bee,l=e&wee,c=e&Tee;if(n&&(o=a?n(t,r,a,s):n(t)),o!==void 0)return o;if(!Gr(t))return t;var u=Pr(t);if(u){if(o=zQ(t),!i)return VD(t,o)}else{var f=Nf(t),d=f==eL||f==Mee;if(Vf(t))return KD(t,i);if(f==tL||f==QD||d&&!a){if(o=l||d?{}:JD(t),!i)return l?BQ(t,MQ(o,t)):LQ(t,OQ(o,t))}else{if(!wn[f])return a?t:{};o=gee(t,f,i)}}s||(s=new ns);var p=s.get(t);if(p)return p;s.set(t,o),See(t)?t.forEach(function(y){o.add(Oc(y,e,n,y,t,s))}):yee(t)&&t.forEach(function(y,m){o.set(m,Oc(y,e,n,m,t,s))});var h=c?l?XD:hm:l?yd:vd,g=u?void 0:h(t);return VZ(g||t,function(y,m){g&&(m=y,y=t[m]),oS(o,m,Oc(y,e,n,m,t,s))}),o}var jee=4;function ax(t){return Oc(t,jee)}var Yee=1,qee=4;function wh(t){return Oc(t,Yee|qee)}var Xee="__lodash_hash_undefined__";function Zee(t){return this.__data__.set(t,Xee),this}function Jee(t){return this.__data__.has(t)}function Bf(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new So;++e<n;)this.add(t[e])}Bf.prototype.add=Bf.prototype.push=Zee;Bf.prototype.has=Jee;function Qee(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function nL(t,e){return t.has(e)}var ete=1,tte=2;function rL(t,e,n,r,a,s){var o=n&ete,i=t.length,l=e.length;if(i!=l&&!(o&&l>i))return!1;var c=s.get(t),u=s.get(e);if(c&&u)return c==e&&u==t;var f=-1,d=!0,p=n&tte?new Bf:void 0;for(s.set(t,e),s.set(e,t);++f<i;){var h=t[f],g=e[f];if(r)var y=o?r(g,h,f,e,t,s):r(h,g,f,t,e,s);if(y!==void 0){if(y)continue;d=!1;break}if(p){if(!Qee(e,function(m,b){if(!nL(p,b)&&(h===m||a(h,m,n,r,s)))return p.push(b)})){d=!1;break}}else if(!(h===g||a(h,g,n,r,s))){d=!1;break}}return s.delete(t),s.delete(e),d}function nte(t){var e=-1,n=Array(t.size);return t.forEach(function(r,a){n[++e]=[a,r]}),n}function vS(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var rte=1,ate=2,ste="[object Boolean]",ote="[object Date]",ite="[object Error]",lte="[object Map]",cte="[object Number]",ute="[object RegExp]",fte="[object Set]",dte="[object String]",pte="[object Symbol]",gte="[object ArrayBuffer]",hte="[object DataView]",sx=Ra?Ra.prototype:void 0,G0=sx?sx.valueOf:void 0;function vte(t,e,n,r,a,s,o){switch(n){case hte:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case gte:return!(t.byteLength!=e.byteLength||!s(new bh(t),new bh(e)));case ste:case ote:case cte:return hd(+t,+e);case ite:return t.name==e.name&&t.message==e.message;case ute:case dte:return t==e+"";case lte:var i=nte;case fte:var l=r&rte;if(i||(i=vS),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=ate,o.set(t,e);var u=rL(i(t),i(e),r,a,s,o);return o.delete(t),u;case pte:if(G0)return G0.call(t)==G0.call(e)}return!1}var yte=1,mte=Object.prototype,Cte=mte.hasOwnProperty;function Ste(t,e,n,r,a,s){var o=n&yte,i=hm(t),l=i.length,c=hm(e),u=c.length;if(l!=u&&!o)return!1;for(var f=l;f--;){var d=i[f];if(!(o?d in e:Cte.call(e,d)))return!1}var p=s.get(t),h=s.get(e);if(p&&h)return p==e&&h==t;var g=!0;s.set(t,e),s.set(e,t);for(var y=o;++f<l;){d=i[f];var m=t[d],b=e[d];if(r)var C=o?r(b,m,d,e,t,s):r(m,b,d,t,e,s);if(!(C===void 0?m===b||a(m,b,n,r,s):C)){g=!1;break}y||(y=d=="constructor")}if(g&&!y){var S=t.constructor,T=e.constructor;S!=T&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof T=="function"&&T instanceof T)&&(g=!1)}return s.delete(t),s.delete(e),g}var bte=1,ox="[object Arguments]",ix="[object Array]",hp="[object Object]",wte=Object.prototype,lx=wte.hasOwnProperty;function Tte(t,e,n,r,a,s){var o=Pr(t),i=Pr(e),l=o?ix:Nf(t),c=i?ix:Nf(e);l=l==ox?hp:l,c=c==ox?hp:c;var u=l==hp,f=c==hp,d=l==c;if(d&&Vf(t)){if(!Vf(e))return!1;o=!0,u=!1}if(d&&!u)return s||(s=new ns),o||uS(t)?rL(t,e,n,r,a,s):vte(t,e,l,n,r,a,s);if(!(n&bte)){var p=u&&lx.call(t,"__wrapped__"),h=f&&lx.call(e,"__wrapped__");if(p||h){var g=p?t.value():t,y=h?e.value():e;return s||(s=new ns),a(g,y,n,r,s)}}return d?(s||(s=new ns),Ste(t,e,n,r,a,s)):!1}function Dv(t,e,n,r,a){return t===e?!0:t==null||e==null||!Rs(t)&&!Rs(e)?t!==t&&e!==e:Tte(t,e,n,r,Dv,a)}var xte=1,Ete=2;function kte(t,e,n,r){var a=n.length,s=a,o=!r;if(t==null)return!s;for(t=Object(t);a--;){var i=n[a];if(o&&i[2]?i[1]!==t[i[0]]:!(i[0]in t))return!1}for(;++a<s;){i=n[a];var l=i[0],c=t[l],u=i[1];if(o&&i[2]){if(c===void 0&&!(l in t))return!1}else{var f=new ns;if(r)var d=r(c,u,l,t,e,f);if(!(d===void 0?Dv(u,c,xte|Ete,r,f):d))return!1}}return!0}function aL(t){return t===t&&!Gr(t)}function Ote(t){for(var e=vd(t),n=e.length;n--;){var r=e[n],a=t[r];e[n]=[r,a,aL(a)]}return e}function sL(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function Mte(t){var e=Ote(t);return e.length==1&&e[0][2]?sL(e[0][0],e[0][1]):function(n){return n===t||kte(n,t,e)}}function Rte(t,e){return t!=null&&e in Object(t)}function _te(t,e,n){e=yu(e,t);for(var r=-1,a=e.length,s=!1;++r<a;){var o=mu(e[r]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++r!=a?s:(a=t==null?0:t.length,!!a&&iS(a)&&Ov(o,a)&&(Pr(t)||_f(t)))}function oL(t,e){return t!=null&&_te(t,e,Rte)}var Vte=1,Dte=2;function Lte(t,e){return fS(t)&&aL(e)?sL(mu(t),e):function(n){var r=Vn(n,t);return r===void 0&&r===e?oL(n,t):Dv(e,r,Vte|Dte)}}function Nte(t){return function(e){return e==null?void 0:e[t]}}function Bte(t){return function(e){return Vv(e,t)}}function Fte(t){return fS(t)?Nte(mu(t)):Bte(t)}function iL(t){return typeof t=="function"?t:t==null?rS:typeof t=="object"?Pr(t)?Lte(t[0],t[1]):Mte(t):Fte(t)}function $te(t){return function(e,n,r){for(var a=-1,s=Object(e),o=r(e),i=o.length;i--;){var l=o[t?i:++a];if(n(s[l],l,s)===!1)break}return e}}var lL=$te();function Ute(t,e){return t&&lL(t,e,vd)}function Ate(t,e){return function(n,r){if(n==null)return n;if(!vu(n))return t(n,r);for(var a=n.length,s=e?a:-1,o=Object(n);(e?s--:++s<a)&&r(o[s],s,o)!==!1;);return n}}var Wte=Ate(Ute),z0=function(){return ss.Date.now()},Ite="Expected a function",Pte=Math.max,Gte=Math.min;function ta(t,e,n){var r,a,s,o,i,l,c=0,u=!1,f=!1,d=!0;if(typeof t!="function")throw new TypeError(Ite);e=pm(e)||0,Gr(n)&&(u=!!n.leading,f="maxWait"in n,s=f?Pte(pm(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d);function p(w){var x=r,E=a;return r=a=void 0,c=w,o=t.apply(E,x),o}function h(w){return c=w,i=setTimeout(m,e),u?p(w):o}function g(w){var x=w-l,E=w-c,O=e-x;return f?Gte(O,s-E):O}function y(w){var x=w-l,E=w-c;return l===void 0||x>=e||x<0||f&&E>=s}function m(){var w=z0();if(y(w))return b(w);i=setTimeout(m,g(w))}function b(w){return i=void 0,d&&r?p(w):(r=a=void 0,o)}function C(){i!==void 0&&clearTimeout(i),c=0,r=l=a=i=void 0}function S(){return i===void 0?o:b(z0())}function T(){var w=z0(),x=y(w);if(r=arguments,a=this,l=w,x){if(i===void 0)return h(l);if(f)return clearTimeout(i),i=setTimeout(m,e),p(l)}return i===void 0&&(i=setTimeout(m,e)),o}return T.cancel=C,T.flush=S,T}function mm(t,e,n){(n!==void 0&&!hd(t[e],n)||n===void 0&&!(e in t))&&sS(t,e,n)}function cL(t){return Rs(t)&&vu(t)}function Cm(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function zte(t){return hu(t,yd(t))}function Hte(t,e,n,r,a,s,o){var i=Cm(t,n),l=Cm(e,n),c=o.get(l);if(c){mm(t,n,c);return}var u=s?s(i,l,n+"",t,e,o):void 0,f=u===void 0;if(f){var d=Pr(l),p=!d&&Vf(l),h=!d&&!p&&uS(l);u=l,d||p||h?Pr(i)?u=i:cL(i)?u=VD(i):p?(f=!1,u=KD(l,!0)):h?(f=!1,u=ZD(l,!0)):u=[]:zD(l)||_f(l)?(u=i,_f(i)?u=zte(i):(!Gr(i)||aS(i))&&(u=JD(l))):f=!1}f&&(o.set(l,u),a(u,l,r,s,o),o.delete(l)),mm(t,n,u)}function uL(t,e,n,r,a){t!==e&&lL(e,function(s,o){if(a||(a=new ns),Gr(s))Hte(t,e,o,n,uL,r,a);else{var i=r?r(Cm(t,o),s,o+"",t,e,a):void 0;i===void 0&&(i=s),mm(t,o,i)}},yd)}function Kte(t,e,n){for(var r=-1,a=t==null?0:t.length;++r<a;)if(n(e,t[r]))return!0;return!1}function jte(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Yte=Math.max,qte=Math.min;function fL(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var a=r-1;return n!==void 0&&(a=aZ(n),a=n<0?Yte(r+a,0):qte(a,r-1)),LD(t,iL(e),a,!0)}function Xte(t,e){var n=-1,r=vu(t)?Array(t.length):[];return Wte(t,function(a,s,o){r[++n]=e(a,s,o)}),r}function Zte(t,e){var n=Pr(t)?nS:Xte;return n(t,iL(e))}function Jte(t,e){return md(Zte(t,e),1)}var Qte=1/0;function ene(t){var e=t==null?0:t.length;return e?md(t,Qte):[]}function Th(t){for(var e=-1,n=t==null?0:t.length,r={};++e<n;){var a=t[e];r[a[0]]=a[1]}return r}function tne(t,e){return e.length<2?t:Vv(t,SQ(e,0,-1))}function Or(t,e){return Dv(t,e)}function er(t){return t==null}function dL(t){return t===void 0}var nne=PZ(function(t,e,n){uL(t,e,n)});const rne=nne;function ane(t,e){return e=yu(e,t),t=tne(t,e),t==null||delete t[mu(jte(e))]}function sne(t){return zD(t)?void 0:t}var one=1,ine=2,lne=4,cne=PD(function(t,e){var n={};if(t==null)return n;var r=!1;e=nS(e,function(s){return s=yu(s,t),r||(r=s.length>1),s}),hu(t,XD(t),n),r&&(n=Oc(n,one|ine|lne,sne));for(var a=e.length;a--;)ane(n,e[a]);return n});function pL(t,e,n,r){if(!Gr(t))return t;e=yu(e,t);for(var a=-1,s=e.length,o=s-1,i=t;i!=null&&++a<s;){var l=mu(e[a]),c=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(a!=o){var u=i[l];c=r?r(u,l,i):void 0,c===void 0&&(c=Gr(u)?u:Ov(e[a+1])?[]:{})}oS(i,l,c),i=i[l]}return t}function une(t,e,n){for(var r=-1,a=e.length,s={};++r<a;){var o=e[r],i=Vv(t,o);n(i,o)&&pL(s,yu(o,t),i)}return s}function fne(t,e){return une(t,e,function(n,r){return oL(t,r)})}var Js=PD(function(t,e){return t==null?{}:fne(t,e)});function dne(t,e,n){return t==null?t:pL(t,e,n)}var pne="Expected a function";function dl(t,e,n){var r=!0,a=!0;if(typeof t!="function")throw new TypeError(pne);return Gr(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),ta(t,e,{leading:r,maxWait:e,trailing:a})}var gne=1/0,hne=kc&&1/vS(new kc([,-0]))[1]==gne?function(t){return new kc(t)}:TZ,vne=200;function yne(t,e,n){var r=-1,a=BZ,s=t.length,o=!0,i=[],l=i;if(n)o=!1,a=Kte;else if(s>=vne){var c=e?null:hne(t);if(c)return vS(c);o=!1,a=nL,l=new Bf}else l=e?[]:i;e:for(;++r<s;){var u=t[r],f=e?e(u):u;if(u=n||u!==0?u:0,o&&f===f){for(var d=l.length;d--;)if(l[d]===f)continue e;e&&l.push(f),i.push(u)}else a(l,f,n)||(l!==i&&l.push(f),i.push(u))}return i}var H0=BD(function(t){return yne(md(t,1,cL,!0))});const Kn=t=>t===void 0,Wn=t=>typeof t=="boolean",Xe=t=>typeof t=="number",Sa=t=>!t&&t!==0||Be(t)&&t.length===0||pt(t)&&!Object.keys(t).length,_a=t=>typeof Element>"u"?!1:t instanceof Element,mne=t=>er(t),Cne=t=>tt(t)?!Number.isNaN(Number(t)):!1,yS=(t="")=>t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),Ss=t=>dd(t),Kc=t=>Object.keys(t),Sne=t=>Object.entries(t),ug=(t,e,n)=>({get value(){return Vn(t,e,n)},set value(r){dne(t,e,r)}});class bne extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function Yn(t,e){throw new bne(`[${t}] ${e}`)}const gL=(t="")=>t.split(" ").filter(e=>!!e.trim()),rs=(t,e)=>{if(!t||!e)return!1;if(e.includes(" "))throw new Error("className should not contain space.");return t.classList.contains(e)},wa=(t,e)=>{!t||!e.trim()||t.classList.add(...gL(e))},Mr=(t,e)=>{!t||!e.trim()||t.classList.remove(...gL(e))},qo=(t,e)=>{var n;if(!Ot||!t||!e)return"";let r=Ma(e);r==="float"&&(r="cssFloat");try{const a=t.style[r];if(a)return a;const s=(n=document.defaultView)==null?void 0:n.getComputedStyle(t,"");return s?s[r]:""}catch{return t.style[r]}};function Bn(t,e="px"){if(!t)return"";if(Xe(t)||Cne(t))return`${t}${e}`;if(tt(t))return t}const wne=(t,e)=>{if(!Ot)return!1;const n={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(e)],r=qo(t,n);return["scroll","auto","overlay"].some(a=>r.includes(a))},mS=(t,e)=>{if(!Ot)return;let n=t;for(;n;){if([window,document,document.documentElement].includes(n))return window;if(wne(n,e))return n;n=n.parentNode}return n};let vp;const hL=t=>{var e;if(!Ot)return 0;if(vp!==void 0)return vp;const n=document.createElement("div");n.className=`${t}-scrollbar__wrap`,n.style.visibility="hidden",n.style.width="100px",n.style.position="absolute",n.style.top="-9999px",document.body.appendChild(n);const r=n.offsetWidth;n.style.overflow="scroll";const a=document.createElement("div");a.style.width="100%",n.appendChild(a);const s=a.offsetWidth;return(e=n.parentNode)==null||e.removeChild(n),vp=r-s,vp};function vL(t,e){if(!Ot)return;if(!e){t.scrollTop=0;return}const n=[];let r=e.offsetParent;for(;r!==null&&t!==r&&t.contains(r);)n.push(r),r=r.offsetParent;const a=e.offsetTop+n.reduce((l,c)=>l+c.offsetTop,0),s=a+e.offsetHeight,o=t.scrollTop,i=o+t.clientHeight;a<o?t.scrollTop=a:s>i&&(t.scrollTop=s-t.clientHeight)}/*! Element Plus Icons Vue v2.3.1 */var Tne=q({name:"ArrowDown",__name:"arrow-down",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"})]))}}),bo=Tne,xne=q({name:"ArrowLeft",__name:"arrow-left",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"})]))}}),ui=xne,Ene=q({name:"ArrowRight",__name:"arrow-right",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),Wr=Ene,kne=q({name:"ArrowUp",__name:"arrow-up",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),CS=kne,One=q({name:"Back",__name:"back",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64"}),H("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312z"})]))}}),Mne=One,Rne=q({name:"Calendar",__name:"calendar",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64"})]))}}),_ne=Rne,Vne=q({name:"CaretRight",__name:"caret-right",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"})]))}}),yL=Vne,Dne=q({name:"CaretTop",__name:"caret-top",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"})]))}}),Lne=Dne,Nne=q({name:"Check",__name:"check",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),Cd=Nne,Bne=q({name:"CircleCheckFilled",__name:"circle-check-filled",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),Fne=Bne,$ne=q({name:"CircleCheck",__name:"circle-check",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),H("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),SS=$ne,Une=q({name:"CircleCloseFilled",__name:"circle-close-filled",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),bS=Une,Ane=q({name:"CircleClose",__name:"circle-close",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),H("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),vi=Ane,Wne=q({name:"Clock",__name:"clock",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),H("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32"}),H("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32"})]))}}),mL=Wne,Ine=q({name:"Close",__name:"close",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),as=Ine,Pne=q({name:"DArrowLeft",__name:"d-arrow-left",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"})]))}}),jc=Pne,Gne=q({name:"DArrowRight",__name:"d-arrow-right",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688m-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"})]))}}),Yc=Gne,zne=q({name:"Delete",__name:"delete",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),Hne=zne,Kne=q({name:"Document",__name:"document",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),jne=Kne,Yne=q({name:"FullScreen",__name:"full-screen",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z"})]))}}),qne=Yne,Xne=q({name:"Hide",__name:"hide",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"}),H("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"})]))}}),Zne=Xne,Jne=q({name:"InfoFilled",__name:"info-filled",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),wS=Jne,Qne=q({name:"Loading",__name:"loading",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),yi=Qne,ere=q({name:"Minus",__name:"minus",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),tre=ere,nre=q({name:"MoreFilled",__name:"more-filled",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224"})]))}}),cx=nre,rre=q({name:"More",__name:"more",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96"})]))}}),are=rre,sre=q({name:"PictureFilled",__name:"picture-filled",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112M256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384"})]))}}),ore=sre,ire=q({name:"Plus",__name:"plus",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),CL=ire,lre=q({name:"QuestionFilled",__name:"question-filled",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"})]))}}),cre=lre,ure=q({name:"RefreshLeft",__name:"refresh-left",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"})]))}}),fre=ure,dre=q({name:"RefreshRight",__name:"refresh-right",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"})]))}}),pre=dre,gre=q({name:"ScaleToOriginal",__name:"scale-to-original",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118M512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412M512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512"})]))}}),hre=gre,vre=q({name:"Search",__name:"search",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"})]))}}),yre=vre,mre=q({name:"SortDown",__name:"sort-down",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M576 96v709.568L333.312 562.816A32 32 0 1 0 288 608l297.408 297.344A32 32 0 0 0 640 882.688V96a32 32 0 0 0-64 0"})]))}}),Cre=mre,Sre=q({name:"SortUp",__name:"sort-up",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M384 141.248V928a32 32 0 1 0 64 0V218.56l242.688 242.688A32 32 0 1 0 736 416L438.592 118.656A32 32 0 0 0 384 141.248"})]))}}),bre=Sre,wre=q({name:"StarFilled",__name:"star-filled",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M283.84 867.84 512 747.776l228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72z"})]))}}),yp=wre,Tre=q({name:"Star",__name:"star",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"})]))}}),xre=Tre,Ere=q({name:"SuccessFilled",__name:"success-filled",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),SL=Ere,kre=q({name:"View",__name:"view",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),Ore=kre,Mre=q({name:"WarningFilled",__name:"warning-filled",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),Lv=Mre,Rre=q({name:"ZoomIn",__name:"zoom-in",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),bL=Rre,_re=q({name:"ZoomOut",__name:"zoom-out",setup(t){return(e,n)=>(V(),z("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[H("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704M352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64"})]))}}),Vre=_re;const wL="__epPropKey",Q=t=>t,Dre=t=>pt(t)&&!!t[wL],os=(t,e)=>{if(!pt(t)||Dre(t))return t;const{values:n,required:r,default:a,type:s,validator:o}=t,l={type:s,required:!!r,validator:n||o?c=>{let u=!1,f=[];if(n&&(f=Array.from(n),Et(t,"default")&&f.push(a),u||(u=f.includes(c))),o&&(u||(u=o(c))),!u&&f.length>0){const d=[...new Set(f)].map(p=>JSON.stringify(p)).join(", ");mq(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${d}], got value ${JSON.stringify(c)}.`)}return u}:void 0,[wL]:!0};return Et(t,"default")&&(l.default=a),l},Re=t=>Th(Object.entries(t).map(([e,n])=>[e,os(n,e)])),Zt=Q([String,Object,Function]),TS={Close:as},xS={Close:as,SuccessFilled:SL,InfoFilled:wS,WarningFilled:Lv,CircleCloseFilled:bS},fi={success:SL,warning:Lv,error:bS,info:wS},ES={validating:yi,success:SS,error:vi},lt=(t,e)=>{if(t.install=n=>{for(const r of[t,...Object.values(e??{})])n.component(r.name,r)},e)for(const[n,r]of Object.entries(e))t[n]=r;return t},TL=(t,e)=>(t.install=n=>{t._context=n._context,n.config.globalProperties[e]=t},t),Lre=(t,e)=>(t.install=n=>{n.directive(e,t)},t),bn=t=>(t.install=zt,t),Nv=(...t)=>e=>{t.forEach(n=>{Je(n)?n(e):n.value=e})},He={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},Nre=["year","month","date","dates","week","datetime","datetimerange","daterange","monthrange"],K0=["sun","mon","tue","wed","thu","fri","sat"],ut="update:modelValue",pn="change",Ir="input",ux=Symbol("INSTALLED_KEY"),Ns=["","default","small","large"],xL=t=>["",...Ns].includes(t);var ya=(t=>(t[t.TEXT=1]="TEXT",t[t.CLASS=2]="CLASS",t[t.STYLE=4]="STYLE",t[t.PROPS=8]="PROPS",t[t.FULL_PROPS=16]="FULL_PROPS",t[t.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",t[t.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",t[t.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",t[t.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",t[t.NEED_PATCH=512]="NEED_PATCH",t[t.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",t[t.HOISTED=-1]="HOISTED",t[t.BAIL=-2]="BAIL",t))(ya||{});function Sm(t){return yn(t)&&t.type===Ue}function Bre(t){return yn(t)&&t.type===Ar}function Fre(t){return yn(t)&&!Sm(t)&&!Bre(t)}const $re=t=>{if(!yn(t))return{};const e=t.props||{},n=(yn(t.type)?t.type.props:void 0)||{},r={};return Object.keys(n).forEach(a=>{Et(n[a],"default")&&(r[a]=n[a].default)}),Object.keys(e).forEach(a=>{r[Ma(a)]=e[a]}),r},Ure=t=>{if(!Be(t)||t.length>1)throw new Error("expect to receive a single Vue element child");return t[0]},ri=t=>{const e=Be(t)?t:[t],n=[];return e.forEach(r=>{var a;Be(r)?n.push(...ri(r)):yn(r)&&Be(r.children)?n.push(...ri(r.children)):(n.push(r),yn(r)&&((a=r.component)!=null&&a.subTree)&&n.push(...ri(r.component.subTree)))}),n},fx=t=>[...new Set(t)],ro=t=>!t&&t!==0?[]:Array.isArray(t)?t:[t],kS=t=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(t),qc=t=>Ot?window.requestAnimationFrame(t):setTimeout(t,16),Bv=t=>Ot?window.cancelAnimationFrame(t):clearTimeout(t),mn=t=>t,Are=["class","style"],Wre=/^on[A-Z]/,OS=(t={})=>{const{excludeListeners:e=!1,excludeKeys:n}=t,r=R(()=>((n==null?void 0:n.value)||[]).concat(Are)),a=ot();return R(a?()=>{var s;return Th(Object.entries((s=a.proxy)==null?void 0:s.$attrs).filter(([o])=>!r.value.includes(o)&&!(e&&Wre.test(o))))}:()=>({}))},uo=({from:t,replacement:e,scope:n,version:r,ref:a,type:s="API"},o)=>{pe(()=>v(o),i=>{},{immediate:!0})},EL=(t,e,n,r)=>{let a={offsetX:0,offsetY:0};const s=l=>{const c=l.clientX,u=l.clientY,{offsetX:f,offsetY:d}=a,p=t.value.getBoundingClientRect(),h=p.left,g=p.top,y=p.width,m=p.height,b=document.documentElement.clientWidth,C=document.documentElement.clientHeight,S=-h+f,T=-g+d,w=b-h-y+f,x=C-g-m+d,E=k=>{let M=f+k.clientX-c,D=d+k.clientY-u;r!=null&&r.value||(M=Math.min(Math.max(M,S),w),D=Math.min(Math.max(D,T),x)),a={offsetX:M,offsetY:D},t.value&&(t.value.style.transform=`translate(${Bn(M)}, ${Bn(D)})`)},O=()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",O)};document.addEventListener("mousemove",E),document.addEventListener("mouseup",O)},o=()=>{e.value&&t.value&&e.value.addEventListener("mousedown",s)},i=()=>{e.value&&t.value&&e.value.removeEventListener("mousedown",s)};at(()=>{Sr(()=>{n.value?o():i()})}),ln(()=>{i()})};var Ire={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const Pre=t=>(e,n)=>Gre(e,n,v(t)),Gre=(t,e,n)=>Vn(n,t,t).replace(/\{(\w+)\}/g,(r,a)=>{var s;return`${(s=e==null?void 0:e[a])!=null?s:`{${a}}`}`}),zre=t=>{const e=R(()=>v(t).name),n=cn(t)?t:P(t);return{lang:e,locale:n,t:Pre(t)}},kL=Symbol("localeContextKey"),Mt=t=>{const e=t||We(kL,P());return zre(R(()=>e.value||Ire))},cf="el",Hre="is-",Vi=(t,e,n,r,a)=>{let s=`${t}-${e}`;return n&&(s+=`-${n}`),r&&(s+=`__${r}`),a&&(s+=`--${a}`),s},OL=Symbol("namespaceContextKey"),MS=t=>{const e=t||(ot()?We(OL,P(cf)):P(cf));return R(()=>v(e)||cf)},Ce=(t,e)=>{const n=MS(e);return{namespace:n,b:(g="")=>Vi(n.value,t,g,"",""),e:g=>g?Vi(n.value,t,"",g,""):"",m:g=>g?Vi(n.value,t,"","",g):"",be:(g,y)=>g&&y?Vi(n.value,t,g,y,""):"",em:(g,y)=>g&&y?Vi(n.value,t,"",g,y):"",bm:(g,y)=>g&&y?Vi(n.value,t,g,"",y):"",bem:(g,y,m)=>g&&y&&m?Vi(n.value,t,g,y,m):"",is:(g,...y)=>{const m=y.length>=1?y[0]:!0;return g&&m?`${Hre}${g}`:""},cssVar:g=>{const y={};for(const m in g)g[m]&&(y[`--${n.value}-${m}`]=g[m]);return y},cssVarName:g=>`--${n.value}-${g}`,cssVarBlock:g=>{const y={};for(const m in g)g[m]&&(y[`--${n.value}-${t}-${m}`]=g[m]);return y},cssVarBlockName:g=>`--${n.value}-${t}-${g}`}},RS=(t,e={})=>{cn(t)||Yn("[useLockscreen]","You need to pass a ref param to this function");const n=e.ns||Ce("popup"),r=EV(()=>n.bm("parent","hidden"));if(!Ot||rs(document.body,r.value))return;let a=0,s=!1,o="0";const i=()=>{setTimeout(()=>{Mr(document==null?void 0:document.body,r.value),s&&document&&(document.body.style.width=o)},200)};pe(t,l=>{if(!l){i();return}s=!rs(document.body,r.value),s&&(o=document.body.style.width),a=hL(n.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,u=qo(document.body,"overflowY");a>0&&(c||u==="scroll")&&s&&(document.body.style.width=`calc(100% - ${a}px)`),wa(document.body,r.value)}),uV(()=>i())},Kre=os({type:Q(Boolean),default:null}),jre=os({type:Q(Function)}),ML=t=>{const e=`update:${t}`,n=`onUpdate:${t}`,r=[e],a={[t]:Kre,[n]:jre};return{useModelToggle:({indicator:o,toggleReason:i,shouldHideWhenRouteChanges:l,shouldProceed:c,onShow:u,onHide:f})=>{const d=ot(),{emit:p}=d,h=d.props,g=R(()=>Je(h[n])),y=R(()=>h[t]===null),m=x=>{o.value!==!0&&(o.value=!0,i&&(i.value=x),Je(u)&&u(x))},b=x=>{o.value!==!1&&(o.value=!1,i&&(i.value=x),Je(f)&&f(x))},C=x=>{if(h.disabled===!0||Je(c)&&!c())return;const E=g.value&&Ot;E&&p(e,!0),(y.value||!E)&&m(x)},S=x=>{if(h.disabled===!0||!Ot)return;const E=g.value&&Ot;E&&p(e,!1),(y.value||!E)&&b(x)},T=x=>{Wn(x)&&(h.disabled&&x?g.value&&p(e,!1):o.value!==x&&(x?m():b()))},w=()=>{o.value?S():C()};return pe(()=>h[t],T),l&&d.appContext.config.globalProperties.$route!==void 0&&pe(()=>({...d.proxy.$route}),()=>{l.value&&o.value&&S()}),at(()=>{T(h[t])}),{hide:S,show:C,toggle:w,hasUpdateHandler:g}},useModelToggleProps:a,useModelToggleEmits:r}};ML("modelValue");const RL=t=>{const e=ot();return R(()=>{var n,r;return(r=(n=e==null?void 0:e.proxy)==null?void 0:n.$props)==null?void 0:r[t]})};var Jr="top",Va="bottom",Da="right",Qr="left",_S="auto",Sd=[Jr,Va,Da,Qr],Xc="start",Ff="end",Yre="clippingParents",_L="viewport",Mu="popper",qre="reference",dx=Sd.reduce(function(t,e){return t.concat([e+"-"+Xc,e+"-"+Ff])},[]),Al=[].concat(Sd,[_S]).reduce(function(t,e){return t.concat([e,e+"-"+Xc,e+"-"+Ff])},[]),Xre="beforeRead",Zre="read",Jre="afterRead",Qre="beforeMain",eae="main",tae="afterMain",nae="beforeWrite",rae="write",aae="afterWrite",sae=[Xre,Zre,Jre,Qre,eae,tae,nae,rae,aae];function _s(t){return t?(t.nodeName||"").toLowerCase():null}function is(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Zc(t){var e=is(t).Element;return t instanceof e||t instanceof Element}function Ea(t){var e=is(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function VS(t){if(typeof ShadowRoot>"u")return!1;var e=is(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function oae(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},a=e.attributes[n]||{},s=e.elements[n];!Ea(s)||!_s(s)||(Object.assign(s.style,r),Object.keys(a).forEach(function(o){var i=a[o];i===!1?s.removeAttribute(o):s.setAttribute(o,i===!0?"":i)}))})}function iae(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var a=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),i=o.reduce(function(l,c){return l[c]="",l},{});!Ea(a)||!_s(a)||(Object.assign(a.style,i),Object.keys(s).forEach(function(l){a.removeAttribute(l)}))})}}var VL={name:"applyStyles",enabled:!0,phase:"write",fn:oae,effect:iae,requires:["computeStyles"]};function Os(t){return t.split("-")[0]}var pl=Math.max,xh=Math.min,Jc=Math.round;function Qc(t,e){e===void 0&&(e=!1);var n=t.getBoundingClientRect(),r=1,a=1;if(Ea(t)&&e){var s=t.offsetHeight,o=t.offsetWidth;o>0&&(r=Jc(n.width)/o||1),s>0&&(a=Jc(n.height)/s||1)}return{width:n.width/r,height:n.height/a,top:n.top/a,right:n.right/r,bottom:n.bottom/a,left:n.left/r,x:n.left/r,y:n.top/a}}function DS(t){var e=Qc(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function DL(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&VS(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function fo(t){return is(t).getComputedStyle(t)}function lae(t){return["table","td","th"].indexOf(_s(t))>=0}function mi(t){return((Zc(t)?t.ownerDocument:t.document)||window.document).documentElement}function Fv(t){return _s(t)==="html"?t:t.assignedSlot||t.parentNode||(VS(t)?t.host:null)||mi(t)}function px(t){return!Ea(t)||fo(t).position==="fixed"?null:t.offsetParent}function cae(t){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&Ea(t)){var r=fo(t);if(r.position==="fixed")return null}var a=Fv(t);for(VS(a)&&(a=a.host);Ea(a)&&["html","body"].indexOf(_s(a))<0;){var s=fo(a);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return a;a=a.parentNode}return null}function bd(t){for(var e=is(t),n=px(t);n&&lae(n)&&fo(n).position==="static";)n=px(n);return n&&(_s(n)==="html"||_s(n)==="body"&&fo(n).position==="static")?e:n||cae(t)||e}function LS(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function uf(t,e,n){return pl(t,xh(e,n))}function uae(t,e,n){var r=uf(t,e,n);return r>n?n:r}function LL(){return{top:0,right:0,bottom:0,left:0}}function NL(t){return Object.assign({},LL(),t)}function BL(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var fae=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,NL(typeof t!="number"?t:BL(t,Sd))};function dae(t){var e,n=t.state,r=t.name,a=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,i=Os(n.placement),l=LS(i),c=[Qr,Da].indexOf(i)>=0,u=c?"height":"width";if(!(!s||!o)){var f=fae(a.padding,n),d=DS(s),p=l==="y"?Jr:Qr,h=l==="y"?Va:Da,g=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],y=o[l]-n.rects.reference[l],m=bd(s),b=m?l==="y"?m.clientHeight||0:m.clientWidth||0:0,C=g/2-y/2,S=f[p],T=b-d[u]-f[h],w=b/2-d[u]/2+C,x=uf(S,w,T),E=l;n.modifiersData[r]=(e={},e[E]=x,e.centerOffset=x-w,e)}}function pae(t){var e=t.state,n=t.options,r=n.element,a=r===void 0?"[data-popper-arrow]":r;a!=null&&(typeof a=="string"&&(a=e.elements.popper.querySelector(a),!a)||!DL(e.elements.popper,a)||(e.elements.arrow=a))}var gae={name:"arrow",enabled:!0,phase:"main",fn:dae,effect:pae,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function eu(t){return t.split("-")[1]}var hae={top:"auto",right:"auto",bottom:"auto",left:"auto"};function vae(t){var e=t.x,n=t.y,r=window,a=r.devicePixelRatio||1;return{x:Jc(e*a)/a||0,y:Jc(n*a)/a||0}}function gx(t){var e,n=t.popper,r=t.popperRect,a=t.placement,s=t.variation,o=t.offsets,i=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,f=t.isFixed,d=o.x,p=d===void 0?0:d,h=o.y,g=h===void 0?0:h,y=typeof u=="function"?u({x:p,y:g}):{x:p,y:g};p=y.x,g=y.y;var m=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),C=Qr,S=Jr,T=window;if(c){var w=bd(n),x="clientHeight",E="clientWidth";if(w===is(n)&&(w=mi(n),fo(w).position!=="static"&&i==="absolute"&&(x="scrollHeight",E="scrollWidth")),w=w,a===Jr||(a===Qr||a===Da)&&s===Ff){S=Va;var O=f&&w===T&&T.visualViewport?T.visualViewport.height:w[x];g-=O-r.height,g*=l?1:-1}if(a===Qr||(a===Jr||a===Va)&&s===Ff){C=Da;var k=f&&w===T&&T.visualViewport?T.visualViewport.width:w[E];p-=k-r.width,p*=l?1:-1}}var M=Object.assign({position:i},c&&hae),D=u===!0?vae({x:p,y:g}):{x:p,y:g};if(p=D.x,g=D.y,l){var I;return Object.assign({},M,(I={},I[S]=b?"0":"",I[C]=m?"0":"",I.transform=(T.devicePixelRatio||1)<=1?"translate("+p+"px, "+g+"px)":"translate3d("+p+"px, "+g+"px, 0)",I))}return Object.assign({},M,(e={},e[S]=b?g+"px":"",e[C]=m?p+"px":"",e.transform="",e))}function yae(t){var e=t.state,n=t.options,r=n.gpuAcceleration,a=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,i=n.roundOffsets,l=i===void 0?!0:i,c={placement:Os(e.placement),variation:eu(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,gx(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,gx(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var FL={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:yae,data:{}},mp={passive:!0};function mae(t){var e=t.state,n=t.instance,r=t.options,a=r.scroll,s=a===void 0?!0:a,o=r.resize,i=o===void 0?!0:o,l=is(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,mp)}),i&&l.addEventListener("resize",n.update,mp),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,mp)}),i&&l.removeEventListener("resize",n.update,mp)}}var $L={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:mae,data:{}},Cae={left:"right",right:"left",bottom:"top",top:"bottom"};function fg(t){return t.replace(/left|right|bottom|top/g,function(e){return Cae[e]})}var Sae={start:"end",end:"start"};function hx(t){return t.replace(/start|end/g,function(e){return Sae[e]})}function NS(t){var e=is(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function BS(t){return Qc(mi(t)).left+NS(t).scrollLeft}function bae(t){var e=is(t),n=mi(t),r=e.visualViewport,a=n.clientWidth,s=n.clientHeight,o=0,i=0;return r&&(a=r.width,s=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,i=r.offsetTop)),{width:a,height:s,x:o+BS(t),y:i}}function wae(t){var e,n=mi(t),r=NS(t),a=(e=t.ownerDocument)==null?void 0:e.body,s=pl(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=pl(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),i=-r.scrollLeft+BS(t),l=-r.scrollTop;return fo(a||n).direction==="rtl"&&(i+=pl(n.clientWidth,a?a.clientWidth:0)-s),{width:s,height:o,x:i,y:l}}function FS(t){var e=fo(t),n=e.overflow,r=e.overflowX,a=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+r)}function UL(t){return["html","body","#document"].indexOf(_s(t))>=0?t.ownerDocument.body:Ea(t)&&FS(t)?t:UL(Fv(t))}function ff(t,e){var n;e===void 0&&(e=[]);var r=UL(t),a=r===((n=t.ownerDocument)==null?void 0:n.body),s=is(r),o=a?[s].concat(s.visualViewport||[],FS(r)?r:[]):r,i=e.concat(o);return a?i:i.concat(ff(Fv(o)))}function bm(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Tae(t){var e=Qc(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}function vx(t,e){return e===_L?bm(bae(t)):Zc(e)?Tae(e):bm(wae(mi(t)))}function xae(t){var e=ff(Fv(t)),n=["absolute","fixed"].indexOf(fo(t).position)>=0,r=n&&Ea(t)?bd(t):t;return Zc(r)?e.filter(function(a){return Zc(a)&&DL(a,r)&&_s(a)!=="body"}):[]}function Eae(t,e,n){var r=e==="clippingParents"?xae(t):[].concat(e),a=[].concat(r,[n]),s=a[0],o=a.reduce(function(i,l){var c=vx(t,l);return i.top=pl(c.top,i.top),i.right=xh(c.right,i.right),i.bottom=xh(c.bottom,i.bottom),i.left=pl(c.left,i.left),i},vx(t,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function AL(t){var e=t.reference,n=t.element,r=t.placement,a=r?Os(r):null,s=r?eu(r):null,o=e.x+e.width/2-n.width/2,i=e.y+e.height/2-n.height/2,l;switch(a){case Jr:l={x:o,y:e.y-n.height};break;case Va:l={x:o,y:e.y+e.height};break;case Da:l={x:e.x+e.width,y:i};break;case Qr:l={x:e.x-n.width,y:i};break;default:l={x:e.x,y:e.y}}var c=a?LS(a):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case Xc:l[c]=l[c]-(e[u]/2-n[u]/2);break;case Ff:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function $f(t,e){e===void 0&&(e={});var n=e,r=n.placement,a=r===void 0?t.placement:r,s=n.boundary,o=s===void 0?Yre:s,i=n.rootBoundary,l=i===void 0?_L:i,c=n.elementContext,u=c===void 0?Mu:c,f=n.altBoundary,d=f===void 0?!1:f,p=n.padding,h=p===void 0?0:p,g=NL(typeof h!="number"?h:BL(h,Sd)),y=u===Mu?qre:Mu,m=t.rects.popper,b=t.elements[d?y:u],C=Eae(Zc(b)?b:b.contextElement||mi(t.elements.popper),o,l),S=Qc(t.elements.reference),T=AL({reference:S,element:m,strategy:"absolute",placement:a}),w=bm(Object.assign({},m,T)),x=u===Mu?w:S,E={top:C.top-x.top+g.top,bottom:x.bottom-C.bottom+g.bottom,left:C.left-x.left+g.left,right:x.right-C.right+g.right},O=t.modifiersData.offset;if(u===Mu&&O){var k=O[a];Object.keys(E).forEach(function(M){var D=[Da,Va].indexOf(M)>=0?1:-1,I=[Jr,Va].indexOf(M)>=0?"y":"x";E[M]+=k[I]*D})}return E}function kae(t,e){e===void 0&&(e={});var n=e,r=n.placement,a=n.boundary,s=n.rootBoundary,o=n.padding,i=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?Al:l,u=eu(r),f=u?i?dx:dx.filter(function(h){return eu(h)===u}):Sd,d=f.filter(function(h){return c.indexOf(h)>=0});d.length===0&&(d=f);var p=d.reduce(function(h,g){return h[g]=$f(t,{placement:g,boundary:a,rootBoundary:s,padding:o})[Os(g)],h},{});return Object.keys(p).sort(function(h,g){return p[h]-p[g]})}function Oae(t){if(Os(t)===_S)return[];var e=fg(t);return[hx(t),e,hx(e)]}function Mae(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var a=n.mainAxis,s=a===void 0?!0:a,o=n.altAxis,i=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,f=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,h=p===void 0?!0:p,g=n.allowedAutoPlacements,y=e.options.placement,m=Os(y),b=m===y,C=l||(b||!h?[fg(y)]:Oae(y)),S=[y].concat(C).reduce(function(te,ve){return te.concat(Os(ve)===_S?kae(e,{placement:ve,boundary:u,rootBoundary:f,padding:c,flipVariations:h,allowedAutoPlacements:g}):ve)},[]),T=e.rects.reference,w=e.rects.popper,x=new Map,E=!0,O=S[0],k=0;k<S.length;k++){var M=S[k],D=Os(M),I=eu(M)===Xc,B=[Jr,Va].indexOf(D)>=0,F=B?"width":"height",$=$f(e,{placement:M,boundary:u,rootBoundary:f,altBoundary:d,padding:c}),N=B?I?Da:Qr:I?Va:Jr;T[F]>w[F]&&(N=fg(N));var W=fg(N),_=[];if(s&&_.push($[D]<=0),i&&_.push($[N]<=0,$[W]<=0),_.every(function(te){return te})){O=M,E=!1;break}x.set(M,_)}if(E)for(var L=h?3:1,G=function(te){var ve=S.find(function(se){var ie=x.get(se);if(ie)return ie.slice(0,te).every(function(re){return re})});if(ve)return O=ve,"break"},K=L;K>0;K--){var Y=G(K);if(Y==="break")break}e.placement!==O&&(e.modifiersData[r]._skip=!0,e.placement=O,e.reset=!0)}}var Rae={name:"flip",enabled:!0,phase:"main",fn:Mae,requiresIfExists:["offset"],data:{_skip:!1}};function yx(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function mx(t){return[Jr,Da,Va,Qr].some(function(e){return t[e]>=0})}function _ae(t){var e=t.state,n=t.name,r=e.rects.reference,a=e.rects.popper,s=e.modifiersData.preventOverflow,o=$f(e,{elementContext:"reference"}),i=$f(e,{altBoundary:!0}),l=yx(o,r),c=yx(i,a,s),u=mx(l),f=mx(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}var Vae={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:_ae};function Dae(t,e,n){var r=Os(t),a=[Qr,Jr].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],i=s[1];return o=o||0,i=(i||0)*a,[Qr,Da].indexOf(r)>=0?{x:i,y:o}:{x:o,y:i}}function Lae(t){var e=t.state,n=t.options,r=t.name,a=n.offset,s=a===void 0?[0,0]:a,o=Al.reduce(function(u,f){return u[f]=Dae(f,e.rects,s),u},{}),i=o[e.placement],l=i.x,c=i.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}var Nae={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Lae};function Bae(t){var e=t.state,n=t.name;e.modifiersData[n]=AL({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var WL={name:"popperOffsets",enabled:!0,phase:"read",fn:Bae,data:{}};function Fae(t){return t==="x"?"y":"x"}function $ae(t){var e=t.state,n=t.options,r=t.name,a=n.mainAxis,s=a===void 0?!0:a,o=n.altAxis,i=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,f=n.padding,d=n.tether,p=d===void 0?!0:d,h=n.tetherOffset,g=h===void 0?0:h,y=$f(e,{boundary:l,rootBoundary:c,padding:f,altBoundary:u}),m=Os(e.placement),b=eu(e.placement),C=!b,S=LS(m),T=Fae(S),w=e.modifiersData.popperOffsets,x=e.rects.reference,E=e.rects.popper,O=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,k=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),M=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,D={x:0,y:0};if(w){if(s){var I,B=S==="y"?Jr:Qr,F=S==="y"?Va:Da,$=S==="y"?"height":"width",N=w[S],W=N+y[B],_=N-y[F],L=p?-E[$]/2:0,G=b===Xc?x[$]:E[$],K=b===Xc?-E[$]:-x[$],Y=e.elements.arrow,te=p&&Y?DS(Y):{width:0,height:0},ve=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:LL(),se=ve[B],ie=ve[F],re=uf(0,x[$],te[$]),be=C?x[$]/2-L-re-se-k.mainAxis:G-re-se-k.mainAxis,ge=C?-x[$]/2+L+re+ie+k.mainAxis:K+re+ie+k.mainAxis,Se=e.elements.arrow&&bd(e.elements.arrow),De=Se?S==="y"?Se.clientTop||0:Se.clientLeft||0:0,X=(I=M==null?void 0:M[S])!=null?I:0,ne=N+be-X-De,me=N+ge-X,Ee=uf(p?xh(W,ne):W,N,p?pl(_,me):_);w[S]=Ee,D[S]=Ee-N}if(i){var de,xe=S==="x"?Jr:Qr,ke=S==="x"?Va:Da,ye=w[T],_e=T==="y"?"height":"width",Oe=ye+y[xe],Fe=ye-y[ke],ze=[Jr,Qr].indexOf(m)!==-1,he=(de=M==null?void 0:M[T])!=null?de:0,Ae=ze?Oe:ye-x[_e]-E[_e]-he+k.altAxis,qe=ze?ye+x[_e]+E[_e]-he-k.altAxis:Fe,st=p&&ze?uae(Ae,ye,qe):uf(p?Ae:Oe,ye,p?qe:Fe);w[T]=st,D[T]=st-ye}e.modifiersData[r]=D}}var Uae={name:"preventOverflow",enabled:!0,phase:"main",fn:$ae,requiresIfExists:["offset"]};function Aae(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Wae(t){return t===is(t)||!Ea(t)?NS(t):Aae(t)}function Iae(t){var e=t.getBoundingClientRect(),n=Jc(e.width)/t.offsetWidth||1,r=Jc(e.height)/t.offsetHeight||1;return n!==1||r!==1}function Pae(t,e,n){n===void 0&&(n=!1);var r=Ea(e),a=Ea(e)&&Iae(e),s=mi(e),o=Qc(t,a),i={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((_s(e)!=="body"||FS(s))&&(i=Wae(e)),Ea(e)?(l=Qc(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=BS(s))),{x:o.left+i.scrollLeft-l.x,y:o.top+i.scrollTop-l.y,width:o.width,height:o.height}}function Gae(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function a(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(i){if(!n.has(i)){var l=e.get(i);l&&a(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||a(s)}),r}function zae(t){var e=Gae(t);return sae.reduce(function(n,r){return n.concat(e.filter(function(a){return a.phase===r}))},[])}function Hae(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Kae(t){var e=t.reduce(function(n,r){var a=n[r.name];return n[r.name]=a?Object.assign({},a,r,{options:Object.assign({},a.options,r.options),data:Object.assign({},a.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var Cx={placement:"bottom",modifiers:[],strategy:"absolute"};function Sx(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function $S(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,a=e.defaultOptions,s=a===void 0?Cx:a;return function(o,i,l){l===void 0&&(l=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Cx,s),modifiersData:{},elements:{reference:o,popper:i},attributes:{},styles:{}},u=[],f=!1,d={state:c,setOptions:function(g){var y=typeof g=="function"?g(c.options):g;h(),c.options=Object.assign({},s,c.options,y),c.scrollParents={reference:Zc(o)?ff(o):o.contextElement?ff(o.contextElement):[],popper:ff(i)};var m=zae(Kae([].concat(r,c.options.modifiers)));return c.orderedModifiers=m.filter(function(b){return b.enabled}),p(),d.update()},forceUpdate:function(){if(!f){var g=c.elements,y=g.reference,m=g.popper;if(Sx(y,m)){c.rects={reference:Pae(y,bd(m),c.options.strategy==="fixed"),popper:DS(m)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(E){return c.modifiersData[E.name]=Object.assign({},E.data)});for(var b=0;b<c.orderedModifiers.length;b++){if(c.reset===!0){c.reset=!1,b=-1;continue}var C=c.orderedModifiers[b],S=C.fn,T=C.options,w=T===void 0?{}:T,x=C.name;typeof S=="function"&&(c=S({state:c,options:w,name:x,instance:d})||c)}}}},update:Hae(function(){return new Promise(function(g){d.forceUpdate(),g(c)})}),destroy:function(){h(),f=!0}};if(!Sx(o,i))return d;d.setOptions(l).then(function(g){!f&&l.onFirstUpdate&&l.onFirstUpdate(g)});function p(){c.orderedModifiers.forEach(function(g){var y=g.name,m=g.options,b=m===void 0?{}:m,C=g.effect;if(typeof C=="function"){var S=C({state:c,name:y,instance:d,options:b}),T=function(){};u.push(S||T)}})}function h(){u.forEach(function(g){return g()}),u=[]}return d}}$S();var jae=[$L,WL,FL,VL];$S({defaultModifiers:jae});var Yae=[$L,WL,FL,VL,Nae,Rae,Uae,gae,Vae],qae=$S({defaultModifiers:Yae});const Xae=(t,e,n={})=>{const r={name:"updateState",enabled:!0,phase:"write",fn:({state:l})=>{const c=Zae(l);Object.assign(o.value,c)},requires:["computeStyles"]},a=R(()=>{const{onFirstUpdate:l,placement:c,strategy:u,modifiers:f}=v(n);return{onFirstUpdate:l,placement:c||"bottom",strategy:u||"absolute",modifiers:[...f||[],r,{name:"applyStyles",enabled:!1}]}}),s=on(),o=P({styles:{popper:{position:v(a).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),i=()=>{s.value&&(s.value.destroy(),s.value=void 0)};return pe(a,l=>{const c=v(s);c&&c.setOptions(l)},{deep:!0}),pe([t,e],([l,c])=>{i(),!(!l||!c)&&(s.value=qae(l,c,v(a)))}),ln(()=>{i()}),{state:R(()=>{var l;return{...((l=v(s))==null?void 0:l.state)||{}}}),styles:R(()=>v(o).styles),attributes:R(()=>v(o).attributes),update:()=>{var l;return(l=v(s))==null?void 0:l.update()},forceUpdate:()=>{var l;return(l=v(s))==null?void 0:l.forceUpdate()},instanceRef:R(()=>v(s))}};function Zae(t){const e=Object.keys(t.elements),n=Th(e.map(a=>[a,t.styles[a]||{}])),r=Th(e.map(a=>[a,t.attributes[a]]));return{styles:n,attributes:r}}const US=t=>{if(!t)return{onClick:zt,onMousedown:zt,onMouseup:zt};let e=!1,n=!1;return{onClick:o=>{e&&n&&t(o),e=n=!1},onMousedown:o=>{e=o.target===o.currentTarget},onMouseup:o=>{n=o.target===o.currentTarget}}},Jae=(t,e=0)=>{if(e===0)return t;const n=P(!1);let r=0;const a=()=>{r&&clearTimeout(r),r=window.setTimeout(()=>{n.value=t.value},e)};return at(a),pe(()=>t.value,s=>{s?a():n.value=s}),n};function bx(){let t;const e=(r,a)=>{n(),t=window.setTimeout(r,a)},n=()=>window.clearTimeout(t);return gd(()=>n()),{registerTimeout:e,cancelTimeout:n}}const wx={prefix:Math.floor(Math.random()*1e4),current:0},Qae=Symbol("elIdInjection"),AS=()=>ot()?We(Qae,wx):wx,Vr=t=>{const e=AS(),n=MS();return R(()=>v(t)||`${n.value}-id-${e.prefix}-${e.current++}`)};let oc=[];const Tx=t=>{const e=t;e.key===He.esc&&oc.forEach(n=>n(e))},ese=t=>{at(()=>{oc.length===0&&document.addEventListener("keydown",Tx),Ot&&oc.push(t)}),ln(()=>{oc=oc.filter(e=>e!==t),oc.length===0&&Ot&&document.removeEventListener("keydown",Tx)})};let xx;const IL=()=>{const t=MS(),e=AS(),n=R(()=>`${t.value}-popper-container-${e.prefix}`),r=R(()=>`#${n.value}`);return{id:n,selector:r}},tse=t=>{const e=document.createElement("div");return e.id=t,document.body.appendChild(e),e},nse=()=>{const{id:t,selector:e}=IL();return bv(()=>{Ot&&!xx&&!document.body.querySelector(e.value)&&(xx=tse(t.value))}),{id:t,selector:e}},rse=Re({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),ase=({showAfter:t,hideAfter:e,autoClose:n,open:r,close:a})=>{const{registerTimeout:s}=bx(),{registerTimeout:o,cancelTimeout:i}=bx();return{onOpen:u=>{s(()=>{r(u);const f=v(n);Xe(f)&&f>0&&o(()=>{a(u)},f)},v(t))},onClose:u=>{i(),s(()=>{a(u)},v(e))}}},PL=Symbol("elForwardRef"),sse=t=>{bt(PL,{setForwardRef:n=>{t.value=n}})},ose=t=>({mounted(e){t(e)},updated(e){t(e)},unmounted(){t(null)}}),Ex=P(0),GL=2e3,zL=Symbol("zIndexContextKey"),Cu=t=>{const e=t||(ot()?We(zL,void 0):void 0),n=R(()=>{const s=v(e);return Xe(s)?s:GL}),r=R(()=>n.value+Ex.value);return{initialZIndex:n,currentZIndex:r,nextZIndex:()=>(Ex.value++,r.value)}},tu=Math.min,gl=Math.max,Eh=Math.round,Cp=Math.floor,di=t=>({x:t,y:t}),ise={left:"right",right:"left",bottom:"top",top:"bottom"},lse={start:"end",end:"start"};function wm(t,e,n){return gl(t,tu(e,n))}function wd(t,e){return typeof t=="function"?t(e):t}function El(t){return t.split("-")[0]}function Td(t){return t.split("-")[1]}function HL(t){return t==="x"?"y":"x"}function WS(t){return t==="y"?"height":"width"}function $v(t){return["top","bottom"].includes(El(t))?"y":"x"}function IS(t){return HL($v(t))}function cse(t,e,n){n===void 0&&(n=!1);const r=Td(t),a=IS(t),s=WS(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=kh(o)),[o,kh(o)]}function use(t){const e=kh(t);return[Tm(t),e,Tm(e)]}function Tm(t){return t.replace(/start|end/g,e=>lse[e])}function fse(t,e,n){const r=["left","right"],a=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?a:r:e?r:a;case"left":case"right":return e?s:o;default:return[]}}function dse(t,e,n,r){const a=Td(t);let s=fse(El(t),n==="start",r);return a&&(s=s.map(o=>o+"-"+a),e&&(s=s.concat(s.map(Tm)))),s}function kh(t){return t.replace(/left|right|bottom|top/g,e=>ise[e])}function pse(t){return{top:0,right:0,bottom:0,left:0,...t}}function KL(t){return typeof t!="number"?pse(t):{top:t,right:t,bottom:t,left:t}}function Oh(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function kx(t,e,n){let{reference:r,floating:a}=t;const s=$v(e),o=IS(e),i=WS(o),l=El(e),c=s==="y",u=r.x+r.width/2-a.width/2,f=r.y+r.height/2-a.height/2,d=r[i]/2-a[i]/2;let p;switch(l){case"top":p={x:u,y:r.y-a.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-a.width,y:f};break;default:p={x:r.x,y:r.y}}switch(Td(e)){case"start":p[o]-=d*(n&&c?-1:1);break;case"end":p[o]+=d*(n&&c?-1:1);break}return p}const gse=async(t,e,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:s=[],platform:o}=n,i=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:a}),{x:u,y:f}=kx(c,r,l),d=r,p={},h=0;for(let g=0;g<i.length;g++){const{name:y,fn:m}=i[g],{x:b,y:C,data:S,reset:T}=await m({x:u,y:f,initialPlacement:r,placement:d,strategy:a,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=b??u,f=C??f,p={...p,[y]:{...p[y],...S}},T&&h<=50&&(h++,typeof T=="object"&&(T.placement&&(d=T.placement),T.rects&&(c=T.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:a}):T.rects),{x:u,y:f}=kx(c,d,l)),g=-1)}return{x:u,y:f,placement:d,strategy:a,middlewareData:p}};async function PS(t,e){var n;e===void 0&&(e={});const{x:r,y:a,platform:s,rects:o,elements:i,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:d=!1,padding:p=0}=wd(e,t),h=KL(p),y=i[d?f==="floating"?"reference":"floating":f],m=Oh(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(i.floating)),boundary:c,rootBoundary:u,strategy:l})),b=f==="floating"?{...o.floating,x:r,y:a}:o.reference,C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(i.floating)),S=await(s.isElement==null?void 0:s.isElement(C))?await(s.getScale==null?void 0:s.getScale(C))||{x:1,y:1}:{x:1,y:1},T=Oh(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:b,offsetParent:C,strategy:l}):b);return{top:(m.top-T.top+h.top)/S.y,bottom:(T.bottom-m.bottom+h.bottom)/S.y,left:(m.left-T.left+h.left)/S.x,right:(T.right-m.right+h.right)/S.x}}const hse=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:a,rects:s,platform:o,elements:i,middlewareData:l}=e,{element:c,padding:u=0}=wd(t,e)||{};if(c==null)return{};const f=KL(u),d={x:n,y:r},p=IS(a),h=WS(p),g=await o.getDimensions(c),y=p==="y",m=y?"top":"left",b=y?"bottom":"right",C=y?"clientHeight":"clientWidth",S=s.reference[h]+s.reference[p]-d[p]-s.floating[h],T=d[p]-s.reference[p],w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let x=w?w[C]:0;(!x||!await(o.isElement==null?void 0:o.isElement(w)))&&(x=i.floating[C]||s.floating[h]);const E=S/2-T/2,O=x/2-g[h]/2-1,k=tu(f[m],O),M=tu(f[b],O),D=k,I=x-g[h]-M,B=x/2-g[h]/2+E,F=wm(D,B,I),$=!l.arrow&&Td(a)!=null&&B!==F&&s.reference[h]/2-(B<D?k:M)-g[h]/2<0,N=$?B<D?B-D:B-I:0;return{[p]:d[p]+N,data:{[p]:F,centerOffset:B-F-N,...$&&{alignmentOffset:N}},reset:$}}}),vse=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:a,middlewareData:s,rects:o,initialPlacement:i,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:g=!0,...y}=wd(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const m=El(a),b=El(i)===i,C=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=d||(b||!g?[kh(i)]:use(i));!d&&h!=="none"&&S.push(...dse(i,g,h,C));const T=[i,...S],w=await PS(e,y),x=[];let E=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&x.push(w[m]),f){const D=cse(a,o,C);x.push(w[D[0]],w[D[1]])}if(E=[...E,{placement:a,overflows:x}],!x.every(D=>D<=0)){var O,k;const D=(((O=s.flip)==null?void 0:O.index)||0)+1,I=T[D];if(I)return{data:{index:D,overflows:E},reset:{placement:I}};let B=(k=E.filter(F=>F.overflows[0]<=0).sort((F,$)=>F.overflows[1]-$.overflows[1])[0])==null?void 0:k.placement;if(!B)switch(p){case"bestFit":{var M;const F=(M=E.map($=>[$.placement,$.overflows.filter(N=>N>0).reduce((N,W)=>N+W,0)]).sort(($,N)=>$[1]-N[1])[0])==null?void 0:M[0];F&&(B=F);break}case"initialPlacement":B=i;break}if(a!==B)return{reset:{placement:B}}}return{}}}};async function yse(t,e){const{placement:n,platform:r,elements:a}=t,s=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=El(n),i=Td(n),l=$v(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,f=wd(e,t);let{mainAxis:d,crossAxis:p,alignmentAxis:h}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return i&&typeof h=="number"&&(p=i==="end"?h*-1:h),l?{x:p*u,y:d*c}:{x:d*c,y:p*u}}const jL=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:a,y:s,placement:o,middlewareData:i}=e,l=await yse(e,t);return o===((n=i.offset)==null?void 0:n.placement)&&(r=i.arrow)!=null&&r.alignmentOffset?{}:{x:a+l.x,y:s+l.y,data:{...l,placement:o}}}}},mse=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:a}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:i={fn:y=>{let{x:m,y:b}=y;return{x:m,y:b}}},...l}=wd(t,e),c={x:n,y:r},u=await PS(e,l),f=$v(El(a)),d=HL(f);let p=c[d],h=c[f];if(s){const y=d==="y"?"top":"left",m=d==="y"?"bottom":"right",b=p+u[y],C=p-u[m];p=wm(b,p,C)}if(o){const y=f==="y"?"top":"left",m=f==="y"?"bottom":"right",b=h+u[y],C=h-u[m];h=wm(b,h,C)}const g=i.fn({...e,[d]:p,[f]:h});return{...g,data:{x:g.x-n,y:g.y-r}}}}};function pi(t){return YL(t)?(t.nodeName||"").toLowerCase():"#document"}function ua(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function wo(t){var e;return(e=(YL(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function YL(t){return t instanceof Node||t instanceof ua(t).Node}function po(t){return t instanceof Element||t instanceof ua(t).Element}function Vs(t){return t instanceof HTMLElement||t instanceof ua(t).HTMLElement}function Ox(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ua(t).ShadowRoot}function xd(t){const{overflow:e,overflowX:n,overflowY:r,display:a}=La(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(a)}function Cse(t){return["table","td","th"].includes(pi(t))}function GS(t){const e=zS(),n=La(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Sse(t){let e=nu(t);for(;Vs(e)&&!Uv(e);){if(GS(e))return e;e=nu(e)}return null}function zS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Uv(t){return["html","body","#document"].includes(pi(t))}function La(t){return ua(t).getComputedStyle(t)}function Av(t){return po(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function nu(t){if(pi(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Ox(t)&&t.host||wo(t);return Ox(e)?e.host:e}function qL(t){const e=nu(t);return Uv(e)?t.ownerDocument?t.ownerDocument.body:t.body:Vs(e)&&xd(e)?e:qL(e)}function Uf(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const a=qL(t),s=a===((r=t.ownerDocument)==null?void 0:r.body),o=ua(a);return s?e.concat(o,o.visualViewport||[],xd(a)?a:[],o.frameElement&&n?Uf(o.frameElement):[]):e.concat(a,Uf(a,[],n))}function XL(t){const e=La(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const a=Vs(t),s=a?t.offsetWidth:n,o=a?t.offsetHeight:r,i=Eh(n)!==s||Eh(r)!==o;return i&&(n=s,r=o),{width:n,height:r,$:i}}function HS(t){return po(t)?t:t.contextElement}function Mc(t){const e=HS(t);if(!Vs(e))return di(1);const n=e.getBoundingClientRect(),{width:r,height:a,$:s}=XL(e);let o=(s?Eh(n.width):n.width)/r,i=(s?Eh(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!i||!Number.isFinite(i))&&(i=1),{x:o,y:i}}const bse=di(0);function ZL(t){const e=ua(t);return!zS()||!e.visualViewport?bse:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function wse(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ua(t)?!1:e}function kl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const a=t.getBoundingClientRect(),s=HS(t);let o=di(1);e&&(r?po(r)&&(o=Mc(r)):o=Mc(t));const i=wse(s,n,r)?ZL(s):di(0);let l=(a.left+i.x)/o.x,c=(a.top+i.y)/o.y,u=a.width/o.x,f=a.height/o.y;if(s){const d=ua(s),p=r&&po(r)?ua(r):r;let h=d,g=h.frameElement;for(;g&&r&&p!==h;){const y=Mc(g),m=g.getBoundingClientRect(),b=La(g),C=m.left+(g.clientLeft+parseFloat(b.paddingLeft))*y.x,S=m.top+(g.clientTop+parseFloat(b.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,f*=y.y,l+=C,c+=S,h=ua(g),g=h.frameElement}}return Oh({width:u,height:f,x:l,y:c})}const Tse=[":popover-open",":modal"];function JL(t){return Tse.some(e=>{try{return t.matches(e)}catch{return!1}})}function xse(t){let{elements:e,rect:n,offsetParent:r,strategy:a}=t;const s=a==="fixed",o=wo(r),i=e?JL(e.floating):!1;if(r===o||i&&s)return n;let l={scrollLeft:0,scrollTop:0},c=di(1);const u=di(0),f=Vs(r);if((f||!f&&!s)&&((pi(r)!=="body"||xd(o))&&(l=Av(r)),Vs(r))){const d=kl(r);c=Mc(r),u.x=d.x+r.clientLeft,u.y=d.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x,y:n.y*c.y-l.scrollTop*c.y+u.y}}function Ese(t){return Array.from(t.getClientRects())}function QL(t){return kl(wo(t)).left+Av(t).scrollLeft}function kse(t){const e=wo(t),n=Av(t),r=t.ownerDocument.body,a=gl(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=gl(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+QL(t);const i=-n.scrollTop;return La(r).direction==="rtl"&&(o+=gl(e.clientWidth,r.clientWidth)-a),{width:a,height:s,x:o,y:i}}function Ose(t,e){const n=ua(t),r=wo(t),a=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,i=0,l=0;if(a){s=a.width,o=a.height;const c=zS();(!c||c&&e==="fixed")&&(i=a.offsetLeft,l=a.offsetTop)}return{width:s,height:o,x:i,y:l}}function Mse(t,e){const n=kl(t,!0,e==="fixed"),r=n.top+t.clientTop,a=n.left+t.clientLeft,s=Vs(t)?Mc(t):di(1),o=t.clientWidth*s.x,i=t.clientHeight*s.y,l=a*s.x,c=r*s.y;return{width:o,height:i,x:l,y:c}}function Mx(t,e,n){let r;if(e==="viewport")r=Ose(t,n);else if(e==="document")r=kse(wo(t));else if(po(e))r=Mse(e,n);else{const a=ZL(t);r={...e,x:e.x-a.x,y:e.y-a.y}}return Oh(r)}function e3(t,e){const n=nu(t);return n===e||!po(n)||Uv(n)?!1:La(n).position==="fixed"||e3(n,e)}function Rse(t,e){const n=e.get(t);if(n)return n;let r=Uf(t,[],!1).filter(i=>po(i)&&pi(i)!=="body"),a=null;const s=La(t).position==="fixed";let o=s?nu(t):t;for(;po(o)&&!Uv(o);){const i=La(o),l=GS(o);!l&&i.position==="fixed"&&(a=null),(s?!l&&!a:!l&&i.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||xd(o)&&!l&&e3(t,o))?r=r.filter(u=>u!==o):a=i,o=nu(o)}return e.set(t,r),r}function _se(t){let{element:e,boundary:n,rootBoundary:r,strategy:a}=t;const o=[...n==="clippingAncestors"?Rse(e,this._c):[].concat(n),r],i=o[0],l=o.reduce((c,u)=>{const f=Mx(e,u,a);return c.top=gl(f.top,c.top),c.right=tu(f.right,c.right),c.bottom=tu(f.bottom,c.bottom),c.left=gl(f.left,c.left),c},Mx(e,i,a));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Vse(t){const{width:e,height:n}=XL(t);return{width:e,height:n}}function Dse(t,e,n){const r=Vs(e),a=wo(e),s=n==="fixed",o=kl(t,!0,s,e);let i={scrollLeft:0,scrollTop:0};const l=di(0);if(r||!r&&!s)if((pi(e)!=="body"||xd(a))&&(i=Av(e)),r){const f=kl(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else a&&(l.x=QL(a));const c=o.left+i.scrollLeft-l.x,u=o.top+i.scrollTop-l.y;return{x:c,y:u,width:o.width,height:o.height}}function Rx(t,e){return!Vs(t)||La(t).position==="fixed"?null:e?e(t):t.offsetParent}function t3(t,e){const n=ua(t);if(!Vs(t)||JL(t))return n;let r=Rx(t,e);for(;r&&Cse(r)&&La(r).position==="static";)r=Rx(r,e);return r&&(pi(r)==="html"||pi(r)==="body"&&La(r).position==="static"&&!GS(r))?n:r||Sse(t)||n}const Lse=async function(t){const e=this.getOffsetParent||t3,n=this.getDimensions;return{reference:Dse(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,...await n(t.floating)}}};function Nse(t){return La(t).direction==="rtl"}const Bse={convertOffsetParentRelativeRectToViewportRelativeRect:xse,getDocumentElement:wo,getClippingRect:_se,getOffsetParent:t3,getElementRects:Lse,getClientRects:Ese,getDimensions:Vse,getScale:Mc,isElement:po,isRTL:Nse};function Fse(t,e){let n=null,r;const a=wo(t);function s(){var i;clearTimeout(r),(i=n)==null||i.disconnect(),n=null}function o(i,l){i===void 0&&(i=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:f,height:d}=t.getBoundingClientRect();if(i||e(),!f||!d)return;const p=Cp(u),h=Cp(a.clientWidth-(c+f)),g=Cp(a.clientHeight-(u+d)),y=Cp(c),b={rootMargin:-p+"px "+-h+"px "+-g+"px "+-y+"px",threshold:gl(0,tu(1,l))||1};let C=!0;function S(T){const w=T[0].intersectionRatio;if(w!==l){if(!C)return o();w?o(!1,w):r=setTimeout(()=>{o(!1,1e-7)},100)}C=!1}try{n=new IntersectionObserver(S,{...b,root:a.ownerDocument})}catch{n=new IntersectionObserver(S,b)}n.observe(t)}return o(!0),s}function $se(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:i=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=HS(t),u=a||s?[...c?Uf(c):[],...Uf(e)]:[];u.forEach(m=>{a&&m.addEventListener("scroll",n,{passive:!0}),s&&m.addEventListener("resize",n)});const f=c&&i?Fse(c,n):null;let d=-1,p=null;o&&(p=new ResizeObserver(m=>{let[b]=m;b&&b.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var C;(C=p)==null||C.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let h,g=l?kl(t):null;l&&y();function y(){const m=kl(t);g&&(m.x!==g.x||m.y!==g.y||m.width!==g.width||m.height!==g.height)&&n(),g=m,h=requestAnimationFrame(y)}return n(),()=>{var m;u.forEach(b=>{a&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),f==null||f(),(m=p)==null||m.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const Use=mse,Ase=vse,n3=hse,r3=(t,e,n)=>{const r=new Map,a={platform:Bse,...n},s={...a.platform,_c:r};return gse(t,e,{...a,platform:s})};Re({});const Wse=t=>{if(!Ot)return;if(!t)return t;const e=Zr(t);return e||(cn(t)?e:t)},Ise=({middleware:t,placement:e,strategy:n})=>{const r=P(),a=P(),s=P(),o=P(),i=P({}),l={x:s,y:o,placement:e,strategy:n,middlewareData:i},c=async()=>{if(!Ot)return;const u=Wse(r),f=Zr(a);if(!u||!f)return;const d=await r3(u,f,{placement:v(e),strategy:v(n),middleware:v(t)});Kc(l).forEach(p=>{l[p].value=d[p]})};return at(()=>{Sr(()=>{c()})}),{...l,update:c,referenceRef:r,contentRef:a}},Pse=({arrowRef:t,padding:e})=>({name:"arrow",options:{element:t,padding:e},fn(n){const r=v(t);return r?n3({element:r,padding:e}).fn(n):{}}});function Gse(t){const e=P();function n(){if(t.value==null)return;const{selectionStart:a,selectionEnd:s,value:o}=t.value;if(a==null||s==null)return;const i=o.slice(0,Math.max(0,a)),l=o.slice(Math.max(0,s));e.value={selectionStart:a,selectionEnd:s,value:o,beforeTxt:i,afterTxt:l}}function r(){if(t.value==null||e.value==null)return;const{value:a}=t.value,{beforeTxt:s,afterTxt:o,selectionStart:i}=e.value;if(s==null||o==null||i==null)return;let l=a.length;if(a.endsWith(o))l=a.length-o.length;else if(a.startsWith(s))l=s.length;else{const c=s[i-1],u=a.indexOf(c,i-1);u!==-1&&(l=u+1)}t.value.setSelectionRange(l,l)}return[n,r]}const zse=(t,e,n)=>ri(t.subTree).filter(s=>{var o;return yn(s)&&((o=s.type)==null?void 0:o.name)===e&&!!s.component}).map(s=>s.component.uid).map(s=>n[s]).filter(s=>!!s),KS=(t,e)=>{const n={},r=on([]);return{children:r,addChild:o=>{n[o.uid]=o,r.value=zse(t,e,n)},removeChild:o=>{delete n[o],r.value=r.value.filter(i=>i.uid!==o)}}},lr=os({type:String,values:Ns,required:!1}),a3=Symbol("size"),Hse=()=>{const t=We(a3,{});return R(()=>v(t.size)||"")};function Wv(t,{afterFocus:e,beforeBlur:n,afterBlur:r}={}){const a=ot(),{emit:s}=a,o=on(),i=P(!1),l=f=>{i.value||(i.value=!0,s("focus",f),e==null||e())},c=f=>{var d;Je(n)&&n(f)||f.relatedTarget&&((d=o.value)!=null&&d.contains(f.relatedTarget))||(i.value=!1,s("blur",f),r==null||r())},u=()=>{var f;(f=t.value)==null||f.focus()};return pe(o,f=>{f&&f.setAttribute("tabindex","-1")}),vn(o,"click",u),{wrapperRef:o,isFocused:i,handleFocus:l,handleBlur:c}}const s3=Symbol(),Mh=P();function Iv(t,e=void 0){const n=ot()?We(s3,Mh):Mh;return t?R(()=>{var r,a;return(a=(r=n.value)==null?void 0:r[t])!=null?a:e}):n}function Pv(t,e){const n=Iv(),r=Ce(t,R(()=>{var i;return((i=n.value)==null?void 0:i.namespace)||cf})),a=Mt(R(()=>{var i;return(i=n.value)==null?void 0:i.locale})),s=Cu(R(()=>{var i;return((i=n.value)==null?void 0:i.zIndex)||GL})),o=R(()=>{var i;return v(e)||((i=n.value)==null?void 0:i.size)||""});return jS(R(()=>v(n)||{})),{ns:r,locale:a,zIndex:s,size:o}}const jS=(t,e,n=!1)=>{var r;const a=!!ot(),s=a?Iv():void 0,o=(r=e==null?void 0:e.provide)!=null?r:a?bt:void 0;if(!o)return;const i=R(()=>{const l=v(t);return s!=null&&s.value?Kse(s.value,l):l});return o(s3,i),o(kL,R(()=>i.value.locale)),o(OL,R(()=>i.value.namespace)),o(zL,R(()=>i.value.zIndex)),o(a3,{size:R(()=>i.value.size||"")}),(n||!Mh.value)&&(Mh.value=i.value),i},Kse=(t,e)=>{var n;const r=[...new Set([...Kc(t),...Kc(e)])],a={};for(const s of r)a[s]=(n=e[s])!=null?n:t[s];return a},jse=Re({a11y:{type:Boolean,default:!0},locale:{type:Q(Object)},size:lr,button:{type:Q(Object)},experimentalFeatures:{type:Q(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:Q(Object)},zIndex:Number,namespace:{type:String,default:"el"}}),xm={},Yse=q({name:"ElConfigProvider",props:jse,setup(t,{slots:e}){pe(()=>t.message,r=>{Object.assign(xm,r??{})},{immediate:!0,deep:!0});const n=jS(t);return()=>ce(e,"default",{config:n==null?void 0:n.value})}}),qse=lt(Yse),Xse="2.5.6",Zse=(t=[])=>({version:Xse,install:(n,r)=>{n[ux]||(n[ux]=!0,t.forEach(a=>n.use(a)),r&&jS(r,n,!0))}}),Jse=Re({zIndex:{type:Q([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),Qse={scroll:({scrollTop:t,fixed:e})=>Xe(t)&&Wn(e),[pn]:t=>Wn(t)};var Ve=(t,e)=>{const n=t.__vccOpts||t;for(const[r,a]of e)n[r]=a;return n};const o3="ElAffix",eoe=q({name:o3}),toe=q({...eoe,props:Jse,emits:Qse,setup(t,{expose:e,emit:n}){const r=t,a=Ce("affix"),s=on(),o=on(),i=on(),{height:l}=NX(),{height:c,width:u,top:f,bottom:d,update:p}=k2(o,{windowScroll:!1}),h=k2(s),g=P(!1),y=P(0),m=P(0),b=R(()=>({height:g.value?`${c.value}px`:"",width:g.value?`${u.value}px`:""})),C=R(()=>{if(!g.value)return{};const w=r.offset?Bn(r.offset):0;return{height:`${c.value}px`,width:`${u.value}px`,top:r.position==="top"?w:"",bottom:r.position==="bottom"?w:"",transform:m.value?`translateY(${m.value}px)`:"",zIndex:r.zIndex}}),S=()=>{if(i.value)if(y.value=i.value instanceof Window?document.documentElement.scrollTop:i.value.scrollTop||0,r.position==="top")if(r.target){const w=h.bottom.value-r.offset-c.value;g.value=r.offset>f.value&&h.bottom.value>0,m.value=w<0?w:0}else g.value=r.offset>f.value;else if(r.target){const w=l.value-h.top.value-r.offset-c.value;g.value=l.value-r.offset<d.value&&l.value>h.top.value,m.value=w<0?-w:0}else g.value=l.value-r.offset<d.value},T=()=>{p(),n("scroll",{scrollTop:y.value,fixed:g.value})};return pe(g,w=>n("change",w)),at(()=>{var w;r.target?(s.value=(w=document.querySelector(r.target))!=null?w:void 0,s.value||Yn(o3,`Target is not existed: ${r.target}`)):s.value=document.documentElement,i.value=mS(o.value,!0),p()}),vn(i,"scroll",T),Sr(S),e({update:S,updateRoot:p}),(w,x)=>(V(),z("div",{ref_key:"root",ref:o,class:U(v(a).b()),style:Pe(v(b))},[H("div",{class:U({[v(a).m("fixed")]:g.value}),style:Pe(v(C))},[ce(w.$slots,"default")],6)],6))}});var noe=Ve(toe,[["__file","affix.vue"]]);const roe=lt(noe),aoe=Re({size:{type:Q([Number,String])},color:{type:String}}),soe=q({name:"ElIcon",inheritAttrs:!1}),ooe=q({...soe,props:aoe,setup(t){const e=t,n=Ce("icon"),r=R(()=>{const{size:a,color:s}=e;return!a&&!s?{}:{fontSize:Kn(a)?void 0:Bn(a),"--color":s}});return(a,s)=>(V(),z("i",ft({class:v(n).b(),style:v(r)},a.$attrs),[ce(a.$slots,"default")],16))}});var ioe=Ve(ooe,[["__file","icon.vue"]]);const Ge=lt(ioe),loe=["light","dark"],coe=Re({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:Kc(fi),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:loe,default:"light"}}),uoe={close:t=>t instanceof MouseEvent},foe=q({name:"ElAlert"}),doe=q({...foe,props:coe,emits:uoe,setup(t,{emit:e}){const n=t,{Close:r}=xS,a=rr(),s=Ce("alert"),o=P(!0),i=R(()=>fi[n.type]),l=R(()=>[s.e("icon"),{[s.is("big")]:!!n.description||!!a.default}]),c=R(()=>({[s.is("bold")]:n.description||a.default})),u=f=>{o.value=!1,e("close",f)};return(f,d)=>(V(),ae(jn,{name:v(s).b("fade"),persisted:""},{default:Z(()=>[rt(H("div",{class:U([v(s).b(),v(s).m(f.type),v(s).is("center",f.center),v(s).is(f.effect)]),role:"alert"},[f.showIcon&&v(i)?(V(),ae(v(Ge),{key:0,class:U(v(l))},{default:Z(()=>[(V(),ae(dt(v(i))))]),_:1},8,["class"])):ee("v-if",!0),H("div",{class:U(v(s).e("content"))},[f.title||f.$slots.title?(V(),z("span",{key:0,class:U([v(s).e("title"),v(c)])},[ce(f.$slots,"title",{},()=>[Ct(Te(f.title),1)])],2)):ee("v-if",!0),f.$slots.default||f.description?(V(),z("p",{key:1,class:U(v(s).e("description"))},[ce(f.$slots,"default",{},()=>[Ct(Te(f.description),1)])],2)):ee("v-if",!0),f.closable?(V(),z(Ue,{key:2},[f.closeText?(V(),z("div",{key:0,class:U([v(s).e("close-btn"),v(s).is("customed")]),onClick:u},Te(f.closeText),3)):(V(),ae(v(Ge),{key:1,class:U(v(s).e("close-btn")),onClick:u},{default:Z(()=>[j(v(r))]),_:1},8,["class"]))],64)):ee("v-if",!0)],2)],2),[[Rt,o.value]])]),_:3},8,["name"]))}});var poe=Ve(doe,[["__file","alert.vue"]]);const goe=lt(poe),Wl=Symbol("formContextKey"),Ds=Symbol("formItemContextKey"),qn=(t,e={})=>{const n=P(void 0),r=e.prop?n:RL("size"),a=e.global?n:Hse(),s=e.form?{size:void 0}:We(Wl,void 0),o=e.formItem?{size:void 0}:We(Ds,void 0);return R(()=>r.value||v(t)||(o==null?void 0:o.size)||(s==null?void 0:s.size)||a.value||"")},na=t=>{const e=RL("disabled"),n=We(Wl,void 0);return R(()=>e.value||v(t)||(n==null?void 0:n.disabled)||!1)},Hr=()=>{const t=We(Wl,void 0),e=We(Ds,void 0);return{form:t,formItem:e}},Bs=(t,{formItemContext:e,disableIdGeneration:n,disableIdManagement:r})=>{n||(n=P(!1)),r||(r=P(!1));const a=P();let s;const o=R(()=>{var i;return!!(!t.label&&e&&e.inputIds&&((i=e.inputIds)==null?void 0:i.length)<=1)});return at(()=>{s=pe([tn(t,"id"),n],([i,l])=>{const c=i??(l?void 0:Vr().value);c!==a.value&&(e!=null&&e.removeInputId&&(a.value&&e.removeInputId(a.value),!(r!=null&&r.value)&&!l&&c&&e.addInputId(c)),a.value=c)},{immediate:!0})}),hi(()=>{s&&s(),e!=null&&e.removeInputId&&a.value&&e.removeInputId(a.value)}),{isLabeledByFormItem:o,inputId:a}},hoe=Re({size:{type:String,values:Ns},disabled:Boolean}),voe=Re({...hoe,model:Object,rules:{type:Q(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),yoe={validate:(t,e,n)=>(Be(t)||tt(t))&&Wn(e)&&tt(n)};function moe(){const t=P([]),e=R(()=>{if(!t.value.length)return"0";const s=Math.max(...t.value);return s?`${s}px`:""});function n(s){const o=t.value.indexOf(s);return o===-1&&e.value,o}function r(s,o){if(s&&o){const i=n(o);t.value.splice(i,1,s)}else s&&t.value.push(s)}function a(s){const o=n(s);o>-1&&t.value.splice(o,1)}return{autoLabelWidth:e,registerLabelWidth:r,deregisterLabelWidth:a}}const Sp=(t,e)=>{const n=xl(e);return n.length>0?t.filter(r=>r.prop&&n.includes(r.prop)):t},Coe="ElForm",Soe=q({name:Coe}),boe=q({...Soe,props:voe,emits:yoe,setup(t,{expose:e,emit:n}){const r=t,a=[],s=qn(),o=Ce("form"),i=R(()=>{const{labelPosition:C,inline:S}=r;return[o.b(),o.m(s.value||"default"),{[o.m(`label-${C}`)]:C,[o.m("inline")]:S}]}),l=C=>a.find(S=>S.prop===C),c=C=>{a.push(C)},u=C=>{C.prop&&a.splice(a.indexOf(C),1)},f=(C=[])=>{r.model&&Sp(a,C).forEach(S=>S.resetField())},d=(C=[])=>{Sp(a,C).forEach(S=>S.clearValidate())},p=R(()=>!!r.model),h=C=>{if(a.length===0)return[];const S=Sp(a,C);return S.length?S:[]},g=async C=>m(void 0,C),y=async(C=[])=>{if(!p.value)return!1;const S=h(C);if(S.length===0)return!0;let T={};for(const w of S)try{await w.validate("")}catch(x){T={...T,...x}}return Object.keys(T).length===0?!0:Promise.reject(T)},m=async(C=[],S)=>{const T=!Je(S);try{const w=await y(C);return w===!0&&(S==null||S(w)),w}catch(w){if(w instanceof Error)throw w;const x=w;return r.scrollToError&&b(Object.keys(x)[0]),S==null||S(!1,x),T&&Promise.reject(x)}},b=C=>{var S;const T=Sp(a,C)[0];T&&((S=T.$el)==null||S.scrollIntoView(r.scrollIntoViewOptions))};return pe(()=>r.rules,()=>{r.validateOnRuleChange&&g().catch(C=>void 0)},{deep:!0}),bt(Wl,Dt({...hr(r),emit:n,resetFields:f,clearValidate:d,validateField:m,getField:l,addField:c,removeField:u,...moe()})),e({validate:g,validateField:m,resetFields:f,clearValidate:d,scrollToField:b}),(C,S)=>(V(),z("form",{class:U(v(i))},[ce(C.$slots,"default")],2))}});var woe=Ve(boe,[["__file","form.vue"]]);function Zi(){return Zi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zi.apply(this,arguments)}function Toe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Af(t,e)}function Em(t){return Em=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Em(t)}function Af(t,e){return Af=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Af(t,e)}function xoe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dg(t,e,n){return xoe()?dg=Reflect.construct.bind():dg=function(a,s,o){var i=[null];i.push.apply(i,s);var l=Function.bind.apply(a,i),c=new l;return o&&Af(c,o.prototype),c},dg.apply(null,arguments)}function Eoe(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function km(t){var e=typeof Map=="function"?new Map:void 0;return km=function(r){if(r===null||!Eoe(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,a)}function a(){return dg(r,arguments,Em(this).constructor)}return a.prototype=Object.create(r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Af(a,r)},km(t)}var koe=/%[sdj%]/g,Ooe=function(){};function Om(t){if(!t||!t.length)return null;var e={};return t.forEach(function(n){var r=n.field;e[r]=e[r]||[],e[r].push(n)}),e}function ca(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var a=0,s=n.length;if(typeof t=="function")return t.apply(null,n);if(typeof t=="string"){var o=t.replace(koe,function(i){if(i==="%%")return"%";if(a>=s)return i;switch(i){case"%s":return String(n[a++]);case"%d":return Number(n[a++]);case"%j":try{return JSON.stringify(n[a++])}catch{return"[Circular]"}break;default:return i}});return o}return t}function Moe(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function cr(t,e){return!!(t==null||e==="array"&&Array.isArray(t)&&!t.length||Moe(e)&&typeof t=="string"&&!t)}function Roe(t,e,n){var r=[],a=0,s=t.length;function o(i){r.push.apply(r,i||[]),a++,a===s&&n(r)}t.forEach(function(i){e(i,o)})}function _x(t,e,n){var r=0,a=t.length;function s(o){if(o&&o.length){n(o);return}var i=r;r=r+1,i<a?e(t[i],s):n([])}s([])}function _oe(t){var e=[];return Object.keys(t).forEach(function(n){e.push.apply(e,t[n]||[])}),e}var Vx=function(t){Toe(e,t);function e(n,r){var a;return a=t.call(this,"Async Validation Error")||this,a.errors=n,a.fields=r,a}return e}(km(Error));function Voe(t,e,n,r,a){if(e.first){var s=new Promise(function(d,p){var h=function(m){return r(m),m.length?p(new Vx(m,Om(m))):d(a)},g=_oe(t);_x(g,n,h)});return s.catch(function(d){return d}),s}var o=e.firstFields===!0?Object.keys(t):e.firstFields||[],i=Object.keys(t),l=i.length,c=0,u=[],f=new Promise(function(d,p){var h=function(y){if(u.push.apply(u,y),c++,c===l)return r(u),u.length?p(new Vx(u,Om(u))):d(a)};i.length||(r(u),d(a)),i.forEach(function(g){var y=t[g];o.indexOf(g)!==-1?_x(y,n,h):Roe(y,n,h)})});return f.catch(function(d){return d}),f}function Doe(t){return!!(t&&t.message!==void 0)}function Loe(t,e){for(var n=t,r=0;r<e.length;r++){if(n==null)return n;n=n[e[r]]}return n}function Dx(t,e){return function(n){var r;return t.fullFields?r=Loe(e,t.fullFields):r=e[n.field||t.fullField],Doe(n)?(n.field=n.field||t.fullField,n.fieldValue=r,n):{message:typeof n=="function"?n():n,fieldValue:r,field:n.field||t.fullField}}}function Lx(t,e){if(e){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];typeof r=="object"&&typeof t[n]=="object"?t[n]=Zi({},t[n],r):t[n]=r}}return t}var i3=function(e,n,r,a,s,o){e.required&&(!r.hasOwnProperty(e.field)||cr(n,o||e.type))&&a.push(ca(s.messages.required,e.fullField))},Noe=function(e,n,r,a,s){(/^\s+$/.test(n)||n==="")&&a.push(ca(s.messages.whitespace,e.fullField))},bp,Boe=function(){if(bp)return bp;var t="[a-fA-F\\d:]",e=function(S){return S&&S.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",a=(`
(?:
(?:`+r+":){7}(?:"+r+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+r+":){6}(?:"+n+"|:"+r+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+r+":){5}(?::"+n+"|(?::"+r+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+r+":){4}(?:(?::"+r+"){0,1}:"+n+"|(?::"+r+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+r+":){3}(?:(?::"+r+"){0,2}:"+n+"|(?::"+r+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+r+":){2}(?:(?::"+r+"){0,3}:"+n+"|(?::"+r+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+r+":){1}(?:(?::"+r+"){0,4}:"+n+"|(?::"+r+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+r+"){0,5}:"+n+"|(?::"+r+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^"+n+"$)|(?:^"+a+"$)"),o=new RegExp("^"+n+"$"),i=new RegExp("^"+a+"$"),l=function(S){return S&&S.exact?s:new RegExp("(?:"+e(S)+n+e(S)+")|(?:"+e(S)+a+e(S)+")","g")};l.v4=function(C){return C&&C.exact?o:new RegExp(""+e(C)+n+e(C),"g")},l.v6=function(C){return C&&C.exact?i:new RegExp(""+e(C)+a+e(C),"g")};var c="(?:(?:[a-z]+:)?//)",u="(?:\\S+(?::\\S*)?@)?",f=l.v4().source,d=l.v6().source,p="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",h="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",g="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",y="(?::\\d{2,5})?",m='(?:[/?#][^\\s"]*)?',b="(?:"+c+"|www\\.)"+u+"(?:localhost|"+f+"|"+d+"|"+p+h+g+")"+y+m;return bp=new RegExp("(?:^"+b+"$)","i"),bp},Nx={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},ju={integer:function(e){return ju.number(e)&&parseInt(e,10)===e},float:function(e){return ju.number(e)&&!ju.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!ju.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(Nx.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(Boe())},hex:function(e){return typeof e=="string"&&!!e.match(Nx.hex)}},Foe=function(e,n,r,a,s){if(e.required&&n===void 0){i3(e,n,r,a,s);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],i=e.type;o.indexOf(i)>-1?ju[i](n)||a.push(ca(s.messages.types[i],e.fullField,e.type)):i&&typeof n!==e.type&&a.push(ca(s.messages.types[i],e.fullField,e.type))},$oe=function(e,n,r,a,s){var o=typeof e.len=="number",i=typeof e.min=="number",l=typeof e.max=="number",c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=n,f=null,d=typeof n=="number",p=typeof n=="string",h=Array.isArray(n);if(d?f="number":p?f="string":h&&(f="array"),!f)return!1;h&&(u=n.length),p&&(u=n.replace(c,"_").length),o?u!==e.len&&a.push(ca(s.messages[f].len,e.fullField,e.len)):i&&!l&&u<e.min?a.push(ca(s.messages[f].min,e.fullField,e.min)):l&&!i&&u>e.max?a.push(ca(s.messages[f].max,e.fullField,e.max)):i&&l&&(u<e.min||u>e.max)&&a.push(ca(s.messages[f].range,e.fullField,e.min,e.max))},Zl="enum",Uoe=function(e,n,r,a,s){e[Zl]=Array.isArray(e[Zl])?e[Zl]:[],e[Zl].indexOf(n)===-1&&a.push(ca(s.messages[Zl],e.fullField,e[Zl].join(", ")))},Aoe=function(e,n,r,a,s){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(n)||a.push(ca(s.messages.pattern.mismatch,e.fullField,n,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(n)||a.push(ca(s.messages.pattern.mismatch,e.fullField,n,e.pattern))}}},en={required:i3,whitespace:Noe,type:Foe,range:$oe,enum:Uoe,pattern:Aoe},Woe=function(e,n,r,a,s){var o=[],i=e.required||!e.required&&a.hasOwnProperty(e.field);if(i){if(cr(n,"string")&&!e.required)return r();en.required(e,n,a,o,s,"string"),cr(n,"string")||(en.type(e,n,a,o,s),en.range(e,n,a,o,s),en.pattern(e,n,a,o,s),e.whitespace===!0&&en.whitespace(e,n,a,o,s))}r(o)},Ioe=function(e,n,r,a,s){var o=[],i=e.required||!e.required&&a.hasOwnProperty(e.field);if(i){if(cr(n)&&!e.required)return r();en.required(e,n,a,o,s),n!==void 0&&en.type(e,n,a,o,s)}r(o)},Poe=function(e,n,r,a,s){var o=[],i=e.required||!e.required&&a.hasOwnProperty(e.field);if(i){if(n===""&&(n=void 0),cr(n)&&!e.required)return r();en.required(e,n,a,o,s),n!==void 0&&(en.type(e,n,a,o,s),en.range(e,n,a,o,s))}r(o)},Goe=function(e,n,r,a,s){var o=[],i=e.required||!e.required&&a.hasOwnProperty(e.field);if(i){if(cr(n)&&!e.required)return r();en.required(e,n,a,o,s),n!==void 0&&en.type(e,n,a,o,s)}r(o)},zoe=function(e,n,r,a,s){var o=[],i=e.required||!e.required&&a.hasOwnProperty(e.field);if(i){if(cr(n)&&!e.required)return r();en.required(e,n,a,o,s),cr(n)||en.type(e,n,a,o,s)}r(o)},Hoe=function(e,n,r,a,s){var o=[],i=e.required||!e.required&&a.hasOwnProperty(e.field);if(i){if(cr(n)&&!e.required)return r();en.required(e,n,a,o,s),n!==void 0&&(en.type(e,n,a,o,s),en.range(e,n,a,o,s))}r(o)},Koe=function(e,n,r,a,s){var o=[],i=e.required||!e.required&&a.hasOwnProperty(e.field);if(i){if(cr(n)&&!e.required)return r();en.required(e,n,a,o,s),n!==void 0&&(en.type(e,n,a,o,s),en.range(e,n,a,o,s))}r(o)},joe=function(e,n,r,a,s){var o=[],i=e.required||!e.required&&a.hasOwnProperty(e.field);if(i){if(n==null&&!e.required)return r();en.required(e,n,a,o,s,"array"),n!=null&&(en.type(e,n,a,o,s),en.range(e,n,a,o,s))}r(o)},Yoe=function(e,n,r,a,s){var o=[],i=e.required||!e.required&&a.hasOwnProperty(e.field);if(i){if(cr(n)&&!e.required)return r();en.required(e,n,a,o,s),n!==void 0&&en.type(e,n,a,o,s)}r(o)},qoe="enum",Xoe=function(e,n,r,a,s){var o=[],i=e.required||!e.required&&a.hasOwnProperty(e.field);if(i){if(cr(n)&&!e.required)return r();en.required(e,n,a,o,s),n!==void 0&&en[qoe](e,n,a,o,s)}r(o)},Zoe=function(e,n,r,a,s){var o=[],i=e.required||!e.required&&a.hasOwnProperty(e.field);if(i){if(cr(n,"string")&&!e.required)return r();en.required(e,n,a,o,s),cr(n,"string")||en.pattern(e,n,a,o,s)}r(o)},Joe=function(e,n,r,a,s){var o=[],i=e.required||!e.required&&a.hasOwnProperty(e.field);if(i){if(cr(n,"date")&&!e.required)return r();if(en.required(e,n,a,o,s),!cr(n,"date")){var l;n instanceof Date?l=n:l=new Date(n),en.type(e,l,a,o,s),l&&en.range(e,l.getTime(),a,o,s)}}r(o)},Qoe=function(e,n,r,a,s){var o=[],i=Array.isArray(n)?"array":typeof n;en.required(e,n,a,o,s,i),r(o)},j0=function(e,n,r,a,s){var o=e.type,i=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if(cr(n,o)&&!e.required)return r();en.required(e,n,a,i,s,o),cr(n,o)||en.type(e,n,a,i,s)}r(i)},eie=function(e,n,r,a,s){var o=[],i=e.required||!e.required&&a.hasOwnProperty(e.field);if(i){if(cr(n)&&!e.required)return r();en.required(e,n,a,o,s)}r(o)},df={string:Woe,method:Ioe,number:Poe,boolean:Goe,regexp:zoe,integer:Hoe,float:Koe,array:joe,object:Yoe,enum:Xoe,pattern:Zoe,date:Joe,url:j0,hex:j0,email:j0,required:Qoe,any:eie};function Mm(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Rm=Mm(),Ed=function(){function t(n){this.rules=null,this._messages=Rm,this.define(n)}var e=t.prototype;return e.define=function(r){var a=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(typeof r!="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(s){var o=r[s];a.rules[s]=Array.isArray(o)?o:[o]})},e.messages=function(r){return r&&(this._messages=Lx(Mm(),r)),this._messages},e.validate=function(r,a,s){var o=this;a===void 0&&(a={}),s===void 0&&(s=function(){});var i=r,l=a,c=s;if(typeof l=="function"&&(c=l,l={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,i),Promise.resolve(i);function u(g){var y=[],m={};function b(S){if(Array.isArray(S)){var T;y=(T=y).concat.apply(T,S)}else y.push(S)}for(var C=0;C<g.length;C++)b(g[C]);y.length?(m=Om(y),c(y,m)):c(null,i)}if(l.messages){var f=this.messages();f===Rm&&(f=Mm()),Lx(f,l.messages),l.messages=f}else l.messages=this.messages();var d={},p=l.keys||Object.keys(this.rules);p.forEach(function(g){var y=o.rules[g],m=i[g];y.forEach(function(b){var C=b;typeof C.transform=="function"&&(i===r&&(i=Zi({},i)),m=i[g]=C.transform(m)),typeof C=="function"?C={validator:C}:C=Zi({},C),C.validator=o.getValidationMethod(C),C.validator&&(C.field=g,C.fullField=C.fullField||g,C.type=o.getType(C),d[g]=d[g]||[],d[g].push({rule:C,value:m,source:i,field:g}))})});var h={};return Voe(d,l,function(g,y){var m=g.rule,b=(m.type==="object"||m.type==="array")&&(typeof m.fields=="object"||typeof m.defaultField=="object");b=b&&(m.required||!m.required&&g.value),m.field=g.field;function C(w,x){return Zi({},x,{fullField:m.fullField+"."+w,fullFields:m.fullFields?[].concat(m.fullFields,[w]):[w]})}function S(w){w===void 0&&(w=[]);var x=Array.isArray(w)?w:[w];!l.suppressWarning&&x.length&&t.warning("async-validator:",x),x.length&&m.message!==void 0&&(x=[].concat(m.message));var E=x.map(Dx(m,i));if(l.first&&E.length)return h[m.field]=1,y(E);if(!b)y(E);else{if(m.required&&!g.value)return m.message!==void 0?E=[].concat(m.message).map(Dx(m,i)):l.error&&(E=[l.error(m,ca(l.messages.required,m.field))]),y(E);var O={};m.defaultField&&Object.keys(g.value).map(function(D){O[D]=m.defaultField}),O=Zi({},O,g.rule.fields);var k={};Object.keys(O).forEach(function(D){var I=O[D],B=Array.isArray(I)?I:[I];k[D]=B.map(C.bind(null,D))});var M=new t(k);M.messages(l.messages),g.rule.options&&(g.rule.options.messages=l.messages,g.rule.options.error=l.error),M.validate(g.value,g.rule.options||l,function(D){var I=[];E&&E.length&&I.push.apply(I,E),D&&D.length&&I.push.apply(I,D),y(I.length?I:null)})}}var T;if(m.asyncValidator)T=m.asyncValidator(m,g.value,S,g.source,l);else if(m.validator){try{T=m.validator(m,g.value,S,g.source,l)}catch(w){console.error==null||console.error(w),l.suppressValidatorError||setTimeout(function(){throw w},0),S(w.message)}T===!0?S():T===!1?S(typeof m.message=="function"?m.message(m.fullField||m.field):m.message||(m.fullField||m.field)+" fails"):T instanceof Array?S(T):T instanceof Error&&S(T.message)}T&&T.then&&T.then(function(){return S()},function(w){return S(w)})},function(g){u(g)},i)},e.getType=function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!df.hasOwnProperty(r.type))throw new Error(ca("Unknown rule type %s",r.type));return r.type||"string"},e.getValidationMethod=function(r){if(typeof r.validator=="function")return r.validator;var a=Object.keys(r),s=a.indexOf("message");return s!==-1&&a.splice(s,1),a.length===1&&a[0]==="required"?df.required:df[this.getType(r)]||void 0},t}();Ed.register=function(e,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");df[e]=n};Ed.warning=Ooe;Ed.messages=Rm;Ed.validators=df;const tie=["","error","validating","success"],nie=Re({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:Q([String,Array])},required:{type:Boolean,default:void 0},rules:{type:Q([Object,Array])},error:String,validateStatus:{type:String,values:tie},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:Ns}}),Bx="ElLabelWrap";var rie=q({name:Bx,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(t,{slots:e}){const n=We(Wl,void 0),r=We(Ds);r||Yn(Bx,"usage: <el-form-item><label-wrap /></el-form-item>");const a=Ce("form"),s=P(),o=P(0),i=()=>{var u;if((u=s.value)!=null&&u.firstElementChild){const f=window.getComputedStyle(s.value.firstElementChild).width;return Math.ceil(Number.parseFloat(f))}else return 0},l=(u="update")=>{Ye(()=>{e.default&&t.isAutoWidth&&(u==="update"?o.value=i():u==="remove"&&(n==null||n.deregisterLabelWidth(o.value)))})},c=()=>l("update");return at(()=>{c()}),ln(()=>{l("remove")}),mo(()=>c()),pe(o,(u,f)=>{t.updateAll&&(n==null||n.registerLabelWidth(u,f))}),Sn(R(()=>{var u,f;return(f=(u=s.value)==null?void 0:u.firstElementChild)!=null?f:null}),c),()=>{var u,f;if(!e)return null;const{isAutoWidth:d}=t;if(d){const p=n==null?void 0:n.autoLabelWidth,h=r==null?void 0:r.hasLabel,g={};if(h&&p&&p!=="auto"){const y=Math.max(0,Number.parseInt(p,10)-o.value),m=n.labelPosition==="left"?"marginRight":"marginLeft";y&&(g[m]=`${y}px`)}return j("div",{ref:s,class:[a.be("item","label-wrap")],style:g},[(u=e.default)==null?void 0:u.call(e)])}else return j(Ue,{ref:s},[(f=e.default)==null?void 0:f.call(e)])}}});const aie=["role","aria-labelledby"],sie=q({name:"ElFormItem"}),oie=q({...sie,props:nie,setup(t,{expose:e}){const n=t,r=rr(),a=We(Wl,void 0),s=We(Ds,void 0),o=qn(void 0,{formItem:!1}),i=Ce("form-item"),l=Vr().value,c=P([]),u=P(""),f=yX(u,100),d=P(""),p=P();let h,g=!1;const y=R(()=>{if((a==null?void 0:a.labelPosition)==="top")return{};const ie=Bn(n.labelWidth||(a==null?void 0:a.labelWidth)||"");return ie?{width:ie}:{}}),m=R(()=>{if((a==null?void 0:a.labelPosition)==="top"||a!=null&&a.inline)return{};if(!n.label&&!n.labelWidth&&O)return{};const ie=Bn(n.labelWidth||(a==null?void 0:a.labelWidth)||"");return!n.label&&!r.label?{marginLeft:ie}:{}}),b=R(()=>[i.b(),i.m(o.value),i.is("error",u.value==="error"),i.is("validating",u.value==="validating"),i.is("success",u.value==="success"),i.is("required",B.value||n.required),i.is("no-asterisk",a==null?void 0:a.hideRequiredAsterisk),(a==null?void 0:a.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[i.m("feedback")]:a==null?void 0:a.statusIcon}]),C=R(()=>Wn(n.inlineMessage)?n.inlineMessage:(a==null?void 0:a.inlineMessage)||!1),S=R(()=>[i.e("error"),{[i.em("error","inline")]:C.value}]),T=R(()=>n.prop?tt(n.prop)?n.prop:n.prop.join("."):""),w=R(()=>!!(n.label||r.label)),x=R(()=>n.for||(c.value.length===1?c.value[0]:void 0)),E=R(()=>!x.value&&w.value),O=!!s,k=R(()=>{const ie=a==null?void 0:a.model;if(!(!ie||!n.prop))return ug(ie,n.prop).value}),M=R(()=>{const{required:ie}=n,re=[];n.rules&&re.push(...xl(n.rules));const be=a==null?void 0:a.rules;if(be&&n.prop){const ge=ug(be,n.prop).value;ge&&re.push(...xl(ge))}if(ie!==void 0){const ge=re.map((Se,De)=>[Se,De]).filter(([Se])=>Object.keys(Se).includes("required"));if(ge.length>0)for(const[Se,De]of ge)Se.required!==ie&&(re[De]={...Se,required:ie});else re.push({required:ie})}return re}),D=R(()=>M.value.length>0),I=ie=>M.value.filter(be=>!be.trigger||!ie?!0:Array.isArray(be.trigger)?be.trigger.includes(ie):be.trigger===ie).map(({trigger:be,...ge})=>ge),B=R(()=>M.value.some(ie=>ie.required)),F=R(()=>{var ie;return f.value==="error"&&n.showMessage&&((ie=a==null?void 0:a.showMessage)!=null?ie:!0)}),$=R(()=>`${n.label||""}${(a==null?void 0:a.labelSuffix)||""}`),N=ie=>{u.value=ie},W=ie=>{var re,be;const{errors:ge,fields:Se}=ie;(!ge||!Se)&&console.error(ie),N("error"),d.value=ge?(be=(re=ge==null?void 0:ge[0])==null?void 0:re.message)!=null?be:`${n.prop} is required`:"",a==null||a.emit("validate",n.prop,!1,d.value)},_=()=>{N("success"),a==null||a.emit("validate",n.prop,!0,"")},L=async ie=>{const re=T.value;return new Ed({[re]:ie}).validate({[re]:k.value},{firstFields:!0}).then(()=>(_(),!0)).catch(ge=>(W(ge),Promise.reject(ge)))},G=async(ie,re)=>{if(g||!n.prop)return!1;const be=Je(re);if(!D.value)return re==null||re(!1),!1;const ge=I(ie);return ge.length===0?(re==null||re(!0),!0):(N("validating"),L(ge).then(()=>(re==null||re(!0),!0)).catch(Se=>{const{fields:De}=Se;return re==null||re(!1,De),be?!1:Promise.reject(De)}))},K=()=>{N(""),d.value="",g=!1},Y=async()=>{const ie=a==null?void 0:a.model;if(!ie||!n.prop)return;const re=ug(ie,n.prop);g=!0,re.value=ax(h),await Ye(),K(),g=!1},te=ie=>{c.value.includes(ie)||c.value.push(ie)},ve=ie=>{c.value=c.value.filter(re=>re!==ie)};pe(()=>n.error,ie=>{d.value=ie||"",N(ie?"error":"")},{immediate:!0}),pe(()=>n.validateStatus,ie=>N(ie||""));const se=Dt({...hr(n),$el:p,size:o,validateState:u,labelId:l,inputIds:c,isGroup:E,hasLabel:w,fieldValue:k,addInputId:te,removeInputId:ve,resetField:Y,clearValidate:K,validate:G});return bt(Ds,se),at(()=>{n.prop&&(a==null||a.addField(se),h=ax(k.value))}),ln(()=>{a==null||a.removeField(se)}),e({size:o,validateMessage:d,validateState:u,validate:G,clearValidate:K,resetField:Y}),(ie,re)=>{var be;return V(),z("div",{ref_key:"formItemRef",ref:p,class:U(v(b)),role:v(E)?"group":void 0,"aria-labelledby":v(E)?v(l):void 0},[j(v(rie),{"is-auto-width":v(y).width==="auto","update-all":((be=v(a))==null?void 0:be.labelWidth)==="auto"},{default:Z(()=>[v(w)?(V(),ae(dt(v(x)?"label":"div"),{key:0,id:v(l),for:v(x),class:U(v(i).e("label")),style:Pe(v(y))},{default:Z(()=>[ce(ie.$slots,"label",{label:v($)},()=>[Ct(Te(v($)),1)])]),_:3},8,["id","for","class","style"])):ee("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),H("div",{class:U(v(i).e("content")),style:Pe(v(m))},[ce(ie.$slots,"default"),j(gD,{name:`${v(i).namespace.value}-zoom-in-top`},{default:Z(()=>[v(F)?ce(ie.$slots,"error",{key:0,error:d.value},()=>[H("div",{class:U(v(S))},Te(d.value),3)]):ee("v-if",!0)]),_:3},8,["name"])],6)],10,aie)}}});var l3=Ve(oie,[["__file","form-item.vue"]]);const iie=lt(woe,{FormItem:l3}),lie=bn(l3);let Aa;const cie=`
  height:0 !important;
  visibility:hidden !important;
  ${OD()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,uie=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function fie(t){const e=window.getComputedStyle(t),n=e.getPropertyValue("box-sizing"),r=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),a=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:uie.map(o=>`${o}:${e.getPropertyValue(o)}`).join(";"),paddingSize:r,borderSize:a,boxSizing:n}}function Fx(t,e=1,n){var r;Aa||(Aa=document.createElement("textarea"),document.body.appendChild(Aa));const{paddingSize:a,borderSize:s,boxSizing:o,contextStyle:i}=fie(t);Aa.setAttribute("style",`${i};${cie}`),Aa.value=t.value||t.placeholder||"";let l=Aa.scrollHeight;const c={};o==="border-box"?l=l+s:o==="content-box"&&(l=l-a),Aa.value="";const u=Aa.scrollHeight-a;if(Xe(e)){let f=u*e;o==="border-box"&&(f=f+a+s),l=Math.max(f,l),c.minHeight=`${f}px`}if(Xe(n)){let f=u*n;o==="border-box"&&(f=f+a+s),l=Math.min(f,l)}return c.height=`${l}px`,(r=Aa.parentNode)==null||r.removeChild(Aa),Aa=void 0,c}const die=Re({id:{type:String,default:void 0},size:lr,disabled:Boolean,modelValue:{type:Q([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Q([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:Zt},prefixIcon:{type:Zt},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Q([Object,Array,String]),default:()=>mn({})},autofocus:{type:Boolean,default:!1}}),pie={[ut]:t=>tt(t),input:t=>tt(t),change:t=>tt(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,mouseleave:t=>t instanceof MouseEvent,mouseenter:t=>t instanceof MouseEvent,keydown:t=>t instanceof Event,compositionstart:t=>t instanceof CompositionEvent,compositionupdate:t=>t instanceof CompositionEvent,compositionend:t=>t instanceof CompositionEvent},gie=["role"],hie=["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus"],vie=["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus"],yie=q({name:"ElInput",inheritAttrs:!1}),mie=q({...yie,props:die,emits:pie,setup(t,{expose:e,emit:n}){const r=t,a=Nl(),s=rr(),o=R(()=>{const he={};return r.containerRole==="combobox"&&(he["aria-haspopup"]=a["aria-haspopup"],he["aria-owns"]=a["aria-owns"],he["aria-expanded"]=a["aria-expanded"]),he}),i=R(()=>[r.type==="textarea"?y.b():g.b(),g.m(p.value),g.is("disabled",h.value),g.is("exceed",te.value),{[g.b("group")]:s.prepend||s.append,[g.bm("group","append")]:s.append,[g.bm("group","prepend")]:s.prepend,[g.m("prefix")]:s.prefix||r.prefixIcon,[g.m("suffix")]:s.suffix||r.suffixIcon||r.clearable||r.showPassword,[g.bm("suffix","password-clear")]:L.value&&G.value},a.class]),l=R(()=>[g.e("wrapper"),g.is("focus",k.value)]),c=OS({excludeKeys:R(()=>Object.keys(o.value))}),{form:u,formItem:f}=Hr(),{inputId:d}=Bs(r,{formItemContext:f}),p=qn(),h=na(),g=Ce("input"),y=Ce("textarea"),m=on(),b=on(),C=P(!1),S=P(!1),T=P(!1),w=P(),x=on(r.inputStyle),E=R(()=>m.value||b.value),{wrapperRef:O,isFocused:k,handleFocus:M,handleBlur:D}=Wv(E,{afterBlur(){var he;r.validateEvent&&((he=f==null?void 0:f.validate)==null||he.call(f,"blur").catch(Ae=>void 0))}}),I=R(()=>{var he;return(he=u==null?void 0:u.statusIcon)!=null?he:!1}),B=R(()=>(f==null?void 0:f.validateState)||""),F=R(()=>B.value&&ES[B.value]),$=R(()=>T.value?Ore:Zne),N=R(()=>[a.style]),W=R(()=>[r.inputStyle,x.value,{resize:r.resize}]),_=R(()=>er(r.modelValue)?"":String(r.modelValue)),L=R(()=>r.clearable&&!h.value&&!r.readonly&&!!_.value&&(k.value||C.value)),G=R(()=>r.showPassword&&!h.value&&!r.readonly&&!!_.value&&(!!_.value||k.value)),K=R(()=>r.showWordLimit&&!!r.maxlength&&(r.type==="text"||r.type==="textarea")&&!h.value&&!r.readonly&&!r.showPassword),Y=R(()=>_.value.length),te=R(()=>!!K.value&&Y.value>Number(r.maxlength)),ve=R(()=>!!s.suffix||!!r.suffixIcon||L.value||r.showPassword||K.value||!!B.value&&I.value),[se,ie]=Gse(m);Sn(b,he=>{if(ge(),!K.value||r.resize!=="both")return;const Ae=he[0],{width:qe}=Ae.contentRect;w.value={right:`calc(100% - ${qe+15+6}px)`}});const re=()=>{const{type:he,autosize:Ae}=r;if(!(!Ot||he!=="textarea"||!b.value))if(Ae){const qe=pt(Ae)?Ae.minRows:void 0,st=pt(Ae)?Ae.maxRows:void 0,vt=Fx(b.value,qe,st);x.value={overflowY:"hidden",...vt},Ye(()=>{b.value.offsetHeight,x.value=vt})}else x.value={minHeight:Fx(b.value).minHeight}},ge=(he=>{let Ae=!1;return()=>{var qe;if(Ae||!r.autosize)return;((qe=b.value)==null?void 0:qe.offsetParent)===null||(he(),Ae=!0)}})(re),Se=()=>{const he=E.value,Ae=r.formatter?r.formatter(_.value):_.value;!he||he.value===Ae||(he.value=Ae)},De=async he=>{se();let{value:Ae}=he.target;if(r.formatter&&(Ae=r.parser?r.parser(Ae):Ae),!S.value){if(Ae===_.value){Se();return}n(ut,Ae),n("input",Ae),await Ye(),Se(),ie()}},X=he=>{n("change",he.target.value)},ne=he=>{n("compositionstart",he),S.value=!0},me=he=>{var Ae;n("compositionupdate",he);const qe=(Ae=he.target)==null?void 0:Ae.value,st=qe[qe.length-1]||"";S.value=!kS(st)},Ee=he=>{n("compositionend",he),S.value&&(S.value=!1,De(he))},de=()=>{T.value=!T.value,xe()},xe=async()=>{var he;await Ye(),(he=E.value)==null||he.focus()},ke=()=>{var he;return(he=E.value)==null?void 0:he.blur()},ye=he=>{C.value=!1,n("mouseleave",he)},_e=he=>{C.value=!0,n("mouseenter",he)},Oe=he=>{n("keydown",he)},Fe=()=>{var he;(he=E.value)==null||he.select()},ze=()=>{n(ut,""),n("change",""),n("clear"),n("input","")};return pe(()=>r.modelValue,()=>{var he;Ye(()=>re()),r.validateEvent&&((he=f==null?void 0:f.validate)==null||he.call(f,"change").catch(Ae=>void 0))}),pe(_,()=>Se()),pe(()=>r.type,async()=>{await Ye(),Se(),re()}),at(()=>{!r.formatter&&r.parser,Se(),Ye(re)}),e({input:m,textarea:b,ref:E,textareaStyle:W,autosize:tn(r,"autosize"),focus:xe,blur:ke,select:Fe,clear:ze,resizeTextarea:re}),(he,Ae)=>rt((V(),z("div",ft(v(o),{class:v(i),style:v(N),role:he.containerRole,onMouseenter:_e,onMouseleave:ye}),[ee(" input "),he.type!=="textarea"?(V(),z(Ue,{key:0},[ee(" prepend slot "),he.$slots.prepend?(V(),z("div",{key:0,class:U(v(g).be("group","prepend"))},[ce(he.$slots,"prepend")],2)):ee("v-if",!0),H("div",{ref_key:"wrapperRef",ref:O,class:U(v(l))},[ee(" prefix slot "),he.$slots.prefix||he.prefixIcon?(V(),z("span",{key:0,class:U(v(g).e("prefix"))},[H("span",{class:U(v(g).e("prefix-inner"))},[ce(he.$slots,"prefix"),he.prefixIcon?(V(),ae(v(Ge),{key:0,class:U(v(g).e("icon"))},{default:Z(()=>[(V(),ae(dt(he.prefixIcon)))]),_:1},8,["class"])):ee("v-if",!0)],2)],2)):ee("v-if",!0),H("input",ft({id:v(d),ref_key:"input",ref:m,class:v(g).e("inner")},v(c),{minlength:he.minlength,maxlength:he.maxlength,type:he.showPassword?T.value?"text":"password":he.type,disabled:v(h),readonly:he.readonly,autocomplete:he.autocomplete,tabindex:he.tabindex,"aria-label":he.label,placeholder:he.placeholder,style:he.inputStyle,form:he.form,autofocus:he.autofocus,onCompositionstart:ne,onCompositionupdate:me,onCompositionend:Ee,onInput:De,onFocus:Ae[0]||(Ae[0]=(...qe)=>v(M)&&v(M)(...qe)),onBlur:Ae[1]||(Ae[1]=(...qe)=>v(D)&&v(D)(...qe)),onChange:X,onKeydown:Oe}),null,16,hie),ee(" suffix slot "),v(ve)?(V(),z("span",{key:1,class:U(v(g).e("suffix"))},[H("span",{class:U(v(g).e("suffix-inner"))},[!v(L)||!v(G)||!v(K)?(V(),z(Ue,{key:0},[ce(he.$slots,"suffix"),he.suffixIcon?(V(),ae(v(Ge),{key:0,class:U(v(g).e("icon"))},{default:Z(()=>[(V(),ae(dt(he.suffixIcon)))]),_:1},8,["class"])):ee("v-if",!0)],64)):ee("v-if",!0),v(L)?(V(),ae(v(Ge),{key:1,class:U([v(g).e("icon"),v(g).e("clear")]),onMousedown:Ze(v(zt),["prevent"]),onClick:ze},{default:Z(()=>[j(v(vi))]),_:1},8,["class","onMousedown"])):ee("v-if",!0),v(G)?(V(),ae(v(Ge),{key:2,class:U([v(g).e("icon"),v(g).e("password")]),onClick:de},{default:Z(()=>[(V(),ae(dt(v($))))]),_:1},8,["class"])):ee("v-if",!0),v(K)?(V(),z("span",{key:3,class:U(v(g).e("count"))},[H("span",{class:U(v(g).e("count-inner"))},Te(v(Y))+" / "+Te(he.maxlength),3)],2)):ee("v-if",!0),v(B)&&v(F)&&v(I)?(V(),ae(v(Ge),{key:4,class:U([v(g).e("icon"),v(g).e("validateIcon"),v(g).is("loading",v(B)==="validating")])},{default:Z(()=>[(V(),ae(dt(v(F))))]),_:1},8,["class"])):ee("v-if",!0)],2)],2)):ee("v-if",!0)],2),ee(" append slot "),he.$slots.append?(V(),z("div",{key:1,class:U(v(g).be("group","append"))},[ce(he.$slots,"append")],2)):ee("v-if",!0)],64)):(V(),z(Ue,{key:1},[ee(" textarea "),H("textarea",ft({id:v(d),ref_key:"textarea",ref:b,class:v(y).e("inner")},v(c),{minlength:he.minlength,maxlength:he.maxlength,tabindex:he.tabindex,disabled:v(h),readonly:he.readonly,autocomplete:he.autocomplete,style:v(W),"aria-label":he.label,placeholder:he.placeholder,form:he.form,autofocus:he.autofocus,onCompositionstart:ne,onCompositionupdate:me,onCompositionend:Ee,onInput:De,onFocus:Ae[2]||(Ae[2]=(...qe)=>v(M)&&v(M)(...qe)),onBlur:Ae[3]||(Ae[3]=(...qe)=>v(D)&&v(D)(...qe)),onChange:X,onKeydown:Oe}),null,16,vie),v(K)?(V(),z("span",{key:0,style:Pe(w.value),class:U(v(g).e("count"))},Te(v(Y))+" / "+Te(he.maxlength),7)):ee("v-if",!0)],64))],16,gie)),[[Rt,he.type!=="hidden"]])}});var Cie=Ve(mie,[["__file","input.vue"]]);const kr=lt(Cie),Jl=4,c3={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Sie=({move:t,size:e,bar:n})=>({[n.size]:e,transform:`translate${n.axis}(${t}%)`}),YS=Symbol("scrollbarContextKey"),bie=Re({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),wie="Thumb",Tie=q({__name:"thumb",props:bie,setup(t){const e=t,n=We(YS),r=Ce("scrollbar");n||Yn(wie,"can not inject scrollbar context");const a=P(),s=P(),o=P({}),i=P(!1);let l=!1,c=!1,u=Ot?document.onselectstart:null;const f=R(()=>c3[e.vertical?"vertical":"horizontal"]),d=R(()=>Sie({size:e.size,move:e.move,bar:f.value})),p=R(()=>a.value[f.value.offset]**2/n.wrapElement[f.value.scrollSize]/e.ratio/s.value[f.value.offset]),h=w=>{var x;if(w.stopPropagation(),w.ctrlKey||[1,2].includes(w.button))return;(x=window.getSelection())==null||x.removeAllRanges(),y(w);const E=w.currentTarget;E&&(o.value[f.value.axis]=E[f.value.offset]-(w[f.value.client]-E.getBoundingClientRect()[f.value.direction]))},g=w=>{if(!s.value||!a.value||!n.wrapElement)return;const x=Math.abs(w.target.getBoundingClientRect()[f.value.direction]-w[f.value.client]),E=s.value[f.value.offset]/2,O=(x-E)*100*p.value/a.value[f.value.offset];n.wrapElement[f.value.scroll]=O*n.wrapElement[f.value.scrollSize]/100},y=w=>{w.stopImmediatePropagation(),l=!0,document.addEventListener("mousemove",m),document.addEventListener("mouseup",b),u=document.onselectstart,document.onselectstart=()=>!1},m=w=>{if(!a.value||!s.value||l===!1)return;const x=o.value[f.value.axis];if(!x)return;const E=(a.value.getBoundingClientRect()[f.value.direction]-w[f.value.client])*-1,O=s.value[f.value.offset]-x,k=(E-O)*100*p.value/a.value[f.value.offset];n.wrapElement[f.value.scroll]=k*n.wrapElement[f.value.scrollSize]/100},b=()=>{l=!1,o.value[f.value.axis]=0,document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",b),T(),c&&(i.value=!1)},C=()=>{c=!1,i.value=!!e.size},S=()=>{c=!0,i.value=l};ln(()=>{T(),document.removeEventListener("mouseup",b)});const T=()=>{document.onselectstart!==u&&(document.onselectstart=u)};return vn(tn(n,"scrollbarElement"),"mousemove",C),vn(tn(n,"scrollbarElement"),"mouseleave",S),(w,x)=>(V(),ae(jn,{name:v(r).b("fade"),persisted:""},{default:Z(()=>[rt(H("div",{ref_key:"instance",ref:a,class:U([v(r).e("bar"),v(r).is(v(f).key)]),onMousedown:g},[H("div",{ref_key:"thumb",ref:s,class:U(v(r).e("thumb")),style:Pe(v(d)),onMousedown:h},null,38)],34),[[Rt,w.always||i.value]])]),_:1},8,["name"]))}});var $x=Ve(Tie,[["__file","thumb.vue"]]);const xie=Re({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),Eie=q({__name:"bar",props:xie,setup(t,{expose:e}){const n=t,r=We(YS),a=P(0),s=P(0),o=P(""),i=P(""),l=P(1),c=P(1);return e({handleScroll:d=>{if(d){const p=d.offsetHeight-Jl,h=d.offsetWidth-Jl;s.value=d.scrollTop*100/p*l.value,a.value=d.scrollLeft*100/h*c.value}},update:()=>{const d=r==null?void 0:r.wrapElement;if(!d)return;const p=d.offsetHeight-Jl,h=d.offsetWidth-Jl,g=p**2/d.scrollHeight,y=h**2/d.scrollWidth,m=Math.max(g,n.minSize),b=Math.max(y,n.minSize);l.value=g/(p-g)/(m/(p-m)),c.value=y/(h-y)/(b/(h-b)),i.value=m+Jl<p?`${m}px`:"",o.value=b+Jl<h?`${b}px`:""}}),(d,p)=>(V(),z(Ue,null,[j($x,{move:a.value,ratio:c.value,size:o.value,always:d.always},null,8,["move","ratio","size","always"]),j($x,{move:s.value,ratio:l.value,size:i.value,vertical:"",always:d.always},null,8,["move","ratio","size","always"])],64))}});var kie=Ve(Eie,[["__file","bar.vue"]]);const Oie=Re({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:Q([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical"]}}),Mie={scroll:({scrollTop:t,scrollLeft:e})=>[t,e].every(Xe)},Rie="ElScrollbar",_ie=q({name:Rie}),Vie=q({..._ie,props:Oie,emits:Mie,setup(t,{expose:e,emit:n}){const r=t,a=Ce("scrollbar");let s,o;const i=P(),l=P(),c=P(),u=P(),f=R(()=>{const C={};return r.height&&(C.height=Bn(r.height)),r.maxHeight&&(C.maxHeight=Bn(r.maxHeight)),[r.wrapStyle,C]}),d=R(()=>[r.wrapClass,a.e("wrap"),{[a.em("wrap","hidden-default")]:!r.native}]),p=R(()=>[a.e("view"),r.viewClass]),h=()=>{var C;l.value&&((C=u.value)==null||C.handleScroll(l.value),n("scroll",{scrollTop:l.value.scrollTop,scrollLeft:l.value.scrollLeft}))};function g(C,S){pt(C)?l.value.scrollTo(C):Xe(C)&&Xe(S)&&l.value.scrollTo(C,S)}const y=C=>{Xe(C)&&(l.value.scrollTop=C)},m=C=>{Xe(C)&&(l.value.scrollLeft=C)},b=()=>{var C;(C=u.value)==null||C.update()};return pe(()=>r.noresize,C=>{C?(s==null||s(),o==null||o()):({stop:s}=Sn(c,b),o=vn("resize",b))},{immediate:!0}),pe(()=>[r.maxHeight,r.height],()=>{r.native||Ye(()=>{var C;b(),l.value&&((C=u.value)==null||C.handleScroll(l.value))})}),bt(YS,Dt({scrollbarElement:i,wrapElement:l})),at(()=>{r.native||Ye(()=>{b()})}),mo(()=>b()),e({wrapRef:l,update:b,scrollTo:g,setScrollTop:y,setScrollLeft:m,handleScroll:h}),(C,S)=>(V(),z("div",{ref_key:"scrollbarRef",ref:i,class:U(v(a).b())},[H("div",{ref_key:"wrapRef",ref:l,class:U(v(d)),style:Pe(v(f)),onScroll:h},[(V(),ae(dt(C.tag),{id:C.id,ref_key:"resizeRef",ref:c,class:U(v(p)),style:Pe(C.viewStyle),role:C.role,"aria-label":C.ariaLabel,"aria-orientation":C.ariaOrientation},{default:Z(()=>[ce(C.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),C.native?ee("v-if",!0):(V(),ae(kie,{key:0,ref_key:"barRef",ref:u,always:C.always,"min-size":C.minSize},null,8,["always","min-size"]))],2))}});var Die=Ve(Vie,[["__file","scrollbar.vue"]]);const To=lt(Die),qS=Symbol("popper"),u3=Symbol("popperContent"),Lie=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],f3=Re({role:{type:String,values:Lie,default:"tooltip"}}),Nie=q({name:"ElPopper",inheritAttrs:!1}),Bie=q({...Nie,props:f3,setup(t,{expose:e}){const n=t,r=P(),a=P(),s=P(),o=P(),i=R(()=>n.role),l={triggerRef:r,popperInstanceRef:a,contentRef:s,referenceRef:o,role:i};return e(l),bt(qS,l),(c,u)=>ce(c.$slots,"default")}});var Fie=Ve(Bie,[["__file","popper.vue"]]);const d3=Re({arrowOffset:{type:Number,default:5}}),$ie=q({name:"ElPopperArrow",inheritAttrs:!1}),Uie=q({...$ie,props:d3,setup(t,{expose:e}){const n=t,r=Ce("popper"),{arrowOffset:a,arrowRef:s,arrowStyle:o}=We(u3,void 0);return pe(()=>n.arrowOffset,i=>{a.value=i}),ln(()=>{s.value=void 0}),e({arrowRef:s}),(i,l)=>(V(),z("span",{ref_key:"arrowRef",ref:s,class:U(v(r).e("arrow")),style:Pe(v(o)),"data-popper-arrow":""},null,6))}});var Aie=Ve(Uie,[["__file","arrow.vue"]]);const Wie="ElOnlyChild",p3=q({name:Wie,setup(t,{slots:e,attrs:n}){var r;const a=We(PL),s=ose((r=a==null?void 0:a.setForwardRef)!=null?r:zt);return()=>{var o;const i=(o=e.default)==null?void 0:o.call(e,n);if(!i||i.length>1)return null;const l=g3(i);return l?rt(co(l,n),[[s]]):null}}});function g3(t){if(!t)return null;const e=t;for(const n of e){if(pt(n))switch(n.type){case Ar:continue;case gu:case"svg":return Ux(n);case Ue:return g3(n.children);default:return n}return Ux(n)}return null}function Ux(t){const e=Ce("only-child");return j("span",{class:e.e("content")},[t])}const h3=Re({virtualRef:{type:Q(Object)},virtualTriggering:Boolean,onMouseenter:{type:Q(Function)},onMouseleave:{type:Q(Function)},onClick:{type:Q(Function)},onKeydown:{type:Q(Function)},onFocus:{type:Q(Function)},onBlur:{type:Q(Function)},onContextmenu:{type:Q(Function)},id:String,open:Boolean}),Iie=q({name:"ElPopperTrigger",inheritAttrs:!1}),Pie=q({...Iie,props:h3,setup(t,{expose:e}){const n=t,{role:r,triggerRef:a}=We(qS,void 0);sse(a);const s=R(()=>i.value?n.id:void 0),o=R(()=>{if(r&&r.value==="tooltip")return n.open&&n.id?n.id:void 0}),i=R(()=>{if(r&&r.value!=="tooltip")return r.value}),l=R(()=>i.value?`${n.open}`:void 0);let c;return at(()=>{pe(()=>n.virtualRef,u=>{u&&(a.value=Zr(u))},{immediate:!0}),pe(a,(u,f)=>{c==null||c(),c=void 0,_a(u)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(d=>{var p;const h=n[d];h&&(u.addEventListener(d.slice(2).toLowerCase(),h),(p=f==null?void 0:f.removeEventListener)==null||p.call(f,d.slice(2).toLowerCase(),h))}),c=pe([s,o,i,l],d=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((p,h)=>{er(d[h])?u.removeAttribute(p):u.setAttribute(p,d[h])})},{immediate:!0})),_a(f)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(d=>f.removeAttribute(d))},{immediate:!0})}),ln(()=>{c==null||c(),c=void 0}),e({triggerRef:a}),(u,f)=>u.virtualTriggering?ee("v-if",!0):(V(),ae(v(p3),ft({key:0},u.$attrs,{"aria-controls":v(s),"aria-describedby":v(o),"aria-expanded":v(l),"aria-haspopup":v(i)}),{default:Z(()=>[ce(u.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var Gie=Ve(Pie,[["__file","trigger.vue"]]);const Y0="focus-trap.focus-after-trapped",q0="focus-trap.focus-after-released",zie="focus-trap.focusout-prevented",Ax={cancelable:!0,bubbles:!1},Hie={cancelable:!0,bubbles:!1},Wx="focusAfterTrapped",Ix="focusAfterReleased",XS=Symbol("elFocusTrap"),ZS=P(),Gv=P(0),JS=P(0);let wp=0;const v3=t=>{const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0||r===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e},Px=(t,e)=>{for(const n of t)if(!Kie(n,e))return n},Kie=(t,e)=>{if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1},jie=t=>{const e=v3(t),n=Px(e,t),r=Px(e.reverse(),t);return[n,r]},Yie=t=>t instanceof HTMLInputElement&&"select"in t,Uo=(t,e)=>{if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),JS.value=window.performance.now(),t!==n&&Yie(t)&&e&&t.select()}};function Gx(t,e){const n=[...t],r=t.indexOf(e);return r!==-1&&n.splice(r,1),n}const qie=()=>{let t=[];return{push:r=>{const a=t[0];a&&r!==a&&a.pause(),t=Gx(t,r),t.unshift(r)},remove:r=>{var a,s;t=Gx(t,r),(s=(a=t[0])==null?void 0:a.resume)==null||s.call(a)}}},Xie=(t,e=!1)=>{const n=document.activeElement;for(const r of t)if(Uo(r,e),document.activeElement!==n)return},zx=qie(),Zie=()=>Gv.value>JS.value,Tp=()=>{ZS.value="pointer",Gv.value=window.performance.now()},Hx=()=>{ZS.value="keyboard",Gv.value=window.performance.now()},Jie=()=>(at(()=>{wp===0&&(document.addEventListener("mousedown",Tp),document.addEventListener("touchstart",Tp),document.addEventListener("keydown",Hx)),wp++}),ln(()=>{wp--,wp<=0&&(document.removeEventListener("mousedown",Tp),document.removeEventListener("touchstart",Tp),document.removeEventListener("keydown",Hx))}),{focusReason:ZS,lastUserFocusTimestamp:Gv,lastAutomatedFocusTimestamp:JS}),xp=t=>new CustomEvent(zie,{...Hie,detail:t}),Qie=q({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[Wx,Ix,"focusin","focusout","focusout-prevented","release-requested"],setup(t,{emit:e}){const n=P();let r,a;const{focusReason:s}=Jie();ese(h=>{t.trapped&&!o.paused&&e("release-requested",h)});const o={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},i=h=>{if(!t.loop&&!t.trapped||o.paused)return;const{key:g,altKey:y,ctrlKey:m,metaKey:b,currentTarget:C,shiftKey:S}=h,{loop:T}=t,w=g===He.tab&&!y&&!m&&!b,x=document.activeElement;if(w&&x){const E=C,[O,k]=jie(E);if(O&&k){if(!S&&x===k){const D=xp({focusReason:s.value});e("focusout-prevented",D),D.defaultPrevented||(h.preventDefault(),T&&Uo(O,!0))}else if(S&&[O,E].includes(x)){const D=xp({focusReason:s.value});e("focusout-prevented",D),D.defaultPrevented||(h.preventDefault(),T&&Uo(k,!0))}}else if(x===E){const D=xp({focusReason:s.value});e("focusout-prevented",D),D.defaultPrevented||h.preventDefault()}}};bt(XS,{focusTrapRef:n,onKeydown:i}),pe(()=>t.focusTrapEl,h=>{h&&(n.value=h)},{immediate:!0}),pe([n],([h],[g])=>{h&&(h.addEventListener("keydown",i),h.addEventListener("focusin",u),h.addEventListener("focusout",f)),g&&(g.removeEventListener("keydown",i),g.removeEventListener("focusin",u),g.removeEventListener("focusout",f))});const l=h=>{e(Wx,h)},c=h=>e(Ix,h),u=h=>{const g=v(n);if(!g)return;const y=h.target,m=h.relatedTarget,b=y&&g.contains(y);t.trapped||m&&g.contains(m)||(r=m),b&&e("focusin",h),!o.paused&&t.trapped&&(b?a=y:Uo(a,!0))},f=h=>{const g=v(n);if(!(o.paused||!g))if(t.trapped){const y=h.relatedTarget;!er(y)&&!g.contains(y)&&setTimeout(()=>{if(!o.paused&&t.trapped){const m=xp({focusReason:s.value});e("focusout-prevented",m),m.defaultPrevented||Uo(a,!0)}},0)}else{const y=h.target;y&&g.contains(y)||e("focusout",h)}};async function d(){await Ye();const h=v(n);if(h){zx.push(o);const g=h.contains(document.activeElement)?r:document.activeElement;if(r=g,!h.contains(g)){const m=new Event(Y0,Ax);h.addEventListener(Y0,l),h.dispatchEvent(m),m.defaultPrevented||Ye(()=>{let b=t.focusStartEl;tt(b)||(Uo(b),document.activeElement!==b&&(b="first")),b==="first"&&Xie(v3(h),!0),(document.activeElement===g||b==="container")&&Uo(h)})}}}function p(){const h=v(n);if(h){h.removeEventListener(Y0,l);const g=new CustomEvent(q0,{...Ax,detail:{focusReason:s.value}});h.addEventListener(q0,c),h.dispatchEvent(g),!g.defaultPrevented&&(s.value=="keyboard"||!Zie()||h.contains(document.activeElement))&&Uo(r??document.body),h.removeEventListener(q0,c),zx.remove(o)}}return at(()=>{t.trapped&&d(),pe(()=>t.trapped,h=>{h?d():p()})}),ln(()=>{t.trapped&&p()}),{onKeydown:i}}});function ele(t,e,n,r,a,s){return ce(t.$slots,"default",{handleKeydown:t.onKeydown})}var kd=Ve(Qie,[["render",ele],["__file","focus-trap.vue"]]);const tle=["fixed","absolute"],nle=Re({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Q(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:Al,default:"bottom"},popperOptions:{type:Q(Object),default:()=>({})},strategy:{type:String,values:tle,default:"absolute"}}),y3=Re({...nle,id:String,style:{type:Q([String,Array,Object])},className:{type:Q([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:Q([String,Array,Object])},popperStyle:{type:Q([String,Array,Object])},referenceEl:{type:Q(Object)},triggerTargetEl:{type:Q(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},ariaLabel:{type:String,default:void 0},virtualTriggering:Boolean,zIndex:Number}),rle={mouseenter:t=>t instanceof MouseEvent,mouseleave:t=>t instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},ale=(t,e=[])=>{const{placement:n,strategy:r,popperOptions:a}=t,s={placement:n,strategy:r,...a,modifiers:[...ole(t),...e]};return ile(s,a==null?void 0:a.modifiers),s},sle=t=>{if(Ot)return Zr(t)};function ole(t){const{offset:e,gpuAcceleration:n,fallbackPlacements:r}=t;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:r}},{name:"computeStyles",options:{gpuAcceleration:n}}]}function ile(t,e){e&&(t.modifiers=[...t.modifiers,...e??[]])}const lle=0,cle=t=>{const{popperInstanceRef:e,contentRef:n,triggerRef:r,role:a}=We(qS,void 0),s=P(),o=P(),i=R(()=>({name:"eventListeners",enabled:!!t.visible})),l=R(()=>{var m;const b=v(s),C=(m=v(o))!=null?m:lle;return{name:"arrow",enabled:!dL(b),options:{element:b,padding:C}}}),c=R(()=>({onFirstUpdate:()=>{h()},...ale(t,[v(l),v(i)])})),u=R(()=>sle(t.referenceEl)||v(r)),{attributes:f,state:d,styles:p,update:h,forceUpdate:g,instanceRef:y}=Xae(u,n,c);return pe(y,m=>e.value=m),at(()=>{pe(()=>{var m;return(m=v(u))==null?void 0:m.getBoundingClientRect()},()=>{h()})}),{attributes:f,arrowRef:s,contentRef:n,instanceRef:y,state:d,styles:p,role:a,forceUpdate:g,update:h}},ule=(t,{attributes:e,styles:n,role:r})=>{const{nextZIndex:a}=Cu(),s=Ce("popper"),o=R(()=>v(e).popper),i=P(Xe(t.zIndex)?t.zIndex:a()),l=R(()=>[s.b(),s.is("pure",t.pure),s.is(t.effect),t.popperClass]),c=R(()=>[{zIndex:v(i)},v(n).popper,t.popperStyle||{}]),u=R(()=>r.value==="dialog"?"false":void 0),f=R(()=>v(n).arrow||{});return{ariaModal:u,arrowStyle:f,contentAttrs:o,contentClass:l,contentStyle:c,contentZIndex:i,updateZIndex:()=>{i.value=Xe(t.zIndex)?t.zIndex:a()}}},fle=(t,e)=>{const n=P(!1),r=P();return{focusStartRef:r,trapped:n,onFocusAfterReleased:c=>{var u;((u=c.detail)==null?void 0:u.focusReason)!=="pointer"&&(r.value="first",e("blur"))},onFocusAfterTrapped:()=>{e("focus")},onFocusInTrap:c=>{t.visible&&!n.value&&(c.target&&(r.value=c.target),n.value=!0)},onFocusoutPrevented:c=>{t.trapping||(c.detail.focusReason==="pointer"&&c.preventDefault(),n.value=!1)},onReleaseRequested:()=>{n.value=!1,e("close")}}},dle=q({name:"ElPopperContent"}),ple=q({...dle,props:y3,emits:rle,setup(t,{expose:e,emit:n}){const r=t,{focusStartRef:a,trapped:s,onFocusAfterReleased:o,onFocusAfterTrapped:i,onFocusInTrap:l,onFocusoutPrevented:c,onReleaseRequested:u}=fle(r,n),{attributes:f,arrowRef:d,contentRef:p,styles:h,instanceRef:g,role:y,update:m}=cle(r),{ariaModal:b,arrowStyle:C,contentAttrs:S,contentClass:T,contentStyle:w,updateZIndex:x}=ule(r,{styles:h,attributes:f,role:y}),E=We(Ds,void 0),O=P();bt(u3,{arrowStyle:C,arrowRef:d,arrowOffset:O}),E&&(E.addInputId||E.removeInputId)&&bt(Ds,{...E,addInputId:zt,removeInputId:zt});let k;const M=(I=!0)=>{m(),I&&x()},D=()=>{M(!1),r.visible&&r.focusOnShow?s.value=!0:r.visible===!1&&(s.value=!1)};return at(()=>{pe(()=>r.triggerTargetEl,(I,B)=>{k==null||k(),k=void 0;const F=v(I||p.value),$=v(B||p.value);_a(F)&&(k=pe([y,()=>r.ariaLabel,b,()=>r.id],N=>{["role","aria-label","aria-modal","id"].forEach((W,_)=>{er(N[_])?F.removeAttribute(W):F.setAttribute(W,N[_])})},{immediate:!0})),$!==F&&_a($)&&["role","aria-label","aria-modal","id"].forEach(N=>{$.removeAttribute(N)})},{immediate:!0}),pe(()=>r.visible,D,{immediate:!0})}),ln(()=>{k==null||k(),k=void 0}),e({popperContentRef:p,popperInstanceRef:g,updatePopper:M,contentStyle:w}),(I,B)=>(V(),z("div",ft({ref_key:"contentRef",ref:p},v(S),{style:v(w),class:v(T),tabindex:"-1",onMouseenter:B[0]||(B[0]=F=>I.$emit("mouseenter",F)),onMouseleave:B[1]||(B[1]=F=>I.$emit("mouseleave",F))}),[j(v(kd),{trapped:v(s),"trap-on-focus-in":!0,"focus-trap-el":v(p),"focus-start-el":v(a),onFocusAfterTrapped:v(i),onFocusAfterReleased:v(o),onFocusin:v(l),onFocusoutPrevented:v(c),onReleaseRequested:v(u)},{default:Z(()=>[ce(I.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16))}});var gle=Ve(ple,[["__file","content.vue"]]);const m3=lt(Fie),zv=Symbol("elTooltip"),dr=Re({...rse,...y3,appendTo:{type:Q([String,Object])},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:Q(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean}),Wf=Re({...h3,disabled:Boolean,trigger:{type:Q([String,Array]),default:"hover"},triggerKeys:{type:Q(Array),default:()=>[He.enter,He.space]}}),{useModelToggleProps:hle,useModelToggleEmits:vle,useModelToggle:yle}=ML("visible"),mle=Re({...f3,...hle,...dr,...Wf,...d3,showArrow:{type:Boolean,default:!0}}),Cle=[...vle,"before-show","before-hide","show","hide","open","close"],Sle=(t,e)=>Be(t)?t.includes(e):t===e,Ql=(t,e,n)=>r=>{Sle(v(t),e)&&n(r)},ble=q({name:"ElTooltipTrigger"}),wle=q({...ble,props:Wf,setup(t,{expose:e}){const n=t,r=Ce("tooltip"),{controlled:a,id:s,open:o,onOpen:i,onClose:l,onToggle:c}=We(zv,void 0),u=P(null),f=()=>{if(v(a)||n.disabled)return!0},d=tn(n,"trigger"),p=kn(f,Ql(d,"hover",i)),h=kn(f,Ql(d,"hover",l)),g=kn(f,Ql(d,"click",S=>{S.button===0&&c(S)})),y=kn(f,Ql(d,"focus",i)),m=kn(f,Ql(d,"focus",l)),b=kn(f,Ql(d,"contextmenu",S=>{S.preventDefault(),c(S)})),C=kn(f,S=>{const{code:T}=S;n.triggerKeys.includes(T)&&(S.preventDefault(),c(S))});return e({triggerRef:u}),(S,T)=>(V(),ae(v(Gie),{id:v(s),"virtual-ref":S.virtualRef,open:v(o),"virtual-triggering":S.virtualTriggering,class:U(v(r).e("trigger")),onBlur:v(m),onClick:v(g),onContextmenu:v(b),onFocus:v(y),onMouseenter:v(p),onMouseleave:v(h),onKeydown:v(C)},{default:Z(()=>[ce(S.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var Tle=Ve(wle,[["__file","trigger.vue"]]);const xle=q({name:"ElTooltipContent",inheritAttrs:!1}),Ele=q({...xle,props:dr,setup(t,{expose:e}){const n=t,{selector:r}=IL(),a=Ce("tooltip"),s=P(null),o=P(!1),{controlled:i,id:l,open:c,trigger:u,onClose:f,onOpen:d,onShow:p,onHide:h,onBeforeShow:g,onBeforeHide:y}=We(zv,void 0),m=R(()=>n.transition||`${a.namespace.value}-fade-in-linear`),b=R(()=>n.persistent);ln(()=>{o.value=!0});const C=R(()=>v(b)?!0:v(c)),S=R(()=>n.disabled?!1:v(c)),T=R(()=>n.appendTo||r.value),w=R(()=>{var N;return(N=n.style)!=null?N:{}}),x=R(()=>!v(c)),E=()=>{h()},O=()=>{if(v(i))return!0},k=kn(O,()=>{n.enterable&&v(u)==="hover"&&d()}),M=kn(O,()=>{v(u)==="hover"&&f()}),D=()=>{var N,W;(W=(N=s.value)==null?void 0:N.updatePopper)==null||W.call(N),g==null||g()},I=()=>{y==null||y()},B=()=>{p(),$=eS(R(()=>{var N;return(N=s.value)==null?void 0:N.popperContentRef}),()=>{if(v(i))return;v(u)!=="hover"&&f()})},F=()=>{n.virtualTriggering||f()};let $;return pe(()=>v(c),N=>{N||$==null||$()},{flush:"post"}),pe(()=>n.content,()=>{var N,W;(W=(N=s.value)==null?void 0:N.updatePopper)==null||W.call(N)}),e({contentRef:s}),(N,W)=>(V(),ae(pu,{disabled:!N.teleported,to:v(T)},[j(jn,{name:v(m),onAfterLeave:E,onBeforeEnter:D,onAfterEnter:B,onBeforeLeave:I},{default:Z(()=>[v(C)?rt((V(),ae(v(gle),ft({key:0,id:v(l),ref_key:"contentRef",ref:s},N.$attrs,{"aria-label":N.ariaLabel,"aria-hidden":v(x),"boundaries-padding":N.boundariesPadding,"fallback-placements":N.fallbackPlacements,"gpu-acceleration":N.gpuAcceleration,offset:N.offset,placement:N.placement,"popper-options":N.popperOptions,strategy:N.strategy,effect:N.effect,enterable:N.enterable,pure:N.pure,"popper-class":N.popperClass,"popper-style":[N.popperStyle,v(w)],"reference-el":N.referenceEl,"trigger-target-el":N.triggerTargetEl,visible:v(S),"z-index":N.zIndex,onMouseenter:v(k),onMouseleave:v(M),onBlur:F,onClose:v(f)}),{default:Z(()=>[o.value?ee("v-if",!0):ce(N.$slots,"default",{key:0})]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[Rt,v(S)]]):ee("v-if",!0)]),_:3},8,["name"])],8,["disabled","to"]))}});var kle=Ve(Ele,[["__file","content.vue"]]);const Ole=["innerHTML"],Mle={key:1},Rle=q({name:"ElTooltip"}),_le=q({...Rle,props:mle,emits:Cle,setup(t,{expose:e,emit:n}){const r=t;nse();const a=Vr(),s=P(),o=P(),i=()=>{var m;const b=v(s);b&&((m=b.popperInstanceRef)==null||m.update())},l=P(!1),c=P(),{show:u,hide:f,hasUpdateHandler:d}=yle({indicator:l,toggleReason:c}),{onOpen:p,onClose:h}=ase({showAfter:tn(r,"showAfter"),hideAfter:tn(r,"hideAfter"),autoClose:tn(r,"autoClose"),open:u,close:f}),g=R(()=>Wn(r.visible)&&!d.value);bt(zv,{controlled:g,id:a,open:du(l),trigger:tn(r,"trigger"),onOpen:m=>{p(m)},onClose:m=>{h(m)},onToggle:m=>{v(l)?h(m):p(m)},onShow:()=>{n("show",c.value)},onHide:()=>{n("hide",c.value)},onBeforeShow:()=>{n("before-show",c.value)},onBeforeHide:()=>{n("before-hide",c.value)},updatePopper:i}),pe(()=>r.disabled,m=>{m&&l.value&&(l.value=!1)});const y=m=>{var b,C;const S=(C=(b=o.value)==null?void 0:b.contentRef)==null?void 0:C.popperContentRef,T=(m==null?void 0:m.relatedTarget)||document.activeElement;return S&&S.contains(T)};return IV(()=>l.value&&f()),e({popperRef:s,contentRef:o,isFocusInsideContent:y,updatePopper:i,onOpen:p,onClose:h,hide:f}),(m,b)=>(V(),ae(v(m3),{ref_key:"popperRef",ref:s,role:m.role},{default:Z(()=>[j(Tle,{disabled:m.disabled,trigger:m.trigger,"trigger-keys":m.triggerKeys,"virtual-ref":m.virtualRef,"virtual-triggering":m.virtualTriggering},{default:Z(()=>[m.$slots.default?ce(m.$slots,"default",{key:0}):ee("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),j(kle,{ref_key:"contentRef",ref:o,"aria-label":m.ariaLabel,"boundaries-padding":m.boundariesPadding,content:m.content,disabled:m.disabled,effect:m.effect,enterable:m.enterable,"fallback-placements":m.fallbackPlacements,"hide-after":m.hideAfter,"gpu-acceleration":m.gpuAcceleration,offset:m.offset,persistent:m.persistent,"popper-class":m.popperClass,"popper-style":m.popperStyle,placement:m.placement,"popper-options":m.popperOptions,pure:m.pure,"raw-content":m.rawContent,"reference-el":m.referenceEl,"trigger-target-el":m.triggerTargetEl,"show-after":m.showAfter,strategy:m.strategy,teleported:m.teleported,transition:m.transition,"virtual-triggering":m.virtualTriggering,"z-index":m.zIndex,"append-to":m.appendTo},{default:Z(()=>[ce(m.$slots,"content",{},()=>[m.rawContent?(V(),z("span",{key:0,innerHTML:m.content},null,8,Ole)):(V(),z("span",Mle,Te(m.content),1))]),m.showArrow?(V(),ae(v(Aie),{key:0,"arrow-offset":m.arrowOffset},null,8,["arrow-offset"])):ee("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Vle=Ve(_le,[["__file","tooltip.vue"]]);const Dr=lt(Vle),Dle=Re({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:Q(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:Q([Function,Array]),default:zt},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:dr.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:String}),Lle={[ut]:t=>tt(t),[Ir]:t=>tt(t),[pn]:t=>tt(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,select:t=>pt(t)},Nle=["aria-expanded","aria-owns"],Ble={key:0},Fle=["id","aria-selected","onClick"],C3="ElAutocomplete",$le=q({name:C3,inheritAttrs:!1}),Ule=q({...$le,props:Dle,emits:Lle,setup(t,{expose:e,emit:n}){const r=t,a=OS(),s=Nl(),o=na(),i=Ce("autocomplete"),l=P(),c=P(),u=P(),f=P();let d=!1,p=!1;const h=P([]),g=P(-1),y=P(""),m=P(!1),b=P(!1),C=P(!1),S=Vr(),T=R(()=>s.style),w=R(()=>(h.value.length>0||C.value)&&m.value),x=R(()=>!r.hideLoading&&C.value),E=R(()=>l.value?Array.from(l.value.$el.querySelectorAll("input")):[]),O=()=>{w.value&&(y.value=`${l.value.$el.offsetWidth}px`)},k=()=>{g.value=-1},D=ta(async se=>{if(b.value)return;const ie=re=>{C.value=!1,!b.value&&(Be(re)?(h.value=re,g.value=r.highlightFirstItem?0:-1):Yn(C3,"autocomplete suggestions must be an array"))};if(C.value=!0,Be(r.fetchSuggestions))ie(r.fetchSuggestions);else{const re=await r.fetchSuggestions(se,ie);Be(re)&&ie(re)}},r.debounce),I=se=>{const ie=!!se;if(n(Ir,se),n(ut,se),b.value=!1,m.value||(m.value=ie),!r.triggerOnFocus&&!se){b.value=!0,h.value=[];return}D(se)},B=se=>{var ie;o.value||(((ie=se.target)==null?void 0:ie.tagName)!=="INPUT"||E.value.includes(document.activeElement))&&(m.value=!0)},F=se=>{n(pn,se)},$=se=>{p?p=!1:(m.value=!0,n("focus",se),r.triggerOnFocus&&!d&&D(String(r.modelValue)))},N=se=>{setTimeout(()=>{var ie;if((ie=u.value)!=null&&ie.isFocusInsideContent()){p=!0;return}m.value&&G(),n("blur",se)})},W=()=>{m.value=!1,n(ut,""),n("clear")},_=async()=>{w.value&&g.value>=0&&g.value<h.value.length?te(h.value[g.value]):r.selectWhenUnmatched&&(n("select",{value:r.modelValue}),h.value=[],g.value=-1)},L=se=>{w.value&&(se.preventDefault(),se.stopPropagation(),G())},G=()=>{m.value=!1},K=()=>{var se;(se=l.value)==null||se.focus()},Y=()=>{var se;(se=l.value)==null||se.blur()},te=async se=>{n(Ir,se[r.valueKey]),n(ut,se[r.valueKey]),n("select",se),h.value=[],g.value=-1},ve=se=>{if(!w.value||C.value)return;if(se<0){g.value=-1;return}se>=h.value.length&&(se=h.value.length-1);const ie=c.value.querySelector(`.${i.be("suggestion","wrap")}`),be=ie.querySelectorAll(`.${i.be("suggestion","list")} li`)[se],ge=ie.scrollTop,{offsetTop:Se,scrollHeight:De}=be;Se+De>ge+ie.clientHeight&&(ie.scrollTop+=De),Se<ge&&(ie.scrollTop-=De),g.value=se,l.value.ref.setAttribute("aria-activedescendant",`${S.value}-item-${g.value}`)};return eS(f,()=>{w.value&&G()}),at(()=>{l.value.ref.setAttribute("role","textbox"),l.value.ref.setAttribute("aria-autocomplete","list"),l.value.ref.setAttribute("aria-controls","id"),l.value.ref.setAttribute("aria-activedescendant",`${S.value}-item-${g.value}`),d=l.value.ref.hasAttribute("readonly")}),e({highlightedIndex:g,activated:m,loading:C,inputRef:l,popperRef:u,suggestions:h,handleSelect:te,handleKeyEnter:_,focus:K,blur:Y,close:G,highlight:ve}),(se,ie)=>(V(),ae(v(Dr),{ref_key:"popperRef",ref:u,visible:v(w),placement:se.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[v(i).e("popper"),se.popperClass],teleported:se.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${v(i).namespace.value}-zoom-in-top`,persistent:"",role:"listbox",onBeforeShow:O,onHide:k},{content:Z(()=>[H("div",{ref_key:"regionRef",ref:c,class:U([v(i).b("suggestion"),v(i).is("loading",v(x))]),style:Pe({[se.fitInputWidth?"width":"minWidth"]:y.value,outline:"none"}),role:"region"},[j(v(To),{id:v(S),tag:"ul","wrap-class":v(i).be("suggestion","wrap"),"view-class":v(i).be("suggestion","list"),role:"listbox"},{default:Z(()=>[v(x)?(V(),z("li",Ble,[ce(se.$slots,"loading",{},()=>[j(v(Ge),{class:U(v(i).is("loading"))},{default:Z(()=>[j(v(yi))]),_:1},8,["class"])])])):(V(!0),z(Ue,{key:1},gt(h.value,(re,be)=>(V(),z("li",{id:`${v(S)}-item-${be}`,key:be,class:U({highlighted:g.value===be}),role:"option","aria-selected":g.value===be,onClick:ge=>te(re)},[ce(se.$slots,"default",{item:re},()=>[Ct(Te(re[se.valueKey]),1)])],10,Fle))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:Z(()=>[H("div",{ref_key:"listboxRef",ref:f,class:U([v(i).b(),se.$attrs.class]),style:Pe(v(T)),role:"combobox","aria-haspopup":"listbox","aria-expanded":v(w),"aria-owns":v(S)},[j(v(kr),ft({ref_key:"inputRef",ref:l},v(a),{clearable:se.clearable,disabled:v(o),name:se.name,"model-value":se.modelValue,onInput:I,onChange:F,onFocus:$,onBlur:N,onClear:W,onKeydown:[ie[0]||(ie[0]=Xt(Ze(re=>ve(g.value-1),["prevent"]),["up"])),ie[1]||(ie[1]=Xt(Ze(re=>ve(g.value+1),["prevent"]),["down"])),Xt(_,["enter"]),Xt(G,["tab"]),Xt(L,["esc"])],onMousedown:B}),lo({_:2},[se.$slots.prepend?{name:"prepend",fn:Z(()=>[ce(se.$slots,"prepend")])}:void 0,se.$slots.append?{name:"append",fn:Z(()=>[ce(se.$slots,"append")])}:void 0,se.$slots.prefix?{name:"prefix",fn:Z(()=>[ce(se.$slots,"prefix")])}:void 0,se.$slots.suffix?{name:"suffix",fn:Z(()=>[ce(se.$slots,"suffix")])}:void 0]),1040,["clearable","disabled","name","model-value","onKeydown"])],14,Nle)]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var Ale=Ve(Ule,[["__file","autocomplete.vue"]]);const Wle=lt(Ale),Ile=Re({size:{type:[Number,String],values:Ns,default:"",validator:t=>Xe(t)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:Zt},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:Q(String),default:"cover"}}),Ple={error:t=>t instanceof Event},Gle=["src","alt","srcset"],zle=q({name:"ElAvatar"}),Hle=q({...zle,props:Ile,emits:Ple,setup(t,{emit:e}){const n=t,r=Ce("avatar"),a=P(!1),s=R(()=>{const{size:c,icon:u,shape:f}=n,d=[r.b()];return tt(c)&&d.push(r.m(c)),u&&d.push(r.m("icon")),f&&d.push(r.m(f)),d}),o=R(()=>{const{size:c}=n;return Xe(c)?r.cssVarBlock({size:Bn(c)||""}):void 0}),i=R(()=>({objectFit:n.fit}));pe(()=>n.src,()=>a.value=!1);function l(c){a.value=!0,e("error",c)}return(c,u)=>(V(),z("span",{class:U(v(s)),style:Pe(v(o))},[(c.src||c.srcSet)&&!a.value?(V(),z("img",{key:0,src:c.src,alt:c.alt,srcset:c.srcSet,style:Pe(v(i)),onError:l},null,44,Gle)):c.icon?(V(),ae(v(Ge),{key:1},{default:Z(()=>[(V(),ae(dt(c.icon)))]),_:1})):ce(c.$slots,"default",{key:2})],6))}});var Kle=Ve(Hle,[["__file","avatar.vue"]]);const jle=lt(Kle),Yle={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},qle={click:t=>t instanceof MouseEvent},Xle=(t,e,n)=>{const r=on(),a=on(),s=P(!1),o=()=>{r.value&&(s.value=r.value.scrollTop>=t.visibilityHeight)},i=c=>{var u;(u=r.value)==null||u.scrollTo({top:0,behavior:"smooth"}),e("click",c)},l=TD(o,300,!0);return vn(a,"scroll",l),at(()=>{var c;a.value=document,r.value=document.documentElement,t.target&&(r.value=(c=document.querySelector(t.target))!=null?c:void 0,r.value||Yn(n,`target does not exist: ${t.target}`),a.value=r.value),o()}),{visible:s,handleClick:i}},S3="ElBacktop",Zle=q({name:S3}),Jle=q({...Zle,props:Yle,emits:qle,setup(t,{emit:e}){const n=t,r=Ce("backtop"),{handleClick:a,visible:s}=Xle(n,e,S3),o=R(()=>({right:`${n.right}px`,bottom:`${n.bottom}px`}));return(i,l)=>(V(),ae(jn,{name:`${v(r).namespace.value}-fade-in`},{default:Z(()=>[v(s)?(V(),z("div",{key:0,style:Pe(v(o)),class:U(v(r).b()),onClick:l[0]||(l[0]=Ze((...c)=>v(a)&&v(a)(...c),["stop"]))},[ce(i.$slots,"default",{},()=>[j(v(Ge),{class:U(v(r).e("icon"))},{default:Z(()=>[j(v(Lne))]),_:1},8,["class"])])],6)):ee("v-if",!0)]),_:3},8,["name"]))}});var Qle=Ve(Jle,[["__file","backtop.vue"]]);const ece=lt(Qle),tce=Re({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),nce=["textContent"],rce=q({name:"ElBadge"}),ace=q({...rce,props:tce,setup(t,{expose:e}){const n=t,r=Ce("badge"),a=R(()=>n.isDot?"":Xe(n.value)&&Xe(n.max)?n.max<n.value?`${n.max}+`:`${n.value}`:`${n.value}`);return e({content:a}),(s,o)=>(V(),z("div",{class:U(v(r).b())},[ce(s.$slots,"default"),j(jn,{name:`${v(r).namespace.value}-zoom-in-center`,persisted:""},{default:Z(()=>[rt(H("sup",{class:U([v(r).e("content"),v(r).em("content",s.type),v(r).is("fixed",!!s.$slots.default),v(r).is("dot",s.isDot)]),textContent:Te(v(a))},null,10,nce),[[Rt,!s.hidden&&(v(a)||s.isDot)]])]),_:1},8,["name"])],2))}});var sce=Ve(ace,[["__file","badge.vue"]]);const b3=lt(sce),w3=Symbol("breadcrumbKey"),oce=Re({separator:{type:String,default:"/"},separatorIcon:{type:Zt}}),ice=q({name:"ElBreadcrumb"}),lce=q({...ice,props:oce,setup(t){const e=t,n=Ce("breadcrumb"),r=P();return bt(w3,e),at(()=>{const a=r.value.querySelectorAll(`.${n.e("item")}`);a.length&&a[a.length-1].setAttribute("aria-current","page")}),(a,s)=>(V(),z("div",{ref_key:"breadcrumb",ref:r,class:U(v(n).b()),"aria-label":"Breadcrumb",role:"navigation"},[ce(a.$slots,"default")],2))}});var cce=Ve(lce,[["__file","breadcrumb.vue"]]);const uce=Re({to:{type:Q([String,Object]),default:""},replace:{type:Boolean,default:!1}}),fce=q({name:"ElBreadcrumbItem"}),dce=q({...fce,props:uce,setup(t){const e=t,n=ot(),r=We(w3,void 0),a=Ce("breadcrumb"),s=n.appContext.config.globalProperties.$router,o=P(),i=()=>{!e.to||!s||(e.replace?s.replace(e.to):s.push(e.to))};return(l,c)=>{var u,f;return V(),z("span",{class:U(v(a).e("item"))},[H("span",{ref_key:"link",ref:o,class:U([v(a).e("inner"),v(a).is("link",!!l.to)]),role:"link",onClick:i},[ce(l.$slots,"default")],2),(u=v(r))!=null&&u.separatorIcon?(V(),ae(v(Ge),{key:0,class:U(v(a).e("separator"))},{default:Z(()=>[(V(),ae(dt(v(r).separatorIcon)))]),_:1},8,["class"])):(V(),z("span",{key:1,class:U(v(a).e("separator")),role:"presentation"},Te((f=v(r))==null?void 0:f.separator),3))],2)}}});var T3=Ve(dce,[["__file","breadcrumb-item.vue"]]);const pce=lt(cce,{BreadcrumbItem:T3}),gce=bn(T3),x3=Symbol("buttonGroupContextKey"),hce=(t,e)=>{uo({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},R(()=>t.type==="text"));const n=We(x3,void 0),r=Iv("button"),{form:a}=Hr(),s=qn(R(()=>n==null?void 0:n.size)),o=na(),i=P(),l=rr(),c=R(()=>t.type||(n==null?void 0:n.type)||""),u=R(()=>{var h,g,y;return(y=(g=t.autoInsertSpace)!=null?g:(h=r.value)==null?void 0:h.autoInsertSpace)!=null?y:!1}),f=R(()=>t.tag==="button"?{ariaDisabled:o.value||t.loading,disabled:o.value||t.loading,autofocus:t.autofocus,type:t.nativeType}:{}),d=R(()=>{var h;const g=(h=l.default)==null?void 0:h.call(l);if(u.value&&(g==null?void 0:g.length)===1){const y=g[0];if((y==null?void 0:y.type)===gu){const m=y.children;return new RegExp("^\\p{Unified_Ideograph}{2}$","u").test(m.trim())}}return!1});return{_disabled:o,_size:s,_type:c,_ref:i,_props:f,shouldAddSpace:d,handleClick:h=>{t.nativeType==="reset"&&(a==null||a.resetFields()),e("click",h)}}},_m=["default","primary","success","warning","info","danger","text",""],vce=["button","submit","reset"],Vm=Re({size:lr,disabled:Boolean,type:{type:String,values:_m,default:""},icon:{type:Zt},nativeType:{type:String,values:vce,default:"button"},loading:Boolean,loadingIcon:{type:Zt,default:()=>yi},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:Q([String,Object]),default:"button"}}),yce={click:t=>t instanceof MouseEvent};function br(t,e){mce(t)&&(t="100%");var n=Cce(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function Ep(t){return Math.min(1,Math.max(0,t))}function mce(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function Cce(t){return typeof t=="string"&&t.indexOf("%")!==-1}function E3(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function kp(t){return t<=1?"".concat(Number(t)*100,"%"):t}function Ji(t){return t.length===1?"0"+t:String(t)}function Sce(t,e,n){return{r:br(t,255)*255,g:br(e,255)*255,b:br(n,255)*255}}function Kx(t,e,n){t=br(t,255),e=br(e,255),n=br(n,255);var r=Math.max(t,e,n),a=Math.min(t,e,n),s=0,o=0,i=(r+a)/2;if(r===a)o=0,s=0;else{var l=r-a;switch(o=i>.5?l/(2-r-a):l/(r+a),r){case t:s=(e-n)/l+(e<n?6:0);break;case e:s=(n-t)/l+2;break;case n:s=(t-e)/l+4;break}s/=6}return{h:s,s:o,l:i}}function X0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*(6*n):n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function bce(t,e,n){var r,a,s;if(t=br(t,360),e=br(e,100),n=br(n,100),e===0)a=n,s=n,r=n;else{var o=n<.5?n*(1+e):n+e-n*e,i=2*n-o;r=X0(i,o,t+1/3),a=X0(i,o,t),s=X0(i,o,t-1/3)}return{r:r*255,g:a*255,b:s*255}}function jx(t,e,n){t=br(t,255),e=br(e,255),n=br(n,255);var r=Math.max(t,e,n),a=Math.min(t,e,n),s=0,o=r,i=r-a,l=r===0?0:i/r;if(r===a)s=0;else{switch(r){case t:s=(e-n)/i+(e<n?6:0);break;case e:s=(n-t)/i+2;break;case n:s=(t-e)/i+4;break}s/=6}return{h:s,s:l,v:o}}function wce(t,e,n){t=br(t,360)*6,e=br(e,100),n=br(n,100);var r=Math.floor(t),a=t-r,s=n*(1-e),o=n*(1-a*e),i=n*(1-(1-a)*e),l=r%6,c=[n,o,s,s,i,n][l],u=[i,n,n,o,s,s][l],f=[s,s,i,n,n,o][l];return{r:c*255,g:u*255,b:f*255}}function Yx(t,e,n,r){var a=[Ji(Math.round(t).toString(16)),Ji(Math.round(e).toString(16)),Ji(Math.round(n).toString(16))];return r&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function Tce(t,e,n,r,a){var s=[Ji(Math.round(t).toString(16)),Ji(Math.round(e).toString(16)),Ji(Math.round(n).toString(16)),Ji(xce(r))];return a&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function xce(t){return Math.round(parseFloat(t)*255).toString(16)}function qx(t){return oa(t)/255}function oa(t){return parseInt(t,16)}function Ece(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var Dm={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function kce(t){var e={r:0,g:0,b:0},n=1,r=null,a=null,s=null,o=!1,i=!1;return typeof t=="string"&&(t=Rce(t)),typeof t=="object"&&(Is(t.r)&&Is(t.g)&&Is(t.b)?(e=Sce(t.r,t.g,t.b),o=!0,i=String(t.r).substr(-1)==="%"?"prgb":"rgb"):Is(t.h)&&Is(t.s)&&Is(t.v)?(r=kp(t.s),a=kp(t.v),e=wce(t.h,r,a),o=!0,i="hsv"):Is(t.h)&&Is(t.s)&&Is(t.l)&&(r=kp(t.s),s=kp(t.l),e=bce(t.h,r,s),o=!0,i="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(n=t.a)),n=E3(n),{ok:o,format:t.format||i,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}var Oce="[-\\+]?\\d+%?",Mce="[-\\+]?\\d*\\.\\d+%?",Jo="(?:".concat(Mce,")|(?:").concat(Oce,")"),Z0="[\\s|\\(]+(".concat(Jo,")[,|\\s]+(").concat(Jo,")[,|\\s]+(").concat(Jo,")\\s*\\)?"),J0="[\\s|\\(]+(".concat(Jo,")[,|\\s]+(").concat(Jo,")[,|\\s]+(").concat(Jo,")[,|\\s]+(").concat(Jo,")\\s*\\)?"),Wa={CSS_UNIT:new RegExp(Jo),rgb:new RegExp("rgb"+Z0),rgba:new RegExp("rgba"+J0),hsl:new RegExp("hsl"+Z0),hsla:new RegExp("hsla"+J0),hsv:new RegExp("hsv"+Z0),hsva:new RegExp("hsva"+J0),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Rce(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var e=!1;if(Dm[t])t=Dm[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=Wa.rgb.exec(t);return n?{r:n[1],g:n[2],b:n[3]}:(n=Wa.rgba.exec(t),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Wa.hsl.exec(t),n?{h:n[1],s:n[2],l:n[3]}:(n=Wa.hsla.exec(t),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Wa.hsv.exec(t),n?{h:n[1],s:n[2],v:n[3]}:(n=Wa.hsva.exec(t),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Wa.hex8.exec(t),n?{r:oa(n[1]),g:oa(n[2]),b:oa(n[3]),a:qx(n[4]),format:e?"name":"hex8"}:(n=Wa.hex6.exec(t),n?{r:oa(n[1]),g:oa(n[2]),b:oa(n[3]),format:e?"name":"hex"}:(n=Wa.hex4.exec(t),n?{r:oa(n[1]+n[1]),g:oa(n[2]+n[2]),b:oa(n[3]+n[3]),a:qx(n[4]+n[4]),format:e?"name":"hex8"}:(n=Wa.hex3.exec(t),n?{r:oa(n[1]+n[1]),g:oa(n[2]+n[2]),b:oa(n[3]+n[3]),format:e?"name":"hex"}:!1)))))))))}function Is(t){return!!Wa.CSS_UNIT.exec(String(t))}var k3=function(){function t(e,n){e===void 0&&(e=""),n===void 0&&(n={});var r;if(e instanceof t)return e;typeof e=="number"&&(e=Ece(e)),this.originalInput=e;var a=kce(e);this.originalInput=e,this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a,this.roundA=Math.round(100*this.a)/100,this.format=(r=n.format)!==null&&r!==void 0?r:a.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=a.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},t.prototype.getLuminance=function(){var e=this.toRgb(),n,r,a,s=e.r/255,o=e.g/255,i=e.b/255;return s<=.03928?n=s/12.92:n=Math.pow((s+.055)/1.055,2.4),o<=.03928?r=o/12.92:r=Math.pow((o+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),.2126*n+.7152*r+.0722*a},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(e){return this.a=E3(e),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},t.prototype.toHsv=function(){var e=jx(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},t.prototype.toHsvString=function(){var e=jx(this.r,this.g,this.b),n=Math.round(e.h*360),r=Math.round(e.s*100),a=Math.round(e.v*100);return this.a===1?"hsv(".concat(n,", ").concat(r,"%, ").concat(a,"%)"):"hsva(".concat(n,", ").concat(r,"%, ").concat(a,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var e=Kx(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},t.prototype.toHslString=function(){var e=Kx(this.r,this.g,this.b),n=Math.round(e.h*360),r=Math.round(e.s*100),a=Math.round(e.l*100);return this.a===1?"hsl(".concat(n,", ").concat(r,"%, ").concat(a,"%)"):"hsla(".concat(n,", ").concat(r,"%, ").concat(a,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(e){return e===void 0&&(e=!1),Yx(this.r,this.g,this.b,e)},t.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},t.prototype.toHex8=function(e){return e===void 0&&(e=!1),Tce(this.r,this.g,this.b,this.a,e)},t.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},t.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var e=Math.round(this.r),n=Math.round(this.g),r=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(n,", ").concat(r,")"):"rgba(".concat(e,", ").concat(n,", ").concat(r,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var e=function(n){return"".concat(Math.round(br(n,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var e=function(n){return Math.round(br(n,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+Yx(this.r,this.g,this.b,!1),n=0,r=Object.entries(Dm);n<r.length;n++){var a=r[n],s=a[0],o=a[1];if(e===o)return s}return!1},t.prototype.toString=function(e){var n=!!e;e=e??this.format;var r=!1,a=this.a<1&&this.a>=0,s=!n&&a&&(e.startsWith("hex")||e==="name");return s?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l+=e/100,n.l=Ep(n.l),new t(n)},t.prototype.brighten=function(e){e===void 0&&(e=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),new t(n)},t.prototype.darken=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l-=e/100,n.l=Ep(n.l),new t(n)},t.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},t.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},t.prototype.desaturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s-=e/100,n.s=Ep(n.s),new t(n)},t.prototype.saturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s+=e/100,n.s=Ep(n.s),new t(n)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var n=this.toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,new t(n)},t.prototype.mix=function(e,n){n===void 0&&(n=50);var r=this.toRgb(),a=new t(e).toRgb(),s=n/100,o={r:(a.r-r.r)*s+r.r,g:(a.g-r.g)*s+r.g,b:(a.b-r.b)*s+r.b,a:(a.a-r.a)*s+r.a};return new t(o)},t.prototype.analogous=function(e,n){e===void 0&&(e=6),n===void 0&&(n=30);var r=this.toHsl(),a=360/n,s=[this];for(r.h=(r.h-(a*e>>1)+720)%360;--e;)r.h=(r.h+a)%360,s.push(new t(r));return s},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var n=this.toHsv(),r=n.h,a=n.s,s=n.v,o=[],i=1/e;e--;)o.push(new t({h:r,s:a,v:s})),s=(s+i)%1;return o},t.prototype.splitcomplement=function(){var e=this.toHsl(),n=e.h;return[this,new t({h:(n+72)%360,s:e.s,l:e.l}),new t({h:(n+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var n=this.toRgb(),r=new t(e).toRgb(),a=n.a+r.a*(1-n.a);return new t({r:(n.r*n.a+r.r*r.a*(1-n.a))/a,g:(n.g*n.a+r.g*r.a*(1-n.a))/a,b:(n.b*n.a+r.b*r.a*(1-n.a))/a,a})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var n=this.toHsl(),r=n.h,a=[this],s=360/e,o=1;o<e;o++)a.push(new t({h:(r+o*s)%360,s:n.s,l:n.l}));return a},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}();function Do(t,e=20){return t.mix("#141414",e).toString()}function _ce(t){const e=na(),n=Ce("button");return R(()=>{let r={};const a=t.color;if(a){const s=new k3(a),o=t.dark?s.tint(20).toString():Do(s,20);if(t.plain)r=n.cssVarBlock({"bg-color":t.dark?Do(s,90):s.tint(90).toString(),"text-color":a,"border-color":t.dark?Do(s,50):s.tint(50).toString(),"hover-text-color":`var(${n.cssVarName("color-white")})`,"hover-bg-color":a,"hover-border-color":a,"active-bg-color":o,"active-text-color":`var(${n.cssVarName("color-white")})`,"active-border-color":o}),e.value&&(r[n.cssVarBlockName("disabled-bg-color")]=t.dark?Do(s,90):s.tint(90).toString(),r[n.cssVarBlockName("disabled-text-color")]=t.dark?Do(s,50):s.tint(50).toString(),r[n.cssVarBlockName("disabled-border-color")]=t.dark?Do(s,80):s.tint(80).toString());else{const i=t.dark?Do(s,30):s.tint(30).toString(),l=s.isDark()?`var(${n.cssVarName("color-white")})`:`var(${n.cssVarName("color-black")})`;if(r=n.cssVarBlock({"bg-color":a,"text-color":l,"border-color":a,"hover-bg-color":i,"hover-text-color":l,"hover-border-color":i,"active-bg-color":o,"active-border-color":o}),e.value){const c=t.dark?Do(s,50):s.tint(50).toString();r[n.cssVarBlockName("disabled-bg-color")]=c,r[n.cssVarBlockName("disabled-text-color")]=t.dark?"rgba(255, 255, 255, 0.5)":`var(${n.cssVarName("color-white")})`,r[n.cssVarBlockName("disabled-border-color")]=c}}}return r})}const Vce=q({name:"ElButton"}),Dce=q({...Vce,props:Vm,emits:yce,setup(t,{expose:e,emit:n}){const r=t,a=_ce(r),s=Ce("button"),{_ref:o,_size:i,_type:l,_disabled:c,_props:u,shouldAddSpace:f,handleClick:d}=hce(r,n);return e({ref:o,size:i,type:l,disabled:c,shouldAddSpace:f}),(p,h)=>(V(),ae(dt(p.tag),ft({ref_key:"_ref",ref:o},v(u),{class:[v(s).b(),v(s).m(v(l)),v(s).m(v(i)),v(s).is("disabled",v(c)),v(s).is("loading",p.loading),v(s).is("plain",p.plain),v(s).is("round",p.round),v(s).is("circle",p.circle),v(s).is("text",p.text),v(s).is("link",p.link),v(s).is("has-bg",p.bg)],style:v(a),onClick:v(d)}),{default:Z(()=>[p.loading?(V(),z(Ue,{key:0},[p.$slots.loading?ce(p.$slots,"loading",{key:0}):(V(),ae(v(Ge),{key:1,class:U(v(s).is("loading"))},{default:Z(()=>[(V(),ae(dt(p.loadingIcon)))]),_:1},8,["class"]))],64)):p.icon||p.$slots.icon?(V(),ae(v(Ge),{key:1},{default:Z(()=>[p.icon?(V(),ae(dt(p.icon),{key:0})):ce(p.$slots,"icon",{key:1})]),_:3})):ee("v-if",!0),p.$slots.default?(V(),z("span",{key:2,class:U({[v(s).em("text","expand")]:v(f)})},[ce(p.$slots,"default")],2)):ee("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var Lce=Ve(Dce,[["__file","button.vue"]]);const Nce={size:Vm.size,type:Vm.type},Bce=q({name:"ElButtonGroup"}),Fce=q({...Bce,props:Nce,setup(t){const e=t;bt(x3,Dt({size:tn(e,"size"),type:tn(e,"type")}));const n=Ce("button");return(r,a)=>(V(),z("div",{class:U(`${v(n).b("group")}`)},[ce(r.$slots,"default")],2))}});var O3=Ve(Fce,[["__file","button-group.vue"]]);const ir=lt(Lce,{ButtonGroup:O3}),M3=bn(O3);var R3={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Hn,function(){var n=1e3,r=6e4,a=36e5,s="millisecond",o="second",i="minute",l="hour",c="day",u="week",f="month",d="quarter",p="year",h="date",g="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(B){var F=["th","st","nd","rd"],$=B%100;return"["+B+(F[($-20)%10]||F[$]||F[0])+"]"}},C=function(B,F,$){var N=String(B);return!N||N.length>=F?B:""+Array(F+1-N.length).join($)+B},S={s:C,z:function(B){var F=-B.utcOffset(),$=Math.abs(F),N=Math.floor($/60),W=$%60;return(F<=0?"+":"-")+C(N,2,"0")+":"+C(W,2,"0")},m:function B(F,$){if(F.date()<$.date())return-B($,F);var N=12*($.year()-F.year())+($.month()-F.month()),W=F.clone().add(N,f),_=$-W<0,L=F.clone().add(N+(_?-1:1),f);return+(-(N+($-W)/(_?W-L:L-W))||0)},a:function(B){return B<0?Math.ceil(B)||0:Math.floor(B)},p:function(B){return{M:f,y:p,w:u,d:c,D:h,h:l,m:i,s:o,ms:s,Q:d}[B]||String(B||"").toLowerCase().replace(/s$/,"")},u:function(B){return B===void 0}},T="en",w={};w[T]=b;var x="$isDayjsObject",E=function(B){return B instanceof D||!(!B||!B[x])},O=function B(F,$,N){var W;if(!F)return T;if(typeof F=="string"){var _=F.toLowerCase();w[_]&&(W=_),$&&(w[_]=$,W=_);var L=F.split("-");if(!W&&L.length>1)return B(L[0])}else{var G=F.name;w[G]=F,W=G}return!N&&W&&(T=W),W||!N&&T},k=function(B,F){if(E(B))return B.clone();var $=typeof F=="object"?F:{};return $.date=B,$.args=arguments,new D($)},M=S;M.l=O,M.i=E,M.w=function(B,F){return k(B,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var D=function(){function B($){this.$L=O($.locale,null,!0),this.parse($),this.$x=this.$x||$.x||{},this[x]=!0}var F=B.prototype;return F.parse=function($){this.$d=function(N){var W=N.date,_=N.utc;if(W===null)return new Date(NaN);if(M.u(W))return new Date;if(W instanceof Date)return new Date(W);if(typeof W=="string"&&!/Z$/i.test(W)){var L=W.match(y);if(L){var G=L[2]-1||0,K=(L[7]||"0").substring(0,3);return _?new Date(Date.UTC(L[1],G,L[3]||1,L[4]||0,L[5]||0,L[6]||0,K)):new Date(L[1],G,L[3]||1,L[4]||0,L[5]||0,L[6]||0,K)}}return new Date(W)}($),this.init()},F.init=function(){var $=this.$d;this.$y=$.getFullYear(),this.$M=$.getMonth(),this.$D=$.getDate(),this.$W=$.getDay(),this.$H=$.getHours(),this.$m=$.getMinutes(),this.$s=$.getSeconds(),this.$ms=$.getMilliseconds()},F.$utils=function(){return M},F.isValid=function(){return this.$d.toString()!==g},F.isSame=function($,N){var W=k($);return this.startOf(N)<=W&&W<=this.endOf(N)},F.isAfter=function($,N){return k($)<this.startOf(N)},F.isBefore=function($,N){return this.endOf(N)<k($)},F.$g=function($,N,W){return M.u($)?this[N]:this.set(W,$)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function($,N){var W=this,_=!!M.u(N)||N,L=M.p($),G=function(be,ge){var Se=M.w(W.$u?Date.UTC(W.$y,ge,be):new Date(W.$y,ge,be),W);return _?Se:Se.endOf(c)},K=function(be,ge){return M.w(W.toDate()[be].apply(W.toDate("s"),(_?[0,0,0,0]:[23,59,59,999]).slice(ge)),W)},Y=this.$W,te=this.$M,ve=this.$D,se="set"+(this.$u?"UTC":"");switch(L){case p:return _?G(1,0):G(31,11);case f:return _?G(1,te):G(0,te+1);case u:var ie=this.$locale().weekStart||0,re=(Y<ie?Y+7:Y)-ie;return G(_?ve-re:ve+(6-re),te);case c:case h:return K(se+"Hours",0);case l:return K(se+"Minutes",1);case i:return K(se+"Seconds",2);case o:return K(se+"Milliseconds",3);default:return this.clone()}},F.endOf=function($){return this.startOf($,!1)},F.$set=function($,N){var W,_=M.p($),L="set"+(this.$u?"UTC":""),G=(W={},W[c]=L+"Date",W[h]=L+"Date",W[f]=L+"Month",W[p]=L+"FullYear",W[l]=L+"Hours",W[i]=L+"Minutes",W[o]=L+"Seconds",W[s]=L+"Milliseconds",W)[_],K=_===c?this.$D+(N-this.$W):N;if(_===f||_===p){var Y=this.clone().set(h,1);Y.$d[G](K),Y.init(),this.$d=Y.set(h,Math.min(this.$D,Y.daysInMonth())).$d}else G&&this.$d[G](K);return this.init(),this},F.set=function($,N){return this.clone().$set($,N)},F.get=function($){return this[M.p($)]()},F.add=function($,N){var W,_=this;$=Number($);var L=M.p(N),G=function(te){var ve=k(_);return M.w(ve.date(ve.date()+Math.round(te*$)),_)};if(L===f)return this.set(f,this.$M+$);if(L===p)return this.set(p,this.$y+$);if(L===c)return G(1);if(L===u)return G(7);var K=(W={},W[i]=r,W[l]=a,W[o]=n,W)[L]||1,Y=this.$d.getTime()+$*K;return M.w(Y,this)},F.subtract=function($,N){return this.add(-1*$,N)},F.format=function($){var N=this,W=this.$locale();if(!this.isValid())return W.invalidDate||g;var _=$||"YYYY-MM-DDTHH:mm:ssZ",L=M.z(this),G=this.$H,K=this.$m,Y=this.$M,te=W.weekdays,ve=W.months,se=W.meridiem,ie=function(ge,Se,De,X){return ge&&(ge[Se]||ge(N,_))||De[Se].slice(0,X)},re=function(ge){return M.s(G%12||12,ge,"0")},be=se||function(ge,Se,De){var X=ge<12?"AM":"PM";return De?X.toLowerCase():X};return _.replace(m,function(ge,Se){return Se||function(De){switch(De){case"YY":return String(N.$y).slice(-2);case"YYYY":return M.s(N.$y,4,"0");case"M":return Y+1;case"MM":return M.s(Y+1,2,"0");case"MMM":return ie(W.monthsShort,Y,ve,3);case"MMMM":return ie(ve,Y);case"D":return N.$D;case"DD":return M.s(N.$D,2,"0");case"d":return String(N.$W);case"dd":return ie(W.weekdaysMin,N.$W,te,2);case"ddd":return ie(W.weekdaysShort,N.$W,te,3);case"dddd":return te[N.$W];case"H":return String(G);case"HH":return M.s(G,2,"0");case"h":return re(1);case"hh":return re(2);case"a":return be(G,K,!0);case"A":return be(G,K,!1);case"m":return String(K);case"mm":return M.s(K,2,"0");case"s":return String(N.$s);case"ss":return M.s(N.$s,2,"0");case"SSS":return M.s(N.$ms,3,"0");case"Z":return L}return null}(ge)||L.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function($,N,W){var _,L=this,G=M.p(N),K=k($),Y=(K.utcOffset()-this.utcOffset())*r,te=this-K,ve=function(){return M.m(L,K)};switch(G){case p:_=ve()/12;break;case f:_=ve();break;case d:_=ve()/3;break;case u:_=(te-Y)/6048e5;break;case c:_=(te-Y)/864e5;break;case l:_=te/a;break;case i:_=te/r;break;case o:_=te/n;break;default:_=te}return W?_:M.a(_)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return w[this.$L]},F.locale=function($,N){if(!$)return this.$L;var W=this.clone(),_=O($,N,!0);return _&&(W.$L=_),W},F.clone=function(){return M.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},B}(),I=D.prototype;return k.prototype=I,[["$ms",s],["$s",o],["$m",i],["$H",l],["$W",c],["$M",f],["$y",p],["$D",h]].forEach(function(B){I[B[1]]=function(F){return this.$g(F,B[0],B[1])}}),k.extend=function(B,F){return B.$i||(B(F,D,k),B.$i=!0),k},k.locale=O,k.isDayjs=E,k.unix=function(B){return k(1e3*B)},k.en=w[T],k.Ls=w,k.p={},k})})(R3);var $ce=R3.exports;const it=fa($ce);var _3={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Hn,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d\d/,s=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,i={},l=function(g){return(g=+g)+(g>68?1900:2e3)},c=function(g){return function(y){this[g]=+y}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(g){(this.zone||(this.zone={})).offset=function(y){if(!y||y==="Z")return 0;var m=y.match(/([+-]|\d\d)/g),b=60*m[1]+(+m[2]||0);return b===0?0:m[0]==="+"?-b:b}(g)}],f=function(g){var y=i[g];return y&&(y.indexOf?y:y.s.concat(y.f))},d=function(g,y){var m,b=i.meridiem;if(b){for(var C=1;C<=24;C+=1)if(g.indexOf(b(C,0,y))>-1){m=C>12;break}}else m=g===(y?"pm":"PM");return m},p={A:[o,function(g){this.afternoon=d(g,!1)}],a:[o,function(g){this.afternoon=d(g,!0)}],S:[/\d/,function(g){this.milliseconds=100*+g}],SS:[a,function(g){this.milliseconds=10*+g}],SSS:[/\d{3}/,function(g){this.milliseconds=+g}],s:[s,c("seconds")],ss:[s,c("seconds")],m:[s,c("minutes")],mm:[s,c("minutes")],H:[s,c("hours")],h:[s,c("hours")],HH:[s,c("hours")],hh:[s,c("hours")],D:[s,c("day")],DD:[a,c("day")],Do:[o,function(g){var y=i.ordinal,m=g.match(/\d+/);if(this.day=m[0],y)for(var b=1;b<=31;b+=1)y(b).replace(/\[|\]/g,"")===g&&(this.day=b)}],M:[s,c("month")],MM:[a,c("month")],MMM:[o,function(g){var y=f("months"),m=(f("monthsShort")||y.map(function(b){return b.slice(0,3)})).indexOf(g)+1;if(m<1)throw new Error;this.month=m%12||m}],MMMM:[o,function(g){var y=f("months").indexOf(g)+1;if(y<1)throw new Error;this.month=y%12||y}],Y:[/[+-]?\d+/,c("year")],YY:[a,function(g){this.year=l(g)}],YYYY:[/\d{4}/,c("year")],Z:u,ZZ:u};function h(g){var y,m;y=g,m=i&&i.formats;for(var b=(g=y.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(O,k,M){var D=M&&M.toUpperCase();return k||m[M]||n[M]||m[D].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(I,B,F){return B||F.slice(1)})})).match(r),C=b.length,S=0;S<C;S+=1){var T=b[S],w=p[T],x=w&&w[0],E=w&&w[1];b[S]=E?{regex:x,parser:E}:T.replace(/^\[|\]$/g,"")}return function(O){for(var k={},M=0,D=0;M<C;M+=1){var I=b[M];if(typeof I=="string")D+=I.length;else{var B=I.regex,F=I.parser,$=O.slice(D),N=B.exec($)[0];F.call(k,N),O=O.replace(N,"")}}return function(W){var _=W.afternoon;if(_!==void 0){var L=W.hours;_?L<12&&(W.hours+=12):L===12&&(W.hours=0),delete W.afternoon}}(k),k}}return function(g,y,m){m.p.customParseFormat=!0,g&&g.parseTwoDigitYear&&(l=g.parseTwoDigitYear);var b=y.prototype,C=b.parse;b.parse=function(S){var T=S.date,w=S.utc,x=S.args;this.$u=w;var E=x[1];if(typeof E=="string"){var O=x[2]===!0,k=x[3]===!0,M=O||k,D=x[2];k&&(D=x[2]),i=this.$locale(),!O&&D&&(i=m.Ls[D]),this.$d=function($,N,W){try{if(["x","X"].indexOf(N)>-1)return new Date((N==="X"?1e3:1)*$);var _=h(N)($),L=_.year,G=_.month,K=_.day,Y=_.hours,te=_.minutes,ve=_.seconds,se=_.milliseconds,ie=_.zone,re=new Date,be=K||(L||G?1:re.getDate()),ge=L||re.getFullYear(),Se=0;L&&!G||(Se=G>0?G-1:re.getMonth());var De=Y||0,X=te||0,ne=ve||0,me=se||0;return ie?new Date(Date.UTC(ge,Se,be,De,X,ne,me+60*ie.offset*1e3)):W?new Date(Date.UTC(ge,Se,be,De,X,ne,me)):new Date(ge,Se,be,De,X,ne,me)}catch{return new Date("")}}(T,E,w),this.init(),D&&D!==!0&&(this.$L=this.locale(D).$L),M&&T!=this.format(E)&&(this.$d=new Date("")),i={}}else if(E instanceof Array)for(var I=E.length,B=1;B<=I;B+=1){x[1]=E[B-1];var F=m.apply(this,x);if(F.isValid()){this.$d=F.$d,this.$L=F.$L,this.init();break}B===I&&(this.$d=new Date(""))}else C.call(this,S)}}})})(_3);var Uce=_3.exports;const QS=fa(Uce),Xx=["hours","minutes","seconds"],Lm="HH:mm:ss",ic="YYYY-MM-DD",Ace={date:ic,dates:ic,week:"gggg[w]ww",year:"YYYY",month:"YYYY-MM",datetime:`${ic} ${Lm}`,monthrange:"YYYY-MM",daterange:ic,datetimerange:`${ic} ${Lm}`},Q0=(t,e)=>[t>0?t-1:void 0,t,t<e?t+1:void 0],ai=t=>Array.from(Array.from({length:t}).keys()),V3=t=>t.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),D3=t=>t.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),Zx=function(t,e){const n=bl(t),r=bl(e);return n&&r?t.getTime()===e.getTime():!n&&!r?t===e:!1},Jx=function(t,e){const n=Be(t),r=Be(e);return n&&r?t.length!==e.length?!1:t.every((a,s)=>Zx(a,e[s])):!n&&!r?Zx(t,e):!1},Qx=function(t,e,n){const r=Sa(e)||e==="x"?it(t).locale(n):it(t,e).locale(n);return r.isValid()?r:void 0},eE=function(t,e,n){return Sa(e)?t:e==="x"?+t:it(t).locale(n).format(e)},ey=(t,e)=>{var n;const r=[],a=e==null?void 0:e();for(let s=0;s<t;s++)r.push((n=a==null?void 0:a.includes(s))!=null?n:!1);return r},L3=Re({disabledHours:{type:Q(Function)},disabledMinutes:{type:Q(Function)},disabledSeconds:{type:Q(Function)}}),N3=Re({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),eb=Re({id:{type:Q([Array,String])},name:{type:Q([Array,String]),default:""},popperClass:{type:String,default:""},format:String,valueFormat:String,dateFormat:String,timeFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:Q([String,Object]),default:vi},editable:{type:Boolean,default:!0},prefixIcon:{type:Q([String,Object]),default:""},size:lr,readonly:Boolean,disabled:Boolean,placeholder:{type:String,default:""},popperOptions:{type:Q(Object),default:()=>({})},modelValue:{type:Q([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:Q([Date,Array])},defaultTime:{type:Q([Date,Array])},isRange:Boolean,...L3,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:Boolean,label:{type:String,default:void 0},tabindex:{type:Q([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean}),Wce=["id","name","placeholder","value","disabled","readonly"],Ice=["id","name","placeholder","value","disabled","readonly"],Pce=q({name:"Picker"}),Gce=q({...Pce,props:eb,emits:["update:modelValue","change","focus","blur","calendar-change","panel-change","visible-change","keydown"],setup(t,{expose:e,emit:n}){const r=t,a=Nl(),{lang:s}=Mt(),o=Ce("date"),i=Ce("input"),l=Ce("range"),{form:c,formItem:u}=Hr(),f=We("ElPopperOptions",{}),d=P(),p=P(),h=P(!1),g=P(!1),y=P(null);let m=!1,b=!1;const C=R(()=>[o.b("editor"),o.bm("editor",r.type),i.e("wrapper"),o.is("disabled",K.value),o.is("active",h.value),l.b("editor"),de?l.bm("editor",de.value):"",a.class]),S=R(()=>[i.e("icon"),l.e("close-icon"),be.value?"":l.e("close-icon--hidden")]);pe(h,J=>{J?Ye(()=>{J&&(y.value=r.modelValue)}):(ye.value=null,Ye(()=>{T(r.modelValue)}))});const T=(J,$e)=>{($e||!Jx(J,y.value))&&(n("change",J),r.validateEvent&&(u==null||u.validate("change").catch(nt=>void 0)))},w=J=>{if(!Jx(r.modelValue,J)){let $e;Be(J)?$e=J.map(nt=>eE(nt,r.valueFormat,s.value)):J&&($e=eE(J,r.valueFormat,s.value)),n("update:modelValue",J&&$e,s.value)}},x=J=>{n("keydown",J)},E=R(()=>{if(p.value){const J=Ee.value?p.value:p.value.$el;return Array.from(J.querySelectorAll("input"))}return[]}),O=(J,$e,nt)=>{const yt=E.value;yt.length&&(!nt||nt==="min"?(yt[0].setSelectionRange(J,$e),yt[0].focus()):nt==="max"&&(yt[1].setSelectionRange(J,$e),yt[1].focus()))},k=()=>{W(!0,!0),Ye(()=>{b=!1})},M=(J="",$e=!1)=>{$e||(b=!0),h.value=$e;let nt;Be(J)?nt=J.map(yt=>yt.toDate()):nt=J&&J.toDate(),ye.value=null,w(nt)},D=()=>{g.value=!0},I=()=>{n("visible-change",!0)},B=J=>{(J==null?void 0:J.key)===He.esc&&W(!0,!0)},F=()=>{g.value=!1,h.value=!1,b=!1,n("visible-change",!1)},$=()=>{h.value=!0},N=()=>{h.value=!1},W=(J=!0,$e=!1)=>{b=$e;const[nt,yt]=v(E);let On=nt;!J&&Ee.value&&(On=yt),On&&On.focus()},_=J=>{r.readonly||K.value||h.value||b||(h.value=!0,n("focus",J))};let L;const G=J=>{const $e=async()=>{setTimeout(()=>{var nt;L===$e&&(!((nt=d.value)!=null&&nt.isFocusInsideContent()&&!m)&&E.value.filter(yt=>yt.contains(document.activeElement)).length===0&&(_e(),h.value=!1,n("blur",J),r.validateEvent&&(u==null||u.validate("blur").catch(yt=>void 0))),m=!1)},0)};L=$e,$e()},K=R(()=>r.disabled||(c==null?void 0:c.disabled)),Y=R(()=>{let J;if(Se.value?fe.value.getDefaultValue&&(J=fe.value.getDefaultValue()):Be(r.modelValue)?J=r.modelValue.map($e=>Qx($e,r.valueFormat,s.value)):J=Qx(r.modelValue,r.valueFormat,s.value),fe.value.getRangeAvailableTime){const $e=fe.value.getRangeAvailableTime(J);Or($e,J)||(J=$e,w(Be(J)?J.map(nt=>nt.toDate()):J.toDate()))}return Be(J)&&J.some($e=>!$e)&&(J=[]),J}),te=R(()=>{if(!fe.value.panelReady)return"";const J=Fe(Y.value);return Be(ye.value)?[ye.value[0]||J&&J[0]||"",ye.value[1]||J&&J[1]||""]:ye.value!==null?ye.value:!se.value&&Se.value||!h.value&&Se.value?"":J?ie.value?J.join(", "):J:""}),ve=R(()=>r.type.includes("time")),se=R(()=>r.type.startsWith("time")),ie=R(()=>r.type==="dates"),re=R(()=>r.prefixIcon||(ve.value?mL:_ne)),be=P(!1),ge=J=>{r.readonly||K.value||be.value&&(J.stopPropagation(),k(),w(null),T(null,!0),be.value=!1,h.value=!1,fe.value.handleClear&&fe.value.handleClear())},Se=R(()=>{const{modelValue:J}=r;return!J||Be(J)&&!J.filter(Boolean).length}),De=async J=>{var $e;r.readonly||K.value||((($e=J.target)==null?void 0:$e.tagName)!=="INPUT"||E.value.includes(document.activeElement))&&(h.value=!0)},X=()=>{r.readonly||K.value||!Se.value&&r.clearable&&(be.value=!0)},ne=()=>{be.value=!1},me=J=>{var $e;r.readonly||K.value||((($e=J.touches[0].target)==null?void 0:$e.tagName)!=="INPUT"||E.value.includes(document.activeElement))&&(h.value=!0)},Ee=R(()=>r.type.includes("range")),de=qn(),xe=R(()=>{var J,$e;return($e=(J=v(d))==null?void 0:J.popperRef)==null?void 0:$e.contentRef}),ke=R(()=>{var J;return v(Ee)?v(p):(J=v(p))==null?void 0:J.$el});eS(ke,J=>{const $e=v(xe),nt=v(ke);$e&&(J.target===$e||J.composedPath().includes($e))||J.target===nt||J.composedPath().includes(nt)||(h.value=!1)});const ye=P(null),_e=()=>{if(ye.value){const J=Oe(te.value);J&&ze(J)&&(w(Be(J)?J.map($e=>$e.toDate()):J.toDate()),ye.value=null)}ye.value===""&&(w(null),T(null),ye.value=null)},Oe=J=>J?fe.value.parseUserInput(J):null,Fe=J=>J?fe.value.formatToString(J):null,ze=J=>fe.value.isValidValue(J),he=async J=>{if(r.readonly||K.value)return;const{code:$e}=J;if(x(J),$e===He.esc){h.value===!0&&(h.value=!1,J.preventDefault(),J.stopPropagation());return}if($e===He.down&&(fe.value.handleFocusPicker&&(J.preventDefault(),J.stopPropagation()),h.value===!1&&(h.value=!0,await Ye()),fe.value.handleFocusPicker)){fe.value.handleFocusPicker();return}if($e===He.tab){m=!0;return}if($e===He.enter||$e===He.numpadEnter){(ye.value===null||ye.value===""||ze(Oe(te.value)))&&(_e(),h.value=!1),J.stopPropagation();return}if(ye.value){J.stopPropagation();return}fe.value.handleKeydownInput&&fe.value.handleKeydownInput(J)},Ae=J=>{ye.value=J,h.value||(h.value=!0)},qe=J=>{const $e=J.target;ye.value?ye.value=[$e.value,ye.value[1]]:ye.value=[$e.value,null]},st=J=>{const $e=J.target;ye.value?ye.value=[ye.value[0],$e.value]:ye.value=[null,$e.value]},vt=()=>{var J;const $e=ye.value,nt=Oe($e&&$e[0]),yt=v(Y);if(nt&&nt.isValid()){ye.value=[Fe(nt),((J=te.value)==null?void 0:J[1])||null];const On=[nt,yt&&(yt[1]||null)];ze(On)&&(w(On),ye.value=null)}},Ke=()=>{var J;const $e=v(ye),nt=Oe($e&&$e[1]),yt=v(Y);if(nt&&nt.isValid()){ye.value=[((J=v(te))==null?void 0:J[0])||null,Fe(nt)];const On=[yt&&yt[0],nt];ze(On)&&(w(On),ye.value=null)}},fe=P({}),le=J=>{fe.value[J[0]]=J[1],fe.value.panelReady=!0},oe=J=>{n("calendar-change",J)},we=(J,$e,nt)=>{n("panel-change",J,$e,nt)};return bt("EP_PICKER_BASE",{props:r}),e({focus:W,handleFocusInput:_,handleBlurInput:G,handleOpen:$,handleClose:N,onPick:M}),(J,$e)=>(V(),ae(v(Dr),ft({ref_key:"refPopper",ref:d,visible:h.value,effect:"light",pure:"",trigger:"click"},J.$attrs,{role:"dialog",teleported:"",transition:`${v(o).namespace.value}-zoom-in-top`,"popper-class":[`${v(o).namespace.value}-picker__popper`,J.popperClass],"popper-options":v(f),"fallback-placements":["bottom","top","right","left"],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:D,onShow:I,onHide:F}),{default:Z(()=>[v(Ee)?(V(),z("div",{key:1,ref_key:"inputRef",ref:p,class:U(v(C)),style:Pe(J.$attrs.style),onClick:_,onMouseenter:X,onMouseleave:ne,onTouchstart:me,onKeydown:he},[v(re)?(V(),ae(v(Ge),{key:0,class:U([v(i).e("icon"),v(l).e("icon")]),onMousedown:Ze(De,["prevent"]),onTouchstart:me},{default:Z(()=>[(V(),ae(dt(v(re))))]),_:1},8,["class","onMousedown"])):ee("v-if",!0),H("input",{id:J.id&&J.id[0],autocomplete:"off",name:J.name&&J.name[0],placeholder:J.startPlaceholder,value:v(te)&&v(te)[0],disabled:v(K),readonly:!J.editable||J.readonly,class:U(v(l).b("input")),onMousedown:De,onInput:qe,onChange:vt,onFocus:_,onBlur:G},null,42,Wce),ce(J.$slots,"range-separator",{},()=>[H("span",{class:U(v(l).b("separator"))},Te(J.rangeSeparator),3)]),H("input",{id:J.id&&J.id[1],autocomplete:"off",name:J.name&&J.name[1],placeholder:J.endPlaceholder,value:v(te)&&v(te)[1],disabled:v(K),readonly:!J.editable||J.readonly,class:U(v(l).b("input")),onMousedown:De,onFocus:_,onBlur:G,onInput:st,onChange:Ke},null,42,Ice),J.clearIcon?(V(),ae(v(Ge),{key:1,class:U(v(S)),onClick:ge},{default:Z(()=>[(V(),ae(dt(J.clearIcon)))]),_:1},8,["class"])):ee("v-if",!0)],38)):(V(),ae(v(kr),{key:0,id:J.id,ref_key:"inputRef",ref:p,"container-role":"combobox","model-value":v(te),name:J.name,size:v(de),disabled:v(K),placeholder:J.placeholder,class:U([v(o).b("editor"),v(o).bm("editor",J.type),J.$attrs.class]),style:Pe(J.$attrs.style),readonly:!J.editable||J.readonly||v(ie)||J.type==="week",label:J.label,tabindex:J.tabindex,"validate-event":!1,onInput:Ae,onFocus:_,onBlur:G,onKeydown:he,onChange:_e,onMousedown:De,onMouseenter:X,onMouseleave:ne,onTouchstart:me,onClick:$e[0]||($e[0]=Ze(()=>{},["stop"]))},{prefix:Z(()=>[v(re)?(V(),ae(v(Ge),{key:0,class:U(v(i).e("icon")),onMousedown:Ze(De,["prevent"]),onTouchstart:me},{default:Z(()=>[(V(),ae(dt(v(re))))]),_:1},8,["class","onMousedown"])):ee("v-if",!0)]),suffix:Z(()=>[be.value&&J.clearIcon?(V(),ae(v(Ge),{key:0,class:U(`${v(i).e("icon")} clear-icon`),onClick:Ze(ge,["stop"])},{default:Z(()=>[(V(),ae(dt(J.clearIcon)))]),_:1},8,["class","onClick"])):ee("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","label","tabindex","onKeydown"]))]),content:Z(()=>[ce(J.$slots,"default",{visible:h.value,actualVisible:g.value,parsedValue:v(Y),format:J.format,dateFormat:J.dateFormat,timeFormat:J.timeFormat,unlinkPanels:J.unlinkPanels,type:J.type,defaultValue:J.defaultValue,onPick:M,onSelectRange:O,onSetPickerOption:le,onCalendarChange:oe,onPanelChange:we,onKeydown:B,onMousedown:$e[1]||($e[1]=Ze(()=>{},["stop"]))})]),_:3},16,["visible","transition","popper-class","popper-options"]))}});var B3=Ve(Gce,[["__file","picker.vue"]]);const zce=Re({...N3,datetimeRole:String,parsedValue:{type:Q(Object)}}),F3=({getAvailableHours:t,getAvailableMinutes:e,getAvailableSeconds:n})=>{const r=(o,i,l,c)=>{const u={hour:t,minute:e,second:n};let f=o;return["hour","minute","second"].forEach(d=>{if(u[d]){let p;const h=u[d];switch(d){case"minute":{p=h(f.hour(),i,c);break}case"second":{p=h(f.hour(),f.minute(),i,c);break}default:{p=h(i,c);break}}if(p!=null&&p.length&&!p.includes(f[d]())){const g=l?0:p.length-1;f=f[d](p[g])}}}),f},a={};return{timePickerOptions:a,getAvailableTime:r,onSetOption:([o,i])=>{a[o]=i}}},ty=t=>{const e=(r,a)=>r||a,n=r=>r!==!0;return t.map(e).filter(n)},$3=(t,e,n)=>({getHoursList:(o,i)=>ey(24,t&&(()=>t==null?void 0:t(o,i))),getMinutesList:(o,i,l)=>ey(60,e&&(()=>e==null?void 0:e(o,i,l))),getSecondsList:(o,i,l,c)=>ey(60,n&&(()=>n==null?void 0:n(o,i,l,c)))}),U3=(t,e,n)=>{const{getHoursList:r,getMinutesList:a,getSecondsList:s}=$3(t,e,n);return{getAvailableHours:(c,u)=>ty(r(c,u)),getAvailableMinutes:(c,u,f)=>ty(a(c,u,f)),getAvailableSeconds:(c,u,f,d)=>ty(s(c,u,f,d))}},A3=t=>{const e=P(t.parsedValue);return pe(()=>t.visible,n=>{n||(e.value=t.parsedValue)}),e},Ao=new Map;let tE;Ot&&(document.addEventListener("mousedown",t=>tE=t),document.addEventListener("mouseup",t=>{for(const e of Ao.values())for(const{documentHandler:n}of e)n(t,tE)}));function nE(t,e){let n=[];return Array.isArray(e.arg)?n=e.arg:_a(e.arg)&&n.push(e.arg),function(r,a){const s=e.instance.popperRef,o=r.target,i=a==null?void 0:a.target,l=!e||!e.instance,c=!o||!i,u=t.contains(o)||t.contains(i),f=t===o,d=n.length&&n.some(h=>h==null?void 0:h.contains(o))||n.length&&n.includes(i),p=s&&(s.contains(o)||s.contains(i));l||c||u||f||d||p||e.value(r,a)}}const go={beforeMount(t,e){Ao.has(t)||Ao.set(t,[]),Ao.get(t).push({documentHandler:nE(t,e),bindingFn:e.value})},updated(t,e){Ao.has(t)||Ao.set(t,[]);const n=Ao.get(t),r=n.findIndex(s=>s.bindingFn===e.oldValue),a={documentHandler:nE(t,e),bindingFn:e.value};r>=0?n.splice(r,1,a):n.push(a)},unmounted(t){Ao.delete(t)}},Hce=100,Kce=600,Rh={beforeMount(t,e){const n=e.value,{interval:r=Hce,delay:a=Kce}=Je(n)?{}:n;let s,o;const i=()=>Je(n)?n():n.handler(),l=()=>{o&&(clearTimeout(o),o=void 0),s&&(clearInterval(s),s=void 0)};t.addEventListener("mousedown",c=>{c.button===0&&(l(),i(),document.addEventListener("mouseup",()=>l(),{once:!0}),o=setTimeout(()=>{s=setInterval(()=>{i()},r)},a))})}},Nm="_trap-focus-children",Qi=[],rE=t=>{if(Qi.length===0)return;const e=Qi[Qi.length-1][Nm];if(e.length>0&&t.code===He.tab){if(e.length===1){t.preventDefault(),document.activeElement!==e[0]&&e[0].focus();return}const n=t.shiftKey,r=t.target===e[0],a=t.target===e[e.length-1];r&&n&&(t.preventDefault(),e[e.length-1].focus()),a&&!n&&(t.preventDefault(),e[0].focus())}},jce={beforeMount(t){t[Nm]=v2(t),Qi.push(t),Qi.length<=1&&document.addEventListener("keydown",rE)},updated(t){Ye(()=>{t[Nm]=v2(t)})},unmounted(){Qi.shift(),Qi.length===0&&document.removeEventListener("keydown",rE)}};var aE=!1,zi,Bm,Fm,pg,gg,W3,hg,$m,Um,Am,I3,Wm,Im,P3,G3;function Kr(){if(!aE){aE=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),n=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(Wm=/\b(iPhone|iP[ao]d)/.exec(t),Im=/\b(iP[ao]d)/.exec(t),Am=/Android/i.exec(t),P3=/FBAN\/\w+;/i.exec(t),G3=/Mobile/i.exec(t),I3=!!/Win64/.exec(t),e){zi=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,zi&&document&&document.documentMode&&(zi=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(t);W3=r?parseFloat(r[1])+4:zi,Bm=e[2]?parseFloat(e[2]):NaN,Fm=e[3]?parseFloat(e[3]):NaN,pg=e[4]?parseFloat(e[4]):NaN,pg?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),gg=e&&e[1]?parseFloat(e[1]):NaN):gg=NaN}else zi=Bm=Fm=gg=pg=NaN;if(n){if(n[1]){var a=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);hg=a?parseFloat(a[1].replace("_",".")):!0}else hg=!1;$m=!!n[2],Um=!!n[3]}else hg=$m=Um=!1}}var Pm={ie:function(){return Kr()||zi},ieCompatibilityMode:function(){return Kr()||W3>zi},ie64:function(){return Pm.ie()&&I3},firefox:function(){return Kr()||Bm},opera:function(){return Kr()||Fm},webkit:function(){return Kr()||pg},safari:function(){return Pm.webkit()},chrome:function(){return Kr()||gg},windows:function(){return Kr()||$m},osx:function(){return Kr()||hg},linux:function(){return Kr()||Um},iphone:function(){return Kr()||Wm},mobile:function(){return Kr()||Wm||Im||Am||G3},nativeApp:function(){return Kr()||P3},android:function(){return Kr()||Am},ipad:function(){return Kr()||Im}},Yce=Pm,Op=!!(typeof window<"u"&&window.document&&window.document.createElement),qce={canUseDOM:Op,canUseWorkers:typeof Worker<"u",canUseEventListeners:Op&&!!(window.addEventListener||window.attachEvent),canUseViewport:Op&&!!window.screen,isInWorker:!Op},z3=qce,H3;z3.canUseDOM&&(H3=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function Xce(t,e){if(!z3.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var a=document.createElement("div");a.setAttribute(n,"return;"),r=typeof a[n]=="function"}return!r&&H3&&t==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var Zce=Xce,sE=10,oE=40,iE=800;function K3(t){var e=0,n=0,r=0,a=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*sE,a=n*sE,"deltaY"in t&&(a=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||a)&&t.deltaMode&&(t.deltaMode==1?(r*=oE,a*=oE):(r*=iE,a*=iE)),r&&!e&&(e=r<1?-1:1),a&&!n&&(n=a<1?-1:1),{spinX:e,spinY:n,pixelX:r,pixelY:a}}K3.getEventType=function(){return Yce.firefox()?"DOMMouseScroll":Zce("wheel")?"wheel":"mousewheel"};var Jce=K3;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const Qce=function(t,e){if(t&&t.addEventListener){const n=function(r){const a=Jce(r);e&&Reflect.apply(e,this,[r,a])};t.addEventListener("wheel",n,{passive:!0})}},eue={beforeMount(t,e){Qce(t,e.value)}},tue=Re({role:{type:String,required:!0},spinnerDate:{type:Q(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:Q(String),default:""},...L3}),nue=["onClick"],rue=["onMouseenter"],aue=q({__name:"basic-time-spinner",props:tue,emits:["change","select-range","set-option"],setup(t,{emit:e}){const n=t,r=Ce("time"),{getHoursList:a,getMinutesList:s,getSecondsList:o}=$3(n.disabledHours,n.disabledMinutes,n.disabledSeconds);let i=!1;const l=P(),c=P(),u=P(),f=P(),d={hours:c,minutes:u,seconds:f},p=R(()=>n.showSeconds?Xx:Xx.slice(0,2)),h=R(()=>{const{spinnerDate:_}=n,L=_.hour(),G=_.minute(),K=_.second();return{hours:L,minutes:G,seconds:K}}),g=R(()=>{const{hours:_,minutes:L}=v(h);return{hours:a(n.role),minutes:s(_,n.role),seconds:o(_,L,n.role)}}),y=R(()=>{const{hours:_,minutes:L,seconds:G}=v(h);return{hours:Q0(_,23),minutes:Q0(L,59),seconds:Q0(G,59)}}),m=ta(_=>{i=!1,S(_)},200),b=_=>{if(!!!n.amPmMode)return"";const G=n.amPmMode==="A";let K=_<12?" am":" pm";return G&&(K=K.toUpperCase()),K},C=_=>{let L;switch(_){case"hours":L=[0,2];break;case"minutes":L=[3,5];break;case"seconds":L=[6,8];break}const[G,K]=L;e("select-range",G,K),l.value=_},S=_=>{x(_,v(h)[_])},T=()=>{S("hours"),S("minutes"),S("seconds")},w=_=>_.querySelector(`.${r.namespace.value}-scrollbar__wrap`),x=(_,L)=>{if(n.arrowControl)return;const G=v(d[_]);G&&G.$el&&(w(G.$el).scrollTop=Math.max(0,L*E(_)))},E=_=>{const L=v(d[_]),G=L==null?void 0:L.$el.querySelector("li");return G&&Number.parseFloat(qo(G,"height"))||0},O=()=>{M(1)},k=()=>{M(-1)},M=_=>{l.value||C("hours");const L=l.value,G=v(h)[L],K=l.value==="hours"?24:60,Y=D(L,G,_,K);I(L,Y),x(L,Y),Ye(()=>C(L))},D=(_,L,G,K)=>{let Y=(L+G+K)%K;const te=v(g)[_];for(;te[Y]&&Y!==L;)Y=(Y+G+K)%K;return Y},I=(_,L)=>{if(v(g)[_][L])return;const{hours:Y,minutes:te,seconds:ve}=v(h);let se;switch(_){case"hours":se=n.spinnerDate.hour(L).minute(te).second(ve);break;case"minutes":se=n.spinnerDate.hour(Y).minute(L).second(ve);break;case"seconds":se=n.spinnerDate.hour(Y).minute(te).second(L);break}e("change",se)},B=(_,{value:L,disabled:G})=>{G||(I(_,L),C(_),x(_,L))},F=_=>{i=!0,m(_);const L=Math.min(Math.round((w(v(d[_]).$el).scrollTop-($(_)*.5-10)/E(_)+3)/E(_)),_==="hours"?23:59);I(_,L)},$=_=>v(d[_]).$el.offsetHeight,N=()=>{const _=L=>{const G=v(d[L]);G&&G.$el&&(w(G.$el).onscroll=()=>{F(L)})};_("hours"),_("minutes"),_("seconds")};at(()=>{Ye(()=>{!n.arrowControl&&N(),T(),n.role==="start"&&C("hours")})});const W=(_,L)=>{d[L].value=_};return e("set-option",[`${n.role}_scrollDown`,M]),e("set-option",[`${n.role}_emitSelectRange`,C]),pe(()=>n.spinnerDate,()=>{i||T()}),(_,L)=>(V(),z("div",{class:U([v(r).b("spinner"),{"has-seconds":_.showSeconds}])},[_.arrowControl?ee("v-if",!0):(V(!0),z(Ue,{key:0},gt(v(p),G=>(V(),ae(v(To),{key:G,ref_for:!0,ref:K=>W(K,G),class:U(v(r).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":v(r).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:K=>C(G),onMousemove:K=>S(G)},{default:Z(()=>[(V(!0),z(Ue,null,gt(v(g)[G],(K,Y)=>(V(),z("li",{key:Y,class:U([v(r).be("spinner","item"),v(r).is("active",Y===v(h)[G]),v(r).is("disabled",K)]),onClick:te=>B(G,{value:Y,disabled:K})},[G==="hours"?(V(),z(Ue,{key:0},[Ct(Te(("0"+(_.amPmMode?Y%12||12:Y)).slice(-2))+Te(b(Y)),1)],64)):(V(),z(Ue,{key:1},[Ct(Te(("0"+Y).slice(-2)),1)],64))],10,nue))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),_.arrowControl?(V(!0),z(Ue,{key:1},gt(v(p),G=>(V(),z("div",{key:G,class:U([v(r).be("spinner","wrapper"),v(r).is("arrow")]),onMouseenter:K=>C(G)},[rt((V(),ae(v(Ge),{class:U(["arrow-up",v(r).be("spinner","arrow")])},{default:Z(()=>[j(v(CS))]),_:1},8,["class"])),[[v(Rh),k]]),rt((V(),ae(v(Ge),{class:U(["arrow-down",v(r).be("spinner","arrow")])},{default:Z(()=>[j(v(bo))]),_:1},8,["class"])),[[v(Rh),O]]),H("ul",{class:U(v(r).be("spinner","list"))},[(V(!0),z(Ue,null,gt(v(y)[G],(K,Y)=>(V(),z("li",{key:Y,class:U([v(r).be("spinner","item"),v(r).is("active",K===v(h)[G]),v(r).is("disabled",v(g)[G][K])])},[typeof K=="number"?(V(),z(Ue,{key:0},[G==="hours"?(V(),z(Ue,{key:0},[Ct(Te(("0"+(_.amPmMode?K%12||12:K)).slice(-2))+Te(b(K)),1)],64)):(V(),z(Ue,{key:1},[Ct(Te(("0"+K).slice(-2)),1)],64))],64)):ee("v-if",!0)],2))),128))],2)],42,rue))),128)):ee("v-if",!0)],2))}});var Gm=Ve(aue,[["__file","basic-time-spinner.vue"]]);const sue=q({__name:"panel-time-pick",props:zce,emits:["pick","select-range","set-picker-option"],setup(t,{emit:e}){const n=t,r=We("EP_PICKER_BASE"),{arrowControl:a,disabledHours:s,disabledMinutes:o,disabledSeconds:i,defaultValue:l}=r.props,{getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:f}=U3(s,o,i),d=Ce("time"),{t:p,lang:h}=Mt(),g=P([0,2]),y=A3(n),m=R(()=>Kn(n.actualVisible)?`${d.namespace.value}-zoom-in-top`:""),b=R(()=>n.format.includes("ss")),C=R(()=>n.format.includes("A")?"A":n.format.includes("a")?"a":""),S=W=>{const _=it(W).locale(h.value),L=B(_);return _.isSame(L)},T=()=>{e("pick",y.value,!1)},w=(W=!1,_=!1)=>{_||e("pick",n.parsedValue,W)},x=W=>{if(!n.visible)return;const _=B(W).millisecond(0);e("pick",_,!0)},E=(W,_)=>{e("select-range",W,_),g.value=[W,_]},O=W=>{const _=[0,3].concat(b.value?[6]:[]),L=["hours","minutes"].concat(b.value?["seconds"]:[]),K=(_.indexOf(g.value[0])+W+_.length)%_.length;M.start_emitSelectRange(L[K])},k=W=>{const _=W.code,{left:L,right:G,up:K,down:Y}=He;if([L,G].includes(_)){O(_===L?-1:1),W.preventDefault();return}if([K,Y].includes(_)){const te=_===K?-1:1;M.start_scrollDown(te),W.preventDefault();return}},{timePickerOptions:M,onSetOption:D,getAvailableTime:I}=F3({getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:f}),B=W=>I(W,n.datetimeRole||"",!0),F=W=>W?it(W,n.format).locale(h.value):null,$=W=>W?W.format(n.format):null,N=()=>it(l).locale(h.value);return e("set-picker-option",["isValidValue",S]),e("set-picker-option",["formatToString",$]),e("set-picker-option",["parseUserInput",F]),e("set-picker-option",["handleKeydownInput",k]),e("set-picker-option",["getRangeAvailableTime",B]),e("set-picker-option",["getDefaultValue",N]),(W,_)=>(V(),ae(jn,{name:v(m)},{default:Z(()=>[W.actualVisible||W.visible?(V(),z("div",{key:0,class:U(v(d).b("panel"))},[H("div",{class:U([v(d).be("panel","content"),{"has-seconds":v(b)}])},[j(Gm,{ref:"spinner",role:W.datetimeRole||"start","arrow-control":v(a),"show-seconds":v(b),"am-pm-mode":v(C),"spinner-date":W.parsedValue,"disabled-hours":v(s),"disabled-minutes":v(o),"disabled-seconds":v(i),onChange:x,onSetOption:v(D),onSelectRange:E},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),H("div",{class:U(v(d).be("panel","footer"))},[H("button",{type:"button",class:U([v(d).be("panel","btn"),"cancel"]),onClick:T},Te(v(p)("el.datepicker.cancel")),3),H("button",{type:"button",class:U([v(d).be("panel","btn"),"confirm"]),onClick:_[0]||(_[0]=L=>w())},Te(v(p)("el.datepicker.confirm")),3)],2)],2)):ee("v-if",!0)]),_:1},8,["name"]))}});var _h=Ve(sue,[["__file","panel-time-pick.vue"]]);const oue=Re({...N3,parsedValue:{type:Q(Array)}}),iue=["disabled"],lue=q({__name:"panel-time-range",props:oue,emits:["pick","select-range","set-picker-option"],setup(t,{emit:e}){const n=t,r=(Se,De)=>{const X=[];for(let ne=Se;ne<=De;ne++)X.push(ne);return X},{t:a,lang:s}=Mt(),o=Ce("time"),i=Ce("picker"),l=We("EP_PICKER_BASE"),{arrowControl:c,disabledHours:u,disabledMinutes:f,disabledSeconds:d,defaultValue:p}=l.props,h=R(()=>[o.be("range-picker","body"),o.be("panel","content"),o.is("arrow",c),S.value?"has-seconds":""]),g=R(()=>[o.be("range-picker","body"),o.be("panel","content"),o.is("arrow",c),S.value?"has-seconds":""]),y=R(()=>n.parsedValue[0]),m=R(()=>n.parsedValue[1]),b=A3(n),C=()=>{e("pick",b.value,!1)},S=R(()=>n.format.includes("ss")),T=R(()=>n.format.includes("A")?"A":n.format.includes("a")?"a":""),w=(Se=!1)=>{e("pick",[y.value,m.value],Se)},x=Se=>{k(Se.millisecond(0),m.value)},E=Se=>{k(y.value,Se.millisecond(0))},O=Se=>{const De=Se.map(ne=>it(ne).locale(s.value)),X=G(De);return De[0].isSame(X[0])&&De[1].isSame(X[1])},k=(Se,De)=>{e("pick",[Se,De],!0)},M=R(()=>y.value>m.value),D=P([0,2]),I=(Se,De)=>{e("select-range",Se,De,"min"),D.value=[Se,De]},B=R(()=>S.value?11:8),F=(Se,De)=>{e("select-range",Se,De,"max");const X=v(B);D.value=[Se+X,De+X]},$=Se=>{const De=S.value?[0,3,6,11,14,17]:[0,3,8,11],X=["hours","minutes"].concat(S.value?["seconds"]:[]),me=(De.indexOf(D.value[0])+Se+De.length)%De.length,Ee=De.length/2;me<Ee?ve.start_emitSelectRange(X[me]):ve.end_emitSelectRange(X[me-Ee])},N=Se=>{const De=Se.code,{left:X,right:ne,up:me,down:Ee}=He;if([X,ne].includes(De)){$(De===X?-1:1),Se.preventDefault();return}if([me,Ee].includes(De)){const de=De===me?-1:1,xe=D.value[0]<B.value?"start":"end";ve[`${xe}_scrollDown`](de),Se.preventDefault();return}},W=(Se,De)=>{const X=u?u(Se):[],ne=Se==="start",Ee=(De||(ne?m.value:y.value)).hour(),de=ne?r(Ee+1,23):r(0,Ee-1);return H0(X,de)},_=(Se,De,X)=>{const ne=f?f(Se,De):[],me=De==="start",Ee=X||(me?m.value:y.value),de=Ee.hour();if(Se!==de)return ne;const xe=Ee.minute(),ke=me?r(xe+1,59):r(0,xe-1);return H0(ne,ke)},L=(Se,De,X,ne)=>{const me=d?d(Se,De,X):[],Ee=X==="start",de=ne||(Ee?m.value:y.value),xe=de.hour(),ke=de.minute();if(Se!==xe||De!==ke)return me;const ye=de.second(),_e=Ee?r(ye+1,59):r(0,ye-1);return H0(me,_e)},G=([Se,De])=>[se(Se,"start",!0,De),se(De,"end",!1,Se)],{getAvailableHours:K,getAvailableMinutes:Y,getAvailableSeconds:te}=U3(W,_,L),{timePickerOptions:ve,getAvailableTime:se,onSetOption:ie}=F3({getAvailableHours:K,getAvailableMinutes:Y,getAvailableSeconds:te}),re=Se=>Se?Be(Se)?Se.map(De=>it(De,n.format).locale(s.value)):it(Se,n.format).locale(s.value):null,be=Se=>Se?Be(Se)?Se.map(De=>De.format(n.format)):Se.format(n.format):null,ge=()=>{if(Be(p))return p.map(De=>it(De).locale(s.value));const Se=it(p).locale(s.value);return[Se,Se.add(60,"m")]};return e("set-picker-option",["formatToString",be]),e("set-picker-option",["parseUserInput",re]),e("set-picker-option",["isValidValue",O]),e("set-picker-option",["handleKeydownInput",N]),e("set-picker-option",["getDefaultValue",ge]),e("set-picker-option",["getRangeAvailableTime",G]),(Se,De)=>Se.actualVisible?(V(),z("div",{key:0,class:U([v(o).b("range-picker"),v(i).b("panel")])},[H("div",{class:U(v(o).be("range-picker","content"))},[H("div",{class:U(v(o).be("range-picker","cell"))},[H("div",{class:U(v(o).be("range-picker","header"))},Te(v(a)("el.datepicker.startTime")),3),H("div",{class:U(v(h))},[j(Gm,{ref:"minSpinner",role:"start","show-seconds":v(S),"am-pm-mode":v(T),"arrow-control":v(c),"spinner-date":v(y),"disabled-hours":W,"disabled-minutes":_,"disabled-seconds":L,onChange:x,onSetOption:v(ie),onSelectRange:I},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),H("div",{class:U(v(o).be("range-picker","cell"))},[H("div",{class:U(v(o).be("range-picker","header"))},Te(v(a)("el.datepicker.endTime")),3),H("div",{class:U(v(g))},[j(Gm,{ref:"maxSpinner",role:"end","show-seconds":v(S),"am-pm-mode":v(T),"arrow-control":v(c),"spinner-date":v(m),"disabled-hours":W,"disabled-minutes":_,"disabled-seconds":L,onChange:E,onSetOption:v(ie),onSelectRange:F},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),H("div",{class:U(v(o).be("panel","footer"))},[H("button",{type:"button",class:U([v(o).be("panel","btn"),"cancel"]),onClick:De[0]||(De[0]=X=>C())},Te(v(a)("el.datepicker.cancel")),3),H("button",{type:"button",class:U([v(o).be("panel","btn"),"confirm"]),disabled:v(M),onClick:De[1]||(De[1]=X=>w())},Te(v(a)("el.datepicker.confirm")),11,iue)],2)],2)):ee("v-if",!0)}});var cue=Ve(lue,[["__file","panel-time-range.vue"]]);it.extend(QS);var uue=q({name:"ElTimePicker",install:null,props:{...eb,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,e){const n=P(),[r,a]=t.isRange?["timerange",cue]:["time",_h],s=o=>e.emit("update:modelValue",o);return bt("ElPopperOptions",t.popperOptions),e.expose({focus:o=>{var i;(i=n.value)==null||i.handleFocusInput(o)},blur:o=>{var i;(i=n.value)==null||i.handleBlurInput(o)},handleOpen:()=>{var o;(o=n.value)==null||o.handleOpen()},handleClose:()=>{var o;(o=n.value)==null||o.handleClose()}}),()=>{var o;const i=(o=t.format)!=null?o:Lm;return j(B3,ft(t,{ref:n,type:r,format:i,"onUpdate:modelValue":s}),{default:l=>j(a,l,null)})}}});const vg=uue;vg.install=t=>{t.component(vg.name,vg)};const fue=vg,due=(t,e)=>{const n=t.subtract(1,"month").endOf("month").date();return ai(e).map((r,a)=>n-(e-a-1))},pue=t=>{const e=t.daysInMonth();return ai(e).map((n,r)=>r+1)},gue=t=>ai(t.length/7).map(e=>{const n=e*7;return t.slice(n,n+7)}),hue=Re({selectedDay:{type:Q(Object)},range:{type:Q(Array)},date:{type:Q(Object),required:!0},hideHeader:{type:Boolean}}),vue={pick:t=>pt(t)};var j3={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Hn,function(){return function(n,r,a){var s=r.prototype,o=function(f){return f&&(f.indexOf?f:f.s)},i=function(f,d,p,h,g){var y=f.name?f:f.$locale(),m=o(y[d]),b=o(y[p]),C=m||b.map(function(T){return T.slice(0,h)});if(!g)return C;var S=y.weekStart;return C.map(function(T,w){return C[(w+(S||0))%7]})},l=function(){return a.Ls[a.locale()]},c=function(f,d){return f.formats[d]||function(p){return p.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(h,g,y){return g||y.slice(1)})}(f.formats[d.toUpperCase()])},u=function(){var f=this;return{months:function(d){return d?d.format("MMMM"):i(f,"months")},monthsShort:function(d){return d?d.format("MMM"):i(f,"monthsShort","months",3)},firstDayOfWeek:function(){return f.$locale().weekStart||0},weekdays:function(d){return d?d.format("dddd"):i(f,"weekdays")},weekdaysMin:function(d){return d?d.format("dd"):i(f,"weekdaysMin","weekdays",2)},weekdaysShort:function(d){return d?d.format("ddd"):i(f,"weekdaysShort","weekdays",3)},longDateFormat:function(d){return c(f.$locale(),d)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};s.localeData=function(){return u.bind(this)()},a.localeData=function(){var f=l();return{firstDayOfWeek:function(){return f.weekStart||0},weekdays:function(){return a.weekdays()},weekdaysShort:function(){return a.weekdaysShort()},weekdaysMin:function(){return a.weekdaysMin()},months:function(){return a.months()},monthsShort:function(){return a.monthsShort()},longDateFormat:function(d){return c(f,d)},meridiem:f.meridiem,ordinal:f.ordinal}},a.months=function(){return i(l(),"months")},a.monthsShort=function(){return i(l(),"monthsShort","months",3)},a.weekdays=function(f){return i(l(),"weekdays",null,null,f)},a.weekdaysShort=function(f){return i(l(),"weekdaysShort","weekdays",3,f)},a.weekdaysMin=function(f){return i(l(),"weekdaysMin","weekdays",2,f)}}})})(j3);var yue=j3.exports;const Y3=fa(yue),mue=(t,e)=>{it.extend(Y3);const n=it.localeData().firstDayOfWeek(),{t:r,lang:a}=Mt(),s=it().locale(a.value),o=R(()=>!!t.range&&!!t.range.length),i=R(()=>{let d=[];if(o.value){const[p,h]=t.range,g=ai(h.date()-p.date()+1).map(b=>({text:p.date()+b,type:"current"}));let y=g.length%7;y=y===0?0:7-y;const m=ai(y).map((b,C)=>({text:C+1,type:"next"}));d=g.concat(m)}else{const p=t.date.startOf("month").day(),h=due(t.date,(p-n+7)%7).map(b=>({text:b,type:"prev"})),g=pue(t.date).map(b=>({text:b,type:"current"}));d=[...h,...g];const y=7-(d.length%7||7),m=ai(y).map((b,C)=>({text:C+1,type:"next"}));d=d.concat(m)}return gue(d)}),l=R(()=>{const d=n;return d===0?K0.map(p=>r(`el.datepicker.weeks.${p}`)):K0.slice(d).concat(K0.slice(0,d)).map(p=>r(`el.datepicker.weeks.${p}`))}),c=(d,p)=>{switch(p){case"prev":return t.date.startOf("month").subtract(1,"month").date(d);case"next":return t.date.startOf("month").add(1,"month").date(d);case"current":return t.date.date(d)}};return{now:s,isInRange:o,rows:i,weekDays:l,getFormattedDate:c,handlePickDay:({text:d,type:p})=>{const h=c(d,p);e("pick",h)},getSlotData:({text:d,type:p})=>{const h=c(d,p);return{isSelected:h.isSame(t.selectedDay),type:`${p}-month`,day:h.format("YYYY-MM-DD"),date:h.toDate()}}}},Cue={key:0},Sue=["onClick"],bue=q({name:"DateTable"}),wue=q({...bue,props:hue,emits:vue,setup(t,{expose:e,emit:n}){const r=t,{isInRange:a,now:s,rows:o,weekDays:i,getFormattedDate:l,handlePickDay:c,getSlotData:u}=mue(r,n),f=Ce("calendar-table"),d=Ce("calendar-day"),p=({text:h,type:g})=>{const y=[g];if(g==="current"){const m=l(h,g);m.isSame(r.selectedDay,"day")&&y.push(d.is("selected")),m.isSame(s,"day")&&y.push(d.is("today"))}return y};return e({getFormattedDate:l}),(h,g)=>(V(),z("table",{class:U([v(f).b(),v(f).is("range",v(a))]),cellspacing:"0",cellpadding:"0"},[h.hideHeader?ee("v-if",!0):(V(),z("thead",Cue,[(V(!0),z(Ue,null,gt(v(i),y=>(V(),z("th",{key:y},Te(y),1))),128))])),H("tbody",null,[(V(!0),z(Ue,null,gt(v(o),(y,m)=>(V(),z("tr",{key:m,class:U({[v(f).e("row")]:!0,[v(f).em("row","hide-border")]:m===0&&h.hideHeader})},[(V(!0),z(Ue,null,gt(y,(b,C)=>(V(),z("td",{key:C,class:U(p(b)),onClick:S=>v(c)(b)},[H("div",{class:U(v(d).b())},[ce(h.$slots,"date-cell",{data:v(u)(b)},()=>[H("span",null,Te(b.text),1)])],2)],10,Sue))),128))],2))),128))])],2))}});var lE=Ve(wue,[["__file","date-table.vue"]]);const Tue=(t,e)=>{const n=t.endOf("month"),r=e.startOf("month"),s=n.isSame(r,"week")?r.add(1,"week"):r;return[[t,n],[s.startOf("week"),e]]},xue=(t,e)=>{const n=t.endOf("month"),r=t.add(1,"month").startOf("month"),a=n.isSame(r,"week")?r.add(1,"week"):r,s=a.endOf("month"),o=e.startOf("month"),i=s.isSame(o,"week")?o.add(1,"week"):o;return[[t,n],[a.startOf("week"),s],[i.startOf("week"),e]]},Eue=(t,e,n)=>{const r=rr(),{lang:a}=Mt(),s=P(),o=it().locale(a.value),i=R({get(){return t.modelValue?c.value:s.value},set(m){if(!m)return;s.value=m;const b=m.toDate();e(Ir,b),e(ut,b)}}),l=R(()=>{if(!t.range)return[];const m=t.range.map(S=>it(S).locale(a.value)),[b,C]=m;return b.isAfter(C)?[]:b.isSame(C,"month")?h(b,C):b.add(1,"month").month()!==C.month()?[]:h(b,C)}),c=R(()=>t.modelValue?it(t.modelValue).locale(a.value):i.value||(l.value.length?l.value[0][0]:o)),u=R(()=>c.value.subtract(1,"month").date(1)),f=R(()=>c.value.add(1,"month").date(1)),d=R(()=>c.value.subtract(1,"year").date(1)),p=R(()=>c.value.add(1,"year").date(1)),h=(m,b)=>{const C=m.startOf("week"),S=b.endOf("week"),T=C.get("month"),w=S.get("month");return T===w?[[C,S]]:(T+1)%12===w?Tue(C,S):T+2===w||(T+1)%11===w?xue(C,S):[]},g=m=>{i.value=m},y=m=>{const C={"prev-month":u.value,"next-month":f.value,"prev-year":d.value,"next-year":p.value,today:o}[m];C.isSame(c.value,"day")||g(C)};return uo({from:'"dateCell"',replacement:'"date-cell"',scope:"ElCalendar",version:"2.3.0",ref:"https://element-plus.org/en-US/component/calendar.html#slots",type:"Slot"},R(()=>!!r.dateCell)),{calculateValidatedDateRange:h,date:c,realSelectedDay:i,pickDay:g,selectDate:y,validatedRange:l}},kue=t=>Be(t)&&t.length===2&&t.every(e=>bl(e)),Oue=Re({modelValue:{type:Date},range:{type:Q(Array),validator:kue}}),Mue={[ut]:t=>bl(t),[Ir]:t=>bl(t)},Rue="ElCalendar",_ue=q({name:Rue}),Vue=q({..._ue,props:Oue,emits:Mue,setup(t,{expose:e,emit:n}){const r=t,a=Ce("calendar"),{calculateValidatedDateRange:s,date:o,pickDay:i,realSelectedDay:l,selectDate:c,validatedRange:u}=Eue(r,n),{t:f}=Mt(),d=R(()=>{const p=`el.datepicker.month${o.value.format("M")}`;return`${o.value.year()} ${f("el.datepicker.year")} ${f(p)}`});return e({selectedDay:l,pickDay:i,selectDate:c,calculateValidatedDateRange:s}),(p,h)=>(V(),z("div",{class:U(v(a).b())},[H("div",{class:U(v(a).e("header"))},[ce(p.$slots,"header",{date:v(d)},()=>[H("div",{class:U(v(a).e("title"))},Te(v(d)),3),v(u).length===0?(V(),z("div",{key:0,class:U(v(a).e("button-group"))},[j(v(M3),null,{default:Z(()=>[j(v(ir),{size:"small",onClick:h[0]||(h[0]=g=>v(c)("prev-month"))},{default:Z(()=>[Ct(Te(v(f)("el.datepicker.prevMonth")),1)]),_:1}),j(v(ir),{size:"small",onClick:h[1]||(h[1]=g=>v(c)("today"))},{default:Z(()=>[Ct(Te(v(f)("el.datepicker.today")),1)]),_:1}),j(v(ir),{size:"small",onClick:h[2]||(h[2]=g=>v(c)("next-month"))},{default:Z(()=>[Ct(Te(v(f)("el.datepicker.nextMonth")),1)]),_:1})]),_:1})],2)):ee("v-if",!0)])],2),v(u).length===0?(V(),z("div",{key:0,class:U(v(a).e("body"))},[j(lE,{date:v(o),"selected-day":v(l),onPick:v(i)},lo({_:2},[p.$slots["date-cell"]||p.$slots.dateCell?{name:"date-cell",fn:Z(g=>[p.$slots["date-cell"]?ce(p.$slots,"date-cell",Za(ft({key:0},g))):ce(p.$slots,"dateCell",Za(ft({key:1},g)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(V(),z("div",{key:1,class:U(v(a).e("body"))},[(V(!0),z(Ue,null,gt(v(u),(g,y)=>(V(),ae(lE,{key:y,date:g[0],"selected-day":v(l),range:g,"hide-header":y!==0,onPick:v(i)},lo({_:2},[p.$slots["date-cell"]||p.$slots.dateCell?{name:"date-cell",fn:Z(m=>[p.$slots["date-cell"]?ce(p.$slots,"date-cell",Za(ft({key:0},m))):ce(p.$slots,"dateCell",Za(ft({key:1},m)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var Due=Ve(Vue,[["__file","calendar.vue"]]);const Lue=lt(Due),Nue=Re({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:Q([String,Object,Array]),default:""},bodyClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),Bue=q({name:"ElCard"}),Fue=q({...Bue,props:Nue,setup(t){const e=Ce("card");return(n,r)=>(V(),z("div",{class:U([v(e).b(),v(e).is(`${n.shadow}-shadow`)])},[n.$slots.header||n.header?(V(),z("div",{key:0,class:U(v(e).e("header"))},[ce(n.$slots,"header",{},()=>[Ct(Te(n.header),1)])],2)):ee("v-if",!0),H("div",{class:U([v(e).e("body"),n.bodyClass]),style:Pe(n.bodyStyle)},[ce(n.$slots,"default")],6),n.$slots.footer||n.footer?(V(),z("div",{key:1,class:U(v(e).e("footer"))},[ce(n.$slots,"footer",{},()=>[Ct(Te(n.footer),1)])],2)):ee("v-if",!0)],2))}});var $ue=Ve(Fue,[["__file","card.vue"]]);const Uue=lt($ue),Aue=Re({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),Wue={change:(t,e)=>[t,e].every(Xe)},q3=Symbol("carouselContextKey"),cE=300,Iue=(t,e,n)=>{const{children:r,addChild:a,removeChild:s}=KS(ot(),"ElCarouselItem"),o=rr(),i=P(-1),l=P(null),c=P(!1),u=P(),f=P(0),d=P(!0),p=R(()=>t.arrow!=="never"&&!v(y)),h=R(()=>r.value.some(Y=>Y.props.label.toString().length>0)),g=R(()=>t.type==="card"),y=R(()=>t.direction==="vertical"),m=R(()=>t.height!=="auto"?{height:t.height}:{height:`${f.value}px`,overflow:"hidden"}),b=dl(Y=>{E(Y)},cE,{trailing:!0}),C=dl(Y=>{$(Y)},cE),S=Y=>d.value?i.value<=1?Y<=1:Y>1:!0;function T(){l.value&&(clearInterval(l.value),l.value=null)}function w(){t.interval<=0||!t.autoplay||l.value||(l.value=setInterval(()=>x(),t.interval))}const x=()=>{i.value<r.value.length-1?i.value=i.value+1:t.loop&&(i.value=0)};function E(Y){if(tt(Y)){const se=r.value.filter(ie=>ie.props.name===Y);se.length>0&&(Y=r.value.indexOf(se[0]))}if(Y=Number(Y),Number.isNaN(Y)||Y!==Math.floor(Y))return;const te=r.value.length,ve=i.value;Y<0?i.value=t.loop?te-1:0:Y>=te?i.value=t.loop?0:te-1:i.value=Y,ve===i.value&&O(ve),_()}function O(Y){r.value.forEach((te,ve)=>{te.translateItem(ve,i.value,Y)})}function k(Y,te){var ve,se,ie,re;const be=v(r),ge=be.length;if(ge===0||!Y.states.inStage)return!1;const Se=te+1,De=te-1,X=ge-1,ne=be[X].states.active,me=be[0].states.active,Ee=(se=(ve=be[Se])==null?void 0:ve.states)==null?void 0:se.active,de=(re=(ie=be[De])==null?void 0:ie.states)==null?void 0:re.active;return te===X&&me||Ee?"left":te===0&&ne||de?"right":!1}function M(){c.value=!0,t.pauseOnHover&&T()}function D(){c.value=!1,w()}function I(Y){v(y)||r.value.forEach((te,ve)=>{Y===k(te,ve)&&(te.states.hover=!0)})}function B(){v(y)||r.value.forEach(Y=>{Y.states.hover=!1})}function F(Y){i.value=Y}function $(Y){t.trigger==="hover"&&Y!==i.value&&(i.value=Y)}function N(){E(i.value-1)}function W(){E(i.value+1)}function _(){T(),t.pauseOnHover||w()}function L(Y){t.height==="auto"&&(f.value=Y)}function G(){var Y;const te=(Y=o.default)==null?void 0:Y.call(o);if(!te)return null;const ve=ri(te),se="ElCarouselItem",ie=ve.filter(re=>yn(re)&&re.type.name===se);return(ie==null?void 0:ie.length)===2&&t.loop&&!g.value?(d.value=!0,ie):(d.value=!1,null)}pe(()=>i.value,(Y,te)=>{O(te),d.value&&(Y=Y%2,te=te%2),te>-1&&e("change",Y,te)}),pe(()=>t.autoplay,Y=>{Y?w():T()}),pe(()=>t.loop,()=>{E(i.value)}),pe(()=>t.interval,()=>{_()});const K=on();return at(()=>{pe(()=>r.value,()=>{r.value.length>0&&E(t.initialIndex)},{immediate:!0}),K.value=Sn(u.value,()=>{O()}),w()}),ln(()=>{T(),u.value&&K.value&&K.value.stop()}),bt(q3,{root:u,isCardType:g,isVertical:y,items:r,loop:t.loop,addItem:a,removeItem:s,setActiveItem:E,setContainerHeight:L}),{root:u,activeIndex:i,arrowDisplay:p,hasLabel:h,hover:c,isCardType:g,items:r,isVertical:y,containerStyle:m,isItemsTwoLength:d,handleButtonEnter:I,handleButtonLeave:B,handleIndicatorClick:F,handleMouseEnter:M,handleMouseLeave:D,setActiveItem:E,prev:N,next:W,PlaceholderItem:G,isTwoLengthShow:S,throttledArrowClick:b,throttledIndicatorHover:C}},Pue=["aria-label"],Gue=["aria-label"],zue=["onMouseenter","onClick"],Hue=["aria-label"],Kue={key:0},jue="ElCarousel",Yue=q({name:jue}),que=q({...Yue,props:Aue,emits:Wue,setup(t,{expose:e,emit:n}){const r=t,{root:a,activeIndex:s,arrowDisplay:o,hasLabel:i,hover:l,isCardType:c,items:u,isVertical:f,containerStyle:d,handleButtonEnter:p,handleButtonLeave:h,handleIndicatorClick:g,handleMouseEnter:y,handleMouseLeave:m,setActiveItem:b,prev:C,next:S,PlaceholderItem:T,isTwoLengthShow:w,throttledArrowClick:x,throttledIndicatorHover:E}=Iue(r,n),O=Ce("carousel"),{t:k}=Mt(),M=R(()=>{const I=[O.b(),O.m(r.direction)];return v(c)&&I.push(O.m("card")),I}),D=R(()=>{const I=[O.e("indicators"),O.em("indicators",r.direction)];return v(i)&&I.push(O.em("indicators","labels")),r.indicatorPosition==="outside"&&I.push(O.em("indicators","outside")),v(f)&&I.push(O.em("indicators","right")),I});return e({setActiveItem:b,prev:C,next:S}),(I,B)=>(V(),z("div",{ref_key:"root",ref:a,class:U(v(M)),onMouseenter:B[6]||(B[6]=Ze((...F)=>v(y)&&v(y)(...F),["stop"])),onMouseleave:B[7]||(B[7]=Ze((...F)=>v(m)&&v(m)(...F),["stop"]))},[H("div",{class:U(v(O).e("container")),style:Pe(v(d))},[v(o)?(V(),ae(jn,{key:0,name:"carousel-arrow-left",persisted:""},{default:Z(()=>[rt(H("button",{type:"button",class:U([v(O).e("arrow"),v(O).em("arrow","left")]),"aria-label":v(k)("el.carousel.leftArrow"),onMouseenter:B[0]||(B[0]=F=>v(p)("left")),onMouseleave:B[1]||(B[1]=(...F)=>v(h)&&v(h)(...F)),onClick:B[2]||(B[2]=Ze(F=>v(x)(v(s)-1),["stop"]))},[j(v(Ge),null,{default:Z(()=>[j(v(ui))]),_:1})],42,Pue),[[Rt,(I.arrow==="always"||v(l))&&(r.loop||v(s)>0)]])]),_:1})):ee("v-if",!0),v(o)?(V(),ae(jn,{key:1,name:"carousel-arrow-right",persisted:""},{default:Z(()=>[rt(H("button",{type:"button",class:U([v(O).e("arrow"),v(O).em("arrow","right")]),"aria-label":v(k)("el.carousel.rightArrow"),onMouseenter:B[3]||(B[3]=F=>v(p)("right")),onMouseleave:B[4]||(B[4]=(...F)=>v(h)&&v(h)(...F)),onClick:B[5]||(B[5]=Ze(F=>v(x)(v(s)+1),["stop"]))},[j(v(Ge),null,{default:Z(()=>[j(v(Wr))]),_:1})],42,Gue),[[Rt,(I.arrow==="always"||v(l))&&(r.loop||v(s)<v(u).length-1)]])]),_:1})):ee("v-if",!0),j(v(T)),ce(I.$slots,"default")],6),I.indicatorPosition!=="none"?(V(),z("ul",{key:0,class:U(v(D))},[(V(!0),z(Ue,null,gt(v(u),(F,$)=>rt((V(),z("li",{key:$,class:U([v(O).e("indicator"),v(O).em("indicator",I.direction),v(O).is("active",$===v(s))]),onMouseenter:N=>v(E)($),onClick:Ze(N=>v(g)($),["stop"])},[H("button",{class:U(v(O).e("button")),"aria-label":v(k)("el.carousel.indicator",{index:$+1})},[v(i)?(V(),z("span",Kue,Te(F.props.label),1)):ee("v-if",!0)],10,Hue)],42,zue)),[[Rt,v(w)($)]])),128))],2)):ee("v-if",!0)],34))}});var Xue=Ve(que,[["__file","carousel.vue"]]);const Zue=Re({name:{type:String,default:""},label:{type:[String,Number],default:""}}),Jue=(t,e)=>{const n=We(q3),r=ot(),a=.83,s=P(),o=P(!1),i=P(0),l=P(1),c=P(!1),u=P(!1),f=P(!1),d=P(!1),{isCardType:p,isVertical:h}=n;function g(S,T,w){const x=w-1,E=T-1,O=T+1,k=w/2;return T===0&&S===x?-1:T===x&&S===0?w:S<E&&T-S>=k?w+1:S>O&&S-T>=k?-2:S}function y(S,T){var w,x;const E=v(h)?((w=n.root.value)==null?void 0:w.offsetHeight)||0:((x=n.root.value)==null?void 0:x.offsetWidth)||0;return f.value?E*((2-a)*(S-T)+1)/4:S<T?-(1+a)*E/4:(3+a)*E/4}function m(S,T,w){const x=n.root.value;return x?((w?x.offsetHeight:x.offsetWidth)||0)*(S-T):0}const b=(S,T,w)=>{var x;const E=v(p),O=(x=n.items.value.length)!=null?x:Number.NaN,k=S===T;!E&&!Kn(w)&&(d.value=k||S===w),!k&&O>2&&n.loop&&(S=g(S,T,O));const M=v(h);c.value=k,E?(f.value=Math.round(Math.abs(S-T))<=1,i.value=y(S,T),l.value=v(c)?1:a):i.value=m(S,T,M),u.value=!0,k&&s.value&&n.setContainerHeight(s.value.offsetHeight)};function C(){if(n&&v(p)){const S=n.items.value.findIndex(({uid:T})=>T===r.uid);n.setActiveItem(S)}}return at(()=>{n.addItem({props:t,states:Dt({hover:o,translate:i,scale:l,active:c,ready:u,inStage:f,animating:d}),uid:r.uid,translateItem:b})}),hi(()=>{n.removeItem(r.uid)}),{carouselItemRef:s,active:c,animating:d,hover:o,inStage:f,isVertical:h,translate:i,isCardType:p,scale:l,ready:u,handleItemClick:C}},Que=q({name:"ElCarouselItem"}),efe=q({...Que,props:Zue,setup(t){const e=t,n=Ce("carousel"),{carouselItemRef:r,active:a,animating:s,hover:o,inStage:i,isVertical:l,translate:c,isCardType:u,scale:f,ready:d,handleItemClick:p}=Jue(e),h=R(()=>[n.e("item"),n.is("active",a.value),n.is("in-stage",i.value),n.is("hover",o.value),n.is("animating",s.value),{[n.em("item","card")]:u.value,[n.em("item","card-vertical")]:u.value&&l.value}]),g=R(()=>{const m=`${`translate${v(l)?"Y":"X"}`}(${v(c)}px)`,b=`scale(${v(f)})`;return{transform:[m,b].join(" ")}});return(y,m)=>rt((V(),z("div",{ref_key:"carouselItemRef",ref:r,class:U(v(h)),style:Pe(v(g)),onClick:m[0]||(m[0]=(...b)=>v(p)&&v(p)(...b))},[v(u)?rt((V(),z("div",{key:0,class:U(v(n).e("mask"))},null,2)),[[Rt,!v(a)]]):ee("v-if",!0),ce(y.$slots,"default")],6)),[[Rt,v(d)]])}});var X3=Ve(efe,[["__file","carousel-item.vue"]]);const tfe=lt(Xue,{CarouselItem:X3}),nfe=bn(X3),Z3={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:lr,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0}},J3={[ut]:t=>tt(t)||Xe(t)||Wn(t),change:t=>tt(t)||Xe(t)||Wn(t)},Su=Symbol("checkboxGroupContextKey"),rfe=({model:t,isChecked:e})=>{const n=We(Su,void 0),r=R(()=>{var s,o;const i=(s=n==null?void 0:n.max)==null?void 0:s.value,l=(o=n==null?void 0:n.min)==null?void 0:o.value;return!Kn(i)&&t.value.length>=i&&!e.value||!Kn(l)&&t.value.length<=l&&e.value});return{isDisabled:na(R(()=>(n==null?void 0:n.disabled.value)||r.value)),isLimitDisabled:r}},afe=(t,{model:e,isLimitExceeded:n,hasOwnLabel:r,isDisabled:a,isLabeledByFormItem:s})=>{const o=We(Su,void 0),{formItem:i}=Hr(),{emit:l}=ot();function c(h){var g,y;return h===t.trueLabel||h===!0?(g=t.trueLabel)!=null?g:!0:(y=t.falseLabel)!=null?y:!1}function u(h,g){l("change",c(h),g)}function f(h){if(n.value)return;const g=h.target;l("change",c(g.checked),h)}async function d(h){n.value||!r.value&&!a.value&&s.value&&(h.composedPath().some(m=>m.tagName==="LABEL")||(e.value=c([!1,t.falseLabel].includes(e.value)),await Ye(),u(e.value,h)))}const p=R(()=>(o==null?void 0:o.validateEvent)||t.validateEvent);return pe(()=>t.modelValue,()=>{p.value&&(i==null||i.validate("change").catch(h=>void 0))}),{handleChange:f,onClickRoot:d}},sfe=t=>{const e=P(!1),{emit:n}=ot(),r=We(Su,void 0),a=R(()=>Kn(r)===!1),s=P(!1),o=R({get(){var i,l;return a.value?(i=r==null?void 0:r.modelValue)==null?void 0:i.value:(l=t.modelValue)!=null?l:e.value},set(i){var l,c;a.value&&Be(i)?(s.value=((l=r==null?void 0:r.max)==null?void 0:l.value)!==void 0&&i.length>(r==null?void 0:r.max.value)&&i.length>o.value.length,s.value===!1&&((c=r==null?void 0:r.changeEvent)==null||c.call(r,i))):(n(ut,i),e.value=i)}});return{model:o,isGroup:a,isLimitExceeded:s}},ofe=(t,e,{model:n})=>{const r=We(Su,void 0),a=P(!1),s=R(()=>{const c=n.value;return Wn(c)?c:Be(c)?pt(t.label)?c.map(Ht).some(u=>Or(u,t.label)):c.map(Ht).includes(t.label):c!=null?c===t.trueLabel:!!c}),o=qn(R(()=>{var c;return(c=r==null?void 0:r.size)==null?void 0:c.value}),{prop:!0}),i=qn(R(()=>{var c;return(c=r==null?void 0:r.size)==null?void 0:c.value})),l=R(()=>!!e.default||!er(t.label));return{checkboxButtonSize:o,isChecked:s,isFocused:a,checkboxSize:i,hasOwnLabel:l}},ife=(t,{model:e})=>{function n(){Be(e.value)&&!e.value.includes(t.label)?e.value.push(t.label):e.value=t.trueLabel||!0}t.checked&&n()},Q3=(t,e)=>{const{formItem:n}=Hr(),{model:r,isGroup:a,isLimitExceeded:s}=sfe(t),{isFocused:o,isChecked:i,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u}=ofe(t,e,{model:r}),{isDisabled:f}=rfe({model:r,isChecked:i}),{inputId:d,isLabeledByFormItem:p}=Bs(t,{formItemContext:n,disableIdGeneration:u,disableIdManagement:a}),{handleChange:h,onClickRoot:g}=afe(t,{model:r,isLimitExceeded:s,hasOwnLabel:u,isDisabled:f,isLabeledByFormItem:p});return ife(t,{model:r}),{inputId:d,isLabeledByFormItem:p,isChecked:i,isDisabled:f,isFocused:o,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,model:r,handleChange:h,onClickRoot:g}},lfe=["id","indeterminate","name","tabindex","disabled","true-value","false-value"],cfe=["id","indeterminate","disabled","value","name","tabindex"],ufe=q({name:"ElCheckbox"}),ffe=q({...ufe,props:Z3,emits:J3,setup(t){const e=t,n=rr(),{inputId:r,isLabeledByFormItem:a,isChecked:s,isDisabled:o,isFocused:i,checkboxSize:l,hasOwnLabel:c,model:u,handleChange:f,onClickRoot:d}=Q3(e,n),p=Ce("checkbox"),h=R(()=>[p.b(),p.m(l.value),p.is("disabled",o.value),p.is("bordered",e.border),p.is("checked",s.value)]),g=R(()=>[p.e("input"),p.is("disabled",o.value),p.is("checked",s.value),p.is("indeterminate",e.indeterminate),p.is("focus",i.value)]);return(y,m)=>(V(),ae(dt(!v(c)&&v(a)?"span":"label"),{class:U(v(h)),"aria-controls":y.indeterminate?y.controls:null,onClick:v(d)},{default:Z(()=>[H("span",{class:U(v(g))},[y.trueLabel||y.falseLabel?rt((V(),z("input",{key:0,id:v(r),"onUpdate:modelValue":m[0]||(m[0]=b=>cn(u)?u.value=b:null),class:U(v(p).e("original")),type:"checkbox",indeterminate:y.indeterminate,name:y.name,tabindex:y.tabindex,disabled:v(o),"true-value":y.trueLabel,"false-value":y.falseLabel,onChange:m[1]||(m[1]=(...b)=>v(f)&&v(f)(...b)),onFocus:m[2]||(m[2]=b=>i.value=!0),onBlur:m[3]||(m[3]=b=>i.value=!1),onClick:m[4]||(m[4]=Ze(()=>{},["stop"]))},null,42,lfe)),[[Gc,v(u)]]):rt((V(),z("input",{key:1,id:v(r),"onUpdate:modelValue":m[5]||(m[5]=b=>cn(u)?u.value=b:null),class:U(v(p).e("original")),type:"checkbox",indeterminate:y.indeterminate,disabled:v(o),value:y.label,name:y.name,tabindex:y.tabindex,onChange:m[6]||(m[6]=(...b)=>v(f)&&v(f)(...b)),onFocus:m[7]||(m[7]=b=>i.value=!0),onBlur:m[8]||(m[8]=b=>i.value=!1),onClick:m[9]||(m[9]=Ze(()=>{},["stop"]))},null,42,cfe)),[[Gc,v(u)]]),H("span",{class:U(v(p).e("inner"))},null,2)],2),v(c)?(V(),z("span",{key:0,class:U(v(p).e("label"))},[ce(y.$slots,"default"),y.$slots.default?ee("v-if",!0):(V(),z(Ue,{key:0},[Ct(Te(y.label),1)],64))],2)):ee("v-if",!0)]),_:3},8,["class","aria-controls","onClick"]))}});var dfe=Ve(ffe,[["__file","checkbox.vue"]]);const pfe=["name","tabindex","disabled","true-value","false-value"],gfe=["name","tabindex","disabled","value"],hfe=q({name:"ElCheckboxButton"}),vfe=q({...hfe,props:Z3,emits:J3,setup(t){const e=t,n=rr(),{isFocused:r,isChecked:a,isDisabled:s,checkboxButtonSize:o,model:i,handleChange:l}=Q3(e,n),c=We(Su,void 0),u=Ce("checkbox"),f=R(()=>{var p,h,g,y;const m=(h=(p=c==null?void 0:c.fill)==null?void 0:p.value)!=null?h:"";return{backgroundColor:m,borderColor:m,color:(y=(g=c==null?void 0:c.textColor)==null?void 0:g.value)!=null?y:"",boxShadow:m?`-1px 0 0 0 ${m}`:void 0}}),d=R(()=>[u.b("button"),u.bm("button",o.value),u.is("disabled",s.value),u.is("checked",a.value),u.is("focus",r.value)]);return(p,h)=>(V(),z("label",{class:U(v(d))},[p.trueLabel||p.falseLabel?rt((V(),z("input",{key:0,"onUpdate:modelValue":h[0]||(h[0]=g=>cn(i)?i.value=g:null),class:U(v(u).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:v(s),"true-value":p.trueLabel,"false-value":p.falseLabel,onChange:h[1]||(h[1]=(...g)=>v(l)&&v(l)(...g)),onFocus:h[2]||(h[2]=g=>r.value=!0),onBlur:h[3]||(h[3]=g=>r.value=!1),onClick:h[4]||(h[4]=Ze(()=>{},["stop"]))},null,42,pfe)),[[Gc,v(i)]]):rt((V(),z("input",{key:1,"onUpdate:modelValue":h[5]||(h[5]=g=>cn(i)?i.value=g:null),class:U(v(u).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:v(s),value:p.label,onChange:h[6]||(h[6]=(...g)=>v(l)&&v(l)(...g)),onFocus:h[7]||(h[7]=g=>r.value=!0),onBlur:h[8]||(h[8]=g=>r.value=!1),onClick:h[9]||(h[9]=Ze(()=>{},["stop"]))},null,42,gfe)),[[Gc,v(i)]]),p.$slots.default||p.label?(V(),z("span",{key:2,class:U(v(u).be("button","inner")),style:Pe(v(a)?v(f):void 0)},[ce(p.$slots,"default",{},()=>[Ct(Te(p.label),1)])],6)):ee("v-if",!0)],2))}});var eN=Ve(vfe,[["__file","checkbox-button.vue"]]);const yfe=Re({modelValue:{type:Q(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:lr,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0}}),mfe={[ut]:t=>Be(t),change:t=>Be(t)},Cfe=q({name:"ElCheckboxGroup"}),Sfe=q({...Cfe,props:yfe,emits:mfe,setup(t,{emit:e}){const n=t,r=Ce("checkbox"),{formItem:a}=Hr(),{inputId:s,isLabeledByFormItem:o}=Bs(n,{formItemContext:a}),i=async c=>{e(ut,c),await Ye(),e("change",c)},l=R({get(){return n.modelValue},set(c){i(c)}});return bt(Su,{...Js(hr(n),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:l,changeEvent:i}),pe(()=>n.modelValue,()=>{n.validateEvent&&(a==null||a.validate("change").catch(c=>void 0))}),(c,u)=>{var f;return V(),ae(dt(c.tag),{id:v(s),class:U(v(r).b("group")),role:"group","aria-label":v(o)?void 0:c.label||"checkbox-group","aria-labelledby":v(o)?(f=v(a))==null?void 0:f.labelId:void 0},{default:Z(()=>[ce(c.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var tN=Ve(Sfe,[["__file","checkbox-group.vue"]]);const Na=lt(dfe,{CheckboxButton:eN,CheckboxGroup:tN}),bfe=bn(eN),nN=bn(tN),rN=Re({size:lr,disabled:Boolean,label:{type:[String,Number,Boolean],default:""}}),wfe=Re({...rN,modelValue:{type:[String,Number,Boolean],default:""},name:{type:String,default:""},border:Boolean}),aN={[ut]:t=>tt(t)||Xe(t)||Wn(t),[pn]:t=>tt(t)||Xe(t)||Wn(t)},sN=Symbol("radioGroupKey"),oN=(t,e)=>{const n=P(),r=We(sN,void 0),a=R(()=>!!r),s=R({get(){return a.value?r.modelValue:t.modelValue},set(u){a.value?r.changeEvent(u):e&&e(ut,u),n.value.checked=t.modelValue===t.label}}),o=qn(R(()=>r==null?void 0:r.size)),i=na(R(()=>r==null?void 0:r.disabled)),l=P(!1),c=R(()=>i.value||a.value&&s.value!==t.label?-1:0);return{radioRef:n,isGroup:a,radioGroup:r,focus:l,size:o,disabled:i,tabIndex:c,modelValue:s}},Tfe=["value","name","disabled"],xfe=q({name:"ElRadio"}),Efe=q({...xfe,props:wfe,emits:aN,setup(t,{emit:e}){const n=t,r=Ce("radio"),{radioRef:a,radioGroup:s,focus:o,size:i,disabled:l,modelValue:c}=oN(n,e);function u(){Ye(()=>e("change",c.value))}return(f,d)=>{var p;return V(),z("label",{class:U([v(r).b(),v(r).is("disabled",v(l)),v(r).is("focus",v(o)),v(r).is("bordered",f.border),v(r).is("checked",v(c)===f.label),v(r).m(v(i))])},[H("span",{class:U([v(r).e("input"),v(r).is("disabled",v(l)),v(r).is("checked",v(c)===f.label)])},[rt(H("input",{ref_key:"radioRef",ref:a,"onUpdate:modelValue":d[0]||(d[0]=h=>cn(c)?c.value=h:null),class:U(v(r).e("original")),value:f.label,name:f.name||((p=v(s))==null?void 0:p.name),disabled:v(l),type:"radio",onFocus:d[1]||(d[1]=h=>o.value=!0),onBlur:d[2]||(d[2]=h=>o.value=!1),onChange:u,onClick:d[3]||(d[3]=Ze(()=>{},["stop"]))},null,42,Tfe),[[hD,v(c)]]),H("span",{class:U(v(r).e("inner"))},null,2)],2),H("span",{class:U(v(r).e("label")),onKeydown:d[4]||(d[4]=Ze(()=>{},["stop"]))},[ce(f.$slots,"default",{},()=>[Ct(Te(f.label),1)])],34)],2)}}});var kfe=Ve(Efe,[["__file","radio.vue"]]);const Ofe=Re({...rN,name:{type:String,default:""}}),Mfe=["value","name","disabled"],Rfe=q({name:"ElRadioButton"}),_fe=q({...Rfe,props:Ofe,setup(t){const e=t,n=Ce("radio"),{radioRef:r,focus:a,size:s,disabled:o,modelValue:i,radioGroup:l}=oN(e),c=R(()=>({backgroundColor:(l==null?void 0:l.fill)||"",borderColor:(l==null?void 0:l.fill)||"",boxShadow:l!=null&&l.fill?`-1px 0 0 0 ${l.fill}`:"",color:(l==null?void 0:l.textColor)||""}));return(u,f)=>{var d;return V(),z("label",{class:U([v(n).b("button"),v(n).is("active",v(i)===u.label),v(n).is("disabled",v(o)),v(n).is("focus",v(a)),v(n).bm("button",v(s))])},[rt(H("input",{ref_key:"radioRef",ref:r,"onUpdate:modelValue":f[0]||(f[0]=p=>cn(i)?i.value=p:null),class:U(v(n).be("button","original-radio")),value:u.label,type:"radio",name:u.name||((d=v(l))==null?void 0:d.name),disabled:v(o),onFocus:f[1]||(f[1]=p=>a.value=!0),onBlur:f[2]||(f[2]=p=>a.value=!1),onClick:f[3]||(f[3]=Ze(()=>{},["stop"]))},null,42,Mfe),[[hD,v(i)]]),H("span",{class:U(v(n).be("button","inner")),style:Pe(v(i)===u.label?v(c):{}),onKeydown:f[4]||(f[4]=Ze(()=>{},["stop"]))},[ce(u.$slots,"default",{},()=>[Ct(Te(u.label),1)])],38)],2)}}});var iN=Ve(_fe,[["__file","radio-button.vue"]]);const Vfe=Re({id:{type:String,default:void 0},size:lr,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:""},fill:{type:String,default:""},label:{type:String,default:void 0},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0}}),Dfe=aN,Lfe=["id","aria-label","aria-labelledby"],Nfe=q({name:"ElRadioGroup"}),Bfe=q({...Nfe,props:Vfe,emits:Dfe,setup(t,{emit:e}){const n=t,r=Ce("radio"),a=Vr(),s=P(),{formItem:o}=Hr(),{inputId:i,isLabeledByFormItem:l}=Bs(n,{formItemContext:o}),c=f=>{e(ut,f),Ye(()=>e("change",f))};at(()=>{const f=s.value.querySelectorAll("[type=radio]"),d=f[0];!Array.from(f).some(p=>p.checked)&&d&&(d.tabIndex=0)});const u=R(()=>n.name||a.value);return bt(sN,Dt({...hr(n),changeEvent:c,name:u})),pe(()=>n.modelValue,()=>{n.validateEvent&&(o==null||o.validate("change").catch(f=>void 0))}),(f,d)=>(V(),z("div",{id:v(i),ref_key:"radioGroupRef",ref:s,class:U(v(r).b("group")),role:"radiogroup","aria-label":v(l)?void 0:f.label||"radio-group","aria-labelledby":v(l)?v(o).labelId:void 0},[ce(f.$slots,"default")],10,Lfe))}});var lN=Ve(Bfe,[["__file","radio-group.vue"]]);const cN=lt(kfe,{RadioButton:iN,RadioGroup:lN}),Ffe=bn(lN),$fe=bn(iN);var Ufe=q({name:"NodeContent",setup(){return{ns:Ce("cascader-node")}},render(){const{ns:t}=this,{node:e,panel:n}=this.$parent,{data:r,label:a}=e,{renderLabelFn:s}=n;return je("span",{class:t.e("label")},s?s({node:e,data:r}):a)}});const tb=Symbol(),Afe=q({name:"ElCascaderNode",components:{ElCheckbox:Na,ElRadio:cN,NodeContent:Ufe,ElIcon:Ge,Check:Cd,Loading:yi,ArrowRight:Wr},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(t,{emit:e}){const n=We(tb),r=Ce("cascader-node"),a=R(()=>n.isHoverMenu),s=R(()=>n.config.multiple),o=R(()=>n.config.checkStrictly),i=R(()=>{var w;return(w=n.checkedNodes[0])==null?void 0:w.uid}),l=R(()=>t.node.isDisabled),c=R(()=>t.node.isLeaf),u=R(()=>o.value&&!c.value||!l.value),f=R(()=>p(n.expandingNode)),d=R(()=>o.value&&n.checkedNodes.some(p)),p=w=>{var x;const{level:E,uid:O}=t.node;return((x=w==null?void 0:w.pathNodes[E-1])==null?void 0:x.uid)===O},h=()=>{f.value||n.expandNode(t.node)},g=w=>{const{node:x}=t;w!==x.checked&&n.handleCheckChange(x,w)},y=()=>{n.lazyLoad(t.node,()=>{c.value||h()})},m=w=>{a.value&&(b(),!c.value&&e("expand",w))},b=()=>{const{node:w}=t;!u.value||w.loading||(w.loaded?h():y())},C=()=>{a.value&&!c.value||(c.value&&!l.value&&!o.value&&!s.value?T(!0):b())},S=w=>{o.value?(g(w),t.node.loaded&&h()):T(w)},T=w=>{t.node.loaded?(g(w),!o.value&&h()):y()};return{panel:n,isHoverMenu:a,multiple:s,checkStrictly:o,checkedNodeId:i,isDisabled:l,isLeaf:c,expandable:u,inExpandingPath:f,inCheckedPath:d,ns:r,handleHoverExpand:m,handleExpand:b,handleClick:C,handleCheck:T,handleSelectCheck:S}}}),Wfe=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],Ife=H("span",null,null,-1);function Pfe(t,e,n,r,a,s){const o=et("el-checkbox"),i=et("el-radio"),l=et("check"),c=et("el-icon"),u=et("node-content"),f=et("loading"),d=et("arrow-right");return V(),z("li",{id:`${t.menuId}-${t.node.uid}`,role:"menuitem","aria-haspopup":!t.isLeaf,"aria-owns":t.isLeaf?null:t.menuId,"aria-expanded":t.inExpandingPath,tabindex:t.expandable?-1:void 0,class:U([t.ns.b(),t.ns.is("selectable",t.checkStrictly),t.ns.is("active",t.node.checked),t.ns.is("disabled",!t.expandable),t.inExpandingPath&&"in-active-path",t.inCheckedPath&&"in-checked-path"]),onMouseenter:e[2]||(e[2]=(...p)=>t.handleHoverExpand&&t.handleHoverExpand(...p)),onFocus:e[3]||(e[3]=(...p)=>t.handleHoverExpand&&t.handleHoverExpand(...p)),onClick:e[4]||(e[4]=(...p)=>t.handleClick&&t.handleClick(...p))},[ee(" prefix "),t.multiple?(V(),ae(o,{key:0,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:t.isDisabled,onClick:e[0]||(e[0]=Ze(()=>{},["stop"])),"onUpdate:modelValue":t.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):t.checkStrictly?(V(),ae(i,{key:1,"model-value":t.checkedNodeId,label:t.node.uid,disabled:t.isDisabled,"onUpdate:modelValue":t.handleSelectCheck,onClick:e[1]||(e[1]=Ze(()=>{},["stop"]))},{default:Z(()=>[ee(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),Ife]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):t.isLeaf&&t.node.checked?(V(),ae(c,{key:2,class:U(t.ns.e("prefix"))},{default:Z(()=>[j(l)]),_:1},8,["class"])):ee("v-if",!0),ee(" content "),j(u),ee(" postfix "),t.isLeaf?ee("v-if",!0):(V(),z(Ue,{key:3},[t.node.loading?(V(),ae(c,{key:0,class:U([t.ns.is("loading"),t.ns.e("postfix")])},{default:Z(()=>[j(f)]),_:1},8,["class"])):(V(),ae(c,{key:1,class:U(["arrow-right",t.ns.e("postfix")])},{default:Z(()=>[j(d)]),_:1},8,["class"]))],64))],42,Wfe)}var Gfe=Ve(Afe,[["render",Pfe],["__file","node.vue"]]);const zfe=q({name:"ElCascaderMenu",components:{Loading:yi,ElIcon:Ge,ElScrollbar:To,ElCascaderNode:Gfe},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(t){const e=ot(),n=Ce("cascader-menu"),{t:r}=Mt(),a=Vr();let s=null,o=null;const i=We(tb),l=P(null),c=R(()=>!t.nodes.length),u=R(()=>!i.initialLoaded),f=R(()=>`${a.value}-${t.index}`),d=y=>{s=y.target},p=y=>{if(!(!i.isHoverMenu||!s||!l.value))if(s.contains(y.target)){h();const m=e.vnode.el,{left:b}=m.getBoundingClientRect(),{offsetWidth:C,offsetHeight:S}=m,T=y.clientX-b,w=s.offsetTop,x=w+s.offsetHeight;l.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${T} ${w} L${C} 0 V${w} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${T} ${x} L${C} ${S} V${x} Z" />
        `}else o||(o=window.setTimeout(g,i.config.hoverThreshold))},h=()=>{o&&(clearTimeout(o),o=null)},g=()=>{l.value&&(l.value.innerHTML="",h())};return{ns:n,panel:i,hoverZone:l,isEmpty:c,isLoading:u,menuId:f,t:r,handleExpand:d,handleMouseMove:p,clearHoverZone:g}}});function Hfe(t,e,n,r,a,s){const o=et("el-cascader-node"),i=et("loading"),l=et("el-icon"),c=et("el-scrollbar");return V(),ae(c,{key:t.menuId,tag:"ul",role:"menu",class:U(t.ns.b()),"wrap-class":t.ns.e("wrap"),"view-class":[t.ns.e("list"),t.ns.is("empty",t.isEmpty)],onMousemove:t.handleMouseMove,onMouseleave:t.clearHoverZone},{default:Z(()=>{var u;return[(V(!0),z(Ue,null,gt(t.nodes,f=>(V(),ae(o,{key:f.uid,node:f,"menu-id":t.menuId,onExpand:t.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),t.isLoading?(V(),z("div",{key:0,class:U(t.ns.e("empty-text"))},[j(l,{size:"14",class:U(t.ns.is("loading"))},{default:Z(()=>[j(i)]),_:1},8,["class"]),Ct(" "+Te(t.t("el.cascader.loading")),1)],2)):t.isEmpty?(V(),z("div",{key:1,class:U(t.ns.e("empty-text"))},Te(t.t("el.cascader.noData")),3)):(u=t.panel)!=null&&u.isHoverMenu?(V(),z("svg",{key:2,ref:"hoverZone",class:U(t.ns.e("hover-zone"))},null,2)):ee("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var Kfe=Ve(zfe,[["render",Hfe],["__file","menu.vue"]]);let jfe=0;const Yfe=t=>{const e=[t];let{parent:n}=t;for(;n;)e.unshift(n),n=n.parent;return e};let zm=class Hm{constructor(e,n,r,a=!1){this.data=e,this.config=n,this.parent=r,this.root=a,this.uid=jfe++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:s,label:o,children:i}=n,l=e[i],c=Yfe(this);this.level=a?0:r?r.level+1:1,this.value=e[s],this.label=e[o],this.pathNodes=c,this.pathValues=c.map(u=>u.value),this.pathLabels=c.map(u=>u.label),this.childrenData=l,this.children=(l||[]).map(u=>new Hm(u,n,this)),this.loaded=!n.lazy||this.isLeaf||!Sa(l)}get isDisabled(){const{data:e,parent:n,config:r}=this,{disabled:a,checkStrictly:s}=r;return(Je(a)?a(e,this):!!e[a])||!s&&(n==null?void 0:n.isDisabled)}get isLeaf(){const{data:e,config:n,childrenData:r,loaded:a}=this,{lazy:s,leaf:o}=n,i=Je(o)?o(e,this):e[o];return Kn(i)?s&&!a?!1:!(Array.isArray(r)&&r.length):!!i}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:n,children:r}=this,a=new Hm(e,this.config,this);return Array.isArray(n)?n.push(e):this.childrenData=[e],r.push(a),a}calcText(e,n){const r=e?this.pathLabels.join(n):this.label;return this.text=r,r}broadcast(e,...n){const r=`onParent${Ss(e)}`;this.children.forEach(a=>{a&&(a.broadcast(e,...n),a[r]&&a[r](...n))})}emit(e,...n){const{parent:r}=this,a=`onChild${Ss(e)}`;r&&(r[a]&&r[a](...n),r.emit(e,...n))}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,n=e.filter(a=>!a.isDisabled),r=n.length?n.every(a=>a.checked):!1;this.setCheckState(r)}setCheckState(e){const n=this.children.length,r=this.children.reduce((a,s)=>{const o=s.checked?1:s.indeterminate?.5:0;return a+o},0);this.checked=this.loaded&&this.children.filter(a=>!a.isDisabled).every(a=>a.loaded&&a.checked)&&e,this.indeterminate=this.loaded&&r!==n&&r>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:n,multiple:r}=this.config;n||!r?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check"))}};const Km=(t,e)=>t.reduce((n,r)=>(r.isLeaf?n.push(r):(!e&&n.push(r),n=n.concat(Km(r.children,e))),n),[]);class uE{constructor(e,n){this.config=n;const r=(e||[]).map(a=>new zm(a,this.config));this.nodes=r,this.allNodes=Km(r,!1),this.leafNodes=Km(r,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,n){const r=n?n.appendChild(e):new zm(e,this.config);n||this.nodes.push(r),this.allNodes.push(r),r.isLeaf&&this.leafNodes.push(r)}appendNodes(e,n){e.forEach(r=>this.appendNode(r,n))}getNodeByValue(e,n=!1){return!e&&e!==0?null:this.getFlattedNodes(n).find(a=>Or(a.value,e)||Or(a.pathValues,e))||null}getSameNode(e){return e&&this.getFlattedNodes(!1).find(({value:r,level:a})=>Or(e.value,r)&&e.level===a)||null}}const uN=Re({modelValue:{type:Q([Number,String,Array])},options:{type:Q(Array),default:()=>[]},props:{type:Q(Object),default:()=>({})}}),qfe={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:zt,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Xfe=t=>R(()=>({...qfe,...t.props})),fE=t=>{if(!t)return 0;const e=t.id.split("-");return Number(e[e.length-2])},Zfe=t=>{if(!t)return;const e=t.querySelector("input");e?e.click():SD(t)&&t.click()},Jfe=(t,e)=>{const n=e.slice(0),r=n.map(s=>s.uid),a=t.reduce((s,o)=>{const i=r.indexOf(o.uid);return i>-1&&(s.push(o),n.splice(i,1),r.splice(i,1)),s},[]);return a.push(...n),a},Qfe=q({name:"ElCascaderPanel",components:{ElCascaderMenu:Kfe},props:{...uN,border:{type:Boolean,default:!0},renderLabel:Function},emits:[ut,pn,"close","expand-change"],setup(t,{emit:e,slots:n}){let r=!1;const a=Ce("cascader"),s=Xfe(t);let o=null;const i=P(!0),l=P([]),c=P(null),u=P([]),f=P(null),d=P([]),p=R(()=>s.value.expandTrigger==="hover"),h=R(()=>t.renderLabel||n.default),g=()=>{const{options:D}=t,I=s.value;r=!1,o=new uE(D,I),u.value=[o.getNodes()],I.lazy&&Sa(t.options)?(i.value=!1,y(void 0,B=>{B&&(o=new uE(B,I),u.value=[o.getNodes()]),i.value=!0,E(!1,!0)})):E(!1,!0)},y=(D,I)=>{const B=s.value;D=D||new zm({},B,void 0,!0),D.loading=!0;const F=$=>{const N=D,W=N.root?null:N;$&&(o==null||o.appendNodes($,W)),N.loading=!1,N.loaded=!0,N.childrenData=N.childrenData||[],I&&I($)};B.lazyLoad(D,F)},m=(D,I)=>{var B;const{level:F}=D,$=u.value.slice(0,F);let N;D.isLeaf?N=D.pathNodes[F-2]:(N=D,$.push(D.children)),((B=f.value)==null?void 0:B.uid)!==(N==null?void 0:N.uid)&&(f.value=D,u.value=$,!I&&e("expand-change",(D==null?void 0:D.pathValues)||[]))},b=(D,I,B=!0)=>{const{checkStrictly:F,multiple:$}=s.value,N=d.value[0];r=!0,!$&&(N==null||N.doCheck(!1)),D.doCheck(I),x(),B&&!$&&!F&&e("close"),!B&&!$&&!F&&C(D)},C=D=>{D&&(D=D.parent,C(D),D&&m(D))},S=D=>o==null?void 0:o.getFlattedNodes(D),T=D=>{var I;return(I=S(D))==null?void 0:I.filter(B=>B.checked!==!1)},w=()=>{d.value.forEach(D=>D.doCheck(!1)),x(),u.value=u.value.slice(0,1),f.value=null,e("expand-change",[])},x=()=>{var D;const{checkStrictly:I,multiple:B}=s.value,F=d.value,$=T(!I),N=Jfe(F,$),W=N.map(_=>_.valueByOption);d.value=N,c.value=B?W:(D=W[0])!=null?D:null},E=(D=!1,I=!1)=>{const{modelValue:B}=t,{lazy:F,multiple:$,checkStrictly:N}=s.value,W=!N;if(!(!i.value||r||!I&&Or(B,c.value)))if(F&&!D){const L=fx(ene(ro(B))).map(G=>o==null?void 0:o.getNodeByValue(G)).filter(G=>!!G&&!G.loaded&&!G.loading);L.length?L.forEach(G=>{y(G,()=>E(!1,I))}):E(!0,I)}else{const _=$?ro(B):[B],L=fx(_.map(G=>o==null?void 0:o.getNodeByValue(G,W)));O(L,I),c.value=wh(B)}},O=(D,I=!0)=>{const{checkStrictly:B}=s.value,F=d.value,$=D.filter(_=>!!_&&(B||_.isLeaf)),N=o==null?void 0:o.getSameNode(f.value),W=I&&N||$[0];W?W.pathNodes.forEach(_=>m(_,!0)):f.value=null,F.forEach(_=>_.doCheck(!1)),t.props.multiple?Dt($).forEach(_=>_.doCheck(!0)):$.forEach(_=>_.doCheck(!0)),d.value=$,Ye(k)},k=()=>{Ot&&l.value.forEach(D=>{const I=D==null?void 0:D.$el;if(I){const B=I.querySelector(`.${a.namespace.value}-scrollbar__wrap`),F=I.querySelector(`.${a.b("node")}.${a.is("active")}`)||I.querySelector(`.${a.b("node")}.in-active-path`);vL(B,F)}})},M=D=>{const I=D.target,{code:B}=D;switch(B){case He.up:case He.down:{D.preventDefault();const F=B===He.up?-1:1;cg(bD(I,F,`.${a.b("node")}[tabindex="-1"]`));break}case He.left:{D.preventDefault();const F=l.value[fE(I)-1],$=F==null?void 0:F.$el.querySelector(`.${a.b("node")}[aria-expanded="true"]`);cg($);break}case He.right:{D.preventDefault();const F=l.value[fE(I)+1],$=F==null?void 0:F.$el.querySelector(`.${a.b("node")}[tabindex="-1"]`);cg($);break}case He.enter:Zfe(I);break}};return bt(tb,Dt({config:s,expandingNode:f,checkedNodes:d,isHoverMenu:p,initialLoaded:i,renderLabelFn:h,lazyLoad:y,expandNode:m,handleCheckChange:b})),pe([s,()=>t.options],g,{deep:!0,immediate:!0}),pe(()=>t.modelValue,()=>{r=!1,E()},{deep:!0}),pe(()=>c.value,D=>{Or(D,t.modelValue)||(e(ut,D),e(pn,D))}),GV(()=>l.value=[]),at(()=>!Sa(t.modelValue)&&E()),{ns:a,menuList:l,menus:u,checkedNodes:d,handleKeyDown:M,handleCheckChange:b,getFlattedNodes:S,getCheckedNodes:T,clearCheckedNodes:w,calculateCheckedValue:x,scrollToExpandingNode:k}}});function ede(t,e,n,r,a,s){const o=et("el-cascader-menu");return V(),z("div",{class:U([t.ns.b("panel"),t.ns.is("bordered",t.border)]),onKeydown:e[0]||(e[0]=(...i)=>t.handleKeyDown&&t.handleKeyDown(...i))},[(V(!0),z(Ue,null,gt(t.menus,(i,l)=>(V(),ae(o,{key:l,ref_for:!0,ref:c=>t.menuList[l]=c,index:l,nodes:[...i]},null,8,["index","nodes"]))),128))],34)}var yg=Ve(Qfe,[["render",ede],["__file","index.vue"]]);yg.install=t=>{t.component(yg.name,yg)};const fN=yg,tde=fN,Hv=Re({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:Ns},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),nde={close:t=>t instanceof MouseEvent,click:t=>t instanceof MouseEvent},rde=q({name:"ElTag"}),ade=q({...rde,props:Hv,emits:nde,setup(t,{emit:e}){const n=t,r=qn(),a=Ce("tag"),s=R(()=>{const{type:l,hit:c,effect:u,closable:f,round:d}=n;return[a.b(),a.is("closable",f),a.m(l||"primary"),a.m(r.value),a.m(u),a.is("hit",c),a.is("round",d)]}),o=l=>{e("close",l)},i=l=>{e("click",l)};return(l,c)=>l.disableTransitions?(V(),z("span",{key:0,class:U(v(s)),style:Pe({backgroundColor:l.color}),onClick:i},[H("span",{class:U(v(a).e("content"))},[ce(l.$slots,"default")],2),l.closable?(V(),ae(v(Ge),{key:0,class:U(v(a).e("close")),onClick:Ze(o,["stop"])},{default:Z(()=>[j(v(as))]),_:1},8,["class","onClick"])):ee("v-if",!0)],6)):(V(),ae(jn,{key:1,name:`${v(a).namespace.value}-zoom-in-center`,appear:""},{default:Z(()=>[H("span",{class:U(v(s)),style:Pe({backgroundColor:l.color}),onClick:i},[H("span",{class:U(v(a).e("content"))},[ce(l.$slots,"default")],2),l.closable?(V(),ae(v(Ge),{key:0,class:U(v(a).e("close")),onClick:Ze(o,["stop"])},{default:Z(()=>[j(v(as))]),_:1},8,["class","onClick"])):ee("v-if",!0)],6)]),_:3},8,["name"]))}});var sde=Ve(ade,[["__file","tag.vue"]]);const If=lt(sde),ode=Re({...uN,size:lr,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Q(Function),default:(t,e)=>t.text.includes(e)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:Q(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:dr.teleported,tagType:{...Hv.type,default:"info"},validateEvent:{type:Boolean,default:!0}}),ide={[ut]:t=>!!t||t===null,[pn]:t=>!!t||t===null,focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,visibleChange:t=>Wn(t),expandChange:t=>!!t,removeTag:t=>!!t},lde={key:0},cde=["placeholder","onKeydown"],ude=["onClick"],fde="ElCascader",dde=q({name:fde}),pde=q({...dde,props:ode,emits:ide,setup(t,{expose:e,emit:n}){const r=t,a={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:le})=>{const{modifiersData:oe,placement:we}=le;["right","left","bottom","top"].includes(we)||(oe.arrow.x=35)},requires:["arrow"]}]},s=Nl();let o=0,i=0;const l=Ce("cascader"),c=Ce("input"),{t:u}=Mt(),{form:f,formItem:d}=Hr(),p=P(null),h=P(null),g=P(null),y=P(null),m=P(null),b=P(!1),C=P(!1),S=P(!1),T=P(!1),w=P(""),x=P(""),E=P([]),O=P([]),k=P([]),M=P(!1),D=R(()=>s.style),I=R(()=>r.disabled||(f==null?void 0:f.disabled)),B=R(()=>r.placeholder||u("el.cascader.placeholder")),F=R(()=>x.value||E.value.length>0||M.value?"":B.value),$=qn(),N=R(()=>["small"].includes($.value)?"small":"default"),W=R(()=>!!r.props.multiple),_=R(()=>!r.filterable||W.value),L=R(()=>W.value?x.value:w.value),G=R(()=>{var le;return((le=y.value)==null?void 0:le.checkedNodes)||[]}),K=R(()=>!r.clearable||I.value||S.value||!C.value?!1:!!G.value.length),Y=R(()=>{const{showAllLevels:le,separator:oe}=r,we=G.value;return we.length?W.value?"":we[0].calcText(le,oe):""}),te=R({get(){return wh(r.modelValue)},set(le){n(ut,le),n(pn,le),r.validateEvent&&(d==null||d.validate("change").catch(oe=>void 0))}}),ve=R(()=>[l.b(),l.m($.value),l.is("disabled",I.value),s.class]),se=R(()=>[c.e("icon"),"icon-arrow-down",l.is("reverse",b.value)]),ie=R(()=>l.is("focus",b.value||T.value)),re=R(()=>{var le,oe;return(oe=(le=p.value)==null?void 0:le.popperRef)==null?void 0:oe.contentRef}),be=le=>{var oe,we,J;I.value||(le=le??!b.value,le!==b.value&&(b.value=le,(we=(oe=h.value)==null?void 0:oe.input)==null||we.setAttribute("aria-expanded",`${le}`),le?(ge(),Ye((J=y.value)==null?void 0:J.scrollToExpandingNode)):r.filterable&&Fe(),n("visibleChange",le)))},ge=()=>{Ye(()=>{var le;(le=p.value)==null||le.updatePopper()})},Se=()=>{S.value=!1},De=le=>{const{showAllLevels:oe,separator:we}=r;return{node:le,key:le.uid,text:le.calcText(oe,we),hitState:!1,closable:!I.value&&!le.isDisabled,isCollapseTag:!1}},X=le=>{var oe;const we=le.node;we.doCheck(!1),(oe=y.value)==null||oe.calculateCheckedValue(),n("removeTag",we.valueByOption)},ne=()=>{if(!W.value)return;const le=G.value,oe=[],we=[];if(le.forEach(J=>we.push(De(J))),O.value=we,le.length){le.slice(0,r.maxCollapseTags).forEach(nt=>oe.push(De(nt)));const J=le.slice(r.maxCollapseTags),$e=J.length;$e&&(r.collapseTags?oe.push({key:-1,text:`+ ${$e}`,closable:!1,isCollapseTag:!0}):J.forEach(nt=>oe.push(De(nt))))}E.value=oe},me=()=>{var le,oe;const{filterMethod:we,showAllLevels:J,separator:$e}=r,nt=(oe=(le=y.value)==null?void 0:le.getFlattedNodes(!r.props.checkStrictly))==null?void 0:oe.filter(yt=>yt.isDisabled?!1:(yt.calcText(J,$e),we(yt,L.value)));W.value&&(E.value.forEach(yt=>{yt.hitState=!1}),O.value.forEach(yt=>{yt.hitState=!1})),S.value=!0,k.value=nt,ge()},Ee=()=>{var le;let oe;S.value&&m.value?oe=m.value.$el.querySelector(`.${l.e("suggestion-item")}`):oe=(le=y.value)==null?void 0:le.$el.querySelector(`.${l.b("node")}[tabindex="-1"]`),oe&&(oe.focus(),!S.value&&oe.click())},de=()=>{var le,oe;const we=(le=h.value)==null?void 0:le.input,J=g.value,$e=(oe=m.value)==null?void 0:oe.$el;if(!(!Ot||!we)){if($e){const nt=$e.querySelector(`.${l.e("suggestion-list")}`);nt.style.minWidth=`${we.offsetWidth}px`}if(J){const{offsetHeight:nt}=J,yt=E.value.length>0?`${Math.max(nt+6,o)}px`:`${o}px`;we.style.height=yt,ge()}}},xe=le=>{var oe;return(oe=y.value)==null?void 0:oe.getCheckedNodes(le)},ke=le=>{ge(),n("expandChange",le)},ye=le=>{var oe;const we=(oe=le.target)==null?void 0:oe.value;if(le.type==="compositionend")M.value=!1,Ye(()=>Ke(we));else{const J=we[we.length-1]||"";M.value=!kS(J)}},_e=le=>{if(!M.value)switch(le.code){case He.enter:be();break;case He.down:be(!0),Ye(Ee),le.preventDefault();break;case He.esc:b.value===!0&&(le.preventDefault(),le.stopPropagation(),be(!1));break;case He.tab:be(!1);break}},Oe=()=>{var le;(le=y.value)==null||le.clearCheckedNodes(),!b.value&&r.filterable&&Fe(),be(!1)},Fe=()=>{const{value:le}=Y;w.value=le,x.value=le},ze=le=>{var oe,we;const{checked:J}=le;W.value?(oe=y.value)==null||oe.handleCheckChange(le,!J,!1):(!J&&((we=y.value)==null||we.handleCheckChange(le,!0,!1)),be(!1))},he=le=>{const oe=le.target,{code:we}=le;switch(we){case He.up:case He.down:{const J=we===He.up?-1:1;cg(bD(oe,J,`.${l.e("suggestion-item")}[tabindex="-1"]`));break}case He.enter:oe.click();break}},Ae=()=>{const le=E.value,oe=le[le.length-1];i=x.value?0:i+1,!(!oe||!i||r.collapseTags&&le.length>1)&&(oe.hitState?X(oe):oe.hitState=!0)},qe=le=>{const oe=le.target,we=l.e("search-input");oe.className===we&&(T.value=!0),n("focus",le)},st=le=>{T.value=!1,n("blur",le)},vt=ta(()=>{const{value:le}=L;if(!le)return;const oe=r.beforeFilter(le);Tf(oe)?oe.then(me).catch(()=>{}):oe!==!1?me():Se()},r.debounce),Ke=(le,oe)=>{!b.value&&be(!0),!(oe!=null&&oe.isComposing)&&(le?vt():Se())},fe=le=>Number.parseFloat(SX(c.cssVarName("input-height"),le).value)-2;return pe(S,ge),pe([G,I],ne),pe(E,()=>{Ye(()=>de())}),pe($,async()=>{await Ye();const le=h.value.input;o=fe(le)||o,de()}),pe(Y,Fe,{immediate:!0}),at(()=>{const le=h.value.input,oe=fe(le);o=le.offsetHeight||oe,Sn(le,de)}),e({getCheckedNodes:xe,cascaderPanelRef:y,togglePopperVisible:be,contentRef:re}),(le,oe)=>(V(),ae(v(Dr),{ref_key:"tooltipRef",ref:p,visible:b.value,teleported:le.teleported,"popper-class":[v(l).e("dropdown"),le.popperClass],"popper-options":a,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${v(l).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:Se},{default:Z(()=>[rt((V(),z("div",{class:U(v(ve)),style:Pe(v(D)),onClick:oe[5]||(oe[5]=()=>be(v(_)?void 0:!0)),onKeydown:_e,onMouseenter:oe[6]||(oe[6]=we=>C.value=!0),onMouseleave:oe[7]||(oe[7]=we=>C.value=!1)},[j(v(kr),{ref_key:"input",ref:h,modelValue:w.value,"onUpdate:modelValue":oe[1]||(oe[1]=we=>w.value=we),placeholder:v(F),readonly:v(_),disabled:v(I),"validate-event":!1,size:v($),class:U(v(ie)),tabindex:v(W)&&le.filterable&&!v(I)?-1:void 0,onCompositionstart:ye,onCompositionupdate:ye,onCompositionend:ye,onFocus:qe,onBlur:st,onInput:Ke},{suffix:Z(()=>[v(K)?(V(),ae(v(Ge),{key:"clear",class:U([v(c).e("icon"),"icon-circle-close"]),onClick:Ze(Oe,["stop"])},{default:Z(()=>[j(v(vi))]),_:1},8,["class","onClick"])):(V(),ae(v(Ge),{key:"arrow-down",class:U(v(se)),onClick:oe[0]||(oe[0]=Ze(we=>be(),["stop"]))},{default:Z(()=>[j(v(bo))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),v(W)?(V(),z("div",{key:0,ref_key:"tagWrapper",ref:g,class:U(v(l).e("tags"))},[(V(!0),z(Ue,null,gt(E.value,we=>(V(),ae(v(If),{key:we.key,type:le.tagType,size:v(N),hit:we.hitState,closable:we.closable,"disable-transitions":"",onClose:J=>X(we)},{default:Z(()=>[we.isCollapseTag===!1?(V(),z("span",lde,Te(we.text),1)):(V(),ae(v(Dr),{key:1,disabled:b.value||!le.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:Z(()=>[H("span",null,Te(we.text),1)]),content:Z(()=>[H("div",{class:U(v(l).e("collapse-tags"))},[(V(!0),z(Ue,null,gt(O.value.slice(le.maxCollapseTags),(J,$e)=>(V(),z("div",{key:$e,class:U(v(l).e("collapse-tag"))},[(V(),ae(v(If),{key:J.key,class:"in-tooltip",type:le.tagType,size:v(N),hit:J.hitState,closable:J.closable,"disable-transitions":"",onClose:nt=>X(J)},{default:Z(()=>[H("span",null,Te(J.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),le.filterable&&!v(I)?rt((V(),z("input",{key:0,"onUpdate:modelValue":oe[2]||(oe[2]=we=>x.value=we),type:"text",class:U(v(l).e("search-input")),placeholder:v(Y)?"":v(B),onInput:oe[3]||(oe[3]=we=>Ke(x.value,we)),onClick:oe[4]||(oe[4]=Ze(we=>be(!0),["stop"])),onKeydown:Xt(Ae,["delete"]),onCompositionstart:ye,onCompositionupdate:ye,onCompositionend:ye,onFocus:qe,onBlur:st},null,42,cde)),[[Pc,x.value]]):ee("v-if",!0)],2)):ee("v-if",!0)],38)),[[v(go),()=>be(!1),v(re)]])]),content:Z(()=>[rt(j(v(fN),{ref_key:"cascaderPanelRef",ref:y,modelValue:v(te),"onUpdate:modelValue":oe[8]||(oe[8]=we=>cn(te)?te.value=we:null),options:le.options,props:r.props,border:!1,"render-label":le.$slots.default,onExpandChange:ke,onClose:oe[9]||(oe[9]=we=>le.$nextTick(()=>be(!1)))},null,8,["modelValue","options","props","render-label"]),[[Rt,!S.value]]),le.filterable?rt((V(),ae(v(To),{key:0,ref_key:"suggestionPanel",ref:m,tag:"ul",class:U(v(l).e("suggestion-panel")),"view-class":v(l).e("suggestion-list"),onKeydown:he},{default:Z(()=>[k.value.length?(V(!0),z(Ue,{key:0},gt(k.value,we=>(V(),z("li",{key:we.uid,class:U([v(l).e("suggestion-item"),v(l).is("checked",we.checked)]),tabindex:-1,onClick:J=>ze(we)},[H("span",null,Te(we.text),1),we.checked?(V(),ae(v(Ge),{key:0},{default:Z(()=>[j(v(Cd))]),_:1})):ee("v-if",!0)],10,ude))),128)):ce(le.$slots,"empty",{key:1},()=>[H("li",{class:U(v(l).e("empty-text"))},Te(v(u)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Rt,S.value]]):ee("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var mg=Ve(pde,[["__file","cascader.vue"]]);mg.install=t=>{t.component(mg.name,mg)};const gde=mg,hde=gde,vde=Re({checked:{type:Boolean,default:!1},type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"}}),yde={"update:checked":t=>Wn(t),[pn]:t=>Wn(t)},mde=q({name:"ElCheckTag"}),Cde=q({...mde,props:vde,emits:yde,setup(t,{emit:e}){const n=t,r=Ce("check-tag"),a=R(()=>[r.b(),r.is("checked",n.checked),r.m(n.type||"primary")]),s=()=>{const o=!n.checked;e(pn,o),e("update:checked",o)};return(o,i)=>(V(),z("span",{class:U(v(a)),onClick:s},[ce(o.$slots,"default")],2))}});var Sde=Ve(Cde,[["__file","check-tag.vue"]]);const bde=lt(Sde),dN=Symbol("rowContextKey"),wde=["start","center","end","space-around","space-between","space-evenly"],Tde=["top","middle","bottom"],xde=Re({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:wde,default:"start"},align:{type:String,values:Tde}}),Ede=q({name:"ElRow"}),kde=q({...Ede,props:xde,setup(t){const e=t,n=Ce("row"),r=R(()=>e.gutter);bt(dN,{gutter:r});const a=R(()=>{const o={};return e.gutter&&(o.marginRight=o.marginLeft=`-${e.gutter/2}px`),o}),s=R(()=>[n.b(),n.is(`justify-${e.justify}`,e.justify!=="start"),n.is(`align-${e.align}`,!!e.align)]);return(o,i)=>(V(),ae(dt(o.tag),{class:U(v(s)),style:Pe(v(a))},{default:Z(()=>[ce(o.$slots,"default")]),_:3},8,["class","style"]))}});var Ode=Ve(kde,[["__file","row.vue"]]);const Mde=lt(Ode),Rde=Re({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:Q([Number,Object]),default:()=>mn({})},sm:{type:Q([Number,Object]),default:()=>mn({})},md:{type:Q([Number,Object]),default:()=>mn({})},lg:{type:Q([Number,Object]),default:()=>mn({})},xl:{type:Q([Number,Object]),default:()=>mn({})}}),_de=q({name:"ElCol"}),Vde=q({..._de,props:Rde,setup(t){const e=t,{gutter:n}=We(dN,{gutter:R(()=>0)}),r=Ce("col"),a=R(()=>{const o={};return n.value&&(o.paddingLeft=o.paddingRight=`${n.value/2}px`),o}),s=R(()=>{const o=[];return["span","offset","pull","push"].forEach(c=>{const u=e[c];Xe(u)&&(c==="span"?o.push(r.b(`${e[c]}`)):u>0&&o.push(r.b(`${c}-${e[c]}`)))}),["xs","sm","md","lg","xl"].forEach(c=>{Xe(e[c])?o.push(r.b(`${c}-${e[c]}`)):pt(e[c])&&Object.entries(e[c]).forEach(([u,f])=>{o.push(u!=="span"?r.b(`${c}-${u}-${f}`):r.b(`${c}-${f}`))})}),n.value&&o.push(r.is("guttered")),[r.b(),o]});return(o,i)=>(V(),ae(dt(o.tag),{class:U(v(s)),style:Pe(v(a))},{default:Z(()=>[ce(o.$slots,"default")]),_:3},8,["class","style"]))}});var Dde=Ve(Vde,[["__file","col.vue"]]);const Lde=lt(Dde),dE=t=>Xe(t)||tt(t)||Be(t),Nde=Re({accordion:Boolean,modelValue:{type:Q([Array,String,Number]),default:()=>mn([])}}),Bde={[ut]:dE,[pn]:dE},pN=Symbol("collapseContextKey"),Fde=(t,e)=>{const n=P(xl(t.modelValue)),r=s=>{n.value=s;const o=t.accordion?n.value[0]:n.value;e(ut,o),e(pn,o)},a=s=>{if(t.accordion)r([n.value[0]===s?"":s]);else{const o=[...n.value],i=o.indexOf(s);i>-1?o.splice(i,1):o.push(s),r(o)}};return pe(()=>t.modelValue,()=>n.value=xl(t.modelValue),{deep:!0}),bt(pN,{activeNames:n,handleItemClick:a}),{activeNames:n,setActiveNames:r}},$de=()=>{const t=Ce("collapse");return{rootKls:R(()=>t.b())}},Ude=q({name:"ElCollapse"}),Ade=q({...Ude,props:Nde,emits:Bde,setup(t,{expose:e,emit:n}){const r=t,{activeNames:a,setActiveNames:s}=Fde(r,n),{rootKls:o}=$de();return e({activeNames:a,setActiveNames:s}),(i,l)=>(V(),z("div",{class:U(v(o))},[ce(i.$slots,"default")],2))}});var Wde=Ve(Ade,[["__file","collapse.vue"]]);const Ide=q({name:"ElCollapseTransition"}),Pde=q({...Ide,setup(t){const e=Ce("collapse-transition"),n=a=>{a.style.maxHeight="",a.style.overflow=a.dataset.oldOverflow,a.style.paddingTop=a.dataset.oldPaddingTop,a.style.paddingBottom=a.dataset.oldPaddingBottom},r={beforeEnter(a){a.dataset||(a.dataset={}),a.dataset.oldPaddingTop=a.style.paddingTop,a.dataset.oldPaddingBottom=a.style.paddingBottom,a.style.height&&(a.dataset.elExistsHeight=a.style.height),a.style.maxHeight=0,a.style.paddingTop=0,a.style.paddingBottom=0},enter(a){requestAnimationFrame(()=>{a.dataset.oldOverflow=a.style.overflow,a.dataset.elExistsHeight?a.style.maxHeight=a.dataset.elExistsHeight:a.scrollHeight!==0?a.style.maxHeight=`${a.scrollHeight}px`:a.style.maxHeight=0,a.style.paddingTop=a.dataset.oldPaddingTop,a.style.paddingBottom=a.dataset.oldPaddingBottom,a.style.overflow="hidden"})},afterEnter(a){a.style.maxHeight="",a.style.overflow=a.dataset.oldOverflow},enterCancelled(a){n(a)},beforeLeave(a){a.dataset||(a.dataset={}),a.dataset.oldPaddingTop=a.style.paddingTop,a.dataset.oldPaddingBottom=a.style.paddingBottom,a.dataset.oldOverflow=a.style.overflow,a.style.maxHeight=`${a.scrollHeight}px`,a.style.overflow="hidden"},leave(a){a.scrollHeight!==0&&(a.style.maxHeight=0,a.style.paddingTop=0,a.style.paddingBottom=0)},afterLeave(a){n(a)},leaveCancelled(a){n(a)}};return(a,s)=>(V(),ae(jn,ft({name:v(e).b()},AY(r)),{default:Z(()=>[ce(a.$slots,"default")]),_:3},16,["name"]))}});var Cg=Ve(Pde,[["__file","collapse-transition.vue"]]);Cg.install=t=>{t.component(Cg.name,Cg)};const Kv=Cg,Gde=Kv,zde=Re({title:{type:String,default:""},name:{type:Q([String,Number]),default:void 0},disabled:Boolean}),Hde=t=>{const e=We(pN),{namespace:n}=Ce("collapse"),r=P(!1),a=P(!1),s=AS(),o=R(()=>s.current++),i=R(()=>{var d;return(d=t.name)!=null?d:`${n.value}-id-${s.prefix}-${v(o)}`}),l=R(()=>e==null?void 0:e.activeNames.value.includes(v(i)));return{focusing:r,id:o,isActive:l,handleFocus:()=>{setTimeout(()=>{a.value?a.value=!1:r.value=!0},50)},handleHeaderClick:()=>{t.disabled||(e==null||e.handleItemClick(v(i)),r.value=!1,a.value=!0)},handleEnterClick:()=>{e==null||e.handleItemClick(v(i))}}},Kde=(t,{focusing:e,isActive:n,id:r})=>{const a=Ce("collapse"),s=R(()=>[a.b("item"),a.is("active",v(n)),a.is("disabled",t.disabled)]),o=R(()=>[a.be("item","header"),a.is("active",v(n)),{focusing:v(e)&&!t.disabled}]),i=R(()=>[a.be("item","arrow"),a.is("active",v(n))]),l=R(()=>a.be("item","wrap")),c=R(()=>a.be("item","content")),u=R(()=>a.b(`content-${v(r)}`)),f=R(()=>a.b(`head-${v(r)}`));return{arrowKls:i,headKls:o,rootKls:s,itemWrapperKls:l,itemContentKls:c,scopedContentId:u,scopedHeadId:f}},jde=["id","aria-expanded","aria-controls","aria-describedby","tabindex"],Yde=["id","aria-hidden","aria-labelledby"],qde=q({name:"ElCollapseItem"}),Xde=q({...qde,props:zde,setup(t,{expose:e}){const n=t,{focusing:r,id:a,isActive:s,handleFocus:o,handleHeaderClick:i,handleEnterClick:l}=Hde(n),{arrowKls:c,headKls:u,rootKls:f,itemWrapperKls:d,itemContentKls:p,scopedContentId:h,scopedHeadId:g}=Kde(n,{focusing:r,isActive:s,id:a});return e({isActive:s}),(y,m)=>(V(),z("div",{class:U(v(f))},[H("button",{id:v(g),class:U(v(u)),"aria-expanded":v(s),"aria-controls":v(h),"aria-describedby":v(h),tabindex:y.disabled?-1:0,type:"button",onClick:m[0]||(m[0]=(...b)=>v(i)&&v(i)(...b)),onKeydown:m[1]||(m[1]=Xt(Ze((...b)=>v(l)&&v(l)(...b),["stop","prevent"]),["space","enter"])),onFocus:m[2]||(m[2]=(...b)=>v(o)&&v(o)(...b)),onBlur:m[3]||(m[3]=b=>r.value=!1)},[ce(y.$slots,"title",{},()=>[Ct(Te(y.title),1)]),j(v(Ge),{class:U(v(c))},{default:Z(()=>[j(v(Wr))]),_:1},8,["class"])],42,jde),j(v(Kv),null,{default:Z(()=>[rt(H("div",{id:v(h),role:"region",class:U(v(d)),"aria-hidden":!v(s),"aria-labelledby":v(g)},[H("div",{class:U(v(p))},[ce(y.$slots,"default")],2)],10,Yde),[[Rt,v(s)]])]),_:3})],2))}});var gN=Ve(Xde,[["__file","collapse-item.vue"]]);const Zde=lt(Wde,{CollapseItem:gN}),Jde=bn(gN),Qde=Re({color:{type:Q(Object),required:!0},vertical:{type:Boolean,default:!1}});let ny=!1;function Pf(t,e){if(!Ot)return;const n=function(s){var o;(o=e.drag)==null||o.call(e,s)},r=function(s){var o;document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",r),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",r),document.onselectstart=null,document.ondragstart=null,ny=!1,(o=e.end)==null||o.call(e,s)},a=function(s){var o;ny||(s.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",n),document.addEventListener("mouseup",r),document.addEventListener("touchmove",n),document.addEventListener("touchend",r),ny=!0,(o=e.start)==null||o.call(e,s))};t.addEventListener("mousedown",a),t.addEventListener("touchstart",a)}const epe=t=>{const e=ot(),n=on(),r=on();function a(o){o.target!==n.value&&s(o)}function s(o){if(!r.value||!n.value)return;const l=e.vnode.el.getBoundingClientRect(),{clientX:c,clientY:u}=tS(o);if(t.vertical){let f=u-l.top;f=Math.max(n.value.offsetHeight/2,f),f=Math.min(f,l.height-n.value.offsetHeight/2),t.color.set("alpha",Math.round((f-n.value.offsetHeight/2)/(l.height-n.value.offsetHeight)*100))}else{let f=c-l.left;f=Math.max(n.value.offsetWidth/2,f),f=Math.min(f,l.width-n.value.offsetWidth/2),t.color.set("alpha",Math.round((f-n.value.offsetWidth/2)/(l.width-n.value.offsetWidth)*100))}}return{thumb:n,bar:r,handleDrag:s,handleClick:a}},tpe=(t,{bar:e,thumb:n,handleDrag:r})=>{const a=ot(),s=Ce("color-alpha-slider"),o=P(0),i=P(0),l=P();function c(){if(!n.value||t.vertical)return 0;const b=a.vnode.el,C=t.color.get("alpha");return b?Math.round(C*(b.offsetWidth-n.value.offsetWidth/2)/100):0}function u(){if(!n.value)return 0;const b=a.vnode.el;if(!t.vertical)return 0;const C=t.color.get("alpha");return b?Math.round(C*(b.offsetHeight-n.value.offsetHeight/2)/100):0}function f(){if(t.color&&t.color.value){const{r:b,g:C,b:S}=t.color.toRgb();return`linear-gradient(to right, rgba(${b}, ${C}, ${S}, 0) 0%, rgba(${b}, ${C}, ${S}, 1) 100%)`}return""}function d(){o.value=c(),i.value=u(),l.value=f()}at(()=>{if(!e.value||!n.value)return;const b={drag:C=>{r(C)},end:C=>{r(C)}};Pf(e.value,b),Pf(n.value,b),d()}),pe(()=>t.color.get("alpha"),()=>d()),pe(()=>t.color.value,()=>d());const p=R(()=>[s.b(),s.is("vertical",t.vertical)]),h=R(()=>s.e("bar")),g=R(()=>s.e("thumb")),y=R(()=>({background:l.value})),m=R(()=>({left:Bn(o.value),top:Bn(i.value)}));return{rootKls:p,barKls:h,barStyle:y,thumbKls:g,thumbStyle:m,update:d}},npe="ElColorAlphaSlider",rpe=q({name:npe}),ape=q({...rpe,props:Qde,setup(t,{expose:e}){const n=t,{bar:r,thumb:a,handleDrag:s,handleClick:o}=epe(n),{rootKls:i,barKls:l,barStyle:c,thumbKls:u,thumbStyle:f,update:d}=tpe(n,{bar:r,thumb:a,handleDrag:s});return e({update:d,bar:r,thumb:a}),(p,h)=>(V(),z("div",{class:U(v(i))},[H("div",{ref_key:"bar",ref:r,class:U(v(l)),style:Pe(v(c)),onClick:h[0]||(h[0]=(...g)=>v(o)&&v(o)(...g))},null,6),H("div",{ref_key:"thumb",ref:a,class:U(v(u)),style:Pe(v(f))},null,6)],2))}});var spe=Ve(ape,[["__file","alpha-slider.vue"]]);const ope=q({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(t){const e=Ce("color-hue-slider"),n=ot(),r=P(),a=P(),s=P(0),o=P(0),i=R(()=>t.color.get("hue"));pe(()=>i.value,()=>{d()});function l(p){p.target!==r.value&&c(p)}function c(p){if(!a.value||!r.value)return;const g=n.vnode.el.getBoundingClientRect(),{clientX:y,clientY:m}=tS(p);let b;if(t.vertical){let C=m-g.top;C=Math.min(C,g.height-r.value.offsetHeight/2),C=Math.max(r.value.offsetHeight/2,C),b=Math.round((C-r.value.offsetHeight/2)/(g.height-r.value.offsetHeight)*360)}else{let C=y-g.left;C=Math.min(C,g.width-r.value.offsetWidth/2),C=Math.max(r.value.offsetWidth/2,C),b=Math.round((C-r.value.offsetWidth/2)/(g.width-r.value.offsetWidth)*360)}t.color.set("hue",b)}function u(){if(!r.value)return 0;const p=n.vnode.el;if(t.vertical)return 0;const h=t.color.get("hue");return p?Math.round(h*(p.offsetWidth-r.value.offsetWidth/2)/360):0}function f(){if(!r.value)return 0;const p=n.vnode.el;if(!t.vertical)return 0;const h=t.color.get("hue");return p?Math.round(h*(p.offsetHeight-r.value.offsetHeight/2)/360):0}function d(){s.value=u(),o.value=f()}return at(()=>{if(!a.value||!r.value)return;const p={drag:h=>{c(h)},end:h=>{c(h)}};Pf(a.value,p),Pf(r.value,p),d()}),{bar:a,thumb:r,thumbLeft:s,thumbTop:o,hueValue:i,handleClick:l,update:d,ns:e}}});function ipe(t,e,n,r,a,s){return V(),z("div",{class:U([t.ns.b(),t.ns.is("vertical",t.vertical)])},[H("div",{ref:"bar",class:U(t.ns.e("bar")),onClick:e[0]||(e[0]=(...o)=>t.handleClick&&t.handleClick(...o))},null,2),H("div",{ref:"thumb",class:U(t.ns.e("thumb")),style:Pe({left:t.thumbLeft+"px",top:t.thumbTop+"px"})},null,6)],2)}var lpe=Ve(ope,[["render",ipe],["__file","hue-slider.vue"]]);const cpe=Re({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:lr,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},predefine:{type:Q(Array)},validateEvent:{type:Boolean,default:!0}}),upe={[ut]:t=>tt(t)||er(t),[pn]:t=>tt(t)||er(t),activeChange:t=>tt(t)||er(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent},hN=Symbol("colorPickerContextKey"),pE=function(t,e,n){return[t,e*n/((t=(2-e)*n)<1?t:2-t)||0,t/2]},fpe=function(t){return typeof t=="string"&&t.includes(".")&&Number.parseFloat(t)===1},dpe=function(t){return typeof t=="string"&&t.includes("%")},Rc=function(t,e){fpe(t)&&(t="100%");const n=dpe(t);return t=Math.min(e,Math.max(0,Number.parseFloat(`${t}`))),n&&(t=Number.parseInt(`${t*e}`,10)/100),Math.abs(t-e)<1e-6?1:t%e/Number.parseFloat(e)},gE={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},Sg=t=>{t=Math.min(Math.round(t),255);const e=Math.floor(t/16),n=t%16;return`${gE[e]||e}${gE[n]||n}`},hE=function({r:t,g:e,b:n}){return Number.isNaN(+t)||Number.isNaN(+e)||Number.isNaN(+n)?"":`#${Sg(t)}${Sg(e)}${Sg(n)}`},ry={A:10,B:11,C:12,D:13,E:14,F:15},Di=function(t){return t.length===2?(ry[t[0].toUpperCase()]||+t[0])*16+(ry[t[1].toUpperCase()]||+t[1]):ry[t[1].toUpperCase()]||+t[1]},ppe=function(t,e,n){e=e/100,n=n/100;let r=e;const a=Math.max(n,.01);n*=2,e*=n<=1?n:2-n,r*=a<=1?a:2-a;const s=(n+e)/2,o=n===0?2*r/(a+r):2*e/(n+e);return{h:t,s:o*100,v:s*100}},vE=(t,e,n)=>{t=Rc(t,255),e=Rc(e,255),n=Rc(n,255);const r=Math.max(t,e,n),a=Math.min(t,e,n);let s;const o=r,i=r-a,l=r===0?0:i/r;if(r===a)s=0;else{switch(r){case t:{s=(e-n)/i+(e<n?6:0);break}case e:{s=(n-t)/i+2;break}case n:{s=(t-e)/i+4;break}}s/=6}return{h:s*360,s:l*100,v:o*100}},Ru=function(t,e,n){t=Rc(t,360)*6,e=Rc(e,100),n=Rc(n,100);const r=Math.floor(t),a=t-r,s=n*(1-e),o=n*(1-a*e),i=n*(1-(1-a)*e),l=r%6,c=[n,o,s,s,i,n][l],u=[i,n,n,o,s,s][l],f=[s,s,i,n,n,o][l];return{r:Math.round(c*255),g:Math.round(u*255),b:Math.round(f*255)}};class pf{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const n in e)Et(e,n)&&(this[n]=e[n]);e.value?this.fromString(e.value):this.doOnChange()}set(e,n){if(arguments.length===1&&typeof e=="object"){for(const r in e)Et(e,r)&&this.set(r,e[r]);return}this[`_${e}`]=n,this.doOnChange()}get(e){return e==="alpha"?Math.floor(this[`_${e}`]):this[`_${e}`]}toRgb(){return Ru(this._hue,this._saturation,this._value)}fromString(e){if(!e){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const n=(r,a,s)=>{this._hue=Math.max(0,Math.min(360,r)),this._saturation=Math.max(0,Math.min(100,a)),this._value=Math.max(0,Math.min(100,s)),this.doOnChange()};if(e.includes("hsl")){const r=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(a=>a!=="").map((a,s)=>s>2?Number.parseFloat(a):Number.parseInt(a,10));if(r.length===4?this._alpha=Number.parseFloat(r[3])*100:r.length===3&&(this._alpha=100),r.length>=3){const{h:a,s,v:o}=ppe(r[0],r[1],r[2]);n(a,s,o)}}else if(e.includes("hsv")){const r=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(a=>a!=="").map((a,s)=>s>2?Number.parseFloat(a):Number.parseInt(a,10));r.length===4?this._alpha=Number.parseFloat(r[3])*100:r.length===3&&(this._alpha=100),r.length>=3&&n(r[0],r[1],r[2])}else if(e.includes("rgb")){const r=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(a=>a!=="").map((a,s)=>s>2?Number.parseFloat(a):Number.parseInt(a,10));if(r.length===4?this._alpha=Number.parseFloat(r[3])*100:r.length===3&&(this._alpha=100),r.length>=3){const{h:a,s,v:o}=vE(r[0],r[1],r[2]);n(a,s,o)}}else if(e.includes("#")){const r=e.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(r))return;let a,s,o;r.length===3?(a=Di(r[0]+r[0]),s=Di(r[1]+r[1]),o=Di(r[2]+r[2])):(r.length===6||r.length===8)&&(a=Di(r.slice(0,2)),s=Di(r.slice(2,4)),o=Di(r.slice(4,6))),r.length===8?this._alpha=Di(r.slice(6))/255*100:(r.length===3||r.length===6)&&(this._alpha=100);const{h:i,s:l,v:c}=vE(a,s,o);n(i,l,c)}}compare(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1}doOnChange(){const{_hue:e,_saturation:n,_value:r,_alpha:a,format:s}=this;if(this.enableAlpha)switch(s){case"hsl":{const o=pE(e,n/100,r/100);this.value=`hsla(${e}, ${Math.round(o[1]*100)}%, ${Math.round(o[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${e}, ${Math.round(n)}%, ${Math.round(r)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${hE(Ru(e,n,r))}${Sg(a*255/100)}`;break}default:{const{r:o,g:i,b:l}=Ru(e,n,r);this.value=`rgba(${o}, ${i}, ${l}, ${this.get("alpha")/100})`}}else switch(s){case"hsl":{const o=pE(e,n/100,r/100);this.value=`hsl(${e}, ${Math.round(o[1]*100)}%, ${Math.round(o[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${e}, ${Math.round(n)}%, ${Math.round(r)}%)`;break}case"rgb":{const{r:o,g:i,b:l}=Ru(e,n,r);this.value=`rgb(${o}, ${i}, ${l})`;break}default:this.value=hE(Ru(e,n,r))}}}const gpe=q({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(t){const e=Ce("color-predefine"),{currentColor:n}=We(hN),r=P(s(t.colors,t.color));pe(()=>n.value,o=>{const i=new pf;i.fromString(o),r.value.forEach(l=>{l.selected=i.compare(l)})}),Sr(()=>{r.value=s(t.colors,t.color)});function a(o){t.color.fromString(t.colors[o])}function s(o,i){return o.map(l=>{const c=new pf;return c.enableAlpha=!0,c.format="rgba",c.fromString(l),c.selected=c.value===i.value,c})}return{rgbaColors:r,handleSelect:a,ns:e}}}),hpe=["onClick"];function vpe(t,e,n,r,a,s){return V(),z("div",{class:U(t.ns.b())},[H("div",{class:U(t.ns.e("colors"))},[(V(!0),z(Ue,null,gt(t.rgbaColors,(o,i)=>(V(),z("div",{key:t.colors[i],class:U([t.ns.e("color-selector"),t.ns.is("alpha",o._alpha<100),{selected:o.selected}]),onClick:l=>t.handleSelect(i)},[H("div",{style:Pe({backgroundColor:o.value})},null,4)],10,hpe))),128))],2)],2)}var ype=Ve(gpe,[["render",vpe],["__file","predefine.vue"]]);const mpe=q({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(t){const e=Ce("color-svpanel"),n=ot(),r=P(0),a=P(0),s=P("hsl(0, 100%, 50%)"),o=R(()=>{const c=t.color.get("hue"),u=t.color.get("value");return{hue:c,value:u}});function i(){const c=t.color.get("saturation"),u=t.color.get("value"),f=n.vnode.el,{clientWidth:d,clientHeight:p}=f;a.value=c*d/100,r.value=(100-u)*p/100,s.value=`hsl(${t.color.get("hue")}, 100%, 50%)`}function l(c){const f=n.vnode.el.getBoundingClientRect(),{clientX:d,clientY:p}=tS(c);let h=d-f.left,g=p-f.top;h=Math.max(0,h),h=Math.min(h,f.width),g=Math.max(0,g),g=Math.min(g,f.height),a.value=h,r.value=g,t.color.set({saturation:h/f.width*100,value:100-g/f.height*100})}return pe(()=>o.value,()=>{i()}),at(()=>{Pf(n.vnode.el,{drag:c=>{l(c)},end:c=>{l(c)}}),i()}),{cursorTop:r,cursorLeft:a,background:s,colorValue:o,handleDrag:l,update:i,ns:e}}}),Cpe=H("div",null,null,-1),Spe=[Cpe];function bpe(t,e,n,r,a,s){return V(),z("div",{class:U(t.ns.b()),style:Pe({backgroundColor:t.background})},[H("div",{class:U(t.ns.e("white"))},null,2),H("div",{class:U(t.ns.e("black"))},null,2),H("div",{class:U(t.ns.e("cursor")),style:Pe({top:t.cursorTop+"px",left:t.cursorLeft+"px"})},Spe,6)],6)}var wpe=Ve(mpe,[["render",bpe],["__file","sv-panel.vue"]]);const Tpe=["onKeydown"],xpe=["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex"],Epe=q({name:"ElColorPicker"}),kpe=q({...Epe,props:cpe,emits:upe,setup(t,{expose:e,emit:n}){const r=t,{t:a}=Mt(),s=Ce("color"),{formItem:o}=Hr(),i=qn(),l=na(),{inputId:c,isLabeledByFormItem:u}=Bs(r,{formItemContext:o}),f=P(),d=P(),p=P(),h=P(),g=P(),y=P(),{isFocused:m,handleFocus:b,handleBlur:C}=Wv(g,{beforeBlur(ge){var Se;return(Se=h.value)==null?void 0:Se.isFocusInsideContent(ge)},afterBlur(){$(!1),L()}}),S=ge=>{if(l.value)return be();b(ge)};let T=!0;const w=Dt(new pf({enableAlpha:r.showAlpha,format:r.colorFormat||"",value:r.modelValue})),x=P(!1),E=P(!1),O=P(""),k=R(()=>!r.modelValue&&!E.value?"transparent":F(w,r.showAlpha)),M=R(()=>!r.modelValue&&!E.value?"":w.value),D=R(()=>u.value?void 0:r.label||a("el.colorpicker.defaultLabel")),I=R(()=>u.value?o==null?void 0:o.labelId:void 0),B=R(()=>[s.b("picker"),s.is("disabled",l.value),s.bm("picker",i.value),s.is("focused",m.value)]);function F(ge,Se){if(!(ge instanceof pf))throw new TypeError("color should be instance of _color Class");const{r:De,g:X,b:ne}=ge.toRgb();return Se?`rgba(${De}, ${X}, ${ne}, ${ge.get("alpha")/100})`:`rgb(${De}, ${X}, ${ne})`}function $(ge){x.value=ge}const N=ta($,100,{leading:!0});function W(){l.value||$(!0)}function _(){N(!1),L()}function L(){Ye(()=>{r.modelValue?w.fromString(r.modelValue):(w.value="",Ye(()=>{E.value=!1}))})}function G(){l.value||N(!x.value)}function K(){w.fromString(O.value)}function Y(){const ge=w.value;n(ut,ge),n("change",ge),r.validateEvent&&(o==null||o.validate("change").catch(Se=>void 0)),N(!1),Ye(()=>{const Se=new pf({enableAlpha:r.showAlpha,format:r.colorFormat||"",value:r.modelValue});w.compare(Se)||L()})}function te(){N(!1),n(ut,null),n("change",null),r.modelValue!==null&&r.validateEvent&&(o==null||o.validate("change").catch(ge=>void 0)),L()}function ve(ge){if(x.value&&(_(),m.value)){const Se=new FocusEvent("focus",ge);C(Se)}}function se(ge){ge.preventDefault(),ge.stopPropagation(),$(!1),L()}function ie(ge){switch(ge.code){case He.enter:case He.space:ge.preventDefault(),ge.stopPropagation(),W(),y.value.focus();break;case He.esc:se(ge);break}}function re(){g.value.focus()}function be(){g.value.blur()}return at(()=>{r.modelValue&&(O.value=M.value)}),pe(()=>r.modelValue,ge=>{ge?ge&&ge!==w.value&&(T=!1,w.fromString(ge)):E.value=!1}),pe(()=>M.value,ge=>{O.value=ge,T&&n("activeChange",ge),T=!0}),pe(()=>w.value,()=>{!r.modelValue&&!E.value&&(E.value=!0)}),pe(()=>x.value,()=>{Ye(()=>{var ge,Se,De;(ge=f.value)==null||ge.update(),(Se=d.value)==null||Se.update(),(De=p.value)==null||De.update()})}),bt(hN,{currentColor:M}),e({color:w,show:W,hide:_,focus:re,blur:be}),(ge,Se)=>(V(),ae(v(Dr),{ref_key:"popper",ref:h,visible:x.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[v(s).be("picker","panel"),v(s).b("dropdown"),ge.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",transition:`${v(s).namespace.value}-zoom-in-top`,persistent:"",onHide:Se[2]||(Se[2]=De=>$(!1))},{content:Z(()=>[rt((V(),z("div",{onKeydown:Xt(se,["esc"])},[H("div",{class:U(v(s).be("dropdown","main-wrapper"))},[j(lpe,{ref_key:"hue",ref:f,class:"hue-slider",color:v(w),vertical:""},null,8,["color"]),j(wpe,{ref_key:"sv",ref:d,color:v(w)},null,8,["color"])],2),ge.showAlpha?(V(),ae(spe,{key:0,ref_key:"alpha",ref:p,color:v(w)},null,8,["color"])):ee("v-if",!0),ge.predefine?(V(),ae(ype,{key:1,ref:"predefine",color:v(w),colors:ge.predefine},null,8,["color","colors"])):ee("v-if",!0),H("div",{class:U(v(s).be("dropdown","btns"))},[H("span",{class:U(v(s).be("dropdown","value"))},[j(v(kr),{ref_key:"inputRef",ref:y,modelValue:O.value,"onUpdate:modelValue":Se[0]||(Se[0]=De=>O.value=De),"validate-event":!1,size:"small",onKeyup:Xt(K,["enter"]),onBlur:K},null,8,["modelValue","onKeyup"])],2),j(v(ir),{class:U(v(s).be("dropdown","link-btn")),text:"",size:"small",onClick:te},{default:Z(()=>[Ct(Te(v(a)("el.colorpicker.clear")),1)]),_:1},8,["class"]),j(v(ir),{plain:"",size:"small",class:U(v(s).be("dropdown","btn")),onClick:Y},{default:Z(()=>[Ct(Te(v(a)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,Tpe)),[[v(go),ve]])]),default:Z(()=>[H("div",{id:v(c),ref_key:"triggerRef",ref:g,class:U(v(B)),role:"button","aria-label":v(D),"aria-labelledby":v(I),"aria-description":v(a)("el.colorpicker.description",{color:ge.modelValue||""}),"aria-disabled":v(l),tabindex:v(l)?-1:ge.tabindex,onKeydown:ie,onFocus:S,onBlur:Se[1]||(Se[1]=(...De)=>v(C)&&v(C)(...De))},[v(l)?(V(),z("div",{key:0,class:U(v(s).be("picker","mask"))},null,2)):ee("v-if",!0),H("div",{class:U(v(s).be("picker","trigger")),onClick:G},[H("span",{class:U([v(s).be("picker","color"),v(s).is("alpha",ge.showAlpha)])},[H("span",{class:U(v(s).be("picker","color-inner")),style:Pe({backgroundColor:v(k)})},[rt(j(v(Ge),{class:U([v(s).be("picker","icon"),v(s).is("icon-arrow-down")])},{default:Z(()=>[j(v(bo))]),_:1},8,["class"]),[[Rt,ge.modelValue||E.value]]),rt(j(v(Ge),{class:U([v(s).be("picker","empty"),v(s).is("icon-close")])},{default:Z(()=>[j(v(as))]),_:1},8,["class"]),[[Rt,!ge.modelValue&&!E.value]])],6)],2)],2)],42,xpe)]),_:1},8,["visible","popper-class","transition"]))}});var Ope=Ve(kpe,[["__file","color-picker.vue"]]);const Mpe=lt(Ope),Rpe=q({name:"ElContainer"}),_pe=q({...Rpe,props:{direction:{type:String}},setup(t){const e=t,n=rr(),r=Ce("container"),a=R(()=>e.direction==="vertical"?!0:e.direction==="horizontal"?!1:n&&n.default?n.default().some(o=>{const i=o.type.name;return i==="ElHeader"||i==="ElFooter"}):!1);return(s,o)=>(V(),z("section",{class:U([v(r).b(),v(r).is("vertical",v(a))])},[ce(s.$slots,"default")],2))}});var Vpe=Ve(_pe,[["__file","container.vue"]]);const Dpe=q({name:"ElAside"}),Lpe=q({...Dpe,props:{width:{type:String,default:null}},setup(t){const e=t,n=Ce("aside"),r=R(()=>e.width?n.cssVarBlock({width:e.width}):{});return(a,s)=>(V(),z("aside",{class:U(v(n).b()),style:Pe(v(r))},[ce(a.$slots,"default")],6))}});var vN=Ve(Lpe,[["__file","aside.vue"]]);const Npe=q({name:"ElFooter"}),Bpe=q({...Npe,props:{height:{type:String,default:null}},setup(t){const e=t,n=Ce("footer"),r=R(()=>e.height?n.cssVarBlock({height:e.height}):{});return(a,s)=>(V(),z("footer",{class:U(v(n).b()),style:Pe(v(r))},[ce(a.$slots,"default")],6))}});var yN=Ve(Bpe,[["__file","footer.vue"]]);const Fpe=q({name:"ElHeader"}),$pe=q({...Fpe,props:{height:{type:String,default:null}},setup(t){const e=t,n=Ce("header"),r=R(()=>e.height?n.cssVarBlock({height:e.height}):{});return(a,s)=>(V(),z("header",{class:U(v(n).b()),style:Pe(v(r))},[ce(a.$slots,"default")],6))}});var mN=Ve($pe,[["__file","header.vue"]]);const Upe=q({name:"ElMain"}),Ape=q({...Upe,setup(t){const e=Ce("main");return(n,r)=>(V(),z("main",{class:U(v(e).b())},[ce(n.$slots,"default")],2))}});var CN=Ve(Ape,[["__file","main.vue"]]);const Wpe=lt(Vpe,{Aside:vN,Footer:yN,Header:mN,Main:CN}),Ipe=bn(vN),Ppe=bn(yN),Gpe=bn(mN),zpe=bn(CN);var SN={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Hn,function(){return function(n,r){var a=r.prototype,s=a.format;a.format=function(o){var i=this,l=this.$locale();if(!this.isValid())return s.bind(this)(o);var c=this.$utils(),u=(o||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(f){switch(f){case"Q":return Math.ceil((i.$M+1)/3);case"Do":return l.ordinal(i.$D);case"gggg":return i.weekYear();case"GGGG":return i.isoWeekYear();case"wo":return l.ordinal(i.week(),"W");case"w":case"ww":return c.s(i.week(),f==="w"?1:2,"0");case"W":case"WW":return c.s(i.isoWeek(),f==="W"?1:2,"0");case"k":case"kk":return c.s(String(i.$H===0?24:i.$H),f==="k"?1:2,"0");case"X":return Math.floor(i.$d.getTime()/1e3);case"x":return i.$d.getTime();case"z":return"["+i.offsetName()+"]";case"zzz":return"["+i.offsetName("long")+"]";default:return f}});return s.bind(this)(u)}}})})(SN);var Hpe=SN.exports;const Kpe=fa(Hpe);var bN={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Hn,function(){var n="week",r="year";return function(a,s,o){var i=s.prototype;i.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var c=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var u=o(this).startOf(r).add(1,r).date(c),f=o(this).endOf(n);if(u.isBefore(f))return 1}var d=o(this).startOf(r).date(c).startOf(n).subtract(1,"millisecond"),p=this.diff(d,n,!0);return p<0?o(this).startOf("week").week():Math.ceil(p)},i.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})})(bN);var jpe=bN.exports;const Ype=fa(jpe);var wN={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Hn,function(){return function(n,r){r.prototype.weekYear=function(){var a=this.month(),s=this.week(),o=this.year();return s===1&&a===11?o+1:a===0&&s>=52?o-1:o}}})})(wN);var qpe=wN.exports;const Xpe=fa(qpe);var TN={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Hn,function(){return function(n,r,a){r.prototype.dayOfYear=function(s){var o=Math.round((a(this).startOf("day")-a(this).startOf("year"))/864e5)+1;return s==null?o:this.add(s-o,"day")}}})})(TN);var Zpe=TN.exports;const Jpe=fa(Zpe);var xN={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Hn,function(){return function(n,r){r.prototype.isSameOrAfter=function(a,s){return this.isSame(a,s)||this.isAfter(a,s)}}})})(xN);var Qpe=xN.exports;const ege=fa(Qpe);var EN={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Hn,function(){return function(n,r){r.prototype.isSameOrBefore=function(a,s){return this.isSame(a,s)||this.isBefore(a,s)}}})})(EN);var tge=EN.exports;const nge=fa(tge),nb=Symbol(),rge=Re({...eb,type:{type:Q(String),default:"date"}}),age=["date","dates","year","month","week","range"],rb=Re({disabledDate:{type:Q(Function)},date:{type:Q(Object),required:!0},minDate:{type:Q(Object)},maxDate:{type:Q(Object)},parsedValue:{type:Q([Object,Array])},rangeState:{type:Q(Object),default:()=>({endDate:null,selecting:!1})}}),kN=Re({type:{type:Q(String),required:!0,values:Nre},dateFormat:String,timeFormat:String}),ON=Re({unlinkPanels:Boolean,parsedValue:{type:Q(Array)}}),MN=t=>({type:String,values:age,default:t}),sge=Re({...kN,parsedValue:{type:Q([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),oge=Re({...rb,cellClassName:{type:Q(Function)},showWeekNumber:Boolean,selectionMode:MN("date")}),ige=["changerange","pick","select"],jm=t=>{if(!Be(t))return!1;const[e,n]=t;return it.isDayjs(e)&&it.isDayjs(n)&&e.isSameOrBefore(n)},RN=(t,{lang:e,unit:n,unlinkPanels:r})=>{let a;if(Be(t)){let[s,o]=t.map(i=>it(i).locale(e));return r||(o=s.add(1,n)),[s,o]}else t?a=it(t):a=it();return a=a.locale(e),[a,a.add(1,n)]},lge=(t,e,{columnIndexOffset:n,startDate:r,nextEndDate:a,now:s,unit:o,relativeDateGetter:i,setCellMetadata:l,setRowMetadata:c})=>{for(let u=0;u<t.row;u++){const f=e[u];for(let d=0;d<t.column;d++){let p=f[d+n];p||(p={row:u,column:d,type:"normal",inRange:!1,start:!1,end:!1});const h=u*t.column+d,g=i(h);p.dayjs=g,p.date=g.toDate(),p.timestamp=g.valueOf(),p.type="normal",p.inRange=!!(r&&g.isSameOrAfter(r,o)&&a&&g.isSameOrBefore(a,o))||!!(r&&g.isSameOrBefore(r,o)&&a&&g.isSameOrAfter(a,o)),r!=null&&r.isSameOrAfter(a)?(p.start=!!a&&g.isSame(a,o),p.end=r&&g.isSame(r,o)):(p.start=!!r&&g.isSame(r,o),p.end=!!a&&g.isSame(a,o)),g.isSame(s,o)&&(p.type="today"),l==null||l(p,{rowIndex:u,columnIndex:d}),f[d+n]=p}c==null||c(f)}},Ym=(t="")=>["normal","today"].includes(t),cge=(t,e)=>{const{lang:n}=Mt(),r=P(),a=P(),s=P(),o=P(),i=P([[],[],[],[],[],[]]);let l=!1;const c=t.date.$locale().weekStart||7,u=t.date.locale("en").localeData().weekdaysShort().map(_=>_.toLowerCase()),f=R(()=>c>3?7-c:-c),d=R(()=>{const _=t.date.startOf("month");return _.subtract(_.day()||7,"day")}),p=R(()=>u.concat(u).slice(c,c+7)),h=R(()=>ID(v(S)).some(_=>_.isCurrent)),g=R(()=>{const _=t.date.startOf("month"),L=_.day()||7,G=_.daysInMonth(),K=_.subtract(1,"month").daysInMonth();return{startOfMonthDay:L,dateCountOfMonth:G,dateCountOfLastMonth:K}}),y=R(()=>t.selectionMode==="dates"?ro(t.parsedValue):[]),m=(_,{count:L,rowIndex:G,columnIndex:K})=>{const{startOfMonthDay:Y,dateCountOfMonth:te,dateCountOfLastMonth:ve}=v(g),se=v(f);if(G>=0&&G<=1){const ie=Y+se<0?7+Y+se:Y+se;if(K+G*7>=ie)return _.text=L,!0;_.text=ve-(ie-K%7)+1+G*7,_.type="prev-month"}else return L<=te?_.text=L:(_.text=L-te,_.type="next-month"),!0;return!1},b=(_,{columnIndex:L,rowIndex:G},K)=>{const{disabledDate:Y,cellClassName:te}=t,ve=v(y),se=m(_,{count:K,rowIndex:G,columnIndex:L}),ie=_.dayjs.toDate();return _.selected=ve.find(re=>re.valueOf()===_.dayjs.valueOf()),_.isSelected=!!_.selected,_.isCurrent=w(_),_.disabled=Y==null?void 0:Y(ie),_.customClass=te==null?void 0:te(ie),se},C=_=>{if(t.selectionMode==="week"){const[L,G]=t.showWeekNumber?[1,7]:[0,6],K=W(_[L+1]);_[L].inRange=K,_[L].start=K,_[G].inRange=K,_[G].end=K}},S=R(()=>{const{minDate:_,maxDate:L,rangeState:G,showWeekNumber:K}=t,Y=v(f),te=v(i),ve="day";let se=1;if(K)for(let ie=0;ie<6;ie++)te[ie][0]||(te[ie][0]={type:"week",text:v(d).add(ie*7+1,ve).week()});return lge({row:6,column:7},te,{startDate:_,columnIndexOffset:K?1:0,nextEndDate:G.endDate||L||G.selecting&&_||null,now:it().locale(v(n)).startOf(ve),unit:ve,relativeDateGetter:ie=>v(d).add(ie-Y,ve),setCellMetadata:(...ie)=>{b(...ie,se)&&(se+=1)},setRowMetadata:C}),te});pe(()=>t.date,async()=>{var _;(_=v(r))!=null&&_.contains(document.activeElement)&&(await Ye(),await T())});const T=async()=>{var _;return(_=v(a))==null?void 0:_.focus()},w=_=>t.selectionMode==="date"&&Ym(_.type)&&x(_,t.parsedValue),x=(_,L)=>L?it(L).locale(v(n)).isSame(t.date.date(Number(_.text)),"day"):!1,E=(_,L)=>{const G=_*7+(L-(t.showWeekNumber?1:0))-v(f);return v(d).add(G,"day")},O=_=>{var L;if(!t.rangeState.selecting)return;let G=_.target;if(G.tagName==="SPAN"&&(G=(L=G.parentNode)==null?void 0:L.parentNode),G.tagName==="DIV"&&(G=G.parentNode),G.tagName!=="TD")return;const K=G.parentNode.rowIndex-1,Y=G.cellIndex;v(S)[K][Y].disabled||(K!==v(s)||Y!==v(o))&&(s.value=K,o.value=Y,e("changerange",{selecting:!0,endDate:E(K,Y)}))},k=_=>!v(h)&&(_==null?void 0:_.text)===1&&_.type==="normal"||_.isCurrent,M=_=>{l||v(h)||t.selectionMode!=="date"||N(_,!0)},D=_=>{_.target.closest("td")&&(l=!0)},I=_=>{_.target.closest("td")&&(l=!1)},B=_=>{!t.rangeState.selecting||!t.minDate?(e("pick",{minDate:_,maxDate:null}),e("select",!0)):(_>=t.minDate?e("pick",{minDate:t.minDate,maxDate:_}):e("pick",{minDate:_,maxDate:t.minDate}),e("select",!1))},F=_=>{const L=_.week(),G=`${_.year()}w${L}`;e("pick",{year:_.year(),week:L,value:G,date:_.startOf("week")})},$=(_,L)=>{const G=L?ro(t.parsedValue).filter(K=>(K==null?void 0:K.valueOf())!==_.valueOf()):ro(t.parsedValue).concat([_]);e("pick",G)},N=(_,L=!1)=>{const G=_.target.closest("td");if(!G)return;const K=G.parentNode.rowIndex-1,Y=G.cellIndex,te=v(S)[K][Y];if(te.disabled||te.type==="week")return;const ve=E(K,Y);switch(t.selectionMode){case"range":{B(ve);break}case"date":{e("pick",ve,L);break}case"week":{F(ve);break}case"dates":{$(ve,!!te.selected);break}}},W=_=>{if(t.selectionMode!=="week")return!1;let L=t.date.startOf("day");if(_.type==="prev-month"&&(L=L.subtract(1,"month")),_.type==="next-month"&&(L=L.add(1,"month")),L=L.date(Number.parseInt(_.text,10)),t.parsedValue&&!Array.isArray(t.parsedValue)){const G=(t.parsedValue.day()-c+7)%7-1;return t.parsedValue.subtract(G,"day").isSame(L,"day")}return!1};return{WEEKS:p,rows:S,tbodyRef:r,currentCellRef:a,focus:T,isCurrent:w,isWeekActive:W,isSelectedCell:k,handlePickDate:N,handleMouseUp:I,handleMouseDown:D,handleMouseMove:O,handleFocus:M}},uge=(t,{isCurrent:e,isWeekActive:n})=>{const r=Ce("date-table"),{t:a}=Mt(),s=R(()=>[r.b(),{"is-week-mode":t.selectionMode==="week"}]),o=R(()=>a("el.datepicker.dateTablePrompt")),i=R(()=>a("el.datepicker.week"));return{tableKls:s,tableLabel:o,weekLabel:i,getCellClasses:u=>{const f=[];return Ym(u.type)&&!u.disabled?(f.push("available"),u.type==="today"&&f.push("today")):f.push(u.type),e(u)&&f.push("current"),u.inRange&&(Ym(u.type)||t.selectionMode==="week")&&(f.push("in-range"),u.start&&f.push("start-date"),u.end&&f.push("end-date")),u.disabled&&f.push("disabled"),u.selected&&f.push("selected"),u.customClass&&f.push(u.customClass),f.join(" ")},getRowKls:u=>[r.e("row"),{current:n(u)}],t:a}},fge=Re({cell:{type:Q(Object)}});var dge=q({name:"ElDatePickerCell",props:fge,setup(t){const e=Ce("date-table-cell"),{slots:n}=We(nb);return()=>{const{cell:r}=t;return ce(n,"default",{...r},()=>[j("div",{class:e.b()},[j("span",{class:e.e("text")},[r==null?void 0:r.text])])])}}});const pge=["aria-label"],gge={key:0,scope:"col"},hge=["aria-label"],vge=["aria-current","aria-selected","tabindex"],yge=q({__name:"basic-date-table",props:oge,emits:ige,setup(t,{expose:e,emit:n}){const r=t,{WEEKS:a,rows:s,tbodyRef:o,currentCellRef:i,focus:l,isCurrent:c,isWeekActive:u,isSelectedCell:f,handlePickDate:d,handleMouseUp:p,handleMouseDown:h,handleMouseMove:g,handleFocus:y}=cge(r,n),{tableLabel:m,tableKls:b,weekLabel:C,getCellClasses:S,getRowKls:T,t:w}=uge(r,{isCurrent:c,isWeekActive:u});return e({focus:l}),(x,E)=>(V(),z("table",{"aria-label":v(m),class:U(v(b)),cellspacing:"0",cellpadding:"0",role:"grid",onClick:E[1]||(E[1]=(...O)=>v(d)&&v(d)(...O)),onMousemove:E[2]||(E[2]=(...O)=>v(g)&&v(g)(...O)),onMousedown:E[3]||(E[3]=Ze((...O)=>v(h)&&v(h)(...O),["prevent"])),onMouseup:E[4]||(E[4]=(...O)=>v(p)&&v(p)(...O))},[H("tbody",{ref_key:"tbodyRef",ref:o},[H("tr",null,[x.showWeekNumber?(V(),z("th",gge,Te(v(C)),1)):ee("v-if",!0),(V(!0),z(Ue,null,gt(v(a),(O,k)=>(V(),z("th",{key:k,"aria-label":v(w)("el.datepicker.weeksFull."+O),scope:"col"},Te(v(w)("el.datepicker.weeks."+O)),9,hge))),128))]),(V(!0),z(Ue,null,gt(v(s),(O,k)=>(V(),z("tr",{key:k,class:U(v(T)(O[1]))},[(V(!0),z(Ue,null,gt(O,(M,D)=>(V(),z("td",{key:`${k}.${D}`,ref_for:!0,ref:I=>v(f)(M)&&(i.value=I),class:U(v(S)(M)),"aria-current":M.isCurrent?"date":void 0,"aria-selected":M.isCurrent,tabindex:v(f)(M)?0:-1,onFocus:E[0]||(E[0]=(...I)=>v(y)&&v(y)(...I))},[j(v(dge),{cell:M},null,8,["cell"])],42,vge))),128))],2))),128))],512)],42,pge))}});var qm=Ve(yge,[["__file","basic-date-table.vue"]]);const mge=Re({...rb,selectionMode:MN("month")}),Cge=["aria-label"],Sge=["aria-selected","aria-label","tabindex","onKeydown"],bge={class:"cell"},wge=q({__name:"basic-month-table",props:mge,emits:["changerange","pick","select"],setup(t,{expose:e,emit:n}){const r=t,a=(S,T,w)=>{const x=it().locale(w).startOf("month").month(T).year(S),E=x.daysInMonth();return ai(E).map(O=>x.add(O,"day").toDate())},s=Ce("month-table"),{t:o,lang:i}=Mt(),l=P(),c=P(),u=P(r.date.locale("en").localeData().monthsShort().map(S=>S.toLowerCase())),f=P([[],[],[]]),d=P(),p=P(),h=R(()=>{var S,T;const w=f.value,x=it().locale(i.value).startOf("month");for(let E=0;E<3;E++){const O=w[E];for(let k=0;k<4;k++){const M=O[k]||(O[k]={row:E,column:k,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});M.type="normal";const D=E*4+k,I=r.date.startOf("year").month(D),B=r.rangeState.endDate||r.maxDate||r.rangeState.selecting&&r.minDate||null;M.inRange=!!(r.minDate&&I.isSameOrAfter(r.minDate,"month")&&B&&I.isSameOrBefore(B,"month"))||!!(r.minDate&&I.isSameOrBefore(r.minDate,"month")&&B&&I.isSameOrAfter(B,"month")),(S=r.minDate)!=null&&S.isSameOrAfter(B)?(M.start=!!(B&&I.isSame(B,"month")),M.end=r.minDate&&I.isSame(r.minDate,"month")):(M.start=!!(r.minDate&&I.isSame(r.minDate,"month")),M.end=!!(B&&I.isSame(B,"month"))),x.isSame(I)&&(M.type="today"),M.text=D,M.disabled=((T=r.disabledDate)==null?void 0:T.call(r,I.toDate()))||!1}}return w}),g=()=>{var S;(S=c.value)==null||S.focus()},y=S=>{const T={},w=r.date.year(),x=new Date,E=S.text;return T.disabled=r.disabledDate?a(w,E,i.value).every(r.disabledDate):!1,T.current=ro(r.parsedValue).findIndex(O=>it.isDayjs(O)&&O.year()===w&&O.month()===E)>=0,T.today=x.getFullYear()===w&&x.getMonth()===E,S.inRange&&(T["in-range"]=!0,S.start&&(T["start-date"]=!0),S.end&&(T["end-date"]=!0)),T},m=S=>{const T=r.date.year(),w=S.text;return ro(r.date).findIndex(x=>x.year()===T&&x.month()===w)>=0},b=S=>{var T;if(!r.rangeState.selecting)return;let w=S.target;if(w.tagName==="SPAN"&&(w=(T=w.parentNode)==null?void 0:T.parentNode),w.tagName==="DIV"&&(w=w.parentNode),w.tagName!=="TD")return;const x=w.parentNode.rowIndex,E=w.cellIndex;h.value[x][E].disabled||(x!==d.value||E!==p.value)&&(d.value=x,p.value=E,n("changerange",{selecting:!0,endDate:r.date.startOf("year").month(x*4+E)}))},C=S=>{var T;const w=(T=S.target)==null?void 0:T.closest("td");if((w==null?void 0:w.tagName)!=="TD"||rs(w,"disabled"))return;const x=w.cellIndex,O=w.parentNode.rowIndex*4+x,k=r.date.startOf("year").month(O);r.selectionMode==="range"?r.rangeState.selecting?(r.minDate&&k>=r.minDate?n("pick",{minDate:r.minDate,maxDate:k}):n("pick",{minDate:k,maxDate:r.minDate}),n("select",!1)):(n("pick",{minDate:k,maxDate:null}),n("select",!0)):n("pick",O)};return pe(()=>r.date,async()=>{var S,T;(S=l.value)!=null&&S.contains(document.activeElement)&&(await Ye(),(T=c.value)==null||T.focus())}),e({focus:g}),(S,T)=>(V(),z("table",{role:"grid","aria-label":v(o)("el.datepicker.monthTablePrompt"),class:U(v(s).b()),onClick:C,onMousemove:b},[H("tbody",{ref_key:"tbodyRef",ref:l},[(V(!0),z(Ue,null,gt(v(h),(w,x)=>(V(),z("tr",{key:x},[(V(!0),z(Ue,null,gt(w,(E,O)=>(V(),z("td",{key:O,ref_for:!0,ref:k=>m(E)&&(c.value=k),class:U(y(E)),"aria-selected":`${m(E)}`,"aria-label":v(o)(`el.datepicker.month${+E.text+1}`),tabindex:m(E)?0:-1,onKeydown:[Xt(Ze(C,["prevent","stop"]),["space"]),Xt(Ze(C,["prevent","stop"]),["enter"])]},[H("div",null,[H("span",bge,Te(v(o)("el.datepicker.months."+u.value[E.text])),1)])],42,Sge))),128))]))),128))],512)],42,Cge))}});var Xm=Ve(wge,[["__file","basic-month-table.vue"]]);const{date:Tge,disabledDate:xge,parsedValue:Ege}=rb,kge=Re({date:Tge,disabledDate:xge,parsedValue:Ege}),Oge=["aria-label"],Mge=["aria-selected","tabindex","onKeydown"],Rge={class:"cell"},_ge={key:1},Vge=q({__name:"basic-year-table",props:kge,emits:["pick"],setup(t,{expose:e,emit:n}){const r=t,a=(g,y)=>{const m=it(String(g)).locale(y).startOf("year"),C=m.endOf("year").dayOfYear();return ai(C).map(S=>m.add(S,"day").toDate())},s=Ce("year-table"),{t:o,lang:i}=Mt(),l=P(),c=P(),u=R(()=>Math.floor(r.date.year()/10)*10),f=()=>{var g;(g=c.value)==null||g.focus()},d=g=>{const y={},m=it().locale(i.value);return y.disabled=r.disabledDate?a(g,i.value).every(r.disabledDate):!1,y.current=ro(r.parsedValue).findIndex(b=>b.year()===g)>=0,y.today=m.year()===g,y},p=g=>g===u.value&&r.date.year()<u.value&&r.date.year()>u.value+9||ro(r.date).findIndex(y=>y.year()===g)>=0,h=g=>{const m=g.target.closest("td");if(m&&m.textContent){if(rs(m,"disabled"))return;const b=m.textContent||m.innerText;n("pick",Number(b))}};return pe(()=>r.date,async()=>{var g,y;(g=l.value)!=null&&g.contains(document.activeElement)&&(await Ye(),(y=c.value)==null||y.focus())}),e({focus:f}),(g,y)=>(V(),z("table",{role:"grid","aria-label":v(o)("el.datepicker.yearTablePrompt"),class:U(v(s).b()),onClick:h},[H("tbody",{ref_key:"tbodyRef",ref:l},[(V(),z(Ue,null,gt(3,(m,b)=>H("tr",{key:b},[(V(),z(Ue,null,gt(4,(C,S)=>(V(),z(Ue,{key:b+"_"+S},[b*4+S<10?(V(),z("td",{key:0,ref_for:!0,ref:T=>p(v(u)+b*4+S)&&(c.value=T),class:U(["available",d(v(u)+b*4+S)]),"aria-selected":`${p(v(u)+b*4+S)}`,tabindex:p(v(u)+b*4+S)?0:-1,onKeydown:[Xt(Ze(h,["prevent","stop"]),["space"]),Xt(Ze(h,["prevent","stop"]),["enter"])]},[H("span",Rge,Te(v(u)+b*4+S),1)],42,Mge)):(V(),z("td",_ge))],64))),64))])),64))],512)],10,Oge))}});var Dge=Ve(Vge,[["__file","basic-year-table.vue"]]);const Lge=["onClick"],Nge=["aria-label"],Bge=["aria-label"],Fge=["aria-label"],$ge=["aria-label"],Uge=q({__name:"panel-date-pick",props:sge,emits:["pick","set-picker-option","panel-change"],setup(t,{emit:e}){const n=t,r=(fe,le,oe)=>!0,a=Ce("picker-panel"),s=Ce("date-picker"),o=Nl(),i=rr(),{t:l,lang:c}=Mt(),u=We("EP_PICKER_BASE"),f=We(zv),{shortcuts:d,disabledDate:p,cellClassName:h,defaultTime:g}=u.props,y=tn(u.props,"defaultValue"),m=P(),b=P(it().locale(c.value)),C=P(!1);let S=!1;const T=R(()=>it(g).locale(c.value)),w=R(()=>b.value.month()),x=R(()=>b.value.year()),E=P([]),O=P(null),k=P(null),M=fe=>E.value.length>0?r(fe,E.value,n.format||"HH:mm:ss"):!0,D=fe=>g&&!ne.value&&!C.value&&!S?T.value.year(fe.year()).month(fe.month()).date(fe.date()):se.value?fe.millisecond(0):fe.startOf("day"),I=(fe,...le)=>{if(!fe)e("pick",fe,...le);else if(Be(fe)){const oe=fe.map(D);e("pick",oe,...le)}else e("pick",D(fe),...le);O.value=null,k.value=null,C.value=!1,S=!1},B=async(fe,le)=>{if(L.value==="date"){fe=fe;let oe=n.parsedValue?n.parsedValue.year(fe.year()).month(fe.month()).date(fe.date()):fe;M(oe)||(oe=E.value[0][0].year(fe.year()).month(fe.month()).date(fe.date())),b.value=oe,I(oe,se.value||le),n.type==="datetime"&&(await Ye(),qe())}else L.value==="week"?I(fe.date):L.value==="dates"&&I(fe,!0)},F=fe=>{const le=fe?"add":"subtract";b.value=b.value[le](1,"month"),Ke("month")},$=fe=>{const le=b.value,oe=fe?"add":"subtract";b.value=N.value==="year"?le[oe](10,"year"):le[oe](1,"year"),Ke("year")},N=P("date"),W=R(()=>{const fe=l("el.datepicker.year");if(N.value==="year"){const le=Math.floor(x.value/10)*10;return fe?`${le} ${fe} - ${le+9} ${fe}`:`${le} - ${le+9}`}return`${x.value} ${fe}`}),_=fe=>{const le=Je(fe.value)?fe.value():fe.value;if(le){S=!0,I(it(le).locale(c.value));return}fe.onClick&&fe.onClick({attrs:o,slots:i,emit:e})},L=R(()=>{const{type:fe}=n;return["week","month","year","dates"].includes(fe)?fe:"date"}),G=R(()=>L.value==="date"?N.value:L.value),K=R(()=>!!d.length),Y=async fe=>{b.value=b.value.startOf("month").month(fe),L.value==="month"?I(b.value,!1):(N.value="date",["month","year","date","week"].includes(L.value)&&(I(b.value,!0),await Ye(),qe())),Ke("month")},te=async fe=>{L.value==="year"?(b.value=b.value.startOf("year").year(fe),I(b.value,!1)):(b.value=b.value.year(fe),N.value="month",["month","year","date","week"].includes(L.value)&&(I(b.value,!0),await Ye(),qe())),Ke("year")},ve=async fe=>{N.value=fe,await Ye(),qe()},se=R(()=>n.type==="datetime"||n.type==="datetimerange"),ie=R(()=>se.value||L.value==="dates"),re=R(()=>p?n.parsedValue?Be(n.parsedValue)?p(n.parsedValue[0].toDate()):p(n.parsedValue.toDate()):!0:!1),be=()=>{if(L.value==="dates")I(n.parsedValue);else{let fe=n.parsedValue;if(!fe){const le=it(g).locale(c.value),oe=Ae();fe=le.year(oe.year()).month(oe.month()).date(oe.date())}b.value=fe,I(fe)}},ge=R(()=>p?p(it().locale(c.value).toDate()):!1),Se=()=>{const le=it().locale(c.value).toDate();C.value=!0,(!p||!p(le))&&M(le)&&(b.value=it().locale(c.value),I(b.value))},De=R(()=>n.timeFormat||D3(n.format)),X=R(()=>n.dateFormat||V3(n.format)),ne=R(()=>{if(k.value)return k.value;if(!(!n.parsedValue&&!y.value))return(n.parsedValue||b.value).format(De.value)}),me=R(()=>{if(O.value)return O.value;if(!(!n.parsedValue&&!y.value))return(n.parsedValue||b.value).format(X.value)}),Ee=P(!1),de=()=>{Ee.value=!0},xe=()=>{Ee.value=!1},ke=fe=>({hour:fe.hour(),minute:fe.minute(),second:fe.second(),year:fe.year(),month:fe.month(),date:fe.date()}),ye=(fe,le,oe)=>{const{hour:we,minute:J,second:$e}=ke(fe),nt=n.parsedValue?n.parsedValue.hour(we).minute(J).second($e):fe;b.value=nt,I(b.value,!0),oe||(Ee.value=le)},_e=fe=>{const le=it(fe,De.value).locale(c.value);if(le.isValid()&&M(le)){const{year:oe,month:we,date:J}=ke(b.value);b.value=le.year(oe).month(we).date(J),k.value=null,Ee.value=!1,I(b.value,!0)}},Oe=fe=>{const le=it(fe,X.value).locale(c.value);if(le.isValid()){if(p&&p(le.toDate()))return;const{hour:oe,minute:we,second:J}=ke(b.value);b.value=le.hour(oe).minute(we).second(J),O.value=null,I(b.value,!0)}},Fe=fe=>it.isDayjs(fe)&&fe.isValid()&&(p?!p(fe.toDate()):!0),ze=fe=>L.value==="dates"?fe.map(le=>le.format(n.format)):fe.format(n.format),he=fe=>it(fe,n.format).locale(c.value),Ae=()=>{const fe=it(y.value).locale(c.value);if(!y.value){const le=T.value;return it().hour(le.hour()).minute(le.minute()).second(le.second()).locale(c.value)}return fe},qe=async()=>{var fe;["week","month","year","date"].includes(L.value)&&((fe=m.value)==null||fe.focus(),L.value==="week"&&vt(He.down))},st=fe=>{const{code:le}=fe;[He.up,He.down,He.left,He.right,He.home,He.end,He.pageUp,He.pageDown].includes(le)&&(vt(le),fe.stopPropagation(),fe.preventDefault()),[He.enter,He.space,He.numpadEnter].includes(le)&&O.value===null&&k.value===null&&(fe.preventDefault(),I(b.value,!1))},vt=fe=>{var le;const{up:oe,down:we,left:J,right:$e,home:nt,end:yt,pageUp:On,pageDown:Ln}=He,ls={year:{[oe]:-4,[we]:4,[J]:-1,[$e]:1,offset:(Kt,Cn)=>Kt.setFullYear(Kt.getFullYear()+Cn)},month:{[oe]:-4,[we]:4,[J]:-1,[$e]:1,offset:(Kt,Cn)=>Kt.setMonth(Kt.getMonth()+Cn)},week:{[oe]:-1,[we]:1,[J]:-1,[$e]:1,offset:(Kt,Cn)=>Kt.setDate(Kt.getDate()+Cn*7)},date:{[oe]:-7,[we]:7,[J]:-1,[$e]:1,[nt]:Kt=>-Kt.getDay(),[yt]:Kt=>-Kt.getDay()+6,[On]:Kt=>-new Date(Kt.getFullYear(),Kt.getMonth(),0).getDate(),[Ln]:Kt=>new Date(Kt.getFullYear(),Kt.getMonth()+1,0).getDate(),offset:(Kt,Cn)=>Kt.setDate(Kt.getDate()+Cn)}},vr=b.value.toDate();for(;Math.abs(b.value.diff(vr,"year",!0))<1;){const Kt=ls[G.value];if(!Kt)return;if(Kt.offset(vr,Je(Kt[fe])?Kt[fe](vr):(le=Kt[fe])!=null?le:0),p&&p(vr))break;const Cn=it(vr).locale(c.value);b.value=Cn,e("pick",Cn,!0);break}},Ke=fe=>{e("panel-change",b.value.toDate(),fe,N.value)};return pe(()=>L.value,fe=>{if(["month","year"].includes(fe)){N.value=fe;return}N.value="date"},{immediate:!0}),pe(()=>N.value,()=>{f==null||f.updatePopper()}),pe(()=>y.value,fe=>{fe&&(b.value=Ae())},{immediate:!0}),pe(()=>n.parsedValue,fe=>{if(fe){if(L.value==="dates"||Array.isArray(fe))return;b.value=fe}else b.value=Ae()},{immediate:!0}),e("set-picker-option",["isValidValue",Fe]),e("set-picker-option",["formatToString",ze]),e("set-picker-option",["parseUserInput",he]),e("set-picker-option",["handleFocusPicker",qe]),(fe,le)=>(V(),z("div",{class:U([v(a).b(),v(s).b(),{"has-sidebar":fe.$slots.sidebar||v(K),"has-time":v(se)}])},[H("div",{class:U(v(a).e("body-wrapper"))},[ce(fe.$slots,"sidebar",{class:U(v(a).e("sidebar"))}),v(K)?(V(),z("div",{key:0,class:U(v(a).e("sidebar"))},[(V(!0),z(Ue,null,gt(v(d),(oe,we)=>(V(),z("button",{key:we,type:"button",class:U(v(a).e("shortcut")),onClick:J=>_(oe)},Te(oe.text),11,Lge))),128))],2)):ee("v-if",!0),H("div",{class:U(v(a).e("body"))},[v(se)?(V(),z("div",{key:0,class:U(v(s).e("time-header"))},[H("span",{class:U(v(s).e("editor-wrap"))},[j(v(kr),{placeholder:v(l)("el.datepicker.selectDate"),"model-value":v(me),size:"small","validate-event":!1,onInput:le[0]||(le[0]=oe=>O.value=oe),onChange:Oe},null,8,["placeholder","model-value"])],2),rt((V(),z("span",{class:U(v(s).e("editor-wrap"))},[j(v(kr),{placeholder:v(l)("el.datepicker.selectTime"),"model-value":v(ne),size:"small","validate-event":!1,onFocus:de,onInput:le[1]||(le[1]=oe=>k.value=oe),onChange:_e},null,8,["placeholder","model-value"]),j(v(_h),{visible:Ee.value,format:v(De),"parsed-value":b.value,onPick:ye},null,8,["visible","format","parsed-value"])],2)),[[v(go),xe]])],2)):ee("v-if",!0),rt(H("div",{class:U([v(s).e("header"),(N.value==="year"||N.value==="month")&&v(s).e("header--bordered")])},[H("span",{class:U(v(s).e("prev-btn"))},[H("button",{type:"button","aria-label":v(l)("el.datepicker.prevYear"),class:U(["d-arrow-left",v(a).e("icon-btn")]),onClick:le[2]||(le[2]=oe=>$(!1))},[j(v(Ge),null,{default:Z(()=>[j(v(jc))]),_:1})],10,Nge),rt(H("button",{type:"button","aria-label":v(l)("el.datepicker.prevMonth"),class:U([v(a).e("icon-btn"),"arrow-left"]),onClick:le[3]||(le[3]=oe=>F(!1))},[j(v(Ge),null,{default:Z(()=>[j(v(ui))]),_:1})],10,Bge),[[Rt,N.value==="date"]])],2),H("span",{role:"button",class:U(v(s).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:le[4]||(le[4]=Xt(oe=>ve("year"),["enter"])),onClick:le[5]||(le[5]=oe=>ve("year"))},Te(v(W)),35),rt(H("span",{role:"button","aria-live":"polite",tabindex:"0",class:U([v(s).e("header-label"),{active:N.value==="month"}]),onKeydown:le[6]||(le[6]=Xt(oe=>ve("month"),["enter"])),onClick:le[7]||(le[7]=oe=>ve("month"))},Te(v(l)(`el.datepicker.month${v(w)+1}`)),35),[[Rt,N.value==="date"]]),H("span",{class:U(v(s).e("next-btn"))},[rt(H("button",{type:"button","aria-label":v(l)("el.datepicker.nextMonth"),class:U([v(a).e("icon-btn"),"arrow-right"]),onClick:le[8]||(le[8]=oe=>F(!0))},[j(v(Ge),null,{default:Z(()=>[j(v(Wr))]),_:1})],10,Fge),[[Rt,N.value==="date"]]),H("button",{type:"button","aria-label":v(l)("el.datepicker.nextYear"),class:U([v(a).e("icon-btn"),"d-arrow-right"]),onClick:le[9]||(le[9]=oe=>$(!0))},[j(v(Ge),null,{default:Z(()=>[j(v(Yc))]),_:1})],10,$ge)],2)],2),[[Rt,N.value!=="time"]]),H("div",{class:U(v(a).e("content")),onKeydown:st},[N.value==="date"?(V(),ae(qm,{key:0,ref_key:"currentViewRef",ref:m,"selection-mode":v(L),date:b.value,"parsed-value":fe.parsedValue,"disabled-date":v(p),"cell-class-name":v(h),onPick:B},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):ee("v-if",!0),N.value==="year"?(V(),ae(Dge,{key:1,ref_key:"currentViewRef",ref:m,date:b.value,"disabled-date":v(p),"parsed-value":fe.parsedValue,onPick:te},null,8,["date","disabled-date","parsed-value"])):ee("v-if",!0),N.value==="month"?(V(),ae(Xm,{key:2,ref_key:"currentViewRef",ref:m,date:b.value,"parsed-value":fe.parsedValue,"disabled-date":v(p),onPick:Y},null,8,["date","parsed-value","disabled-date"])):ee("v-if",!0)],34)],2)],2),rt(H("div",{class:U(v(a).e("footer"))},[rt(j(v(ir),{text:"",size:"small",class:U(v(a).e("link-btn")),disabled:v(ge),onClick:Se},{default:Z(()=>[Ct(Te(v(l)("el.datepicker.now")),1)]),_:1},8,["class","disabled"]),[[Rt,v(L)!=="dates"]]),j(v(ir),{plain:"",size:"small",class:U(v(a).e("link-btn")),disabled:v(re),onClick:be},{default:Z(()=>[Ct(Te(v(l)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2),[[Rt,v(ie)&&N.value==="date"]])],2))}});var Age=Ve(Uge,[["__file","panel-date-pick.vue"]]);const Wge=Re({...kN,...ON}),Ige=t=>{const{emit:e}=ot(),n=Nl(),r=rr();return s=>{const o=Je(s.value)?s.value():s.value;if(o){e("pick",[it(o[0]).locale(t.value),it(o[1]).locale(t.value)]);return}s.onClick&&s.onClick({attrs:n,slots:r,emit:e})}},_N=(t,{defaultValue:e,leftDate:n,rightDate:r,unit:a,onParsedValueChanged:s})=>{const{emit:o}=ot(),{pickerNs:i}=We(nb),l=Ce("date-range-picker"),{t:c,lang:u}=Mt(),f=Ige(u),d=P(),p=P(),h=P({endDate:null,selecting:!1}),g=C=>{h.value=C},y=(C=!1)=>{const S=v(d),T=v(p);jm([S,T])&&o("pick",[S,T],C)},m=C=>{h.value.selecting=C,C||(h.value.endDate=null)},b=()=>{const[C,S]=RN(v(e),{lang:v(u),unit:a,unlinkPanels:t.unlinkPanels});d.value=void 0,p.value=void 0,n.value=C,r.value=S};return pe(e,C=>{C&&b()},{immediate:!0}),pe(()=>t.parsedValue,C=>{if(Be(C)&&C.length===2){const[S,T]=C;d.value=S,n.value=S,p.value=T,s(v(d),v(p))}else b()},{immediate:!0}),{minDate:d,maxDate:p,rangeState:h,lang:u,ppNs:i,drpNs:l,handleChangeRange:g,handleRangeConfirm:y,handleShortcutClick:f,onSelect:m,t:c}},Pge=["onClick"],Gge=["aria-label"],zge=["aria-label"],Hge=["disabled","aria-label"],Kge=["disabled","aria-label"],jge=["disabled","aria-label"],Yge=["disabled","aria-label"],qge=["aria-label"],Xge=["aria-label"],Mp="month",Zge=q({__name:"panel-date-range",props:Wge,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(t,{emit:e}){const n=t,r=We("EP_PICKER_BASE"),{disabledDate:a,cellClassName:s,format:o,defaultTime:i,clearable:l}=r.props,c=tn(r.props,"shortcuts"),u=tn(r.props,"defaultValue"),{lang:f}=Mt(),d=P(it().locale(f.value)),p=P(it().locale(f.value).add(1,Mp)),{minDate:h,maxDate:g,rangeState:y,ppNs:m,drpNs:b,handleChangeRange:C,handleRangeConfirm:S,handleShortcutClick:T,onSelect:w,t:x}=_N(n,{defaultValue:u,leftDate:d,rightDate:p,unit:Mp,onParsedValueChanged:le}),E=P({min:null,max:null}),O=P({min:null,max:null}),k=R(()=>`${d.value.year()} ${x("el.datepicker.year")} ${x(`el.datepicker.month${d.value.month()+1}`)}`),M=R(()=>`${p.value.year()} ${x("el.datepicker.year")} ${x(`el.datepicker.month${p.value.month()+1}`)}`),D=R(()=>d.value.year()),I=R(()=>d.value.month()),B=R(()=>p.value.year()),F=R(()=>p.value.month()),$=R(()=>!!c.value.length),N=R(()=>E.value.min!==null?E.value.min:h.value?h.value.format(K.value):""),W=R(()=>E.value.max!==null?E.value.max:g.value||h.value?(g.value||h.value).format(K.value):""),_=R(()=>O.value.min!==null?O.value.min:h.value?h.value.format(G.value):""),L=R(()=>O.value.max!==null?O.value.max:g.value||h.value?(g.value||h.value).format(G.value):""),G=R(()=>n.timeFormat||D3(o)),K=R(()=>n.dateFormat||V3(o)),Y=oe=>jm(oe)&&(a?!a(oe[0].toDate())&&!a(oe[1].toDate()):!0),te=()=>{d.value=d.value.subtract(1,"year"),n.unlinkPanels||(p.value=d.value.add(1,"month")),De("year")},ve=()=>{d.value=d.value.subtract(1,"month"),n.unlinkPanels||(p.value=d.value.add(1,"month")),De("month")},se=()=>{n.unlinkPanels?p.value=p.value.add(1,"year"):(d.value=d.value.add(1,"year"),p.value=d.value.add(1,"month")),De("year")},ie=()=>{n.unlinkPanels?p.value=p.value.add(1,"month"):(d.value=d.value.add(1,"month"),p.value=d.value.add(1,"month")),De("month")},re=()=>{d.value=d.value.add(1,"year"),De("year")},be=()=>{d.value=d.value.add(1,"month"),De("month")},ge=()=>{p.value=p.value.subtract(1,"year"),De("year")},Se=()=>{p.value=p.value.subtract(1,"month"),De("month")},De=oe=>{e("panel-change",[d.value.toDate(),p.value.toDate()],oe)},X=R(()=>{const oe=(I.value+1)%12,we=I.value+1>=12?1:0;return n.unlinkPanels&&new Date(D.value+we,oe)<new Date(B.value,F.value)}),ne=R(()=>n.unlinkPanels&&B.value*12+F.value-(D.value*12+I.value+1)>=12),me=R(()=>!(h.value&&g.value&&!y.value.selecting&&jm([h.value,g.value]))),Ee=R(()=>n.type==="datetime"||n.type==="datetimerange"),de=(oe,we)=>{if(oe)return i?it(i[we]||i).locale(f.value).year(oe.year()).month(oe.month()).date(oe.date()):oe},xe=(oe,we=!0)=>{const J=oe.minDate,$e=oe.maxDate,nt=de(J,0),yt=de($e,1);g.value===yt&&h.value===nt||(e("calendar-change",[J.toDate(),$e&&$e.toDate()]),g.value=yt,h.value=nt,!(!we||Ee.value)&&S())},ke=P(!1),ye=P(!1),_e=()=>{ke.value=!1},Oe=()=>{ye.value=!1},Fe=(oe,we)=>{E.value[we]=oe;const J=it(oe,K.value).locale(f.value);if(J.isValid()){if(a&&a(J.toDate()))return;we==="min"?(d.value=J,h.value=(h.value||d.value).year(J.year()).month(J.month()).date(J.date()),!n.unlinkPanels&&(!g.value||g.value.isBefore(h.value))&&(p.value=J.add(1,"month"),g.value=h.value.add(1,"month"))):(p.value=J,g.value=(g.value||p.value).year(J.year()).month(J.month()).date(J.date()),!n.unlinkPanels&&(!h.value||h.value.isAfter(g.value))&&(d.value=J.subtract(1,"month"),h.value=g.value.subtract(1,"month")))}},ze=(oe,we)=>{E.value[we]=null},he=(oe,we)=>{O.value[we]=oe;const J=it(oe,G.value).locale(f.value);J.isValid()&&(we==="min"?(ke.value=!0,h.value=(h.value||d.value).hour(J.hour()).minute(J.minute()).second(J.second()),(!g.value||g.value.isBefore(h.value))&&(g.value=h.value)):(ye.value=!0,g.value=(g.value||p.value).hour(J.hour()).minute(J.minute()).second(J.second()),p.value=g.value,g.value&&g.value.isBefore(h.value)&&(h.value=g.value)))},Ae=(oe,we)=>{O.value[we]=null,we==="min"?(d.value=h.value,ke.value=!1):(p.value=g.value,ye.value=!1)},qe=(oe,we,J)=>{O.value.min||(oe&&(d.value=oe,h.value=(h.value||d.value).hour(oe.hour()).minute(oe.minute()).second(oe.second())),J||(ke.value=we),(!g.value||g.value.isBefore(h.value))&&(g.value=h.value,p.value=oe))},st=(oe,we,J)=>{O.value.max||(oe&&(p.value=oe,g.value=(g.value||p.value).hour(oe.hour()).minute(oe.minute()).second(oe.second())),J||(ye.value=we),g.value&&g.value.isBefore(h.value)&&(h.value=g.value))},vt=()=>{d.value=RN(v(u),{lang:v(f),unit:"month",unlinkPanels:n.unlinkPanels})[0],p.value=d.value.add(1,"month"),e("pick",null)},Ke=oe=>Be(oe)?oe.map(we=>we.format(o)):oe.format(o),fe=oe=>Be(oe)?oe.map(we=>it(we,o).locale(f.value)):it(oe,o).locale(f.value);function le(oe,we){if(n.unlinkPanels&&we){const J=(oe==null?void 0:oe.year())||0,$e=(oe==null?void 0:oe.month())||0,nt=we.year(),yt=we.month();p.value=J===nt&&$e===yt?we.add(1,Mp):we}else p.value=d.value.add(1,Mp),we&&(p.value=p.value.hour(we.hour()).minute(we.minute()).second(we.second()))}return e("set-picker-option",["isValidValue",Y]),e("set-picker-option",["parseUserInput",fe]),e("set-picker-option",["formatToString",Ke]),e("set-picker-option",["handleClear",vt]),(oe,we)=>(V(),z("div",{class:U([v(m).b(),v(b).b(),{"has-sidebar":oe.$slots.sidebar||v($),"has-time":v(Ee)}])},[H("div",{class:U(v(m).e("body-wrapper"))},[ce(oe.$slots,"sidebar",{class:U(v(m).e("sidebar"))}),v($)?(V(),z("div",{key:0,class:U(v(m).e("sidebar"))},[(V(!0),z(Ue,null,gt(v(c),(J,$e)=>(V(),z("button",{key:$e,type:"button",class:U(v(m).e("shortcut")),onClick:nt=>v(T)(J)},Te(J.text),11,Pge))),128))],2)):ee("v-if",!0),H("div",{class:U(v(m).e("body"))},[v(Ee)?(V(),z("div",{key:0,class:U(v(b).e("time-header"))},[H("span",{class:U(v(b).e("editors-wrap"))},[H("span",{class:U(v(b).e("time-picker-wrap"))},[j(v(kr),{size:"small",disabled:v(y).selecting,placeholder:v(x)("el.datepicker.startDate"),class:U(v(b).e("editor")),"model-value":v(N),"validate-event":!1,onInput:we[0]||(we[0]=J=>Fe(J,"min")),onChange:we[1]||(we[1]=J=>ze(J,"min"))},null,8,["disabled","placeholder","class","model-value"])],2),rt((V(),z("span",{class:U(v(b).e("time-picker-wrap"))},[j(v(kr),{size:"small",class:U(v(b).e("editor")),disabled:v(y).selecting,placeholder:v(x)("el.datepicker.startTime"),"model-value":v(_),"validate-event":!1,onFocus:we[2]||(we[2]=J=>ke.value=!0),onInput:we[3]||(we[3]=J=>he(J,"min")),onChange:we[4]||(we[4]=J=>Ae(J,"min"))},null,8,["class","disabled","placeholder","model-value"]),j(v(_h),{visible:ke.value,format:v(G),"datetime-role":"start","parsed-value":d.value,onPick:qe},null,8,["visible","format","parsed-value"])],2)),[[v(go),_e]])],2),H("span",null,[j(v(Ge),null,{default:Z(()=>[j(v(Wr))]),_:1})]),H("span",{class:U([v(b).e("editors-wrap"),"is-right"])},[H("span",{class:U(v(b).e("time-picker-wrap"))},[j(v(kr),{size:"small",class:U(v(b).e("editor")),disabled:v(y).selecting,placeholder:v(x)("el.datepicker.endDate"),"model-value":v(W),readonly:!v(h),"validate-event":!1,onInput:we[5]||(we[5]=J=>Fe(J,"max")),onChange:we[6]||(we[6]=J=>ze(J,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"])],2),rt((V(),z("span",{class:U(v(b).e("time-picker-wrap"))},[j(v(kr),{size:"small",class:U(v(b).e("editor")),disabled:v(y).selecting,placeholder:v(x)("el.datepicker.endTime"),"model-value":v(L),readonly:!v(h),"validate-event":!1,onFocus:we[7]||(we[7]=J=>v(h)&&(ye.value=!0)),onInput:we[8]||(we[8]=J=>he(J,"max")),onChange:we[9]||(we[9]=J=>Ae(J,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"]),j(v(_h),{"datetime-role":"end",visible:ye.value,format:v(G),"parsed-value":p.value,onPick:st},null,8,["visible","format","parsed-value"])],2)),[[v(go),Oe]])],2)],2)):ee("v-if",!0),H("div",{class:U([[v(m).e("content"),v(b).e("content")],"is-left"])},[H("div",{class:U(v(b).e("header"))},[H("button",{type:"button",class:U([v(m).e("icon-btn"),"d-arrow-left"]),"aria-label":v(x)("el.datepicker.prevYear"),onClick:te},[j(v(Ge),null,{default:Z(()=>[j(v(jc))]),_:1})],10,Gge),H("button",{type:"button",class:U([v(m).e("icon-btn"),"arrow-left"]),"aria-label":v(x)("el.datepicker.prevMonth"),onClick:ve},[j(v(Ge),null,{default:Z(()=>[j(v(ui))]),_:1})],10,zge),oe.unlinkPanels?(V(),z("button",{key:0,type:"button",disabled:!v(ne),class:U([[v(m).e("icon-btn"),{"is-disabled":!v(ne)}],"d-arrow-right"]),"aria-label":v(x)("el.datepicker.nextYear"),onClick:re},[j(v(Ge),null,{default:Z(()=>[j(v(Yc))]),_:1})],10,Hge)):ee("v-if",!0),oe.unlinkPanels?(V(),z("button",{key:1,type:"button",disabled:!v(X),class:U([[v(m).e("icon-btn"),{"is-disabled":!v(X)}],"arrow-right"]),"aria-label":v(x)("el.datepicker.nextMonth"),onClick:be},[j(v(Ge),null,{default:Z(()=>[j(v(Wr))]),_:1})],10,Kge)):ee("v-if",!0),H("div",null,Te(v(k)),1)],2),j(qm,{"selection-mode":"range",date:d.value,"min-date":v(h),"max-date":v(g),"range-state":v(y),"disabled-date":v(a),"cell-class-name":v(s),onChangerange:v(C),onPick:xe,onSelect:v(w)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2),H("div",{class:U([[v(m).e("content"),v(b).e("content")],"is-right"])},[H("div",{class:U(v(b).e("header"))},[oe.unlinkPanels?(V(),z("button",{key:0,type:"button",disabled:!v(ne),class:U([[v(m).e("icon-btn"),{"is-disabled":!v(ne)}],"d-arrow-left"]),"aria-label":v(x)("el.datepicker.prevYear"),onClick:ge},[j(v(Ge),null,{default:Z(()=>[j(v(jc))]),_:1})],10,jge)):ee("v-if",!0),oe.unlinkPanels?(V(),z("button",{key:1,type:"button",disabled:!v(X),class:U([[v(m).e("icon-btn"),{"is-disabled":!v(X)}],"arrow-left"]),"aria-label":v(x)("el.datepicker.prevMonth"),onClick:Se},[j(v(Ge),null,{default:Z(()=>[j(v(ui))]),_:1})],10,Yge)):ee("v-if",!0),H("button",{type:"button","aria-label":v(x)("el.datepicker.nextYear"),class:U([v(m).e("icon-btn"),"d-arrow-right"]),onClick:se},[j(v(Ge),null,{default:Z(()=>[j(v(Yc))]),_:1})],10,qge),H("button",{type:"button",class:U([v(m).e("icon-btn"),"arrow-right"]),"aria-label":v(x)("el.datepicker.nextMonth"),onClick:ie},[j(v(Ge),null,{default:Z(()=>[j(v(Wr))]),_:1})],10,Xge),H("div",null,Te(v(M)),1)],2),j(qm,{"selection-mode":"range",date:p.value,"min-date":v(h),"max-date":v(g),"range-state":v(y),"disabled-date":v(a),"cell-class-name":v(s),onChangerange:v(C),onPick:xe,onSelect:v(w)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2)],2)],2),v(Ee)?(V(),z("div",{key:0,class:U(v(m).e("footer"))},[v(l)?(V(),ae(v(ir),{key:0,text:"",size:"small",class:U(v(m).e("link-btn")),onClick:vt},{default:Z(()=>[Ct(Te(v(x)("el.datepicker.clear")),1)]),_:1},8,["class"])):ee("v-if",!0),j(v(ir),{plain:"",size:"small",class:U(v(m).e("link-btn")),disabled:v(me),onClick:we[10]||(we[10]=J=>v(S)(!1))},{default:Z(()=>[Ct(Te(v(x)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2)):ee("v-if",!0)],2))}});var Jge=Ve(Zge,[["__file","panel-date-range.vue"]]);const Qge=Re({...ON}),ehe=["pick","set-picker-option","calendar-change"],the=({unlinkPanels:t,leftDate:e,rightDate:n})=>{const{t:r}=Mt(),a=()=>{e.value=e.value.subtract(1,"year"),t.value||(n.value=n.value.subtract(1,"year"))},s=()=>{t.value||(e.value=e.value.add(1,"year")),n.value=n.value.add(1,"year")},o=()=>{e.value=e.value.add(1,"year")},i=()=>{n.value=n.value.subtract(1,"year")},l=R(()=>`${e.value.year()} ${r("el.datepicker.year")}`),c=R(()=>`${n.value.year()} ${r("el.datepicker.year")}`),u=R(()=>e.value.year()),f=R(()=>n.value.year()===e.value.year()?e.value.year()+1:n.value.year());return{leftPrevYear:a,rightNextYear:s,leftNextYear:o,rightPrevYear:i,leftLabel:l,rightLabel:c,leftYear:u,rightYear:f}},nhe=["onClick"],rhe=["disabled"],ahe=["disabled"],Rp="year",she=q({name:"DatePickerMonthRange"}),ohe=q({...she,props:Qge,emits:ehe,setup(t,{emit:e}){const n=t,{lang:r}=Mt(),a=We("EP_PICKER_BASE"),{shortcuts:s,disabledDate:o,format:i}=a.props,l=tn(a.props,"defaultValue"),c=P(it().locale(r.value)),u=P(it().locale(r.value).add(1,Rp)),{minDate:f,maxDate:d,rangeState:p,ppNs:h,drpNs:g,handleChangeRange:y,handleRangeConfirm:m,handleShortcutClick:b,onSelect:C}=_N(n,{defaultValue:l,leftDate:c,rightDate:u,unit:Rp,onParsedValueChanged:$}),S=R(()=>!!s.length),{leftPrevYear:T,rightNextYear:w,leftNextYear:x,rightPrevYear:E,leftLabel:O,rightLabel:k,leftYear:M,rightYear:D}=the({unlinkPanels:tn(n,"unlinkPanels"),leftDate:c,rightDate:u}),I=R(()=>n.unlinkPanels&&D.value>M.value+1),B=(N,W=!0)=>{const _=N.minDate,L=N.maxDate;d.value===L&&f.value===_||(e("calendar-change",[_.toDate(),L&&L.toDate()]),d.value=L,f.value=_,W&&m())},F=N=>N.map(W=>W.format(i));function $(N,W){if(n.unlinkPanels&&W){const _=(N==null?void 0:N.year())||0,L=W.year();u.value=_===L?W.add(1,Rp):W}else u.value=c.value.add(1,Rp)}return e("set-picker-option",["formatToString",F]),(N,W)=>(V(),z("div",{class:U([v(h).b(),v(g).b(),{"has-sidebar":!!N.$slots.sidebar||v(S)}])},[H("div",{class:U(v(h).e("body-wrapper"))},[ce(N.$slots,"sidebar",{class:U(v(h).e("sidebar"))}),v(S)?(V(),z("div",{key:0,class:U(v(h).e("sidebar"))},[(V(!0),z(Ue,null,gt(v(s),(_,L)=>(V(),z("button",{key:L,type:"button",class:U(v(h).e("shortcut")),onClick:G=>v(b)(_)},Te(_.text),11,nhe))),128))],2)):ee("v-if",!0),H("div",{class:U(v(h).e("body"))},[H("div",{class:U([[v(h).e("content"),v(g).e("content")],"is-left"])},[H("div",{class:U(v(g).e("header"))},[H("button",{type:"button",class:U([v(h).e("icon-btn"),"d-arrow-left"]),onClick:W[0]||(W[0]=(..._)=>v(T)&&v(T)(..._))},[j(v(Ge),null,{default:Z(()=>[j(v(jc))]),_:1})],2),N.unlinkPanels?(V(),z("button",{key:0,type:"button",disabled:!v(I),class:U([[v(h).e("icon-btn"),{[v(h).is("disabled")]:!v(I)}],"d-arrow-right"]),onClick:W[1]||(W[1]=(..._)=>v(x)&&v(x)(..._))},[j(v(Ge),null,{default:Z(()=>[j(v(Yc))]),_:1})],10,rhe)):ee("v-if",!0),H("div",null,Te(v(O)),1)],2),j(Xm,{"selection-mode":"range",date:c.value,"min-date":v(f),"max-date":v(d),"range-state":v(p),"disabled-date":v(o),onChangerange:v(y),onPick:B,onSelect:v(C)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),H("div",{class:U([[v(h).e("content"),v(g).e("content")],"is-right"])},[H("div",{class:U(v(g).e("header"))},[N.unlinkPanels?(V(),z("button",{key:0,type:"button",disabled:!v(I),class:U([[v(h).e("icon-btn"),{"is-disabled":!v(I)}],"d-arrow-left"]),onClick:W[2]||(W[2]=(..._)=>v(E)&&v(E)(..._))},[j(v(Ge),null,{default:Z(()=>[j(v(jc))]),_:1})],10,ahe)):ee("v-if",!0),H("button",{type:"button",class:U([v(h).e("icon-btn"),"d-arrow-right"]),onClick:W[3]||(W[3]=(..._)=>v(w)&&v(w)(..._))},[j(v(Ge),null,{default:Z(()=>[j(v(Yc))]),_:1})],2),H("div",null,Te(v(k)),1)],2),j(Xm,{"selection-mode":"range",date:u.value,"min-date":v(f),"max-date":v(d),"range-state":v(p),"disabled-date":v(o),onChangerange:v(y),onPick:B,onSelect:v(C)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var ihe=Ve(ohe,[["__file","panel-month-range.vue"]]);const lhe=function(t){switch(t){case"daterange":case"datetimerange":return Jge;case"monthrange":return ihe;default:return Age}};it.extend(Y3);it.extend(Kpe);it.extend(QS);it.extend(Ype);it.extend(Xpe);it.extend(Jpe);it.extend(ege);it.extend(nge);var che=q({name:"ElDatePicker",install:null,props:rge,emits:["update:modelValue"],setup(t,{expose:e,emit:n,slots:r}){const a=Ce("picker-panel");bt("ElPopperOptions",Dt(tn(t,"popperOptions"))),bt(nb,{slots:r,pickerNs:a});const s=P();e({focus:(l=!0)=>{var c;(c=s.value)==null||c.focus(l)},handleOpen:()=>{var l;(l=s.value)==null||l.handleOpen()},handleClose:()=>{var l;(l=s.value)==null||l.handleClose()}});const i=l=>{n("update:modelValue",l)};return()=>{var l;const c=(l=t.format)!=null?l:Ace[t.type]||ic,u=lhe(t.type);return j(B3,ft(t,{format:c,type:t.type,ref:s,"onUpdate:modelValue":i}),{default:f=>j(u,f,null),"range-separator":r["range-separator"]})}}});const bg=che;bg.install=t=>{t.component(bg.name,bg)};const uhe=bg,ab=Symbol("elDescriptions");var _u=q({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String,default:"td"},type:{type:String}},setup(){return{descriptions:We(ab,{})}},render(){var t,e,n,r,a,s,o;const i=$re(this.cell),l=(((t=this.cell)==null?void 0:t.dirs)||[]).map(T=>{const{dir:w,arg:x,modifiers:E,value:O}=T;return[w,O,x,E]}),{border:c,direction:u}=this.descriptions,f=u==="vertical",d=((r=(n=(e=this.cell)==null?void 0:e.children)==null?void 0:n.label)==null?void 0:r.call(n))||i.label,p=(o=(s=(a=this.cell)==null?void 0:a.children)==null?void 0:s.default)==null?void 0:o.call(s),h=i.span,g=i.align?`is-${i.align}`:"",y=i.labelAlign?`is-${i.labelAlign}`:g,m=i.className,b=i.labelClassName,C={width:Bn(i.width),minWidth:Bn(i.minWidth)},S=Ce("descriptions");switch(this.type){case"label":return rt(je(this.tag,{style:C,class:[S.e("cell"),S.e("label"),S.is("bordered-label",c),S.is("vertical-label",f),y,b],colSpan:f?h:1},d),l);case"content":return rt(je(this.tag,{style:C,class:[S.e("cell"),S.e("content"),S.is("bordered-content",c),S.is("vertical-content",f),g,m],colSpan:f?h:h*2-1},p),l);default:return rt(je("td",{style:C,class:[S.e("cell"),g],colSpan:h},[er(d)?void 0:je("span",{class:[S.e("label"),b]},d),je("span",{class:[S.e("content"),m]},p)]),l)}}});const fhe=Re({row:{type:Q(Array),default:()=>[]}}),dhe={key:1},phe=q({name:"ElDescriptionsRow"}),ghe=q({...phe,props:fhe,setup(t){const e=We(ab,{});return(n,r)=>v(e).direction==="vertical"?(V(),z(Ue,{key:0},[H("tr",null,[(V(!0),z(Ue,null,gt(n.row,(a,s)=>(V(),ae(v(_u),{key:`tr1-${s}`,cell:a,tag:"th",type:"label"},null,8,["cell"]))),128))]),H("tr",null,[(V(!0),z(Ue,null,gt(n.row,(a,s)=>(V(),ae(v(_u),{key:`tr2-${s}`,cell:a,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(V(),z("tr",dhe,[(V(!0),z(Ue,null,gt(n.row,(a,s)=>(V(),z(Ue,{key:`tr3-${s}`},[v(e).border?(V(),z(Ue,{key:0},[j(v(_u),{cell:a,tag:"td",type:"label"},null,8,["cell"]),j(v(_u),{cell:a,tag:"td",type:"content"},null,8,["cell"])],64)):(V(),ae(v(_u),{key:1,cell:a,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var hhe=Ve(ghe,[["__file","descriptions-row.vue"]]);const vhe=Re({border:{type:Boolean,default:!1},column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:lr,title:{type:String,default:""},extra:{type:String,default:""}}),yhe=q({name:"ElDescriptions"}),mhe=q({...yhe,props:vhe,setup(t){const e=t,n=Ce("descriptions"),r=qn(),a=rr();bt(ab,e);const s=R(()=>[n.b(),n.m(r.value)]),o=(l,c,u,f=!1)=>(l.props||(l.props={}),c>u&&(l.props.span=u),f&&(l.props.span=c),l),i=()=>{if(!a.default)return[];const l=ri(a.default()).filter(p=>{var h;return((h=p==null?void 0:p.type)==null?void 0:h.name)==="ElDescriptionsItem"}),c=[];let u=[],f=e.column,d=0;return l.forEach((p,h)=>{var g;const y=((g=p.props)==null?void 0:g.span)||1;if(h<l.length-1&&(d+=y>f?f:y),h===l.length-1){const m=e.column-d%e.column;u.push(o(p,m,f,!0)),c.push(u);return}y<f?(f-=y,u.push(p)):(u.push(o(p,y,f)),c.push(u),f=e.column,u=[])}),c};return(l,c)=>(V(),z("div",{class:U(v(s))},[l.title||l.extra||l.$slots.title||l.$slots.extra?(V(),z("div",{key:0,class:U(v(n).e("header"))},[H("div",{class:U(v(n).e("title"))},[ce(l.$slots,"title",{},()=>[Ct(Te(l.title),1)])],2),H("div",{class:U(v(n).e("extra"))},[ce(l.$slots,"extra",{},()=>[Ct(Te(l.extra),1)])],2)],2)):ee("v-if",!0),H("div",{class:U(v(n).e("body"))},[H("table",{class:U([v(n).e("table"),v(n).is("bordered",l.border)])},[H("tbody",null,[(V(!0),z(Ue,null,gt(i(),(u,f)=>(V(),ae(hhe,{key:f,row:u},null,8,["row"]))),128))])],2)],2)],2))}});var Che=Ve(mhe,[["__file","description.vue"]]);const She=Re({label:{type:String,default:""},span:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}),VN=q({name:"ElDescriptionsItem",props:She}),bhe=lt(Che,{DescriptionsItem:VN}),whe=bn(VN),The=Re({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Q([String,Array,Object])},zIndex:{type:Q([String,Number])}}),xhe={click:t=>t instanceof MouseEvent},Ehe="overlay";var khe=q({name:"ElOverlay",props:The,emits:xhe,setup(t,{slots:e,emit:n}){const r=Ce(Ehe),a=l=>{n("click",l)},{onClick:s,onMousedown:o,onMouseup:i}=US(t.customMaskEvent?void 0:a);return()=>t.mask?j("div",{class:[r.b(),t.overlayClass],style:{zIndex:t.zIndex},onClick:s,onMousedown:o,onMouseup:i},[ce(e,"default")],ya.STYLE|ya.CLASS|ya.PROPS,["onClick","onMouseup","onMousedown"]):je("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[ce(e,"default")])}});const sb=khe,DN=Symbol("dialogInjectionKey"),LN=Re({center:Boolean,alignCenter:Boolean,closeIcon:{type:Zt},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Ohe={close:()=>!0},Mhe=["aria-level"],Rhe=["aria-label"],_he=["id"],Vhe=q({name:"ElDialogContent"}),Dhe=q({...Vhe,props:LN,emits:Ohe,setup(t){const e=t,{t:n}=Mt(),{Close:r}=TS,{dialogRef:a,headerRef:s,bodyId:o,ns:i,style:l}=We(DN),{focusTrapRef:c}=We(XS),u=R(()=>[i.b(),i.is("fullscreen",e.fullscreen),i.is("draggable",e.draggable),i.is("align-center",e.alignCenter),{[i.m("center")]:e.center}]),f=Nv(c,a),d=R(()=>e.draggable),p=R(()=>e.overflow);return EL(a,s,d,p),(h,g)=>(V(),z("div",{ref:v(f),class:U(v(u)),style:Pe(v(l)),tabindex:"-1"},[H("header",{ref_key:"headerRef",ref:s,class:U([v(i).e("header"),{"show-close":h.showClose}])},[ce(h.$slots,"header",{},()=>[H("span",{role:"heading","aria-level":h.ariaLevel,class:U(v(i).e("title"))},Te(h.title),11,Mhe)]),h.showClose?(V(),z("button",{key:0,"aria-label":v(n)("el.dialog.close"),class:U(v(i).e("headerbtn")),type:"button",onClick:g[0]||(g[0]=y=>h.$emit("close"))},[j(v(Ge),{class:U(v(i).e("close"))},{default:Z(()=>[(V(),ae(dt(h.closeIcon||v(r))))]),_:1},8,["class"])],10,Rhe)):ee("v-if",!0)],2),H("div",{id:v(o),class:U(v(i).e("body"))},[ce(h.$slots,"default")],10,_he),h.$slots.footer?(V(),z("footer",{key:0,class:U(v(i).e("footer"))},[ce(h.$slots,"footer")],2)):ee("v-if",!0)],6))}});var Lhe=Ve(Dhe,[["__file","dialog-content.vue"]]);const NN=Re({...LN,appendToBody:Boolean,appendTo:{type:Q(String),default:"body"},beforeClose:{type:Q(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),BN={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ut]:t=>Wn(t),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},FN=(t,e)=>{var n;const a=ot().emit,{nextZIndex:s}=Cu();let o="";const i=Vr(),l=Vr(),c=P(!1),u=P(!1),f=P(!1),d=P((n=t.zIndex)!=null?n:s());let p,h;const g=Iv("namespace",cf),y=R(()=>{const F={},$=`--${g.value}-dialog`;return t.fullscreen||(t.top&&(F[`${$}-margin-top`]=t.top),t.width&&(F[`${$}-width`]=Bn(t.width))),F}),m=R(()=>t.alignCenter?{display:"flex"}:{});function b(){a("opened")}function C(){a("closed"),a(ut,!1),t.destroyOnClose&&(f.value=!1)}function S(){a("close")}function T(){h==null||h(),p==null||p(),t.openDelay&&t.openDelay>0?{stop:p}=wl(()=>O(),t.openDelay):O()}function w(){p==null||p(),h==null||h(),t.closeDelay&&t.closeDelay>0?{stop:h}=wl(()=>k(),t.closeDelay):k()}function x(){function F($){$||(u.value=!0,c.value=!1)}t.beforeClose?t.beforeClose(F):w()}function E(){t.closeOnClickModal&&x()}function O(){Ot&&(c.value=!0)}function k(){c.value=!1}function M(){a("openAutoFocus")}function D(){a("closeAutoFocus")}function I(F){var $;(($=F.detail)==null?void 0:$.focusReason)==="pointer"&&F.preventDefault()}t.lockScroll&&RS(c);function B(){t.closeOnPressEscape&&x()}return pe(()=>t.modelValue,F=>{F?(u.value=!1,T(),f.value=!0,d.value=dL(t.zIndex)?s():d.value++,Ye(()=>{a("open"),e.value&&(e.value.scrollTop=0)})):c.value&&w()}),pe(()=>t.fullscreen,F=>{e.value&&(F?(o=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=o)}),at(()=>{t.modelValue&&(c.value=!0,f.value=!0,T())}),{afterEnter:b,afterLeave:C,beforeLeave:S,handleClose:x,onModalClick:E,close:w,doClose:k,onOpenAutoFocus:M,onCloseAutoFocus:D,onCloseRequested:B,onFocusoutPrevented:I,titleId:i,bodyId:l,closed:u,style:y,overlayDialogStyle:m,rendered:f,visible:c,zIndex:d}},Nhe=["aria-label","aria-labelledby","aria-describedby"],Bhe=q({name:"ElDialog",inheritAttrs:!1}),Fhe=q({...Bhe,props:NN,emits:BN,setup(t,{expose:e}){const n=t,r=rr();uo({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},R(()=>!!r.title));const a=Ce("dialog"),s=P(),o=P(),i=P(),{visible:l,titleId:c,bodyId:u,style:f,overlayDialogStyle:d,rendered:p,zIndex:h,afterEnter:g,afterLeave:y,beforeLeave:m,handleClose:b,onModalClick:C,onOpenAutoFocus:S,onCloseAutoFocus:T,onCloseRequested:w,onFocusoutPrevented:x}=FN(n,s);bt(DN,{dialogRef:s,headerRef:o,bodyId:u,ns:a,rendered:p,style:f});const E=US(C),O=R(()=>n.draggable&&!n.fullscreen);return e({visible:l,dialogContentRef:i}),(k,M)=>(V(),ae(pu,{to:k.appendTo,disabled:k.appendTo!=="body"?!1:!k.appendToBody},[j(jn,{name:"dialog-fade",onAfterEnter:v(g),onAfterLeave:v(y),onBeforeLeave:v(m),persisted:""},{default:Z(()=>[rt(j(v(sb),{"custom-mask-event":"",mask:k.modal,"overlay-class":k.modalClass,"z-index":v(h)},{default:Z(()=>[H("div",{role:"dialog","aria-modal":"true","aria-label":k.title||void 0,"aria-labelledby":k.title?void 0:v(c),"aria-describedby":v(u),class:U(`${v(a).namespace.value}-overlay-dialog`),style:Pe(v(d)),onClick:M[0]||(M[0]=(...D)=>v(E).onClick&&v(E).onClick(...D)),onMousedown:M[1]||(M[1]=(...D)=>v(E).onMousedown&&v(E).onMousedown(...D)),onMouseup:M[2]||(M[2]=(...D)=>v(E).onMouseup&&v(E).onMouseup(...D))},[j(v(kd),{loop:"",trapped:v(l),"focus-start-el":"container",onFocusAfterTrapped:v(S),onFocusAfterReleased:v(T),onFocusoutPrevented:v(x),onReleaseRequested:v(w)},{default:Z(()=>[v(p)?(V(),ae(Lhe,ft({key:0,ref_key:"dialogContentRef",ref:i},k.$attrs,{center:k.center,"align-center":k.alignCenter,"close-icon":k.closeIcon,draggable:v(O),overflow:k.overflow,fullscreen:k.fullscreen,"show-close":k.showClose,title:k.title,"aria-level":k.headerAriaLevel,onClose:v(b)}),lo({header:Z(()=>[k.$slots.title?ce(k.$slots,"title",{key:1}):ce(k.$slots,"header",{key:0,close:v(b),titleId:v(c),titleClass:v(a).e("title")})]),default:Z(()=>[ce(k.$slots,"default")]),_:2},[k.$slots.footer?{name:"footer",fn:Z(()=>[ce(k.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):ee("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Nhe)]),_:3},8,["mask","overlay-class","z-index"]),[[Rt,v(l)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}});var $he=Ve(Fhe,[["__file","dialog.vue"]]);const Uhe=lt($he),Ahe=Re({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:Q(String),default:"solid"}}),Whe=q({name:"ElDivider"}),Ihe=q({...Whe,props:Ahe,setup(t){const e=t,n=Ce("divider"),r=R(()=>n.cssVar({"border-style":e.borderStyle}));return(a,s)=>(V(),z("div",{class:U([v(n).b(),v(n).m(a.direction)]),style:Pe(v(r)),role:"separator"},[a.$slots.default&&a.direction!=="vertical"?(V(),z("div",{key:0,class:U([v(n).e("text"),v(n).is(a.contentPosition)])},[ce(a.$slots,"default")],2)):ee("v-if",!0)],6))}});var Phe=Ve(Ihe,[["__file","divider.vue"]]);const $N=lt(Phe),Ghe=Re({...NN,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),zhe=BN,Hhe=["aria-label","aria-labelledby","aria-describedby"],Khe=["id","aria-level"],jhe=["aria-label"],Yhe=["id"],qhe=q({name:"ElDrawer",inheritAttrs:!1}),Xhe=q({...qhe,props:Ghe,emits:zhe,setup(t,{expose:e}){const n=t,r=rr();uo({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},R(()=>!!r.title));const a=P(),s=P(),o=Ce("drawer"),{t:i}=Mt(),{afterEnter:l,afterLeave:c,beforeLeave:u,visible:f,rendered:d,titleId:p,bodyId:h,onModalClick:g,onOpenAutoFocus:y,onCloseAutoFocus:m,onFocusoutPrevented:b,onCloseRequested:C,handleClose:S}=FN(n,a),T=R(()=>n.direction==="rtl"||n.direction==="ltr"),w=R(()=>Bn(n.size));return e({handleClose:S,afterEnter:l,afterLeave:c}),(x,E)=>(V(),ae(pu,{to:"body",disabled:!x.appendToBody},[j(jn,{name:v(o).b("fade"),onAfterEnter:v(l),onAfterLeave:v(c),onBeforeLeave:v(u),persisted:""},{default:Z(()=>[rt(j(v(sb),{mask:x.modal,"overlay-class":x.modalClass,"z-index":x.zIndex,onClick:v(g)},{default:Z(()=>[j(v(kd),{loop:"",trapped:v(f),"focus-trap-el":a.value,"focus-start-el":s.value,onFocusAfterTrapped:v(y),onFocusAfterReleased:v(m),onFocusoutPrevented:v(b),onReleaseRequested:v(C)},{default:Z(()=>[H("div",ft({ref_key:"drawerRef",ref:a,"aria-modal":"true","aria-label":x.title||void 0,"aria-labelledby":x.title?void 0:v(p),"aria-describedby":v(h)},x.$attrs,{class:[v(o).b(),x.direction,v(f)&&"open"],style:v(T)?"width: "+v(w):"height: "+v(w),role:"dialog",onClick:E[1]||(E[1]=Ze(()=>{},["stop"]))}),[H("span",{ref_key:"focusStartRef",ref:s,class:U(v(o).e("sr-focus")),tabindex:"-1"},null,2),x.withHeader?(V(),z("header",{key:0,class:U(v(o).e("header"))},[x.$slots.title?ce(x.$slots,"title",{key:1},()=>[ee(" DEPRECATED SLOT ")]):ce(x.$slots,"header",{key:0,close:v(S),titleId:v(p),titleClass:v(o).e("title")},()=>[x.$slots.title?ee("v-if",!0):(V(),z("span",{key:0,id:v(p),role:"heading","aria-level":x.headerAriaLevel,class:U(v(o).e("title"))},Te(x.title),11,Khe))]),x.showClose?(V(),z("button",{key:2,"aria-label":v(i)("el.drawer.close"),class:U(v(o).e("close-btn")),type:"button",onClick:E[0]||(E[0]=(...O)=>v(S)&&v(S)(...O))},[j(v(Ge),{class:U(v(o).e("close"))},{default:Z(()=>[j(v(as))]),_:1},8,["class"])],10,jhe)):ee("v-if",!0)],2)):ee("v-if",!0),v(d)?(V(),z("div",{key:1,id:v(h),class:U(v(o).e("body"))},[ce(x.$slots,"default")],10,Yhe)):ee("v-if",!0),x.$slots.footer?(V(),z("div",{key:2,class:U(v(o).e("footer"))},[ce(x.$slots,"footer")],2)):ee("v-if",!0)],16,Hhe)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[Rt,v(f)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var Zhe=Ve(Xhe,[["__file","drawer.vue"]]);const Jhe=lt(Zhe),Qhe=q({inheritAttrs:!1});function eve(t,e,n,r,a,s){return ce(t.$slots,"default")}var tve=Ve(Qhe,[["render",eve],["__file","collection.vue"]]);const nve=q({name:"ElCollectionItem",inheritAttrs:!1});function rve(t,e,n,r,a,s){return ce(t.$slots,"default")}var ave=Ve(nve,[["render",rve],["__file","collection-item.vue"]]);const UN="data-el-collection-item",AN=t=>{const e=`El${t}Collection`,n=`${e}Item`,r=Symbol(e),a=Symbol(n),s={...tve,name:e,setup(){const i=P(null),l=new Map;bt(r,{itemMap:l,getItems:()=>{const u=v(i);if(!u)return[];const f=Array.from(u.querySelectorAll(`[${UN}]`));return[...l.values()].sort((p,h)=>f.indexOf(p.ref)-f.indexOf(h.ref))},collectionRef:i})}},o={...ave,name:n,setup(i,{attrs:l}){const c=P(null),u=We(r,void 0);bt(a,{collectionItemRef:c}),at(()=>{const f=v(c);f&&u.itemMap.set(f,{ref:f,...l})}),ln(()=>{const f=v(c);u.itemMap.delete(f)})}};return{COLLECTION_INJECTION_KEY:r,COLLECTION_ITEM_INJECTION_KEY:a,ElCollection:s,ElCollectionItem:o}},sve=Re({style:{type:Q([String,Array,Object])},currentTabId:{type:Q(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Q(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:ove,ElCollectionItem:ive,COLLECTION_INJECTION_KEY:ob,COLLECTION_ITEM_INJECTION_KEY:lve}=AN("RovingFocusGroup"),ib=Symbol("elRovingFocusGroup"),WN=Symbol("elRovingFocusGroupItem"),cve={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},uve=(t,e)=>{if(e!=="rtl")return t;switch(t){case He.right:return He.left;case He.left:return He.right;default:return t}},fve=(t,e,n)=>{const r=uve(t.key,n);if(!(e==="vertical"&&[He.left,He.right].includes(r))&&!(e==="horizontal"&&[He.up,He.down].includes(r)))return cve[r]},dve=(t,e)=>t.map((n,r)=>t[(r+e)%t.length]),lb=t=>{const{activeElement:e}=document;for(const n of t)if(n===e||(n.focus(),e!==document.activeElement))return},yE="currentTabIdChange",mE="rovingFocusGroup.entryFocus",pve={bubbles:!1,cancelable:!0},gve=q({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:sve,emits:[yE,"entryFocus"],setup(t,{emit:e}){var n;const r=P((n=t.currentTabId||t.defaultCurrentTabId)!=null?n:null),a=P(!1),s=P(!1),o=P(null),{getItems:i}=We(ob,void 0),l=R(()=>[{outline:"none"},t.style]),c=g=>{e(yE,g)},u=()=>{a.value=!0},f=kn(g=>{var y;(y=t.onMousedown)==null||y.call(t,g)},()=>{s.value=!0}),d=kn(g=>{var y;(y=t.onFocus)==null||y.call(t,g)},g=>{const y=!v(s),{target:m,currentTarget:b}=g;if(m===b&&y&&!v(a)){const C=new Event(mE,pve);if(b==null||b.dispatchEvent(C),!C.defaultPrevented){const S=i().filter(O=>O.focusable),T=S.find(O=>O.active),w=S.find(O=>O.id===v(r)),E=[T,w,...S].filter(Boolean).map(O=>O.ref);lb(E)}}s.value=!1}),p=kn(g=>{var y;(y=t.onBlur)==null||y.call(t,g)},()=>{a.value=!1}),h=(...g)=>{e("entryFocus",...g)};bt(ib,{currentTabbedId:du(r),loop:tn(t,"loop"),tabIndex:R(()=>v(a)?-1:0),rovingFocusGroupRef:o,rovingFocusGroupRootStyle:l,orientation:tn(t,"orientation"),dir:tn(t,"dir"),onItemFocus:c,onItemShiftTab:u,onBlur:p,onFocus:d,onMousedown:f}),pe(()=>t.currentTabId,g=>{r.value=g??null}),vn(o,mE,h)}});function hve(t,e,n,r,a,s){return ce(t.$slots,"default")}var vve=Ve(gve,[["render",hve],["__file","roving-focus-group-impl.vue"]]);const yve=q({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:ove,ElRovingFocusGroupImpl:vve}});function mve(t,e,n,r,a,s){const o=et("el-roving-focus-group-impl"),i=et("el-focus-group-collection");return V(),ae(i,null,{default:Z(()=>[j(o,Za(Tv(t.$attrs)),{default:Z(()=>[ce(t.$slots,"default")]),_:3},16)]),_:3})}var Cve=Ve(yve,[["render",mve],["__file","roving-focus-group.vue"]]);const Sve=q({components:{ElRovingFocusCollectionItem:ive},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(t,{emit:e}){const{currentTabbedId:n,loop:r,onItemFocus:a,onItemShiftTab:s}=We(ib,void 0),{getItems:o}=We(ob,void 0),i=Vr(),l=P(null),c=kn(p=>{e("mousedown",p)},p=>{t.focusable?a(v(i)):p.preventDefault()}),u=kn(p=>{e("focus",p)},()=>{a(v(i))}),f=kn(p=>{e("keydown",p)},p=>{const{key:h,shiftKey:g,target:y,currentTarget:m}=p;if(h===He.tab&&g){s();return}if(y!==m)return;const b=fve(p);if(b){p.preventDefault();let S=o().filter(T=>T.focusable).map(T=>T.ref);switch(b){case"last":{S.reverse();break}case"prev":case"next":{b==="prev"&&S.reverse();const T=S.indexOf(m);S=r.value?dve(S,T+1):S.slice(T+1);break}}Ye(()=>{lb(S)})}}),d=R(()=>n.value===v(i));return bt(WN,{rovingFocusGroupItemRef:l,tabIndex:R(()=>v(d)?0:-1),handleMousedown:c,handleFocus:u,handleKeydown:f}),{id:i,handleKeydown:f,handleFocus:u,handleMousedown:c}}});function bve(t,e,n,r,a,s){const o=et("el-roving-focus-collection-item");return V(),ae(o,{id:t.id,focusable:t.focusable,active:t.active},{default:Z(()=>[ce(t.$slots,"default")]),_:3},8,["id","focusable","active"])}var wve=Ve(Sve,[["render",bve],["__file","roving-focus-item.vue"]]);const wg=Re({trigger:Wf.trigger,effect:{...dr.effect,default:"light"},type:{type:Q(String)},placement:{type:Q(String),default:"bottom"},popperOptions:{type:Q(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:Q([Number,String]),default:0},maxHeight:{type:Q([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:Q(Object)},teleported:dr.teleported}),IN=Re({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:Zt}}),Tve=Re({onKeydown:{type:Q(Function)}}),xve=[He.down,He.pageDown,He.home],PN=[He.up,He.pageUp,He.end],Eve=[...xve,...PN],{ElCollection:kve,ElCollectionItem:Ove,COLLECTION_INJECTION_KEY:Mve,COLLECTION_ITEM_INJECTION_KEY:Rve}=AN("Dropdown"),jv=Symbol("elDropdown"),{ButtonGroup:_ve}=ir,Vve=q({name:"ElDropdown",components:{ElButton:ir,ElButtonGroup:_ve,ElScrollbar:To,ElDropdownCollection:kve,ElTooltip:Dr,ElRovingFocusGroup:Cve,ElOnlyChild:p3,ElIcon:Ge,ArrowDown:bo},props:wg,emits:["visible-change","click","command"],setup(t,{emit:e}){const n=ot(),r=Ce("dropdown"),{t:a}=Mt(),s=P(),o=P(),i=P(null),l=P(null),c=P(null),u=P(null),f=P(!1),d=[He.enter,He.space,He.down],p=R(()=>({maxHeight:Bn(t.maxHeight)})),h=R(()=>[r.m(T.value)]),g=R(()=>xl(t.trigger)),y=Vr().value,m=R(()=>t.id||y);pe([s,g],([N,W],[_])=>{var L,G,K;(L=_==null?void 0:_.$el)!=null&&L.removeEventListener&&_.$el.removeEventListener("pointerenter",x),(G=N==null?void 0:N.$el)!=null&&G.removeEventListener&&N.$el.removeEventListener("pointerenter",x),(K=N==null?void 0:N.$el)!=null&&K.addEventListener&&W.includes("hover")&&N.$el.addEventListener("pointerenter",x)},{immediate:!0}),ln(()=>{var N,W;(W=(N=s.value)==null?void 0:N.$el)!=null&&W.removeEventListener&&s.value.$el.removeEventListener("pointerenter",x)});function b(){C()}function C(){var N;(N=i.value)==null||N.onClose()}function S(){var N;(N=i.value)==null||N.onOpen()}const T=qn();function w(...N){e("command",...N)}function x(){var N,W;(W=(N=s.value)==null?void 0:N.$el)==null||W.focus()}function E(){}function O(){const N=v(l);g.value.includes("hover")&&(N==null||N.focus()),u.value=null}function k(N){u.value=N}function M(N){f.value||(N.preventDefault(),N.stopImmediatePropagation())}function D(){e("visible-change",!0)}function I(N){(N==null?void 0:N.type)==="keydown"&&l.value.focus()}function B(){e("visible-change",!1)}return bt(jv,{contentRef:l,role:R(()=>t.role),triggerId:m,isUsingKeyboard:f,onItemEnter:E,onItemLeave:O}),bt("elDropdown",{instance:n,dropdownSize:T,handleClick:b,commandHandler:w,trigger:tn(t,"trigger"),hideOnClick:tn(t,"hideOnClick")}),{t:a,ns:r,scrollbar:c,wrapStyle:p,dropdownTriggerKls:h,dropdownSize:T,triggerId:m,triggerKeys:d,currentTabId:u,handleCurrentTabIdChange:k,handlerMainButtonClick:N=>{e("click",N)},handleEntryFocus:M,handleClose:C,handleOpen:S,handleBeforeShowTooltip:D,handleShowTooltip:I,handleBeforeHideTooltip:B,onFocusAfterTrapped:N=>{var W,_;N.preventDefault(),(_=(W=l.value)==null?void 0:W.focus)==null||_.call(W,{preventScroll:!0})},popperRef:i,contentRef:l,triggeringElementRef:s,referenceElementRef:o}}});function Dve(t,e,n,r,a,s){var o;const i=et("el-dropdown-collection"),l=et("el-roving-focus-group"),c=et("el-scrollbar"),u=et("el-only-child"),f=et("el-tooltip"),d=et("el-button"),p=et("arrow-down"),h=et("el-icon"),g=et("el-button-group");return V(),z("div",{class:U([t.ns.b(),t.ns.is("disabled",t.disabled)])},[j(f,{ref:"popperRef",role:t.role,effect:t.effect,"fallback-placements":["bottom","top"],"popper-options":t.popperOptions,"gpu-acceleration":!1,"hide-after":t.trigger==="hover"?t.hideTimeout:0,"manual-mode":!0,placement:t.placement,"popper-class":[t.ns.e("popper"),t.popperClass],"reference-element":(o=t.referenceElementRef)==null?void 0:o.$el,trigger:t.trigger,"trigger-keys":t.triggerKeys,"trigger-target-el":t.contentRef,"show-after":t.trigger==="hover"?t.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":t.triggeringElementRef,"virtual-triggering":t.splitButton,disabled:t.disabled,transition:`${t.ns.namespace.value}-zoom-in-top`,teleported:t.teleported,pure:"",persistent:"",onBeforeShow:t.handleBeforeShowTooltip,onShow:t.handleShowTooltip,onBeforeHide:t.handleBeforeHideTooltip},lo({content:Z(()=>[j(c,{ref:"scrollbar","wrap-style":t.wrapStyle,tag:"div","view-class":t.ns.e("list")},{default:Z(()=>[j(l,{loop:t.loop,"current-tab-id":t.currentTabId,orientation:"horizontal",onCurrentTabIdChange:t.handleCurrentTabIdChange,onEntryFocus:t.handleEntryFocus},{default:Z(()=>[j(i,null,{default:Z(()=>[ce(t.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[t.splitButton?void 0:{name:"default",fn:Z(()=>[j(u,{id:t.triggerId,ref:"triggeringElementRef",role:"button",tabindex:t.tabindex},{default:Z(()=>[ce(t.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),t.splitButton?(V(),ae(g,{key:0},{default:Z(()=>[j(d,ft({ref:"referenceElementRef"},t.buttonProps,{size:t.dropdownSize,type:t.type,disabled:t.disabled,tabindex:t.tabindex,onClick:t.handlerMainButtonClick}),{default:Z(()=>[ce(t.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),j(d,ft({id:t.triggerId,ref:"triggeringElementRef"},t.buttonProps,{role:"button",size:t.dropdownSize,type:t.type,class:t.ns.e("caret-button"),disabled:t.disabled,tabindex:t.tabindex,"aria-label":t.t("el.dropdown.toggleDropdown")}),{default:Z(()=>[j(h,{class:U(t.ns.e("icon"))},{default:Z(()=>[j(p)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):ee("v-if",!0)],2)}var Lve=Ve(Vve,[["render",Dve],["__file","dropdown.vue"]]);const Nve=q({name:"DropdownItemImpl",components:{ElIcon:Ge},props:IN,emits:["pointermove","pointerleave","click","clickimpl"],setup(t,{emit:e}){const n=Ce("dropdown"),{role:r}=We(jv,void 0),{collectionItemRef:a}=We(Rve,void 0),{collectionItemRef:s}=We(lve,void 0),{rovingFocusGroupItemRef:o,tabIndex:i,handleFocus:l,handleKeydown:c,handleMousedown:u}=We(WN,void 0),f=Nv(a,s,o),d=R(()=>r.value==="menu"?"menuitem":r.value==="navigation"?"link":"button"),p=kn(h=>{const{code:g}=h;if(g===He.enter||g===He.space)return h.preventDefault(),h.stopImmediatePropagation(),e("clickimpl",h),!0},c);return{ns:n,itemRef:f,dataset:{[UN]:""},role:d,tabIndex:i,handleFocus:l,handleKeydown:p,handleMousedown:u}}}),Bve=["aria-disabled","tabindex","role"];function Fve(t,e,n,r,a,s){const o=et("el-icon");return V(),z(Ue,null,[t.divided?(V(),z("li",ft({key:0,role:"separator",class:t.ns.bem("menu","item","divided")},t.$attrs),null,16)):ee("v-if",!0),H("li",ft({ref:t.itemRef},{...t.dataset,...t.$attrs},{"aria-disabled":t.disabled,class:[t.ns.be("menu","item"),t.ns.is("disabled",t.disabled)],tabindex:t.tabIndex,role:t.role,onClick:e[0]||(e[0]=i=>t.$emit("clickimpl",i)),onFocus:e[1]||(e[1]=(...i)=>t.handleFocus&&t.handleFocus(...i)),onKeydown:e[2]||(e[2]=Ze((...i)=>t.handleKeydown&&t.handleKeydown(...i),["self"])),onMousedown:e[3]||(e[3]=(...i)=>t.handleMousedown&&t.handleMousedown(...i)),onPointermove:e[4]||(e[4]=i=>t.$emit("pointermove",i)),onPointerleave:e[5]||(e[5]=i=>t.$emit("pointerleave",i))}),[t.icon?(V(),ae(o,{key:0},{default:Z(()=>[(V(),ae(dt(t.icon)))]),_:1})):ee("v-if",!0),ce(t.$slots,"default")],16,Bve)],64)}var $ve=Ve(Nve,[["render",Fve],["__file","dropdown-item-impl.vue"]]);const GN=()=>{const t=We("elDropdown",{}),e=R(()=>t==null?void 0:t.dropdownSize);return{elDropdown:t,_elDropdownSize:e}},Uve=q({name:"ElDropdownItem",components:{ElDropdownCollectionItem:Ove,ElRovingFocusItem:wve,ElDropdownItemImpl:$ve},inheritAttrs:!1,props:IN,emits:["pointermove","pointerleave","click"],setup(t,{emit:e,attrs:n}){const{elDropdown:r}=GN(),a=ot(),s=P(null),o=R(()=>{var p,h;return(h=(p=v(s))==null?void 0:p.textContent)!=null?h:""}),{onItemEnter:i,onItemLeave:l}=We(jv,void 0),c=kn(p=>(e("pointermove",p),p.defaultPrevented),y2(p=>{if(t.disabled){l(p);return}const h=p.currentTarget;h===document.activeElement||h.contains(document.activeElement)||(i(p),p.defaultPrevented||h==null||h.focus())})),u=kn(p=>(e("pointerleave",p),p.defaultPrevented),y2(p=>{l(p)})),f=kn(p=>{if(!t.disabled)return e("click",p),p.type!=="keydown"&&p.defaultPrevented},p=>{var h,g,y;if(t.disabled){p.stopImmediatePropagation();return}(h=r==null?void 0:r.hideOnClick)!=null&&h.value&&((g=r.handleClick)==null||g.call(r)),(y=r.commandHandler)==null||y.call(r,t.command,a,p)}),d=R(()=>({...t,...n}));return{handleClick:f,handlePointerMove:c,handlePointerLeave:u,textContent:o,propsAndAttrs:d}}});function Ave(t,e,n,r,a,s){var o;const i=et("el-dropdown-item-impl"),l=et("el-roving-focus-item"),c=et("el-dropdown-collection-item");return V(),ae(c,{disabled:t.disabled,"text-value":(o=t.textValue)!=null?o:t.textContent},{default:Z(()=>[j(l,{focusable:!t.disabled},{default:Z(()=>[j(i,ft(t.propsAndAttrs,{onPointerleave:t.handlePointerLeave,onPointermove:t.handlePointerMove,onClickimpl:t.handleClick}),{default:Z(()=>[ce(t.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var zN=Ve(Uve,[["render",Ave],["__file","dropdown-item.vue"]]);const Wve=q({name:"ElDropdownMenu",props:Tve,setup(t){const e=Ce("dropdown"),{_elDropdownSize:n}=GN(),r=n.value,{focusTrapRef:a,onKeydown:s}=We(XS,void 0),{contentRef:o,role:i,triggerId:l}=We(jv,void 0),{collectionRef:c,getItems:u}=We(Mve,void 0),{rovingFocusGroupRef:f,rovingFocusGroupRootStyle:d,tabIndex:p,onBlur:h,onFocus:g,onMousedown:y}=We(ib,void 0),{collectionRef:m}=We(ob,void 0),b=R(()=>[e.b("menu"),e.bm("menu",r==null?void 0:r.value)]),C=Nv(o,c,a,f,m),S=kn(w=>{var x;(x=t.onKeydown)==null||x.call(t,w)},w=>{const{currentTarget:x,code:E,target:O}=w;if(x.contains(O),He.tab===E&&w.stopImmediatePropagation(),w.preventDefault(),O!==v(o)||!Eve.includes(E))return;const M=u().filter(D=>!D.disabled).map(D=>D.ref);PN.includes(E)&&M.reverse(),lb(M)});return{size:r,rovingFocusGroupRootStyle:d,tabIndex:p,dropdownKls:b,role:i,triggerId:l,dropdownListWrapperRef:C,handleKeydown:w=>{S(w),s(w)},onBlur:h,onFocus:g,onMousedown:y}}}),Ive=["role","aria-labelledby"];function Pve(t,e,n,r,a,s){return V(),z("ul",{ref:t.dropdownListWrapperRef,class:U(t.dropdownKls),style:Pe(t.rovingFocusGroupRootStyle),tabindex:-1,role:t.role,"aria-labelledby":t.triggerId,onBlur:e[0]||(e[0]=(...o)=>t.onBlur&&t.onBlur(...o)),onFocus:e[1]||(e[1]=(...o)=>t.onFocus&&t.onFocus(...o)),onKeydown:e[2]||(e[2]=Ze((...o)=>t.handleKeydown&&t.handleKeydown(...o),["self"])),onMousedown:e[3]||(e[3]=Ze((...o)=>t.onMousedown&&t.onMousedown(...o),["self"]))},[ce(t.$slots,"default")],46,Ive)}var HN=Ve(Wve,[["render",Pve],["__file","dropdown-menu.vue"]]);const Gve=lt(Lve,{DropdownItem:zN,DropdownMenu:HN}),zve=bn(zN),Hve=bn(HN),Kve={viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},jve=["id"],Yve=["stop-color"],qve=["stop-color"],Xve=["id"],Zve=["stop-color"],Jve=["stop-color"],Qve=["id"],e0e={id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},t0e={id:"B-type",transform:"translate(-1268.000000, -535.000000)"},n0e={id:"Group-2",transform:"translate(1268.000000, 535.000000)"},r0e=["fill"],a0e=["fill"],s0e={id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},o0e=["fill"],i0e=["fill"],l0e=["fill"],c0e=["fill"],u0e=["fill"],f0e={id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},d0e=["fill","xlink:href"],p0e=["fill","mask"],g0e=["fill"],h0e=q({name:"ImgEmpty"}),v0e=q({...h0e,setup(t){const e=Ce("empty"),n=Vr();return(r,a)=>(V(),z("svg",Kve,[H("defs",null,[H("linearGradient",{id:`linearGradient-1-${v(n)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[H("stop",{"stop-color":`var(${v(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,Yve),H("stop",{"stop-color":`var(${v(e).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,qve)],8,jve),H("linearGradient",{id:`linearGradient-2-${v(n)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[H("stop",{"stop-color":`var(${v(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,Zve),H("stop",{"stop-color":`var(${v(e).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,Jve)],8,Xve),H("rect",{id:`path-3-${v(n)}`,x:"0",y:"0",width:"17",height:"36"},null,8,Qve)]),H("g",e0e,[H("g",t0e,[H("g",n0e,[H("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${v(e).cssVarBlockName("fill-color-3")})`},null,8,r0e),H("polygon",{id:"Rectangle-Copy-14",fill:`var(${v(e).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,a0e),H("g",s0e,[H("polygon",{id:"Rectangle-Copy-10",fill:`var(${v(e).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,o0e),H("polygon",{id:"Rectangle-Copy-11",fill:`var(${v(e).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,i0e),H("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${v(n)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,l0e),H("polygon",{id:"Rectangle-Copy-13",fill:`var(${v(e).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,c0e)]),H("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${v(n)})`,x:"13",y:"45",width:"40",height:"36"},null,8,u0e),H("g",f0e,[H("use",{id:"Mask",fill:`var(${v(e).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${v(n)}`},null,8,d0e),H("polygon",{id:"Rectangle-Copy",fill:`var(${v(e).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${v(n)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,p0e)]),H("polygon",{id:"Rectangle-Copy-18",fill:`var(${v(e).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,g0e)])])])]))}});var y0e=Ve(v0e,[["__file","img-empty.vue"]]);const m0e=Re({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),C0e=["src"],S0e={key:1},b0e=q({name:"ElEmpty"}),w0e=q({...b0e,props:m0e,setup(t){const e=t,{t:n}=Mt(),r=Ce("empty"),a=R(()=>e.description||n("el.table.emptyText")),s=R(()=>({width:Bn(e.imageSize)}));return(o,i)=>(V(),z("div",{class:U(v(r).b())},[H("div",{class:U(v(r).e("image")),style:Pe(v(s))},[o.image?(V(),z("img",{key:0,src:o.image,ondragstart:"return false"},null,8,C0e)):ce(o.$slots,"image",{key:1},()=>[j(y0e)])],6),H("div",{class:U(v(r).e("description"))},[o.$slots.description?ce(o.$slots,"description",{key:0}):(V(),z("p",S0e,Te(v(a)),1))],2),o.$slots.default?(V(),z("div",{key:0,class:U(v(r).e("bottom"))},[ce(o.$slots,"default")],2)):ee("v-if",!0)],2))}});var T0e=Ve(w0e,[["__file","empty.vue"]]);const KN=lt(T0e),x0e=Re({urlList:{type:Q(Array),default:()=>mn([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:Q(String)}}),E0e={close:()=>!0,switch:t=>Xe(t),rotate:t=>Xe(t)},k0e=["src","crossorigin"],O0e=q({name:"ElImageViewer"}),M0e=q({...O0e,props:x0e,emits:E0e,setup(t,{expose:e,emit:n}){var r;const a=t,s={CONTAIN:{name:"contain",icon:fl(qne)},ORIGINAL:{name:"original",icon:fl(hre)}},{t:o}=Mt(),i=Ce("image-viewer"),{nextZIndex:l}=Cu(),c=P(),u=P([]),f=G7(),d=P(!0),p=P(a.initialIndex),h=on(s.CONTAIN),g=P({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),y=P((r=a.zIndex)!=null?r:l()),m=R(()=>{const{urlList:L}=a;return L.length<=1}),b=R(()=>p.value===0),C=R(()=>p.value===a.urlList.length-1),S=R(()=>a.urlList[p.value]),T=R(()=>[i.e("btn"),i.e("prev"),i.is("disabled",!a.infinite&&b.value)]),w=R(()=>[i.e("btn"),i.e("next"),i.is("disabled",!a.infinite&&C.value)]),x=R(()=>{const{scale:L,deg:G,offsetX:K,offsetY:Y,enableTransition:te}=g.value;let ve=K/L,se=Y/L;switch(G%360){case 90:case-270:[ve,se]=[se,-ve];break;case 180:case-180:[ve,se]=[-ve,-se];break;case 270:case-90:[ve,se]=[-se,ve];break}const ie={transform:`scale(${L}) rotate(${G}deg) translate(${ve}px, ${se}px)`,transition:te?"transform .3s":""};return h.value.name===s.CONTAIN.name&&(ie.maxWidth=ie.maxHeight="100%"),ie});function E(){k(),n("close")}function O(){const L=dl(K=>{switch(K.code){case He.esc:a.closeOnPressEscape&&E();break;case He.space:F();break;case He.left:N();break;case He.up:_("zoomIn");break;case He.right:W();break;case He.down:_("zoomOut");break}}),G=dl(K=>{const Y=K.deltaY||K.deltaX;_(Y<0?"zoomIn":"zoomOut",{zoomRate:a.zoomRate,enableTransition:!1})});f.run(()=>{vn(document,"keydown",L),vn(document,"wheel",G)})}function k(){f.stop()}function M(){d.value=!1}function D(L){d.value=!1,L.target.alt=o("el.image.error")}function I(L){if(d.value||L.button!==0||!c.value)return;g.value.enableTransition=!1;const{offsetX:G,offsetY:K}=g.value,Y=L.pageX,te=L.pageY,ve=dl(ie=>{g.value={...g.value,offsetX:G+ie.pageX-Y,offsetY:K+ie.pageY-te}}),se=vn(document,"mousemove",ve);vn(document,"mouseup",()=>{se()}),L.preventDefault()}function B(){g.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function F(){if(d.value)return;const L=Kc(s),G=Object.values(s),K=h.value.name,te=(G.findIndex(ve=>ve.name===K)+1)%L.length;h.value=s[L[te]],B()}function $(L){const G=a.urlList.length;p.value=(L+G)%G}function N(){b.value&&!a.infinite||$(p.value-1)}function W(){C.value&&!a.infinite||$(p.value+1)}function _(L,G={}){if(d.value)return;const{minScale:K,maxScale:Y}=a,{zoomRate:te,rotateDeg:ve,enableTransition:se}={zoomRate:a.zoomRate,rotateDeg:90,enableTransition:!0,...G};switch(L){case"zoomOut":g.value.scale>K&&(g.value.scale=Number.parseFloat((g.value.scale/te).toFixed(3)));break;case"zoomIn":g.value.scale<Y&&(g.value.scale=Number.parseFloat((g.value.scale*te).toFixed(3)));break;case"clockwise":g.value.deg+=ve,n("rotate",g.value.deg);break;case"anticlockwise":g.value.deg-=ve,n("rotate",g.value.deg);break}g.value.enableTransition=se}return pe(S,()=>{Ye(()=>{const L=u.value[0];L!=null&&L.complete||(d.value=!0)})}),pe(p,L=>{B(),n("switch",L)}),at(()=>{var L,G;O(),(G=(L=c.value)==null?void 0:L.focus)==null||G.call(L)}),e({setActiveItem:$}),(L,G)=>(V(),ae(pu,{to:"body",disabled:!L.teleported},[j(jn,{name:"viewer-fade",appear:""},{default:Z(()=>[H("div",{ref_key:"wrapper",ref:c,tabindex:-1,class:U(v(i).e("wrapper")),style:Pe({zIndex:y.value})},[H("div",{class:U(v(i).e("mask")),onClick:G[0]||(G[0]=Ze(K=>L.hideOnClickModal&&E(),["self"]))},null,2),ee(" CLOSE "),H("span",{class:U([v(i).e("btn"),v(i).e("close")]),onClick:E},[j(v(Ge),null,{default:Z(()=>[j(v(as))]),_:1})],2),ee(" ARROW "),v(m)?ee("v-if",!0):(V(),z(Ue,{key:0},[H("span",{class:U(v(T)),onClick:N},[j(v(Ge),null,{default:Z(()=>[j(v(ui))]),_:1})],2),H("span",{class:U(v(w)),onClick:W},[j(v(Ge),null,{default:Z(()=>[j(v(Wr))]),_:1})],2)],64)),ee(" ACTIONS "),H("div",{class:U([v(i).e("btn"),v(i).e("actions")])},[H("div",{class:U(v(i).e("actions__inner"))},[j(v(Ge),{onClick:G[1]||(G[1]=K=>_("zoomOut"))},{default:Z(()=>[j(v(Vre))]),_:1}),j(v(Ge),{onClick:G[2]||(G[2]=K=>_("zoomIn"))},{default:Z(()=>[j(v(bL))]),_:1}),H("i",{class:U(v(i).e("actions__divider"))},null,2),j(v(Ge),{onClick:F},{default:Z(()=>[(V(),ae(dt(v(h).icon)))]),_:1}),H("i",{class:U(v(i).e("actions__divider"))},null,2),j(v(Ge),{onClick:G[3]||(G[3]=K=>_("anticlockwise"))},{default:Z(()=>[j(v(fre))]),_:1}),j(v(Ge),{onClick:G[4]||(G[4]=K=>_("clockwise"))},{default:Z(()=>[j(v(pre))]),_:1})],2)],2),ee(" CANVAS "),H("div",{class:U(v(i).e("canvas"))},[(V(!0),z(Ue,null,gt(L.urlList,(K,Y)=>rt((V(),z("img",{ref_for:!0,ref:te=>u.value[Y]=te,key:K,src:K,style:Pe(v(x)),class:U(v(i).e("img")),crossorigin:L.crossorigin,onLoad:M,onError:D,onMousedown:I},null,46,k0e)),[[Rt,Y===p.value]])),128))],2),ce(L.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var R0e=Ve(M0e,[["__file","image-viewer.vue"]]);const jN=lt(R0e),_0e=Re({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:Q([String,Object])},previewSrcList:{type:Q(Array),default:()=>mn([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:Q(String)}}),V0e={load:t=>t instanceof Event,error:t=>t instanceof Event,switch:t=>Xe(t),close:()=>!0,show:()=>!0},D0e=["src","loading","crossorigin"],L0e={key:0},N0e=q({name:"ElImage",inheritAttrs:!1}),B0e=q({...N0e,props:_0e,emits:V0e,setup(t,{emit:e}){const n=t;let r="";const{t:a}=Mt(),s=Ce("image"),o=Nl(),i=OS(),l=P(),c=P(!1),u=P(!0),f=P(!1),d=P(),p=P(),h=Ot&&"loading"in HTMLImageElement.prototype;let g,y;const m=R(()=>[s.e("inner"),S.value&&s.e("preview"),u.value&&s.is("loading")]),b=R(()=>o.style),C=R(()=>{const{fit:W}=n;return Ot&&W?{objectFit:W}:{}}),S=R(()=>{const{previewSrcList:W}=n;return Array.isArray(W)&&W.length>0}),T=R(()=>{const{previewSrcList:W,initialIndex:_}=n;let L=_;return _>W.length-1&&(L=0),L}),w=R(()=>n.loading==="eager"?!1:!h&&n.loading==="lazy"||n.lazy),x=()=>{Ot&&(u.value=!0,c.value=!1,l.value=n.src)};function E(W){u.value=!1,c.value=!1,e("load",W)}function O(W){u.value=!1,c.value=!0,e("error",W)}function k(){BX(d.value,p.value)&&(x(),I())}const M=TD(k,200,!0);async function D(){var W;if(!Ot)return;await Ye();const{scrollContainer:_}=n;_a(_)?p.value=_:tt(_)&&_!==""?p.value=(W=document.querySelector(_))!=null?W:void 0:d.value&&(p.value=mS(d.value)),p.value&&(g=vn(p,"scroll",M),setTimeout(()=>k(),100))}function I(){!Ot||!p.value||!M||(g==null||g(),p.value=void 0)}function B(W){if(W.ctrlKey){if(W.deltaY<0)return W.preventDefault(),!1;if(W.deltaY>0)return W.preventDefault(),!1}}function F(){S.value&&(y=vn("wheel",B,{passive:!1}),r=document.body.style.overflow,document.body.style.overflow="hidden",f.value=!0,e("show"))}function $(){y==null||y(),document.body.style.overflow=r,f.value=!1,e("close")}function N(W){e("switch",W)}return pe(()=>n.src,()=>{w.value?(u.value=!0,c.value=!1,I(),D()):x()}),at(()=>{w.value?D():x()}),(W,_)=>(V(),z("div",{ref_key:"container",ref:d,class:U([v(s).b(),W.$attrs.class]),style:Pe(v(b))},[c.value?ce(W.$slots,"error",{key:0},()=>[H("div",{class:U(v(s).e("error"))},Te(v(a)("el.image.error")),3)]):(V(),z(Ue,{key:1},[l.value!==void 0?(V(),z("img",ft({key:0},v(i),{src:l.value,loading:W.loading,style:v(C),class:v(m),crossorigin:W.crossorigin,onClick:F,onLoad:E,onError:O}),null,16,D0e)):ee("v-if",!0),u.value?(V(),z("div",{key:1,class:U(v(s).e("wrapper"))},[ce(W.$slots,"placeholder",{},()=>[H("div",{class:U(v(s).e("placeholder"))},null,2)])],2)):ee("v-if",!0)],64)),v(S)?(V(),z(Ue,{key:2},[f.value?(V(),ae(v(jN),{key:0,"z-index":W.zIndex,"initial-index":v(T),infinite:W.infinite,"zoom-rate":W.zoomRate,"min-scale":W.minScale,"max-scale":W.maxScale,"url-list":W.previewSrcList,"hide-on-click-modal":W.hideOnClickModal,teleported:W.previewTeleported,"close-on-press-escape":W.closeOnPressEscape,onClose:$,onSwitch:N},{default:Z(()=>[W.$slots.viewer?(V(),z("div",L0e,[ce(W.$slots,"viewer")])):ee("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):ee("v-if",!0)],64)):ee("v-if",!0)],6))}});var F0e=Ve(B0e,[["__file","image.vue"]]);const $0e=lt(F0e),U0e=Re({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:lr,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||Xe(t)||["min","max"].includes(t),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)},validateEvent:{type:Boolean,default:!0}}),A0e={[pn]:(t,e)=>e!==t,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[Ir]:t=>Xe(t)||er(t),[ut]:t=>Xe(t)||er(t)},W0e=["aria-label","onKeydown"],I0e=["aria-label","onKeydown"],P0e=q({name:"ElInputNumber"}),G0e=q({...P0e,props:U0e,emits:A0e,setup(t,{expose:e,emit:n}){const r=t,{t:a}=Mt(),s=Ce("input-number"),o=P(),i=Dt({currentValue:r.modelValue,userInput:null}),{formItem:l}=Hr(),c=R(()=>Xe(r.modelValue)&&r.modelValue<=r.min),u=R(()=>Xe(r.modelValue)&&r.modelValue>=r.max),f=R(()=>{const F=m(r.step);return Kn(r.precision)?Math.max(m(r.modelValue),F):(F>r.precision,r.precision)}),d=R(()=>r.controls&&r.controlsPosition==="right"),p=qn(),h=na(),g=R(()=>{if(i.userInput!==null)return i.userInput;let F=i.currentValue;if(er(F))return"";if(Xe(F)){if(Number.isNaN(F))return"";Kn(r.precision)||(F=F.toFixed(r.precision))}return F}),y=(F,$)=>{if(Kn($)&&($=f.value),$===0)return Math.round(F);let N=String(F);const W=N.indexOf(".");if(W===-1||!N.replace(".","").split("")[W+$])return F;const G=N.length;return N.charAt(G-1)==="5"&&(N=`${N.slice(0,Math.max(0,G-1))}6`),Number.parseFloat(Number(N).toFixed($))},m=F=>{if(er(F))return 0;const $=F.toString(),N=$.indexOf(".");let W=0;return N!==-1&&(W=$.length-N-1),W},b=(F,$=1)=>Xe(F)?y(F+r.step*$):i.currentValue,C=()=>{if(r.readonly||h.value||u.value)return;const F=Number(g.value)||0,$=b(F);w($),n(Ir,i.currentValue),I()},S=()=>{if(r.readonly||h.value||c.value)return;const F=Number(g.value)||0,$=b(F,-1);w($),n(Ir,i.currentValue),I()},T=(F,$)=>{const{max:N,min:W,step:_,precision:L,stepStrictly:G,valueOnClear:K}=r;N<W&&Yn("InputNumber","min should not be greater than max.");let Y=Number(F);if(er(F)||Number.isNaN(Y))return null;if(F===""){if(K===null)return null;Y=tt(K)?{min:W,max:N}[K]:K}return G&&(Y=y(Math.round(Y/_)*_,L)),Kn(L)||(Y=y(Y,L)),(Y>N||Y<W)&&(Y=Y>N?N:W,$&&n(ut,Y)),Y},w=(F,$=!0)=>{var N;const W=i.currentValue,_=T(F);if(!$){n(ut,_);return}W!==_&&(i.userInput=null,n(ut,_),n(pn,_,W),r.validateEvent&&((N=l==null?void 0:l.validate)==null||N.call(l,"change").catch(L=>void 0)),i.currentValue=_)},x=F=>{i.userInput=F;const $=F===""?null:Number(F);n(Ir,$),w($,!1)},E=F=>{const $=F!==""?Number(F):"";(Xe($)&&!Number.isNaN($)||F==="")&&w($),I(),i.userInput=null},O=()=>{var F,$;($=(F=o.value)==null?void 0:F.focus)==null||$.call(F)},k=()=>{var F,$;($=(F=o.value)==null?void 0:F.blur)==null||$.call(F)},M=F=>{n("focus",F)},D=F=>{var $;i.userInput=null,n("blur",F),r.validateEvent&&(($=l==null?void 0:l.validate)==null||$.call(l,"blur").catch(N=>void 0))},I=()=>{i.currentValue!==r.modelValue&&(i.currentValue=r.modelValue)},B=F=>{document.activeElement===F.target&&F.preventDefault()};return pe(()=>r.modelValue,(F,$)=>{const N=T(F,!0);i.userInput===null&&N!==$&&(i.currentValue=N)},{immediate:!0}),at(()=>{var F;const{min:$,max:N,modelValue:W}=r,_=(F=o.value)==null?void 0:F.input;if(_.setAttribute("role","spinbutton"),Number.isFinite(N)?_.setAttribute("aria-valuemax",String(N)):_.removeAttribute("aria-valuemax"),Number.isFinite($)?_.setAttribute("aria-valuemin",String($)):_.removeAttribute("aria-valuemin"),_.setAttribute("aria-valuenow",i.currentValue||i.currentValue===0?String(i.currentValue):""),_.setAttribute("aria-disabled",String(h.value)),!Xe(W)&&W!=null){let L=Number(W);Number.isNaN(L)&&(L=null),n(ut,L)}}),mo(()=>{var F,$;const N=(F=o.value)==null?void 0:F.input;N==null||N.setAttribute("aria-valuenow",`${($=i.currentValue)!=null?$:""}`)}),e({focus:O,blur:k}),(F,$)=>(V(),z("div",{class:U([v(s).b(),v(s).m(v(p)),v(s).is("disabled",v(h)),v(s).is("without-controls",!F.controls),v(s).is("controls-right",v(d))]),onDragstart:$[0]||($[0]=Ze(()=>{},["prevent"]))},[F.controls?rt((V(),z("span",{key:0,role:"button","aria-label":v(a)("el.inputNumber.decrease"),class:U([v(s).e("decrease"),v(s).is("disabled",v(c))]),onKeydown:Xt(S,["enter"])},[j(v(Ge),null,{default:Z(()=>[v(d)?(V(),ae(v(bo),{key:0})):(V(),ae(v(tre),{key:1}))]),_:1})],42,W0e)),[[v(Rh),S]]):ee("v-if",!0),F.controls?rt((V(),z("span",{key:1,role:"button","aria-label":v(a)("el.inputNumber.increase"),class:U([v(s).e("increase"),v(s).is("disabled",v(u))]),onKeydown:Xt(C,["enter"])},[j(v(Ge),null,{default:Z(()=>[v(d)?(V(),ae(v(CS),{key:0})):(V(),ae(v(CL),{key:1}))]),_:1})],42,I0e)),[[v(Rh),C]]):ee("v-if",!0),j(v(kr),{id:F.id,ref_key:"input",ref:o,type:"number",step:F.step,"model-value":v(g),placeholder:F.placeholder,readonly:F.readonly,disabled:v(h),size:v(p),max:F.max,min:F.min,name:F.name,label:F.label,"validate-event":!1,onWheel:B,onKeydown:[Xt(Ze(C,["prevent"]),["up"]),Xt(Ze(S,["prevent"]),["down"])],onBlur:D,onFocus:M,onInput:x,onChange:E},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var z0e=Ve(G0e,[["__file","input-number.vue"]]);const YN=lt(z0e),H0e=Re({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:Zt}}),K0e={click:t=>t instanceof MouseEvent},j0e=["href","target"],Y0e=q({name:"ElLink"}),q0e=q({...Y0e,props:H0e,emits:K0e,setup(t,{emit:e}){const n=t,r=Ce("link"),a=R(()=>[r.b(),r.m(n.type),r.is("disabled",n.disabled),r.is("underline",n.underline&&!n.disabled)]);function s(o){n.disabled||e("click",o)}return(o,i)=>(V(),z("a",{class:U(v(a)),href:o.disabled||!o.href?void 0:o.href,target:o.disabled||!o.href?void 0:o.target,onClick:s},[o.icon?(V(),ae(v(Ge),{key:0},{default:Z(()=>[(V(),ae(dt(o.icon)))]),_:1})):ee("v-if",!0),o.$slots.default?(V(),z("span",{key:1,class:U(v(r).e("inner"))},[ce(o.$slots,"default")],2)):ee("v-if",!0),o.$slots.icon?ce(o.$slots,"icon",{key:2}):ee("v-if",!0)],10,j0e))}});var X0e=Ve(q0e,[["__file","link.vue"]]);const Z0e=lt(X0e);let J0e=class{constructor(e,n){this.parent=e,this.domNode=n,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e}addListeners(){const e=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,n=>{n.addEventListener("keydown",r=>{let a=!1;switch(r.code){case He.down:{this.gotoSubIndex(this.subIndex+1),a=!0;break}case He.up:{this.gotoSubIndex(this.subIndex-1),a=!0;break}case He.tab:{lg(e,"mouseleave");break}case He.enter:case He.space:{a=!0,r.currentTarget.click();break}}return a&&(r.preventDefault(),r.stopPropagation()),!1})})}},Q0e=class{constructor(e,n){this.domNode=e,this.submenu=null,this.submenu=null,this.init(n)}init(e){this.domNode.setAttribute("tabindex","0");const n=this.domNode.querySelector(`.${e}-menu`);n&&(this.submenu=new J0e(this,n)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",e=>{let n=!1;switch(e.code){case He.down:{lg(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),n=!0;break}case He.up:{lg(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),n=!0;break}case He.tab:{lg(e.currentTarget,"mouseleave");break}case He.enter:case He.space:{n=!0,e.currentTarget.click();break}}n&&e.preventDefault()})}},eye=class{constructor(e,n){this.domNode=e,this.init(n)}init(e){const n=this.domNode.childNodes;Array.from(n).forEach(r=>{r.nodeType===1&&new Q0e(r,e)})}};const tye=q({name:"ElMenuCollapseTransition",setup(){const t=Ce("menu");return{listeners:{onBeforeEnter:n=>n.style.opacity="0.2",onEnter(n,r){wa(n,`${t.namespace.value}-opacity-transition`),n.style.opacity="1",r()},onAfterEnter(n){Mr(n,`${t.namespace.value}-opacity-transition`),n.style.opacity=""},onBeforeLeave(n){n.dataset||(n.dataset={}),rs(n,t.m("collapse"))?(Mr(n,t.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),wa(n,t.m("collapse"))):(wa(n,t.m("collapse")),n.dataset.oldOverflow=n.style.overflow,n.dataset.scrollWidth=n.clientWidth.toString(),Mr(n,t.m("collapse"))),n.style.width=`${n.scrollWidth}px`,n.style.overflow="hidden"},onLeave(n){wa(n,"horizontal-collapse-transition"),n.style.width=`${n.dataset.scrollWidth}px`}}}}});function nye(t,e,n,r,a,s){return V(),ae(jn,ft({mode:"out-in"},t.listeners),{default:Z(()=>[ce(t.$slots,"default")]),_:3},16)}var rye=Ve(tye,[["render",nye],["__file","menu-collapse-transition.vue"]]);function qN(t,e){const n=R(()=>{let a=t.parent;const s=[e.value];for(;a.type.name!=="ElMenu";)a.props.index&&s.unshift(a.props.index),a=a.parent;return s});return{parentMenu:R(()=>{let a=t.parent;for(;a&&!["ElMenu","ElSubMenu"].includes(a.type.name);)a=a.parent;return a}),indexPath:n}}function aye(t){return R(()=>{const n=t.backgroundColor;return n?new k3(n).shade(20).toString():""})}const XN=(t,e)=>{const n=Ce("menu");return R(()=>n.cssVarBlock({"text-color":t.textColor||"","hover-text-color":t.textColor||"","bg-color":t.backgroundColor||"","hover-bg-color":aye(t).value||"","active-color":t.activeTextColor||"",level:`${e}`}))},sye=Re({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0},teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:Zt},expandOpenIcon:{type:Zt},collapseCloseIcon:{type:Zt},collapseOpenIcon:{type:Zt}}),_p="ElSubMenu";var cb=q({name:_p,props:sye,setup(t,{slots:e,expose:n}){uo({from:"popper-append-to-body",replacement:"teleported",scope:_p,version:"2.3.0",ref:"https://element-plus.org/en-US/component/menu.html#submenu-attributes"},R(()=>t.popperAppendToBody!==void 0));const r=ot(),{indexPath:a,parentMenu:s}=qN(r,R(()=>t.index)),o=Ce("menu"),i=Ce("sub-menu"),l=We("rootMenu");l||Yn(_p,"can not inject root menu");const c=We(`subMenu:${s.value.uid}`);c||Yn(_p,"can not inject sub menu");const u=P({}),f=P({});let d;const p=P(!1),h=P(),g=P(null),y=R(()=>E.value==="horizontal"&&b.value?"bottom-start":"right-start"),m=R(()=>E.value==="horizontal"&&b.value||E.value==="vertical"&&!l.props.collapse?t.expandCloseIcon&&t.expandOpenIcon?w.value?t.expandOpenIcon:t.expandCloseIcon:bo:t.collapseCloseIcon&&t.collapseOpenIcon?w.value?t.collapseOpenIcon:t.collapseCloseIcon:Wr),b=R(()=>c.level===0),C=R(()=>{var L;const G=(L=t.teleported)!=null?L:t.popperAppendToBody;return G===void 0?b.value:G}),S=R(()=>l.props.collapse?`${o.namespace.value}-zoom-in-left`:`${o.namespace.value}-zoom-in-top`),T=R(()=>E.value==="horizontal"&&b.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),w=R(()=>l.openedMenus.includes(t.index)),x=R(()=>{let L=!1;return Object.values(u.value).forEach(G=>{G.active&&(L=!0)}),Object.values(f.value).forEach(G=>{G.active&&(L=!0)}),L}),E=R(()=>l.props.mode),O=Dt({index:t.index,indexPath:a,active:x}),k=XN(l.props,c.level+1),M=R(()=>{var L;return(L=t.popperOffset)!=null?L:l.props.popperOffset}),D=R(()=>{var L;return(L=t.popperClass)!=null?L:l.props.popperClass}),I=R(()=>{var L;return(L=t.showTimeout)!=null?L:l.props.showTimeout}),B=R(()=>{var L;return(L=t.hideTimeout)!=null?L:l.props.hideTimeout}),F=()=>{var L,G,K;return(K=(G=(L=g.value)==null?void 0:L.popperRef)==null?void 0:G.popperInstanceRef)==null?void 0:K.destroy()},$=L=>{L||F()},N=()=>{l.props.menuTrigger==="hover"&&l.props.mode==="horizontal"||l.props.collapse&&l.props.mode==="vertical"||t.disabled||l.handleSubMenuClick({index:t.index,indexPath:a.value,active:x.value})},W=(L,G=I.value)=>{var K;if(L.type!=="focus"){if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"||t.disabled){c.mouseInChild.value=!0;return}c.mouseInChild.value=!0,d==null||d(),{stop:d}=wl(()=>{l.openMenu(t.index,a.value)},G),C.value&&((K=s.value.vnode.el)==null||K.dispatchEvent(new MouseEvent("mouseenter")))}},_=(L=!1)=>{var G;if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"){c.mouseInChild.value=!1;return}d==null||d(),c.mouseInChild.value=!1,{stop:d}=wl(()=>!p.value&&l.closeMenu(t.index,a.value),B.value),C.value&&L&&((G=c.handleMouseleave)==null||G.call(c,!0))};pe(()=>l.props.collapse,L=>$(!!L));{const L=K=>{f.value[K.index]=K},G=K=>{delete f.value[K.index]};bt(`subMenu:${r.uid}`,{addSubMenu:L,removeSubMenu:G,handleMouseleave:_,mouseInChild:p,level:c.level+1})}return n({opened:w}),at(()=>{l.addSubMenu(O),c.addSubMenu(O)}),ln(()=>{c.removeSubMenu(O),l.removeSubMenu(O)}),()=>{var L;const G=[(L=e.title)==null?void 0:L.call(e),je(Ge,{class:i.e("icon-arrow"),style:{transform:w.value?t.expandCloseIcon&&t.expandOpenIcon||t.collapseCloseIcon&&t.collapseOpenIcon&&l.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>tt(m.value)?je(r.appContext.components[m.value]):je(m.value)})],K=l.isMenuPopup?je(Dr,{ref:g,visible:w.value,effect:"light",pure:!0,offset:M.value,showArrow:!1,persistent:!0,popperClass:D.value,placement:y.value,teleported:C.value,fallbackPlacements:T.value,transition:S.value,gpuAcceleration:!1},{content:()=>{var Y;return je("div",{class:[o.m(E.value),o.m("popup-container"),D.value],onMouseenter:te=>W(te,100),onMouseleave:()=>_(!0),onFocus:te=>W(te,100)},[je("ul",{class:[o.b(),o.m("popup"),o.m(`popup-${y.value}`)],style:k.value},[(Y=e.default)==null?void 0:Y.call(e)])])},default:()=>je("div",{class:i.e("title"),onClick:N},G)}):je(Ue,{},[je("div",{class:i.e("title"),ref:h,onClick:N},G),je(Kv,{},{default:()=>{var Y;return rt(je("ul",{role:"menu",class:[o.b(),o.m("inline")],style:k.value},[(Y=e.default)==null?void 0:Y.call(e)]),[[Rt,w.value]])}})]);return je("li",{class:[i.b(),i.is("active",x.value),i.is("opened",w.value),i.is("disabled",t.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:w.value,onMouseenter:W,onMouseleave:()=>_(),onFocus:W},[K])}}});const oye=Re({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:Q(Array),default:()=>mn([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:Zt,default:()=>are},popperEffect:{type:String,values:["dark","light"],default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300}}),ay=t=>Array.isArray(t)&&t.every(e=>tt(e)),iye={close:(t,e)=>tt(t)&&ay(e),open:(t,e)=>tt(t)&&ay(e),select:(t,e,n,r)=>tt(t)&&ay(e)&&pt(n)&&(r===void 0||r instanceof Promise)};var lye=q({name:"ElMenu",props:oye,emits:iye,setup(t,{emit:e,slots:n,expose:r}){const a=ot(),s=a.appContext.config.globalProperties.$router,o=P(),i=Ce("menu"),l=Ce("sub-menu"),c=P(-1),u=P(t.defaultOpeneds&&!t.collapse?t.defaultOpeneds.slice(0):[]),f=P(t.defaultActive),d=P({}),p=P({}),h=R(()=>t.mode==="horizontal"||t.mode==="vertical"&&t.collapse),g=()=>{const B=f.value&&d.value[f.value];if(!B||t.mode==="horizontal"||t.collapse)return;B.indexPath.forEach($=>{const N=p.value[$];N&&y($,N.indexPath)})},y=(B,F)=>{u.value.includes(B)||(t.uniqueOpened&&(u.value=u.value.filter($=>F.includes($))),u.value.push(B),e("open",B,F))},m=B=>{const F=u.value.indexOf(B);F!==-1&&u.value.splice(F,1)},b=(B,F)=>{m(B),e("close",B,F)},C=({index:B,indexPath:F})=>{u.value.includes(B)?b(B,F):y(B,F)},S=B=>{(t.mode==="horizontal"||t.collapse)&&(u.value=[]);const{index:F,indexPath:$}=B;if(!(er(F)||er($)))if(t.router&&s){const N=B.route||F,W=s.push(N).then(_=>(_||(f.value=F),_));e("select",F,$,{index:F,indexPath:$,route:N},W)}else f.value=F,e("select",F,$,{index:F,indexPath:$})},T=B=>{const F=d.value,$=F[B]||f.value&&F[f.value]||F[t.defaultActive];$?f.value=$.index:f.value=B},w=B=>{const F=getComputedStyle(B),$=Number.parseInt(F.marginLeft,10),N=Number.parseInt(F.marginRight,10);return B.offsetWidth+$+N||0},x=()=>{var B,F;if(!o.value)return-1;const $=Array.from((F=(B=o.value)==null?void 0:B.childNodes)!=null?F:[]).filter(te=>te.nodeName!=="#comment"&&(te.nodeName!=="#text"||te.nodeValue)),N=64,W=getComputedStyle(o.value),_=Number.parseInt(W.paddingLeft,10),L=Number.parseInt(W.paddingRight,10),G=o.value.clientWidth-_-L;let K=0,Y=0;return $.forEach((te,ve)=>{K+=w(te),K<=G-N&&(Y=ve+1)}),Y===$.length?-1:Y},E=B=>p.value[B].indexPath,O=(B,F=33.34)=>{let $;return()=>{$&&clearTimeout($),$=setTimeout(()=>{B()},F)}};let k=!0;const M=()=>{const B=()=>{c.value=-1,Ye(()=>{c.value=x()})};k?B():O(B)(),k=!1};pe(()=>t.defaultActive,B=>{d.value[B]||(f.value=""),T(B)}),pe(()=>t.collapse,B=>{B&&(u.value=[])}),pe(d.value,g);let D;Sr(()=>{t.mode==="horizontal"&&t.ellipsis?D=Sn(o,M).stop:D==null||D()});const I=P(!1);{const B=W=>{p.value[W.index]=W},F=W=>{delete p.value[W.index]};bt("rootMenu",Dt({props:t,openedMenus:u,items:d,subMenus:p,activeIndex:f,isMenuPopup:h,addMenuItem:W=>{d.value[W.index]=W},removeMenuItem:W=>{delete d.value[W.index]},addSubMenu:B,removeSubMenu:F,openMenu:y,closeMenu:b,handleMenuItemClick:S,handleSubMenuClick:C})),bt(`subMenu:${a.uid}`,{addSubMenu:B,removeSubMenu:F,mouseInChild:I,level:0})}return at(()=>{t.mode==="horizontal"&&new eye(a.vnode.el,i.namespace.value)}),r({open:F=>{const{indexPath:$}=p.value[F];$.forEach(N=>y(N,$))},close:m,handleResize:M}),()=>{var B,F;let $=(F=(B=n.default)==null?void 0:B.call(n))!=null?F:[];const N=[];if(t.mode==="horizontal"&&o.value){const G=ri($),K=c.value===-1?G:G.slice(0,c.value),Y=c.value===-1?[]:G.slice(c.value);Y!=null&&Y.length&&t.ellipsis&&($=K,N.push(je(cb,{index:"sub-menu-more",class:l.e("hide-arrow"),popperOffset:t.popperOffset},{title:()=>je(Ge,{class:l.e("icon-more")},{default:()=>je(t.ellipsisIcon)}),default:()=>Y})))}const W=XN(t,0),_=t.closeOnClickOutside?[[go,()=>{u.value.length&&(I.value||(u.value.forEach(G=>e("close",G,E(G))),u.value=[]))}]]:[],L=rt(je("ul",{key:String(t.collapse),role:"menubar",ref:o,style:W.value,class:{[i.b()]:!0,[i.m(t.mode)]:!0,[i.m("collapse")]:t.collapse}},[...$,...N]),_);return t.collapseTransition&&t.mode==="vertical"?je(rye,()=>L):L}}});const cye=Re({index:{type:Q([String,null]),default:null},route:{type:Q([String,Object])},disabled:Boolean}),uye={click:t=>tt(t.index)&&Array.isArray(t.indexPath)},sy="ElMenuItem",fye=q({name:sy,components:{ElTooltip:Dr},props:cye,emits:uye,setup(t,{emit:e}){const n=ot(),r=We("rootMenu"),a=Ce("menu"),s=Ce("menu-item");r||Yn(sy,"can not inject root menu");const{parentMenu:o,indexPath:i}=qN(n,tn(t,"index")),l=We(`subMenu:${o.value.uid}`);l||Yn(sy,"can not inject sub menu");const c=R(()=>t.index===r.activeIndex),u=Dt({index:t.index,indexPath:i,active:c}),f=()=>{t.disabled||(r.handleMenuItemClick({index:t.index,indexPath:i.value,route:t.route}),e("click",u))};return at(()=>{l.addSubMenu(u),r.addMenuItem(u)}),ln(()=>{l.removeSubMenu(u),r.removeMenuItem(u)}),{parentMenu:o,rootMenu:r,active:c,nsMenu:a,nsMenuItem:s,handleClick:f}}});function dye(t,e,n,r,a,s){const o=et("el-tooltip");return V(),z("li",{class:U([t.nsMenuItem.b(),t.nsMenuItem.is("active",t.active),t.nsMenuItem.is("disabled",t.disabled)]),role:"menuitem",tabindex:"-1",onClick:e[0]||(e[0]=(...i)=>t.handleClick&&t.handleClick(...i))},[t.parentMenu.type.name==="ElMenu"&&t.rootMenu.props.collapse&&t.$slots.title?(V(),ae(o,{key:0,effect:t.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:Z(()=>[ce(t.$slots,"title")]),default:Z(()=>[H("div",{class:U(t.nsMenu.be("tooltip","trigger"))},[ce(t.$slots,"default")],2)]),_:3},8,["effect"])):(V(),z(Ue,{key:1},[ce(t.$slots,"default"),ce(t.$slots,"title")],64))],2)}var ZN=Ve(fye,[["render",dye],["__file","menu-item.vue"]]);const pye={title:String},gye="ElMenuItemGroup",hye=q({name:gye,props:pye,setup(){return{ns:Ce("menu-item-group")}}});function vye(t,e,n,r,a,s){return V(),z("li",{class:U(t.ns.b())},[H("div",{class:U(t.ns.e("title"))},[t.$slots.title?ce(t.$slots,"title",{key:1}):(V(),z(Ue,{key:0},[Ct(Te(t.title),1)],64))],2),H("ul",null,[ce(t.$slots,"default")])],2)}var JN=Ve(hye,[["render",vye],["__file","menu-item-group.vue"]]);const yye=lt(lye,{MenuItem:ZN,MenuItemGroup:JN,SubMenu:cb}),mye=bn(ZN),Cye=bn(JN),Sye=bn(cb),bye=Re({icon:{type:Zt,default:()=>Mne},title:String,content:{type:String,default:""}}),wye={back:()=>!0},Tye=["aria-label"],xye=q({name:"ElPageHeader"}),Eye=q({...xye,props:bye,emits:wye,setup(t,{emit:e}){const n=rr(),{t:r}=Mt(),a=Ce("page-header"),s=R(()=>[a.b(),{[a.m("has-breadcrumb")]:!!n.breadcrumb,[a.m("has-extra")]:!!n.extra,[a.is("contentful")]:!!n.default}]);function o(){e("back")}return(i,l)=>(V(),z("div",{class:U(v(s))},[i.$slots.breadcrumb?(V(),z("div",{key:0,class:U(v(a).e("breadcrumb"))},[ce(i.$slots,"breadcrumb")],2)):ee("v-if",!0),H("div",{class:U(v(a).e("header"))},[H("div",{class:U(v(a).e("left"))},[H("div",{class:U(v(a).e("back")),role:"button",tabindex:"0",onClick:o},[i.icon||i.$slots.icon?(V(),z("div",{key:0,"aria-label":i.title||v(r)("el.pageHeader.title"),class:U(v(a).e("icon"))},[ce(i.$slots,"icon",{},()=>[i.icon?(V(),ae(v(Ge),{key:0},{default:Z(()=>[(V(),ae(dt(i.icon)))]),_:1})):ee("v-if",!0)])],10,Tye)):ee("v-if",!0),H("div",{class:U(v(a).e("title"))},[ce(i.$slots,"title",{},()=>[Ct(Te(i.title||v(r)("el.pageHeader.title")),1)])],2)],2),j(v($N),{direction:"vertical"}),H("div",{class:U(v(a).e("content"))},[ce(i.$slots,"content",{},()=>[Ct(Te(i.content),1)])],2)],2),i.$slots.extra?(V(),z("div",{key:0,class:U(v(a).e("extra"))},[ce(i.$slots,"extra")],2)):ee("v-if",!0)],2),i.$slots.default?(V(),z("div",{key:1,class:U(v(a).e("main"))},[ce(i.$slots,"default")],2)):ee("v-if",!0)],2))}});var kye=Ve(Eye,[["__file","page-header.vue"]]);const Oye=lt(kye),QN=Symbol("elPaginationKey"),Mye=Re({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:Zt}}),Rye={click:t=>t instanceof MouseEvent},_ye=["disabled","aria-label","aria-disabled"],Vye={key:0},Dye=q({name:"ElPaginationPrev"}),Lye=q({...Dye,props:Mye,emits:Rye,setup(t){const e=t,{t:n}=Mt(),r=R(()=>e.disabled||e.currentPage<=1);return(a,s)=>(V(),z("button",{type:"button",class:"btn-prev",disabled:v(r),"aria-label":a.prevText||v(n)("el.pagination.prev"),"aria-disabled":v(r),onClick:s[0]||(s[0]=o=>a.$emit("click",o))},[a.prevText?(V(),z("span",Vye,Te(a.prevText),1)):(V(),ae(v(Ge),{key:1},{default:Z(()=>[(V(),ae(dt(a.prevIcon)))]),_:1}))],8,_ye))}});var Nye=Ve(Lye,[["__file","prev.vue"]]);const Bye=Re({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:Zt}}),Fye=["disabled","aria-label","aria-disabled"],$ye={key:0},Uye=q({name:"ElPaginationNext"}),Aye=q({...Uye,props:Bye,emits:["click"],setup(t){const e=t,{t:n}=Mt(),r=R(()=>e.disabled||e.currentPage===e.pageCount||e.pageCount===0);return(a,s)=>(V(),z("button",{type:"button",class:"btn-next",disabled:v(r),"aria-label":a.nextText||v(n)("el.pagination.next"),"aria-disabled":v(r),onClick:s[0]||(s[0]=o=>a.$emit("click",o))},[a.nextText?(V(),z("span",$ye,Te(a.nextText),1)):(V(),ae(v(Ge),{key:1},{default:Z(()=>[(V(),ae(dt(a.nextIcon)))]),_:1}))],8,Fye))}});var Wye=Ve(Aye,[["__file","next.vue"]]);const eB=Symbol("ElSelectGroup"),Od=Symbol("ElSelect");function Iye(t,e){const n=We(Od),r=We(eB,{disabled:!1}),a=R(()=>n.props.multiple?u(n.props.modelValue,t.value):u([n.props.modelValue],t.value)),s=R(()=>{if(n.props.multiple){const p=n.props.modelValue||[];return!a.value&&p.length>=n.props.multipleLimit&&n.props.multipleLimit>0}else return!1}),o=R(()=>t.label||(pt(t.value)?"":t.value)),i=R(()=>t.value||t.label||""),l=R(()=>t.disabled||e.groupDisabled||s.value),c=ot(),u=(p=[],h)=>{if(pt(t.value)){const g=n.props.valueKey;return p&&p.some(y=>Ht(Vn(y,g))===Vn(h,g))}else return p&&p.includes(h)},f=()=>{!t.disabled&&!r.disabled&&(n.states.hoveringIndex=n.optionsArray.indexOf(c.proxy))},d=p=>{const h=new RegExp(yS(p),"i");e.visible=h.test(o.value)||t.created};return pe(()=>o.value,()=>{!t.created&&!n.props.remote&&n.setSelected()}),pe(()=>t.value,(p,h)=>{const{remote:g,valueKey:y}=n.props;if(Or(p,h)||(n.onOptionDestroy(h,c.proxy),n.onOptionCreate(c.proxy)),!t.created&&!g){if(y&&pt(p)&&pt(h)&&p[y]===h[y])return;n.setSelected()}}),pe(()=>r.disabled,()=>{e.groupDisabled=r.disabled},{immediate:!0}),{select:n,currentLabel:o,currentValue:i,itemSelected:a,isDisabled:l,hoverItem:f,updateOption:d}}const Pye=q({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(t){const e=Ce("select"),n=Vr(),r=R(()=>[e.be("dropdown","item"),e.is("disabled",v(i)),e.is("selected",v(o)),e.is("hovering",v(d))]),a=Dt({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:s,itemSelected:o,isDisabled:i,select:l,hoverItem:c,updateOption:u}=Iye(t,a),{visible:f,hover:d}=hr(a),p=ot().proxy;l.onOptionCreate(p),ln(()=>{const g=p.value,{selected:y}=l.states,b=(l.props.multiple?y:[y]).some(C=>C.value===p.value);Ye(()=>{l.states.cachedOptions.get(g)===p&&!b&&l.states.cachedOptions.delete(g)}),l.onOptionDestroy(g,p)});function h(){t.disabled!==!0&&a.groupDisabled!==!0&&l.handleOptionSelect(p)}return{ns:e,id:n,containerKls:r,currentLabel:s,itemSelected:o,isDisabled:i,select:l,hoverItem:c,updateOption:u,visible:f,hover:d,selectOptionClick:h,states:a}}}),Gye=["id","aria-disabled","aria-selected"];function zye(t,e,n,r,a,s){return rt((V(),z("li",{id:t.id,class:U(t.containerKls),role:"option","aria-disabled":t.isDisabled||void 0,"aria-selected":t.itemSelected,onMouseenter:e[0]||(e[0]=(...o)=>t.hoverItem&&t.hoverItem(...o)),onClick:e[1]||(e[1]=Ze((...o)=>t.selectOptionClick&&t.selectOptionClick(...o),["stop"]))},[ce(t.$slots,"default",{},()=>[H("span",null,Te(t.currentLabel),1)])],42,Gye)),[[Rt,t.visible]])}var ub=Ve(Pye,[["render",zye],["__file","option.vue"]]);const Hye=q({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const t=We(Od),e=Ce("select"),n=R(()=>t.props.popperClass),r=R(()=>t.props.multiple),a=R(()=>t.props.fitInputWidth),s=P("");function o(){var i;s.value=`${(i=t.selectRef)==null?void 0:i.offsetWidth}px`}return at(()=>{o(),Sn(t.selectRef,o)}),{ns:e,minWidth:s,popperClass:n,isMultiple:r,isFitInputWidth:a}}});function Kye(t,e,n,r,a,s){return V(),z("div",{class:U([t.ns.b("dropdown"),t.ns.is("multiple",t.isMultiple),t.popperClass]),style:Pe({[t.isFitInputWidth?"width":"minWidth"]:t.minWidth})},[t.$slots.header?(V(),z("div",{key:0,class:U(t.ns.be("dropdown","header"))},[ce(t.$slots,"header")],2)):ee("v-if",!0),ce(t.$slots,"default"),t.$slots.footer?(V(),z("div",{key:1,class:U(t.ns.be("dropdown","footer"))},[ce(t.$slots,"footer")],2)):ee("v-if",!0)],6)}var jye=Ve(Hye,[["render",Kye],["__file","select-dropdown.vue"]]);function tB(t){const e=P(!1);return{handleCompositionStart:()=>{e.value=!0},handleCompositionUpdate:s=>{const o=s.target.value,i=o[o.length-1]||"";e.value=!kS(i)},handleCompositionEnd:s=>{e.value&&(e.value=!1,Je(t)&&t(s))}}}const Yye=11,qye=(t,e)=>{const{t:n}=Mt(),r=Vr(),a=Ce("select"),s=Ce("input"),o=Dt({inputValue:"",options:new Map,cachedOptions:new Map,disabledOptions:new Map,optionValues:[],selected:t.multiple?[]:{},selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1});uo({from:"suffixTransition",replacement:"override style scheme",version:"2.3.0",scope:"props",ref:"https://element-plus.org/en-US/component/select.html#select-attributes"},R(()=>t.suffixTransition===!1));const i=P(null),l=P(null),c=P(null),u=P(null),f=P(null),d=P(null),p=P(null),h=P(null),g=P(null),y=P(null),m=P(null),b=P(null),{wrapperRef:C,isFocused:S,handleFocus:T,handleBlur:w}=Wv(f,{afterFocus(){t.automaticDropdown&&!x.value&&(x.value=!0,o.menuVisibleOnFocus=!0)},beforeBlur(Le){var Qe,un;return((Qe=c.value)==null?void 0:Qe.isFocusInsideContent(Le))||((un=u.value)==null?void 0:un.isFocusInsideContent(Le))},afterBlur(){x.value=!1,o.menuVisibleOnFocus=!1}}),x=P(!1),E=P(),{form:O,formItem:k}=Hr(),{inputId:M}=Bs(t,{formItemContext:k}),D=R(()=>t.disabled||(O==null?void 0:O.disabled)),I=R(()=>t.multiple?Be(t.modelValue)&&t.modelValue.length>0:t.modelValue!==void 0&&t.modelValue!==null&&t.modelValue!==""),B=R(()=>t.clearable&&!D.value&&o.inputHovering&&I.value),F=R(()=>t.remote&&t.filterable&&!t.remoteShowSuffix?"":t.suffixIcon),$=R(()=>a.is("reverse",F.value&&x.value&&t.suffixTransition)),N=R(()=>(k==null?void 0:k.validateState)||""),W=R(()=>ES[N.value]),_=R(()=>t.remote?300:0),L=R(()=>t.loading?t.loadingText||n("el.select.loading"):t.remote&&!o.inputValue&&o.options.size===0?!1:t.filterable&&o.inputValue&&o.options.size>0&&G.value===0?t.noMatchText||n("el.select.noMatch"):o.options.size===0?t.noDataText||n("el.select.noData"):null),G=R(()=>K.value.filter(Le=>Le.visible).length),K=R(()=>{const Le=Array.from(o.options.values()),Qe=[];return o.optionValues.forEach(un=>{const Fn=Le.findIndex(Fa=>Fa.value===un);Fn>-1&&Qe.push(Le[Fn])}),Qe.length>=Le.length?Qe:Le}),Y=R(()=>Array.from(o.cachedOptions.values())),te=R(()=>{const Le=K.value.filter(Qe=>!Qe.created).some(Qe=>Qe.currentLabel===o.inputValue);return t.filterable&&t.allowCreate&&o.inputValue!==""&&!Le}),ve=()=>{t.filterable&&Je(t.filterMethod)||t.filterable&&t.remote&&Je(t.remoteMethod)||K.value.forEach(Le=>{Le.updateOption(o.inputValue)})},se=qn(),ie=R(()=>["small"].includes(se.value)?"small":"default"),re=R({get(){return x.value&&L.value!==!1},set(Le){x.value=Le}}),be=R(()=>Be(t.modelValue)?t.modelValue.length===0&&!o.inputValue:t.filterable?!o.inputValue:!0),ge=R(()=>{var Le;const Qe=(Le=t.placeholder)!=null?Le:n("el.select.placeholder");return t.multiple||!I.value?Qe:o.selectedLabel});pe(()=>t.modelValue,(Le,Qe)=>{t.multiple&&t.filterable&&!t.reserveKeyword&&(o.inputValue="",Se("")),X(),!Or(Le,Qe)&&t.validateEvent&&(k==null||k.validate("change").catch(un=>void 0))},{flush:"post",deep:!0}),pe(()=>x.value,Le=>{Le?Se(o.inputValue):(o.inputValue="",o.previousQuery=null,o.isBeforeHide=!0),e("visible-change",Le)}),pe(()=>o.options.entries(),()=>{var Le;if(!Ot)return;const Qe=((Le=i.value)==null?void 0:Le.querySelectorAll("input"))||[];(!t.filterable&&!t.defaultFirstOption&&!Kn(t.modelValue)||!Array.from(Qe).includes(document.activeElement))&&X(),t.defaultFirstOption&&(t.filterable||t.remote)&&G.value&&De()},{flush:"post"}),pe(()=>o.hoveringIndex,Le=>{Xe(Le)&&Le>-1?E.value=K.value[Le]||{}:E.value={},K.value.forEach(Qe=>{Qe.hover=E.value===Qe})}),Sr(()=>{o.isBeforeHide||ve()});const Se=Le=>{o.previousQuery!==Le&&(o.previousQuery=Le,t.filterable&&Je(t.filterMethod)?t.filterMethod(Le):t.filterable&&t.remote&&Je(t.remoteMethod)&&t.remoteMethod(Le),t.defaultFirstOption&&(t.filterable||t.remote)&&G.value?Ye(De):Ye(me))},De=()=>{const Le=K.value.filter(Fn=>Fn.visible&&!Fn.disabled&&!Fn.states.groupDisabled),Qe=Le.find(Fn=>Fn.created),un=Le[0];o.hoveringIndex=Ke(K.value,Qe||un)},X=()=>{if(t.multiple)o.selectedLabel="";else{const Qe=ne(t.modelValue);o.selectedLabel=Qe.currentLabel,o.selected=Qe;return}const Le=[];Be(t.modelValue)&&t.modelValue.forEach(Qe=>{Le.push(ne(Qe))}),o.selected=Le},ne=Le=>{let Qe;const un=tg(Le).toLowerCase()==="object",Fn=tg(Le).toLowerCase()==="null",Fa=tg(Le).toLowerCase()==="undefined";for(let $a=o.cachedOptions.size-1;$a>=0;$a--){const da=Y.value[$a];if(un?Vn(da.value,t.valueKey)===Vn(Le,t.valueKey):da.value===Le){Qe={value:Le,currentLabel:da.currentLabel,isDisabled:da.isDisabled};break}}if(Qe)return Qe;const ko=un?Le.label:!Fn&&!Fa?Le:"";return{value:Le,currentLabel:ko}},me=()=>{t.multiple?o.selected.length>0?o.hoveringIndex=Math.min(...o.selected.map(Le=>K.value.findIndex(Qe=>Eo(Qe)===Eo(Le)))):o.hoveringIndex=-1:o.hoveringIndex=K.value.findIndex(Le=>Eo(Le)===Eo(o.selected))},Ee=()=>{o.selectionWidth=l.value.getBoundingClientRect().width},de=()=>{o.calculatorWidth=d.value.getBoundingClientRect().width},xe=()=>{o.collapseItemWidth=m.value.getBoundingClientRect().width},ke=()=>{var Le,Qe;(Qe=(Le=c.value)==null?void 0:Le.updatePopper)==null||Qe.call(Le)},ye=()=>{var Le,Qe;(Qe=(Le=u.value)==null?void 0:Le.updatePopper)==null||Qe.call(Le)},_e=()=>{o.inputValue.length>0&&!x.value&&(x.value=!0),Se(o.inputValue)},Oe=Le=>{if(o.inputValue=Le.target.value,t.remote)Fe();else return _e()},Fe=ta(()=>{_e()},_.value),ze=Le=>{Or(t.modelValue,Le)||e(pn,Le)},he=Le=>fL(Le,Qe=>!o.disabledOptions.has(Qe)),Ae=Le=>{if(t.multiple&&Le.code!==He.delete&&Le.target.value.length<=0){const Qe=t.modelValue.slice(),un=he(Qe);if(un<0)return;Qe.splice(un,1),e(ut,Qe),ze(Qe)}},qe=(Le,Qe)=>{const un=o.selected.indexOf(Qe);if(un>-1&&!D.value){const Fn=t.modelValue.slice();Fn.splice(un,1),e(ut,Fn),ze(Fn),e("remove-tag",Qe.value)}Le.stopPropagation(),On()},st=Le=>{Le.stopPropagation();const Qe=t.multiple?[]:"";if(!tt(Qe))for(const un of o.selected)un.isDisabled&&Qe.push(un.value);e(ut,Qe),ze(Qe),o.hoveringIndex=-1,x.value=!1,e("clear"),On()},vt=Le=>{if(t.multiple){const Qe=(t.modelValue||[]).slice(),un=Ke(Qe,Le.value);un>-1?Qe.splice(un,1):(t.multipleLimit<=0||Qe.length<t.multipleLimit)&&Qe.push(Le.value),e(ut,Qe),ze(Qe),Le.created&&Se(""),t.filterable&&!t.reserveKeyword&&(o.inputValue="")}else e(ut,Le.value),ze(Le.value),x.value=!1;On(),!x.value&&Ye(()=>{fe(Le)})},Ke=(Le=[],Qe)=>{if(!pt(Qe))return Le.indexOf(Qe);const un=t.valueKey;let Fn=-1;return Le.some((Fa,ko)=>Ht(Vn(Fa,un))===Vn(Qe,un)?(Fn=ko,!0):!1),Fn},fe=Le=>{var Qe,un,Fn,Fa,ko;const Gl=Be(Le)?Le[0]:Le;let $a=null;if(Gl!=null&&Gl.value){const da=K.value.filter(zl=>zl.value===Gl.value);da.length>0&&($a=da[0].$el)}if(c.value&&$a){const da=(Fa=(Fn=(un=(Qe=c.value)==null?void 0:Qe.popperRef)==null?void 0:un.contentRef)==null?void 0:Fn.querySelector)==null?void 0:Fa.call(Fn,`.${a.be("dropdown","wrap")}`);da&&vL(da,$a)}(ko=b.value)==null||ko.handleScroll()},le=Le=>{o.options.set(Le.value,Le),o.cachedOptions.set(Le.value,Le),Le.disabled&&o.disabledOptions.set(Le.value,Le)},oe=(Le,Qe)=>{o.options.get(Le)===Qe&&o.options.delete(Le)},{handleCompositionStart:we,handleCompositionUpdate:J,handleCompositionEnd:$e}=tB(Le=>Oe(Le)),nt=R(()=>{var Le,Qe;return(Qe=(Le=c.value)==null?void 0:Le.popperRef)==null?void 0:Qe.contentRef}),yt=()=>{Ye(()=>fe(o.selected))},On=()=>{var Le;(Le=f.value)==null||Le.focus()},Ln=()=>{vr()},ls=Le=>{st(Le)},vr=Le=>{if(x.value=!1,S.value){const Qe=new FocusEvent("focus",Le);Ye(()=>w(Qe))}},Kt=()=>{o.inputValue.length>0?o.inputValue="":x.value=!1},Cn=()=>{D.value||(o.menuVisibleOnFocus?o.menuVisibleOnFocus=!1:x.value=!x.value)},ra=()=>{x.value?K.value[o.hoveringIndex]&&vt(K.value[o.hoveringIndex]):Cn()},Eo=Le=>pt(Le.value)?Vn(Le.value,t.valueKey):Le.value,Ld=R(()=>K.value.filter(Le=>Le.visible).every(Le=>Le.disabled)),s0=R(()=>t.multiple?t.collapseTags?o.selected.slice(0,t.maxCollapseTags):o.selected:[]),Pl=R(()=>t.multiple?t.collapseTags?o.selected.slice(t.maxCollapseTags):[]:[]),Nd=Le=>{if(!x.value){x.value=!0;return}if(!(o.options.size===0||G.value===0)&&!Ld.value){Le==="next"?(o.hoveringIndex++,o.hoveringIndex===o.options.size&&(o.hoveringIndex=0)):Le==="prev"&&(o.hoveringIndex--,o.hoveringIndex<0&&(o.hoveringIndex=o.options.size-1));const Qe=K.value[o.hoveringIndex];(Qe.disabled===!0||Qe.states.groupDisabled===!0||!Qe.visible)&&Nd(Le),Ye(()=>fe(E.value))}},o0=()=>{if(!l.value)return 0;const Le=window.getComputedStyle(l.value);return Number.parseFloat(Le.gap||"6px")},i0=R(()=>{const Le=o0();return{maxWidth:`${m.value&&t.maxCollapseTags===1?o.selectionWidth-o.collapseItemWidth-Le:o.selectionWidth}px`}}),l0=R(()=>({maxWidth:`${o.selectionWidth}px`})),c0=R(()=>({width:`${Math.max(o.calculatorWidth,Yye)}px`}));return t.multiple&&!Be(t.modelValue)&&e(ut,[]),!t.multiple&&Be(t.modelValue)&&e(ut,""),Sn(l,Ee),Sn(d,de),Sn(g,ke),Sn(C,ke),Sn(y,ye),Sn(m,xe),at(()=>{X()}),{inputId:M,contentId:r,nsSelect:a,nsInput:s,states:o,isFocused:S,expanded:x,optionsArray:K,hoverOption:E,selectSize:se,filteredOptionsCount:G,resetCalculatorWidth:de,updateTooltip:ke,updateTagTooltip:ye,debouncedOnInputChange:Fe,onInput:Oe,deletePrevTag:Ae,deleteTag:qe,deleteSelected:st,handleOptionSelect:vt,scrollToOption:fe,hasModelValue:I,shouldShowPlaceholder:be,currentPlaceholder:ge,showClose:B,iconComponent:F,iconReverse:$,validateState:N,validateIcon:W,showNewOption:te,updateOptions:ve,collapseTagSize:ie,setSelected:X,selectDisabled:D,emptyText:L,handleCompositionStart:we,handleCompositionUpdate:J,handleCompositionEnd:$e,onOptionCreate:le,onOptionDestroy:oe,handleMenuEnter:yt,handleFocus:T,focus:On,blur:Ln,handleBlur:w,handleClearClick:ls,handleClickOutside:vr,handleEsc:Kt,toggleMenu:Cn,selectOption:ra,getValueKey:Eo,navigateOptions:Nd,dropdownMenuVisible:re,showTagList:s0,collapseTagList:Pl,tagStyle:i0,collapseTagStyle:l0,inputStyle:c0,popperRef:nt,inputRef:f,tooltipRef:c,tagTooltipRef:u,calculatorRef:d,prefixRef:p,suffixRef:h,selectRef:i,wrapperRef:C,selectionRef:l,scrollbarRef:b,menuRef:g,tagMenuRef:y,collapseItemRef:m}};var Xye=q({name:"ElOptions",setup(t,{slots:e}){const n=We(Od);let r=[];return()=>{var a,s;const o=(a=e.default)==null?void 0:a.call(e),i=[];function l(c){Be(c)&&c.forEach(u=>{var f,d,p,h;const g=(f=(u==null?void 0:u.type)||{})==null?void 0:f.name;g==="ElOptionGroup"?l(!tt(u.children)&&!Be(u.children)&&Je((d=u.children)==null?void 0:d.default)?(p=u.children)==null?void 0:p.default():u.children):g==="ElOption"?i.push((h=u.props)==null?void 0:h.value):Be(u.children)&&l(u.children)})}return o.length&&l((s=o[0])==null?void 0:s.children),Or(i,r)||(r=i,n&&(n.states.optionValues=i)),o}}});const Zye=Re({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:lr,effect:{type:Q(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Q(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:dr.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:Zt,default:vi},fitInputWidth:Boolean,suffixIcon:{type:Zt,default:bo},tagType:{...Hv.type,default:"info"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,suffixTransition:{type:Boolean,default:!0},placement:{type:Q(String),values:Al,default:"bottom-start"},fallbackPlacements:{type:Q(Array),default:["bottom-start","top-start","right","left"]},ariaLabel:{type:String,default:void 0}}),CE="ElSelect",Jye=q({name:CE,componentName:CE,components:{ElInput:kr,ElSelectMenu:jye,ElOption:ub,ElOptions:Xye,ElTag:If,ElScrollbar:To,ElTooltip:Dr,ElIcon:Ge},directives:{ClickOutside:go},props:Zye,emits:[ut,pn,"remove-tag","clear","visible-change","focus","blur"],setup(t,{emit:e}){const n=qye(t,e);return bt(Od,Dt({props:t,states:n.states,optionsArray:n.optionsArray,handleOptionSelect:n.handleOptionSelect,onOptionCreate:n.onOptionCreate,onOptionDestroy:n.onOptionDestroy,selectRef:n.selectRef,setSelected:n.setSelected})),{...n}}}),Qye=["id","disabled","autocomplete","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label"],eme=["textContent"];function tme(t,e,n,r,a,s){const o=et("el-tag"),i=et("el-tooltip"),l=et("el-icon"),c=et("el-option"),u=et("el-options"),f=et("el-scrollbar"),d=et("el-select-menu"),p=mv("click-outside");return rt((V(),z("div",{ref:"selectRef",class:U([t.nsSelect.b(),t.nsSelect.m(t.selectSize)]),onMouseenter:e[14]||(e[14]=h=>t.states.inputHovering=!0),onMouseleave:e[15]||(e[15]=h=>t.states.inputHovering=!1),onClick:e[16]||(e[16]=Ze((...h)=>t.toggleMenu&&t.toggleMenu(...h),["stop"]))},[j(i,{ref:"tooltipRef",visible:t.dropdownMenuVisible,placement:t.placement,teleported:t.teleported,"popper-class":[t.nsSelect.e("popper"),t.popperClass],"popper-options":t.popperOptions,"fallback-placements":t.fallbackPlacements,effect:t.effect,pure:"",trigger:"click",transition:`${t.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:t.persistent,onBeforeShow:t.handleMenuEnter,onHide:e[13]||(e[13]=h=>t.states.isBeforeHide=!1)},{default:Z(()=>{var h;return[H("div",{ref:"wrapperRef",class:U([t.nsSelect.e("wrapper"),t.nsSelect.is("focused",t.isFocused),t.nsSelect.is("hovering",t.states.inputHovering),t.nsSelect.is("filterable",t.filterable),t.nsSelect.is("disabled",t.selectDisabled)])},[t.$slots.prefix?(V(),z("div",{key:0,ref:"prefixRef",class:U(t.nsSelect.e("prefix"))},[ce(t.$slots,"prefix")],2)):ee("v-if",!0),H("div",{ref:"selectionRef",class:U([t.nsSelect.e("selection"),t.nsSelect.is("near",t.multiple&&!t.$slots.prefix&&!!t.states.selected.length)])},[t.multiple?ce(t.$slots,"tag",{key:0},()=>[(V(!0),z(Ue,null,gt(t.showTagList,g=>(V(),z("div",{key:t.getValueKey(g),class:U(t.nsSelect.e("selected-item"))},[j(o,{closable:!t.selectDisabled&&!g.isDisabled,size:t.collapseTagSize,type:t.tagType,"disable-transitions":"",style:Pe(t.tagStyle),onClose:y=>t.deleteTag(y,g)},{default:Z(()=>[H("span",{class:U(t.nsSelect.e("tags-text"))},Te(g.currentLabel),3)]),_:2},1032,["closable","size","type","style","onClose"])],2))),128)),t.collapseTags&&t.states.selected.length>t.maxCollapseTags?(V(),ae(i,{key:0,ref:"tagTooltipRef",disabled:t.dropdownMenuVisible||!t.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:t.effect,placement:"bottom",teleported:t.teleported},{default:Z(()=>[H("div",{ref:"collapseItemRef",class:U(t.nsSelect.e("selected-item"))},[j(o,{closable:!1,size:t.collapseTagSize,type:t.tagType,"disable-transitions":"",style:Pe(t.collapseTagStyle)},{default:Z(()=>[H("span",{class:U(t.nsSelect.e("tags-text"))}," + "+Te(t.states.selected.length-t.maxCollapseTags),3)]),_:1},8,["size","type","style"])],2)]),content:Z(()=>[H("div",{ref:"tagMenuRef",class:U(t.nsSelect.e("selection"))},[(V(!0),z(Ue,null,gt(t.collapseTagList,g=>(V(),z("div",{key:t.getValueKey(g),class:U(t.nsSelect.e("selected-item"))},[j(o,{class:"in-tooltip",closable:!t.selectDisabled&&!g.isDisabled,size:t.collapseTagSize,type:t.tagType,"disable-transitions":"",onClose:y=>t.deleteTag(y,g)},{default:Z(()=>[H("span",{class:U(t.nsSelect.e("tags-text"))},Te(g.currentLabel),3)]),_:2},1032,["closable","size","type","onClose"])],2))),128))],2)]),_:1},8,["disabled","effect","teleported"])):ee("v-if",!0)]):ee("v-if",!0),t.selectDisabled?ee("v-if",!0):(V(),z("div",{key:1,class:U([t.nsSelect.e("selected-item"),t.nsSelect.e("input-wrapper"),t.nsSelect.is("hidden",!t.filterable)])},[rt(H("input",{id:t.inputId,ref:"inputRef","onUpdate:modelValue":e[0]||(e[0]=g=>t.states.inputValue=g),type:"text",class:U([t.nsSelect.e("input"),t.nsSelect.is(t.selectSize)]),disabled:t.selectDisabled,autocomplete:t.autocomplete,style:Pe(t.inputStyle),role:"combobox",readonly:!t.filterable,spellcheck:"false","aria-activedescendant":((h=t.hoverOption)==null?void 0:h.id)||"","aria-controls":t.contentId,"aria-expanded":t.dropdownMenuVisible,"aria-label":t.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onFocus:e[1]||(e[1]=(...g)=>t.handleFocus&&t.handleFocus(...g)),onBlur:e[2]||(e[2]=(...g)=>t.handleBlur&&t.handleBlur(...g)),onKeydown:[e[3]||(e[3]=Xt(Ze(g=>t.navigateOptions("next"),["stop","prevent"]),["down"])),e[4]||(e[4]=Xt(Ze(g=>t.navigateOptions("prev"),["stop","prevent"]),["up"])),e[5]||(e[5]=Xt(Ze((...g)=>t.handleEsc&&t.handleEsc(...g),["stop","prevent"]),["esc"])),e[6]||(e[6]=Xt(Ze((...g)=>t.selectOption&&t.selectOption(...g),["stop","prevent"]),["enter"])),e[7]||(e[7]=Xt(Ze((...g)=>t.deletePrevTag&&t.deletePrevTag(...g),["stop"]),["delete"]))],onCompositionstart:e[8]||(e[8]=(...g)=>t.handleCompositionStart&&t.handleCompositionStart(...g)),onCompositionupdate:e[9]||(e[9]=(...g)=>t.handleCompositionUpdate&&t.handleCompositionUpdate(...g)),onCompositionend:e[10]||(e[10]=(...g)=>t.handleCompositionEnd&&t.handleCompositionEnd(...g)),onInput:e[11]||(e[11]=(...g)=>t.onInput&&t.onInput(...g)),onClick:e[12]||(e[12]=Ze((...g)=>t.toggleMenu&&t.toggleMenu(...g),["stop"]))},null,46,Qye),[[Pc,t.states.inputValue]]),t.filterable?(V(),z("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:U(t.nsSelect.e("input-calculator")),textContent:Te(t.states.inputValue)},null,10,eme)):ee("v-if",!0)],2)),t.shouldShowPlaceholder?(V(),z("div",{key:2,class:U([t.nsSelect.e("selected-item"),t.nsSelect.e("placeholder"),t.nsSelect.is("transparent",!t.hasModelValue||t.expanded&&!t.states.inputValue)])},[H("span",null,Te(t.currentPlaceholder),1)],2)):ee("v-if",!0)],2),H("div",{ref:"suffixRef",class:U(t.nsSelect.e("suffix"))},[t.iconComponent&&!t.showClose?(V(),ae(l,{key:0,class:U([t.nsSelect.e("caret"),t.nsSelect.e("icon"),t.iconReverse])},{default:Z(()=>[(V(),ae(dt(t.iconComponent)))]),_:1},8,["class"])):ee("v-if",!0),t.showClose&&t.clearIcon?(V(),ae(l,{key:1,class:U([t.nsSelect.e("caret"),t.nsSelect.e("icon")]),onClick:t.handleClearClick},{default:Z(()=>[(V(),ae(dt(t.clearIcon)))]),_:1},8,["class","onClick"])):ee("v-if",!0),t.validateState&&t.validateIcon?(V(),ae(l,{key:2,class:U([t.nsInput.e("icon"),t.nsInput.e("validateIcon")])},{default:Z(()=>[(V(),ae(dt(t.validateIcon)))]),_:1},8,["class"])):ee("v-if",!0)],2)],2)]}),content:Z(()=>[j(d,{ref:"menuRef"},{default:Z(()=>[t.$slots.header?(V(),z("div",{key:0,class:U(t.nsSelect.be("dropdown","header"))},[ce(t.$slots,"header")],2)):ee("v-if",!0),rt(j(f,{id:t.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":t.nsSelect.be("dropdown","wrap"),"view-class":t.nsSelect.be("dropdown","list"),class:U([t.nsSelect.is("empty",t.filteredOptionsCount===0)]),role:"listbox","aria-label":t.ariaLabel,"aria-orientation":"vertical"},{default:Z(()=>[t.showNewOption?(V(),ae(c,{key:0,value:t.states.inputValue,created:!0},null,8,["value"])):ee("v-if",!0),j(u,null,{default:Z(()=>[ce(t.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[Rt,t.states.options.size>0&&!t.loading]]),t.$slots.loading&&t.loading?(V(),z("div",{key:1,class:U(t.nsSelect.be("dropdown","loading"))},[ce(t.$slots,"loading")],2)):t.loading||t.filteredOptionsCount===0?(V(),z("div",{key:2,class:U(t.nsSelect.be("dropdown","empty"))},[ce(t.$slots,"empty",{},()=>[H("span",null,Te(t.emptyText),1)])],2)):ee("v-if",!0),t.$slots.footer?(V(),z("div",{key:3,class:U(t.nsSelect.be("dropdown","footer"))},[ce(t.$slots,"footer")],2)):ee("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","onBeforeShow"])],34)),[[p,t.handleClickOutside,t.popperRef]])}var nme=Ve(Jye,[["render",tme],["__file","select.vue"]]);const rme=q({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(t){const e=Ce("select"),n=P(null),r=ot(),a=P([]);bt(eB,Dt({...hr(t)}));const s=R(()=>a.value.some(l=>l.visible===!0)),o=l=>{const c=[];return Be(l.children)&&l.children.forEach(u=>{var f,d;u.type&&u.type.name==="ElOption"&&u.component&&u.component.proxy?c.push(u.component.proxy):(f=u.children)!=null&&f.length?c.push(...o(u)):(d=u.component)!=null&&d.subTree&&c.push(...o(u.component.subTree))}),c},i=()=>{a.value=o(r.subTree)};return at(()=>{i()}),ED(n,i,{attributes:!0,subtree:!0,childList:!0}),{groupRef:n,visible:s,ns:e}}});function ame(t,e,n,r,a,s){return rt((V(),z("ul",{ref:"groupRef",class:U(t.ns.be("group","wrap"))},[H("li",{class:U(t.ns.be("group","title"))},Te(t.label),3),H("li",null,[H("ul",{class:U(t.ns.b("group"))},[ce(t.$slots,"default")],2)])],2)),[[Rt,t.visible]])}var nB=Ve(rme,[["render",ame],["__file","option-group.vue"]]);const Ol=lt(nme,{Option:ub,OptionGroup:nB}),Vh=bn(ub),sme=bn(nB),fb=()=>We(QN,{}),ome=Re({pageSize:{type:Number,required:!0},pageSizes:{type:Q(Array),default:()=>mn([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:Ns}}),ime=q({name:"ElPaginationSizes"}),lme=q({...ime,props:ome,emits:["page-size-change"],setup(t,{emit:e}){const n=t,{t:r}=Mt(),a=Ce("pagination"),s=fb(),o=P(n.pageSize);pe(()=>n.pageSizes,(c,u)=>{if(!Or(c,u)&&Array.isArray(c)){const f=c.includes(n.pageSize)?n.pageSize:n.pageSizes[0];e("page-size-change",f)}}),pe(()=>n.pageSize,c=>{o.value=c});const i=R(()=>n.pageSizes);function l(c){var u;c!==o.value&&(o.value=c,(u=s.handleSizeChange)==null||u.call(s,Number(c)))}return(c,u)=>(V(),z("span",{class:U(v(a).e("sizes"))},[j(v(Ol),{"model-value":o.value,disabled:c.disabled,"popper-class":c.popperClass,size:c.size,teleported:c.teleported,"validate-event":!1,onChange:l},{default:Z(()=>[(V(!0),z(Ue,null,gt(v(i),f=>(V(),ae(v(Vh),{key:f,value:f,label:f+v(r)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported"])],2))}});var cme=Ve(lme,[["__file","sizes.vue"]]);const ume=Re({size:{type:String,values:Ns}}),fme=["disabled"],dme=q({name:"ElPaginationJumper"}),pme=q({...dme,props:ume,setup(t){const{t:e}=Mt(),n=Ce("pagination"),{pageCount:r,disabled:a,currentPage:s,changeEvent:o}=fb(),i=P(),l=R(()=>{var f;return(f=i.value)!=null?f:s==null?void 0:s.value});function c(f){i.value=f?+f:""}function u(f){f=Math.trunc(+f),o==null||o(f),i.value=void 0}return(f,d)=>(V(),z("span",{class:U(v(n).e("jump")),disabled:v(a)},[H("span",{class:U([v(n).e("goto")])},Te(v(e)("el.pagination.goto")),3),j(v(kr),{size:f.size,class:U([v(n).e("editor"),v(n).is("in-pagination")]),min:1,max:v(r),disabled:v(a),"model-value":v(l),"validate-event":!1,label:v(e)("el.pagination.page"),type:"number","onUpdate:modelValue":c,onChange:u},null,8,["size","class","max","disabled","model-value","label"]),H("span",{class:U([v(n).e("classifier")])},Te(v(e)("el.pagination.pageClassifier")),3)],10,fme))}});var gme=Ve(pme,[["__file","jumper.vue"]]);const hme=Re({total:{type:Number,default:1e3}}),vme=["disabled"],yme=q({name:"ElPaginationTotal"}),mme=q({...yme,props:hme,setup(t){const{t:e}=Mt(),n=Ce("pagination"),{disabled:r}=fb();return(a,s)=>(V(),z("span",{class:U(v(n).e("total")),disabled:v(r)},Te(v(e)("el.pagination.total",{total:a.total})),11,vme))}});var Cme=Ve(mme,[["__file","total.vue"]]);const Sme=Re({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),bme=["onKeyup"],wme=["aria-current","aria-label","tabindex"],Tme=["tabindex","aria-label"],xme=["aria-current","aria-label","tabindex"],Eme=["tabindex","aria-label"],kme=["aria-current","aria-label","tabindex"],Ome=q({name:"ElPaginationPager"}),Mme=q({...Ome,props:Sme,emits:["change"],setup(t,{emit:e}){const n=t,r=Ce("pager"),a=Ce("icon"),{t:s}=Mt(),o=P(!1),i=P(!1),l=P(!1),c=P(!1),u=P(!1),f=P(!1),d=R(()=>{const S=n.pagerCount,T=(S-1)/2,w=Number(n.currentPage),x=Number(n.pageCount);let E=!1,O=!1;x>S&&(w>S-T&&(E=!0),w<x-T&&(O=!0));const k=[];if(E&&!O){const M=x-(S-2);for(let D=M;D<x;D++)k.push(D)}else if(!E&&O)for(let M=2;M<S;M++)k.push(M);else if(E&&O){const M=Math.floor(S/2)-1;for(let D=w-M;D<=w+M;D++)k.push(D)}else for(let M=2;M<x;M++)k.push(M);return k}),p=R(()=>["more","btn-quickprev",a.b(),r.is("disabled",n.disabled)]),h=R(()=>["more","btn-quicknext",a.b(),r.is("disabled",n.disabled)]),g=R(()=>n.disabled?-1:0);Sr(()=>{const S=(n.pagerCount-1)/2;o.value=!1,i.value=!1,n.pageCount>n.pagerCount&&(n.currentPage>n.pagerCount-S&&(o.value=!0),n.currentPage<n.pageCount-S&&(i.value=!0))});function y(S=!1){n.disabled||(S?l.value=!0:c.value=!0)}function m(S=!1){S?u.value=!0:f.value=!0}function b(S){const T=S.target;if(T.tagName.toLowerCase()==="li"&&Array.from(T.classList).includes("number")){const w=Number(T.textContent);w!==n.currentPage&&e("change",w)}else T.tagName.toLowerCase()==="li"&&Array.from(T.classList).includes("more")&&C(S)}function C(S){const T=S.target;if(T.tagName.toLowerCase()==="ul"||n.disabled)return;let w=Number(T.textContent);const x=n.pageCount,E=n.currentPage,O=n.pagerCount-2;T.className.includes("more")&&(T.className.includes("quickprev")?w=E-O:T.className.includes("quicknext")&&(w=E+O)),Number.isNaN(+w)||(w<1&&(w=1),w>x&&(w=x)),w!==E&&e("change",w)}return(S,T)=>(V(),z("ul",{class:U(v(r).b()),onClick:C,onKeyup:Xt(b,["enter"])},[S.pageCount>0?(V(),z("li",{key:0,class:U([[v(r).is("active",S.currentPage===1),v(r).is("disabled",S.disabled)],"number"]),"aria-current":S.currentPage===1,"aria-label":v(s)("el.pagination.currentPage",{pager:1}),tabindex:v(g)}," 1 ",10,wme)):ee("v-if",!0),o.value?(V(),z("li",{key:1,class:U(v(p)),tabindex:v(g),"aria-label":v(s)("el.pagination.prevPages",{pager:S.pagerCount-2}),onMouseenter:T[0]||(T[0]=w=>y(!0)),onMouseleave:T[1]||(T[1]=w=>l.value=!1),onFocus:T[2]||(T[2]=w=>m(!0)),onBlur:T[3]||(T[3]=w=>u.value=!1)},[(l.value||u.value)&&!S.disabled?(V(),ae(v(jc),{key:0})):(V(),ae(v(cx),{key:1}))],42,Tme)):ee("v-if",!0),(V(!0),z(Ue,null,gt(v(d),w=>(V(),z("li",{key:w,class:U([[v(r).is("active",S.currentPage===w),v(r).is("disabled",S.disabled)],"number"]),"aria-current":S.currentPage===w,"aria-label":v(s)("el.pagination.currentPage",{pager:w}),tabindex:v(g)},Te(w),11,xme))),128)),i.value?(V(),z("li",{key:2,class:U(v(h)),tabindex:v(g),"aria-label":v(s)("el.pagination.nextPages",{pager:S.pagerCount-2}),onMouseenter:T[4]||(T[4]=w=>y()),onMouseleave:T[5]||(T[5]=w=>c.value=!1),onFocus:T[6]||(T[6]=w=>m()),onBlur:T[7]||(T[7]=w=>f.value=!1)},[(c.value||f.value)&&!S.disabled?(V(),ae(v(Yc),{key:0})):(V(),ae(v(cx),{key:1}))],42,Eme)):ee("v-if",!0),S.pageCount>1?(V(),z("li",{key:3,class:U([[v(r).is("active",S.currentPage===S.pageCount),v(r).is("disabled",S.disabled)],"number"]),"aria-current":S.currentPage===S.pageCount,"aria-label":v(s)("el.pagination.currentPage",{pager:S.pageCount}),tabindex:v(g)},Te(S.pageCount),11,kme)):ee("v-if",!0)],42,bme))}});var Rme=Ve(Mme,[["__file","pager.vue"]]);const Nr=t=>typeof t!="number",_me=Re({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:t=>Xe(t)&&Math.trunc(t)===t&&t>4&&t<22&&t%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:Q(Array),default:()=>mn([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:Zt,default:()=>ui},nextText:{type:String,default:""},nextIcon:{type:Zt,default:()=>Wr},teleported:{type:Boolean,default:!0},small:Boolean,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean}),Vme={"update:current-page":t=>Xe(t),"update:page-size":t=>Xe(t),"size-change":t=>Xe(t),change:(t,e)=>Xe(t)&&Xe(e),"current-change":t=>Xe(t),"prev-click":t=>Xe(t),"next-click":t=>Xe(t)},SE="ElPagination";var Dme=q({name:SE,props:_me,emits:Vme,setup(t,{emit:e,slots:n}){const{t:r}=Mt(),a=Ce("pagination"),s=ot().vnode.props||{},o="onUpdate:currentPage"in s||"onUpdate:current-page"in s||"onCurrentChange"in s,i="onUpdate:pageSize"in s||"onUpdate:page-size"in s||"onSizeChange"in s,l=R(()=>{if(Nr(t.total)&&Nr(t.pageCount)||!Nr(t.currentPage)&&!o)return!1;if(t.layout.includes("sizes")){if(Nr(t.pageCount)){if(!Nr(t.total)&&!Nr(t.pageSize)&&!i)return!1}else if(!i)return!1}return!0}),c=P(Nr(t.defaultPageSize)?10:t.defaultPageSize),u=P(Nr(t.defaultCurrentPage)?1:t.defaultCurrentPage),f=R({get(){return Nr(t.pageSize)?c.value:t.pageSize},set(C){Nr(t.pageSize)&&(c.value=C),i&&(e("update:page-size",C),e("size-change",C))}}),d=R(()=>{let C=0;return Nr(t.pageCount)?Nr(t.total)||(C=Math.max(1,Math.ceil(t.total/f.value))):C=t.pageCount,C}),p=R({get(){return Nr(t.currentPage)?u.value:t.currentPage},set(C){let S=C;C<1?S=1:C>d.value&&(S=d.value),Nr(t.currentPage)&&(u.value=S),o&&(e("update:current-page",S),e("current-change",S))}});pe(d,C=>{p.value>C&&(p.value=C)}),pe([p,f],C=>{e("change",...C)},{flush:"post"});function h(C){p.value=C}function g(C){f.value=C;const S=d.value;p.value>S&&(p.value=S)}function y(){t.disabled||(p.value-=1,e("prev-click",p.value))}function m(){t.disabled||(p.value+=1,e("next-click",p.value))}function b(C,S){C&&(C.props||(C.props={}),C.props.class=[C.props.class,S].join(" "))}return bt(QN,{pageCount:d,disabled:R(()=>t.disabled),currentPage:p,changeEvent:h,handleSizeChange:g}),()=>{var C,S;if(!l.value)return r("el.pagination.deprecationWarning"),null;if(!t.layout||t.hideOnSinglePage&&d.value<=1)return null;const T=[],w=[],x=je("div",{class:a.e("rightwrapper")},w),E={prev:je(Nye,{disabled:t.disabled,currentPage:p.value,prevText:t.prevText,prevIcon:t.prevIcon,onClick:y}),jumper:je(gme,{size:t.small?"small":"default"}),pager:je(Rme,{currentPage:p.value,pageCount:d.value,pagerCount:t.pagerCount,onChange:h,disabled:t.disabled}),next:je(Wye,{disabled:t.disabled,currentPage:p.value,pageCount:d.value,nextText:t.nextText,nextIcon:t.nextIcon,onClick:m}),sizes:je(cme,{pageSize:f.value,pageSizes:t.pageSizes,popperClass:t.popperClass,disabled:t.disabled,teleported:t.teleported,size:t.small?"small":"default"}),slot:(S=(C=n==null?void 0:n.default)==null?void 0:C.call(n))!=null?S:null,total:je(Cme,{total:Nr(t.total)?0:t.total})},O=t.layout.split(",").map(M=>M.trim());let k=!1;return O.forEach(M=>{if(M==="->"){k=!0;return}k?w.push(E[M]):T.push(E[M])}),b(T[0],a.is("first")),b(T[T.length-1],a.is("last")),k&&w.length>0&&(b(w[0],a.is("first")),b(w[w.length-1],a.is("last")),T.push(x)),je("div",{class:[a.b(),a.is("background",t.background),{[a.m("small")]:t.small}]},T)}}});const Lme=lt(Dme),Nme=Re({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:_m,default:"primary"},cancelButtonType:{type:String,values:_m,default:"text"},icon:{type:Zt,default:()=>cre},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:dr.teleported,persistent:dr.persistent,width:{type:[String,Number],default:150}}),Bme={confirm:t=>t instanceof MouseEvent,cancel:t=>t instanceof MouseEvent},Fme=q({name:"ElPopconfirm"}),$me=q({...Fme,props:Nme,emits:Bme,setup(t,{emit:e}){const n=t,{t:r}=Mt(),a=Ce("popconfirm"),s=P(),o=()=>{var d,p;(p=(d=s.value)==null?void 0:d.onClose)==null||p.call(d)},i=R(()=>({width:Bn(n.width)})),l=d=>{e("confirm",d),o()},c=d=>{e("cancel",d),o()},u=R(()=>n.confirmButtonText||r("el.popconfirm.confirmButtonText")),f=R(()=>n.cancelButtonText||r("el.popconfirm.cancelButtonText"));return(d,p)=>(V(),ae(v(Dr),ft({ref_key:"tooltipRef",ref:s,trigger:"click",effect:"light"},d.$attrs,{"popper-class":`${v(a).namespace.value}-popover`,"popper-style":v(i),teleported:d.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":d.hideAfter,persistent:d.persistent}),{content:Z(()=>[H("div",{class:U(v(a).b())},[H("div",{class:U(v(a).e("main"))},[!d.hideIcon&&d.icon?(V(),ae(v(Ge),{key:0,class:U(v(a).e("icon")),style:Pe({color:d.iconColor})},{default:Z(()=>[(V(),ae(dt(d.icon)))]),_:1},8,["class","style"])):ee("v-if",!0),Ct(" "+Te(d.title),1)],2),H("div",{class:U(v(a).e("action"))},[j(v(ir),{size:"small",type:d.cancelButtonType==="text"?"":d.cancelButtonType,text:d.cancelButtonType==="text",onClick:c},{default:Z(()=>[Ct(Te(v(f)),1)]),_:1},8,["type","text"]),j(v(ir),{size:"small",type:d.confirmButtonType==="text"?"":d.confirmButtonType,text:d.confirmButtonType==="text",onClick:l},{default:Z(()=>[Ct(Te(v(u)),1)]),_:1},8,["type","text"])],2)],2)]),default:Z(()=>[d.$slots.reference?ce(d.$slots,"reference",{key:0}):ee("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var Ume=Ve($me,[["__file","popconfirm.vue"]]);const Ame=lt(Ume),Wme=Re({trigger:Wf.trigger,placement:wg.placement,disabled:Wf.disabled,visible:dr.visible,transition:dr.transition,popperOptions:wg.popperOptions,tabindex:wg.tabindex,content:dr.content,popperStyle:dr.popperStyle,popperClass:dr.popperClass,enterable:{...dr.enterable,default:!0},effect:{...dr.effect,default:"light"},teleported:dr.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),Ime={"update:visible":t=>Wn(t),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},Pme="onUpdate:visible",Gme=q({name:"ElPopover"}),zme=q({...Gme,props:Wme,emits:Ime,setup(t,{expose:e,emit:n}){const r=t,a=R(()=>r[Pme]),s=Ce("popover"),o=P(),i=R(()=>{var y;return(y=v(o))==null?void 0:y.popperRef}),l=R(()=>[{width:Bn(r.width)},r.popperStyle]),c=R(()=>[s.b(),r.popperClass,{[s.m("plain")]:!!r.content}]),u=R(()=>r.transition===`${s.namespace.value}-fade-in-linear`),f=()=>{var y;(y=o.value)==null||y.hide()},d=()=>{n("before-enter")},p=()=>{n("before-leave")},h=()=>{n("after-enter")},g=()=>{n("update:visible",!1),n("after-leave")};return e({popperRef:i,hide:f}),(y,m)=>(V(),ae(v(Dr),ft({ref_key:"tooltipRef",ref:o},y.$attrs,{trigger:y.trigger,placement:y.placement,disabled:y.disabled,visible:y.visible,transition:y.transition,"popper-options":y.popperOptions,tabindex:y.tabindex,content:y.content,offset:y.offset,"show-after":y.showAfter,"hide-after":y.hideAfter,"auto-close":y.autoClose,"show-arrow":y.showArrow,"aria-label":y.title,effect:y.effect,enterable:y.enterable,"popper-class":v(c),"popper-style":v(l),teleported:y.teleported,persistent:y.persistent,"gpu-acceleration":v(u),"onUpdate:visible":v(a),onBeforeShow:d,onBeforeHide:p,onShow:h,onHide:g}),{content:Z(()=>[y.title?(V(),z("div",{key:0,class:U(v(s).e("title")),role:"title"},Te(y.title),3)):ee("v-if",!0),ce(y.$slots,"default",{},()=>[Ct(Te(y.content),1)])]),default:Z(()=>[y.$slots.reference?ce(y.$slots,"reference",{key:0}):ee("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var Hme=Ve(zme,[["__file","popover.vue"]]);const bE=(t,e)=>{const n=e.arg||e.value,r=n==null?void 0:n.popperRef;r&&(r.triggerRef=t)};var Kme={mounted(t,e){bE(t,e)},updated(t,e){bE(t,e)}};const jme="popover",rB=Lre(Kme,jme),Yme=lt(Hme,{directive:rB}),qme=Re({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:t=>t>=0&&t<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:Q(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:Q([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:Q(Function),default:t=>`${t}%`}}),Xme=["aria-valuenow"],Zme={viewBox:"0 0 100 100"},Jme=["d","stroke","stroke-linecap","stroke-width"],Qme=["d","stroke","opacity","stroke-linecap","stroke-width"],e1e={key:0},t1e=q({name:"ElProgress"}),n1e=q({...t1e,props:qme,setup(t){const e=t,n={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},r=Ce("progress"),a=R(()=>({width:`${e.percentage}%`,animationDuration:`${e.duration}s`,backgroundColor:b(e.percentage)})),s=R(()=>(e.strokeWidth/e.width*100).toFixed(1)),o=R(()=>["circle","dashboard"].includes(e.type)?Number.parseInt(`${50-Number.parseFloat(s.value)/2}`,10):0),i=R(()=>{const C=o.value,S=e.type==="dashboard";return`
          M 50 50
          m 0 ${S?"":"-"}${C}
          a ${C} ${C} 0 1 1 0 ${S?"-":""}${C*2}
          a ${C} ${C} 0 1 1 0 ${S?"":"-"}${C*2}
          `}),l=R(()=>2*Math.PI*o.value),c=R(()=>e.type==="dashboard"?.75:1),u=R(()=>`${-1*l.value*(1-c.value)/2}px`),f=R(()=>({strokeDasharray:`${l.value*c.value}px, ${l.value}px`,strokeDashoffset:u.value})),d=R(()=>({strokeDasharray:`${l.value*c.value*(e.percentage/100)}px, ${l.value}px`,strokeDashoffset:u.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),p=R(()=>{let C;return e.color?C=b(e.percentage):C=n[e.status]||n.default,C}),h=R(()=>e.status==="warning"?Lv:e.type==="line"?e.status==="success"?SS:vi:e.status==="success"?Cd:as),g=R(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),y=R(()=>e.format(e.percentage));function m(C){const S=100/C.length;return C.map((w,x)=>tt(w)?{color:w,percentage:(x+1)*S}:w).sort((w,x)=>w.percentage-x.percentage)}const b=C=>{var S;const{color:T}=e;if(Je(T))return T(C);if(tt(T))return T;{const w=m(T);for(const x of w)if(x.percentage>C)return x.color;return(S=w[w.length-1])==null?void 0:S.color}};return(C,S)=>(V(),z("div",{class:U([v(r).b(),v(r).m(C.type),v(r).is(C.status),{[v(r).m("without-text")]:!C.showText,[v(r).m("text-inside")]:C.textInside}]),role:"progressbar","aria-valuenow":C.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[C.type==="line"?(V(),z("div",{key:0,class:U(v(r).b("bar"))},[H("div",{class:U(v(r).be("bar","outer")),style:Pe({height:`${C.strokeWidth}px`})},[H("div",{class:U([v(r).be("bar","inner"),{[v(r).bem("bar","inner","indeterminate")]:C.indeterminate},{[v(r).bem("bar","inner","striped")]:C.striped},{[v(r).bem("bar","inner","striped-flow")]:C.stripedFlow}]),style:Pe(v(a))},[(C.showText||C.$slots.default)&&C.textInside?(V(),z("div",{key:0,class:U(v(r).be("bar","innerText"))},[ce(C.$slots,"default",{percentage:C.percentage},()=>[H("span",null,Te(v(y)),1)])],2)):ee("v-if",!0)],6)],6)],2)):(V(),z("div",{key:1,class:U(v(r).b("circle")),style:Pe({height:`${C.width}px`,width:`${C.width}px`})},[(V(),z("svg",Zme,[H("path",{class:U(v(r).be("circle","track")),d:v(i),stroke:`var(${v(r).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":C.strokeLinecap,"stroke-width":v(s),fill:"none",style:Pe(v(f))},null,14,Jme),H("path",{class:U(v(r).be("circle","path")),d:v(i),stroke:v(p),fill:"none",opacity:C.percentage?1:0,"stroke-linecap":C.strokeLinecap,"stroke-width":v(s),style:Pe(v(d))},null,14,Qme)]))],6)),(C.showText||C.$slots.default)&&!C.textInside?(V(),z("div",{key:2,class:U(v(r).e("text")),style:Pe({fontSize:`${v(g)}px`})},[ce(C.$slots,"default",{percentage:C.percentage},()=>[C.status?(V(),ae(v(Ge),{key:1},{default:Z(()=>[(V(),ae(dt(v(h))))]),_:1})):(V(),z("span",e1e,Te(v(y)),1))])],6)):ee("v-if",!0)],10,Xme))}});var r1e=Ve(n1e,[["__file","progress.vue"]]);const aB=lt(r1e),a1e=Re({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:Q([Array,Object]),default:()=>mn(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:Q([Array,Object]),default:()=>[yp,yp,yp]},voidIcon:{type:Zt,default:()=>xre},disabledVoidIcon:{type:Zt,default:()=>yp},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:Q(Array),default:()=>mn(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:lr,label:{type:String,default:void 0},clearable:{type:Boolean,default:!1}}),s1e={[pn]:t=>Xe(t),[ut]:t=>Xe(t)},o1e=["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"],i1e=["onMousemove","onClick"],l1e=q({name:"ElRate"}),c1e=q({...l1e,props:a1e,emits:s1e,setup(t,{expose:e,emit:n}){const r=t;function a($,N){const W=G=>pt(G),_=Object.keys(N).map(G=>+G).filter(G=>{const K=N[G];return(W(K)?K.excluded:!1)?$<G:$<=G}).sort((G,K)=>G-K),L=N[_[0]];return W(L)&&L.value||L}const s=We(Wl,void 0),o=We(Ds,void 0),i=qn(),l=Ce("rate"),{inputId:c,isLabeledByFormItem:u}=Bs(r,{formItemContext:o}),f=P(r.modelValue),d=P(-1),p=P(!0),h=R(()=>[l.b(),l.m(i.value)]),g=R(()=>r.disabled||(s==null?void 0:s.disabled)),y=R(()=>l.cssVarBlock({"void-color":r.voidColor,"disabled-void-color":r.disabledVoidColor,"fill-color":S.value})),m=R(()=>{let $="";return r.showScore?$=r.scoreTemplate.replace(/\{\s*value\s*\}/,g.value?`${r.modelValue}`:`${f.value}`):r.showText&&($=r.texts[Math.ceil(f.value)-1]),$}),b=R(()=>r.modelValue*100-Math.floor(r.modelValue)*100),C=R(()=>Be(r.colors)?{[r.lowThreshold]:r.colors[0],[r.highThreshold]:{value:r.colors[1],excluded:!0},[r.max]:r.colors[2]}:r.colors),S=R(()=>{const $=a(f.value,C.value);return pt($)?"":$}),T=R(()=>{let $="";return g.value?$=`${b.value}%`:r.allowHalf&&($="50%"),{color:S.value,width:$}}),w=R(()=>{let $=Be(r.icons)?[...r.icons]:{...r.icons};return $=fl($),Be($)?{[r.lowThreshold]:$[0],[r.highThreshold]:{value:$[1],excluded:!0},[r.max]:$[2]}:$}),x=R(()=>a(r.modelValue,w.value)),E=R(()=>g.value?tt(r.disabledVoidIcon)?r.disabledVoidIcon:fl(r.disabledVoidIcon):tt(r.voidIcon)?r.voidIcon:fl(r.voidIcon)),O=R(()=>a(f.value,w.value));function k($){const N=g.value&&b.value>0&&$-1<r.modelValue&&$>r.modelValue,W=r.allowHalf&&p.value&&$-.5<=f.value&&$>f.value;return N||W}function M($){r.clearable&&$===r.modelValue&&($=0),n(ut,$),r.modelValue!==$&&n("change",$)}function D($){g.value||(r.allowHalf&&p.value?M(f.value):M($))}function I($){if(g.value)return;let N=f.value;const W=$.code;return W===He.up||W===He.right?(r.allowHalf?N+=.5:N+=1,$.stopPropagation(),$.preventDefault()):(W===He.left||W===He.down)&&(r.allowHalf?N-=.5:N-=1,$.stopPropagation(),$.preventDefault()),N=N<0?0:N,N=N>r.max?r.max:N,n(ut,N),n("change",N),N}function B($,N){if(!g.value){if(r.allowHalf&&N){let W=N.target;rs(W,l.e("item"))&&(W=W.querySelector(`.${l.e("icon")}`)),(W.clientWidth===0||rs(W,l.e("decimal")))&&(W=W.parentNode),p.value=N.offsetX*2<=W.clientWidth,f.value=p.value?$-.5:$}else f.value=$;d.value=$}}function F(){g.value||(r.allowHalf&&(p.value=r.modelValue!==Math.floor(r.modelValue)),f.value=r.modelValue,d.value=-1)}return pe(()=>r.modelValue,$=>{f.value=$,p.value=r.modelValue!==Math.floor(r.modelValue)}),r.modelValue||n(ut,0),e({setCurrentValue:B,resetCurrentValue:F}),($,N)=>{var W;return V(),z("div",{id:v(c),class:U([v(h),v(l).is("disabled",v(g))]),role:"slider","aria-label":v(u)?void 0:$.label||"rating","aria-labelledby":v(u)?(W=v(o))==null?void 0:W.labelId:void 0,"aria-valuenow":f.value,"aria-valuetext":v(m)||void 0,"aria-valuemin":"0","aria-valuemax":$.max,tabindex:"0",style:Pe(v(y)),onKeydown:I},[(V(!0),z(Ue,null,gt($.max,(_,L)=>(V(),z("span",{key:L,class:U(v(l).e("item")),onMousemove:G=>B(_,G),onMouseleave:F,onClick:G=>D(_)},[j(v(Ge),{class:U([v(l).e("icon"),{hover:d.value===_},v(l).is("active",_<=f.value)])},{default:Z(()=>[k(_)?ee("v-if",!0):(V(),z(Ue,{key:0},[rt((V(),ae(dt(v(O)),null,null,512)),[[Rt,_<=f.value]]),rt((V(),ae(dt(v(E)),null,null,512)),[[Rt,!(_<=f.value)]])],64)),k(_)?(V(),z(Ue,{key:1},[(V(),ae(dt(v(E)),{class:U([v(l).em("decimal","box")])},null,8,["class"])),j(v(Ge),{style:Pe(v(T)),class:U([v(l).e("icon"),v(l).e("decimal")])},{default:Z(()=>[(V(),ae(dt(v(x))))]),_:1},8,["style","class"])],64)):ee("v-if",!0)]),_:2},1032,["class"])],42,i1e))),128)),$.showText||$.showScore?(V(),z("span",{key:0,class:U(v(l).e("text")),style:Pe({color:$.textColor})},Te(v(m)),7)):ee("v-if",!0)],46,o1e)}}});var u1e=Ve(c1e,[["__file","rate.vue"]]);const f1e=lt(u1e),gc={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},wE={[gc.success]:Fne,[gc.warning]:Lv,[gc.error]:bS,[gc.info]:wS},d1e=Re({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["success","warning","info","error"],default:"info"}}),p1e=q({name:"ElResult"}),g1e=q({...p1e,props:d1e,setup(t){const e=t,n=Ce("result"),r=R(()=>{const a=e.icon,s=a&&gc[a]?gc[a]:"icon-info",o=wE[s]||wE["icon-info"];return{class:s,component:o}});return(a,s)=>(V(),z("div",{class:U(v(n).b())},[H("div",{class:U(v(n).e("icon"))},[ce(a.$slots,"icon",{},()=>[v(r).component?(V(),ae(dt(v(r).component),{key:0,class:U(v(r).class)},null,8,["class"])):ee("v-if",!0)])],2),a.title||a.$slots.title?(V(),z("div",{key:0,class:U(v(n).e("title"))},[ce(a.$slots,"title",{},()=>[H("p",null,Te(a.title),1)])],2)):ee("v-if",!0),a.subTitle||a.$slots["sub-title"]?(V(),z("div",{key:1,class:U(v(n).e("subtitle"))},[ce(a.$slots,"sub-title",{},()=>[H("p",null,Te(a.subTitle),1)])],2)):ee("v-if",!0),a.$slots.extra?(V(),z("div",{key:2,class:U(v(n).e("extra"))},[ce(a.$slots,"extra")],2)):ee("v-if",!0)],2))}});var h1e=Ve(g1e,[["__file","result.vue"]]);const v1e=lt(h1e);var TE=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function y1e(t,e){return!!(t===e||TE(t)&&TE(e))}function m1e(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!y1e(t[n],e[n]))return!1;return!0}function C1e(t,e){e===void 0&&(e=m1e);var n=null;function r(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(n&&n.lastThis===this&&e(a,n.lastArgs))return n.lastResult;var o=t.apply(this,a);return n={lastResult:o,lastArgs:a,lastThis:this},o}return r.clear=function(){n=null},r}const sB=()=>{const e=ot().proxy.$props;return R(()=>{const n=(r,a,s)=>({});return e.perfMode?_v(n):C1e(n)})},Zm=50,Dh="itemRendered",Lh="scroll",hc="forward",Nh="backward",Ta="auto",Yv="smart",Gf="start",ws="center",zf="end",ru="horizontal",db="vertical",S1e="ltr",_c="rtl",Hf="negative",pb="positive-ascending",gb="positive-descending",b1e={[ru]:"left",[db]:"top"},w1e=20,T1e={[ru]:"deltaX",[db]:"deltaY"},x1e=({atEndEdge:t,atStartEdge:e,layout:n},r)=>{let a,s=0;const o=l=>l<0&&e.value||l>0&&t.value;return{hasReachedEdge:o,onWheel:l=>{Bv(a);const c=l[T1e[n.value]];o(s)&&o(s+c)||(s+=c,OD()||l.preventDefault(),a=qc(()=>{r(s),s=0}))}}},Jm=os({type:Q([Number,Function]),required:!0}),Qm=os({type:Number}),e1=os({type:Number,default:2}),E1e=os({type:String,values:["ltr","rtl"],default:"ltr"}),t1=os({type:Number,default:0}),Bh=os({type:Number,required:!0}),oB=os({type:String,values:["horizontal","vertical"],default:db}),iB=Re({className:{type:String,default:""},containerElement:{type:Q([String,Object]),default:"div"},data:{type:Q(Array),default:()=>mn([])},direction:E1e,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:Q([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),lB=Re({cache:e1,estimatedItemSize:Qm,layout:oB,initScrollOffset:t1,total:Bh,itemSize:Jm,...iB}),n1={type:Number,default:6},cB={type:Number,default:0},uB={type:Number,default:2},hl=Re({columnCache:e1,columnWidth:Jm,estimatedColumnWidth:Qm,estimatedRowHeight:Qm,initScrollLeft:t1,initScrollTop:t1,itemKey:{type:Q(Function),default:({columnIndex:t,rowIndex:e})=>`${e}:${t}`},rowCache:e1,rowHeight:Jm,totalColumn:Bh,totalRow:Bh,hScrollbarSize:n1,vScrollbarSize:n1,scrollbarStartGap:cB,scrollbarEndGap:uB,role:String,...iB}),fB=Re({alwaysOn:Boolean,class:String,layout:oB,total:Bh,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:n1,startGap:cB,endGap:uB,visible:Boolean}),el=(t,e)=>t<e?hc:Nh,Kf=t=>t===S1e||t===_c||t===ru,xE=t=>t===_c;let ec=null;function Fh(t=!1){if(ec===null||t){const e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";const r=document.createElement("div"),a=r.style;return a.width="100px",a.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?ec=gb:(e.scrollLeft=1,e.scrollLeft===0?ec=Hf:ec=pb),document.body.removeChild(e),ec}return ec}function k1e({move:t,size:e,bar:n},r){const a={},s=`translate${n.axis}(${t}px)`;return a[n.size]=e,a.transform=s,a.msTransform=s,a.webkitTransform=s,r==="horizontal"?a.height="100%":a.width="100%",a}const r1=q({name:"ElVirtualScrollBar",props:fB,emits:["scroll","start-move","stop-move"],setup(t,{emit:e}){const n=R(()=>t.startGap+t.endGap),r=Ce("virtual-scrollbar"),a=Ce("scrollbar"),s=P(),o=P();let i=null,l=null;const c=Dt({isDragging:!1,traveled:0}),u=R(()=>c3[t.layout]),f=R(()=>t.clientSize-v(n)),d=R(()=>({position:"absolute",width:`${ru===t.layout?f.value:t.scrollbarSize}px`,height:`${ru===t.layout?t.scrollbarSize:f.value}px`,[b1e[t.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),p=R(()=>{const w=t.ratio,x=t.clientSize;if(w>=100)return Number.POSITIVE_INFINITY;if(w>=50)return w*x/100;const E=x/3;return Math.floor(Math.min(Math.max(w*x,w1e),E))}),h=R(()=>{if(!Number.isFinite(p.value))return{display:"none"};const w=`${p.value}px`;return k1e({bar:u.value,size:w,move:c.traveled},t.layout)}),g=R(()=>Math.floor(t.clientSize-p.value-v(n))),y=()=>{window.addEventListener("mousemove",S),window.addEventListener("mouseup",C);const w=v(o);w&&(l=document.onselectstart,document.onselectstart=()=>!1,w.addEventListener("touchmove",S),w.addEventListener("touchend",C))},m=()=>{window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",C),document.onselectstart=l,l=null;const w=v(o);w&&(w.removeEventListener("touchmove",S),w.removeEventListener("touchend",C))},b=w=>{w.stopImmediatePropagation(),!(w.ctrlKey||[1,2].includes(w.button))&&(c.isDragging=!0,c[u.value.axis]=w.currentTarget[u.value.offset]-(w[u.value.client]-w.currentTarget.getBoundingClientRect()[u.value.direction]),e("start-move"),y())},C=()=>{c.isDragging=!1,c[u.value.axis]=0,e("stop-move"),m()},S=w=>{const{isDragging:x}=c;if(!x||!o.value||!s.value)return;const E=c[u.value.axis];if(!E)return;Bv(i);const O=(s.value.getBoundingClientRect()[u.value.direction]-w[u.value.client])*-1,k=o.value[u.value.offset]-E,M=O-k;i=qc(()=>{c.traveled=Math.max(t.startGap,Math.min(M,g.value)),e("scroll",M,g.value)})},T=w=>{const x=Math.abs(w.target.getBoundingClientRect()[u.value.direction]-w[u.value.client]),E=o.value[u.value.offset]/2,O=x-E;c.traveled=Math.max(0,Math.min(O,g.value)),e("scroll",O,g.value)};return pe(()=>t.scrollFrom,w=>{c.isDragging||(c.traveled=Math.ceil(w*g.value))}),ln(()=>{m()}),()=>je("div",{role:"presentation",ref:s,class:[r.b(),t.class,(t.alwaysOn||c.isDragging)&&"always-on"],style:d.value,onMousedown:Ze(T,["stop","prevent"]),onTouchstartPrevent:b},je("div",{ref:o,class:a.e("thumb"),style:h.value,onMousedown:b},[]))}}),dB=({name:t,getOffset:e,getItemSize:n,getItemOffset:r,getEstimatedTotalSize:a,getStartIndexForOffset:s,getStopIndexForStartIndex:o,initCache:i,clearCache:l,validateProps:c})=>q({name:t??"ElVirtualList",props:lB,emits:[Dh,Lh],setup(u,{emit:f,expose:d}){c(u);const p=ot(),h=Ce("vl"),g=P(i(u,p)),y=sB(),m=P(),b=P(),C=P(),S=P({isScrolling:!1,scrollDir:"forward",scrollOffset:Xe(u.initScrollOffset)?u.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:u.scrollbarAlwaysOn}),T=R(()=>{const{total:Y,cache:te}=u,{isScrolling:ve,scrollDir:se,scrollOffset:ie}=v(S);if(Y===0)return[0,0,0,0];const re=s(u,ie,v(g)),be=o(u,re,ie,v(g)),ge=!ve||se===Nh?Math.max(1,te):1,Se=!ve||se===hc?Math.max(1,te):1;return[Math.max(0,re-ge),Math.max(0,Math.min(Y-1,be+Se)),re,be]}),w=R(()=>a(u,v(g))),x=R(()=>Kf(u.layout)),E=R(()=>[{position:"relative",[`overflow-${x.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:u.direction,height:Xe(u.height)?`${u.height}px`:u.height,width:Xe(u.width)?`${u.width}px`:u.width},u.style]),O=R(()=>{const Y=v(w),te=v(x);return{height:te?"100%":`${Y}px`,pointerEvents:v(S).isScrolling?"none":void 0,width:te?`${Y}px`:"100%"}}),k=R(()=>x.value?u.width:u.height),{onWheel:M}=x1e({atStartEdge:R(()=>S.value.scrollOffset<=0),atEndEdge:R(()=>S.value.scrollOffset>=w.value),layout:R(()=>u.layout)},Y=>{var te,ve;(ve=(te=C.value).onMouseUp)==null||ve.call(te),N(Math.min(S.value.scrollOffset+Y,w.value-k.value))}),D=()=>{const{total:Y}=u;if(Y>0){const[ie,re,be,ge]=v(T);f(Dh,ie,re,be,ge)}const{scrollDir:te,scrollOffset:ve,updateRequested:se}=v(S);f(Lh,te,ve,se)},I=Y=>{const{clientHeight:te,scrollHeight:ve,scrollTop:se}=Y.currentTarget,ie=v(S);if(ie.scrollOffset===se)return;const re=Math.max(0,Math.min(se,ve-te));S.value={...ie,isScrolling:!0,scrollDir:el(ie.scrollOffset,re),scrollOffset:re,updateRequested:!1},Ye(L)},B=Y=>{const{clientWidth:te,scrollLeft:ve,scrollWidth:se}=Y.currentTarget,ie=v(S);if(ie.scrollOffset===ve)return;const{direction:re}=u;let be=ve;if(re===_c)switch(Fh()){case Hf:{be=-ve;break}case gb:{be=se-te-ve;break}}be=Math.max(0,Math.min(be,se-te)),S.value={...ie,isScrolling:!0,scrollDir:el(ie.scrollOffset,be),scrollOffset:be,updateRequested:!1},Ye(L)},F=Y=>{v(x)?B(Y):I(Y),D()},$=(Y,te)=>{const ve=(w.value-k.value)/te*Y;N(Math.min(w.value-k.value,ve))},N=Y=>{Y=Math.max(Y,0),Y!==v(S).scrollOffset&&(S.value={...v(S),scrollOffset:Y,scrollDir:el(v(S).scrollOffset,Y),updateRequested:!0},Ye(L))},W=(Y,te=Ta)=>{const{scrollOffset:ve}=v(S);Y=Math.max(0,Math.min(Y,u.total-1)),N(e(u,Y,te,ve,v(g)))},_=Y=>{const{direction:te,itemSize:ve,layout:se}=u,ie=y.value(l&&ve,l&&se,l&&te);let re;if(Et(ie,String(Y)))re=ie[Y];else{const be=r(u,Y,v(g)),ge=n(u,Y,v(g)),Se=v(x),De=te===_c,X=Se?be:0;ie[Y]=re={position:"absolute",left:De?void 0:`${X}px`,right:De?`${X}px`:void 0,top:Se?0:`${be}px`,height:Se?"100%":`${ge}px`,width:Se?`${ge}px`:"100%"}}return re},L=()=>{S.value.isScrolling=!1,Ye(()=>{y.value(-1,null,null)})},G=()=>{const Y=m.value;Y&&(Y.scrollTop=0)};at(()=>{if(!Ot)return;const{initScrollOffset:Y}=u,te=v(m);Xe(Y)&&te&&(v(x)?te.scrollLeft=Y:te.scrollTop=Y),D()}),mo(()=>{const{direction:Y,layout:te}=u,{scrollOffset:ve,updateRequested:se}=v(S),ie=v(m);if(se&&ie)if(te===ru)if(Y===_c)switch(Fh()){case Hf:{ie.scrollLeft=-ve;break}case pb:{ie.scrollLeft=ve;break}default:{const{clientWidth:re,scrollWidth:be}=ie;ie.scrollLeft=be-re-ve;break}}else ie.scrollLeft=ve;else ie.scrollTop=ve});const K={ns:h,clientSize:k,estimatedTotalSize:w,windowStyle:E,windowRef:m,innerRef:b,innerStyle:O,itemsToRender:T,scrollbarRef:C,states:S,getItemStyle:_,onScroll:F,onScrollbarScroll:$,onWheel:M,scrollTo:N,scrollToItem:W,resetScrollTop:G};return d({windowRef:m,innerRef:b,getItemStyleCache:y,scrollTo:N,scrollToItem:W,resetScrollTop:G,states:S}),K},render(u){var f;const{$slots:d,className:p,clientSize:h,containerElement:g,data:y,getItemStyle:m,innerElement:b,itemsToRender:C,innerStyle:S,layout:T,total:w,onScroll:x,onScrollbarScroll:E,onWheel:O,states:k,useIsScrolling:M,windowStyle:D,ns:I}=u,[B,F]=C,$=dt(g),N=dt(b),W=[];if(w>0)for(let K=B;K<=F;K++)W.push((f=d.default)==null?void 0:f.call(d,{data:y,key:K,index:K,isScrolling:M?k.isScrolling:void 0,style:m(K)}));const _=[je(N,{style:S,ref:"innerRef"},tt(N)?W:{default:()=>W})],L=je(r1,{ref:"scrollbarRef",clientSize:h,layout:T,onScroll:E,ratio:h*100/this.estimatedTotalSize,scrollFrom:k.scrollOffset/(this.estimatedTotalSize-h),total:w}),G=je($,{class:[I.e("window"),p],style:D,onScroll:x,onWheel:O,ref:"windowRef",key:0},tt($)?[_]:{default:()=>[_]});return je("div",{key:0,class:[I.e("wrapper"),k.scrollbarAlwaysOn?"always-on":""]},[G,L])}}),pB=dB({name:"ElFixedSizeList",getItemOffset:({itemSize:t},e)=>e*t,getItemSize:({itemSize:t})=>t,getEstimatedTotalSize:({total:t,itemSize:e})=>e*t,getOffset:({height:t,total:e,itemSize:n,layout:r,width:a},s,o,i)=>{const l=Kf(r)?a:t,c=Math.max(0,e*n-l),u=Math.min(c,s*n),f=Math.max(0,(s+1)*n-l);switch(o===Yv&&(i>=f-l&&i<=u+l?o=Ta:o=ws),o){case Gf:return u;case zf:return f;case ws:{const d=Math.round(f+(u-f)/2);return d<Math.ceil(l/2)?0:d>c+Math.floor(l/2)?c:d}case Ta:default:return i>=f&&i<=u?i:i<f?f:u}},getStartIndexForOffset:({total:t,itemSize:e},n)=>Math.max(0,Math.min(t-1,Math.floor(n/e))),getStopIndexForStartIndex:({height:t,total:e,itemSize:n,layout:r,width:a},s,o)=>{const i=s*n,l=Kf(r)?a:t,c=Math.ceil((l+o-i)/n);return Math.max(0,Math.min(e-1,s+c-1))},initCache(){},clearCache:!0,validateProps(){}}),vc=(t,e,n)=>{const{itemSize:r}=t,{items:a,lastVisitedIndex:s}=n;if(e>s){let o=0;if(s>=0){const i=a[s];o=i.offset+i.size}for(let i=s+1;i<=e;i++){const l=r(i);a[i]={offset:o,size:l},o+=l}n.lastVisitedIndex=e}return a[e]},O1e=(t,e,n)=>{const{items:r,lastVisitedIndex:a}=e;return(a>0?r[a].offset:0)>=n?gB(t,e,0,a,n):M1e(t,e,Math.max(0,a),n)},gB=(t,e,n,r,a)=>{for(;n<=r;){const s=n+Math.floor((r-n)/2),o=vc(t,s,e).offset;if(o===a)return s;o<a?n=s+1:o>a&&(r=s-1)}return Math.max(0,n-1)},M1e=(t,e,n,r)=>{const{total:a}=t;let s=1;for(;n<a&&vc(t,n,e).offset<r;)n+=s,s*=2;return gB(t,e,Math.floor(n/2),Math.min(n,a-1),r)},EE=({total:t},{items:e,estimatedItemSize:n,lastVisitedIndex:r})=>{let a=0;if(r>=t&&(r=t-1),r>=0){const i=e[r];a=i.offset+i.size}const o=(t-r-1)*n;return a+o},R1e=dB({name:"ElDynamicSizeList",getItemOffset:(t,e,n)=>vc(t,e,n).offset,getItemSize:(t,e,{items:n})=>n[e].size,getEstimatedTotalSize:EE,getOffset:(t,e,n,r,a)=>{const{height:s,layout:o,width:i}=t,l=Kf(o)?i:s,c=vc(t,e,a),u=EE(t,a),f=Math.max(0,Math.min(u-l,c.offset)),d=Math.max(0,c.offset-l+c.size);switch(n===Yv&&(r>=d-l&&r<=f+l?n=Ta:n=ws),n){case Gf:return f;case zf:return d;case ws:return Math.round(d+(f-d)/2);case Ta:default:return r>=d&&r<=f?r:r<d?d:f}},getStartIndexForOffset:(t,e,n)=>O1e(t,n,e),getStopIndexForStartIndex:(t,e,n,r)=>{const{height:a,total:s,layout:o,width:i}=t,l=Kf(o)?i:a,c=vc(t,e,r),u=n+l;let f=c.offset+c.size,d=e;for(;d<s-1&&f<u;)d++,f+=vc(t,d,r).size;return d},initCache({estimatedItemSize:t=Zm},e){const n={items:{},estimatedItemSize:t,lastVisitedIndex:-1};return n.clearCacheAfterIndex=(r,a=!0)=>{var s,o;n.lastVisitedIndex=Math.min(n.lastVisitedIndex,r-1),(s=e.exposed)==null||s.getItemStyleCache(-1),a&&((o=e.proxy)==null||o.$forceUpdate())},n},clearCache:!1,validateProps:({itemSize:t})=>{}}),_1e=({atXEndEdge:t,atXStartEdge:e,atYEndEdge:n,atYStartEdge:r},a)=>{let s=null,o=0,i=0;const l=(u,f)=>{const d=u<=0&&e.value||u>=0&&t.value,p=f<=0&&r.value||f>=0&&n.value;return d&&p};return{hasReachedEdge:l,onWheel:u=>{Bv(s);let f=u.deltaX,d=u.deltaY;Math.abs(f)>Math.abs(d)?d=0:f=0,u.shiftKey&&d!==0&&(f=d,d=0),!(l(o,i)&&l(o+f,i+d))&&(o+=f,i+=d,u.preventDefault(),s=qc(()=>{a(o,i),o=0,i=0}))}}},hB=({name:t,clearCache:e,getColumnPosition:n,getColumnStartIndexForOffset:r,getColumnStopIndexForStartIndex:a,getEstimatedTotalHeight:s,getEstimatedTotalWidth:o,getColumnOffset:i,getRowOffset:l,getRowPosition:c,getRowStartIndexForOffset:u,getRowStopIndexForStartIndex:f,initCache:d,injectToInstance:p,validateProps:h})=>q({name:t??"ElVirtualList",props:hl,emits:[Dh,Lh],setup(g,{emit:y,expose:m,slots:b}){const C=Ce("vl");h(g);const S=ot(),T=P(d(g,S));p==null||p(S,T);const w=P(),x=P(),E=P(),O=P(null),k=P({isScrolling:!1,scrollLeft:Xe(g.initScrollLeft)?g.initScrollLeft:0,scrollTop:Xe(g.initScrollTop)?g.initScrollTop:0,updateRequested:!1,xAxisScrollDir:hc,yAxisScrollDir:hc}),M=sB(),D=R(()=>Number.parseInt(`${g.height}`,10)),I=R(()=>Number.parseInt(`${g.width}`,10)),B=R(()=>{const{totalColumn:de,totalRow:xe,columnCache:ke}=g,{isScrolling:ye,xAxisScrollDir:_e,scrollLeft:Oe}=v(k);if(de===0||xe===0)return[0,0,0,0];const Fe=r(g,Oe,v(T)),ze=a(g,Fe,Oe,v(T)),he=!ye||_e===Nh?Math.max(1,ke):1,Ae=!ye||_e===hc?Math.max(1,ke):1;return[Math.max(0,Fe-he),Math.max(0,Math.min(de-1,ze+Ae)),Fe,ze]}),F=R(()=>{const{totalColumn:de,totalRow:xe,rowCache:ke}=g,{isScrolling:ye,yAxisScrollDir:_e,scrollTop:Oe}=v(k);if(de===0||xe===0)return[0,0,0,0];const Fe=u(g,Oe,v(T)),ze=f(g,Fe,Oe,v(T)),he=!ye||_e===Nh?Math.max(1,ke):1,Ae=!ye||_e===hc?Math.max(1,ke):1;return[Math.max(0,Fe-he),Math.max(0,Math.min(xe-1,ze+Ae)),Fe,ze]}),$=R(()=>s(g,v(T))),N=R(()=>o(g,v(T))),W=R(()=>{var de;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:g.direction,height:Xe(g.height)?`${g.height}px`:g.height,width:Xe(g.width)?`${g.width}px`:g.width},(de=g.style)!=null?de:{}]}),_=R(()=>{const de=`${v(N)}px`;return{height:`${v($)}px`,pointerEvents:v(k).isScrolling?"none":void 0,width:de}}),L=()=>{const{totalColumn:de,totalRow:xe}=g;if(de>0&&xe>0){const[ze,he,Ae,qe]=v(B),[st,vt,Ke,fe]=v(F);y(Dh,{columnCacheStart:ze,columnCacheEnd:he,rowCacheStart:st,rowCacheEnd:vt,columnVisibleStart:Ae,columnVisibleEnd:qe,rowVisibleStart:Ke,rowVisibleEnd:fe})}const{scrollLeft:ke,scrollTop:ye,updateRequested:_e,xAxisScrollDir:Oe,yAxisScrollDir:Fe}=v(k);y(Lh,{xAxisScrollDir:Oe,scrollLeft:ke,yAxisScrollDir:Fe,scrollTop:ye,updateRequested:_e})},G=de=>{const{clientHeight:xe,clientWidth:ke,scrollHeight:ye,scrollLeft:_e,scrollTop:Oe,scrollWidth:Fe}=de.currentTarget,ze=v(k);if(ze.scrollTop===Oe&&ze.scrollLeft===_e)return;let he=_e;if(xE(g.direction))switch(Fh()){case Hf:he=-_e;break;case gb:he=Fe-ke-_e;break}k.value={...ze,isScrolling:!0,scrollLeft:he,scrollTop:Math.max(0,Math.min(Oe,ye-xe)),updateRequested:!0,xAxisScrollDir:el(ze.scrollLeft,he),yAxisScrollDir:el(ze.scrollTop,Oe)},Ye(()=>re()),be(),L()},K=(de,xe)=>{const ke=v(D),ye=($.value-ke)/xe*de;ve({scrollTop:Math.min($.value-ke,ye)})},Y=(de,xe)=>{const ke=v(I),ye=(N.value-ke)/xe*de;ve({scrollLeft:Math.min(N.value-ke,ye)})},{onWheel:te}=_1e({atXStartEdge:R(()=>k.value.scrollLeft<=0),atXEndEdge:R(()=>k.value.scrollLeft>=N.value-v(I)),atYStartEdge:R(()=>k.value.scrollTop<=0),atYEndEdge:R(()=>k.value.scrollTop>=$.value-v(D))},(de,xe)=>{var ke,ye,_e,Oe;(ye=(ke=x.value)==null?void 0:ke.onMouseUp)==null||ye.call(ke),(Oe=(_e=E.value)==null?void 0:_e.onMouseUp)==null||Oe.call(_e);const Fe=v(I),ze=v(D);ve({scrollLeft:Math.min(k.value.scrollLeft+de,N.value-Fe),scrollTop:Math.min(k.value.scrollTop+xe,$.value-ze)})}),ve=({scrollLeft:de=k.value.scrollLeft,scrollTop:xe=k.value.scrollTop})=>{de=Math.max(de,0),xe=Math.max(xe,0);const ke=v(k);xe===ke.scrollTop&&de===ke.scrollLeft||(k.value={...ke,xAxisScrollDir:el(ke.scrollLeft,de),yAxisScrollDir:el(ke.scrollTop,xe),scrollLeft:de,scrollTop:xe,updateRequested:!0},Ye(()=>re()),be(),L())},se=(de=0,xe=0,ke=Ta)=>{const ye=v(k);xe=Math.max(0,Math.min(xe,g.totalColumn-1)),de=Math.max(0,Math.min(de,g.totalRow-1));const _e=hL(C.namespace.value),Oe=v(T),Fe=s(g,Oe),ze=o(g,Oe);ve({scrollLeft:i(g,xe,ke,ye.scrollLeft,Oe,ze>g.width?_e:0),scrollTop:l(g,de,ke,ye.scrollTop,Oe,Fe>g.height?_e:0)})},ie=(de,xe)=>{const{columnWidth:ke,direction:ye,rowHeight:_e}=g,Oe=M.value(e&&ke,e&&_e,e&&ye),Fe=`${de},${xe}`;if(Et(Oe,Fe))return Oe[Fe];{const[,ze]=n(g,xe,v(T)),he=v(T),Ae=xE(ye),[qe,st]=c(g,de,he),[vt]=n(g,xe,he);return Oe[Fe]={position:"absolute",left:Ae?void 0:`${ze}px`,right:Ae?`${ze}px`:void 0,top:`${st}px`,height:`${qe}px`,width:`${vt}px`},Oe[Fe]}},re=()=>{k.value.isScrolling=!1,Ye(()=>{M.value(-1,null,null)})};at(()=>{if(!Ot)return;const{initScrollLeft:de,initScrollTop:xe}=g,ke=v(w);ke&&(Xe(de)&&(ke.scrollLeft=de),Xe(xe)&&(ke.scrollTop=xe)),L()});const be=()=>{const{direction:de}=g,{scrollLeft:xe,scrollTop:ke,updateRequested:ye}=v(k),_e=v(w);if(ye&&_e){if(de===_c)switch(Fh()){case Hf:{_e.scrollLeft=-xe;break}case pb:{_e.scrollLeft=xe;break}default:{const{clientWidth:Oe,scrollWidth:Fe}=_e;_e.scrollLeft=Fe-Oe-xe;break}}else _e.scrollLeft=Math.max(0,xe);_e.scrollTop=Math.max(0,ke)}},{resetAfterColumnIndex:ge,resetAfterRowIndex:Se,resetAfter:De}=S.proxy;m({windowRef:w,innerRef:O,getItemStyleCache:M,scrollTo:ve,scrollToItem:se,states:k,resetAfterColumnIndex:ge,resetAfterRowIndex:Se,resetAfter:De});const X=()=>{const{scrollbarAlwaysOn:de,scrollbarStartGap:xe,scrollbarEndGap:ke,totalColumn:ye,totalRow:_e}=g,Oe=v(I),Fe=v(D),ze=v(N),he=v($),{scrollLeft:Ae,scrollTop:qe}=v(k),st=je(r1,{ref:x,alwaysOn:de,startGap:xe,endGap:ke,class:C.e("horizontal"),clientSize:Oe,layout:"horizontal",onScroll:Y,ratio:Oe*100/ze,scrollFrom:Ae/(ze-Oe),total:_e,visible:!0}),vt=je(r1,{ref:E,alwaysOn:de,startGap:xe,endGap:ke,class:C.e("vertical"),clientSize:Fe,layout:"vertical",onScroll:K,ratio:Fe*100/he,scrollFrom:qe/(he-Fe),total:ye,visible:!0});return{horizontalScrollbar:st,verticalScrollbar:vt}},ne=()=>{var de;const[xe,ke]=v(B),[ye,_e]=v(F),{data:Oe,totalColumn:Fe,totalRow:ze,useIsScrolling:he,itemKey:Ae}=g,qe=[];if(ze>0&&Fe>0)for(let st=ye;st<=_e;st++)for(let vt=xe;vt<=ke;vt++)qe.push((de=b.default)==null?void 0:de.call(b,{columnIndex:vt,data:Oe,key:Ae({columnIndex:vt,data:Oe,rowIndex:st}),isScrolling:he?v(k).isScrolling:void 0,style:ie(st,vt),rowIndex:st}));return qe},me=()=>{const de=dt(g.innerElement),xe=ne();return[je(de,{style:v(_),ref:O},tt(de)?xe:{default:()=>xe})]};return()=>{const de=dt(g.containerElement),{horizontalScrollbar:xe,verticalScrollbar:ke}=X(),ye=me();return je("div",{key:0,class:C.e("wrapper"),role:g.role},[je(de,{class:g.className,style:v(W),onScroll:G,onWheel:te,ref:w},tt(de)?ye:{default:()=>ye}),xe,ke])}}}),V1e=hB({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:t},e)=>[t,e*t],getRowPosition:({rowHeight:t},e)=>[t,e*t],getEstimatedTotalHeight:({totalRow:t,rowHeight:e})=>e*t,getEstimatedTotalWidth:({totalColumn:t,columnWidth:e})=>e*t,getColumnOffset:({totalColumn:t,columnWidth:e,width:n},r,a,s,o,i)=>{n=Number(n);const l=Math.max(0,t*e-n),c=Math.min(l,r*e),u=Math.max(0,r*e-n+i+e);switch(a==="smart"&&(s>=u-n&&s<=c+n?a=Ta:a=ws),a){case Gf:return c;case zf:return u;case ws:{const f=Math.round(u+(c-u)/2);return f<Math.ceil(n/2)?0:f>l+Math.floor(n/2)?l:f}case Ta:default:return s>=u&&s<=c?s:u>c||s<u?u:c}},getRowOffset:({rowHeight:t,height:e,totalRow:n},r,a,s,o,i)=>{e=Number(e);const l=Math.max(0,n*t-e),c=Math.min(l,r*t),u=Math.max(0,r*t-e+i+t);switch(a===Yv&&(s>=u-e&&s<=c+e?a=Ta:a=ws),a){case Gf:return c;case zf:return u;case ws:{const f=Math.round(u+(c-u)/2);return f<Math.ceil(e/2)?0:f>l+Math.floor(e/2)?l:f}case Ta:default:return s>=u&&s<=c?s:u>c||s<u?u:c}},getColumnStartIndexForOffset:({columnWidth:t,totalColumn:e},n)=>Math.max(0,Math.min(e-1,Math.floor(n/t))),getColumnStopIndexForStartIndex:({columnWidth:t,totalColumn:e,width:n},r,a)=>{const s=r*t,o=Math.ceil((n+a-s)/t);return Math.max(0,Math.min(e-1,r+o-1))},getRowStartIndexForOffset:({rowHeight:t,totalRow:e},n)=>Math.max(0,Math.min(e-1,Math.floor(n/t))),getRowStopIndexForStartIndex:({rowHeight:t,totalRow:e,height:n},r,a)=>{const s=r*t,o=Math.ceil((n+a-s)/t);return Math.max(0,Math.min(e-1,r+o-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:t,rowHeight:e})=>{}}),{max:$h,min:vB,floor:yB}=Math,D1e={column:"columnWidth",row:"rowHeight"},a1={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},js=(t,e,n,r)=>{const[a,s,o]=[n[r],t[D1e[r]],n[a1[r]]];if(e>o){let i=0;if(o>=0){const l=a[o];i=l.offset+l.size}for(let l=o+1;l<=e;l++){const c=s(l);a[l]={offset:i,size:c},i+=c}n[a1[r]]=e}return a[e]},mB=(t,e,n,r,a,s)=>{for(;n<=r;){const o=n+yB((r-n)/2),i=js(t,o,e,s).offset;if(i===a)return o;i<a?n=o+1:r=o-1}return $h(0,n-1)},L1e=(t,e,n,r,a)=>{const s=a==="column"?t.totalColumn:t.totalRow;let o=1;for(;n<s&&js(t,n,e,a).offset<r;)n+=o,o*=2;return mB(t,e,yB(n/2),vB(n,s-1),r,a)},kE=(t,e,n,r)=>{const[a,s]=[e[r],e[a1[r]]];return(s>0?a[s].offset:0)>=n?mB(t,e,0,s,n,r):L1e(t,e,$h(0,s),n,r)},CB=({totalRow:t},{estimatedRowHeight:e,lastVisitedRowIndex:n,row:r})=>{let a=0;if(n>=t&&(n=t-1),n>=0){const i=r[n];a=i.offset+i.size}const o=(t-n-1)*e;return a+o},SB=({totalColumn:t},{column:e,estimatedColumnWidth:n,lastVisitedColumnIndex:r})=>{let a=0;if(r>t&&(r=t-1),r>=0){const i=e[r];a=i.offset+i.size}const o=(t-r-1)*n;return a+o},N1e={column:SB,row:CB},OE=(t,e,n,r,a,s,o)=>{const[i,l]=[s==="row"?t.height:t.width,N1e[s]],c=js(t,e,a,s),u=l(t,a),f=$h(0,vB(u-i,c.offset)),d=$h(0,c.offset-i+o+c.size);switch(n===Yv&&(r>=d-i&&r<=f+i?n=Ta:n=ws),n){case Gf:return f;case zf:return d;case ws:return Math.round(d+(f-d)/2);case Ta:default:return r>=d&&r<=f?r:d>f||r<d?d:f}},B1e=hB({name:"ElDynamicSizeGrid",getColumnPosition:(t,e,n)=>{const r=js(t,e,n,"column");return[r.size,r.offset]},getRowPosition:(t,e,n)=>{const r=js(t,e,n,"row");return[r.size,r.offset]},getColumnOffset:(t,e,n,r,a,s)=>OE(t,e,n,r,a,"column",s),getRowOffset:(t,e,n,r,a,s)=>OE(t,e,n,r,a,"row",s),getColumnStartIndexForOffset:(t,e,n)=>kE(t,n,e,"column"),getColumnStopIndexForStartIndex:(t,e,n,r)=>{const a=js(t,e,r,"column"),s=n+t.width;let o=a.offset+a.size,i=e;for(;i<t.totalColumn-1&&o<s;)i++,o+=js(t,e,r,"column").size;return i},getEstimatedTotalHeight:CB,getEstimatedTotalWidth:SB,getRowStartIndexForOffset:(t,e,n)=>kE(t,n,e,"row"),getRowStopIndexForStartIndex:(t,e,n,r)=>{const{totalRow:a,height:s}=t,o=js(t,e,r,"row"),i=n+s;let l=o.size+o.offset,c=e;for(;c<a-1&&l<i;)c++,l+=js(t,c,r,"row").size;return c},injectToInstance:(t,e)=>{const n=({columnIndex:s,rowIndex:o},i)=>{var l,c;i=Kn(i)?!0:i,Xe(s)&&(e.value.lastVisitedColumnIndex=Math.min(e.value.lastVisitedColumnIndex,s-1)),Xe(o)&&(e.value.lastVisitedRowIndex=Math.min(e.value.lastVisitedRowIndex,o-1)),(l=t.exposed)==null||l.getItemStyleCache.value(-1,null,null),i&&((c=t.proxy)==null||c.$forceUpdate())},r=(s,o)=>{n({columnIndex:s},o)},a=(s,o)=>{n({rowIndex:s},o)};Object.assign(t.proxy,{resetAfterColumnIndex:r,resetAfterRowIndex:a,resetAfter:n})},initCache:({estimatedColumnWidth:t=Zm,estimatedRowHeight:e=Zm})=>({column:{},estimatedColumnWidth:t,estimatedRowHeight:e,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:t,rowHeight:e})=>{}}),F1e=q({props:{item:{type:Object,required:!0},style:Object,height:Number},setup(){return{ns:Ce("select")}}});function $1e(t,e,n,r,a,s){return t.item.isTitle?(V(),z("div",{key:0,class:U(t.ns.be("group","title")),style:Pe([t.style,{lineHeight:`${t.height}px`}])},Te(t.item.label),7)):(V(),z("div",{key:1,class:U(t.ns.be("group","split")),style:Pe(t.style)},[H("span",{class:U(t.ns.be("group","split-dash")),style:Pe({top:`${t.height/2}px`})},null,6)],6))}var U1e=Ve(F1e,[["render",$1e],["__file","group-item.vue"]]);function A1e(t,{emit:e}){return{hoverItem:()=>{t.disabled||e("hover",t.index)},selectOptionClick:()=>{t.disabled||e("select",t.item,t.index)}}}const bB={label:"label",value:"value",disabled:"disabled",options:"options"};function qv(t){const e=R(()=>({...bB,...t.props}));return{aliasProps:e,getLabel:o=>Vn(o,e.value.label),getValue:o=>Vn(o,e.value.value),getDisabled:o=>Vn(o,e.value.disabled),getOptions:o=>Vn(o,e.value.options)}}const W1e=Re({allowCreate:Boolean,autocomplete:{type:Q(String),default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:Zt,default:vi},effect:{type:Q(String),default:"light"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:274},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,modelValue:{type:Q([Array,String,Number,Boolean,Object])},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:Q(Array),required:!0},placeholder:{type:String},teleported:dr.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:Q(Object),default:()=>({})},remote:Boolean,size:lr,props:{type:Q(Object),default:()=>bB},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},placement:{type:Q(String),values:Al,default:"bottom-start"},fallbackPlacements:{type:Q(Array),default:["bottom-start","top-start","right","left"]},tagType:{...Hv.type,default:"info"},ariaLabel:{type:String,default:void 0}}),I1e=Re({data:Array,disabled:Boolean,hovering:Boolean,item:{type:Q(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),hb=Symbol("ElSelectV2Injection"),P1e=q({props:I1e,emits:["select","hover"],setup(t,{emit:e}){const n=We(hb),r=Ce("select"),{hoverItem:a,selectOptionClick:s}=A1e(t,{emit:e}),{getLabel:o}=qv(n.props);return{ns:r,hoverItem:a,selectOptionClick:s,getLabel:o}}}),G1e=["aria-selected"];function z1e(t,e,n,r,a,s){return V(),z("li",{"aria-selected":t.selected,style:Pe(t.style),class:U([t.ns.be("dropdown","item"),t.ns.is("selected",t.selected),t.ns.is("disabled",t.disabled),t.ns.is("created",t.created),t.ns.is("hovering",t.hovering)]),onMouseenter:e[0]||(e[0]=(...o)=>t.hoverItem&&t.hoverItem(...o)),onClick:e[1]||(e[1]=Ze((...o)=>t.selectOptionClick&&t.selectOptionClick(...o),["stop"]))},[ce(t.$slots,"default",{item:t.item,index:t.index,disabled:t.disabled},()=>[H("span",null,Te(t.getLabel(t.item)),1)])],46,G1e)}var H1e=Ve(P1e,[["render",z1e],["__file","option-item.vue"]]),K1e=q({name:"ElSelectDropdown",props:{loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number},setup(t,{slots:e,expose:n}){const r=We(hb),a=Ce("select"),{getLabel:s,getValue:o,getDisabled:i}=qv(r.props),l=P([]),c=P(),u=R(()=>t.data.length);pe(()=>u.value,()=>{var M,D;(D=(M=r.tooltipRef.value).updatePopper)==null||D.call(M)});const f=R(()=>Kn(r.props.estimatedOptionHeight)),d=R(()=>f.value?{itemSize:r.props.itemHeight}:{estimatedSize:r.props.estimatedOptionHeight,itemSize:M=>l.value[M]}),p=(M=[],D)=>{const{props:{valueKey:I}}=r;return pt(D)?M&&M.some(B=>Ht(Vn(B,I))===Vn(D,I)):M.includes(D)},h=(M,D)=>{if(pt(D)){const{valueKey:I}=r.props;return Vn(M,I)===Vn(D,I)}else return M===D},g=(M,D)=>r.props.multiple?p(M,o(D)):h(M,o(D)),y=(M,D)=>{const{disabled:I,multiple:B,multipleLimit:F}=r.props;return I||!D&&(B?F>0&&M.length>=F:!1)},m=M=>t.hoveringIndex===M;n({listRef:c,isSized:f,isItemDisabled:y,isItemHovering:m,isItemSelected:g,scrollToItem:M=>{const D=c.value;D&&D.scrollToItem(M)},resetScrollTop:()=>{const M=c.value;M&&M.resetScrollTop()}});const S=M=>{const{index:D,data:I,style:B}=M,F=v(f),{itemSize:$,estimatedSize:N}=v(d),{modelValue:W}=r.props,{onSelect:_,onHover:L}=r,G=I[D];if(G.type==="Group")return j(U1e,{item:G,style:B,height:F?$:N},null);const K=g(W,G),Y=y(W,K),te=m(D);return j(H1e,ft(M,{selected:K,disabled:i(G)||Y,created:!!G.created,hovering:te,item:G,onSelect:_,onHover:L}),{default:ve=>{var se;return((se=e.default)==null?void 0:se.call(e,ve))||j("span",null,[s(G)])}})},{onKeyboardNavigate:T,onKeyboardSelect:w}=r,x=()=>{T("forward")},E=()=>{T("backward")},O=()=>{r.expanded=!1},k=M=>{const{code:D}=M,{tab:I,esc:B,down:F,up:$,enter:N}=He;switch(D!==I&&(M.preventDefault(),M.stopPropagation()),D){case I:case B:{O();break}case F:{x();break}case $:{E();break}case N:{w();break}}};return()=>{var M,D,I,B;const{data:F,width:$}=t,{height:N,multiple:W,scrollbarAlwaysOn:_}=r.props;if(e.loading||e.empty)return j("div",{class:a.b("dropdown"),style:{width:`${$}px`}},[((M=e.loading)==null?void 0:M.call(e))||((D=e.empty)==null?void 0:D.call(e))]);const L=v(f)?pB:R1e;return j("div",{class:[a.b("dropdown"),a.is("multiple",W)]},[(I=e.header)==null?void 0:I.call(e),j(L,ft({ref:c},v(d),{className:a.be("dropdown","list"),scrollbarAlwaysOn:_,data:F,height:N,width:$,total:F.length,onKeydown:k}),{default:G=>j(S,G,null)}),(B=e.footer)==null?void 0:B.call(e)])}}});function j1e(t,e){const{aliasProps:n,getLabel:r,getValue:a}=qv(t),s=P(0),o=P(null),i=R(()=>t.allowCreate&&t.filterable);function l(p){const h=g=>a(g)===p;return t.options&&t.options.some(h)||e.createdOptions.some(h)}function c(p){i.value&&(t.multiple&&p.created?s.value++:o.value=p)}function u(p){if(i.value)if(p&&p.length>0){if(l(p))return;const h={[n.value.value]:p,[n.value.label]:p,created:!0,[n.value.disabled]:!1};e.createdOptions.length>=s.value?e.createdOptions[s.value]=h:e.createdOptions.push(h)}else if(t.multiple)e.createdOptions.length=s.value;else{const h=o.value;e.createdOptions.length=0,h&&h.created&&e.createdOptions.push(h)}}function f(p){if(!i.value||!p||!p.created||p.created&&t.reserveKeyword&&e.inputValue===r(p))return;const h=e.createdOptions.findIndex(g=>a(g)===a(p));~h&&(e.createdOptions.splice(h,1),s.value--)}function d(){i.value&&(e.createdOptions.length=0,s.value=0)}return{createNewOption:u,removeNewOption:f,selectNewOption:c,clearAllNewOption:d}}const Y1e=11,q1e=(t,e)=>{const{t:n}=Mt(),r=Ce("select"),a=Ce("input"),{form:s,formItem:o}=Hr(),{inputId:i}=Bs(t,{formItemContext:o}),{getLabel:l,getValue:c,getDisabled:u,getOptions:f}=qv(t),d=Dt({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),p=P(-1),h=P(-1),g=P(null),y=P(null),m=P(null),b=P(null),C=P(null),S=P(null),T=P(null),w=P(null),x=P(null),E=P(null),O=P(null),{wrapperRef:k,isFocused:M,handleFocus:D,handleBlur:I}=Wv(C,{afterFocus(){t.automaticDropdown&&!$.value&&($.value=!0,d.menuVisibleOnFocus=!0)},beforeBlur(Ne){var ht,xt;return((ht=m.value)==null?void 0:ht.isFocusInsideContent(Ne))||((xt=b.value)==null?void 0:xt.isFocusInsideContent(Ne))},afterBlur(){$.value=!1,d.menuVisibleOnFocus=!1}}),B=P([]),F=P([]),$=P(!1),N=R(()=>t.disabled||(s==null?void 0:s.disabled)),W=R(()=>{const Ne=F.value.length*t.itemHeight;return Ne>t.height?t.height:Ne}),_=R(()=>t.multiple?Be(t.modelValue)&&t.modelValue.length>0:t.modelValue!==void 0&&t.modelValue!==null&&t.modelValue!==""),L=R(()=>t.clearable&&!N.value&&d.inputHovering&&_.value),G=R(()=>t.remote&&t.filterable?"":bo),K=R(()=>G.value&&r.is("reverse",$.value)),Y=R(()=>(o==null?void 0:o.validateState)||""),te=R(()=>ES[Y.value]),ve=R(()=>t.remote?300:0),se=R(()=>t.loading?t.loadingText||n("el.select.loading"):t.remote&&!d.inputValue&&B.value.length===0?!1:t.filterable&&d.inputValue&&B.value.length>0&&F.value.length===0?t.noMatchText||n("el.select.noMatch"):B.value.length===0?t.noDataText||n("el.select.noData"):null),ie=Ne=>{const ht=xt=>{if(t.filterable&&Je(t.filterMethod)||t.filterable&&t.remote&&Je(t.remoteMethod))return!0;const At=new RegExp(yS(Ne),"i");return Ne?At.test(l(xt)||""):!0};return t.loading?[]:[...d.createdOptions,...t.options].reduce((xt,At)=>{const cs=f(At);if(Be(cs)){const Us=cs.filter(ht);Us.length>0&&xt.push({label:l(At),isTitle:!0,type:"Group"},...Us,{type:"Group"})}else(t.remote||ht(At))&&xt.push(At);return xt},[])},re=()=>{B.value=ie(""),F.value=ie(d.inputValue)},be=R(()=>{const Ne=new Map;return F.value.forEach((ht,xt)=>{Ne.set(Ln(c(ht)),{option:ht,index:xt})}),Ne}),ge=R(()=>F.value.every(Ne=>u(Ne))),Se=qn(),De=R(()=>Se.value==="small"?"small":"default"),X=()=>{var Ne;h.value=((Ne=g.value)==null?void 0:Ne.offsetWidth)||200},ne=()=>{if(!y.value)return 0;const Ne=window.getComputedStyle(y.value);return Number.parseFloat(Ne.gap||"6px")},me=R(()=>{const Ne=ne();return{maxWidth:`${O.value&&t.maxCollapseTags===1?d.selectionWidth-d.collapseItemWidth-Ne:d.selectionWidth}px`}}),Ee=R(()=>({maxWidth:`${d.selectionWidth}px`})),de=R(()=>({width:`${Math.max(d.calculatorWidth,Y1e)}px`})),xe=R(()=>Be(t.modelValue)?t.modelValue.length===0&&!d.inputValue:t.filterable?!d.inputValue:!0),ke=R(()=>{var Ne;const ht=(Ne=t.placeholder)!=null?Ne:n("el.select.placeholder");return t.multiple||!_.value?ht:d.selectedLabel}),ye=R(()=>{var Ne,ht;return(ht=(Ne=m.value)==null?void 0:Ne.popperRef)==null?void 0:ht.contentRef}),_e=R(()=>{if(t.multiple){const Ne=t.modelValue.length;if(t.modelValue.length>0&&be.value.has(t.modelValue[Ne-1])){const{index:ht}=be.value.get(t.modelValue[Ne-1]);return ht}}else if(t.modelValue&&be.value.has(t.modelValue)){const{index:Ne}=be.value.get(t.modelValue);return Ne}return-1}),Oe=R({get(){return $.value&&se.value!==!1},set(Ne){$.value=Ne}}),Fe=R(()=>t.multiple?t.collapseTags?d.cachedOptions.slice(0,t.maxCollapseTags):d.cachedOptions:[]),ze=R(()=>t.multiple?t.collapseTags?d.cachedOptions.slice(t.maxCollapseTags):[]:[]),{createNewOption:he,removeNewOption:Ae,selectNewOption:qe,clearAllNewOption:st}=j1e(t,d),{handleCompositionStart:vt,handleCompositionUpdate:Ke,handleCompositionEnd:fe}=tB(Ne=>Fa(Ne)),le=()=>{N.value||(d.menuVisibleOnFocus?d.menuVisibleOnFocus=!1:$.value=!$.value)},oe=()=>{d.inputValue.length>0&&!$.value&&($.value=!0),he(d.inputValue),J(d.inputValue)},we=ta(oe,ve.value),J=Ne=>{d.previousQuery!==Ne&&(d.previousQuery=Ne,t.filterable&&Je(t.filterMethod)?t.filterMethod(Ne):t.filterable&&t.remote&&Je(t.remoteMethod)&&t.remoteMethod(Ne),t.defaultFirstOption&&(t.filterable||t.remote)&&F.value.length?Ye($e):Ye(Fn))},$e=()=>{const Ne=F.value.filter(At=>!At.disabled&&At.type!=="Group"),ht=Ne.find(At=>At.created),xt=Ne[0];d.hoveringIndex=On(F.value,ht||xt)},nt=Ne=>{Or(t.modelValue,Ne)||e(pn,Ne)},yt=Ne=>{e(ut,Ne),nt(Ne),d.previousValue=String(Ne)},On=(Ne=[],ht)=>{if(!pt(ht))return Ne.indexOf(ht);const xt=t.valueKey;let At=-1;return Ne.some((cs,Us)=>Vn(cs,xt)===Vn(ht,xt)?(At=Us,!0):!1),At},Ln=Ne=>pt(Ne)?Vn(Ne,t.valueKey):Ne,ls=()=>{X()},vr=()=>{d.selectionWidth=y.value.getBoundingClientRect().width},Kt=()=>{d.calculatorWidth=S.value.getBoundingClientRect().width},Cn=()=>{d.collapseItemWidth=O.value.getBoundingClientRect().width},ra=()=>{var Ne,ht;(ht=(Ne=m.value)==null?void 0:Ne.updatePopper)==null||ht.call(Ne)},Eo=()=>{var Ne,ht;(ht=(Ne=b.value)==null?void 0:Ne.updatePopper)==null||ht.call(Ne)},Ld=(Ne,ht)=>{if(t.multiple){let xt=t.modelValue.slice();const At=On(xt,c(Ne));At>-1?(xt=[...xt.slice(0,At),...xt.slice(At+1)],d.cachedOptions.splice(At,1),Ae(Ne)):(t.multipleLimit<=0||xt.length<t.multipleLimit)&&(xt=[...xt,c(Ne)],d.cachedOptions.push(Ne),qe(Ne)),yt(xt),Ne.created&&J(""),t.filterable&&!t.reserveKeyword&&(d.inputValue="")}else p.value=ht,d.selectedLabel=l(Ne),yt(c(Ne)),$.value=!1,qe(Ne),Ne.created||st();Pl()},s0=(Ne,ht)=>{let xt=t.modelValue.slice();const At=On(xt,c(ht));At>-1&&!N.value&&(xt=[...t.modelValue.slice(0,At),...t.modelValue.slice(At+1)],d.cachedOptions.splice(At,1),yt(xt),e("remove-tag",c(ht)),Ae(ht)),Ne.stopPropagation(),Pl()},Pl=()=>{var Ne;(Ne=C.value)==null||Ne.focus()},Nd=()=>{var Ne;(Ne=C.value)==null||Ne.blur()},o0=()=>{d.inputValue.length>0?d.inputValue="":$.value=!1},i0=Ne=>fL(Ne,ht=>!d.cachedOptions.some(xt=>c(xt)===ht&&u(xt))),l0=Ne=>{if(t.multiple&&Ne.code!==He.delete&&d.inputValue.length===0){Ne.preventDefault();const ht=t.modelValue.slice(),xt=i0(ht);if(xt<0)return;ht.splice(xt,1);const At=d.cachedOptions[xt];d.cachedOptions.splice(xt,1),Ae(At),yt(ht)}},c0=()=>{let Ne;Be(t.modelValue)?Ne=[]:Ne=void 0,t.multiple?d.cachedOptions=[]:d.selectedLabel="",$.value=!1,yt(Ne),e("clear"),st(),Pl()},Le=(Ne,ht=void 0)=>{const xt=F.value;if(!["forward","backward"].includes(Ne)||N.value||xt.length<=0||ge.value)return;if(!$.value)return le();ht===void 0&&(ht=d.hoveringIndex);let At=-1;Ne==="forward"?(At=ht+1,At>=xt.length&&(At=0)):Ne==="backward"&&(At=ht-1,(At<0||At>=xt.length)&&(At=xt.length-1));const cs=xt[At];if(u(cs)||cs.type==="Group")return Le(Ne,At);d.hoveringIndex=At,$a(At)},Qe=()=>{if($.value)~d.hoveringIndex&&F.value[d.hoveringIndex]&&Ld(F.value[d.hoveringIndex],d.hoveringIndex);else return le()},un=Ne=>{d.hoveringIndex=Ne},Fn=()=>{t.multiple?t.modelValue.length>0?d.hoveringIndex=Math.min(...t.modelValue.map(Ne=>F.value.findIndex(ht=>c(ht)===Ne))):d.hoveringIndex=-1:d.hoveringIndex=F.value.findIndex(Ne=>Ln(Ne)===Ln(t.modelValue))},Fa=Ne=>{if(d.inputValue=Ne.target.value,t.remote)we();else return oe()},ko=Ne=>{if($.value=!1,M.value){const ht=new FocusEvent("focus",Ne);I(ht)}},Gl=()=>Ye(()=>{~_e.value&&$a(d.hoveringIndex)}),$a=Ne=>{x.value.scrollToItem(Ne)},da=Ne=>{const ht=Ln(Ne);if(be.value.has(ht)){const{option:xt}=be.value.get(ht);return xt}return{value:Ne,label:Ne}},zl=()=>{if(t.multiple)if(t.modelValue.length>0){d.cachedOptions.length=0,d.previousValue=t.modelValue.toString();for(const Ne of t.modelValue){const ht=da(Ne);d.cachedOptions.push(ht)}}else d.cachedOptions=[],d.previousValue=void 0;else if(_.value){d.previousValue=t.modelValue;const Ne=F.value,ht=Ne.findIndex(xt=>Ln(c(xt))===Ln(t.modelValue));~ht?d.selectedLabel=l(Ne[ht]):d.selectedLabel=Ln(t.modelValue)}else d.selectedLabel="",d.previousValue=void 0;st(),X()};return pe($,Ne=>{Ne?J(""):(d.inputValue="",d.previousQuery=null,d.isBeforeHide=!0,he("")),e("visible-change",Ne)}),pe(()=>t.modelValue,(Ne,ht)=>{var xt;(!Ne||Ne.toString()!==d.previousValue)&&zl(),!Or(Ne,ht)&&t.validateEvent&&((xt=o==null?void 0:o.validate)==null||xt.call(o,"change").catch(At=>void 0))},{deep:!0}),pe(()=>t.options,()=>{const Ne=C.value;(!Ne||Ne&&document.activeElement!==Ne)&&zl()},{deep:!0,flush:"post"}),pe(()=>F.value,()=>x.value&&Ye(x.value.resetScrollTop)),Sr(()=>{d.isBeforeHide||re()}),Sr(()=>{const{valueKey:Ne,options:ht}=t,xt=new Map;for(const At of ht){const cs=c(At);let Us=cs;if(pt(Us)&&(Us=Vn(cs,Ne)),xt.get(Us))break;xt.set(Us,!0)}}),at(()=>{zl()}),Sn(g,ls),Sn(y,vr),Sn(S,Kt),Sn(x,ra),Sn(k,ra),Sn(E,Eo),Sn(O,Cn),{inputId:i,collapseTagSize:De,currentPlaceholder:ke,expanded:$,emptyText:se,popupHeight:W,debounce:ve,allOptions:B,filteredOptions:F,iconComponent:G,iconReverse:K,tagStyle:me,collapseTagStyle:Ee,inputStyle:de,popperSize:h,dropdownMenuVisible:Oe,hasModelValue:_,shouldShowPlaceholder:xe,selectDisabled:N,selectSize:Se,showClearBtn:L,states:d,isFocused:M,nsSelect:r,nsInput:a,calculatorRef:S,inputRef:C,menuRef:x,tagMenuRef:E,tooltipRef:m,tagTooltipRef:b,selectRef:g,wrapperRef:k,selectionRef:y,prefixRef:T,suffixRef:w,collapseItemRef:O,popperRef:ye,validateState:Y,validateIcon:te,showTagList:Fe,collapseTagList:ze,debouncedOnInputChange:we,deleteTag:s0,getLabel:l,getValue:c,getDisabled:u,getValueKey:Ln,handleBlur:I,handleClear:c0,handleClickOutside:ko,handleDel:l0,handleEsc:o0,handleFocus:D,focus:Pl,blur:Nd,handleMenuEnter:Gl,handleResize:ls,resetSelectionWidth:vr,resetCalculatorWidth:Kt,updateTooltip:ra,updateTagTooltip:Eo,updateOptions:re,toggleMenu:le,scrollTo:$a,onInput:Fa,onKeyboardNavigate:Le,onKeyboardSelect:Qe,onSelect:Ld,onHover:un,handleCompositionStart:vt,handleCompositionEnd:fe,handleCompositionUpdate:Ke}},X1e=q({name:"ElSelectV2",components:{ElSelectMenu:K1e,ElTag:If,ElTooltip:Dr,ElIcon:Ge},directives:{ClickOutside:go},props:W1e,emits:[ut,pn,"remove-tag","clear","visible-change","focus","blur"],setup(t,{emit:e}){const n=R(()=>{const{modelValue:a,multiple:s}=t,o=s?[]:void 0;return Be(a)?s?a:o:s?o:a}),r=q1e(Dt({...hr(t),modelValue:n}),e);return bt(hb,{props:Dt({...hr(t),height:r.popupHeight,modelValue:n}),tooltipRef:r.tooltipRef,onSelect:r.onSelect,onHover:r.onHover,onKeyboardNavigate:r.onKeyboardNavigate,onKeyboardSelect:r.onKeyboardSelect}),{...r,modelValue:n}}}),Z1e=["id","autocomplete","aria-expanded","aria-label","disabled","readonly","name"],J1e=["textContent"];function Q1e(t,e,n,r,a,s){const o=et("el-tag"),i=et("el-tooltip"),l=et("el-icon"),c=et("el-select-menu"),u=mv("click-outside");return rt((V(),z("div",{ref:"selectRef",class:U([t.nsSelect.b(),t.nsSelect.m(t.selectSize)]),onMouseenter:e[14]||(e[14]=f=>t.states.inputHovering=!0),onMouseleave:e[15]||(e[15]=f=>t.states.inputHovering=!1),onClick:e[16]||(e[16]=Ze((...f)=>t.toggleMenu&&t.toggleMenu(...f),["stop"]))},[j(i,{ref:"tooltipRef",visible:t.dropdownMenuVisible,teleported:t.teleported,"popper-class":[t.nsSelect.e("popper"),t.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":t.popperOptions,"fallback-placements":t.fallbackPlacements,effect:t.effect,placement:t.placement,pure:"",transition:`${t.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:t.persistent,onBeforeShow:t.handleMenuEnter,onHide:e[13]||(e[13]=f=>t.states.isBeforeHide=!1)},{default:Z(()=>[H("div",{ref:"wrapperRef",class:U([t.nsSelect.e("wrapper"),t.nsSelect.is("focused",t.isFocused),t.nsSelect.is("hovering",t.states.inputHovering),t.nsSelect.is("filterable",t.filterable),t.nsSelect.is("disabled",t.selectDisabled)])},[t.$slots.prefix?(V(),z("div",{key:0,ref:"prefixRef",class:U(t.nsSelect.e("prefix"))},[ce(t.$slots,"prefix")],2)):ee("v-if",!0),H("div",{ref:"selectionRef",class:U([t.nsSelect.e("selection"),t.nsSelect.is("near",t.multiple&&!t.$slots.prefix&&!!t.modelValue.length)])},[t.multiple?ce(t.$slots,"tag",{key:0},()=>[(V(!0),z(Ue,null,gt(t.showTagList,f=>(V(),z("div",{key:t.getValueKey(t.getValue(f)),class:U(t.nsSelect.e("selected-item"))},[j(o,{closable:!t.selectDisabled&&!t.getDisabled(f),size:t.collapseTagSize,type:t.tagType,"disable-transitions":"",style:Pe(t.tagStyle),onClose:d=>t.deleteTag(d,f)},{default:Z(()=>[H("span",{class:U(t.nsSelect.e("tags-text"))},Te(t.getLabel(f)),3)]),_:2},1032,["closable","size","type","style","onClose"])],2))),128)),t.collapseTags&&t.modelValue.length>t.maxCollapseTags?(V(),ae(i,{key:0,ref:"tagTooltipRef",disabled:t.dropdownMenuVisible||!t.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:t.effect,placement:"bottom",teleported:t.teleported},{default:Z(()=>[H("div",{ref:"collapseItemRef",class:U(t.nsSelect.e("selected-item"))},[j(o,{closable:!1,size:t.collapseTagSize,type:t.tagType,style:Pe(t.collapseTagStyle),"disable-transitions":""},{default:Z(()=>[H("span",{class:U(t.nsSelect.e("tags-text"))}," + "+Te(t.modelValue.length-t.maxCollapseTags),3)]),_:1},8,["size","type","style"])],2)]),content:Z(()=>[H("div",{ref:"tagMenuRef",class:U(t.nsSelect.e("selection"))},[(V(!0),z(Ue,null,gt(t.collapseTagList,f=>(V(),z("div",{key:t.getValueKey(t.getValue(f)),class:U(t.nsSelect.e("selected-item"))},[j(o,{class:"in-tooltip",closable:!t.selectDisabled&&!t.getDisabled(f),size:t.collapseTagSize,type:t.tagType,"disable-transitions":"",onClose:d=>t.deleteTag(d,f)},{default:Z(()=>[H("span",{class:U(t.nsSelect.e("tags-text"))},Te(t.getLabel(f)),3)]),_:2},1032,["closable","size","type","onClose"])],2))),128))],2)]),_:1},8,["disabled","effect","teleported"])):ee("v-if",!0)]):ee("v-if",!0),t.selectDisabled?ee("v-if",!0):(V(),z("div",{key:1,class:U([t.nsSelect.e("selected-item"),t.nsSelect.e("input-wrapper"),t.nsSelect.is("hidden",!t.filterable)])},[rt(H("input",{id:t.inputId,ref:"inputRef","onUpdate:modelValue":e[0]||(e[0]=f=>t.states.inputValue=f),style:Pe(t.inputStyle),autocomplete:t.autocomplete,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":t.expanded,"aria-label":t.ariaLabel,class:U([t.nsSelect.e("input"),t.nsSelect.is(t.selectSize)]),disabled:t.selectDisabled,role:"combobox",readonly:!t.filterable,spellcheck:"false",type:"text",name:t.name,onFocus:e[1]||(e[1]=(...f)=>t.handleFocus&&t.handleFocus(...f)),onBlur:e[2]||(e[2]=(...f)=>t.handleBlur&&t.handleBlur(...f)),onInput:e[3]||(e[3]=(...f)=>t.onInput&&t.onInput(...f)),onCompositionstart:e[4]||(e[4]=(...f)=>t.handleCompositionStart&&t.handleCompositionStart(...f)),onCompositionupdate:e[5]||(e[5]=(...f)=>t.handleCompositionUpdate&&t.handleCompositionUpdate(...f)),onCompositionend:e[6]||(e[6]=(...f)=>t.handleCompositionEnd&&t.handleCompositionEnd(...f)),onKeydown:[e[7]||(e[7]=Xt(Ze(f=>t.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),e[8]||(e[8]=Xt(Ze(f=>t.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),e[9]||(e[9]=Xt(Ze((...f)=>t.onKeyboardSelect&&t.onKeyboardSelect(...f),["stop","prevent"]),["enter"])),e[10]||(e[10]=Xt(Ze((...f)=>t.handleEsc&&t.handleEsc(...f),["stop","prevent"]),["esc"])),e[11]||(e[11]=Xt(Ze((...f)=>t.handleDel&&t.handleDel(...f),["stop"]),["delete"]))],onClick:e[12]||(e[12]=Ze((...f)=>t.toggleMenu&&t.toggleMenu(...f),["stop"]))},null,46,Z1e),[[Pc,t.states.inputValue]]),t.filterable?(V(),z("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:U(t.nsSelect.e("input-calculator")),textContent:Te(t.states.inputValue)},null,10,J1e)):ee("v-if",!0)],2)),t.shouldShowPlaceholder?(V(),z("div",{key:2,class:U([t.nsSelect.e("selected-item"),t.nsSelect.e("placeholder"),t.nsSelect.is("transparent",!t.hasModelValue||t.expanded&&!t.states.inputValue)])},[H("span",null,Te(t.currentPlaceholder),1)],2)):ee("v-if",!0)],2),H("div",{ref:"suffixRef",class:U(t.nsSelect.e("suffix"))},[t.iconComponent?rt((V(),ae(l,{key:0,class:U([t.nsSelect.e("caret"),t.nsInput.e("icon"),t.iconReverse])},{default:Z(()=>[(V(),ae(dt(t.iconComponent)))]),_:1},8,["class"])),[[Rt,!t.showClearBtn]]):ee("v-if",!0),t.showClearBtn&&t.clearIcon?(V(),ae(l,{key:1,class:U([t.nsSelect.e("caret"),t.nsInput.e("icon")]),onClick:Ze(t.handleClear,["prevent","stop"])},{default:Z(()=>[(V(),ae(dt(t.clearIcon)))]),_:1},8,["class","onClick"])):ee("v-if",!0),t.validateState&&t.validateIcon?(V(),ae(l,{key:2,class:U([t.nsInput.e("icon"),t.nsInput.e("validateIcon")])},{default:Z(()=>[(V(),ae(dt(t.validateIcon)))]),_:1},8,["class"])):ee("v-if",!0)],2)],2)]),content:Z(()=>[j(c,{ref:"menuRef",data:t.filteredOptions,width:t.popperSize,"hovering-index":t.states.hoveringIndex,"scrollbar-always-on":t.scrollbarAlwaysOn},lo({default:Z(f=>[ce(t.$slots,"default",Za(Tv(f)))]),_:2},[t.$slots.header?{name:"header",fn:Z(()=>[H("div",{class:U(t.nsSelect.be("dropdown","header"))},[ce(t.$slots,"header")],2)])}:void 0,t.$slots.loading&&t.loading?{name:"loading",fn:Z(()=>[H("div",{class:U(t.nsSelect.be("dropdown","loading"))},[ce(t.$slots,"loading")],2)])}:t.loading||t.filteredOptions.length===0?{name:"empty",fn:Z(()=>[H("div",{class:U(t.nsSelect.be("dropdown","empty"))},[ce(t.$slots,"empty",{},()=>[H("span",null,Te(t.emptyText),1)])],2)])}:void 0,t.$slots.footer?{name:"footer",fn:Z(()=>[H("div",{class:U(t.nsSelect.be("dropdown","footer"))},[ce(t.$slots,"footer")],2)])}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","onBeforeShow"])],34)),[[u,t.handleClickOutside,t.popperRef]])}var Tg=Ve(X1e,[["render",Q1e],["__file","select.vue"]]);Tg.install=t=>{t.component(Tg.name,Tg)};const eCe=Tg,tCe=eCe,nCe=Re({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Number}}),rCe=Re({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),aCe=q({name:"ElSkeletonItem"}),sCe=q({...aCe,props:rCe,setup(t){const e=Ce("skeleton");return(n,r)=>(V(),z("div",{class:U([v(e).e("item"),v(e).e(n.variant)])},[n.variant==="image"?(V(),ae(v(ore),{key:0})):ee("v-if",!0)],2))}});var Uh=Ve(sCe,[["__file","skeleton-item.vue"]]);const oCe=q({name:"ElSkeleton"}),iCe=q({...oCe,props:nCe,setup(t,{expose:e}){const n=t,r=Ce("skeleton"),a=Jae(tn(n,"loading"),n.throttle);return e({uiLoading:a}),(s,o)=>v(a)?(V(),z("div",ft({key:0,class:[v(r).b(),v(r).is("animated",s.animated)]},s.$attrs),[(V(!0),z(Ue,null,gt(s.count,i=>(V(),z(Ue,{key:i},[s.loading?ce(s.$slots,"template",{key:i},()=>[j(Uh,{class:U(v(r).is("first")),variant:"p"},null,8,["class"]),(V(!0),z(Ue,null,gt(s.rows,l=>(V(),ae(Uh,{key:l,class:U([v(r).e("paragraph"),v(r).is("last",l===s.rows&&s.rows>1)]),variant:"p"},null,8,["class"]))),128))]):ee("v-if",!0)],64))),128))],16)):ce(s.$slots,"default",Za(ft({key:1},s.$attrs)))}});var lCe=Ve(iCe,[["__file","skeleton.vue"]]);const cCe=lt(lCe,{SkeletonItem:Uh}),uCe=bn(Uh),wB=Symbol("sliderContextKey"),fCe=Re({modelValue:{type:Q([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:lr,inputSize:lr,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Q(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:Q(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Al,default:"top"},marks:{type:Q(Object)},validateEvent:{type:Boolean,default:!0}}),oy=t=>Xe(t)||Be(t)&&t.every(Xe),dCe={[ut]:oy,[Ir]:oy,[pn]:oy},pCe=(t,e,n)=>{const r=P();return at(async()=>{t.range?(Array.isArray(t.modelValue)?(e.firstValue=Math.max(t.min,t.modelValue[0]),e.secondValue=Math.min(t.max,t.modelValue[1])):(e.firstValue=t.min,e.secondValue=t.max),e.oldValue=[e.firstValue,e.secondValue]):(typeof t.modelValue!="number"||Number.isNaN(t.modelValue)?e.firstValue=t.min:e.firstValue=Math.min(t.max,Math.max(t.min,t.modelValue)),e.oldValue=e.firstValue),vn(window,"resize",n),await Ye(),n()}),{sliderWrapper:r}},gCe=t=>R(()=>t.marks?Object.keys(t.marks).map(Number.parseFloat).sort((n,r)=>n-r).filter(n=>n<=t.max&&n>=t.min).map(n=>({point:n,position:(n-t.min)*100/(t.max-t.min),mark:t.marks[n]})):[]),hCe=(t,e,n)=>{const{form:r,formItem:a}=Hr(),s=on(),o=P(),i=P(),l={firstButton:o,secondButton:i},c=R(()=>t.disabled||(r==null?void 0:r.disabled)||!1),u=R(()=>Math.min(e.firstValue,e.secondValue)),f=R(()=>Math.max(e.firstValue,e.secondValue)),d=R(()=>t.range?`${100*(f.value-u.value)/(t.max-t.min)}%`:`${100*(e.firstValue-t.min)/(t.max-t.min)}%`),p=R(()=>t.range?`${100*(u.value-t.min)/(t.max-t.min)}%`:"0%"),h=R(()=>t.vertical?{height:t.height}:{}),g=R(()=>t.vertical?{height:d.value,bottom:p.value}:{width:d.value,left:p.value}),y=()=>{s.value&&(e.sliderSize=s.value[`client${t.vertical?"Height":"Width"}`])},m=M=>{const D=t.min+M*(t.max-t.min)/100;if(!t.range)return o;let I;return Math.abs(u.value-D)<Math.abs(f.value-D)?I=e.firstValue<e.secondValue?"firstButton":"secondButton":I=e.firstValue>e.secondValue?"firstButton":"secondButton",l[I]},b=M=>{const D=m(M);return D.value.setPosition(M),D},C=M=>{e.firstValue=M,T(t.range?[u.value,f.value]:M)},S=M=>{e.secondValue=M,t.range&&T([u.value,f.value])},T=M=>{n(ut,M),n(Ir,M)},w=async()=>{await Ye(),n(pn,t.range?[u.value,f.value]:t.modelValue)},x=M=>{var D,I,B,F,$,N;if(c.value||e.dragging)return;y();let W=0;if(t.vertical){const _=(B=(I=(D=M.touches)==null?void 0:D.item(0))==null?void 0:I.clientY)!=null?B:M.clientY;W=(s.value.getBoundingClientRect().bottom-_)/e.sliderSize*100}else{const _=(N=($=(F=M.touches)==null?void 0:F.item(0))==null?void 0:$.clientX)!=null?N:M.clientX,L=s.value.getBoundingClientRect().left;W=(_-L)/e.sliderSize*100}if(!(W<0||W>100))return b(W)};return{elFormItem:a,slider:s,firstButton:o,secondButton:i,sliderDisabled:c,minValue:u,maxValue:f,runwayStyle:h,barStyle:g,resetSize:y,setPosition:b,emitChange:w,onSliderWrapperPrevent:M=>{var D,I;((D=l.firstButton.value)!=null&&D.dragging||(I=l.secondButton.value)!=null&&I.dragging)&&M.preventDefault()},onSliderClick:M=>{x(M)&&w()},onSliderDown:async M=>{const D=x(M);D&&(await Ye(),D.value.onButtonDown(M))},setFirstValue:C,setSecondValue:S}},{left:vCe,down:yCe,right:mCe,up:CCe,home:SCe,end:bCe,pageUp:wCe,pageDown:TCe}=He,xCe=(t,e,n)=>{const r=P(),a=P(!1),s=R(()=>e.value instanceof Function),o=R(()=>s.value&&e.value(t.modelValue)||t.modelValue),i=ta(()=>{n.value&&(a.value=!0)},50),l=ta(()=>{n.value&&(a.value=!1)},50);return{tooltip:r,tooltipVisible:a,formatValue:o,displayTooltip:i,hideTooltip:l}},ECe=(t,e,n)=>{const{disabled:r,min:a,max:s,step:o,showTooltip:i,precision:l,sliderSize:c,formatTooltip:u,emitChange:f,resetSize:d,updateDragging:p}=We(wB),{tooltip:h,tooltipVisible:g,formatValue:y,displayTooltip:m,hideTooltip:b}=xCe(t,u,i),C=P(),S=R(()=>`${(t.modelValue-a.value)/(s.value-a.value)*100}%`),T=R(()=>t.vertical?{bottom:S.value}:{left:S.value}),w=()=>{e.hovering=!0,m()},x=()=>{e.hovering=!1,e.dragging||b()},E=K=>{r.value||(K.preventDefault(),W(K),window.addEventListener("mousemove",_),window.addEventListener("touchmove",_),window.addEventListener("mouseup",L),window.addEventListener("touchend",L),window.addEventListener("contextmenu",L),C.value.focus())},O=K=>{r.value||(e.newPosition=Number.parseFloat(S.value)+K/(s.value-a.value)*100,G(e.newPosition),f())},k=()=>{O(-o.value)},M=()=>{O(o.value)},D=()=>{O(-o.value*4)},I=()=>{O(o.value*4)},B=()=>{r.value||(G(0),f())},F=()=>{r.value||(G(100),f())},$=K=>{let Y=!0;[vCe,yCe].includes(K.key)?k():[mCe,CCe].includes(K.key)?M():K.key===SCe?B():K.key===bCe?F():K.key===TCe?D():K.key===wCe?I():Y=!1,Y&&K.preventDefault()},N=K=>{let Y,te;return K.type.startsWith("touch")?(te=K.touches[0].clientY,Y=K.touches[0].clientX):(te=K.clientY,Y=K.clientX),{clientX:Y,clientY:te}},W=K=>{e.dragging=!0,e.isClick=!0;const{clientX:Y,clientY:te}=N(K);t.vertical?e.startY=te:e.startX=Y,e.startPosition=Number.parseFloat(S.value),e.newPosition=e.startPosition},_=K=>{if(e.dragging){e.isClick=!1,m(),d();let Y;const{clientX:te,clientY:ve}=N(K);t.vertical?(e.currentY=ve,Y=(e.startY-e.currentY)/c.value*100):(e.currentX=te,Y=(e.currentX-e.startX)/c.value*100),e.newPosition=e.startPosition+Y,G(e.newPosition)}},L=()=>{e.dragging&&(setTimeout(()=>{e.dragging=!1,e.hovering||b(),e.isClick||G(e.newPosition),f()},0),window.removeEventListener("mousemove",_),window.removeEventListener("touchmove",_),window.removeEventListener("mouseup",L),window.removeEventListener("touchend",L),window.removeEventListener("contextmenu",L))},G=async K=>{if(K===null||Number.isNaN(+K))return;K<0?K=0:K>100&&(K=100);const Y=100/((s.value-a.value)/o.value);let ve=Math.round(K/Y)*Y*(s.value-a.value)*.01+a.value;ve=Number.parseFloat(ve.toFixed(l.value)),ve!==t.modelValue&&n(ut,ve),!e.dragging&&t.modelValue!==e.oldValue&&(e.oldValue=t.modelValue),await Ye(),e.dragging&&m(),h.value.updatePopper()};return pe(()=>e.dragging,K=>{p(K)}),{disabled:r,button:C,tooltip:h,tooltipVisible:g,showTooltip:i,wrapperStyle:T,formatValue:y,handleMouseEnter:w,handleMouseLeave:x,onButtonDown:E,onKeyDown:$,setPosition:G}},kCe=(t,e,n,r)=>({stops:R(()=>{if(!t.showStops||t.min>t.max)return[];if(t.step===0)return[];const o=(t.max-t.min)/t.step,i=100*t.step/(t.max-t.min),l=Array.from({length:o-1}).map((c,u)=>(u+1)*i);return t.range?l.filter(c=>c<100*(n.value-t.min)/(t.max-t.min)||c>100*(r.value-t.min)/(t.max-t.min)):l.filter(c=>c>100*(e.firstValue-t.min)/(t.max-t.min))}),getStopStyle:o=>t.vertical?{bottom:`${o}%`}:{left:`${o}%`}}),OCe=(t,e,n,r,a,s)=>{const o=c=>{a(ut,c),a(Ir,c)},i=()=>t.range?![n.value,r.value].every((c,u)=>c===e.oldValue[u]):t.modelValue!==e.oldValue,l=()=>{var c,u;t.min>t.max&&Yn("Slider","min should not be greater than max.");const f=t.modelValue;t.range&&Array.isArray(f)?f[1]<t.min?o([t.min,t.min]):f[0]>t.max?o([t.max,t.max]):f[0]<t.min?o([t.min,f[1]]):f[1]>t.max?o([f[0],t.max]):(e.firstValue=f[0],e.secondValue=f[1],i()&&(t.validateEvent&&((c=s==null?void 0:s.validate)==null||c.call(s,"change").catch(d=>void 0)),e.oldValue=f.slice())):!t.range&&typeof f=="number"&&!Number.isNaN(f)&&(f<t.min?o(t.min):f>t.max?o(t.max):(e.firstValue=f,i()&&(t.validateEvent&&((u=s==null?void 0:s.validate)==null||u.call(s,"change").catch(d=>void 0)),e.oldValue=f)))};l(),pe(()=>e.dragging,c=>{c||l()}),pe(()=>t.modelValue,(c,u)=>{e.dragging||Array.isArray(c)&&Array.isArray(u)&&c.every((f,d)=>f===u[d])&&e.firstValue===c[0]&&e.secondValue===c[1]||l()},{deep:!0}),pe(()=>[t.min,t.max],()=>{l()})},MCe=Re({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Al,default:"top"}}),RCe={[ut]:t=>Xe(t)},_Ce=["tabindex"],VCe=q({name:"ElSliderButton"}),DCe=q({...VCe,props:MCe,emits:RCe,setup(t,{expose:e,emit:n}){const r=t,a=Ce("slider"),s=Dt({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:r.modelValue}),{disabled:o,button:i,tooltip:l,showTooltip:c,tooltipVisible:u,wrapperStyle:f,formatValue:d,handleMouseEnter:p,handleMouseLeave:h,onButtonDown:g,onKeyDown:y,setPosition:m}=ECe(r,s,n),{hovering:b,dragging:C}=hr(s);return e({onButtonDown:g,onKeyDown:y,setPosition:m,hovering:b,dragging:C}),(S,T)=>(V(),z("div",{ref_key:"button",ref:i,class:U([v(a).e("button-wrapper"),{hover:v(b),dragging:v(C)}]),style:Pe(v(f)),tabindex:v(o)?-1:0,onMouseenter:T[0]||(T[0]=(...w)=>v(p)&&v(p)(...w)),onMouseleave:T[1]||(T[1]=(...w)=>v(h)&&v(h)(...w)),onMousedown:T[2]||(T[2]=(...w)=>v(g)&&v(g)(...w)),onTouchstart:T[3]||(T[3]=(...w)=>v(g)&&v(g)(...w)),onFocus:T[4]||(T[4]=(...w)=>v(p)&&v(p)(...w)),onBlur:T[5]||(T[5]=(...w)=>v(h)&&v(h)(...w)),onKeydown:T[6]||(T[6]=(...w)=>v(y)&&v(y)(...w))},[j(v(Dr),{ref_key:"tooltip",ref:l,visible:v(u),placement:S.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":S.tooltipClass,disabled:!v(c),persistent:""},{content:Z(()=>[H("span",null,Te(v(d)),1)]),default:Z(()=>[H("div",{class:U([v(a).e("button"),{hover:v(b),dragging:v(C)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled"])],46,_Ce))}});var ME=Ve(DCe,[["__file","button.vue"]]);const LCe=Re({mark:{type:Q([String,Object]),default:void 0}});var NCe=q({name:"ElSliderMarker",props:LCe,setup(t){const e=Ce("slider"),n=R(()=>tt(t.mark)?t.mark:t.mark.label),r=R(()=>tt(t.mark)?void 0:t.mark.style);return()=>je("div",{class:e.e("marks-text"),style:r.value},n.value)}});const BCe=["id","role","aria-label","aria-labelledby"],FCe={key:1},$Ce=q({name:"ElSlider"}),UCe=q({...$Ce,props:fCe,emits:dCe,setup(t,{expose:e,emit:n}){const r=t,a=Ce("slider"),{t:s}=Mt(),o=Dt({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:i,slider:l,firstButton:c,secondButton:u,sliderDisabled:f,minValue:d,maxValue:p,runwayStyle:h,barStyle:g,resetSize:y,emitChange:m,onSliderWrapperPrevent:b,onSliderClick:C,onSliderDown:S,setFirstValue:T,setSecondValue:w}=hCe(r,o,n),{stops:x,getStopStyle:E}=kCe(r,o,d,p),{inputId:O,isLabeledByFormItem:k}=Bs(r,{formItemContext:i}),M=qn(),D=R(()=>r.inputSize||M.value),I=R(()=>r.label||s("el.slider.defaultLabel",{min:r.min,max:r.max})),B=R(()=>r.range?r.rangeStartLabel||s("el.slider.defaultRangeStartLabel"):I.value),F=R(()=>r.formatValueText?r.formatValueText(K.value):`${K.value}`),$=R(()=>r.rangeEndLabel||s("el.slider.defaultRangeEndLabel")),N=R(()=>r.formatValueText?r.formatValueText(Y.value):`${Y.value}`),W=R(()=>[a.b(),a.m(M.value),a.is("vertical",r.vertical),{[a.m("with-input")]:r.showInput}]),_=gCe(r);OCe(r,o,d,p,n,i);const L=R(()=>{const se=[r.min,r.max,r.step].map(ie=>{const re=`${ie}`.split(".")[1];return re?re.length:0});return Math.max.apply(null,se)}),{sliderWrapper:G}=pCe(r,o,y),{firstValue:K,secondValue:Y,sliderSize:te}=hr(o),ve=se=>{o.dragging=se};return bt(wB,{...hr(r),sliderSize:te,disabled:f,precision:L,emitChange:m,resetSize:y,updateDragging:ve}),e({onSliderClick:C}),(se,ie)=>{var re,be;return V(),z("div",{id:se.range?v(O):void 0,ref_key:"sliderWrapper",ref:G,class:U(v(W)),role:se.range?"group":void 0,"aria-label":se.range&&!v(k)?v(I):void 0,"aria-labelledby":se.range&&v(k)?(re=v(i))==null?void 0:re.labelId:void 0,onTouchstart:ie[2]||(ie[2]=(...ge)=>v(b)&&v(b)(...ge)),onTouchmove:ie[3]||(ie[3]=(...ge)=>v(b)&&v(b)(...ge))},[H("div",{ref_key:"slider",ref:l,class:U([v(a).e("runway"),{"show-input":se.showInput&&!se.range},v(a).is("disabled",v(f))]),style:Pe(v(h)),onMousedown:ie[0]||(ie[0]=(...ge)=>v(S)&&v(S)(...ge)),onTouchstart:ie[1]||(ie[1]=(...ge)=>v(S)&&v(S)(...ge))},[H("div",{class:U(v(a).e("bar")),style:Pe(v(g))},null,6),j(ME,{id:se.range?void 0:v(O),ref_key:"firstButton",ref:c,"model-value":v(K),vertical:se.vertical,"tooltip-class":se.tooltipClass,placement:se.placement,role:"slider","aria-label":se.range||!v(k)?v(B):void 0,"aria-labelledby":!se.range&&v(k)?(be=v(i))==null?void 0:be.labelId:void 0,"aria-valuemin":se.min,"aria-valuemax":se.range?v(Y):se.max,"aria-valuenow":v(K),"aria-valuetext":v(F),"aria-orientation":se.vertical?"vertical":"horizontal","aria-disabled":v(f),"onUpdate:modelValue":v(T)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),se.range?(V(),ae(ME,{key:0,ref_key:"secondButton",ref:u,"model-value":v(Y),vertical:se.vertical,"tooltip-class":se.tooltipClass,placement:se.placement,role:"slider","aria-label":v($),"aria-valuemin":v(K),"aria-valuemax":se.max,"aria-valuenow":v(Y),"aria-valuetext":v(N),"aria-orientation":se.vertical?"vertical":"horizontal","aria-disabled":v(f),"onUpdate:modelValue":v(w)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):ee("v-if",!0),se.showStops?(V(),z("div",FCe,[(V(!0),z(Ue,null,gt(v(x),(ge,Se)=>(V(),z("div",{key:Se,class:U(v(a).e("stop")),style:Pe(v(E)(ge))},null,6))),128))])):ee("v-if",!0),v(_).length>0?(V(),z(Ue,{key:2},[H("div",null,[(V(!0),z(Ue,null,gt(v(_),(ge,Se)=>(V(),z("div",{key:Se,style:Pe(v(E)(ge.position)),class:U([v(a).e("stop"),v(a).e("marks-stop")])},null,6))),128))]),H("div",{class:U(v(a).e("marks"))},[(V(!0),z(Ue,null,gt(v(_),(ge,Se)=>(V(),ae(v(NCe),{key:Se,mark:ge.mark,style:Pe(v(E)(ge.position))},null,8,["mark","style"]))),128))],2)],64)):ee("v-if",!0)],38),se.showInput&&!se.range?(V(),ae(v(YN),{key:0,ref:"input","model-value":v(K),class:U(v(a).e("input")),step:se.step,disabled:v(f),controls:se.showInputControls,min:se.min,max:se.max,debounce:se.debounce,size:v(D),"onUpdate:modelValue":v(T),onChange:v(m)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):ee("v-if",!0)],42,BCe)}}});var ACe=Ve(UCe,[["__file","slider.vue"]]);const WCe=lt(ACe),ICe=Re({prefixCls:{type:String}}),RE=q({name:"ElSpaceItem",props:ICe,setup(t,{slots:e}){const n=Ce("space"),r=R(()=>`${t.prefixCls||n.b()}__item`);return()=>je("div",{class:r.value},ce(e,"default"))}}),_E={small:8,default:12,large:16};function PCe(t){const e=Ce("space"),n=R(()=>[e.b(),e.m(t.direction),t.class]),r=P(0),a=P(0),s=R(()=>{const i=t.wrap||t.fill?{flexWrap:"wrap"}:{},l={alignItems:t.alignment},c={rowGap:`${a.value}px`,columnGap:`${r.value}px`};return[i,l,c,t.style]}),o=R(()=>t.fill?{flexGrow:1,minWidth:`${t.fillRatio}%`}:{});return Sr(()=>{const{size:i="small",wrap:l,direction:c,fill:u}=t;if(Be(i)){const[f=0,d=0]=i;r.value=f,a.value=d}else{let f;Xe(i)?f=i:f=_E[i||"small"]||_E.small,(l||u)&&c==="horizontal"?r.value=a.value=f:c==="horizontal"?(r.value=f,a.value=0):(a.value=f,r.value=0)}}),{classes:n,containerStyle:s,itemStyle:o}}const GCe=Re({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:Q([String,Object,Array]),default:""},style:{type:Q([String,Array,Object]),default:""},alignment:{type:Q(String),default:"center"},prefixCls:{type:String},spacer:{type:Q([Object,String,Number,Array]),default:null,validator:t=>yn(t)||Xe(t)||tt(t)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:Ns,validator:t=>Xe(t)||Be(t)&&t.length===2&&t.every(Xe)}}),zCe=q({name:"ElSpace",props:GCe,setup(t,{slots:e}){const{classes:n,containerStyle:r,itemStyle:a}=PCe(t);function s(o,i="",l=[]){const{prefixCls:c}=t;return o.forEach((u,f)=>{Sm(u)?Be(u.children)&&u.children.forEach((d,p)=>{Sm(d)&&Be(d.children)?s(d.children,`${i+p}-`,l):l.push(j(RE,{style:a.value,prefixCls:c,key:`nested-${i+p}`},{default:()=>[d]},ya.PROPS|ya.STYLE,["style","prefixCls"]))}):Fre(u)&&l.push(j(RE,{style:a.value,prefixCls:c,key:`LoopKey${i+f}`},{default:()=>[u]},ya.PROPS|ya.STYLE,["style","prefixCls"]))}),l}return()=>{var o;const{spacer:i,direction:l}=t,c=ce(e,"default",{key:0},()=>[]);if(((o=c.children)!=null?o:[]).length===0)return null;if(Be(c.children)){let u=s(c.children);if(i){const f=u.length-1;u=u.reduce((d,p,h)=>{const g=[...d,p];return h!==f&&g.push(j("span",{style:[a.value,l==="vertical"?"width: 100%":null],key:h},[yn(i)?i:Ct(i,ya.TEXT)],ya.STYLE)),g},[])}return j("div",{class:n.value,style:r.value},u,ya.STYLE|ya.CLASS)}return c.children}}}),HCe=lt(zCe),KCe=Re({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:Q([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:Q([String,Object,Array])}}),jCe=q({name:"ElStatistic"}),YCe=q({...jCe,props:KCe,setup(t,{expose:e}){const n=t,r=Ce("statistic"),a=R(()=>{const{value:s,formatter:o,precision:i,decimalSeparator:l,groupSeparator:c}=n;if(Je(o))return o(s);if(!Xe(s))return s;let[u,f=""]=String(s).split(".");return f=f.padEnd(i,"0").slice(0,i>0?i:0),u=u.replace(/\B(?=(\d{3})+(?!\d))/g,c),[u,f].join(f?l:"")});return e({displayValue:a}),(s,o)=>(V(),z("div",{class:U(v(r).b())},[s.$slots.title||s.title?(V(),z("div",{key:0,class:U(v(r).e("head"))},[ce(s.$slots,"title",{},()=>[Ct(Te(s.title),1)])],2)):ee("v-if",!0),H("div",{class:U(v(r).e("content"))},[s.$slots.prefix||s.prefix?(V(),z("div",{key:0,class:U(v(r).e("prefix"))},[ce(s.$slots,"prefix",{},()=>[H("span",null,Te(s.prefix),1)])],2)):ee("v-if",!0),H("span",{class:U(v(r).e("number")),style:Pe(s.valueStyle)},Te(v(a)),7),s.$slots.suffix||s.suffix?(V(),z("div",{key:1,class:U(v(r).e("suffix"))},[ce(s.$slots,"suffix",{},()=>[H("span",null,Te(s.suffix),1)])],2)):ee("v-if",!0)],2)],2))}});var qCe=Ve(YCe,[["__file","statistic.vue"]]);const TB=lt(qCe),XCe=Re({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:Q([Number,Object]),default:0},valueStyle:{type:Q([String,Object,Array])}}),ZCe={finish:()=>!0,[pn]:t=>Xe(t)},JCe=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],VE=t=>Xe(t)?new Date(t).getTime():t.valueOf(),DE=(t,e)=>{let n=t;const r=/\[([^\]]*)]/g;return JCe.reduce((s,[o,i])=>{const l=new RegExp(`${o}+(?![^\\[\\]]*\\])`,"g");if(l.test(s)){const c=Math.floor(n/i);return n-=c*i,s.replace(l,u=>String(c).padStart(u.length,"0"))}return s},e).replace(r,"$1")},QCe=q({name:"ElCountdown"}),eSe=q({...QCe,props:XCe,emits:ZCe,setup(t,{expose:e,emit:n}){const r=t;let a;const s=P(VE(r.value)-Date.now()),o=R(()=>DE(s.value,r.format)),i=u=>DE(u,r.format),l=()=>{a&&(Bv(a),a=void 0)},c=()=>{const u=VE(r.value),f=()=>{let d=u-Date.now();n("change",d),d<=0?(d=0,l(),n("finish")):a=qc(f),s.value=d};a=qc(f)};return pe(()=>[r.value,r.format],()=>{l(),c()},{immediate:!0}),ln(()=>{l()}),e({displayValue:o}),(u,f)=>(V(),ae(v(TB),{value:s.value,title:u.title,prefix:u.prefix,suffix:u.suffix,"value-style":u.valueStyle,formatter:i},lo({_:2},[gt(u.$slots,(d,p)=>({name:p,fn:Z(()=>[ce(u.$slots,p)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var tSe=Ve(eSe,[["__file","countdown.vue"]]);const nSe=lt(tSe),rSe=Re({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),aSe={[pn]:(t,e)=>[t,e].every(Xe)},sSe=q({name:"ElSteps"}),oSe=q({...sSe,props:rSe,emits:aSe,setup(t,{emit:e}){const n=t,r=Ce("steps"),{children:a,addChild:s,removeChild:o}=KS(ot(),"ElStep");return pe(a,()=>{a.value.forEach((i,l)=>{i.setIndex(l)})}),bt("ElSteps",{props:n,steps:a,addStep:s,removeStep:o}),pe(()=>n.active,(i,l)=>{e(pn,i,l)}),(i,l)=>(V(),z("div",{class:U([v(r).b(),v(r).m(i.simple?"simple":i.direction)])},[ce(i.$slots,"default")],2))}});var iSe=Ve(oSe,[["__file","steps.vue"]]);const lSe=Re({title:{type:String,default:""},icon:{type:Zt},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),cSe=q({name:"ElStep"}),uSe=q({...cSe,props:lSe,setup(t){const e=t,n=Ce("step"),r=P(-1),a=P({}),s=P(""),o=We("ElSteps"),i=ot();at(()=>{pe([()=>o.props.active,()=>o.props.processStatus,()=>o.props.finishStatus],([w])=>{S(w)},{immediate:!0})}),ln(()=>{o.removeStep(T.uid)});const l=R(()=>e.status||s.value),c=R(()=>{const w=o.steps.value[r.value-1];return w?w.currentStatus:"wait"}),u=R(()=>o.props.alignCenter),f=R(()=>o.props.direction==="vertical"),d=R(()=>o.props.simple),p=R(()=>o.steps.value.length),h=R(()=>{var w;return((w=o.steps.value[p.value-1])==null?void 0:w.uid)===(i==null?void 0:i.uid)}),g=R(()=>d.value?"":o.props.space),y=R(()=>[n.b(),n.is(d.value?"simple":o.props.direction),n.is("flex",h.value&&!g.value&&!u.value),n.is("center",u.value&&!f.value&&!d.value)]),m=R(()=>{const w={flexBasis:Xe(g.value)?`${g.value}px`:g.value?g.value:`${100/(p.value-(u.value?0:1))}%`};return f.value||h.value&&(w.maxWidth=`${100/p.value}%`),w}),b=w=>{r.value=w},C=w=>{const x=w==="wait",E={transitionDelay:`${x?"-":""}${150*r.value}ms`},O=w===o.props.processStatus||x?0:100;E.borderWidth=O&&!d.value?"1px":0,E[o.props.direction==="vertical"?"height":"width"]=`${O}%`,a.value=E},S=w=>{w>r.value?s.value=o.props.finishStatus:w===r.value&&c.value!=="error"?s.value=o.props.processStatus:s.value="wait";const x=o.steps.value[r.value-1];x&&x.calcProgress(s.value)},T=Dt({uid:i.uid,currentStatus:l,setIndex:b,calcProgress:C});return o.addStep(T),(w,x)=>(V(),z("div",{style:Pe(v(m)),class:U(v(y))},[ee(" icon & line "),H("div",{class:U([v(n).e("head"),v(n).is(v(l))])},[v(d)?ee("v-if",!0):(V(),z("div",{key:0,class:U(v(n).e("line"))},[H("i",{class:U(v(n).e("line-inner")),style:Pe(a.value)},null,6)],2)),H("div",{class:U([v(n).e("icon"),v(n).is(w.icon||w.$slots.icon?"icon":"text")])},[ce(w.$slots,"icon",{},()=>[w.icon?(V(),ae(v(Ge),{key:0,class:U(v(n).e("icon-inner"))},{default:Z(()=>[(V(),ae(dt(w.icon)))]),_:1},8,["class"])):v(l)==="success"?(V(),ae(v(Ge),{key:1,class:U([v(n).e("icon-inner"),v(n).is("status")])},{default:Z(()=>[j(v(Cd))]),_:1},8,["class"])):v(l)==="error"?(V(),ae(v(Ge),{key:2,class:U([v(n).e("icon-inner"),v(n).is("status")])},{default:Z(()=>[j(v(as))]),_:1},8,["class"])):v(d)?ee("v-if",!0):(V(),z("div",{key:3,class:U(v(n).e("icon-inner"))},Te(r.value+1),3))])],2)],2),ee(" title & description "),H("div",{class:U(v(n).e("main"))},[H("div",{class:U([v(n).e("title"),v(n).is(v(l))])},[ce(w.$slots,"title",{},()=>[Ct(Te(w.title),1)])],2),v(d)?(V(),z("div",{key:0,class:U(v(n).e("arrow"))},null,2)):(V(),z("div",{key:1,class:U([v(n).e("description"),v(n).is(v(l))])},[ce(w.$slots,"description",{},()=>[Ct(Te(w.description),1)])],2))],2)],6))}});var xB=Ve(uSe,[["__file","item.vue"]]);const fSe=lt(iSe,{Step:xB}),dSe=bn(xB),pSe=Re({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:xL},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:Zt},activeActionIcon:{type:Zt},activeIcon:{type:Zt},inactiveIcon:{type:Zt},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:Q(Function)},id:String,tabindex:{type:[String,Number]},value:{type:[Boolean,String,Number],default:!1},label:{type:String,default:void 0}}),gSe={[ut]:t=>Wn(t)||tt(t)||Xe(t),[pn]:t=>Wn(t)||tt(t)||Xe(t),[Ir]:t=>Wn(t)||tt(t)||Xe(t)},hSe=["onClick"],vSe=["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"],ySe=["aria-hidden"],mSe=["aria-hidden"],CSe=["aria-hidden"],s1="ElSwitch",SSe=q({name:s1}),bSe=q({...SSe,props:pSe,emits:gSe,setup(t,{expose:e,emit:n}){const r=t,a=ot(),{formItem:s}=Hr(),o=qn(),i=Ce("switch");(E=>{E.forEach(O=>{uo({from:O[0],replacement:O[1],scope:s1,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},R(()=>{var k;return!!((k=a.vnode.props)!=null&&k[O[2]])}))})})([['"value"','"model-value" or "v-model"',"value"],['"active-color"',"CSS var `--el-switch-on-color`","activeColor"],['"inactive-color"',"CSS var `--el-switch-off-color`","inactiveColor"],['"border-color"',"CSS var `--el-switch-border-color`","borderColor"]]);const{inputId:c}=Bs(r,{formItemContext:s}),u=na(R(()=>r.loading)),f=P(r.modelValue!==!1),d=P(),p=P(),h=R(()=>[i.b(),i.m(o.value),i.is("disabled",u.value),i.is("checked",C.value)]),g=R(()=>[i.e("label"),i.em("label","left"),i.is("active",!C.value)]),y=R(()=>[i.e("label"),i.em("label","right"),i.is("active",C.value)]),m=R(()=>({width:Bn(r.width)}));pe(()=>r.modelValue,()=>{f.value=!0}),pe(()=>r.value,()=>{f.value=!1});const b=R(()=>f.value?r.modelValue:r.value),C=R(()=>b.value===r.activeValue);[r.activeValue,r.inactiveValue].includes(b.value)||(n(ut,r.inactiveValue),n(pn,r.inactiveValue),n(Ir,r.inactiveValue)),pe(C,E=>{var O;d.value.checked=E,r.validateEvent&&((O=s==null?void 0:s.validate)==null||O.call(s,"change").catch(k=>void 0))});const S=()=>{const E=C.value?r.inactiveValue:r.activeValue;n(ut,E),n(pn,E),n(Ir,E),Ye(()=>{d.value.checked=C.value})},T=()=>{if(u.value)return;const{beforeChange:E}=r;if(!E){S();return}const O=E();[Tf(O),Wn(O)].includes(!0)||Yn(s1,"beforeChange must return type `Promise<boolean>` or `boolean`"),Tf(O)?O.then(M=>{M&&S()}).catch(M=>{}):O&&S()},w=R(()=>i.cssVarBlock({...r.activeColor?{"on-color":r.activeColor}:null,...r.inactiveColor?{"off-color":r.inactiveColor}:null,...r.borderColor?{"border-color":r.borderColor}:null})),x=()=>{var E,O;(O=(E=d.value)==null?void 0:E.focus)==null||O.call(E)};return at(()=>{d.value.checked=C.value}),e({focus:x,checked:C}),(E,O)=>(V(),z("div",{class:U(v(h)),style:Pe(v(w)),onClick:Ze(T,["prevent"])},[H("input",{id:v(c),ref_key:"input",ref:d,class:U(v(i).e("input")),type:"checkbox",role:"switch","aria-checked":v(C),"aria-disabled":v(u),"aria-label":E.label,name:E.name,"true-value":E.activeValue,"false-value":E.inactiveValue,disabled:v(u),tabindex:E.tabindex,onChange:S,onKeydown:Xt(T,["enter"])},null,42,vSe),!E.inlinePrompt&&(E.inactiveIcon||E.inactiveText)?(V(),z("span",{key:0,class:U(v(g))},[E.inactiveIcon?(V(),ae(v(Ge),{key:0},{default:Z(()=>[(V(),ae(dt(E.inactiveIcon)))]),_:1})):ee("v-if",!0),!E.inactiveIcon&&E.inactiveText?(V(),z("span",{key:1,"aria-hidden":v(C)},Te(E.inactiveText),9,ySe)):ee("v-if",!0)],2)):ee("v-if",!0),H("span",{ref_key:"core",ref:p,class:U(v(i).e("core")),style:Pe(v(m))},[E.inlinePrompt?(V(),z("div",{key:0,class:U(v(i).e("inner"))},[E.activeIcon||E.inactiveIcon?(V(),ae(v(Ge),{key:0,class:U(v(i).is("icon"))},{default:Z(()=>[(V(),ae(dt(v(C)?E.activeIcon:E.inactiveIcon)))]),_:1},8,["class"])):E.activeText||E.inactiveText?(V(),z("span",{key:1,class:U(v(i).is("text")),"aria-hidden":!v(C)},Te(v(C)?E.activeText:E.inactiveText),11,mSe)):ee("v-if",!0)],2)):ee("v-if",!0),H("div",{class:U(v(i).e("action"))},[E.loading?(V(),ae(v(Ge),{key:0,class:U(v(i).is("loading"))},{default:Z(()=>[j(v(yi))]),_:1},8,["class"])):v(C)?ce(E.$slots,"active-action",{key:1},()=>[E.activeActionIcon?(V(),ae(v(Ge),{key:0},{default:Z(()=>[(V(),ae(dt(E.activeActionIcon)))]),_:1})):ee("v-if",!0)]):v(C)?ee("v-if",!0):ce(E.$slots,"inactive-action",{key:2},()=>[E.inactiveActionIcon?(V(),ae(v(Ge),{key:0},{default:Z(()=>[(V(),ae(dt(E.inactiveActionIcon)))]),_:1})):ee("v-if",!0)])],2)],6),!E.inlinePrompt&&(E.activeIcon||E.activeText)?(V(),z("span",{key:1,class:U(v(y))},[E.activeIcon?(V(),ae(v(Ge),{key:0},{default:Z(()=>[(V(),ae(dt(E.activeIcon)))]),_:1})):ee("v-if",!0),!E.activeIcon&&E.activeText?(V(),z("span",{key:1,"aria-hidden":!v(C)},Te(E.activeText),9,CSe)):ee("v-if",!0)],2)):ee("v-if",!0)],14,hSe))}});var wSe=Ve(bSe,[["__file","switch.vue"]]);const TSe=lt(wSe),iy=function(t){var e;return(e=t.target)==null?void 0:e.closest("td")},xSe=function(t,e,n,r,a){if(!e&&!r&&(!a||Array.isArray(a)&&!a.length))return t;typeof n=="string"?n=n==="descending"?-1:1:n=n&&n<0?-1:1;const s=r?null:function(i,l){return a?(Array.isArray(a)||(a=[a]),a.map(c=>typeof c=="string"?Vn(i,c):c(i,l,t))):(e!=="$key"&&pt(i)&&"$value"in i&&(i=i.$value),[pt(i)?Vn(i,e):i])},o=function(i,l){if(r)return r(i.value,l.value);for(let c=0,u=i.key.length;c<u;c++){if(i.key[c]<l.key[c])return-1;if(i.key[c]>l.key[c])return 1}return 0};return t.map((i,l)=>({value:i,index:l,key:s?s(i,l):null})).sort((i,l)=>{let c=o(i,l);return c||(c=i.index-l.index),c*+n}).map(i=>i.value)},EB=function(t,e){let n=null;return t.columns.forEach(r=>{r.id===e&&(n=r)}),n},ESe=function(t,e){let n=null;for(let r=0;r<t.columns.length;r++){const a=t.columns[r];if(a.columnKey===e){n=a;break}}return n||Yn("ElTable",`No column matching with column-key: ${e}`),n},LE=function(t,e,n){const r=(e.className||"").match(new RegExp(`${n}-table_[^\\s]+`,"gm"));return r?EB(t,r[0]):null},Cr=(t,e)=>{if(!t)throw new Error("Row is required when get row identity");if(typeof e=="string"){if(!e.includes("."))return`${t[e]}`;const n=e.split(".");let r=t;for(const a of n)r=r[a];return`${r}`}else if(typeof e=="function")return e.call(null,t)},tl=function(t,e){const n={};return(t||[]).forEach((r,a)=>{n[Cr(r,e)]={row:r,index:a}}),n};function kSe(t,e){const n={};let r;for(r in t)n[r]=t[r];for(r in e)if(Et(e,r)){const a=e[r];typeof a<"u"&&(n[r]=a)}return n}function vb(t){return t===""||t!==void 0&&(t=Number.parseInt(t,10),Number.isNaN(t)&&(t="")),t}function kB(t){return t===""||t!==void 0&&(t=vb(t),Number.isNaN(t)&&(t=80)),t}function OSe(t){return typeof t=="number"?t:typeof t=="string"?/^\d+(?:px)?$/.test(t)?Number.parseInt(t,10):t:null}function MSe(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function gf(t,e,n){let r=!1;const a=t.indexOf(e),s=a!==-1,o=i=>{i==="add"?t.push(e):t.splice(a,1),r=!0,Be(e.children)&&e.children.forEach(l=>{gf(t,l,n??!s)})};return Wn(n)?n&&!s?o("add"):!n&&s&&o("remove"):o(s?"remove":"add"),r}function RSe(t,e,n="children",r="hasChildren"){const a=o=>!(Array.isArray(o)&&o.length);function s(o,i,l){e(o,i,l),i.forEach(c=>{if(c[r]){e(c,null,l+1);return}const u=c[n];a(u)||s(c,u,l+1)})}t.forEach(o=>{if(o[r]){e(o,null,0);return}const i=o[n];a(i)||s(o,i,0)})}let ha=null;function _Se(t,e,n,r){if((ha==null?void 0:ha.trigger)===n)return;ha==null||ha();const a=r==null?void 0:r.refs.tableWrapper,s=a==null?void 0:a.dataset.prefix,o={strategy:"fixed",...t.popperOptions},i=j(Dr,{content:e,virtualTriggering:!0,virtualRef:n,appendTo:a,placement:"top",transition:"none",offset:0,hideAfter:0,...t,popperOptions:o,onHide:()=>{ha==null||ha()}});i.appContext={...r.appContext,...r};const l=document.createElement("div");li(i,l),i.component.exposed.onOpen();const c=a==null?void 0:a.querySelector(`.${s}-scrollbar__wrap`);ha=()=>{li(null,l),c==null||c.removeEventListener("scroll",ha),ha=null},ha.trigger=n,c==null||c.addEventListener("scroll",ha)}function OB(t){return t.children?Jte(t.children,OB):[t]}function NE(t,e){return t+e.colSpan}const MB=(t,e,n,r)=>{let a=0,s=t;const o=n.states.columns.value;if(r){const l=OB(r[t]);a=o.slice(0,o.indexOf(l[0])).reduce(NE,0),s=a+l.reduce(NE,0)-1}else a=t;let i;switch(e){case"left":s<n.states.fixedLeafColumnsLength.value&&(i="left");break;case"right":a>=o.length-n.states.rightFixedLeafColumnsLength.value&&(i="right");break;default:s<n.states.fixedLeafColumnsLength.value?i="left":a>=o.length-n.states.rightFixedLeafColumnsLength.value&&(i="right")}return i?{direction:i,start:a,after:s}:{}},yb=(t,e,n,r,a,s=0)=>{const o=[],{direction:i,start:l,after:c}=MB(e,n,r,a);if(i){const u=i==="left";o.push(`${t}-fixed-column--${i}`),u&&c+s===r.states.fixedLeafColumnsLength.value-1?o.push("is-last-column"):!u&&l-s===r.states.columns.value.length-r.states.rightFixedLeafColumnsLength.value&&o.push("is-first-column")}return o};function BE(t,e){return t+(e.realWidth===null||Number.isNaN(e.realWidth)?Number(e.width):e.realWidth)}const mb=(t,e,n,r)=>{const{direction:a,start:s=0,after:o=0}=MB(t,e,n,r);if(!a)return;const i={},l=a==="left",c=n.states.columns.value;return l?i.left=c.slice(0,s).reduce(BE,0):i.right=c.slice(o+1).reverse().reduce(BE,0),i},au=(t,e)=>{t&&(Number.isNaN(t[e])||(t[e]=`${t[e]}px`))};function VSe(t){const e=ot(),n=P(!1),r=P([]);return{updateExpandRows:()=>{const l=t.data.value||[],c=t.rowKey.value;if(n.value)r.value=l.slice();else if(c){const u=tl(r.value,c);r.value=l.reduce((f,d)=>{const p=Cr(d,c);return u[p]&&f.push(d),f},[])}else r.value=[]},toggleRowExpansion:(l,c)=>{gf(r.value,l,c)&&e.emit("expand-change",l,r.value.slice())},setExpandRowKeys:l=>{e.store.assertRowKey();const c=t.data.value||[],u=t.rowKey.value,f=tl(c,u);r.value=l.reduce((d,p)=>{const h=f[p];return h&&d.push(h.row),d},[])},isRowExpanded:l=>{const c=t.rowKey.value;return c?!!tl(r.value,c)[Cr(l,c)]:r.value.includes(l)},states:{expandRows:r,defaultExpandAll:n}}}function DSe(t){const e=ot(),n=P(null),r=P(null),a=c=>{e.store.assertRowKey(),n.value=c,o(c)},s=()=>{n.value=null},o=c=>{const{data:u,rowKey:f}=t;let d=null;f.value&&(d=(v(u)||[]).find(p=>Cr(p,f.value)===c)),r.value=d,e.emit("current-change",r.value,null)};return{setCurrentRowKey:a,restoreCurrentRowKey:s,setCurrentRowByKey:o,updateCurrentRow:c=>{const u=r.value;if(c&&c!==u){r.value=c,e.emit("current-change",r.value,u);return}!c&&u&&(r.value=null,e.emit("current-change",null,u))},updateCurrentRowData:()=>{const c=t.rowKey.value,u=t.data.value||[],f=r.value;if(!u.includes(f)&&f){if(c){const d=Cr(f,c);o(d)}else r.value=null;r.value===null&&e.emit("current-change",null,f)}else n.value&&(o(n.value),s())},states:{_currentRowKey:n,currentRow:r}}}function LSe(t){const e=P([]),n=P({}),r=P(16),a=P(!1),s=P({}),o=P("hasChildren"),i=P("children"),l=ot(),c=R(()=>{if(!t.rowKey.value)return{};const m=t.data.value||[];return f(m)}),u=R(()=>{const m=t.rowKey.value,b=Object.keys(s.value),C={};return b.length&&b.forEach(S=>{if(s.value[S].length){const T={children:[]};s.value[S].forEach(w=>{const x=Cr(w,m);T.children.push(x),w[o.value]&&!C[x]&&(C[x]={children:[]})}),C[S]=T}}),C}),f=m=>{const b=t.rowKey.value,C={};return RSe(m,(S,T,w)=>{const x=Cr(S,b);Array.isArray(T)?C[x]={children:T.map(E=>Cr(E,b)),level:w}:a.value&&(C[x]={children:[],lazy:!0,level:w})},i.value,o.value),C},d=(m=!1,b=(C=>(C=l.store)==null?void 0:C.states.defaultExpandAll.value)())=>{var C;const S=c.value,T=u.value,w=Object.keys(S),x={};if(w.length){const E=v(n),O=[],k=(D,I)=>{if(m)return e.value?b||e.value.includes(I):!!(b||D!=null&&D.expanded);{const B=b||e.value&&e.value.includes(I);return!!(D!=null&&D.expanded||B)}};w.forEach(D=>{const I=E[D],B={...S[D]};if(B.expanded=k(I,D),B.lazy){const{loaded:F=!1,loading:$=!1}=I||{};B.loaded=!!F,B.loading=!!$,O.push(D)}x[D]=B});const M=Object.keys(T);a.value&&M.length&&O.length&&M.forEach(D=>{const I=E[D],B=T[D].children;if(O.includes(D)){if(x[D].children.length!==0)throw new Error("[ElTable]children must be an empty array.");x[D].children=B}else{const{loaded:F=!1,loading:$=!1}=I||{};x[D]={lazy:!0,loaded:!!F,loading:!!$,expanded:k(I,D),children:B,level:""}}})}n.value=x,(C=l.store)==null||C.updateTableScrollY()};pe(()=>e.value,()=>{d(!0)}),pe(()=>c.value,()=>{d()}),pe(()=>u.value,()=>{d()});const p=m=>{e.value=m,d()},h=(m,b)=>{l.store.assertRowKey();const C=t.rowKey.value,S=Cr(m,C),T=S&&n.value[S];if(S&&T&&"expanded"in T){const w=T.expanded;b=typeof b>"u"?!T.expanded:b,n.value[S].expanded=b,w!==b&&l.emit("expand-change",m,b),l.store.updateTableScrollY()}},g=m=>{l.store.assertRowKey();const b=t.rowKey.value,C=Cr(m,b),S=n.value[C];a.value&&S&&"loaded"in S&&!S.loaded?y(m,C,S):h(m,void 0)},y=(m,b,C)=>{const{load:S}=l.props;S&&!n.value[b].loaded&&(n.value[b].loading=!0,S(m,C,T=>{if(!Array.isArray(T))throw new TypeError("[ElTable] data must be an array");n.value[b].loading=!1,n.value[b].loaded=!0,n.value[b].expanded=!0,T.length&&(s.value[b]=T),l.emit("expand-change",m,!0)}))};return{loadData:y,loadOrToggle:g,toggleTreeExpansion:h,updateTreeExpandKeys:p,updateTreeData:d,normalize:f,states:{expandRowKeys:e,treeData:n,indent:r,lazy:a,lazyTreeNodeMap:s,lazyColumnIdentifier:o,childrenColumnName:i}}}const NSe=(t,e)=>{const n=e.sortingColumn;return!n||typeof n.sortable=="string"?t:xSe(t,e.sortProp,e.sortOrder,n.sortMethod,n.sortBy)},xg=t=>{const e=[];return t.forEach(n=>{n.children&&n.children.length>0?e.push.apply(e,xg(n.children)):e.push(n)}),e};function BSe(){var t;const e=ot(),{size:n}=hr((t=e.proxy)==null?void 0:t.$props),r=P(null),a=P([]),s=P([]),o=P(!1),i=P([]),l=P([]),c=P([]),u=P([]),f=P([]),d=P([]),p=P([]),h=P([]),g=[],y=P(0),m=P(0),b=P(0),C=P(!1),S=P([]),T=P(!1),w=P(!1),x=P(null),E=P({}),O=P(null),k=P(null),M=P(null),D=P(null),I=P(null);pe(a,()=>e.state&&N(!1),{deep:!0});const B=()=>{if(!r.value)throw new Error("[ElTable] prop row-key is required")},F=Ke=>{var fe;(fe=Ke.children)==null||fe.forEach(le=>{le.fixed=Ke.fixed,F(le)})},$=()=>{i.value.forEach(we=>{F(we)}),u.value=i.value.filter(we=>we.fixed===!0||we.fixed==="left"),f.value=i.value.filter(we=>we.fixed==="right"),u.value.length>0&&i.value[0]&&i.value[0].type==="selection"&&!i.value[0].fixed&&(i.value[0].fixed=!0,u.value.unshift(i.value[0]));const Ke=i.value.filter(we=>!we.fixed);l.value=[].concat(u.value).concat(Ke).concat(f.value);const fe=xg(Ke),le=xg(u.value),oe=xg(f.value);y.value=fe.length,m.value=le.length,b.value=oe.length,c.value=[].concat(le).concat(fe).concat(oe),o.value=u.value.length>0||f.value.length>0},N=(Ke,fe=!1)=>{Ke&&$(),fe?e.state.doLayout():e.state.debouncedUpdateLayout()},W=Ke=>S.value.includes(Ke),_=()=>{C.value=!1,S.value.length&&(S.value=[],e.emit("selection-change",[]))},L=()=>{let Ke;if(r.value){Ke=[];const fe=tl(S.value,r.value),le=tl(a.value,r.value);for(const oe in fe)Et(fe,oe)&&!le[oe]&&Ke.push(fe[oe].row)}else Ke=S.value.filter(fe=>!a.value.includes(fe));if(Ke.length){const fe=S.value.filter(le=>!Ke.includes(le));S.value=fe,e.emit("selection-change",fe.slice())}},G=()=>(S.value||[]).slice(),K=(Ke,fe=void 0,le=!0)=>{if(gf(S.value,Ke,fe)){const we=(S.value||[]).slice();le&&e.emit("select",we,Ke),e.emit("selection-change",we)}},Y=()=>{var Ke,fe;const le=w.value?!C.value:!(C.value||S.value.length);C.value=le;let oe=!1,we=0;const J=(fe=(Ke=e==null?void 0:e.store)==null?void 0:Ke.states)==null?void 0:fe.rowKey.value;a.value.forEach(($e,nt)=>{const yt=nt+we;x.value?x.value.call(null,$e,yt)&&gf(S.value,$e,le)&&(oe=!0):gf(S.value,$e,le)&&(oe=!0),we+=se(Cr($e,J))}),oe&&e.emit("selection-change",S.value?S.value.slice():[]),e.emit("select-all",S.value)},te=()=>{const Ke=tl(S.value,r.value);a.value.forEach(fe=>{const le=Cr(fe,r.value),oe=Ke[le];oe&&(S.value[oe.index]=fe)})},ve=()=>{var Ke,fe,le;if(((Ke=a.value)==null?void 0:Ke.length)===0){C.value=!1;return}let oe;r.value&&(oe=tl(S.value,r.value));const we=function(yt){return oe?!!oe[Cr(yt,r.value)]:S.value.includes(yt)};let J=!0,$e=0,nt=0;for(let yt=0,On=(a.value||[]).length;yt<On;yt++){const Ln=(le=(fe=e==null?void 0:e.store)==null?void 0:fe.states)==null?void 0:le.rowKey.value,ls=yt+nt,vr=a.value[yt],Kt=x.value&&x.value.call(null,vr,ls);if(we(vr))$e++;else if(!x.value||Kt){J=!1;break}nt+=se(Cr(vr,Ln))}$e===0&&(J=!1),C.value=J},se=Ke=>{var fe;if(!e||!e.store)return 0;const{treeData:le}=e.store.states;let oe=0;const we=(fe=le.value[Ke])==null?void 0:fe.children;return we&&(oe+=we.length,we.forEach(J=>{oe+=se(J)})),oe},ie=(Ke,fe)=>{Array.isArray(Ke)||(Ke=[Ke]);const le={};return Ke.forEach(oe=>{E.value[oe.id]=fe,le[oe.columnKey||oe.id]=fe}),le},re=(Ke,fe,le)=>{k.value&&k.value!==Ke&&(k.value.order=null),k.value=Ke,M.value=fe,D.value=le},be=()=>{let Ke=v(s);Object.keys(E.value).forEach(fe=>{const le=E.value[fe];if(!le||le.length===0)return;const oe=EB({columns:c.value},fe);oe&&oe.filterMethod&&(Ke=Ke.filter(we=>le.some(J=>oe.filterMethod.call(null,J,we,oe))))}),O.value=Ke},ge=()=>{a.value=NSe(O.value,{sortingColumn:k.value,sortProp:M.value,sortOrder:D.value})},Se=(Ke=void 0)=>{Ke&&Ke.filter||be(),ge()},De=Ke=>{const{tableHeaderRef:fe}=e.refs;if(!fe)return;const le=Object.assign({},fe.filterPanels),oe=Object.keys(le);if(oe.length)if(typeof Ke=="string"&&(Ke=[Ke]),Array.isArray(Ke)){const we=Ke.map(J=>ESe({columns:c.value},J));oe.forEach(J=>{const $e=we.find(nt=>nt.id===J);$e&&($e.filteredValue=[])}),e.store.commit("filterChange",{column:we,values:[],silent:!0,multi:!0})}else oe.forEach(we=>{const J=c.value.find($e=>$e.id===we);J&&(J.filteredValue=[])}),E.value={},e.store.commit("filterChange",{column:{},values:[],silent:!0})},X=()=>{k.value&&(re(null,null,null),e.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:ne,toggleRowExpansion:me,updateExpandRows:Ee,states:de,isRowExpanded:xe}=VSe({data:a,rowKey:r}),{updateTreeExpandKeys:ke,toggleTreeExpansion:ye,updateTreeData:_e,loadOrToggle:Oe,states:Fe}=LSe({data:a,rowKey:r}),{updateCurrentRowData:ze,updateCurrentRow:he,setCurrentRowKey:Ae,states:qe}=DSe({data:a,rowKey:r});return{assertRowKey:B,updateColumns:$,scheduleLayout:N,isSelected:W,clearSelection:_,cleanSelection:L,getSelectionRows:G,toggleRowSelection:K,_toggleAllSelection:Y,toggleAllSelection:null,updateSelectionByRowKey:te,updateAllSelected:ve,updateFilters:ie,updateCurrentRow:he,updateSort:re,execFilter:be,execSort:ge,execQuery:Se,clearFilter:De,clearSort:X,toggleRowExpansion:me,setExpandRowKeysAdapter:Ke=>{ne(Ke),ke(Ke)},setCurrentRowKey:Ae,toggleRowExpansionAdapter:(Ke,fe)=>{c.value.some(({type:oe})=>oe==="expand")?me(Ke,fe):ye(Ke,fe)},isRowExpanded:xe,updateExpandRows:Ee,updateCurrentRowData:ze,loadOrToggle:Oe,updateTreeData:_e,states:{tableSize:n,rowKey:r,data:a,_data:s,isComplex:o,_columns:i,originColumns:l,columns:c,fixedColumns:u,rightFixedColumns:f,leafColumns:d,fixedLeafColumns:p,rightFixedLeafColumns:h,updateOrderFns:g,leafColumnsLength:y,fixedLeafColumnsLength:m,rightFixedLeafColumnsLength:b,isAllSelected:C,selection:S,reserveSelection:T,selectOnIndeterminate:w,selectable:x,filters:E,filteredData:O,sortingColumn:k,sortProp:M,sortOrder:D,hoverRow:I,...de,...Fe,...qe}}}function o1(t,e){return t.map(n=>{var r;return n.id===e.id?e:((r=n.children)!=null&&r.length&&(n.children=o1(n.children,e)),n)})}function i1(t){t.forEach(e=>{var n,r;e.no=(n=e.getColumnIndex)==null?void 0:n.call(e),(r=e.children)!=null&&r.length&&i1(e.children)}),t.sort((e,n)=>e.no-n.no)}function FSe(){const t=ot(),e=BSe();return{ns:Ce("table"),...e,mutations:{setData(o,i){const l=v(o._data)!==i;o.data.value=i,o._data.value=i,t.store.execQuery(),t.store.updateCurrentRowData(),t.store.updateExpandRows(),t.store.updateTreeData(t.store.states.defaultExpandAll.value),v(o.reserveSelection)?(t.store.assertRowKey(),t.store.updateSelectionByRowKey()):l?t.store.clearSelection():t.store.cleanSelection(),t.store.updateAllSelected(),t.$ready&&t.store.scheduleLayout()},insertColumn(o,i,l,c){const u=v(o._columns);let f=[];l?(l&&!l.children&&(l.children=[]),l.children.push(i),f=o1(u,l)):(u.push(i),f=u),i1(f),o._columns.value=f,o.updateOrderFns.push(c),i.type==="selection"&&(o.selectable.value=i.selectable,o.reserveSelection.value=i.reserveSelection),t.$ready&&(t.store.updateColumns(),t.store.scheduleLayout())},updateColumnOrder(o,i){var l;((l=i.getColumnIndex)==null?void 0:l.call(i))!==i.no&&(i1(o._columns.value),t.$ready&&t.store.updateColumns())},removeColumn(o,i,l,c){const u=v(o._columns)||[];if(l)l.children.splice(l.children.findIndex(d=>d.id===i.id),1),Ye(()=>{var d;((d=l.children)==null?void 0:d.length)===0&&delete l.children}),o._columns.value=o1(u,l);else{const d=u.indexOf(i);d>-1&&(u.splice(d,1),o._columns.value=u)}const f=o.updateOrderFns.indexOf(c);f>-1&&o.updateOrderFns.splice(f,1),t.$ready&&(t.store.updateColumns(),t.store.scheduleLayout())},sort(o,i){const{prop:l,order:c,init:u}=i;if(l){const f=v(o.columns).find(d=>d.property===l);f&&(f.order=c,t.store.updateSort(f,l,c),t.store.commit("changeSortCondition",{init:u}))}},changeSortCondition(o,i){const{sortingColumn:l,sortProp:c,sortOrder:u}=o,f=v(l),d=v(c),p=v(u);p===null&&(o.sortingColumn.value=null,o.sortProp.value=null);const h={filter:!0};t.store.execQuery(h),(!i||!(i.silent||i.init))&&t.emit("sort-change",{column:f,prop:d,order:p}),t.store.updateTableScrollY()},filterChange(o,i){const{column:l,values:c,silent:u}=i,f=t.store.updateFilters(l,c);t.store.execQuery(),u||t.emit("filter-change",f),t.store.updateTableScrollY()},toggleAllSelection(){t.store.toggleAllSelection()},rowSelectedChanged(o,i){t.store.toggleRowSelection(i),t.store.updateAllSelected()},setHoverRow(o,i){o.hoverRow.value=i},setCurrentRow(o,i){t.store.updateCurrentRow(i)}},commit:function(o,...i){const l=t.store.mutations;if(l[o])l[o].apply(t,[t.store.states].concat(i));else throw new Error(`Action not found: ${o}`)},updateTableScrollY:function(){Ye(()=>t.layout.updateScrollY.apply(t.layout))}}}const hf={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"}};function $Se(t,e){if(!t)throw new Error("Table is required.");const n=FSe();return n.toggleAllSelection=ta(n._toggleAllSelection,10),Object.keys(hf).forEach(r=>{RB(_B(e,r),r,n)}),USe(n,e),n}function USe(t,e){Object.keys(hf).forEach(n=>{pe(()=>_B(e,n),r=>{RB(r,n,t)})})}function RB(t,e,n){let r=t,a=hf[e];typeof hf[e]=="object"&&(a=a.key,r=r||hf[e].default),n.states[a].value=r}function _B(t,e){if(e.includes(".")){const n=e.split(".");let r=t;return n.forEach(a=>{r=r[a]}),r}else return t[e]}class ASe{constructor(e){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=P(null),this.scrollX=P(!1),this.scrollY=P(!1),this.bodyWidth=P(null),this.fixedWidth=P(null),this.rightFixedWidth=P(null),this.gutterWidth=0;for(const n in e)Et(e,n)&&(cn(this[n])?this[n].value=e[n]:this[n]=e[n]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const n=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(n!=null&&n.wrapRef)){let r=!0;const a=this.scrollY.value;return r=n.wrapRef.scrollHeight>n.wrapRef.clientHeight,this.scrollY.value=r,a!==r}return!1}setHeight(e,n="height"){if(!Ot)return;const r=this.table.vnode.el;if(e=OSe(e),this.height.value=Number(e),!r&&(e||e===0))return Ye(()=>this.setHeight(e,n));typeof e=="number"?(r.style[n]=`${e}px`,this.updateElsHeight()):typeof e=="string"&&(r.style[n]=e,this.updateElsHeight())}setMaxHeight(e){this.setHeight(e,"max-height")}getFlattenColumns(){const e=[];return this.table.store.states.columns.value.forEach(r=>{r.isColumnGroup?e.push.apply(e,r.columns):e.push(r)}),e}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(e){if(!e)return!0;let n=e;for(;n.tagName!=="DIV";){if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}updateColumnsWidth(){if(!Ot)return;const e=this.fit,n=this.table.vnode.el.clientWidth;let r=0;const a=this.getFlattenColumns(),s=a.filter(l=>typeof l.width!="number");if(a.forEach(l=>{typeof l.width=="number"&&l.realWidth&&(l.realWidth=null)}),s.length>0&&e){if(a.forEach(l=>{r+=Number(l.width||l.minWidth||80)}),r<=n){this.scrollX.value=!1;const l=n-r;if(s.length===1)s[0].realWidth=Number(s[0].minWidth||80)+l;else{const c=s.reduce((d,p)=>d+Number(p.minWidth||80),0),u=l/c;let f=0;s.forEach((d,p)=>{if(p===0)return;const h=Math.floor(Number(d.minWidth||80)*u);f+=h,d.realWidth=Number(d.minWidth||80)+h}),s[0].realWidth=Number(s[0].minWidth||80)+l-f}}else this.scrollX.value=!0,s.forEach(l=>{l.realWidth=Number(l.minWidth)});this.bodyWidth.value=Math.max(r,n),this.table.state.resizeState.value.width=this.bodyWidth.value}else a.forEach(l=>{!l.width&&!l.minWidth?l.realWidth=80:l.realWidth=Number(l.width||l.minWidth),r+=l.realWidth}),this.scrollX.value=r>n,this.bodyWidth.value=r;const o=this.store.states.fixedColumns.value;if(o.length>0){let l=0;o.forEach(c=>{l+=Number(c.realWidth||c.width)}),this.fixedWidth.value=l}const i=this.store.states.rightFixedColumns.value;if(i.length>0){let l=0;i.forEach(c=>{l+=Number(c.realWidth||c.width)}),this.rightFixedWidth.value=l}this.notifyObservers("columns")}addObserver(e){this.observers.push(e)}removeObserver(e){const n=this.observers.indexOf(e);n!==-1&&this.observers.splice(n,1)}notifyObservers(e){this.observers.forEach(r=>{var a,s;switch(e){case"columns":(a=r.state)==null||a.onColumnsChange(this);break;case"scrollable":(s=r.state)==null||s.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${e}.`)}})}}const{CheckboxGroup:WSe}=Na,ISe=q({name:"ElTableFilterPanel",components:{ElCheckbox:Na,ElCheckboxGroup:WSe,ElScrollbar:To,ElTooltip:Dr,ElIcon:Ge,ArrowDown:bo,ArrowUp:CS},directives:{ClickOutside:go},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(t){const e=ot(),{t:n}=Mt(),r=Ce("table-filter"),a=e==null?void 0:e.parent;a.filterPanels.value[t.column.id]||(a.filterPanels.value[t.column.id]=e);const s=P(!1),o=P(null),i=R(()=>t.column&&t.column.filters),l=R(()=>t.column.filterClassName?`${r.b()} ${t.column.filterClassName}`:r.b()),c=R({get:()=>{var T;return(((T=t.column)==null?void 0:T.filteredValue)||[])[0]},set:T=>{u.value&&(typeof T<"u"&&T!==null?u.value.splice(0,1,T):u.value.splice(0,1))}}),u=R({get(){return t.column?t.column.filteredValue||[]:[]},set(T){t.column&&t.upDataColumn("filteredValue",T)}}),f=R(()=>t.column?t.column.filterMultiple:!0),d=T=>T.value===c.value,p=()=>{s.value=!1},h=T=>{T.stopPropagation(),s.value=!s.value},g=()=>{s.value=!1},y=()=>{C(u.value),p()},m=()=>{u.value=[],C(u.value),p()},b=T=>{c.value=T,C(typeof T<"u"&&T!==null?u.value:[]),p()},C=T=>{t.store.commit("filterChange",{column:t.column,values:T}),t.store.updateAllSelected()};pe(s,T=>{t.column&&t.upDataColumn("filterOpened",T)},{immediate:!0});const S=R(()=>{var T,w;return(w=(T=o.value)==null?void 0:T.popperRef)==null?void 0:w.contentRef});return{tooltipVisible:s,multiple:f,filterClassName:l,filteredValue:u,filterValue:c,filters:i,handleConfirm:y,handleReset:m,handleSelect:b,isActive:d,t:n,ns:r,showFilterPanel:h,hideFilterPanel:g,popperPaneRef:S,tooltip:o}}}),PSe={key:0},GSe=["disabled"],zSe=["label","onClick"];function HSe(t,e,n,r,a,s){const o=et("el-checkbox"),i=et("el-checkbox-group"),l=et("el-scrollbar"),c=et("arrow-up"),u=et("arrow-down"),f=et("el-icon"),d=et("el-tooltip"),p=mv("click-outside");return V(),ae(d,{ref:"tooltip",visible:t.tooltipVisible,offset:0,placement:t.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":t.filterClassName,persistent:""},{content:Z(()=>[t.multiple?(V(),z("div",PSe,[H("div",{class:U(t.ns.e("content"))},[j(l,{"wrap-class":t.ns.e("wrap")},{default:Z(()=>[j(i,{modelValue:t.filteredValue,"onUpdate:modelValue":e[0]||(e[0]=h=>t.filteredValue=h),class:U(t.ns.e("checkbox-group"))},{default:Z(()=>[(V(!0),z(Ue,null,gt(t.filters,h=>(V(),ae(o,{key:h.value,label:h.value},{default:Z(()=>[Ct(Te(h.text),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","class"])]),_:1},8,["wrap-class"])],2),H("div",{class:U(t.ns.e("bottom"))},[H("button",{class:U({[t.ns.is("disabled")]:t.filteredValue.length===0}),disabled:t.filteredValue.length===0,type:"button",onClick:e[1]||(e[1]=(...h)=>t.handleConfirm&&t.handleConfirm(...h))},Te(t.t("el.table.confirmFilter")),11,GSe),H("button",{type:"button",onClick:e[2]||(e[2]=(...h)=>t.handleReset&&t.handleReset(...h))},Te(t.t("el.table.resetFilter")),1)],2)])):(V(),z("ul",{key:1,class:U(t.ns.e("list"))},[H("li",{class:U([t.ns.e("list-item"),{[t.ns.is("active")]:t.filterValue===void 0||t.filterValue===null}]),onClick:e[3]||(e[3]=h=>t.handleSelect(null))},Te(t.t("el.table.clearFilter")),3),(V(!0),z(Ue,null,gt(t.filters,h=>(V(),z("li",{key:h.value,class:U([t.ns.e("list-item"),t.ns.is("active",t.isActive(h))]),label:h.value,onClick:g=>t.handleSelect(h.value)},Te(h.text),11,zSe))),128))],2))]),default:Z(()=>[rt((V(),z("span",{class:U([`${t.ns.namespace.value}-table__column-filter-trigger`,`${t.ns.namespace.value}-none-outline`]),onClick:e[4]||(e[4]=(...h)=>t.showFilterPanel&&t.showFilterPanel(...h))},[j(f,null,{default:Z(()=>[t.column.filterOpened?(V(),ae(c,{key:0})):(V(),ae(u,{key:1}))]),_:1})],2)),[[p,t.hideFilterPanel,t.popperPaneRef]])]),_:1},8,["visible","placement","popper-class"])}var KSe=Ve(ISe,[["render",HSe],["__file","filter-panel.vue"]]);function VB(t){const e=ot();bv(()=>{n.value.addObserver(e)}),at(()=>{r(n.value),a(n.value)}),mo(()=>{r(n.value),a(n.value)}),hi(()=>{n.value.removeObserver(e)});const n=R(()=>{const s=t.layout;if(!s)throw new Error("Can not find table layout.");return s}),r=s=>{var o;const i=((o=t.vnode.el)==null?void 0:o.querySelectorAll("colgroup > col"))||[];if(!i.length)return;const l=s.getFlattenColumns(),c={};l.forEach(u=>{c[u.id]=u});for(let u=0,f=i.length;u<f;u++){const d=i[u],p=d.getAttribute("name"),h=c[p];h&&d.setAttribute("width",h.realWidth||h.width)}},a=s=>{var o,i;const l=((o=t.vnode.el)==null?void 0:o.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let u=0,f=l.length;u<f;u++)l[u].setAttribute("width",s.scrollY.value?s.gutterWidth:"0");const c=((i=t.vnode.el)==null?void 0:i.querySelectorAll("th.gutter"))||[];for(let u=0,f=c.length;u<f;u++){const d=c[u];d.style.width=s.scrollY.value?`${s.gutterWidth}px`:"0",d.style.display=s.scrollY.value?"":"none"}};return{tableLayout:n.value,onColumnsChange:r,onScrollableChange:a}}const Fs=Symbol("ElTable");function jSe(t,e){const n=ot(),r=We(Fs),a=g=>{g.stopPropagation()},s=(g,y)=>{!y.filters&&y.sortable?h(g,y,!1):y.filterable&&!y.sortable&&a(g),r==null||r.emit("header-click",y,g)},o=(g,y)=>{r==null||r.emit("header-contextmenu",y,g)},i=P(null),l=P(!1),c=P({}),u=(g,y)=>{if(Ot&&!(y.children&&y.children.length>0)&&i.value&&t.border){l.value=!0;const m=r;e("set-drag-visible",!0);const C=(m==null?void 0:m.vnode.el).getBoundingClientRect().left,S=n.vnode.el.querySelector(`th.${y.id}`),T=S.getBoundingClientRect(),w=T.left-C+30;wa(S,"noclick"),c.value={startMouseLeft:g.clientX,startLeft:T.right-C,startColumnLeft:T.left-C,tableLeft:C};const x=m==null?void 0:m.refs.resizeProxy;x.style.left=`${c.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const E=k=>{const M=k.clientX-c.value.startMouseLeft,D=c.value.startLeft+M;x.style.left=`${Math.max(w,D)}px`},O=()=>{if(l.value){const{startColumnLeft:k,startLeft:M}=c.value,I=Number.parseInt(x.style.left,10)-k;y.width=y.realWidth=I,m==null||m.emit("header-dragend",y.width,M-k,y,g),requestAnimationFrame(()=>{t.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",l.value=!1,i.value=null,c.value={},e("set-drag-visible",!1)}document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",O),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{Mr(S,"noclick")},0)};document.addEventListener("mousemove",E),document.addEventListener("mouseup",O)}},f=(g,y)=>{if(y.children&&y.children.length>0)return;const m=g.target;if(!_a(m))return;const b=m==null?void 0:m.closest("th");if(!(!y||!y.resizable)&&!l.value&&t.border){const C=b.getBoundingClientRect(),S=document.body.style;C.width>12&&C.right-g.pageX<8?(S.cursor="col-resize",rs(b,"is-sortable")&&(b.style.cursor="col-resize"),i.value=y):l.value||(S.cursor="",rs(b,"is-sortable")&&(b.style.cursor="pointer"),i.value=null)}},d=()=>{Ot&&(document.body.style.cursor="")},p=({order:g,sortOrders:y})=>{if(g==="")return y[0];const m=y.indexOf(g||null);return y[m>y.length-2?0:m+1]},h=(g,y,m)=>{var b;g.stopPropagation();const C=y.order===m?null:m||p(y),S=(b=g.target)==null?void 0:b.closest("th");if(S&&rs(S,"noclick")){Mr(S,"noclick");return}if(!y.sortable)return;const T=t.store.states;let w=T.sortProp.value,x;const E=T.sortingColumn.value;(E!==y||E===y&&E.order===null)&&(E&&(E.order=null),T.sortingColumn.value=y,w=y.property),C?x=y.order=C:x=y.order=null,T.sortProp.value=w,T.sortOrder.value=x,r==null||r.store.commit("changeSortCondition")};return{handleHeaderClick:s,handleHeaderContextMenu:o,handleMouseDown:u,handleMouseMove:f,handleMouseOut:d,handleSortClick:h,handleFilterClick:a}}function YSe(t){const e=We(Fs),n=Ce("table");return{getHeaderRowStyle:i=>{const l=e==null?void 0:e.props.headerRowStyle;return typeof l=="function"?l.call(null,{rowIndex:i}):l},getHeaderRowClass:i=>{const l=[],c=e==null?void 0:e.props.headerRowClassName;return typeof c=="string"?l.push(c):typeof c=="function"&&l.push(c.call(null,{rowIndex:i})),l.join(" ")},getHeaderCellStyle:(i,l,c,u)=>{var f;let d=(f=e==null?void 0:e.props.headerCellStyle)!=null?f:{};typeof d=="function"&&(d=d.call(null,{rowIndex:i,columnIndex:l,row:c,column:u}));const p=mb(l,u.fixed,t.store,c);return au(p,"left"),au(p,"right"),Object.assign({},d,p)},getHeaderCellClass:(i,l,c,u)=>{const f=yb(n.b(),l,u.fixed,t.store,c),d=[u.id,u.order,u.headerAlign,u.className,u.labelClassName,...f];u.children||d.push("is-leaf"),u.sortable&&d.push("is-sortable");const p=e==null?void 0:e.props.headerCellClassName;return typeof p=="string"?d.push(p):typeof p=="function"&&d.push(p.call(null,{rowIndex:i,columnIndex:l,row:c,column:u})),d.push(n.e("cell")),d.filter(h=>!!h).join(" ")}}}const DB=t=>{const e=[];return t.forEach(n=>{n.children?(e.push(n),e.push.apply(e,DB(n.children))):e.push(n)}),e},qSe=t=>{let e=1;const n=(s,o)=>{if(o&&(s.level=o.level+1,e<s.level&&(e=s.level)),s.children){let i=0;s.children.forEach(l=>{n(l,s),i+=l.colSpan}),s.colSpan=i}else s.colSpan=1};t.forEach(s=>{s.level=1,n(s,void 0)});const r=[];for(let s=0;s<e;s++)r.push([]);return DB(t).forEach(s=>{s.children?(s.rowSpan=1,s.children.forEach(o=>o.isSubColumn=!0)):s.rowSpan=e-s.level+1,r[s.level-1].push(s)}),r};function XSe(t){const e=We(Fs),n=R(()=>qSe(t.store.states.originColumns.value));return{isGroup:R(()=>{const s=n.value.length>1;return s&&e&&(e.state.isGroup.value=!0),s}),toggleAllSelection:s=>{s.stopPropagation(),e==null||e.store.commit("toggleAllSelection")},columnRows:n}}var ZSe=q({name:"ElTableHeader",components:{ElCheckbox:Na},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(t,{emit:e}){const n=ot(),r=We(Fs),a=Ce("table"),s=P({}),{onColumnsChange:o,onScrollableChange:i}=VB(r);at(async()=>{await Ye(),await Ye();const{prop:w,order:x}=t.defaultSort;r==null||r.store.commit("sort",{prop:w,order:x,init:!0})});const{handleHeaderClick:l,handleHeaderContextMenu:c,handleMouseDown:u,handleMouseMove:f,handleMouseOut:d,handleSortClick:p,handleFilterClick:h}=jSe(t,e),{getHeaderRowStyle:g,getHeaderRowClass:y,getHeaderCellStyle:m,getHeaderCellClass:b}=YSe(t),{isGroup:C,toggleAllSelection:S,columnRows:T}=XSe(t);return n.state={onColumnsChange:o,onScrollableChange:i},n.filterPanels=s,{ns:a,filterPanels:s,onColumnsChange:o,onScrollableChange:i,columnRows:T,getHeaderRowClass:y,getHeaderRowStyle:g,getHeaderCellClass:b,getHeaderCellStyle:m,handleHeaderClick:l,handleHeaderContextMenu:c,handleMouseDown:u,handleMouseMove:f,handleMouseOut:d,handleSortClick:p,handleFilterClick:h,isGroup:C,toggleAllSelection:S}},render(){const{ns:t,isGroup:e,columnRows:n,getHeaderCellStyle:r,getHeaderCellClass:a,getHeaderRowClass:s,getHeaderRowStyle:o,handleHeaderClick:i,handleHeaderContextMenu:l,handleMouseDown:c,handleMouseMove:u,handleSortClick:f,handleMouseOut:d,store:p,$parent:h}=this;let g=1;return je("thead",{class:{[t.is("group")]:e}},n.map((y,m)=>je("tr",{class:s(m),key:m,style:o(m)},y.map((b,C)=>(b.rowSpan>g&&(g=b.rowSpan),je("th",{class:a(m,C,y,b),colspan:b.colSpan,key:`${b.id}-thead`,rowspan:b.rowSpan,style:r(m,C,y,b),onClick:S=>i(S,b),onContextmenu:S=>l(S,b),onMousedown:S=>c(S,b),onMousemove:S=>u(S,b),onMouseout:d},[je("div",{class:["cell",b.filteredValue&&b.filteredValue.length>0?"highlight":""]},[b.renderHeader?b.renderHeader({column:b,$index:C,store:p,_self:h}):b.label,b.sortable&&je("span",{onClick:S=>f(S,b),class:"caret-wrapper"},[je("i",{onClick:S=>f(S,b,"ascending"),class:"sort-caret ascending"}),je("i",{onClick:S=>f(S,b,"descending"),class:"sort-caret descending"})]),b.filterable&&je(KSe,{store:p,placement:b.filterPlacement||"bottom-start",column:b,upDataColumn:(S,T)=>{b[S]=T}})])]))))))}});function JSe(t){const e=We(Fs),n=P(""),r=P(je("div")),a=(h,g,y)=>{var m;const b=e,C=iy(h);let S;const T=(m=b==null?void 0:b.vnode.el)==null?void 0:m.dataset.prefix;C&&(S=LE({columns:t.store.states.columns.value},C,T),S&&(b==null||b.emit(`cell-${y}`,g,S,C,h))),b==null||b.emit(`row-${y}`,g,S,h)},s=(h,g)=>{a(h,g,"dblclick")},o=(h,g)=>{t.store.commit("setCurrentRow",g),a(h,g,"click")},i=(h,g)=>{a(h,g,"contextmenu")},l=ta(h=>{t.store.commit("setHoverRow",h)},30),c=ta(()=>{t.store.commit("setHoverRow",null)},30),u=h=>{const g=window.getComputedStyle(h,null),y=Number.parseInt(g.paddingLeft,10)||0,m=Number.parseInt(g.paddingRight,10)||0,b=Number.parseInt(g.paddingTop,10)||0,C=Number.parseInt(g.paddingBottom,10)||0;return{left:y,right:m,top:b,bottom:C}},f=(h,g,y)=>{let m=g.target.parentNode;for(;h>1&&(m=m==null?void 0:m.nextSibling,!(!m||m.nodeName!=="TR"));)y(m,"hover-row hover-fixed-row"),h--};return{handleDoubleClick:s,handleClick:o,handleContextMenu:i,handleMouseEnter:l,handleMouseLeave:c,handleCellMouseEnter:(h,g,y)=>{var m;const b=e,C=iy(h),S=(m=b==null?void 0:b.vnode.el)==null?void 0:m.dataset.prefix;if(C){const N=LE({columns:t.store.states.columns.value},C,S);C.rowSpan>1&&f(C.rowSpan,h,wa);const W=b.hoverState={cell:C,column:N,row:g};b==null||b.emit("cell-mouse-enter",W.row,W.column,W.cell,h)}if(!y)return;const T=h.target.querySelector(".cell");if(!(rs(T,`${S}-tooltip`)&&T.childNodes.length))return;const w=document.createRange();w.setStart(T,0),w.setEnd(T,T.childNodes.length);let x=w.getBoundingClientRect().width,E=w.getBoundingClientRect().height;x-Math.floor(x)<.001&&(x=Math.floor(x)),E-Math.floor(E)<.001&&(E=Math.floor(E));const{top:M,left:D,right:I,bottom:B}=u(T),F=D+I,$=M+B;(x+F>T.offsetWidth||E+$>T.offsetHeight||T.scrollWidth>T.offsetWidth)&&_Se(y,C.innerText||C.textContent,C,b)},handleCellMouseLeave:h=>{const g=iy(h);if(!g)return;g.rowSpan>1&&f(g.rowSpan,h,Mr);const y=e==null?void 0:e.hoverState;e==null||e.emit("cell-mouse-leave",y==null?void 0:y.row,y==null?void 0:y.column,y==null?void 0:y.cell,h)},tooltipContent:n,tooltipTrigger:r}}function QSe(t){const e=We(Fs),n=Ce("table");return{getRowStyle:(c,u)=>{const f=e==null?void 0:e.props.rowStyle;return typeof f=="function"?f.call(null,{row:c,rowIndex:u}):f||null},getRowClass:(c,u)=>{const f=[n.e("row")];e!=null&&e.props.highlightCurrentRow&&c===t.store.states.currentRow.value&&f.push("current-row"),t.stripe&&u%2===1&&f.push(n.em("row","striped"));const d=e==null?void 0:e.props.rowClassName;return typeof d=="string"?f.push(d):typeof d=="function"&&f.push(d.call(null,{row:c,rowIndex:u})),f},getCellStyle:(c,u,f,d)=>{const p=e==null?void 0:e.props.cellStyle;let h=p??{};typeof p=="function"&&(h=p.call(null,{rowIndex:c,columnIndex:u,row:f,column:d}));const g=mb(u,t==null?void 0:t.fixed,t.store);return au(g,"left"),au(g,"right"),Object.assign({},h,g)},getCellClass:(c,u,f,d,p)=>{const h=yb(n.b(),u,t==null?void 0:t.fixed,t.store,void 0,p),g=[d.id,d.align,d.className,...h],y=e==null?void 0:e.props.cellClassName;return typeof y=="string"?g.push(y):typeof y=="function"&&g.push(y.call(null,{rowIndex:c,columnIndex:u,row:f,column:d})),g.push(n.e("cell")),g.filter(m=>!!m).join(" ")},getSpan:(c,u,f,d)=>{let p=1,h=1;const g=e==null?void 0:e.props.spanMethod;if(typeof g=="function"){const y=g({row:c,column:u,rowIndex:f,columnIndex:d});Array.isArray(y)?(p=y[0],h=y[1]):typeof y=="object"&&(p=y.rowspan,h=y.colspan)}return{rowspan:p,colspan:h}},getColspanRealWidth:(c,u,f)=>{if(u<1)return c[f].realWidth;const d=c.map(({realWidth:p,width:h})=>p||h).slice(f,f+u);return Number(d.reduce((p,h)=>Number(p)+Number(h),-1))}}}function ebe(t){const e=We(Fs),n=Ce("table"),{handleDoubleClick:r,handleClick:a,handleContextMenu:s,handleMouseEnter:o,handleMouseLeave:i,handleCellMouseEnter:l,handleCellMouseLeave:c,tooltipContent:u,tooltipTrigger:f}=JSe(t),{getRowStyle:d,getRowClass:p,getCellStyle:h,getCellClass:g,getSpan:y,getColspanRealWidth:m}=QSe(t),b=R(()=>t.store.states.columns.value.findIndex(({type:x})=>x==="default")),C=(x,E)=>{const O=e.props.rowKey;return O?Cr(x,O):E},S=(x,E,O,k=!1)=>{const{tooltipEffect:M,tooltipOptions:D,store:I}=t,{indent:B,columns:F}=I.states,$=p(x,E);let N=!0;return O&&($.push(n.em("row",`level-${O.level}`)),N=O.display),je("tr",{style:[N?null:{display:"none"},d(x,E)],class:$,key:C(x,E),onDblclick:_=>r(_,x),onClick:_=>a(_,x),onContextmenu:_=>s(_,x),onMouseenter:()=>o(E),onMouseleave:i},F.value.map((_,L)=>{const{rowspan:G,colspan:K}=y(x,_,E,L);if(!G||!K)return null;const Y=Object.assign({},_);Y.realWidth=m(F.value,K,L);const te={store:t.store,_self:t.context||e,column:Y,row:x,$index:E,cellIndex:L,expanded:k};L===b.value&&O&&(te.treeNode={indent:O.level*B.value,level:O.level},typeof O.expanded=="boolean"&&(te.treeNode.expanded=O.expanded,"loading"in O&&(te.treeNode.loading=O.loading),"noLazyChildren"in O&&(te.treeNode.noLazyChildren=O.noLazyChildren)));const ve=`${E},${L}`,se=Y.columnKey||Y.rawColumnKey||"",ie=T(L,_,te),re=_.showOverflowTooltip&&rne({effect:M},D,_.showOverflowTooltip);return je("td",{style:h(E,L,x,_),class:g(E,L,x,_,K-1),key:`${se}${ve}`,rowspan:G,colspan:K,onMouseenter:be=>l(be,x,re),onMouseleave:c},[ie])}))},T=(x,E,O)=>E.renderCell(O);return{wrappedRowRender:(x,E)=>{const O=t.store,{isRowExpanded:k,assertRowKey:M}=O,{treeData:D,lazyTreeNodeMap:I,childrenColumnName:B,rowKey:F}=O.states,$=O.states.columns.value;if($.some(({type:W})=>W==="expand")){const W=k(x),_=S(x,E,void 0,W),L=e.renderExpanded;return W?L?[[_,je("tr",{key:`expanded-row__${_.key}`},[je("td",{colspan:$.length,class:`${n.e("cell")} ${n.e("expanded-cell")}`},[L({row:x,$index:E,store:O,expanded:W})])])]]:(console.error("[Element Error]renderExpanded is required."),_):[[_]]}else if(Object.keys(D.value).length){M();const W=Cr(x,F.value);let _=D.value[W],L=null;_&&(L={expanded:_.expanded,level:_.level,display:!0},typeof _.lazy=="boolean"&&(typeof _.loaded=="boolean"&&_.loaded&&(L.noLazyChildren=!(_.children&&_.children.length)),L.loading=_.loading));const G=[S(x,E,L)];if(_){let K=0;const Y=(ve,se)=>{ve&&ve.length&&se&&ve.forEach(ie=>{const re={display:se.display&&se.expanded,level:se.level+1,expanded:!1,noLazyChildren:!1,loading:!1},be=Cr(ie,F.value);if(be==null)throw new Error("For nested data item, row-key is required.");if(_={...D.value[be]},_&&(re.expanded=_.expanded,_.level=_.level||re.level,_.display=!!(_.expanded&&re.display),typeof _.lazy=="boolean"&&(typeof _.loaded=="boolean"&&_.loaded&&(re.noLazyChildren=!(_.children&&_.children.length)),re.loading=_.loading)),K++,G.push(S(ie,E+K,re)),_){const ge=I.value[be]||ie[B.value];Y(ge,_)}})};_.display=!0;const te=I.value[W]||x[B.value];Y(te,_)}return G}else return S(x,E,void 0)},tooltipContent:u,tooltipTrigger:f}}const tbe={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var nbe=q({name:"ElTableBody",props:tbe,setup(t){const e=ot(),n=We(Fs),r=Ce("table"),{wrappedRowRender:a,tooltipContent:s,tooltipTrigger:o}=ebe(t),{onColumnsChange:i,onScrollableChange:l}=VB(n),c=[];return pe(t.store.states.hoverRow,(u,f)=>{var d;const p=e==null?void 0:e.vnode.el,h=Array.from((p==null?void 0:p.children)||[]).filter(m=>m==null?void 0:m.classList.contains(`${r.e("row")}`));let g=u;const y=(d=h[g])==null?void 0:d.childNodes;y!=null&&y.length?Array.from(y).reduce((b,C,S)=>{var T,w;const x=((T=y[S-1])==null?void 0:T.colSpan)>1,E=((w=y[S+1])==null?void 0:w.colSpan)>1;return C.nodeName!=="TD"&&!x&&!E&&b.push(S),b},[]).forEach(b=>{for(var C;g>0;){const S=(C=h[g-1])==null?void 0:C.childNodes;if(S[b]&&S[b].nodeName==="TD"){wa(S[b],"hover-cell"),c.push(S[b]);break}g--}}):(c.forEach(m=>Mr(m,"hover-cell")),c.length=0),!(!t.store.states.isComplex.value||!Ot)&&qc(()=>{const m=h[f],b=h[u];m&&!m.classList.contains("hover-fixed-row")&&Mr(m,"hover-row"),b&&wa(b,"hover-row")})}),hi(()=>{var u;(u=ha)==null||u()}),{ns:r,onColumnsChange:i,onScrollableChange:l,wrappedRowRender:a,tooltipContent:s,tooltipTrigger:o}},render(){const{wrappedRowRender:t,store:e}=this,n=e.states.data.value||[];return je("tbody",{tabIndex:-1},[n.reduce((r,a)=>r.concat(t(a,r.length)),[])])}});function rbe(){const t=We(Fs),e=t==null?void 0:t.store,n=R(()=>e.states.fixedLeafColumnsLength.value),r=R(()=>e.states.rightFixedColumns.value.length),a=R(()=>e.states.columns.value.length),s=R(()=>e.states.fixedColumns.value.length),o=R(()=>e.states.rightFixedColumns.value.length);return{leftFixedLeafCount:n,rightFixedLeafCount:r,columnsCount:a,leftFixedCount:s,rightFixedCount:o,columns:e.states.columns}}function abe(t){const{columns:e}=rbe(),n=Ce("table");return{getCellClasses:(s,o)=>{const i=s[o],l=[n.e("cell"),i.id,i.align,i.labelClassName,...yb(n.b(),o,i.fixed,t.store)];return i.className&&l.push(i.className),i.children||l.push(n.is("leaf")),l},getCellStyles:(s,o)=>{const i=mb(o,s.fixed,t.store);return au(i,"left"),au(i,"right"),i},columns:e}}var sbe=q({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(t){const{getCellClasses:e,getCellStyles:n,columns:r}=abe(t);return{ns:Ce("table"),getCellClasses:e,getCellStyles:n,columns:r}},render(){const{columns:t,getCellStyles:e,getCellClasses:n,summaryMethod:r,sumText:a}=this,s=this.store.states.data.value;let o=[];return r?o=r({columns:t,data:s}):t.forEach((i,l)=>{if(l===0){o[l]=a;return}const c=s.map(p=>Number(p[i.property])),u=[];let f=!0;c.forEach(p=>{if(!Number.isNaN(+p)){f=!1;const h=`${p}`.split(".")[1];u.push(h?h.length:0)}});const d=Math.max.apply(null,u);f?o[l]="":o[l]=c.reduce((p,h)=>{const g=Number(h);return Number.isNaN(+g)?p:Number.parseFloat((p+h).toFixed(Math.min(d,20)))},0)}),je(je("tfoot",[je("tr",{},[...t.map((i,l)=>je("td",{key:l,colspan:i.colSpan,rowspan:i.rowSpan,class:n(t,l),style:e(i,l)},[je("div",{class:["cell",i.labelClassName]},[o[l]])]))])]))}});function obe(t){return{setCurrentRow:u=>{t.commit("setCurrentRow",u)},getSelectionRows:()=>t.getSelectionRows(),toggleRowSelection:(u,f)=>{t.toggleRowSelection(u,f,!1),t.updateAllSelected()},clearSelection:()=>{t.clearSelection()},clearFilter:u=>{t.clearFilter(u)},toggleAllSelection:()=>{t.commit("toggleAllSelection")},toggleRowExpansion:(u,f)=>{t.toggleRowExpansionAdapter(u,f)},clearSort:()=>{t.clearSort()},sort:(u,f)=>{t.commit("sort",{prop:u,order:f})}}}function ibe(t,e,n,r){const a=P(!1),s=P(null),o=P(!1),i=_=>{o.value=_},l=P({width:null,height:null,headerHeight:null}),c=P(!1),u={display:"inline-block",verticalAlign:"middle"},f=P(),d=P(0),p=P(0),h=P(0),g=P(0),y=P(0);Sr(()=>{e.setHeight(t.height)}),Sr(()=>{e.setMaxHeight(t.maxHeight)}),pe(()=>[t.currentRowKey,n.states.rowKey],([_,L])=>{!v(L)||!v(_)||n.setCurrentRowKey(`${_}`)},{immediate:!0}),pe(()=>t.data,_=>{r.store.commit("setData",_)},{immediate:!0,deep:!0}),Sr(()=>{t.expandRowKeys&&n.setExpandRowKeysAdapter(t.expandRowKeys)});const m=()=>{r.store.commit("setHoverRow",null),r.hoverState&&(r.hoverState=null)},b=(_,L)=>{const{pixelX:G,pixelY:K}=L;Math.abs(G)>=Math.abs(K)&&(r.refs.bodyWrapper.scrollLeft+=L.pixelX/5)},C=R(()=>t.height||t.maxHeight||n.states.fixedColumns.value.length>0||n.states.rightFixedColumns.value.length>0),S=R(()=>({width:e.bodyWidth.value?`${e.bodyWidth.value}px`:""})),T=()=>{C.value&&e.updateElsHeight(),e.updateColumnsWidth(),requestAnimationFrame(O)};at(async()=>{await Ye(),n.updateColumns(),k(),requestAnimationFrame(T);const _=r.vnode.el,L=r.refs.headerWrapper;t.flexible&&_&&_.parentElement&&(_.parentElement.style.minWidth="0"),l.value={width:f.value=_.offsetWidth,height:_.offsetHeight,headerHeight:t.showHeader&&L?L.offsetHeight:null},n.states.columns.value.forEach(G=>{G.filteredValue&&G.filteredValue.length&&r.store.commit("filterChange",{column:G,values:G.filteredValue,silent:!0})}),r.$ready=!0});const w=(_,L)=>{if(!_)return;const G=Array.from(_.classList).filter(K=>!K.startsWith("is-scrolling-"));G.push(e.scrollX.value?L:"is-scrolling-none"),_.className=G.join(" ")},x=_=>{const{tableWrapper:L}=r.refs;w(L,_)},E=_=>{const{tableWrapper:L}=r.refs;return!!(L&&L.classList.contains(_))},O=function(){if(!r.refs.scrollBarRef)return;if(!e.scrollX.value){const se="is-scrolling-none";E(se)||x(se);return}const _=r.refs.scrollBarRef.wrapRef;if(!_)return;const{scrollLeft:L,offsetWidth:G,scrollWidth:K}=_,{headerWrapper:Y,footerWrapper:te}=r.refs;Y&&(Y.scrollLeft=L),te&&(te.scrollLeft=L);const ve=K-G-1;L>=ve?x("is-scrolling-right"):x(L===0?"is-scrolling-left":"is-scrolling-middle")},k=()=>{r.refs.scrollBarRef&&(r.refs.scrollBarRef.wrapRef&&vn(r.refs.scrollBarRef.wrapRef,"scroll",O,{passive:!0}),t.fit?Sn(r.vnode.el,M):vn(window,"resize",M),Sn(r.refs.bodyWrapper,()=>{var _,L;M(),(L=(_=r.refs)==null?void 0:_.scrollBarRef)==null||L.update()}))},M=()=>{var _,L,G,K;const Y=r.vnode.el;if(!r.$ready||!Y)return;let te=!1;const{width:ve,height:se,headerHeight:ie}=l.value,re=f.value=Y.offsetWidth;ve!==re&&(te=!0);const be=Y.offsetHeight;(t.height||C.value)&&se!==be&&(te=!0);const ge=t.tableLayout==="fixed"?r.refs.headerWrapper:(_=r.refs.tableHeaderRef)==null?void 0:_.$el;t.showHeader&&(ge==null?void 0:ge.offsetHeight)!==ie&&(te=!0),d.value=((L=r.refs.tableWrapper)==null?void 0:L.scrollHeight)||0,h.value=(ge==null?void 0:ge.scrollHeight)||0,g.value=((G=r.refs.footerWrapper)==null?void 0:G.offsetHeight)||0,y.value=((K=r.refs.appendWrapper)==null?void 0:K.offsetHeight)||0,p.value=d.value-h.value-g.value-y.value,te&&(l.value={width:re,height:be,headerHeight:t.showHeader&&(ge==null?void 0:ge.offsetHeight)||0},T())},D=qn(),I=R(()=>{const{bodyWidth:_,scrollY:L,gutterWidth:G}=e;return _.value?`${_.value-(L.value?G:0)}px`:""}),B=R(()=>t.maxHeight?"fixed":t.tableLayout),F=R(()=>{if(t.data&&t.data.length)return null;let _="100%";t.height&&p.value&&(_=`${p.value}px`);const L=f.value;return{width:L?`${L}px`:"",height:_}}),$=R(()=>t.height?{height:Number.isNaN(Number(t.height))?t.height:`${t.height}px`}:t.maxHeight?{maxHeight:Number.isNaN(Number(t.maxHeight))?t.maxHeight:`${t.maxHeight}px`}:{}),N=R(()=>t.height?{height:"100%"}:t.maxHeight?Number.isNaN(Number(t.maxHeight))?{maxHeight:`calc(${t.maxHeight} - ${h.value+g.value}px)`}:{maxHeight:`${t.maxHeight-h.value-g.value}px`}:{});return{isHidden:a,renderExpanded:s,setDragVisible:i,isGroup:c,handleMouseLeave:m,handleHeaderFooterMousewheel:b,tableSize:D,emptyBlockStyle:F,handleFixedMousewheel:(_,L)=>{const G=r.refs.bodyWrapper;if(Math.abs(L.spinY)>0){const K=G.scrollTop;L.pixelY<0&&K!==0&&_.preventDefault(),L.pixelY>0&&G.scrollHeight-G.clientHeight>K&&_.preventDefault(),G.scrollTop+=Math.ceil(L.pixelY/5)}else G.scrollLeft+=Math.ceil(L.pixelX/5)},resizeProxyVisible:o,bodyWidth:I,resizeState:l,doLayout:T,tableBodyStyles:S,tableLayout:B,scrollbarViewStyle:u,tableInnerStyle:$,scrollbarStyle:N}}function lbe(t){const e=P(),n=()=>{const a=t.vnode.el.querySelector(".hidden-columns"),s={childList:!0,subtree:!0},o=t.store.states.updateOrderFns;e.value=new MutationObserver(()=>{o.forEach(i=>i())}),e.value.observe(a,s)};at(()=>{n()}),hi(()=>{var r;(r=e.value)==null||r.disconnect()})}var cbe={data:{type:Array,default:()=>[]},size:lr,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:{type:Boolean,default:!1},flexible:Boolean,showOverflowTooltip:[Boolean,Object]};function LB(t){const e=t.tableLayout==="auto";let n=t.columns||[];e&&n.every(a=>a.width===void 0)&&(n=[]);const r=a=>{const s={key:`${t.tableLayout}_${a.id}`,style:{},name:void 0};return e?s.style={width:`${a.width}px`}:s.name=a.id,s};return je("colgroup",{},n.map(a=>je("col",r(a))))}LB.props=["columns","tableLayout"];const ube=()=>{const t=P(),e=(s,o)=>{const i=t.value;i&&i.scrollTo(s,o)},n=(s,o)=>{const i=t.value;i&&Xe(o)&&["Top","Left"].includes(s)&&i[`setScroll${s}`](o)};return{scrollBarRef:t,scrollTo:e,setScrollTop:s=>n("Top",s),setScrollLeft:s=>n("Left",s)}};let fbe=1;const dbe=q({name:"ElTable",directives:{Mousewheel:eue},components:{TableHeader:ZSe,TableBody:nbe,TableFooter:sbe,ElScrollbar:To,hColgroup:LB},props:cbe,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(t){const{t:e}=Mt(),n=Ce("table"),r=ot();bt(Fs,r);const a=$Se(r,t);r.store=a;const s=new ASe({store:r.store,table:r,fit:t.fit,showHeader:t.showHeader});r.layout=s;const o=R(()=>(a.states.data.value||[]).length===0),{setCurrentRow:i,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:f,toggleAllSelection:d,toggleRowExpansion:p,clearSort:h,sort:g}=obe(a),{isHidden:y,renderExpanded:m,setDragVisible:b,isGroup:C,handleMouseLeave:S,handleHeaderFooterMousewheel:T,tableSize:w,emptyBlockStyle:x,handleFixedMousewheel:E,resizeProxyVisible:O,bodyWidth:k,resizeState:M,doLayout:D,tableBodyStyles:I,tableLayout:B,scrollbarViewStyle:F,tableInnerStyle:$,scrollbarStyle:N}=ibe(t,s,a,r),{scrollBarRef:W,scrollTo:_,setScrollLeft:L,setScrollTop:G}=ube(),K=ta(D,50),Y=`${n.namespace.value}-table_${fbe++}`;r.tableId=Y,r.state={isGroup:C,resizeState:M,doLayout:D,debouncedUpdateLayout:K};const te=R(()=>t.sumText||e("el.table.sumText")),ve=R(()=>t.emptyText||e("el.table.emptyText"));return lbe(r),{ns:n,layout:s,store:a,handleHeaderFooterMousewheel:T,handleMouseLeave:S,tableId:Y,tableSize:w,isHidden:y,isEmpty:o,renderExpanded:m,resizeProxyVisible:O,resizeState:M,isGroup:C,bodyWidth:k,tableBodyStyles:I,emptyBlockStyle:x,debouncedUpdateLayout:K,handleFixedMousewheel:E,setCurrentRow:i,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:f,toggleAllSelection:d,toggleRowExpansion:p,clearSort:h,doLayout:D,sort:g,t:e,setDragVisible:b,context:r,computedSumText:te,computedEmptyText:ve,tableLayout:B,scrollbarViewStyle:F,tableInnerStyle:$,scrollbarStyle:N,scrollBarRef:W,scrollTo:_,setScrollLeft:L,setScrollTop:G}}}),pbe=["data-prefix"],gbe={ref:"hiddenColumns",class:"hidden-columns"};function hbe(t,e,n,r,a,s){const o=et("hColgroup"),i=et("table-header"),l=et("table-body"),c=et("table-footer"),u=et("el-scrollbar"),f=mv("mousewheel");return V(),z("div",{ref:"tableWrapper",class:U([{[t.ns.m("fit")]:t.fit,[t.ns.m("striped")]:t.stripe,[t.ns.m("border")]:t.border||t.isGroup,[t.ns.m("hidden")]:t.isHidden,[t.ns.m("group")]:t.isGroup,[t.ns.m("fluid-height")]:t.maxHeight,[t.ns.m("scrollable-x")]:t.layout.scrollX.value,[t.ns.m("scrollable-y")]:t.layout.scrollY.value,[t.ns.m("enable-row-hover")]:!t.store.states.isComplex.value,[t.ns.m("enable-row-transition")]:(t.store.states.data.value||[]).length!==0&&(t.store.states.data.value||[]).length<100,"has-footer":t.showSummary},t.ns.m(t.tableSize),t.className,t.ns.b(),t.ns.m(`layout-${t.tableLayout}`)]),style:Pe(t.style),"data-prefix":t.ns.namespace.value,onMouseleave:e[0]||(e[0]=(...d)=>t.handleMouseLeave&&t.handleMouseLeave(...d))},[H("div",{class:U(t.ns.e("inner-wrapper")),style:Pe(t.tableInnerStyle)},[H("div",gbe,[ce(t.$slots,"default")],512),t.showHeader&&t.tableLayout==="fixed"?rt((V(),z("div",{key:0,ref:"headerWrapper",class:U(t.ns.e("header-wrapper"))},[H("table",{ref:"tableHeader",class:U(t.ns.e("header")),style:Pe(t.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[j(o,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),j(i,{ref:"tableHeaderRef",border:t.border,"default-sort":t.defaultSort,store:t.store,onSetDragVisible:t.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])],6)],2)),[[f,t.handleHeaderFooterMousewheel]]):ee("v-if",!0),H("div",{ref:"bodyWrapper",class:U(t.ns.e("body-wrapper"))},[j(u,{ref:"scrollBarRef","view-style":t.scrollbarViewStyle,"wrap-style":t.scrollbarStyle,always:t.scrollbarAlwaysOn},{default:Z(()=>[H("table",{ref:"tableBody",class:U(t.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:Pe({width:t.bodyWidth,tableLayout:t.tableLayout})},[j(o,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),t.showHeader&&t.tableLayout==="auto"?(V(),ae(i,{key:0,ref:"tableHeaderRef",class:U(t.ns.e("body-header")),border:t.border,"default-sort":t.defaultSort,store:t.store,onSetDragVisible:t.setDragVisible},null,8,["class","border","default-sort","store","onSetDragVisible"])):ee("v-if",!0),j(l,{context:t.context,highlight:t.highlightCurrentRow,"row-class-name":t.rowClassName,"tooltip-effect":t.tooltipEffect,"tooltip-options":t.tooltipOptions,"row-style":t.rowStyle,store:t.store,stripe:t.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),t.showSummary&&t.tableLayout==="auto"?(V(),ae(c,{key:1,class:U(t.ns.e("body-footer")),border:t.border,"default-sort":t.defaultSort,store:t.store,"sum-text":t.computedSumText,"summary-method":t.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):ee("v-if",!0)],6),t.isEmpty?(V(),z("div",{key:0,ref:"emptyBlock",style:Pe(t.emptyBlockStyle),class:U(t.ns.e("empty-block"))},[H("span",{class:U(t.ns.e("empty-text"))},[ce(t.$slots,"empty",{},()=>[Ct(Te(t.computedEmptyText),1)])],2)],6)):ee("v-if",!0),t.$slots.append?(V(),z("div",{key:1,ref:"appendWrapper",class:U(t.ns.e("append-wrapper"))},[ce(t.$slots,"append")],2)):ee("v-if",!0)]),_:3},8,["view-style","wrap-style","always"])],2),t.showSummary&&t.tableLayout==="fixed"?rt((V(),z("div",{key:1,ref:"footerWrapper",class:U(t.ns.e("footer-wrapper"))},[H("table",{class:U(t.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:Pe(t.tableBodyStyles)},[j(o,{columns:t.store.states.columns.value,"table-layout":t.tableLayout},null,8,["columns","table-layout"]),j(c,{border:t.border,"default-sort":t.defaultSort,store:t.store,"sum-text":t.computedSumText,"summary-method":t.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[Rt,!t.isEmpty],[f,t.handleHeaderFooterMousewheel]]):ee("v-if",!0),t.border||t.isGroup?(V(),z("div",{key:2,class:U(t.ns.e("border-left-patch"))},null,2)):ee("v-if",!0)],6),rt(H("div",{ref:"resizeProxy",class:U(t.ns.e("column-resize-proxy"))},null,2),[[Rt,t.resizeProxyVisible]])],46,pbe)}var vbe=Ve(dbe,[["render",hbe],["__file","table.vue"]]);const ybe={selection:"table-column--selection",expand:"table__expand-column"},mbe={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},Cbe=t=>ybe[t]||"",Sbe={selection:{renderHeader({store:t,column:e}){function n(){return t.states.data.value&&t.states.data.value.length===0}return je(Na,{disabled:n(),size:t.states.tableSize.value,indeterminate:t.states.selection.value.length>0&&!t.states.isAllSelected.value,"onUpdate:modelValue":t.toggleAllSelection,modelValue:t.states.isAllSelected.value,ariaLabel:e.label})},renderCell({row:t,column:e,store:n,$index:r}){return je(Na,{disabled:e.selectable?!e.selectable.call(null,t,r):!1,size:n.states.tableSize.value,onChange:()=>{n.commit("rowSelectedChanged",t)},onClick:a=>a.stopPropagation(),modelValue:n.isSelected(t),ariaLabel:e.label})},sortable:!1,resizable:!1},index:{renderHeader({column:t}){return t.label||"#"},renderCell({column:t,$index:e}){let n=e+1;const r=t.index;return typeof r=="number"?n=e+r:typeof r=="function"&&(n=r(e)),je("div",{},[n])},sortable:!1},expand:{renderHeader({column:t}){return t.label||""},renderCell({row:t,store:e,expanded:n}){const{ns:r}=e,a=[r.e("expand-icon")];return n&&a.push(r.em("expand-icon","expanded")),je("div",{class:a,onClick:function(o){o.stopPropagation(),e.toggleRowExpansion(t)}},{default:()=>[je(Ge,null,{default:()=>[je(Wr)]})]})},sortable:!1,resizable:!1}};function bbe({row:t,column:e,$index:n}){var r;const a=e.property,s=a&&ug(t,a).value;return e&&e.formatter?e.formatter(t,e,s,n):((r=s==null?void 0:s.toString)==null?void 0:r.call(s))||""}function wbe({row:t,treeNode:e,store:n},r=!1){const{ns:a}=n;if(!e)return r?[je("span",{class:a.e("placeholder")})]:null;const s=[],o=function(i){i.stopPropagation(),!e.loading&&n.loadOrToggle(t)};if(e.indent&&s.push(je("span",{class:a.e("indent"),style:{"padding-left":`${e.indent}px`}})),typeof e.expanded=="boolean"&&!e.noLazyChildren){const i=[a.e("expand-icon"),e.expanded?a.em("expand-icon","expanded"):""];let l=Wr;e.loading&&(l=yi),s.push(je("div",{class:i,onClick:o},{default:()=>[je(Ge,{class:{[a.is("loading")]:e.loading}},{default:()=>[je(l)]})]}))}else s.push(je("span",{class:a.e("placeholder")}));return s}function FE(t,e){return t.reduce((n,r)=>(n[r]=r,n),e)}function Tbe(t,e){const n=ot();return{registerComplexWatchers:()=>{const s=["fixed"],o={realWidth:"width",realMinWidth:"minWidth"},i=FE(s,o);Object.keys(i).forEach(l=>{const c=o[l];Et(e,c)&&pe(()=>e[c],u=>{let f=u;c==="width"&&l==="realWidth"&&(f=vb(u)),c==="minWidth"&&l==="realMinWidth"&&(f=kB(u)),n.columnConfig.value[c]=f,n.columnConfig.value[l]=f;const d=c==="fixed";t.value.store.scheduleLayout(d)})})},registerNormalWatchers:()=>{const s=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip"],o={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},i=FE(s,o);Object.keys(i).forEach(l=>{const c=o[l];Et(e,c)&&pe(()=>e[c],u=>{n.columnConfig.value[l]=u})})}}}function xbe(t,e,n){const r=ot(),a=P(""),s=P(!1),o=P(),i=P(),l=Ce("table");Sr(()=>{o.value=t.align?`is-${t.align}`:null,o.value}),Sr(()=>{i.value=t.headerAlign?`is-${t.headerAlign}`:o.value,i.value});const c=R(()=>{let S=r.vnode.vParent||r.parent;for(;S&&!S.tableId&&!S.columnId;)S=S.vnode.vParent||S.parent;return S}),u=R(()=>{const{store:S}=r.parent;if(!S)return!1;const{treeData:T}=S.states,w=T.value;return w&&Object.keys(w).length>0}),f=P(vb(t.width)),d=P(kB(t.minWidth)),p=S=>(f.value&&(S.width=f.value),d.value&&(S.minWidth=d.value),!f.value&&d.value&&(S.width=void 0),S.minWidth||(S.minWidth=80),S.realWidth=Number(S.width===void 0?S.minWidth:S.width),S),h=S=>{const T=S.type,w=Sbe[T]||{};Object.keys(w).forEach(E=>{const O=w[E];E!=="className"&&O!==void 0&&(S[E]=O)});const x=Cbe(T);if(x){const E=`${v(l.namespace)}-${x}`;S.className=S.className?`${S.className} ${E}`:E}return S},g=S=>{Array.isArray(S)?S.forEach(w=>T(w)):T(S);function T(w){var x;((x=w==null?void 0:w.type)==null?void 0:x.name)==="ElTableColumn"&&(w.vParent=r)}};return{columnId:a,realAlign:o,isSubColumn:s,realHeaderAlign:i,columnOrTableParent:c,setColumnWidth:p,setColumnForcedProps:h,setColumnRenders:S=>{t.renderHeader||S.type!=="selection"&&(S.renderHeader=w=>(r.columnConfig.value.label,ce(e,"header",w,()=>[S.label])));let T=S.renderCell;return S.type==="expand"?(S.renderCell=w=>je("div",{class:"cell"},[T(w)]),n.value.renderExpanded=w=>e.default?e.default(w):e.default):(T=T||bbe,S.renderCell=w=>{let x=null;if(e.default){const I=e.default(w);x=I.some(B=>B.type!==Ar)?I:T(w)}else x=T(w);const{columns:E}=n.value.store.states,O=E.value.findIndex(I=>I.type==="default"),k=u.value&&w.cellIndex===O,M=wbe(w,k),D={class:"cell",style:{}};return S.showOverflowTooltip&&(D.class=`${D.class} ${v(l.namespace)}-tooltip`,D.style={width:`${(w.column.realWidth||Number(w.column.width))-1}px`}),g(x),je("div",D,[M,x])}),S},getPropsData:(...S)=>S.reduce((T,w)=>(Array.isArray(w)&&w.forEach(x=>{T[x]=t[x]}),T),{}),getColumnElIndex:(S,T)=>Array.prototype.indexOf.call(S,T),updateColumnOrder:()=>{n.value.store.commit("updateColumnOrder",r.columnConfig.value)}}}var Ebe={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:t=>t.every(e=>["ascending","descending",null].includes(e))}};let kbe=1;var NB=q({name:"ElTableColumn",components:{ElCheckbox:Na},props:Ebe,setup(t,{slots:e}){const n=ot(),r=P({}),a=R(()=>{let C=n.parent;for(;C&&!C.tableId;)C=C.parent;return C}),{registerNormalWatchers:s,registerComplexWatchers:o}=Tbe(a,t),{columnId:i,isSubColumn:l,realHeaderAlign:c,columnOrTableParent:u,setColumnWidth:f,setColumnForcedProps:d,setColumnRenders:p,getPropsData:h,getColumnElIndex:g,realAlign:y,updateColumnOrder:m}=xbe(t,e,a),b=u.value;i.value=`${b.tableId||b.columnId}_column_${kbe++}`,bv(()=>{l.value=a.value!==b;const C=t.type||"default",S=t.sortable===""?!0:t.sortable,T=Kn(t.showOverflowTooltip)?b.props.showOverflowTooltip:t.showOverflowTooltip,w={...mbe[C],id:i.value,type:C,property:t.prop||t.property,align:y,headerAlign:c,showOverflowTooltip:T,filterable:t.filters||t.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:S,index:t.index,rawColumnKey:n.vnode.key};let M=h(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);M=kSe(w,M),M=MSe(p,f,d)(M),r.value=M,s(),o()}),at(()=>{var C;const S=u.value,T=l.value?S.vnode.el.children:(C=S.refs.hiddenColumns)==null?void 0:C.children,w=()=>g(T||[],n.vnode.el);r.value.getColumnIndex=w,w()>-1&&a.value.store.commit("insertColumn",r.value,l.value?S.columnConfig.value:null,m)}),ln(()=>{a.value.store.commit("removeColumn",r.value,l.value?b.columnConfig.value:null,m)}),n.columnId=i.value,n.columnConfig=r},render(){var t,e,n;try{const r=(e=(t=this.$slots).default)==null?void 0:e.call(t,{row:{},column:{},$index:-1}),a=[];if(Array.isArray(r))for(const o of r)((n=o.type)==null?void 0:n.name)==="ElTableColumn"||o.shapeFlag&2?a.push(o):o.type===Ue&&Array.isArray(o.children)&&o.children.forEach(i=>{(i==null?void 0:i.patchFlag)!==1024&&!tt(i==null?void 0:i.children)&&a.push(i)});return je("div",a)}catch{return je("div",[])}}});const Obe=lt(vbe,{TableColumn:NB}),Mbe=bn(NB);var jf=(t=>(t.ASC="asc",t.DESC="desc",t))(jf||{}),Yf=(t=>(t.CENTER="center",t.RIGHT="right",t))(Yf||{}),BB=(t=>(t.LEFT="left",t.RIGHT="right",t))(BB||{});const l1={asc:"desc",desc:"asc"},qf=Symbol("placeholder"),Rbe=(t,e,n)=>{var r;const a={flexGrow:0,flexShrink:0,...n?{}:{flexGrow:t.flexGrow||0,flexShrink:t.flexShrink||1}};n||(a.flexShrink=1);const s={...(r=t.style)!=null?r:{},...a,flexBasis:"auto",width:t.width};return e||(t.maxWidth&&(s.maxWidth=t.maxWidth),t.minWidth&&(s.minWidth=t.minWidth)),s};function _be(t,e,n){const r=R(()=>v(e).filter(g=>!g.hidden)),a=R(()=>v(r).filter(g=>g.fixed==="left"||g.fixed===!0)),s=R(()=>v(r).filter(g=>g.fixed==="right")),o=R(()=>v(r).filter(g=>!g.fixed)),i=R(()=>{const g=[];return v(a).forEach(y=>{g.push({...y,placeholderSign:qf})}),v(o).forEach(y=>{g.push(y)}),v(s).forEach(y=>{g.push({...y,placeholderSign:qf})}),g}),l=R(()=>v(a).length||v(s).length),c=R(()=>v(e).reduce((y,m)=>(y[m.key]=Rbe(m,v(n),t.fixed),y),{})),u=R(()=>v(r).reduce((g,y)=>g+y.width,0)),f=g=>v(e).find(y=>y.key===g),d=g=>v(c)[g],p=(g,y)=>{g.width=y};function h(g){var y;const{key:m}=g.currentTarget.dataset;if(!m)return;const{sortState:b,sortBy:C}=t;let S=jf.ASC;pt(b)?S=l1[b[m]]:S=l1[C.order],(y=t.onColumnSort)==null||y.call(t,{column:f(m),key:m,order:S})}return{columns:e,columnsStyles:c,columnsTotalWidth:u,fixedColumnsOnLeft:a,fixedColumnsOnRight:s,hasFixedColumns:l,mainColumns:i,normalColumns:o,visibleColumns:r,getColumn:f,getColumnStyle:d,updateColumnWidth:p,onColumnSorted:h}}const Vbe=(t,{mainTableRef:e,leftTableRef:n,rightTableRef:r,onMaybeEndReached:a})=>{const s=P({scrollLeft:0,scrollTop:0});function o(p){var h,g,y;const{scrollTop:m}=p;(h=e.value)==null||h.scrollTo(p),(g=n.value)==null||g.scrollToTop(m),(y=r.value)==null||y.scrollToTop(m)}function i(p){s.value=p,o(p)}function l(p){s.value.scrollTop=p,o(v(s))}function c(p){var h,g;s.value.scrollLeft=p,(g=(h=e.value)==null?void 0:h.scrollTo)==null||g.call(h,v(s))}function u(p){var h;i(p),(h=t.onScroll)==null||h.call(t,p)}function f({scrollTop:p}){const{scrollTop:h}=v(s);p!==h&&l(p)}function d(p,h="auto"){var g;(g=e.value)==null||g.scrollToRow(p,h)}return pe(()=>v(s).scrollTop,(p,h)=>{p>h&&a()}),{scrollPos:s,scrollTo:i,scrollToLeft:c,scrollToTop:l,scrollToRow:d,onScroll:u,onVerticalScroll:f}},Dbe=(t,{mainTableRef:e,leftTableRef:n,rightTableRef:r})=>{const a=ot(),{emit:s}=a,o=on(!1),i=on(null),l=P(t.defaultExpandedRowKeys||[]),c=P(-1),u=on(null),f=P({}),d=P({}),p=on({}),h=on({}),g=on({}),y=R(()=>Xe(t.estimatedRowHeight));function m(E){var O;(O=t.onRowsRendered)==null||O.call(t,E),E.rowCacheEnd>v(c)&&(c.value=E.rowCacheEnd)}function b({hovered:E,rowKey:O}){i.value=E?O:null}function C({expanded:E,rowData:O,rowIndex:k,rowKey:M}){var D,I;const B=[...v(l)],F=B.indexOf(M);E?F===-1&&B.push(M):F>-1&&B.splice(F,1),l.value=B,s("update:expandedRowKeys",B),(D=t.onRowExpand)==null||D.call(t,{expanded:E,rowData:O,rowIndex:k,rowKey:M}),(I=t.onExpandedRowsChange)==null||I.call(t,B)}const S=ta(()=>{var E,O,k,M;o.value=!0,f.value={...v(f),...v(d)},T(v(u),!1),d.value={},u.value=null,(E=e.value)==null||E.forceUpdate(),(O=n.value)==null||O.forceUpdate(),(k=r.value)==null||k.forceUpdate(),(M=a.proxy)==null||M.$forceUpdate(),o.value=!1},0);function T(E,O=!1){v(y)&&[e,n,r].forEach(k=>{const M=v(k);M&&M.resetAfterRowIndex(E,O)})}function w(E,O,k){const M=v(u);(M===null||M>k)&&(u.value=k),d.value[E]=O}function x({rowKey:E,height:O,rowIndex:k},M){M?M===BB.RIGHT?g.value[E]=O:p.value[E]=O:h.value[E]=O;const D=Math.max(...[p,g,h].map(I=>I.value[E]||0));v(f)[E]!==D&&(w(E,D,k),S())}return{hoveringRowKey:i,expandedRowKeys:l,lastRenderedRowIndex:c,isDynamic:y,isResetting:o,rowHeights:f,resetAfterIndex:T,onRowExpanded:C,onRowHovered:b,onRowsRendered:m,onRowHeightChange:x}},Lbe=(t,{expandedRowKeys:e,lastRenderedRowIndex:n,resetAfterIndex:r})=>{const a=P({}),s=R(()=>{const i={},{data:l,rowKey:c}=t,u=v(e);if(!u||!u.length)return l;const f=[],d=new Set;u.forEach(h=>d.add(h));let p=l.slice();for(p.forEach(h=>i[h[c]]=0);p.length>0;){const h=p.shift();f.push(h),d.has(h[c])&&Array.isArray(h.children)&&h.children.length>0&&(p=[...h.children,...p],h.children.forEach(g=>i[g[c]]=i[h[c]]+1))}return a.value=i,f}),o=R(()=>{const{data:i,expandColumnKey:l}=t;return l?v(s):i});return pe(o,(i,l)=>{i!==l&&(n.value=-1,r(0,!0))}),{data:o,depthMap:a}},Nbe=(t,e)=>t+e,Eg=t=>Be(t)?t.reduce(Nbe,0):t,Ml=(t,e,n={})=>Je(t)?t(e):t??n,Qo=t=>(["width","maxWidth","minWidth","height"].forEach(e=>{t[e]=Bn(t[e])}),t),FB=t=>yn(t)?e=>je(t,e):t,Bbe=(t,{columnsTotalWidth:e,data:n,fixedColumnsOnLeft:r,fixedColumnsOnRight:a})=>{const s=R(()=>{const{fixed:C,width:S,vScrollbarSize:T}=t,w=S-T;return C?Math.max(Math.round(v(e)),w):w}),o=R(()=>v(s)+(t.fixed?t.vScrollbarSize:0)),i=R(()=>{const{height:C=0,maxHeight:S=0,footerHeight:T,hScrollbarSize:w}=t;if(S>0){const x=v(h),E=v(l),k=v(p)+x+E+w;return Math.min(k,S-T)}return C-T}),l=R(()=>{const{rowHeight:C,estimatedRowHeight:S}=t,T=v(n);return Xe(S)?T.length*S:T.length*C}),c=R(()=>{const{maxHeight:C}=t,S=v(i);if(Xe(C)&&C>0)return S;const T=v(l)+v(p)+v(h);return Math.min(S,T)}),u=C=>C.width,f=R(()=>Eg(v(r).map(u))),d=R(()=>Eg(v(a).map(u))),p=R(()=>Eg(t.headerHeight)),h=R(()=>{var C;return(((C=t.fixedData)==null?void 0:C.length)||0)*t.rowHeight}),g=R(()=>v(i)-v(p)-v(h)),y=R(()=>{const{style:C={},height:S,width:T}=t;return Qo({...C,height:S,width:T})}),m=R(()=>Qo({height:t.footerHeight})),b=R(()=>({top:Bn(v(p)),bottom:Bn(t.footerHeight),width:Bn(t.width)}));return{bodyWidth:s,fixedTableHeight:c,mainTableHeight:i,leftTableWidth:f,rightTableWidth:d,headerWidth:o,rowsHeight:l,windowHeight:g,footerHeight:m,emptyStyle:b,rootStyle:y,headerHeight:p}},Fbe=t=>{const e=P(),n=P(0),r=P(0);let a;return at(()=>{a=Sn(e,([s])=>{const{width:o,height:i}=s.contentRect,{paddingLeft:l,paddingRight:c,paddingTop:u,paddingBottom:f}=getComputedStyle(s.target),d=Number.parseInt(l)||0,p=Number.parseInt(c)||0,h=Number.parseInt(u)||0,g=Number.parseInt(f)||0;n.value=o-d-p,r.value=i-h-g}).stop}),ln(()=>{a==null||a()}),pe([n,r],([s,o])=>{var i;(i=t.onResize)==null||i.call(t,{width:s,height:o})}),{sizer:e,width:n,height:r}};function $be(t){const e=P(),n=P(),r=P(),{columns:a,columnsStyles:s,columnsTotalWidth:o,fixedColumnsOnLeft:i,fixedColumnsOnRight:l,hasFixedColumns:c,mainColumns:u,onColumnSorted:f}=_be(t,tn(t,"columns"),tn(t,"fixed")),{scrollTo:d,scrollToLeft:p,scrollToTop:h,scrollToRow:g,onScroll:y,onVerticalScroll:m,scrollPos:b}=Vbe(t,{mainTableRef:e,leftTableRef:n,rightTableRef:r,onMaybeEndReached:De}),{expandedRowKeys:C,hoveringRowKey:S,lastRenderedRowIndex:T,isDynamic:w,isResetting:x,rowHeights:E,resetAfterIndex:O,onRowExpanded:k,onRowHeightChange:M,onRowHovered:D,onRowsRendered:I}=Dbe(t,{mainTableRef:e,leftTableRef:n,rightTableRef:r}),{data:B,depthMap:F}=Lbe(t,{expandedRowKeys:C,lastRenderedRowIndex:T,resetAfterIndex:O}),{bodyWidth:$,fixedTableHeight:N,mainTableHeight:W,leftTableWidth:_,rightTableWidth:L,headerWidth:G,rowsHeight:K,windowHeight:Y,footerHeight:te,emptyStyle:ve,rootStyle:se,headerHeight:ie}=Bbe(t,{columnsTotalWidth:o,data:B,fixedColumnsOnLeft:i,fixedColumnsOnRight:l}),re=on(!1),be=P(),ge=R(()=>{const X=v(B).length===0;return Be(t.fixedData)?t.fixedData.length===0&&X:X});function Se(X){const{estimatedRowHeight:ne,rowHeight:me,rowKey:Ee}=t;return ne?v(E)[v(B)[X][Ee]]||ne:me}function De(){const{onEndReached:X}=t;if(!X)return;const{scrollTop:ne}=v(b),me=v(K),Ee=v(Y),de=me-(ne+Ee)+t.hScrollbarSize;v(T)>=0&&me===ne+v(W)-v(ie)&&X(de)}return pe(()=>t.expandedRowKeys,X=>C.value=X,{deep:!0}),{columns:a,containerRef:be,mainTableRef:e,leftTableRef:n,rightTableRef:r,isDynamic:w,isResetting:x,isScrolling:re,hoveringRowKey:S,hasFixedColumns:c,columnsStyles:s,columnsTotalWidth:o,data:B,expandedRowKeys:C,depthMap:F,fixedColumnsOnLeft:i,fixedColumnsOnRight:l,mainColumns:u,bodyWidth:$,emptyStyle:ve,rootStyle:se,headerWidth:G,footerHeight:te,mainTableHeight:W,fixedTableHeight:N,leftTableWidth:_,rightTableWidth:L,showEmpty:ge,getRowHeight:Se,onColumnSorted:f,onRowHovered:D,onRowExpanded:k,onRowsRendered:I,onRowHeightChange:M,scrollTo:d,scrollToLeft:p,scrollToTop:h,scrollToRow:g,onScroll:y,onVerticalScroll:m}}const Cb=Symbol("tableV2"),$B=String,Md={type:Q(Array),required:!0},Sb={type:Q(Array)},UB={...Sb,required:!0},Ube=String,$E={type:Q(Array),default:()=>mn([])},Hi={type:Number,required:!0},AB={type:Q([String,Number,Symbol]),default:"id"},UE={type:Q(Object)},nl=Re({class:String,columns:Md,columnsStyles:{type:Q(Object),required:!0},depth:Number,expandColumnKey:Ube,estimatedRowHeight:{...hl.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:Q(Function)},onRowHover:{type:Q(Function)},onRowHeightChange:{type:Q(Function)},rowData:{type:Q(Object),required:!0},rowEventHandlers:{type:Q(Object)},rowIndex:{type:Number,required:!0},rowKey:AB,style:{type:Q(Object)}}),ly={type:Number,required:!0},bb=Re({class:String,columns:Md,fixedHeaderData:{type:Q(Array)},headerData:{type:Q(Array),required:!0},headerHeight:{type:Q([Number,Array]),default:50},rowWidth:ly,rowHeight:{type:Number,default:50},height:ly,width:ly}),kg=Re({columns:Md,data:UB,fixedData:Sb,estimatedRowHeight:nl.estimatedRowHeight,width:Hi,height:Hi,headerWidth:Hi,headerHeight:bb.headerHeight,bodyWidth:Hi,rowHeight:Hi,cache:lB.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:hl.scrollbarAlwaysOn,scrollbarStartGap:hl.scrollbarStartGap,scrollbarEndGap:hl.scrollbarEndGap,class:$B,style:UE,containerStyle:UE,getRowHeight:{type:Q(Function),required:!0},rowKey:nl.rowKey,onRowsRendered:{type:Q(Function)},onScroll:{type:Q(Function)}}),Abe=Re({cache:kg.cache,estimatedRowHeight:nl.estimatedRowHeight,rowKey:AB,headerClass:{type:Q([String,Function])},headerProps:{type:Q([Object,Function])},headerCellProps:{type:Q([Object,Function])},headerHeight:bb.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:Q([String,Function])},rowProps:{type:Q([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:Q([Object,Function])},columns:Md,data:UB,dataGetter:{type:Q(Function)},fixedData:Sb,expandColumnKey:nl.expandColumnKey,expandedRowKeys:$E,defaultExpandedRowKeys:$E,class:$B,fixed:Boolean,style:{type:Q(Object)},width:Hi,height:Hi,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:hl.hScrollbarSize,vScrollbarSize:hl.vScrollbarSize,scrollbarAlwaysOn:fB.alwaysOn,sortBy:{type:Q(Object),default:()=>({})},sortState:{type:Q(Object),default:void 0},onColumnSort:{type:Q(Function)},onExpandedRowsChange:{type:Q(Function)},onEndReached:{type:Q(Function)},onRowExpand:nl.onRowExpand,onScroll:kg.onScroll,onRowsRendered:kg.onRowsRendered,rowEventHandlers:nl.rowEventHandlers}),wb=(t,{slots:e})=>{var n;const{cellData:r,style:a}=t,s=((n=r==null?void 0:r.toString)==null?void 0:n.call(r))||"",o=ce(e,"default",t,()=>[s]);return j("div",{class:t.class,title:s,style:a},[o])};wb.displayName="ElTableV2Cell";wb.inheritAttrs=!1;const Tb=(t,{slots:e})=>ce(e,"default",t,()=>{var n,r;return[j("div",{class:t.class,title:(n=t.column)==null?void 0:n.title},[(r=t.column)==null?void 0:r.title])]});Tb.displayName="ElTableV2HeaderCell";Tb.inheritAttrs=!1;const Wbe=Re({class:String,columns:Md,columnsStyles:{type:Q(Object),required:!0},headerIndex:Number,style:{type:Q(Object)}}),Ibe=q({name:"ElTableV2HeaderRow",props:Wbe,setup(t,{slots:e}){return()=>{const{columns:n,columnsStyles:r,headerIndex:a,style:s}=t;let o=n.map((i,l)=>e.cell({columns:n,column:i,columnIndex:l,headerIndex:a,style:r[i.key]}));return e.header&&(o=e.header({cells:o.map(i=>Be(i)&&i.length===1?i[0]:i),columns:n,headerIndex:a})),j("div",{class:t.class,style:s,role:"row"},[o])}}}),Pbe="ElTableV2Header",Gbe=q({name:Pbe,props:bb,setup(t,{slots:e,expose:n}){const r=Ce("table-v2"),a=P(),s=R(()=>Qo({width:t.width,height:t.height})),o=R(()=>Qo({width:t.rowWidth,height:t.height})),i=R(()=>xl(v(t.headerHeight))),l=f=>{const d=v(a);Ye(()=>{d!=null&&d.scroll&&d.scroll({left:f})})},c=()=>{const f=r.e("fixed-header-row"),{columns:d,fixedHeaderData:p,rowHeight:h}=t;return p==null?void 0:p.map((g,y)=>{var m;const b=Qo({height:h,width:"100%"});return(m=e.fixed)==null?void 0:m.call(e,{class:f,columns:d,rowData:g,rowIndex:-(y+1),style:b})})},u=()=>{const f=r.e("dynamic-header-row"),{columns:d}=t;return v(i).map((p,h)=>{var g;const y=Qo({width:"100%",height:p});return(g=e.dynamic)==null?void 0:g.call(e,{class:f,columns:d,headerIndex:h,style:y})})};return n({scrollToLeft:l}),()=>{if(!(t.height<=0))return j("div",{ref:a,class:t.class,style:v(s),role:"rowgroup"},[j("div",{style:v(o),class:r.e("header")},[u(),c()])])}}}),zbe=t=>{const{isScrolling:e}=We(Cb),n=P(!1),r=P(),a=R(()=>Xe(t.estimatedRowHeight)&&t.rowIndex>=0),s=(l=!1)=>{const c=v(r);if(!c)return;const{columns:u,onRowHeightChange:f,rowKey:d,rowIndex:p,style:h}=t,{height:g}=c.getBoundingClientRect();n.value=!0,Ye(()=>{if(l||g!==Number.parseInt(h.height)){const y=u[0],m=(y==null?void 0:y.placeholderSign)===qf;f==null||f({rowKey:d,height:g,rowIndex:p},y&&!m&&y.fixed)}})},o=R(()=>{const{rowData:l,rowIndex:c,rowKey:u,onRowHover:f}=t,d=t.rowEventHandlers||{},p={};return Object.entries(d).forEach(([h,g])=>{Je(g)&&(p[h]=y=>{g({event:y,rowData:l,rowIndex:c,rowKey:u})})}),f&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:h,hovered:g})=>{const y=p[h];p[h]=m=>{f({event:m,hovered:g,rowData:l,rowIndex:c,rowKey:u}),y==null||y(m)}}),p}),i=l=>{const{onRowExpand:c,rowData:u,rowIndex:f,rowKey:d}=t;c==null||c({expanded:l,rowData:u,rowIndex:f,rowKey:d})};return at(()=>{v(a)&&s(!0)}),{isScrolling:e,measurable:a,measured:n,rowRef:r,eventHandlers:o,onExpand:i}},Hbe="ElTableV2TableRow",Kbe=q({name:Hbe,props:nl,setup(t,{expose:e,slots:n,attrs:r}){const{eventHandlers:a,isScrolling:s,measurable:o,measured:i,rowRef:l,onExpand:c}=zbe(t);return e({onExpand:c}),()=>{const{columns:u,columnsStyles:f,expandColumnKey:d,depth:p,rowData:h,rowIndex:g,style:y}=t;let m=u.map((b,C)=>{const S=Be(h.children)&&h.children.length>0&&b.key===d;return n.cell({column:b,columns:u,columnIndex:C,depth:p,style:f[b.key],rowData:h,rowIndex:g,isScrolling:v(s),expandIconProps:S?{rowData:h,rowIndex:g,onExpand:c}:void 0})});if(n.row&&(m=n.row({cells:m.map(b=>Be(b)&&b.length===1?b[0]:b),style:y,columns:u,depth:p,rowData:h,rowIndex:g,isScrolling:v(s)})),v(o)){const{height:b,...C}=y||{},S=v(i);return j("div",ft({ref:l,class:t.class,style:S?y:C,role:"row"},r,v(a)),[m])}return j("div",ft(r,{ref:l,class:t.class,style:y,role:"row"},v(a)),[m])}}}),jbe=t=>{const{sortOrder:e}=t;return j(Ge,{size:14,class:t.class},{default:()=>[e===jf.ASC?j(bre,null,null):j(Cre,null,null)]})},Ybe=t=>{const{expanded:e,expandable:n,onExpand:r,style:a,size:s}=t,o={onClick:n?()=>r(!e):void 0,class:t.class};return j(Ge,ft(o,{size:s,style:a}),{default:()=>[j(Wr,null,null)]})},qbe="ElTableV2Grid",Xbe=t=>{const e=P(),n=P(),r=R(()=>{const{data:g,rowHeight:y,estimatedRowHeight:m}=t;if(!m)return g.length*y}),a=R(()=>{const{fixedData:g,rowHeight:y}=t;return((g==null?void 0:g.length)||0)*y}),s=R(()=>Eg(t.headerHeight)),o=R(()=>{const{height:g}=t;return Math.max(0,g-v(s)-v(a))}),i=R(()=>v(s)+v(a)>0),l=({data:g,rowIndex:y})=>g[y][t.rowKey];function c({rowCacheStart:g,rowCacheEnd:y,rowVisibleStart:m,rowVisibleEnd:b}){var C;(C=t.onRowsRendered)==null||C.call(t,{rowCacheStart:g,rowCacheEnd:y,rowVisibleStart:m,rowVisibleEnd:b})}function u(g,y){var m;(m=n.value)==null||m.resetAfterRowIndex(g,y)}function f(g,y){const m=v(e),b=v(n);!m||!b||(pt(g)?(m.scrollToLeft(g.scrollLeft),b.scrollTo(g)):(m.scrollToLeft(g),b.scrollTo({scrollLeft:g,scrollTop:y})))}function d(g){var y;(y=v(n))==null||y.scrollTo({scrollTop:g})}function p(g,y){var m;(m=v(n))==null||m.scrollToItem(g,1,y)}function h(){var g,y;(g=v(n))==null||g.$forceUpdate(),(y=v(e))==null||y.$forceUpdate()}return{bodyRef:n,forceUpdate:h,fixedRowHeight:a,gridHeight:o,hasHeader:i,headerHeight:s,headerRef:e,totalHeight:r,itemKey:l,onItemRendered:c,resetAfterRowIndex:u,scrollTo:f,scrollToTop:d,scrollToRow:p}},xb=q({name:qbe,props:kg,setup(t,{slots:e,expose:n}){const{ns:r}=We(Cb),{bodyRef:a,fixedRowHeight:s,gridHeight:o,hasHeader:i,headerRef:l,headerHeight:c,totalHeight:u,forceUpdate:f,itemKey:d,onItemRendered:p,resetAfterRowIndex:h,scrollTo:g,scrollToTop:y,scrollToRow:m}=Xbe(t);n({forceUpdate:f,totalHeight:u,scrollTo:g,scrollToTop:y,scrollToRow:m,resetAfterRowIndex:h});const b=()=>t.bodyWidth;return()=>{const{cache:C,columns:S,data:T,fixedData:w,useIsScrolling:x,scrollbarAlwaysOn:E,scrollbarEndGap:O,scrollbarStartGap:k,style:M,rowHeight:D,bodyWidth:I,estimatedRowHeight:B,headerWidth:F,height:$,width:N,getRowHeight:W,onScroll:_}=t,L=Xe(B),G=L?B1e:V1e,K=v(c);return j("div",{role:"table",class:[r.e("table"),t.class],style:M},[j(G,{ref:a,data:T,useIsScrolling:x,itemKey:d,columnCache:0,columnWidth:L?b:I,totalColumn:1,totalRow:T.length,rowCache:C,rowHeight:L?W:D,width:N,height:v(o),class:r.e("body"),role:"rowgroup",scrollbarStartGap:k,scrollbarEndGap:O,scrollbarAlwaysOn:E,onScroll:_,onItemRendered:p,perfMode:!1},{default:Y=>{var te;const ve=T[Y.rowIndex];return(te=e.row)==null?void 0:te.call(e,{...Y,columns:S,rowData:ve})}}),v(i)&&j(Gbe,{ref:l,class:r.e("header-wrapper"),columns:S,headerData:T,headerHeight:t.headerHeight,fixedHeaderData:w,rowWidth:F,rowHeight:D,width:N,height:Math.min(K+v(s),$)},{dynamic:e.header,fixed:e.row})])}}});function Zbe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!yn(t)}const Jbe=(t,{slots:e})=>{const{mainTableRef:n,...r}=t;return j(xb,ft({ref:n},r),Zbe(e)?e:{default:()=>[e]})};function Qbe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!yn(t)}const ewe=(t,{slots:e})=>{if(!t.columns.length)return;const{leftTableRef:n,...r}=t;return j(xb,ft({ref:n},r),Qbe(e)?e:{default:()=>[e]})};function twe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!yn(t)}const nwe=(t,{slots:e})=>{if(!t.columns.length)return;const{rightTableRef:n,...r}=t;return j(xb,ft({ref:n},r),twe(e)?e:{default:()=>[e]})};function rwe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!yn(t)}const awe=(t,{slots:e})=>{const{columns:n,columnsStyles:r,depthMap:a,expandColumnKey:s,expandedRowKeys:o,estimatedRowHeight:i,hasFixedColumns:l,hoveringRowKey:c,rowData:u,rowIndex:f,style:d,isScrolling:p,rowProps:h,rowClass:g,rowKey:y,rowEventHandlers:m,ns:b,onRowHovered:C,onRowExpanded:S}=t,T=Ml(g,{columns:n,rowData:u,rowIndex:f},""),w=Ml(h,{columns:n,rowData:u,rowIndex:f}),x=u[y],E=a[x]||0,O=!!s,k=f<0,M=[b.e("row"),T,{[b.e(`row-depth-${E}`)]:O&&f>=0,[b.is("expanded")]:O&&o.includes(x),[b.is("hovered")]:!p&&x===c,[b.is("fixed")]:!E&&k,[b.is("customized")]:!!e.row}],D=l?C:void 0,I={...w,columns:n,columnsStyles:r,class:M,depth:E,expandColumnKey:s,estimatedRowHeight:k?void 0:i,isScrolling:p,rowIndex:f,rowData:u,rowKey:x,rowEventHandlers:m,style:d};return j(Kbe,ft(I,{onRowHover:D,onRowExpand:S}),rwe(e)?e:{default:()=>[e]})},c1=({columns:t,column:e,columnIndex:n,depth:r,expandIconProps:a,isScrolling:s,rowData:o,rowIndex:i,style:l,expandedRowKeys:c,ns:u,cellProps:f,expandColumnKey:d,indentSize:p,iconSize:h,rowKey:g},{slots:y})=>{const m=Qo(l);if(e.placeholderSign===qf)return j("div",{class:u.em("row-cell","placeholder"),style:m},null);const{cellRenderer:b,dataKey:C,dataGetter:S}=e,T=Je(S)?S({columns:t,column:e,columnIndex:n,rowData:o,rowIndex:i}):Vn(o,C??""),w=Ml(f,{cellData:T,columns:t,column:e,columnIndex:n,rowIndex:i,rowData:o}),x={class:u.e("cell-text"),columns:t,column:e,columnIndex:n,cellData:T,isScrolling:s,rowData:o,rowIndex:i},E=FB(b),O=E?E(x):ce(y,"default",x,()=>[j(wb,x,null)]),k=[u.e("row-cell"),e.class,e.align===Yf.CENTER&&u.is("align-center"),e.align===Yf.RIGHT&&u.is("align-right")],M=i>=0&&d&&e.key===d,D=i>=0&&c.includes(o[g]);let I;const B=`margin-inline-start: ${r*p}px;`;return M&&(pt(a)?I=j(Ybe,ft(a,{class:[u.e("expand-icon"),u.is("expanded",D)],size:h,expanded:D,style:B,expandable:!0}),null):I=j("div",{style:[B,`width: ${h}px; height: ${h}px;`].join(" ")},null)),j("div",ft({class:k,style:m},w,{role:"cell"}),[I,O])};c1.inheritAttrs=!1;function swe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!yn(t)}const owe=({columns:t,columnsStyles:e,headerIndex:n,style:r,headerClass:a,headerProps:s,ns:o},{slots:i})=>{const l={columns:t,headerIndex:n},c=[o.e("header-row"),Ml(a,l,""),{[o.is("customized")]:!!i.header}],u={...Ml(s,l),columnsStyles:e,class:c,columns:t,headerIndex:n,style:r};return j(Ibe,u,swe(i)?i:{default:()=>[i]})},AE=(t,{slots:e})=>{const{column:n,ns:r,style:a,onColumnSorted:s}=t,o=Qo(a);if(n.placeholderSign===qf)return j("div",{class:r.em("header-row-cell","placeholder"),style:o},null);const{headerCellRenderer:i,headerClass:l,sortable:c}=n,u={...t,class:r.e("header-cell-text")},f=FB(i),d=f?f(u):ce(e,"default",u,()=>[j(Tb,u,null)]),{sortBy:p,sortState:h,headerCellProps:g}=t;let y,m;if(h){const S=h[n.key];y=!!l1[S],m=y?S:jf.ASC}else y=n.key===p.key,m=y?p.order:jf.ASC;const b=[r.e("header-cell"),Ml(l,t,""),n.align===Yf.CENTER&&r.is("align-center"),n.align===Yf.RIGHT&&r.is("align-right"),c&&r.is("sortable")],C={...Ml(g,t),onClick:n.sortable?s:void 0,class:b,style:o,"data-key":n.key};return j("div",ft(C,{role:"columnheader"}),[d,c&&j(jbe,{class:[r.e("sort-icon"),y&&r.is("sorting")],sortOrder:m},null)])},WB=(t,{slots:e})=>{var n;return j("div",{class:t.class,style:t.style},[(n=e.default)==null?void 0:n.call(e)])};WB.displayName="ElTableV2Footer";const IB=(t,{slots:e})=>{const n=ce(e,"default",{},()=>[j(KN,null,null)]);return j("div",{class:t.class,style:t.style},[n])};IB.displayName="ElTableV2Empty";const PB=(t,{slots:e})=>{var n;return j("div",{class:t.class,style:t.style},[(n=e.default)==null?void 0:n.call(e)])};PB.displayName="ElTableV2Overlay";function Vu(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!yn(t)}const iwe="ElTableV2",lwe=q({name:iwe,props:Abe,setup(t,{slots:e,expose:n}){const r=Ce("table-v2"),{columnsStyles:a,fixedColumnsOnLeft:s,fixedColumnsOnRight:o,mainColumns:i,mainTableHeight:l,fixedTableHeight:c,leftTableWidth:u,rightTableWidth:f,data:d,depthMap:p,expandedRowKeys:h,hasFixedColumns:g,hoveringRowKey:y,mainTableRef:m,leftTableRef:b,rightTableRef:C,isDynamic:S,isResetting:T,isScrolling:w,bodyWidth:x,emptyStyle:E,rootStyle:O,headerWidth:k,footerHeight:M,showEmpty:D,scrollTo:I,scrollToLeft:B,scrollToTop:F,scrollToRow:$,getRowHeight:N,onColumnSorted:W,onRowHeightChange:_,onRowHovered:L,onRowExpanded:G,onRowsRendered:K,onScroll:Y,onVerticalScroll:te}=$be(t);return n({scrollTo:I,scrollToLeft:B,scrollToTop:F,scrollToRow:$}),bt(Cb,{ns:r,isResetting:T,hoveringRowKey:y,isScrolling:w}),()=>{const{cache:ve,cellProps:se,estimatedRowHeight:ie,expandColumnKey:re,fixedData:be,headerHeight:ge,headerClass:Se,headerProps:De,headerCellProps:X,sortBy:ne,sortState:me,rowHeight:Ee,rowClass:de,rowEventHandlers:xe,rowKey:ke,rowProps:ye,scrollbarAlwaysOn:_e,indentSize:Oe,iconSize:Fe,useIsScrolling:ze,vScrollbarSize:he,width:Ae}=t,qe=v(d),st={cache:ve,class:r.e("main"),columns:v(i),data:qe,fixedData:be,estimatedRowHeight:ie,bodyWidth:v(x)+he,headerHeight:ge,headerWidth:v(k),height:v(l),mainTableRef:m,rowKey:ke,rowHeight:Ee,scrollbarAlwaysOn:_e,scrollbarStartGap:2,scrollbarEndGap:he,useIsScrolling:ze,width:Ae,getRowHeight:N,onRowsRendered:K,onScroll:Y},vt=v(u),Ke=v(c),fe={cache:ve,class:r.e("left"),columns:v(s),data:qe,estimatedRowHeight:ie,leftTableRef:b,rowHeight:Ee,bodyWidth:vt,headerWidth:vt,headerHeight:ge,height:Ke,rowKey:ke,scrollbarAlwaysOn:_e,scrollbarStartGap:2,scrollbarEndGap:he,useIsScrolling:ze,width:vt,getRowHeight:N,onScroll:te},oe=v(f)+he,we={cache:ve,class:r.e("right"),columns:v(o),data:qe,estimatedRowHeight:ie,rightTableRef:C,rowHeight:Ee,bodyWidth:oe,headerWidth:oe,headerHeight:ge,height:Ke,rowKey:ke,scrollbarAlwaysOn:_e,scrollbarStartGap:2,scrollbarEndGap:he,width:oe,style:`--${v(r.namespace)}-table-scrollbar-size: ${he}px`,useIsScrolling:ze,getRowHeight:N,onScroll:te},J=v(a),$e={ns:r,depthMap:v(p),columnsStyles:J,expandColumnKey:re,expandedRowKeys:v(h),estimatedRowHeight:ie,hasFixedColumns:v(g),hoveringRowKey:v(y),rowProps:ye,rowClass:de,rowKey:ke,rowEventHandlers:xe,onRowHovered:L,onRowExpanded:G,onRowHeightChange:_},nt={cellProps:se,expandColumnKey:re,indentSize:Oe,iconSize:Fe,rowKey:ke,expandedRowKeys:v(h),ns:r},yt={ns:r,headerClass:Se,headerProps:De,columnsStyles:J},On={ns:r,sortBy:ne,sortState:me,headerCellProps:X,onColumnSorted:W},Ln={row:Kt=>j(awe,ft(Kt,$e),{row:e.row,cell:Cn=>{let ra;return e.cell?j(c1,ft(Cn,nt,{style:J[Cn.column.key]}),Vu(ra=e.cell(Cn))?ra:{default:()=>[ra]}):j(c1,ft(Cn,nt,{style:J[Cn.column.key]}),null)}}),header:Kt=>j(owe,ft(Kt,yt),{header:e.header,cell:Cn=>{let ra;return e["header-cell"]?j(AE,ft(Cn,On,{style:J[Cn.column.key]}),Vu(ra=e["header-cell"](Cn))?ra:{default:()=>[ra]}):j(AE,ft(Cn,On,{style:J[Cn.column.key]}),null)}})},ls=[t.class,r.b(),r.e("root"),{[r.is("dynamic")]:v(S)}],vr={class:r.e("footer"),style:v(M)};return j("div",{class:ls,style:v(O)},[j(Jbe,st,Vu(Ln)?Ln:{default:()=>[Ln]}),j(ewe,fe,Vu(Ln)?Ln:{default:()=>[Ln]}),j(nwe,we,Vu(Ln)?Ln:{default:()=>[Ln]}),e.footer&&j(WB,vr,{default:e.footer}),v(D)&&j(IB,{class:r.e("empty"),style:v(E)},{default:e.empty}),e.overlay&&j(PB,{class:r.e("overlay")},{default:e.overlay})])}}}),cwe=Re({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:Q(Function)}}),uwe=q({name:"ElAutoResizer",props:cwe,setup(t,{slots:e}){const n=Ce("auto-resizer"),{height:r,width:a,sizer:s}=Fbe(t),o={width:"100%",height:"100%"};return()=>{var i;return j("div",{ref:s,class:n.b(),style:o},[(i=e.default)==null?void 0:i.call(e,{height:r.value,width:a.value})])}}}),fwe=lt(lwe),dwe=lt(uwe),Xv=Symbol("tabsRootContextKey"),pwe=Re({tabs:{type:Q(Array),default:()=>mn([])}}),GB="ElTabBar",gwe=q({name:GB}),hwe=q({...gwe,props:pwe,setup(t,{expose:e}){const n=t,r=ot(),a=We(Xv);a||Yn(GB,"<el-tabs><el-tab-bar /></el-tabs>");const s=Ce("tabs"),o=P(),i=P(),l=()=>{let u=0,f=0;const d=["top","bottom"].includes(a.props.tabPosition)?"width":"height",p=d==="width"?"x":"y",h=p==="x"?"left":"top";return n.tabs.every(g=>{var y,m;const b=(m=(y=r.parent)==null?void 0:y.refs)==null?void 0:m[`tab-${g.uid}`];if(!b)return!1;if(!g.active)return!0;u=b[`offset${Ss(h)}`],f=b[`client${Ss(d)}`];const C=window.getComputedStyle(b);return d==="width"&&(n.tabs.length>1&&(f-=Number.parseFloat(C.paddingLeft)+Number.parseFloat(C.paddingRight)),u+=Number.parseFloat(C.paddingLeft)),!1}),{[d]:`${f}px`,transform:`translate${Ss(p)}(${u}px)`}},c=()=>i.value=l();return pe(()=>n.tabs,async()=>{await Ye(),c()},{immediate:!0}),Sn(o,()=>c()),e({ref:o,update:c}),(u,f)=>(V(),z("div",{ref_key:"barRef",ref:o,class:U([v(s).e("active-bar"),v(s).is(v(a).props.tabPosition)]),style:Pe(i.value)},null,6))}});var vwe=Ve(hwe,[["__file","tab-bar.vue"]]);const ywe=Re({panes:{type:Q(Array),default:()=>mn([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),mwe={tabClick:(t,e,n)=>n instanceof Event,tabRemove:(t,e)=>e instanceof Event},WE="ElTabNav",Cwe=q({name:WE,props:ywe,emits:mwe,setup(t,{expose:e,emit:n}){const r=ot(),a=We(Xv);a||Yn(WE,"<el-tabs><tab-nav /></el-tabs>");const s=Ce("tabs"),o=bX(),i=LX(),l=P(),c=P(),u=P(),f=P(),d=P(!1),p=P(0),h=P(!1),g=P(!0),y=R(()=>["top","bottom"].includes(a.props.tabPosition)?"width":"height"),m=R(()=>({transform:`translate${y.value==="width"?"X":"Y"}(-${p.value}px)`})),b=()=>{if(!l.value)return;const O=l.value[`offset${Ss(y.value)}`],k=p.value;if(!k)return;const M=k>O?k-O:0;p.value=M},C=()=>{if(!l.value||!c.value)return;const O=c.value[`offset${Ss(y.value)}`],k=l.value[`offset${Ss(y.value)}`],M=p.value;if(O-M<=k)return;const D=O-M>k*2?M+k:O-k;p.value=D},S=async()=>{const O=c.value;if(!d.value||!u.value||!l.value||!O)return;await Ye();const k=u.value.querySelector(".is-active");if(!k)return;const M=l.value,D=["top","bottom"].includes(a.props.tabPosition),I=k.getBoundingClientRect(),B=M.getBoundingClientRect(),F=D?O.offsetWidth-B.width:O.offsetHeight-B.height,$=p.value;let N=$;D?(I.left<B.left&&(N=$-(B.left-I.left)),I.right>B.right&&(N=$+I.right-B.right)):(I.top<B.top&&(N=$-(B.top-I.top)),I.bottom>B.bottom&&(N=$+(I.bottom-B.bottom))),N=Math.max(N,0),p.value=Math.min(N,F)},T=()=>{var O;if(!c.value||!l.value)return;t.stretch&&((O=f.value)==null||O.update());const k=c.value[`offset${Ss(y.value)}`],M=l.value[`offset${Ss(y.value)}`],D=p.value;M<k?(d.value=d.value||{},d.value.prev=D,d.value.next=D+M<k,k-D<M&&(p.value=k-M)):(d.value=!1,D>0&&(p.value=0))},w=O=>{const k=O.code,{up:M,down:D,left:I,right:B}=He;if(![M,D,I,B].includes(k))return;const F=Array.from(O.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),$=F.indexOf(O.target);let N;k===I||k===M?$===0?N=F.length-1:N=$-1:$<F.length-1?N=$+1:N=0,F[N].focus({preventScroll:!0}),F[N].click(),x()},x=()=>{g.value&&(h.value=!0)},E=()=>h.value=!1;return pe(o,O=>{O==="hidden"?g.value=!1:O==="visible"&&setTimeout(()=>g.value=!0,50)}),pe(i,O=>{O?setTimeout(()=>g.value=!0,50):g.value=!1}),Sn(u,T),at(()=>setTimeout(()=>S(),0)),mo(()=>T()),e({scrollToActiveTab:S,removeFocus:E}),pe(()=>t.panes,()=>r.update(),{flush:"post",deep:!0}),()=>{const O=d.value?[j("span",{class:[s.e("nav-prev"),s.is("disabled",!d.value.prev)],onClick:b},[j(Ge,null,{default:()=>[j(ui,null,null)]})]),j("span",{class:[s.e("nav-next"),s.is("disabled",!d.value.next)],onClick:C},[j(Ge,null,{default:()=>[j(Wr,null,null)]})])]:null,k=t.panes.map((M,D)=>{var I,B,F,$;const N=M.uid,W=M.props.disabled,_=(B=(I=M.props.name)!=null?I:M.index)!=null?B:`${D}`,L=!W&&(M.isClosable||t.editable);M.index=`${D}`;const G=L?j(Ge,{class:"is-icon-close",onClick:te=>n("tabRemove",M,te)},{default:()=>[j(as,null,null)]}):null,K=(($=(F=M.slots).label)==null?void 0:$.call(F))||M.props.label,Y=!W&&M.active?0:-1;return j("div",{ref:`tab-${N}`,class:[s.e("item"),s.is(a.props.tabPosition),s.is("active",M.active),s.is("disabled",W),s.is("closable",L),s.is("focus",h.value)],id:`tab-${_}`,key:`tab-${N}`,"aria-controls":`pane-${_}`,role:"tab","aria-selected":M.active,tabindex:Y,onFocus:()=>x(),onBlur:()=>E(),onClick:te=>{E(),n("tabClick",M,_,te)},onKeydown:te=>{L&&(te.code===He.delete||te.code===He.backspace)&&n("tabRemove",M,te)}},[K,G])});return j("div",{ref:u,class:[s.e("nav-wrap"),s.is("scrollable",!!d.value),s.is(a.props.tabPosition)]},[O,j("div",{class:s.e("nav-scroll"),ref:l},[j("div",{class:[s.e("nav"),s.is(a.props.tabPosition),s.is("stretch",t.stretch&&["top","bottom"].includes(a.props.tabPosition))],ref:c,style:m.value,role:"tablist",onKeydown:w},[t.type?null:j(vwe,{ref:f,tabs:[...t.panes]},null),k])])])}}}),Swe=Re({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Q(Function),default:()=>!0},stretch:Boolean}),cy=t=>tt(t)||Xe(t),bwe={[ut]:t=>cy(t),tabClick:(t,e)=>e instanceof Event,tabChange:t=>cy(t),edit:(t,e)=>["remove","add"].includes(e),tabRemove:t=>cy(t),tabAdd:()=>!0},wwe=q({name:"ElTabs",props:Swe,emits:bwe,setup(t,{emit:e,slots:n,expose:r}){var a,s;const o=Ce("tabs"),{children:i,addChild:l,removeChild:c}=KS(ot(),"ElTabPane"),u=P(),f=P((s=(a=t.modelValue)!=null?a:t.activeName)!=null?s:"0"),d=async(y,m=!1)=>{var b,C,S;if(!(f.value===y||Kn(y)))try{await((b=t.beforeLeave)==null?void 0:b.call(t,y,f.value))!==!1&&(f.value=y,m&&(e(ut,y),e("tabChange",y)),(S=(C=u.value)==null?void 0:C.removeFocus)==null||S.call(C))}catch{}},p=(y,m,b)=>{y.props.disabled||(d(m,!0),e("tabClick",y,b))},h=(y,m)=>{y.props.disabled||Kn(y.props.name)||(m.stopPropagation(),e("edit",y.props.name,"remove"),e("tabRemove",y.props.name))},g=()=>{e("edit",void 0,"add"),e("tabAdd")};return uo({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},R(()=>!!t.activeName)),uo({from:'"addIcon"',replacement:'"add-icon"',scope:"ElTabs",version:"2.6.0",ref:"https://element-plus.org/en-US/component/tabs.html#slots",type:"Slot"},R(()=>!!n.addIcon)),pe(()=>t.activeName,y=>d(y)),pe(()=>t.modelValue,y=>d(y)),pe(f,async()=>{var y;await Ye(),(y=u.value)==null||y.scrollToActiveTab()}),bt(Xv,{props:t,currentName:f,registerPane:l,unregisterPane:c}),r({currentName:f}),()=>{const y=n["add-icon"]||n.addIcon,m=y&&n.addIcon,b=t.editable||t.addable?j("span",{class:o.e("new-tab"),tabindex:"0",onClick:g,onKeydown:T=>{T.code===He.enter&&g()}},[y?ce(n,m?"addIcon":"add-icon"):j(Ge,{class:o.is("icon-plus")},{default:()=>[j(CL,null,null)]})]):null,C=j("div",{class:[o.e("header"),o.is(t.tabPosition)]},[b,j(Cwe,{ref:u,currentName:f.value,editable:t.editable,type:t.type,panes:i.value,stretch:t.stretch,onTabClick:p,onTabRemove:h},null)]),S=j("div",{class:o.e("content")},[ce(n,"default")]);return j("div",{class:[o.b(),o.m(t.tabPosition),{[o.m("card")]:t.type==="card",[o.m("border-card")]:t.type==="border-card"}]},[...t.tabPosition!=="bottom"?[C,S]:[S,C]])}}}),Twe=Re({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),xwe=["id","aria-hidden","aria-labelledby"],zB="ElTabPane",Ewe=q({name:zB}),kwe=q({...Ewe,props:Twe,setup(t){const e=t,n=ot(),r=rr(),a=We(Xv);a||Yn(zB,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const s=Ce("tab-pane"),o=P(),i=R(()=>e.closable||a.props.closable),l=S2(()=>{var p;return a.currentName.value===((p=e.name)!=null?p:o.value)}),c=P(l.value),u=R(()=>{var p;return(p=e.name)!=null?p:o.value}),f=S2(()=>!e.lazy||c.value||l.value);pe(l,p=>{p&&(c.value=!0)});const d=Dt({uid:n.uid,slots:r,props:e,paneName:u,active:l,index:o,isClosable:i});return at(()=>{a.registerPane(d)}),hi(()=>{a.unregisterPane(d.uid)}),(p,h)=>v(f)?rt((V(),z("div",{key:0,id:`pane-${v(u)}`,class:U(v(s).b()),role:"tabpanel","aria-hidden":!v(l),"aria-labelledby":`tab-${v(u)}`},[ce(p.$slots,"default")],10,xwe)),[[Rt,v(l)]]):ee("v-if",!0)}});var HB=Ve(kwe,[["__file","tab-pane.vue"]]);const Owe=lt(wwe,{TabPane:HB}),Mwe=bn(HB),Rwe=Re({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:Ns,default:""},truncated:{type:Boolean},lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),_we=q({name:"ElText"}),Vwe=q({..._we,props:Rwe,setup(t){const e=t,n=qn(),r=Ce("text"),a=R(()=>[r.b(),r.m(e.type),r.m(n.value),r.is("truncated",e.truncated),r.is("line-clamp",!Kn(e.lineClamp))]);return(s,o)=>(V(),ae(dt(s.tag),{class:U(v(a)),style:Pe({"-webkit-line-clamp":s.lineClamp})},{default:Z(()=>[ce(s.$slots,"default")]),_:3},8,["class","style"]))}});var Dwe=Ve(Vwe,[["__file","text.vue"]]);const Lwe=lt(Dwe),Nwe=Re({format:{type:String,default:"HH:mm"},modelValue:String,disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:String,default:"light"},clearable:{type:Boolean,default:!0},size:lr,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:String,maxTime:String,name:String,prefixIcon:{type:Q([String,Object]),default:()=>mL},clearIcon:{type:Q([String,Object]),default:()=>vi}}),qs=t=>{const e=(t||"").split(":");if(e.length>=2){let n=Number.parseInt(e[0],10);const r=Number.parseInt(e[1],10),a=t.toUpperCase();return a.includes("AM")&&n===12?n=0:a.includes("PM")&&n!==12&&(n+=12),{hours:n,minutes:r}}return null},uy=(t,e)=>{const n=qs(t);if(!n)return-1;const r=qs(e);if(!r)return-1;const a=n.minutes+n.hours*60,s=r.minutes+r.hours*60;return a===s?0:a>s?1:-1},IE=t=>`${t}`.padStart(2,"0"),lc=t=>`${IE(t.hours)}:${IE(t.minutes)}`,Bwe=(t,e)=>{const n=qs(t);if(!n)return"";const r=qs(e);if(!r)return"";const a={hours:n.hours,minutes:n.minutes};return a.minutes+=r.minutes,a.hours+=r.hours,a.hours+=Math.floor(a.minutes/60),a.minutes=a.minutes%60,lc(a)},Fwe=q({name:"ElTimeSelect"}),$we=q({...Fwe,props:Nwe,emits:["change","blur","focus","update:modelValue"],setup(t,{expose:e}){const n=t;it.extend(QS);const{Option:r}=Ol,a=Ce("input"),s=P(),o=na(),{lang:i}=Mt(),l=R(()=>n.modelValue),c=R(()=>{const m=qs(n.start);return m?lc(m):null}),u=R(()=>{const m=qs(n.end);return m?lc(m):null}),f=R(()=>{const m=qs(n.step);return m?lc(m):null}),d=R(()=>{const m=qs(n.minTime||"");return m?lc(m):null}),p=R(()=>{const m=qs(n.maxTime||"");return m?lc(m):null}),h=R(()=>{const m=[];if(n.start&&n.end&&n.step){let b=c.value,C;for(;b&&u.value&&uy(b,u.value)<=0;)C=it(b,"HH:mm").locale(i.value).format(n.format),m.push({value:C,disabled:uy(b,d.value||"-1:-1")<=0||uy(b,p.value||"100:100")>=0}),b=Bwe(b,f.value)}return m});return e({blur:()=>{var m,b;(b=(m=s.value)==null?void 0:m.blur)==null||b.call(m)},focus:()=>{var m,b;(b=(m=s.value)==null?void 0:m.focus)==null||b.call(m)}}),(m,b)=>(V(),ae(v(Ol),{ref_key:"select",ref:s,"model-value":v(l),disabled:v(o),clearable:m.clearable,"clear-icon":m.clearIcon,size:m.size,effect:m.effect,placeholder:m.placeholder,"default-first-option":"",filterable:m.editable,"onUpdate:modelValue":b[0]||(b[0]=C=>m.$emit("update:modelValue",C)),onChange:b[1]||(b[1]=C=>m.$emit("change",C)),onBlur:b[2]||(b[2]=C=>m.$emit("blur",C)),onFocus:b[3]||(b[3]=C=>m.$emit("focus",C))},{prefix:Z(()=>[m.prefixIcon?(V(),ae(v(Ge),{key:0,class:U(v(a).e("prefix-icon"))},{default:Z(()=>[(V(),ae(dt(m.prefixIcon)))]),_:1},8,["class"])):ee("v-if",!0)]),default:Z(()=>[(V(!0),z(Ue,null,gt(v(h),C=>(V(),ae(v(r),{key:C.value,label:C.value,value:C.value,disabled:C.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable"]))}});var Og=Ve($we,[["__file","time-select.vue"]]);Og.install=t=>{t.component(Og.name,Og)};const Uwe=Og,Awe=Uwe,Wwe=q({name:"ElTimeline",setup(t,{slots:e}){const n=Ce("timeline");return bt("timeline",e),()=>je("ul",{class:[n.b()]},[ce(e,"default")])}}),Iwe=Re({timestamp:{type:String,default:""},hideTimestamp:{type:Boolean,default:!1},center:{type:Boolean,default:!1},placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:Zt},hollow:{type:Boolean,default:!1}}),Pwe=q({name:"ElTimelineItem"}),Gwe=q({...Pwe,props:Iwe,setup(t){const e=t,n=Ce("timeline-item"),r=R(()=>[n.e("node"),n.em("node",e.size||""),n.em("node",e.type||""),n.is("hollow",e.hollow)]);return(a,s)=>(V(),z("li",{class:U([v(n).b(),{[v(n).e("center")]:a.center}])},[H("div",{class:U(v(n).e("tail"))},null,2),a.$slots.dot?ee("v-if",!0):(V(),z("div",{key:0,class:U(v(r)),style:Pe({backgroundColor:a.color})},[a.icon?(V(),ae(v(Ge),{key:0,class:U(v(n).e("icon"))},{default:Z(()=>[(V(),ae(dt(a.icon)))]),_:1},8,["class"])):ee("v-if",!0)],6)),a.$slots.dot?(V(),z("div",{key:1,class:U(v(n).e("dot"))},[ce(a.$slots,"dot")],2)):ee("v-if",!0),H("div",{class:U(v(n).e("wrapper"))},[!a.hideTimestamp&&a.placement==="top"?(V(),z("div",{key:0,class:U([v(n).e("timestamp"),v(n).is("top")])},Te(a.timestamp),3)):ee("v-if",!0),H("div",{class:U(v(n).e("content"))},[ce(a.$slots,"default")],2),!a.hideTimestamp&&a.placement==="bottom"?(V(),z("div",{key:1,class:U([v(n).e("timestamp"),v(n).is("bottom")])},Te(a.timestamp),3)):ee("v-if",!0)],2)],2))}});var KB=Ve(Gwe,[["__file","timeline-item.vue"]]);const zwe=lt(Wwe,{TimelineItem:KB}),Hwe=bn(KB),jB=Re({nowrap:Boolean});var YB=(t=>(t.top="top",t.bottom="bottom",t.left="left",t.right="right",t))(YB||{});const Kwe=Object.values(YB),Eb=Re({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:Q(Object),default:null}}),jwe=Re({side:{type:Q(String),values:Kwe,required:!0}}),Ywe=["absolute","fixed"],qwe=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],kb=Re({ariaLabel:String,arrowPadding:{type:Q(Number),default:5},effect:{type:String,default:""},contentClass:String,placement:{type:Q(String),values:qwe,default:"bottom"},reference:{type:Q(Object),default:null},offset:{type:Number,default:8},strategy:{type:Q(String),values:Ywe,default:"absolute"},showArrow:{type:Boolean,default:!1}}),Ob=Re({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:Q(Function)},"onUpdate:open":{type:Q(Function)}}),tc={type:Q(Function)},Mb=Re({onBlur:tc,onClick:tc,onFocus:tc,onMouseDown:tc,onMouseEnter:tc,onMouseLeave:tc}),Xwe=Re({...Ob,...Eb,...Mb,...kb,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:Q(Object),default:null},teleported:Boolean,to:{type:Q(String),default:"body"}}),Zv=Symbol("tooltipV2"),qB=Symbol("tooltipV2Content"),fy="tooltip_v2.open",Zwe=q({name:"ElTooltipV2Root"}),Jwe=q({...Zwe,props:Ob,setup(t,{expose:e}){const n=t,r=P(n.defaultOpen),a=P(null),s=R({get:()=>mne(n.open)?r.value:n.open,set:y=>{var m;r.value=y,(m=n["onUpdate:open"])==null||m.call(n,y)}}),o=R(()=>Xe(n.delayDuration)&&n.delayDuration>0),{start:i,stop:l}=wl(()=>{s.value=!0},R(()=>n.delayDuration),{immediate:!1}),c=Ce("tooltip-v2"),u=Vr(),f=()=>{l(),s.value=!0},d=()=>{v(o)?i():f()},p=f,h=()=>{l(),s.value=!1};return pe(s,y=>{var m;y&&(document.dispatchEvent(new CustomEvent(fy)),p()),(m=n.onOpenChange)==null||m.call(n,y)}),at(()=>{document.addEventListener(fy,h)}),ln(()=>{l(),document.removeEventListener(fy,h)}),bt(Zv,{contentId:u,triggerRef:a,ns:c,onClose:h,onDelayOpen:d,onOpen:p}),e({onOpen:p,onClose:h}),(y,m)=>ce(y.$slots,"default",{open:v(s)})}});var Qwe=Ve(Jwe,[["__file","root.vue"]]);const eTe=q({name:"ElTooltipV2Arrow"}),tTe=q({...eTe,props:{...Eb,...jwe},setup(t){const e=t,{ns:n}=We(Zv),{arrowRef:r}=We(qB),a=R(()=>{const{style:s,width:o,height:i}=e,l=n.namespace.value;return{[`--${l}-tooltip-v2-arrow-width`]:`${o}px`,[`--${l}-tooltip-v2-arrow-height`]:`${i}px`,[`--${l}-tooltip-v2-arrow-border-width`]:`${o/2}px`,[`--${l}-tooltip-v2-arrow-cover-width`]:o/2-1,...s||{}}});return(s,o)=>(V(),z("span",{ref_key:"arrowRef",ref:r,style:Pe(v(a)),class:U(v(n).e("arrow"))},null,6))}});var PE=Ve(tTe,[["__file","arrow.vue"]]);const nTe=Re({style:{type:Q([String,Object,Array]),default:()=>({})}}),rTe=q({name:"ElVisuallyHidden"}),aTe=q({...rTe,props:nTe,setup(t){const e=t,n=R(()=>[e.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]);return(r,a)=>(V(),z("span",ft(r.$attrs,{style:v(n)}),[ce(r.$slots,"default")],16))}});var sTe=Ve(aTe,[["__file","visual-hidden.vue"]]);const oTe=["data-side"],iTe=q({name:"ElTooltipV2Content"}),lTe=q({...iTe,props:{...kb,...jB},setup(t){const e=t,{triggerRef:n,contentId:r}=We(Zv),a=P(e.placement),s=P(e.strategy),o=P(null),{referenceRef:i,contentRef:l,middlewareData:c,x:u,y:f,update:d}=Ise({placement:a,strategy:s,middleware:R(()=>{const C=[jL(e.offset)];return e.showArrow&&C.push(Pse({arrowRef:o})),C})}),p=Cu().nextZIndex(),h=Ce("tooltip-v2"),g=R(()=>a.value.split("-")[0]),y=R(()=>({position:v(s),top:`${v(f)||0}px`,left:`${v(u)||0}px`,zIndex:p})),m=R(()=>{if(!e.showArrow)return{};const{arrow:C}=v(c);return{[`--${h.namespace.value}-tooltip-v2-arrow-x`]:`${C==null?void 0:C.x}px`||"",[`--${h.namespace.value}-tooltip-v2-arrow-y`]:`${C==null?void 0:C.y}px`||""}}),b=R(()=>[h.e("content"),h.is("dark",e.effect==="dark"),h.is(v(s)),e.contentClass]);return pe(o,()=>d()),pe(()=>e.placement,C=>a.value=C),at(()=>{pe(()=>e.reference||n.value,C=>{i.value=C||void 0},{immediate:!0})}),bt(qB,{arrowRef:o}),(C,S)=>(V(),z("div",{ref_key:"contentRef",ref:l,style:Pe(v(y)),"data-tooltip-v2-root":""},[C.nowrap?ee("v-if",!0):(V(),z("div",{key:0,"data-side":v(g),class:U(v(b))},[ce(C.$slots,"default",{contentStyle:v(y),contentClass:v(b)}),j(v(sTe),{id:v(r),role:"tooltip"},{default:Z(()=>[C.ariaLabel?(V(),z(Ue,{key:0},[Ct(Te(C.ariaLabel),1)],64)):ce(C.$slots,"default",{key:1})]),_:3},8,["id"]),ce(C.$slots,"arrow",{style:Pe(v(m)),side:v(g)})],10,oTe))],4))}});var GE=Ve(lTe,[["__file","content.vue"]]);const cTe=Re({setRef:{type:Q(Function),required:!0},onlyChild:Boolean});var uTe=q({props:cTe,setup(t,{slots:e}){const n=P(),r=Nv(n,a=>{a?t.setRef(a.nextElementSibling):t.setRef(null)});return()=>{var a;const[s]=((a=e.default)==null?void 0:a.call(e))||[],o=t.onlyChild?Ure(s.children):s.children;return j(Ue,{ref:r},[o])}}});const fTe=q({name:"ElTooltipV2Trigger"}),dTe=q({...fTe,props:{...jB,...Mb},setup(t){const e=t,{onClose:n,onOpen:r,onDelayOpen:a,triggerRef:s,contentId:o}=We(Zv);let i=!1;const l=b=>{s.value=b},c=()=>{i=!1},u=kn(e.onMouseEnter,a),f=kn(e.onMouseLeave,n),d=kn(e.onMouseDown,()=>{n(),i=!0,document.addEventListener("mouseup",c,{once:!0})}),p=kn(e.onFocus,()=>{i||r()}),h=kn(e.onBlur,n),g=kn(e.onClick,b=>{b.detail===0&&n()}),y={blur:h,click:g,focus:p,mousedown:d,mouseenter:u,mouseleave:f},m=(b,C,S)=>{b&&Object.entries(C).forEach(([T,w])=>{b[S](T,w)})};return pe(s,(b,C)=>{m(b,y,"addEventListener"),m(C,y,"removeEventListener"),b&&b.setAttribute("aria-describedby",o.value)}),ln(()=>{m(s.value,y,"removeEventListener"),document.removeEventListener("mouseup",c)}),(b,C)=>b.nowrap?(V(),ae(v(uTe),{key:0,"set-ref":l,"only-child":""},{default:Z(()=>[ce(b.$slots,"default")]),_:3})):(V(),z("button",ft({key:1,ref_key:"triggerRef",ref:s},b.$attrs),[ce(b.$slots,"default")],16))}});var pTe=Ve(dTe,[["__file","trigger.vue"]]);const gTe=q({name:"ElTooltipV2"}),hTe=q({...gTe,props:Xwe,setup(t){const n=hr(t),r=Dt(Js(n,Object.keys(Eb))),a=Dt(Js(n,Object.keys(kb))),s=Dt(Js(n,Object.keys(Ob))),o=Dt(Js(n,Object.keys(Mb)));return(i,l)=>(V(),ae(Qwe,Za(Tv(s)),{default:Z(({open:c})=>[j(pTe,ft(o,{nowrap:""}),{default:Z(()=>[ce(i.$slots,"trigger")]),_:3},16),(V(),ae(pu,{to:i.to,disabled:!i.teleported},[i.fullTransition?(V(),ae(jn,Za(ft({key:0},i.transitionProps)),{default:Z(()=>[i.alwaysOn||c?(V(),ae(GE,Za(ft({key:0},a)),{arrow:Z(({style:u,side:f})=>[i.showArrow?(V(),ae(PE,ft({key:0},r,{style:u,side:f}),null,16,["style","side"])):ee("v-if",!0)]),default:Z(()=>[ce(i.$slots,"default")]),_:3},16)):ee("v-if",!0)]),_:2},1040)):(V(),z(Ue,{key:1},[i.alwaysOn||c?(V(),ae(GE,Za(ft({key:0},a)),{arrow:Z(({style:u,side:f})=>[i.showArrow?(V(),ae(PE,ft({key:0},r,{style:u,side:f}),null,16,["style","side"])):ee("v-if",!0)]),default:Z(()=>[ce(i.$slots,"default")]),_:3},16)):ee("v-if",!0)],64))],8,["to","disabled"]))]),_:3},16))}});var vTe=Ve(hTe,[["__file","tooltip.vue"]]);const yTe=lt(vTe),XB="left-check-change",ZB="right-check-change",cc=Re({data:{type:Q(Array),default:()=>[]},titles:{type:Q(Array),default:()=>[]},buttonTexts:{type:Q(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:Q(Function)},leftDefaultChecked:{type:Q(Array),default:()=>[]},rightDefaultChecked:{type:Q(Array),default:()=>[]},renderContent:{type:Q(Function)},modelValue:{type:Q(Array),default:()=>[]},format:{type:Q(Object),default:()=>({})},filterable:Boolean,props:{type:Q(Object),default:()=>mn({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),u1=(t,e)=>[t,e].every(Be)||Be(t)&&er(e),mTe={[pn]:(t,e,n)=>[t,n].every(Be)&&["left","right"].includes(e),[ut]:t=>Be(t),[XB]:u1,[ZB]:u1},f1="checked-change",CTe=Re({data:cc.data,optionRender:{type:Q(Function)},placeholder:String,title:String,filterable:Boolean,format:cc.format,filterMethod:cc.filterMethod,defaultChecked:cc.leftDefaultChecked,props:cc.props}),STe={[f1]:u1},Rd=t=>{const e={label:"label",key:"key",disabled:"disabled"};return R(()=>({...e,...t.props}))},bTe=(t,e,n)=>{const r=Rd(t),a=R(()=>t.data.filter(u=>Je(t.filterMethod)?t.filterMethod(e.query,u):String(u[r.value.label]||u[r.value.key]).toLowerCase().includes(e.query.toLowerCase()))),s=R(()=>a.value.filter(u=>!u[r.value.disabled])),o=R(()=>{const u=e.checked.length,f=t.data.length,{noChecked:d,hasChecked:p}=t.format;return d&&p?u>0?p.replace(/\${checked}/g,u.toString()).replace(/\${total}/g,f.toString()):d.replace(/\${total}/g,f.toString()):`${u}/${f}`}),i=R(()=>{const u=e.checked.length;return u>0&&u<s.value.length}),l=()=>{const u=s.value.map(f=>f[r.value.key]);e.allChecked=u.length>0&&u.every(f=>e.checked.includes(f))},c=u=>{e.checked=u?s.value.map(f=>f[r.value.key]):[]};return pe(()=>e.checked,(u,f)=>{if(l(),e.checkChangeByUser){const d=u.concat(f).filter(p=>!u.includes(p)||!f.includes(p));n(f1,u,d)}else n(f1,u),e.checkChangeByUser=!0}),pe(s,()=>{l()}),pe(()=>t.data,()=>{const u=[],f=a.value.map(d=>d[r.value.key]);e.checked.forEach(d=>{f.includes(d)&&u.push(d)}),e.checkChangeByUser=!1,e.checked=u}),pe(()=>t.defaultChecked,(u,f)=>{if(f&&u.length===f.length&&u.every(h=>f.includes(h)))return;const d=[],p=s.value.map(h=>h[r.value.key]);u.forEach(h=>{p.includes(h)&&d.push(h)}),e.checkChangeByUser=!1,e.checked=d},{immediate:!0}),{filteredData:a,checkableData:s,checkedSummary:o,isIndeterminate:i,updateAllChecked:l,handleAllCheckedChange:c}},wTe=(t,e)=>({onSourceCheckedChange:(a,s)=>{t.leftChecked=a,s&&e(XB,a,s)},onTargetCheckedChange:(a,s)=>{t.rightChecked=a,s&&e(ZB,a,s)}}),TTe=t=>{const e=Rd(t),n=R(()=>t.data.reduce((s,o)=>(s[o[e.value.key]]=o)&&s,{})),r=R(()=>t.data.filter(s=>!t.modelValue.includes(s[e.value.key]))),a=R(()=>t.targetOrder==="original"?t.data.filter(s=>t.modelValue.includes(s[e.value.key])):t.modelValue.reduce((s,o)=>{const i=n.value[o];return i&&s.push(i),s},[]));return{sourceData:r,targetData:a}},xTe=(t,e,n)=>{const r=Rd(t),a=(i,l,c)=>{n(ut,i),n(pn,i,l,c)};return{addToLeft:()=>{const i=t.modelValue.slice();e.rightChecked.forEach(l=>{const c=i.indexOf(l);c>-1&&i.splice(c,1)}),a(i,"left",e.rightChecked)},addToRight:()=>{let i=t.modelValue.slice();const l=t.data.filter(c=>{const u=c[r.value.key];return e.leftChecked.includes(u)&&!t.modelValue.includes(u)}).map(c=>c[r.value.key]);i=t.targetOrder==="unshift"?l.concat(i):i.concat(l),t.targetOrder==="original"&&(i=t.data.filter(c=>i.includes(c[r.value.key])).map(c=>c[r.value.key])),a(i,"right",e.leftChecked)}}},ETe=q({name:"ElTransferPanel"}),kTe=q({...ETe,props:CTe,emits:STe,setup(t,{expose:e,emit:n}){const r=t,a=rr(),s=({option:C})=>C,{t:o}=Mt(),i=Ce("transfer"),l=Dt({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),c=Rd(r),{filteredData:u,checkedSummary:f,isIndeterminate:d,handleAllCheckedChange:p}=bTe(r,l,n),h=R(()=>!Sa(l.query)&&Sa(u.value)),g=R(()=>!Sa(a.default()[0].children)),{checked:y,allChecked:m,query:b}=hr(l);return e({query:b}),(C,S)=>(V(),z("div",{class:U(v(i).b("panel"))},[H("p",{class:U(v(i).be("panel","header"))},[j(v(Na),{modelValue:v(m),"onUpdate:modelValue":S[0]||(S[0]=T=>cn(m)?m.value=T:null),indeterminate:v(d),"validate-event":!1,onChange:v(p)},{default:Z(()=>[Ct(Te(C.title)+" ",1),H("span",null,Te(v(f)),1)]),_:1},8,["modelValue","indeterminate","onChange"])],2),H("div",{class:U([v(i).be("panel","body"),v(i).is("with-footer",v(g))])},[C.filterable?(V(),ae(v(kr),{key:0,modelValue:v(b),"onUpdate:modelValue":S[1]||(S[1]=T=>cn(b)?b.value=T:null),class:U(v(i).be("panel","filter")),size:"default",placeholder:C.placeholder,"prefix-icon":v(yre),clearable:"","validate-event":!1},null,8,["modelValue","class","placeholder","prefix-icon"])):ee("v-if",!0),rt(j(v(nN),{modelValue:v(y),"onUpdate:modelValue":S[2]||(S[2]=T=>cn(y)?y.value=T:null),"validate-event":!1,class:U([v(i).is("filterable",C.filterable),v(i).be("panel","list")])},{default:Z(()=>[(V(!0),z(Ue,null,gt(v(u),T=>(V(),ae(v(Na),{key:T[v(c).key],class:U(v(i).be("panel","item")),label:T[v(c).key],disabled:T[v(c).disabled],"validate-event":!1},{default:Z(()=>{var w;return[j(s,{option:(w=C.optionRender)==null?void 0:w.call(C,T)},null,8,["option"])]}),_:2},1032,["class","label","disabled"]))),128))]),_:1},8,["modelValue","class"]),[[Rt,!v(h)&&!v(Sa)(C.data)]]),rt(H("p",{class:U(v(i).be("panel","empty"))},Te(v(h)?v(o)("el.transfer.noMatch"):v(o)("el.transfer.noData")),3),[[Rt,v(h)||v(Sa)(C.data)]])],2),v(g)?(V(),z("p",{key:0,class:U(v(i).be("panel","footer"))},[ce(C.$slots,"default")],2)):ee("v-if",!0)],2))}});var zE=Ve(kTe,[["__file","transfer-panel.vue"]]);const OTe={key:0},MTe={key:0},RTe=q({name:"ElTransfer"}),_Te=q({...RTe,props:cc,emits:mTe,setup(t,{expose:e,emit:n}){const r=t,a=rr(),{t:s}=Mt(),o=Ce("transfer"),{formItem:i}=Hr(),l=Dt({leftChecked:[],rightChecked:[]}),c=Rd(r),{sourceData:u,targetData:f}=TTe(r),{onSourceCheckedChange:d,onTargetCheckedChange:p}=wTe(l,n),{addToLeft:h,addToRight:g}=xTe(r,l,n),y=P(),m=P(),b=E=>{switch(E){case"left":y.value.query="";break;case"right":m.value.query="";break}},C=R(()=>r.buttonTexts.length===2),S=R(()=>r.titles[0]||s("el.transfer.titles.0")),T=R(()=>r.titles[1]||s("el.transfer.titles.1")),w=R(()=>r.filterPlaceholder||s("el.transfer.filterPlaceholder"));pe(()=>r.modelValue,()=>{var E;r.validateEvent&&((E=i==null?void 0:i.validate)==null||E.call(i,"change").catch(O=>void 0))});const x=R(()=>E=>r.renderContent?r.renderContent(je,E):a.default?a.default({option:E}):je("span",E[c.value.label]||E[c.value.key]));return e({clearQuery:b,leftPanel:y,rightPanel:m}),(E,O)=>(V(),z("div",{class:U(v(o).b())},[j(zE,{ref_key:"leftPanel",ref:y,data:v(u),"option-render":v(x),placeholder:v(w),title:v(S),filterable:E.filterable,format:E.format,"filter-method":E.filterMethod,"default-checked":E.leftDefaultChecked,props:r.props,onCheckedChange:v(d)},{default:Z(()=>[ce(E.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),H("div",{class:U(v(o).e("buttons"))},[j(v(ir),{type:"primary",class:U([v(o).e("button"),v(o).is("with-texts",v(C))]),disabled:v(Sa)(l.rightChecked),onClick:v(h)},{default:Z(()=>[j(v(Ge),null,{default:Z(()=>[j(v(ui))]),_:1}),v(Kn)(E.buttonTexts[0])?ee("v-if",!0):(V(),z("span",OTe,Te(E.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),j(v(ir),{type:"primary",class:U([v(o).e("button"),v(o).is("with-texts",v(C))]),disabled:v(Sa)(l.leftChecked),onClick:v(g)},{default:Z(()=>[v(Kn)(E.buttonTexts[1])?ee("v-if",!0):(V(),z("span",MTe,Te(E.buttonTexts[1]),1)),j(v(Ge),null,{default:Z(()=>[j(v(Wr))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),j(zE,{ref_key:"rightPanel",ref:m,data:v(f),"option-render":v(x),placeholder:v(w),filterable:E.filterable,format:E.format,"filter-method":E.filterMethod,title:v(T),"default-checked":E.rightDefaultChecked,props:r.props,onCheckedChange:v(p)},{default:Z(()=>[ce(E.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var VTe=Ve(_Te,[["__file","transfer.vue"]]);const DTe=lt(VTe),Vc="$treeNodeId",HE=function(t,e){!e||e[Vc]||Object.defineProperty(e,Vc,{value:t.id,enumerable:!1,configurable:!1,writable:!1})},Rb=function(t,e){return t?e[t]:e[Vc]},d1=(t,e,n)=>{const r=t.value.currentNode;n();const a=t.value.currentNode;r!==a&&e("current-change",a?a.data:null,a)},p1=t=>{let e=!0,n=!0,r=!0;for(let a=0,s=t.length;a<s;a++){const o=t[a];(o.checked!==!0||o.indeterminate)&&(e=!1,o.disabled||(r=!1)),(o.checked!==!1||o.indeterminate)&&(n=!1)}return{all:e,none:n,allWithoutDisable:r,half:!e&&!n}},Mg=function(t){if(t.childNodes.length===0||t.loading)return;const{all:e,none:n,half:r}=p1(t.childNodes);e?(t.checked=!0,t.indeterminate=!1):r?(t.checked=!1,t.indeterminate=!0):n&&(t.checked=!1,t.indeterminate=!1);const a=t.parent;!a||a.level===0||t.store.checkStrictly||Mg(a)},Vp=function(t,e){const n=t.store.props,r=t.data||{},a=n[e];if(typeof a=="function")return a(r,t);if(typeof a=="string")return r[a];if(typeof a>"u"){const s=r[e];return s===void 0?"":s}};let LTe=0,g1=class Rg{constructor(e){this.id=LTe++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in e)Et(e,n)&&(this[n]=e[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const e=this.store;if(!e)throw new Error("[Node]store is required!");e.registerNode(this);const n=e.props;if(n&&typeof n.isLeaf<"u"){const s=Vp(this,"isLeaf");typeof s=="boolean"&&(this.isLeafByUser=s)}if(e.lazy!==!0&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&this.expand(),Array.isArray(this.data)||HE(this,this.data),!this.data)return;const r=e.defaultExpandedKeys,a=e.key;a&&r&&r.includes(this.key)&&this.expand(null,e.autoExpandParent),a&&e.currentNodeKey!==void 0&&this.key===e.currentNodeKey&&(e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(e){Array.isArray(e)||HE(this,e),this.data=e,this.childNodes=[];let n;this.level===0&&Array.isArray(this.data)?n=this.data:n=Vp(this,"children")||[];for(let r=0,a=n.length;r<a;r++)this.insertChild({data:n[r]})}get label(){return Vp(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return Vp(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return e.childNodes[n+1]}return null}get previousSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return n>0?e.childNodes[n-1]:null}return null}contains(e,n=!0){return(this.childNodes||[]).some(r=>r===e||n&&r.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,n,r){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof Rg)){if(!r){const a=this.getChildren(!0);a.includes(e.data)||(typeof n>"u"||n<0?a.push(e.data):a.splice(n,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=Dt(new Rg(e)),e instanceof Rg&&e.initialize()}e.level=this.level+1,typeof n>"u"||n<0?this.childNodes.push(e):this.childNodes.splice(n,0,e),this.updateLeafState()}insertBefore(e,n){let r;n&&(r=this.childNodes.indexOf(n)),this.insertChild(e,r)}insertAfter(e,n){let r;n&&(r=this.childNodes.indexOf(n),r!==-1&&(r+=1)),this.insertChild(e,r)}removeChild(e){const n=this.getChildren()||[],r=n.indexOf(e.data);r>-1&&n.splice(r,1);const a=this.childNodes.indexOf(e);a>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(a,1)),this.updateLeafState()}removeChildByData(e){let n=null;for(let r=0;r<this.childNodes.length;r++)if(this.childNodes[r].data===e){n=this.childNodes[r];break}n&&this.removeChild(n)}expand(e,n){const r=()=>{if(n){let a=this.parent;for(;a.level>0;)a.expanded=!0,a=a.parent}this.expanded=!0,e&&e(),this.childNodes.forEach(a=>{a.canFocus=!0})};this.shouldLoadData()?this.loadData(a=>{Array.isArray(a)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Mg(this),r())}):r()}doCreateChildren(e,n={}){e.forEach(r=>{this.insertChild(Object.assign({data:r},n),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(e=>{e.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0;return}this.isLeaf=!1}setChecked(e,n,r,a){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:o,allWithoutDisable:i}=p1(this.childNodes);!this.isLeaf&&!o&&i&&(this.checked=!1,e=!1);const l=()=>{if(n){const c=this.childNodes;for(let d=0,p=c.length;d<p;d++){const h=c[d];a=a||e!==!1;const g=h.disabled?h.checked:a;h.setChecked(g,n,!0,a)}const{half:u,all:f}=p1(c);f||(this.checked=f,this.indeterminate=u)}};if(this.shouldLoadData()){this.loadData(()=>{l(),Mg(this)},{checked:e!==!1});return}else l()}const s=this.parent;!s||s.level===0||r||Mg(s)}getChildren(e=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const r=this.store.props;let a="children";return r&&(a=r.children||"children"),n[a]===void 0&&(n[a]=null),e&&!n[a]&&(n[a]=[]),n[a]}updateChildren(){const e=this.getChildren()||[],n=this.childNodes.map(s=>s.data),r={},a=[];e.forEach((s,o)=>{const i=s[Vc];!!i&&n.findIndex(c=>c[Vc]===i)>=0?r[i]={index:o,data:s}:a.push({index:o,data:s})}),this.store.lazy||n.forEach(s=>{r[s[Vc]]||this.removeChildByData(s)}),a.forEach(({index:s,data:o})=>{this.insertChild({data:o},s)}),this.updateLeafState()}loadData(e,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const r=a=>{this.childNodes=[],this.doCreateChildren(a,n),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,a)};this.store.load(this,r)}else e&&e.call(this)}};class NTe{constructor(e){this.currentNode=null,this.currentNodeKey=null;for(const n in e)Et(e,n)&&(this[n]=e[n]);this.nodesMap={}}initialize(){if(this.root=new g1({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(e){const n=this.filterNodeMethod,r=this.lazy,a=function(s){const o=s.root?s.root.childNodes:s.childNodes;if(o.forEach(i=>{i.visible=n.call(i,e,i.data,i),a(i)}),!s.visible&&o.length){let i=!0;i=!o.some(l=>l.visible),s.root?s.root.visible=i===!1:s.visible=i===!1}e&&s.visible&&!s.isLeaf&&(!r||s.loaded)&&s.expand()};a(this)}setData(e){e!==this.root.data?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(e){if(e instanceof g1)return e;const n=pt(e)?Rb(this.key,e):e;return this.nodesMap[n]||null}insertBefore(e,n){const r=this.getNode(n);r.parent.insertBefore({data:e},r)}insertAfter(e,n){const r=this.getNode(n);r.parent.insertAfter({data:e},r)}remove(e){const n=this.getNode(e);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(e,n){const r=n?this.getNode(n):this.root;r&&r.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],n=this.nodesMap;e.forEach(r=>{const a=n[r];a&&a.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){(this.defaultCheckedKeys||[]).includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const n=this.key;!e||!e.data||(n?e.key!==void 0&&(this.nodesMap[e.key]=e):this.nodesMap[e.id]=e)}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(r=>{this.deregisterNode(r)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,n=!1){const r=[],a=function(s){(s.root?s.root.childNodes:s.childNodes).forEach(i=>{(i.checked||n&&i.indeterminate)&&(!e||e&&i.isLeaf)&&r.push(i.data),a(i)})};return a(this),r}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const e=[],n=function(r){(r.root?r.root.childNodes:r.childNodes).forEach(s=>{s.indeterminate&&e.push(s.data),n(s)})};return n(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],n=this.nodesMap;for(const r in n)Et(n,r)&&e.push(n[r]);return e}updateChildren(e,n){const r=this.nodesMap[e];if(!r)return;const a=r.childNodes;for(let s=a.length-1;s>=0;s--){const o=a[s];this.remove(o.data)}for(let s=0,o=n.length;s<o;s++){const i=n[s];this.append(i,r.data)}}_setCheckedKeys(e,n=!1,r){const a=this._getAllNodes().sort((l,c)=>l.level-c.level),s=Object.create(null),o=Object.keys(r);a.forEach(l=>l.setChecked(!1,!1));const i=l=>{l.childNodes.forEach(c=>{var u;s[c.data[e]]=!0,(u=c.childNodes)!=null&&u.length&&i(c)})};for(let l=0,c=a.length;l<c;l++){const u=a[l],f=u.data[e].toString();if(!o.includes(f)){u.checked&&!s[f]&&u.setChecked(!1,!1);continue}if(u.childNodes.length&&i(u),u.isLeaf||this.checkStrictly){u.setChecked(!0,!1);continue}if(u.setChecked(!0,!0),n){u.setChecked(!1,!1);const p=function(h){h.childNodes.forEach(y=>{y.isLeaf||y.setChecked(!1,!1),p(y)})};p(u)}}}setCheckedNodes(e,n=!1){const r=this.key,a={};e.forEach(s=>{a[(s||{})[r]]=!0}),this._setCheckedKeys(r,n,a)}setCheckedKeys(e,n=!1){this.defaultCheckedKeys=e;const r=this.key,a={};e.forEach(s=>{a[s]=!0}),this._setCheckedKeys(r,n,a)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(n=>{const r=this.getNode(n);r&&r.expand(null,this.autoExpandParent)})}setChecked(e,n,r){const a=this.getNode(e);a&&a.setChecked(!!n,r)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,n=!0){const r=e[this.key],a=this.nodesMap[r];this.setCurrentNode(a),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(e,n=!0){if(e==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const r=this.getNode(e);r&&(this.setCurrentNode(r),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const BTe=q({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(t){const e=Ce("tree"),n=We("NodeInstance"),r=We("RootTree");return()=>{const a=t.node,{data:s,store:o}=a;return t.renderContent?t.renderContent(je,{_self:n,node:a,data:s,store:o}):ce(r.ctx.slots,"default",{node:a,data:s},()=>[je("span",{class:e.be("node","label")},[a.label])])}}});var FTe=Ve(BTe,[["__file","tree-node-content.vue"]]);function JB(t){const e=We("TreeNodeMap",null),n={treeNodeExpand:r=>{t.node!==r&&t.node.collapse()},children:[]};return e&&e.children.push(n),bt("TreeNodeMap",n),{broadcastExpanded:r=>{if(t.accordion)for(const a of n.children)a.treeNodeExpand(r)}}}const QB=Symbol("dragEvents");function $Te({props:t,ctx:e,el$:n,dropIndicator$:r,store:a}){const s=Ce("tree"),o=P({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return bt(QB,{treeNodeDragStart:({event:u,treeNode:f})=>{if(typeof t.allowDrag=="function"&&!t.allowDrag(f.node))return u.preventDefault(),!1;u.dataTransfer.effectAllowed="move";try{u.dataTransfer.setData("text/plain","")}catch{}o.value.draggingNode=f,e.emit("node-drag-start",f.node,u)},treeNodeDragOver:({event:u,treeNode:f})=>{const d=f,p=o.value.dropNode;p&&p.node.id!==d.node.id&&Mr(p.$el,s.is("drop-inner"));const h=o.value.draggingNode;if(!h||!d)return;let g=!0,y=!0,m=!0,b=!0;typeof t.allowDrop=="function"&&(g=t.allowDrop(h.node,d.node,"prev"),b=y=t.allowDrop(h.node,d.node,"inner"),m=t.allowDrop(h.node,d.node,"next")),u.dataTransfer.dropEffect=y||g||m?"move":"none",(g||y||m)&&(p==null?void 0:p.node.id)!==d.node.id&&(p&&e.emit("node-drag-leave",h.node,p.node,u),e.emit("node-drag-enter",h.node,d.node,u)),g||y||m?o.value.dropNode=d:o.value.dropNode=null,d.node.nextSibling===h.node&&(m=!1),d.node.previousSibling===h.node&&(g=!1),d.node.contains(h.node,!1)&&(y=!1),(h.node===d.node||h.node.contains(d.node))&&(g=!1,y=!1,m=!1);const C=d.$el.querySelector(`.${s.be("node","content")}`).getBoundingClientRect(),S=n.value.getBoundingClientRect();let T;const w=g?y?.25:m?.45:1:-1,x=m?y?.75:g?.55:0:1;let E=-9999;const O=u.clientY-C.top;O<C.height*w?T="before":O>C.height*x?T="after":y?T="inner":T="none";const k=d.$el.querySelector(`.${s.be("node","expand-icon")}`).getBoundingClientRect(),M=r.value;T==="before"?E=k.top-S.top:T==="after"&&(E=k.bottom-S.top),M.style.top=`${E}px`,M.style.left=`${k.right-S.left}px`,T==="inner"?wa(d.$el,s.is("drop-inner")):Mr(d.$el,s.is("drop-inner")),o.value.showDropIndicator=T==="before"||T==="after",o.value.allowDrop=o.value.showDropIndicator||b,o.value.dropType=T,e.emit("node-drag-over",h.node,d.node,u)},treeNodeDragEnd:u=>{const{draggingNode:f,dropType:d,dropNode:p}=o.value;if(u.preventDefault(),u.dataTransfer.dropEffect="move",f&&p){const h={data:f.node.data};d!=="none"&&f.node.remove(),d==="before"?p.node.parent.insertBefore(h,p.node):d==="after"?p.node.parent.insertAfter(h,p.node):d==="inner"&&p.node.insertChild(h),d!=="none"&&a.value.registerNode(h),Mr(p.$el,s.is("drop-inner")),e.emit("node-drag-end",f.node,p.node,d,u),d!=="none"&&e.emit("node-drop",f.node,p.node,d,u)}f&&!p&&e.emit("node-drag-end",f.node,null,d,u),o.value.showDropIndicator=!1,o.value.draggingNode=null,o.value.dropNode=null,o.value.allowDrop=!0}}),{dragState:o}}const UTe=q({name:"ElTreeNode",components:{ElCollapseTransition:Kv,ElCheckbox:Na,NodeContent:FTe,ElIcon:Ge,Loading:yi},props:{node:{type:g1,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(t,e){const n=Ce("tree"),{broadcastExpanded:r}=JB(t),a=We("RootTree"),s=P(!1),o=P(!1),i=P(null),l=P(null),c=P(null),u=We(QB),f=ot();bt("NodeInstance",f),t.node.expanded&&(s.value=!0,o.value=!0);const d=a.props.props.children||"children";pe(()=>{const O=t.node.data[d];return O&&[...O]},()=>{t.node.updateChildren()}),pe(()=>t.node.indeterminate,O=>{g(t.node.checked,O)}),pe(()=>t.node.checked,O=>{g(O,t.node.indeterminate)}),pe(()=>t.node.expanded,O=>{Ye(()=>s.value=O),O&&(o.value=!0)});const p=O=>Rb(a.props.nodeKey,O.data),h=O=>{const k=t.props.class;if(!k)return{};let M;if(Je(k)){const{data:D}=O;M=k(D,O)}else M=k;return tt(M)?{[M]:!0}:M},g=(O,k)=>{(i.value!==O||l.value!==k)&&a.ctx.emit("check-change",t.node.data,O,k),i.value=O,l.value=k},y=O=>{d1(a.store,a.ctx.emit,()=>a.store.value.setCurrentNode(t.node)),a.currentNode.value=t.node,a.props.expandOnClickNode&&b(),a.props.checkOnClickNode&&!t.node.disabled&&C(null,{target:{checked:!t.node.checked}}),a.ctx.emit("node-click",t.node.data,t.node,f,O)},m=O=>{a.instance.vnode.props.onNodeContextmenu&&(O.stopPropagation(),O.preventDefault()),a.ctx.emit("node-contextmenu",O,t.node.data,t.node,f)},b=()=>{t.node.isLeaf||(s.value?(a.ctx.emit("node-collapse",t.node.data,t.node,f),t.node.collapse()):(t.node.expand(),e.emit("node-expand",t.node.data,t.node,f)))},C=(O,k)=>{t.node.setChecked(k.target.checked,!a.props.checkStrictly),Ye(()=>{const M=a.store.value;a.ctx.emit("check",t.node.data,{checkedNodes:M.getCheckedNodes(),checkedKeys:M.getCheckedKeys(),halfCheckedNodes:M.getHalfCheckedNodes(),halfCheckedKeys:M.getHalfCheckedKeys()})})};return{ns:n,node$:c,tree:a,expanded:s,childNodeRendered:o,oldChecked:i,oldIndeterminate:l,getNodeKey:p,getNodeClass:h,handleSelectChange:g,handleClick:y,handleContextMenu:m,handleExpandIconClick:b,handleCheckChange:C,handleChildNodeExpand:(O,k,M)=>{r(k),a.ctx.emit("node-expand",O,k,M)},handleDragStart:O=>{a.props.draggable&&u.treeNodeDragStart({event:O,treeNode:t})},handleDragOver:O=>{O.preventDefault(),a.props.draggable&&u.treeNodeDragOver({event:O,treeNode:{$el:c.value,node:t.node}})},handleDrop:O=>{O.preventDefault()},handleDragEnd:O=>{a.props.draggable&&u.treeNodeDragEnd(O)},CaretRight:yL}}}),ATe=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],WTe=["aria-expanded"];function ITe(t,e,n,r,a,s){const o=et("el-icon"),i=et("el-checkbox"),l=et("loading"),c=et("node-content"),u=et("el-tree-node"),f=et("el-collapse-transition");return rt((V(),z("div",{ref:"node$",class:U([t.ns.b("node"),t.ns.is("expanded",t.expanded),t.ns.is("current",t.node.isCurrent),t.ns.is("hidden",!t.node.visible),t.ns.is("focusable",!t.node.disabled),t.ns.is("checked",!t.node.disabled&&t.node.checked),t.getNodeClass(t.node)]),role:"treeitem",tabindex:"-1","aria-expanded":t.expanded,"aria-disabled":t.node.disabled,"aria-checked":t.node.checked,draggable:t.tree.props.draggable,"data-key":t.getNodeKey(t.node),onClick:e[1]||(e[1]=Ze((...d)=>t.handleClick&&t.handleClick(...d),["stop"])),onContextmenu:e[2]||(e[2]=(...d)=>t.handleContextMenu&&t.handleContextMenu(...d)),onDragstart:e[3]||(e[3]=Ze((...d)=>t.handleDragStart&&t.handleDragStart(...d),["stop"])),onDragover:e[4]||(e[4]=Ze((...d)=>t.handleDragOver&&t.handleDragOver(...d),["stop"])),onDragend:e[5]||(e[5]=Ze((...d)=>t.handleDragEnd&&t.handleDragEnd(...d),["stop"])),onDrop:e[6]||(e[6]=Ze((...d)=>t.handleDrop&&t.handleDrop(...d),["stop"]))},[H("div",{class:U(t.ns.be("node","content")),style:Pe({paddingLeft:(t.node.level-1)*t.tree.props.indent+"px"})},[t.tree.props.icon||t.CaretRight?(V(),ae(o,{key:0,class:U([t.ns.be("node","expand-icon"),t.ns.is("leaf",t.node.isLeaf),{expanded:!t.node.isLeaf&&t.expanded}]),onClick:Ze(t.handleExpandIconClick,["stop"])},{default:Z(()=>[(V(),ae(dt(t.tree.props.icon||t.CaretRight)))]),_:1},8,["class","onClick"])):ee("v-if",!0),t.showCheckbox?(V(),ae(i,{key:1,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:!!t.node.disabled,onClick:e[0]||(e[0]=Ze(()=>{},["stop"])),onChange:t.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):ee("v-if",!0),t.node.loading?(V(),ae(o,{key:2,class:U([t.ns.be("node","loading-icon"),t.ns.is("loading")])},{default:Z(()=>[j(l)]),_:1},8,["class"])):ee("v-if",!0),j(c,{node:t.node,"render-content":t.renderContent},null,8,["node","render-content"])],6),j(f,null,{default:Z(()=>[!t.renderAfterExpand||t.childNodeRendered?rt((V(),z("div",{key:0,class:U(t.ns.be("node","children")),role:"group","aria-expanded":t.expanded},[(V(!0),z(Ue,null,gt(t.node.childNodes,d=>(V(),ae(u,{key:t.getNodeKey(d),"render-content":t.renderContent,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,node:d,accordion:t.accordion,props:t.props,onNodeExpand:t.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,WTe)),[[Rt,t.expanded]]):ee("v-if",!0)]),_:1})],42,ATe)),[[Rt,t.node.visible]])}var PTe=Ve(UTe,[["render",ITe],["__file","tree-node.vue"]]);function GTe({el$:t},e){const n=Ce("tree"),r=on([]),a=on([]);at(()=>{o()}),mo(()=>{r.value=Array.from(t.value.querySelectorAll("[role=treeitem]")),a.value=Array.from(t.value.querySelectorAll("input[type=checkbox]"))}),pe(a,i=>{i.forEach(l=>{l.setAttribute("tabindex","-1")})}),vn(t,"keydown",i=>{const l=i.target;if(!l.className.includes(n.b("node")))return;const c=i.code;r.value=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`));const u=r.value.indexOf(l);let f;if([He.up,He.down].includes(c)){if(i.preventDefault(),c===He.up){f=u===-1?0:u!==0?u-1:r.value.length-1;const p=f;for(;!e.value.getNode(r.value[f].dataset.key).canFocus;){if(f--,f===p){f=-1;break}f<0&&(f=r.value.length-1)}}else{f=u===-1?0:u<r.value.length-1?u+1:0;const p=f;for(;!e.value.getNode(r.value[f].dataset.key).canFocus;){if(f++,f===p){f=-1;break}f>=r.value.length&&(f=0)}}f!==-1&&r.value[f].focus()}[He.left,He.right].includes(c)&&(i.preventDefault(),l.click());const d=l.querySelector('[type="checkbox"]');[He.enter,He.space].includes(c)&&d&&(i.preventDefault(),d.click())});const o=()=>{var i;r.value=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`)),a.value=Array.from(t.value.querySelectorAll("input[type=checkbox]"));const l=t.value.querySelectorAll(`.${n.is("checked")}[role=treeitem]`);if(l.length){l[0].setAttribute("tabindex","0");return}(i=r.value[0])==null||i.setAttribute("tabindex","0")}}const zTe=q({name:"ElTree",components:{ElTreeNode:PTe},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:Zt}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(t,e){const{t:n}=Mt(),r=Ce("tree"),a=P(new NTe({key:t.nodeKey,data:t.data,lazy:t.lazy,props:t.props,load:t.load,currentNodeKey:t.currentNodeKey,checkStrictly:t.checkStrictly,checkDescendants:t.checkDescendants,defaultCheckedKeys:t.defaultCheckedKeys,defaultExpandedKeys:t.defaultExpandedKeys,autoExpandParent:t.autoExpandParent,defaultExpandAll:t.defaultExpandAll,filterNodeMethod:t.filterNodeMethod}));a.value.initialize();const s=P(a.value.root),o=P(null),i=P(null),l=P(null),{broadcastExpanded:c}=JB(t),{dragState:u}=$Te({props:t,ctx:e,el$:i,dropIndicator$:l,store:a});GTe({el$:i},a);const f=R(()=>{const{childNodes:N}=s.value;return!N||N.length===0||N.every(({visible:W})=>!W)});pe(()=>t.currentNodeKey,N=>{a.value.setCurrentNodeKey(N)}),pe(()=>t.defaultCheckedKeys,N=>{a.value.setDefaultCheckedKey(N)}),pe(()=>t.defaultExpandedKeys,N=>{a.value.setDefaultExpandedKeys(N)}),pe(()=>t.data,N=>{a.value.setData(N)},{deep:!0}),pe(()=>t.checkStrictly,N=>{a.value.checkStrictly=N});const d=N=>{if(!t.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");a.value.filter(N)},p=N=>Rb(t.nodeKey,N.data),h=N=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const W=a.value.getNode(N);if(!W)return[];const _=[W.data];let L=W.parent;for(;L&&L!==s.value;)_.push(L.data),L=L.parent;return _.reverse()},g=(N,W)=>a.value.getCheckedNodes(N,W),y=N=>a.value.getCheckedKeys(N),m=()=>{const N=a.value.getCurrentNode();return N?N.data:null},b=()=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const N=m();return N?N[t.nodeKey]:null},C=(N,W)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");a.value.setCheckedNodes(N,W)},S=(N,W)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");a.value.setCheckedKeys(N,W)},T=(N,W,_)=>{a.value.setChecked(N,W,_)},w=()=>a.value.getHalfCheckedNodes(),x=()=>a.value.getHalfCheckedKeys(),E=(N,W=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");d1(a,e.emit,()=>a.value.setUserCurrentNode(N,W))},O=(N,W=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");d1(a,e.emit,()=>a.value.setCurrentNodeKey(N,W))},k=N=>a.value.getNode(N),M=N=>{a.value.remove(N)},D=(N,W)=>{a.value.append(N,W)},I=(N,W)=>{a.value.insertBefore(N,W)},B=(N,W)=>{a.value.insertAfter(N,W)},F=(N,W,_)=>{c(W),e.emit("node-expand",N,W,_)},$=(N,W)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");a.value.updateChildren(N,W)};return bt("RootTree",{ctx:e,props:t,store:a,root:s,currentNode:o,instance:ot()}),bt(Ds,void 0),{ns:r,store:a,root:s,currentNode:o,dragState:u,el$:i,dropIndicator$:l,isEmpty:f,filter:d,getNodeKey:p,getNodePath:h,getCheckedNodes:g,getCheckedKeys:y,getCurrentNode:m,getCurrentKey:b,setCheckedNodes:C,setCheckedKeys:S,setChecked:T,getHalfCheckedNodes:w,getHalfCheckedKeys:x,setCurrentNode:E,setCurrentKey:O,t:n,getNode:k,remove:M,append:D,insertBefore:I,insertAfter:B,handleNodeExpand:F,updateKeyChildren:$}}});function HTe(t,e,n,r,a,s){const o=et("el-tree-node");return V(),z("div",{ref:"el$",class:U([t.ns.b(),t.ns.is("dragging",!!t.dragState.draggingNode),t.ns.is("drop-not-allow",!t.dragState.allowDrop),t.ns.is("drop-inner",t.dragState.dropType==="inner"),{[t.ns.m("highlight-current")]:t.highlightCurrent}]),role:"tree"},[(V(!0),z(Ue,null,gt(t.root.childNodes,i=>(V(),ae(o,{key:t.getNodeKey(i),node:i,props:t.props,accordion:t.accordion,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,"render-content":t.renderContent,onNodeExpand:t.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),t.isEmpty?(V(),z("div",{key:0,class:U(t.ns.e("empty-block"))},[ce(t.$slots,"empty",{},()=>{var i;return[H("span",{class:U(t.ns.e("empty-text"))},Te((i=t.emptyText)!=null?i:t.t("el.tree.emptyText")),3)]})],2)):ee("v-if",!0),rt(H("div",{ref:"dropIndicator$",class:U(t.ns.e("drop-indicator"))},null,2),[[Rt,t.dragState.showDropIndicator]])],2)}var _g=Ve(zTe,[["render",HTe],["__file","tree.vue"]]);_g.install=t=>{t.component(_g.name,_g)};const Ah=_g,KTe=Ah,jTe=(t,{attrs:e,emit:n},{tree:r,key:a})=>{const s=Ce("tree-select"),o={...Js(hr(t),Object.keys(Ol.props)),...e,"onUpdate:modelValue":i=>n(ut,i),valueKey:a,popperClass:R(()=>{const i=[s.e("popper")];return t.popperClass&&i.push(t.popperClass),i.join(" ")}),filterMethod:(i="")=>{t.filterMethod&&t.filterMethod(i),Ye(()=>{var l;(l=r.value)==null||l.filter(i)})},onVisibleChange:i=>{var l;(l=e.onVisibleChange)==null||l.call(e,i),t.filterable&&i&&o.filterMethod()}};return o},YTe=q({extends:Vh,setup(t,e){const n=Vh.setup(t,e);delete n.selectOptionClick;const r=ot().proxy;return Ye(()=>{n.select.states.cachedOptions.get(r.value)||n.select.onOptionCreate(r)}),n},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function h1(t){return t||t===0}function _b(t){return Array.isArray(t)&&t.length}function Du(t){return Array.isArray(t)?t:h1(t)?[t]:[]}function Vg(t,e,n,r,a){for(let s=0;s<t.length;s++){const o=t[s];if(e(o,s,t,a))return r?r(o,s,t,a):o;{const i=n(o);if(_b(i)){const l=Vg(i,e,n,r,o);if(l)return l}}}}function eF(t,e,n,r){for(let a=0;a<t.length;a++){const s=t[a];e(s,a,t,r);const o=n(s);_b(o)&&eF(o,e,n,s)}}const qTe=(t,{attrs:e,slots:n,emit:r},{select:a,tree:s,key:o})=>{pe(()=>t.modelValue,()=>{t.showCheckbox&&Ye(()=>{const d=s.value;d&&!Or(d.getCheckedKeys(),Du(t.modelValue))&&d.setCheckedKeys(Du(t.modelValue))})},{immediate:!0,deep:!0});const i=R(()=>({value:o.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...t.props})),l=(d,p)=>{var h;const g=i.value[d];return Je(g)?g(p,(h=s.value)==null?void 0:h.getNode(l("value",p))):p[g]},c=Du(t.modelValue).map(d=>Vg(t.data||[],p=>l("value",p)===d,p=>l("children",p),(p,h,g,y)=>y&&l("value",y))).filter(d=>h1(d)),u=R(()=>{if(!t.renderAfterExpand&&!t.lazy)return[];const d=[];return eF(t.data.concat(t.cacheData),p=>{const h=l("value",p);d.push({value:h,currentLabel:l("label",p),isDisabled:l("disabled",p)})},p=>l("children",p)),d}),f=R(()=>u.value.reduce((d,p)=>({...d,[p.value]:p}),{}));return{...Js(hr(t),Object.keys(Ah.props)),...e,nodeKey:o,expandOnClickNode:R(()=>!t.checkStrictly&&t.expandOnClickNode),defaultExpandedKeys:R(()=>t.defaultExpandedKeys?t.defaultExpandedKeys.concat(c):c),renderContent:(d,{node:p,data:h,store:g})=>d(YTe,{value:l("value",h),label:l("label",h),disabled:l("disabled",h)},t.renderContent?()=>t.renderContent(d,{node:p,data:h,store:g}):n.default?()=>n.default({node:p,data:h,store:g}):void 0),filterNodeMethod:(d,p,h)=>t.filterNodeMethod?t.filterNodeMethod(d,p,h):d?new RegExp(yS(d),"i").test(l("label",p)||""):!0,onNodeClick:(d,p,h)=>{var g,y,m,b;if((g=e.onNodeClick)==null||g.call(e,d,p,h),!(t.showCheckbox&&t.checkOnClickNode)){if(!t.showCheckbox&&(t.checkStrictly||p.isLeaf)){if(!l("disabled",d)){const C=(y=a.value)==null?void 0:y.states.options.get(l("value",d));(m=a.value)==null||m.handleOptionSelect(C)}}else t.expandOnClickNode&&h.proxy.handleExpandIconClick();(b=a.value)==null||b.focus()}},onCheck:(d,p)=>{var h;if(!t.showCheckbox)return;const g=l("value",d),y=p.checkedKeys,m=t.multiple?Du(t.modelValue).filter(C=>C in f.value&&!s.value.getNode(C)&&!y.includes(C)):[],b=y.concat(m);if(t.checkStrictly)r(ut,t.multiple?b:b.includes(g)?g:void 0);else if(t.multiple)r(ut,s.value.getCheckedKeys(!0));else{const C=Vg([d],w=>!_b(l("children",w))&&!l("disabled",w),w=>l("children",w)),S=C?l("value",C):void 0,T=h1(t.modelValue)&&!!Vg([d],w=>l("value",w)===t.modelValue,w=>l("children",w));r(ut,S===t.modelValue||T?void 0:S)}Ye(()=>{var C;const S=Du(t.modelValue);s.value.setCheckedKeys(S),(C=e.onCheck)==null||C.call(e,d,{checkedKeys:s.value.getCheckedKeys(),checkedNodes:s.value.getCheckedNodes(),halfCheckedKeys:s.value.getHalfCheckedKeys(),halfCheckedNodes:s.value.getHalfCheckedNodes()})}),(h=a.value)==null||h.focus()},cacheOptions:u}};var XTe=q({props:{data:{type:Array,default:()=>[]}},setup(t){const e=We(Od);return pe(()=>t.data,()=>{var n;t.data.forEach(a=>{e.states.cachedOptions.has(a.value)||e.states.cachedOptions.set(a.value,a)});const r=((n=e.selectRef)==null?void 0:n.querySelectorAll("input"))||[];Array.from(r).includes(document.activeElement)||e.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const ZTe=q({name:"ElTreeSelect",inheritAttrs:!1,props:{...Ol.props,...Ah.props,cacheData:{type:Array,default:()=>[]}},setup(t,e){const{slots:n,expose:r}=e,a=P(),s=P(),o=R(()=>t.nodeKey||t.valueKey||"value"),i=jTe(t,e,{select:a,tree:s,key:o}),{cacheOptions:l,...c}=qTe(t,e,{select:a,tree:s,key:o}),u=Dt({});return r(u),at(()=>{Object.assign(u,{...Js(s.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...Js(a.value,["focus","blur"])})}),()=>je(Ol,Dt({...i,ref:f=>a.value=f}),{...n,default:()=>[je(XTe,{data:l.value}),je(Ah,Dt({...c,ref:f=>s.value=f}))]})}});var Dg=Ve(ZTe,[["__file","tree-select.vue"]]);Dg.install=t=>{t.component(Dg.name,Dg)};const JTe=Dg,QTe=JTe,Vb=Symbol(),e2e={key:-1,level:-1,data:{}};var Yu=(t=>(t.KEY="id",t.LABEL="label",t.CHILDREN="children",t.DISABLED="disabled",t))(Yu||{}),v1=(t=>(t.ADD="add",t.DELETE="delete",t))(v1||{});const tF={type:Number,default:26},t2e=Re({data:{type:Q(Array),default:()=>mn([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:Q(Object),default:()=>mn({children:"children",label:"label",disabled:"disabled",value:"id"})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:Q(Array),default:()=>mn([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:Q(Array),default:()=>mn([])},indent:{type:Number,default:16},itemSize:tF,icon:{type:Zt},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:Q([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:Q(Function)},perfMode:{type:Boolean,default:!0}}),n2e=Re({node:{type:Q(Object),default:()=>mn(e2e)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1},itemSize:tF}),r2e=Re({node:{type:Q(Object),required:!0}}),nF="node-click",rF="node-expand",aF="node-collapse",sF="current-change",oF="check",iF="check-change",lF="node-contextmenu",a2e={[nF]:(t,e,n)=>t&&e&&n,[rF]:(t,e)=>t&&e,[aF]:(t,e)=>t&&e,[sF]:(t,e)=>t&&e,[oF]:(t,e)=>t&&e,[iF]:(t,e)=>t&&typeof e=="boolean",[lF]:(t,e,n)=>t&&e&&n},s2e={click:(t,e)=>!!(t&&e),toggle:t=>!!t,check:(t,e)=>t&&typeof e=="boolean"};function o2e(t,e){const n=P(new Set),r=P(new Set),{emit:a}=ot();pe([()=>e.value,()=>t.defaultCheckedKeys],()=>Ye(()=>{b(t.defaultCheckedKeys)}),{immediate:!0});const s=()=>{if(!e.value||!t.showCheckbox||t.checkStrictly)return;const{levelTreeNodeMap:C,maxLevel:S}=e.value,T=n.value,w=new Set;for(let x=S-1;x>=1;--x){const E=C.get(x);E&&E.forEach(O=>{const k=O.children;if(k){let M=!0,D=!1;for(const I of k){const B=I.key;if(T.has(B))D=!0;else if(w.has(B)){M=!1,D=!0;break}else M=!1}M?T.add(O.key):D?(w.add(O.key),T.delete(O.key)):(T.delete(O.key),w.delete(O.key))}})}r.value=w},o=C=>n.value.has(C.key),i=C=>r.value.has(C.key),l=(C,S,T=!0)=>{const w=n.value,x=(E,O)=>{w[O?v1.ADD:v1.DELETE](E.key);const k=E.children;!t.checkStrictly&&k&&k.forEach(M=>{M.disabled||x(M,O)})};x(C,S),s(),T&&c(C,S)},c=(C,S)=>{const{checkedNodes:T,checkedKeys:w}=h(),{halfCheckedNodes:x,halfCheckedKeys:E}=g();a(oF,C.data,{checkedKeys:w,checkedNodes:T,halfCheckedKeys:E,halfCheckedNodes:x}),a(iF,C.data,S)};function u(C=!1){return h(C).checkedKeys}function f(C=!1){return h(C).checkedNodes}function d(){return g().halfCheckedKeys}function p(){return g().halfCheckedNodes}function h(C=!1){const S=[],T=[];if(e!=null&&e.value&&t.showCheckbox){const{treeNodeMap:w}=e.value;n.value.forEach(x=>{const E=w.get(x);E&&(!C||C&&E.isLeaf)&&(T.push(x),S.push(E.data))})}return{checkedKeys:T,checkedNodes:S}}function g(){const C=[],S=[];if(e!=null&&e.value&&t.showCheckbox){const{treeNodeMap:T}=e.value;r.value.forEach(w=>{const x=T.get(w);x&&(S.push(w),C.push(x.data))})}return{halfCheckedNodes:C,halfCheckedKeys:S}}function y(C){n.value.clear(),r.value.clear(),b(C)}function m(C,S){if(e!=null&&e.value&&t.showCheckbox){const T=e.value.treeNodeMap.get(C);T&&l(T,S,!1)}}function b(C){if(e!=null&&e.value){const{treeNodeMap:S}=e.value;if(t.showCheckbox&&S&&C)for(const T of C){const w=S.get(T);w&&!o(w)&&l(w,!0,!1)}}}return{updateCheckedKeys:s,toggleCheckbox:l,isChecked:o,isIndeterminate:i,getCheckedKeys:u,getCheckedNodes:f,getHalfCheckedKeys:d,getHalfCheckedNodes:p,setChecked:m,setCheckedKeys:y}}function i2e(t,e){const n=P(new Set([])),r=P(new Set([])),a=R(()=>Je(t.filterMethod));function s(i){var l;if(!a.value)return;const c=new Set,u=r.value,f=n.value,d=[],p=((l=e.value)==null?void 0:l.treeNodes)||[],h=t.filterMethod;f.clear();function g(y){y.forEach(m=>{d.push(m),h!=null&&h(i,m.data)?d.forEach(C=>{c.add(C.key)}):m.isLeaf&&f.add(m.key);const b=m.children;if(b&&g(b),!m.isLeaf){if(!c.has(m.key))f.add(m.key);else if(b){let C=!0;for(const S of b)if(!f.has(S.key)){C=!1;break}C?u.add(m.key):u.delete(m.key)}}d.pop()})}return g(p),c}function o(i){return r.value.has(i.key)}return{hiddenExpandIconKeySet:r,hiddenNodeKeySet:n,doFilter:s,isForceHiddenExpandIcon:o}}function l2e(t,e){const n=P(new Set(t.defaultExpandedKeys)),r=P(),a=on();pe(()=>t.currentNodeKey,re=>{r.value=re},{immediate:!0}),pe(()=>t.data,re=>{se(re)},{immediate:!0});const{isIndeterminate:s,isChecked:o,toggleCheckbox:i,getCheckedKeys:l,getCheckedNodes:c,getHalfCheckedKeys:u,getHalfCheckedNodes:f,setChecked:d,setCheckedKeys:p}=o2e(t,a),{doFilter:h,hiddenNodeKeySet:g,isForceHiddenExpandIcon:y}=i2e(t,a),m=R(()=>{var re;return((re=t.props)==null?void 0:re.value)||Yu.KEY}),b=R(()=>{var re;return((re=t.props)==null?void 0:re.children)||Yu.CHILDREN}),C=R(()=>{var re;return((re=t.props)==null?void 0:re.disabled)||Yu.DISABLED}),S=R(()=>{var re;return((re=t.props)==null?void 0:re.label)||Yu.LABEL}),T=R(()=>{const re=n.value,be=g.value,ge=[],Se=a.value&&a.value.treeNodes||[];function De(){const X=[];for(let ne=Se.length-1;ne>=0;--ne)X.push(Se[ne]);for(;X.length;){const ne=X.pop();if(ne&&(be.has(ne.key)||ge.push(ne),re.has(ne.key))){const me=ne.children;if(me){const Ee=me.length;for(let de=Ee-1;de>=0;--de)X.push(me[de])}}}}return De(),ge}),w=R(()=>T.value.length>0);function x(re){const be=new Map,ge=new Map;let Se=1;function De(ne,me=1,Ee=void 0){var de;const xe=[];for(const ke of ne){const ye=k(ke),_e={level:me,key:ye,data:ke};_e.label=D(ke),_e.parent=Ee;const Oe=O(ke);_e.disabled=M(ke),_e.isLeaf=!Oe||Oe.length===0,Oe&&Oe.length&&(_e.children=De(Oe,me+1,_e)),xe.push(_e),be.set(ye,_e),ge.has(me)||ge.set(me,[]),(de=ge.get(me))==null||de.push(_e)}return me>Se&&(Se=me),xe}const X=De(re);return{treeNodeMap:be,levelTreeNodeMap:ge,maxLevel:Se,treeNodes:X}}function E(re){const be=h(re);be&&(n.value=be)}function O(re){return re[b.value]}function k(re){return re?re[m.value]:""}function M(re){return re[C.value]}function D(re){return re[S.value]}function I(re){n.value.has(re.key)?_(re):W(re)}function B(re){n.value=new Set(re)}function F(re,be){e(nF,re.data,re,be),$(re),t.expandOnClickNode&&I(re),t.showCheckbox&&t.checkOnClickNode&&!re.disabled&&i(re,!o(re),!0)}function $(re){K(re)||(r.value=re.key,e(sF,re.data,re))}function N(re,be){i(re,be)}function W(re){const be=n.value;if(a.value&&t.accordion){const{treeNodeMap:ge}=a.value;be.forEach(Se=>{const De=ge.get(Se);re&&re.level===(De==null?void 0:De.level)&&be.delete(Se)})}be.add(re.key),e(rF,re.data,re)}function _(re){n.value.delete(re.key),e(aF,re.data,re)}function L(re){return n.value.has(re.key)}function G(re){return!!re.disabled}function K(re){const be=r.value;return be!==void 0&&be===re.key}function Y(){var re,be;if(r.value)return(be=(re=a.value)==null?void 0:re.treeNodeMap.get(r.value))==null?void 0:be.data}function te(){return r.value}function ve(re){r.value=re}function se(re){Ye(()=>a.value=x(re))}function ie(re){var be;const ge=pt(re)?k(re):re;return(be=a.value)==null?void 0:be.treeNodeMap.get(ge)}return{tree:a,flattenTree:T,isNotEmpty:w,getKey:k,getChildren:O,toggleExpand:I,toggleCheckbox:i,isExpanded:L,isChecked:o,isIndeterminate:s,isDisabled:G,isCurrent:K,isForceHiddenExpandIcon:y,handleNodeClick:F,handleNodeCheck:N,getCurrentNode:Y,getCurrentKey:te,setCurrentKey:ve,getCheckedKeys:l,getCheckedNodes:c,getHalfCheckedKeys:u,getHalfCheckedNodes:f,setChecked:d,setCheckedKeys:p,filter:E,setData:se,getNode:ie,expandNode:W,collapseNode:_,setExpandedKeys:B}}var c2e=q({name:"ElTreeNodeContent",props:r2e,setup(t){const e=We(Vb),n=Ce("tree");return()=>{const r=t.node,{data:a}=r;return e!=null&&e.ctx.slots.default?e.ctx.slots.default({node:r,data:a}):je("span",{class:n.be("node","label")},[r==null?void 0:r.label])}}});const u2e=["aria-expanded","aria-disabled","aria-checked","data-key","onClick"],f2e=q({name:"ElTreeNode"}),d2e=q({...f2e,props:n2e,emits:s2e,setup(t,{emit:e}){const n=t,r=We(Vb),a=Ce("tree"),s=R(()=>{var f;return(f=r==null?void 0:r.props.indent)!=null?f:16}),o=R(()=>{var f;return(f=r==null?void 0:r.props.icon)!=null?f:yL}),i=f=>{e("click",n.node,f)},l=()=>{e("toggle",n.node)},c=f=>{e("check",n.node,f)},u=f=>{var d,p,h,g;(h=(p=(d=r==null?void 0:r.instance)==null?void 0:d.vnode)==null?void 0:p.props)!=null&&h.onNodeContextmenu&&(f.stopPropagation(),f.preventDefault()),r==null||r.ctx.emit(lF,f,(g=n.node)==null?void 0:g.data,n.node)};return(f,d)=>{var p,h,g;return V(),z("div",{ref:"node$",class:U([v(a).b("node"),v(a).is("expanded",f.expanded),v(a).is("current",f.current),v(a).is("focusable",!f.disabled),v(a).is("checked",!f.disabled&&f.checked)]),role:"treeitem",tabindex:"-1","aria-expanded":f.expanded,"aria-disabled":f.disabled,"aria-checked":f.checked,"data-key":(p=f.node)==null?void 0:p.key,onClick:Ze(i,["stop"]),onContextmenu:u},[H("div",{class:U(v(a).be("node","content")),style:Pe({paddingLeft:`${(f.node.level-1)*v(s)}px`,height:f.itemSize+"px"})},[v(o)?(V(),ae(v(Ge),{key:0,class:U([v(a).is("leaf",!!((h=f.node)!=null&&h.isLeaf)),v(a).is("hidden",f.hiddenExpandIcon),{expanded:!((g=f.node)!=null&&g.isLeaf)&&f.expanded},v(a).be("node","expand-icon")]),onClick:Ze(l,["stop"])},{default:Z(()=>[(V(),ae(dt(v(o))))]),_:1},8,["class","onClick"])):ee("v-if",!0),f.showCheckbox?(V(),ae(v(Na),{key:1,"model-value":f.checked,indeterminate:f.indeterminate,disabled:f.disabled,onChange:c,onClick:d[0]||(d[0]=Ze(()=>{},["stop"]))},null,8,["model-value","indeterminate","disabled"])):ee("v-if",!0),j(v(c2e),{node:f.node},null,8,["node"])],6)],42,u2e)}}});var p2e=Ve(d2e,[["__file","tree-node.vue"]]);const g2e=q({name:"ElTreeV2"}),h2e=q({...g2e,props:t2e,emits:a2e,setup(t,{expose:e,emit:n}){const r=t,a=rr(),s=R(()=>r.itemSize);bt(Vb,{ctx:{emit:n,slots:a},props:r,instance:ot()}),bt(Ds,void 0);const{t:o}=Mt(),i=Ce("tree"),{flattenTree:l,isNotEmpty:c,toggleExpand:u,isExpanded:f,isIndeterminate:d,isChecked:p,isDisabled:h,isCurrent:g,isForceHiddenExpandIcon:y,handleNodeClick:m,handleNodeCheck:b,toggleCheckbox:C,getCurrentNode:S,getCurrentKey:T,setCurrentKey:w,getCheckedKeys:x,getCheckedNodes:E,getHalfCheckedKeys:O,getHalfCheckedNodes:k,setChecked:M,setCheckedKeys:D,filter:I,setData:B,getNode:F,expandNode:$,collapseNode:N,setExpandedKeys:W}=l2e(r,n);return e({toggleCheckbox:C,getCurrentNode:S,getCurrentKey:T,setCurrentKey:w,getCheckedKeys:x,getCheckedNodes:E,getHalfCheckedKeys:O,getHalfCheckedNodes:k,setChecked:M,setCheckedKeys:D,filter:I,setData:B,getNode:F,expandNode:$,collapseNode:N,setExpandedKeys:W}),(_,L)=>{var G;return V(),z("div",{class:U([v(i).b(),{[v(i).m("highlight-current")]:_.highlightCurrent}]),role:"tree"},[v(c)?(V(),ae(v(pB),{key:0,"class-name":v(i).b("virtual-list"),data:v(l),total:v(l).length,height:_.height,"item-size":v(s),"perf-mode":_.perfMode},{default:Z(({data:K,index:Y,style:te})=>[(V(),ae(p2e,{key:K[Y].key,style:Pe(te),node:K[Y],expanded:v(f)(K[Y]),"show-checkbox":_.showCheckbox,checked:v(p)(K[Y]),indeterminate:v(d)(K[Y]),"item-size":v(s),disabled:v(h)(K[Y]),current:v(g)(K[Y]),"hidden-expand-icon":v(y)(K[Y]),onClick:v(m),onToggle:v(u),onCheck:v(b)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):(V(),z("div",{key:1,class:U(v(i).e("empty-block"))},[H("span",{class:U(v(i).e("empty-text"))},Te((G=_.emptyText)!=null?G:v(o)("el.tree.emptyText")),3)],2))],2)}}});var v2e=Ve(h2e,[["__file","tree.vue"]]);const y2e=lt(v2e),cF=Symbol("uploadContextKey"),m2e="ElUpload";class C2e extends Error{constructor(e,n,r,a){super(e),this.name="UploadAjaxError",this.status=n,this.method=r,this.url=a}}function KE(t,e,n){let r;return n.response?r=`${n.response.error||n.response}`:n.responseText?r=`${n.responseText}`:r=`fail to ${e.method} ${t} ${n.status}`,new C2e(r,n.status,e.method,t)}function S2e(t){const e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}const b2e=t=>{typeof XMLHttpRequest>"u"&&Yn(m2e,"XMLHttpRequest is undefined");const e=new XMLHttpRequest,n=t.action;e.upload&&e.upload.addEventListener("progress",s=>{const o=s;o.percent=s.total>0?s.loaded/s.total*100:0,t.onProgress(o)});const r=new FormData;if(t.data)for(const[s,o]of Object.entries(t.data))Be(o)&&o.length?r.append(s,...o):r.append(s,o);r.append(t.filename,t.file,t.file.name),e.addEventListener("error",()=>{t.onError(KE(n,t,e))}),e.addEventListener("load",()=>{if(e.status<200||e.status>=300)return t.onError(KE(n,t,e));t.onSuccess(S2e(e))}),e.open(t.method,n,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);const a=t.headers||{};if(a instanceof Headers)a.forEach((s,o)=>e.setRequestHeader(o,s));else for(const[s,o]of Object.entries(a))er(o)||e.setRequestHeader(s,String(o));return e.send(r),e},uF=["text","picture","picture-card"];let w2e=1;const y1=()=>Date.now()+w2e++,fF=Re({action:{type:String,default:"#"},headers:{type:Q(Object)},method:{type:String,default:"post"},data:{type:Q([Object,Function,Promise]),default:()=>mn({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:Q(Array),default:()=>mn([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:uF,default:"text"},httpRequest:{type:Q(Function),default:b2e},disabled:Boolean,limit:Number}),T2e=Re({...fF,beforeUpload:{type:Q(Function),default:zt},beforeRemove:{type:Q(Function)},onRemove:{type:Q(Function),default:zt},onChange:{type:Q(Function),default:zt},onPreview:{type:Q(Function),default:zt},onSuccess:{type:Q(Function),default:zt},onProgress:{type:Q(Function),default:zt},onError:{type:Q(Function),default:zt},onExceed:{type:Q(Function),default:zt},crossorigin:{type:Q(String)}}),x2e=Re({files:{type:Q(Array),default:()=>mn([])},disabled:{type:Boolean,default:!1},handlePreview:{type:Q(Function),default:zt},listType:{type:String,values:uF,default:"text"},crossorigin:{type:Q(String)}}),E2e={remove:t=>!!t},k2e=["onKeydown"],O2e=["src","crossorigin"],M2e=["onClick"],R2e=["title"],_2e=["onClick"],V2e=["onClick"],D2e=q({name:"ElUploadList"}),L2e=q({...D2e,props:x2e,emits:E2e,setup(t,{emit:e}){const n=t,{t:r}=Mt(),a=Ce("upload"),s=Ce("icon"),o=Ce("list"),i=na(),l=P(!1),c=R(()=>[a.b("list"),a.bm("list",n.listType),a.is("disabled",n.disabled)]),u=f=>{e("remove",f)};return(f,d)=>(V(),ae(gD,{tag:"ul",class:U(v(c)),name:v(o).b()},{default:Z(()=>[(V(!0),z(Ue,null,gt(f.files,p=>(V(),z("li",{key:p.uid||p.name,class:U([v(a).be("list","item"),v(a).is(p.status),{focusing:l.value}]),tabindex:"0",onKeydown:Xt(h=>!v(i)&&u(p),["delete"]),onFocus:d[0]||(d[0]=h=>l.value=!0),onBlur:d[1]||(d[1]=h=>l.value=!1),onClick:d[2]||(d[2]=h=>l.value=!1)},[ce(f.$slots,"default",{file:p},()=>[f.listType==="picture"||p.status!=="uploading"&&f.listType==="picture-card"?(V(),z("img",{key:0,class:U(v(a).be("list","item-thumbnail")),src:p.url,crossorigin:f.crossorigin,alt:""},null,10,O2e)):ee("v-if",!0),p.status==="uploading"||f.listType!=="picture-card"?(V(),z("div",{key:1,class:U(v(a).be("list","item-info"))},[H("a",{class:U(v(a).be("list","item-name")),onClick:Ze(h=>f.handlePreview(p),["prevent"])},[j(v(Ge),{class:U(v(s).m("document"))},{default:Z(()=>[j(v(jne))]),_:1},8,["class"]),H("span",{class:U(v(a).be("list","item-file-name")),title:p.name},Te(p.name),11,R2e)],10,M2e),p.status==="uploading"?(V(),ae(v(aB),{key:0,type:f.listType==="picture-card"?"circle":"line","stroke-width":f.listType==="picture-card"?6:2,percentage:Number(p.percentage),style:Pe(f.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):ee("v-if",!0)],2)):ee("v-if",!0),H("label",{class:U(v(a).be("list","item-status-label"))},[f.listType==="text"?(V(),ae(v(Ge),{key:0,class:U([v(s).m("upload-success"),v(s).m("circle-check")])},{default:Z(()=>[j(v(SS))]),_:1},8,["class"])):["picture-card","picture"].includes(f.listType)?(V(),ae(v(Ge),{key:1,class:U([v(s).m("upload-success"),v(s).m("check")])},{default:Z(()=>[j(v(Cd))]),_:1},8,["class"])):ee("v-if",!0)],2),v(i)?ee("v-if",!0):(V(),ae(v(Ge),{key:2,class:U(v(s).m("close")),onClick:h=>u(p)},{default:Z(()=>[j(v(as))]),_:2},1032,["class","onClick"])),ee(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),ee(" This is a bug which needs to be fixed "),ee(" TODO: Fix the incorrect navigation interaction "),v(i)?ee("v-if",!0):(V(),z("i",{key:3,class:U(v(s).m("close-tip"))},Te(v(r)("el.upload.deleteTip")),3)),f.listType==="picture-card"?(V(),z("span",{key:4,class:U(v(a).be("list","item-actions"))},[H("span",{class:U(v(a).be("list","item-preview")),onClick:h=>f.handlePreview(p)},[j(v(Ge),{class:U(v(s).m("zoom-in"))},{default:Z(()=>[j(v(bL))]),_:1},8,["class"])],10,_2e),v(i)?ee("v-if",!0):(V(),z("span",{key:0,class:U(v(a).be("list","item-delete")),onClick:h=>u(p)},[j(v(Ge),{class:U(v(s).m("delete"))},{default:Z(()=>[j(v(Hne))]),_:1},8,["class"])],10,V2e))],2)):ee("v-if",!0)])],42,k2e))),128)),ce(f.$slots,"append")]),_:3},8,["class","name"]))}});var jE=Ve(L2e,[["__file","upload-list.vue"]]);const N2e=Re({disabled:{type:Boolean,default:!1}}),B2e={file:t=>Be(t)},F2e=["onDrop","onDragover"],dF="ElUploadDrag",$2e=q({name:dF}),U2e=q({...$2e,props:N2e,emits:B2e,setup(t,{emit:e}){const n=We(cF);n||Yn(dF,"usage: <el-upload><el-upload-dragger /></el-upload>");const r=Ce("upload"),a=P(!1),s=na(),o=l=>{if(s.value)return;a.value=!1,l.stopPropagation();const c=Array.from(l.dataTransfer.files),u=n.accept.value;if(!u){e("file",c);return}const f=c.filter(d=>{const{type:p,name:h}=d,g=h.includes(".")?`.${h.split(".").pop()}`:"",y=p.replace(/\/.*$/,"");return u.split(",").map(m=>m.trim()).filter(m=>m).some(m=>m.startsWith(".")?g===m:/\/\*$/.test(m)?y===m.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(m)?p===m:!1)});e("file",f)},i=()=>{s.value||(a.value=!0)};return(l,c)=>(V(),z("div",{class:U([v(r).b("dragger"),v(r).is("dragover",a.value)]),onDrop:Ze(o,["prevent"]),onDragover:Ze(i,["prevent"]),onDragleave:c[0]||(c[0]=Ze(u=>a.value=!1,["prevent"]))},[ce(l.$slots,"default")],42,F2e))}});var A2e=Ve(U2e,[["__file","upload-dragger.vue"]]);const W2e=Re({...fF,beforeUpload:{type:Q(Function),default:zt},onRemove:{type:Q(Function),default:zt},onStart:{type:Q(Function),default:zt},onSuccess:{type:Q(Function),default:zt},onProgress:{type:Q(Function),default:zt},onError:{type:Q(Function),default:zt},onExceed:{type:Q(Function),default:zt}}),I2e=["onKeydown"],P2e=["name","multiple","accept"],G2e=q({name:"ElUploadContent",inheritAttrs:!1}),z2e=q({...G2e,props:W2e,setup(t,{expose:e}){const n=t,r=Ce("upload"),a=na(),s=on({}),o=on(),i=g=>{if(g.length===0)return;const{autoUpload:y,limit:m,fileList:b,multiple:C,onStart:S,onExceed:T}=n;if(m&&b.length+g.length>m){T(g,b);return}C||(g=g.slice(0,1));for(const w of g){const x=w;x.uid=y1(),S(x),y&&l(x)}},l=async g=>{if(o.value.value="",!n.beforeUpload)return u(g);let y,m={};try{const C=n.data,S=n.beforeUpload(g);m=fh(n.data)?wh(n.data):n.data,y=await S,fh(n.data)&&Or(C,m)&&(m=wh(n.data))}catch{y=!1}if(y===!1){n.onRemove(g);return}let b=g;y instanceof Blob&&(y instanceof File?b=y:b=new File([y],g.name,{type:g.type})),u(Object.assign(b,{uid:g.uid}),m)},c=async(g,y)=>Je(g)?g(y):g,u=async(g,y)=>{const{headers:m,data:b,method:C,withCredentials:S,name:T,action:w,onProgress:x,onSuccess:E,onError:O,httpRequest:k}=n;try{y=await c(y??b,g)}catch{n.onRemove(g);return}const{uid:M}=g,D={headers:m||{},withCredentials:S,file:g,data:y,method:C,filename:T,action:w,onProgress:B=>{x(B,g)},onSuccess:B=>{E(B,g),delete s.value[M]},onError:B=>{O(B,g),delete s.value[M]}},I=k(D);s.value[M]=I,I instanceof Promise&&I.then(D.onSuccess,D.onError)},f=g=>{const y=g.target.files;y&&i(Array.from(y))},d=()=>{a.value||(o.value.value="",o.value.click())},p=()=>{d()};return e({abort:g=>{Sne(s.value).filter(g?([m])=>String(g.uid)===m:()=>!0).forEach(([m,b])=>{b instanceof XMLHttpRequest&&b.abort(),delete s.value[m]})},upload:l}),(g,y)=>(V(),z("div",{class:U([v(r).b(),v(r).m(g.listType),v(r).is("drag",g.drag)]),tabindex:"0",onClick:d,onKeydown:Xt(Ze(p,["self"]),["enter","space"])},[g.drag?(V(),ae(A2e,{key:0,disabled:v(a),onFile:i},{default:Z(()=>[ce(g.$slots,"default")]),_:3},8,["disabled"])):ce(g.$slots,"default",{key:1}),H("input",{ref_key:"inputRef",ref:o,class:U(v(r).e("input")),name:g.name,multiple:g.multiple,accept:g.accept,type:"file",onChange:f,onClick:y[0]||(y[0]=Ze(()=>{},["stop"]))},null,42,P2e)],42,I2e))}});var YE=Ve(z2e,[["__file","upload-content.vue"]]);const qE="ElUpload",XE=t=>{var e;(e=t.url)!=null&&e.startsWith("blob:")&&URL.revokeObjectURL(t.url)},H2e=(t,e)=>{const n=kD(t,"fileList",void 0,{passive:!0}),r=d=>n.value.find(p=>p.uid===d.uid);function a(d){var p;(p=e.value)==null||p.abort(d)}function s(d=["ready","uploading","success","fail"]){n.value=n.value.filter(p=>!d.includes(p.status))}const o=(d,p)=>{const h=r(p);h&&(console.error(d),h.status="fail",n.value.splice(n.value.indexOf(h),1),t.onError(d,h,n.value),t.onChange(h,n.value))},i=(d,p)=>{const h=r(p);h&&(t.onProgress(d,h,n.value),h.status="uploading",h.percentage=Math.round(d.percent))},l=(d,p)=>{const h=r(p);h&&(h.status="success",h.response=d,t.onSuccess(d,h,n.value),t.onChange(h,n.value))},c=d=>{er(d.uid)&&(d.uid=y1());const p={name:d.name,percentage:0,status:"ready",size:d.size,raw:d,uid:d.uid};if(t.listType==="picture-card"||t.listType==="picture")try{p.url=URL.createObjectURL(d)}catch(h){h.message,t.onError(h,p,n.value)}n.value=[...n.value,p],t.onChange(p,n.value)},u=async d=>{const p=d instanceof File?r(d):d;p||Yn(qE,"file to be removed not found");const h=g=>{a(g);const y=n.value;y.splice(y.indexOf(g),1),t.onRemove(g,y),XE(g)};t.beforeRemove?await t.beforeRemove(p,n.value)!==!1&&h(p):h(p)};function f(){n.value.filter(({status:d})=>d==="ready").forEach(({raw:d})=>{var p;return d&&((p=e.value)==null?void 0:p.upload(d))})}return pe(()=>t.listType,d=>{d!=="picture-card"&&d!=="picture"||(n.value=n.value.map(p=>{const{raw:h,url:g}=p;if(!g&&h)try{p.url=URL.createObjectURL(h)}catch(y){t.onError(y,p,n.value)}return p}))}),pe(n,d=>{for(const p of d)p.uid||(p.uid=y1()),p.status||(p.status="success")},{immediate:!0,deep:!0}),{uploadFiles:n,abort:a,clearFiles:s,handleError:o,handleProgress:i,handleStart:c,handleSuccess:l,handleRemove:u,submit:f,revokeFileObjectURL:XE}},K2e=q({name:"ElUpload"}),j2e=q({...K2e,props:T2e,setup(t,{expose:e}){const n=t,r=na(),a=on(),{abort:s,submit:o,clearFiles:i,uploadFiles:l,handleStart:c,handleError:u,handleRemove:f,handleSuccess:d,handleProgress:p,revokeFileObjectURL:h}=H2e(n,a),g=R(()=>n.listType==="picture-card"),y=R(()=>({...n,fileList:l.value,onStart:c,onProgress:p,onSuccess:d,onError:u,onRemove:f}));return ln(()=>{l.value.forEach(h)}),bt(cF,{accept:tn(n,"accept")}),e({abort:s,submit:o,clearFiles:i,handleStart:c,handleRemove:f}),(m,b)=>(V(),z("div",null,[v(g)&&m.showFileList?(V(),ae(jE,{key:0,disabled:v(r),"list-type":m.listType,files:v(l),crossorigin:m.crossorigin,"handle-preview":m.onPreview,onRemove:v(f)},lo({append:Z(()=>[j(YE,ft({ref_key:"uploadRef",ref:a},v(y)),{default:Z(()=>[m.$slots.trigger?ce(m.$slots,"trigger",{key:0}):ee("v-if",!0),!m.$slots.trigger&&m.$slots.default?ce(m.$slots,"default",{key:1}):ee("v-if",!0)]),_:3},16)]),_:2},[m.$slots.file?{name:"default",fn:Z(({file:C})=>[ce(m.$slots,"file",{file:C})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):ee("v-if",!0),!v(g)||v(g)&&!m.showFileList?(V(),ae(YE,ft({key:1,ref_key:"uploadRef",ref:a},v(y)),{default:Z(()=>[m.$slots.trigger?ce(m.$slots,"trigger",{key:0}):ee("v-if",!0),!m.$slots.trigger&&m.$slots.default?ce(m.$slots,"default",{key:1}):ee("v-if",!0)]),_:3},16)):ee("v-if",!0),m.$slots.trigger?ce(m.$slots,"default",{key:2}):ee("v-if",!0),ce(m.$slots,"tip"),!v(g)&&m.showFileList?(V(),ae(jE,{key:3,disabled:v(r),"list-type":m.listType,files:v(l),crossorigin:m.crossorigin,"handle-preview":m.onPreview,onRemove:v(f)},lo({_:2},[m.$slots.file?{name:"default",fn:Z(({file:C})=>[ce(m.$slots,"file",{file:C})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):ee("v-if",!0)]))}});var Y2e=Ve(j2e,[["__file","upload.vue"]]);const q2e=lt(Y2e),X2e=Re({zIndex:{type:Number,default:9},rotate:{type:Number,default:-22},width:Number,height:Number,image:String,content:{type:Q([String,Array]),default:"Element Plus"},font:{type:Q(Object)},gap:{type:Q(Array),default:()=>[100,100]},offset:{type:Q(Array)}});function Z2e(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function J2e(t){return Object.keys(t).map(e=>`${Z2e(e)}: ${t[e]};`).join(" ")}function Q2e(){return window.devicePixelRatio||1}const exe=(t,e)=>{let n=!1;return t.removedNodes.length&&e&&(n=Array.from(t.removedNodes).includes(e)),t.type==="attributes"&&t.target===e&&(n=!0),n},pF=3;function dy(t,e,n=1){const r=document.createElement("canvas"),a=r.getContext("2d"),s=t*n,o=e*n;return r.setAttribute("width",`${s}px`),r.setAttribute("height",`${o}px`),a.save(),[a,r,s,o]}function txe(){function t(e,n,r,a,s,o,i,l){const[c,u,f,d]=dy(a,s,r);if(e instanceof HTMLImageElement)c.drawImage(e,0,0,f,d);else{const{color:G,fontSize:K,fontStyle:Y,fontWeight:te,fontFamily:ve,textAlign:se,textBaseline:ie}=o,re=Number(K)*r;c.font=`${Y} normal ${te} ${re}px/${s}px ${ve}`,c.fillStyle=G,c.textAlign=se,c.textBaseline=ie;const be=Array.isArray(e)?e:[e];be==null||be.forEach((ge,Se)=>{c.fillText(ge??"",f/2,Se*(re+pF*r))})}const p=Math.PI/180*Number(n),h=Math.max(a,s),[g,y,m]=dy(h,h,r);g.translate(m/2,m/2),g.rotate(p),f>0&&d>0&&g.drawImage(u,-f/2,-d/2);function b(G,K){const Y=G*Math.cos(p)-K*Math.sin(p),te=G*Math.sin(p)+K*Math.cos(p);return[Y,te]}let C=0,S=0,T=0,w=0;const x=f/2,E=d/2;[[0-x,0-E],[0+x,0-E],[0+x,0+E],[0-x,0+E]].forEach(([G,K])=>{const[Y,te]=b(G,K);C=Math.min(C,Y),S=Math.max(S,Y),T=Math.min(T,te),w=Math.max(w,te)});const k=C+m/2,M=T+m/2,D=S-C,I=w-T,B=i*r,F=l*r,$=(D+B)*2,N=I+F,[W,_]=dy($,N);function L(G=0,K=0){W.drawImage(y,k,M,D,I,G,K,D,I)}return L(),L(D+B,-I/2-F/2),L(D+B,+I/2+F/2),[_.toDataURL(),$/r,N/r]}return t}const nxe=q({name:"ElWatermark"}),rxe=q({...nxe,props:X2e,setup(t){const e=t,n={position:"relative"},r=R(()=>{var k,M;return(M=(k=e.font)==null?void 0:k.color)!=null?M:"rgba(0,0,0,.15)"}),a=R(()=>{var k,M;return(M=(k=e.font)==null?void 0:k.fontSize)!=null?M:16}),s=R(()=>{var k,M;return(M=(k=e.font)==null?void 0:k.fontWeight)!=null?M:"normal"}),o=R(()=>{var k,M;return(M=(k=e.font)==null?void 0:k.fontStyle)!=null?M:"normal"}),i=R(()=>{var k,M;return(M=(k=e.font)==null?void 0:k.fontFamily)!=null?M:"sans-serif"}),l=R(()=>{var k,M;return(M=(k=e.font)==null?void 0:k.textAlign)!=null?M:"center"}),c=R(()=>{var k,M;return(M=(k=e.font)==null?void 0:k.textBaseline)!=null?M:"top"}),u=R(()=>e.gap[0]),f=R(()=>e.gap[1]),d=R(()=>u.value/2),p=R(()=>f.value/2),h=R(()=>{var k,M;return(M=(k=e.offset)==null?void 0:k[0])!=null?M:d.value}),g=R(()=>{var k,M;return(M=(k=e.offset)==null?void 0:k[1])!=null?M:p.value}),y=()=>{const k={zIndex:e.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let M=h.value-d.value,D=g.value-p.value;return M>0&&(k.left=`${M}px`,k.width=`calc(100% - ${M}px)`,M=0),D>0&&(k.top=`${D}px`,k.height=`calc(100% - ${D}px)`,D=0),k.backgroundPosition=`${M}px ${D}px`,k},m=on(null),b=on(),C=P(!1),S=()=>{b.value&&(b.value.remove(),b.value=void 0)},T=(k,M)=>{var D;m.value&&b.value&&(C.value=!0,b.value.setAttribute("style",J2e({...y(),backgroundImage:`url('${k}')`,backgroundSize:`${Math.floor(M)}px`})),(D=m.value)==null||D.append(b.value),setTimeout(()=>{C.value=!1}))},w=k=>{let M=120,D=64;const I=e.image,B=e.content,F=e.width,$=e.height;if(!I&&k.measureText){k.font=`${Number(a.value)}px ${i.value}`;const N=Array.isArray(B)?B:[B],W=N.map(_=>{const L=k.measureText(_);return[L.width,L.fontBoundingBoxAscent!==void 0?L.fontBoundingBoxAscent+L.fontBoundingBoxDescent:L.actualBoundingBoxAscent+L.actualBoundingBoxDescent]});M=Math.ceil(Math.max(...W.map(_=>_[0]))),D=Math.ceil(Math.max(...W.map(_=>_[1])))*N.length+(N.length-1)*pF}return[F??M,$??D]},x=txe(),E=()=>{const M=document.createElement("canvas").getContext("2d"),D=e.image,I=e.content,B=e.rotate;if(M){b.value||(b.value=document.createElement("div"));const F=Q2e(),[$,N]=w(M),W=_=>{const[L,G]=x(_||"",B,F,$,N,{color:r.value,fontSize:a.value,fontStyle:o.value,fontWeight:s.value,fontFamily:i.value,textAlign:l.value,textBaseline:c.value},u.value,f.value);T(L,G)};if(D){const _=new Image;_.onload=()=>{W(_)},_.onerror=()=>{W(I)},_.crossOrigin="anonymous",_.referrerPolicy="no-referrer",_.src=D}else W(I)}};return at(()=>{E()}),pe(()=>e,()=>{E()},{deep:!0,flush:"post"}),ln(()=>{S()}),ED(m,k=>{C.value||k.forEach(M=>{exe(M,b.value)&&(S(),E())})},{attributes:!0,subtree:!0,childList:!0}),(k,M)=>(V(),z("div",{ref_key:"containerRef",ref:m,style:Pe([n])},[ce(k.$slots,"default")],4))}});var axe=Ve(rxe,[["__file","watermark.vue"]]);const sxe=lt(axe),oxe=Re({zIndex:{type:Number,default:1001},visible:Boolean,fill:{type:String,default:"rgba(0,0,0,0.5)"},pos:{type:Q(Object)},targetAreaClickable:{type:Boolean,default:!0}}),ixe=(t,e,n,r,a)=>{const s=P(null),o=()=>{let f;return tt(t.value)?f=document.querySelector(t.value):Je(t.value)?f=t.value():f=t.value,f},i=()=>{const f=o();if(!f||!e.value){s.value=null;return}!lxe(f)&&e.value&&f.scrollIntoView(a.value);const{left:d,top:p,width:h,height:g}=f.getBoundingClientRect();s.value={left:d,top:p,width:h,height:g,radius:0}};at(()=>{pe([e,t],()=>{i()},{immediate:!0}),window.addEventListener("resize",i)}),ln(()=>{window.removeEventListener("resize",i)});const l=f=>{var d;return(d=Be(n.value.offset)?n.value.offset[f]:n.value.offset)!=null?d:6},c=R(()=>{var f;if(!s.value)return s.value;const d=l(0),p=l(1),h=((f=n.value)==null?void 0:f.radius)||2;return{left:s.value.left-d,top:s.value.top-p,width:s.value.width+d*2,height:s.value.height+p*2,radius:h}}),u=R(()=>{const f=o();return!r.value||!f||!window.DOMRect?f||void 0:{getBoundingClientRect(){var d,p,h,g;return window.DOMRect.fromRect({width:((d=c.value)==null?void 0:d.width)||0,height:((p=c.value)==null?void 0:p.height)||0,x:((h=c.value)==null?void 0:h.left)||0,y:((g=c.value)==null?void 0:g.top)||0})}}});return{mergedPosInfo:c,triggerTarget:u}},Jv=Symbol("ElTour");function lxe(t){const e=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,{top:r,right:a,bottom:s,left:o}=t.getBoundingClientRect();return r>=0&&o>=0&&a<=e&&s<=n}const cxe=(t,e,n,r,a,s,o,i)=>{const l=P(),c=P(),u=P({}),f={x:l,y:c,placement:r,strategy:a,middlewareData:u},d=R(()=>{const m=[jL(v(s)),Ase(),Use(),uxe()];return v(i)&&v(n)&&m.push(n3({element:v(n)})),m}),p=async()=>{if(!Ot)return;const m=v(t),b=v(e);if(!m||!b)return;const C=await r3(m,b,{placement:v(r),strategy:v(a),middleware:v(d)});Kc(f).forEach(S=>{f[S].value=C[S]})},h=R(()=>{if(!v(t))return{position:"fixed",top:"50%",left:"50%",transform:"translate3d(-50%, -50%, 0)",maxWidth:"100vw",zIndex:v(o)};const{overflow:m}=v(u);return{position:v(a),zIndex:v(o),top:v(c)!=null?`${v(c)}px`:"",left:v(l)!=null?`${v(l)}px`:"",maxWidth:m!=null&&m.maxWidth?`${m==null?void 0:m.maxWidth}px`:""}}),g=R(()=>{if(!v(i))return{};const{arrow:m}=v(u);return{left:(m==null?void 0:m.x)!=null?`${m==null?void 0:m.x}px`:"",top:(m==null?void 0:m.y)!=null?`${m==null?void 0:m.y}px`:""}});let y;return at(()=>{y=$se(v(t),v(e),p),Sr(()=>{p()})}),ln(()=>{y&&y()}),{update:p,contentStyle:h,arrowStyle:g}},uxe=()=>({name:"overflow",async fn(t){const e=await PS(t);let n=0;return e.left>0&&(n=e.left),e.right>0&&(n=e.right),{data:{maxWidth:t.rects.floating.width-n}}}}),fxe={style:{width:"100%",height:"100%"}},dxe=["d"],pxe=q({name:"ElTourMask",inheritAttrs:!1}),gxe=q({...pxe,props:oxe,setup(t){const e=t,{ns:n}=We(Jv),r=R(()=>{var i,l;return(l=(i=e.pos)==null?void 0:i.radius)!=null?l:2}),a=R(()=>{const i=r.value,l=`a${i},${i} 0 0 1`;return{topRight:`${l} ${i},${i}`,bottomRight:`${l} ${-i},${i}`,bottomLeft:`${l} ${-i},${-i}`,topLeft:`${l} ${i},${-i}`}}),s=R(()=>{const i=window.innerWidth,l=window.innerHeight,c=a.value,u=`M${i},0 L0,0 L0,${l} L${i},${l} L${i},0 Z`,f=r.value;return e.pos?`${u} M${e.pos.left+f},${e.pos.top} h${e.pos.width-f*2} ${c.topRight} v${e.pos.height-f*2} ${c.bottomRight} h${-e.pos.width+f*2} ${c.bottomLeft} v${-e.pos.height+f*2} ${c.topLeft} z`:u}),o=R(()=>({fill:e.fill,pointerEvents:"auto",cursor:"auto"}));return RS(tn(e,"visible"),{ns:n}),(i,l)=>i.visible?(V(),z("div",ft({key:0,class:v(n).e("mask"),style:{position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:i.zIndex,pointerEvents:i.pos&&i.targetAreaClickable?"none":"auto"}},i.$attrs),[(V(),z("svg",fxe,[H("path",{class:U(v(n).e("hollow")),style:Pe(v(o)),d:v(s)},null,14,dxe)]))],16)):ee("v-if",!0)}});var hxe=Ve(gxe,[["__file","mask.vue"]]);const vxe=["absolute","fixed"],yxe=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],Db=Re({placement:{type:Q(String),values:yxe,default:"bottom"},reference:{type:Q(Object),default:null},strategy:{type:Q(String),values:vxe,default:"absolute"},offset:{type:Number,default:10},showArrow:Boolean,zIndex:{type:Number,default:2001}}),mxe={close:()=>!0},Cxe=["data-side"],Sxe=q({name:"ElTourContent"}),bxe=q({...Sxe,props:Db,emits:mxe,setup(t,{emit:e}){const n=t,r=P(n.placement),a=P(n.strategy),s=P(null),o=P(null);pe(()=>n.placement,()=>{r.value=n.placement});const{contentStyle:i,arrowStyle:l}=cxe(tn(n,"reference"),s,o,r,a,tn(n,"offset"),tn(n,"zIndex"),tn(n,"showArrow")),c=R(()=>r.value.split("-")[0]),{ns:u}=We(Jv),f=()=>{e("close")};return(d,p)=>(V(),z("div",{ref_key:"contentRef",ref:s,style:Pe(v(i)),class:U(v(u).e("content")),"data-side":v(c),tabindex:"-1"},[j(v(kd),{loop:"",trapped:"","focus-start-el":"container","focus-trap-el":s.value||void 0,onReleaseRequested:f},{default:Z(()=>[ce(d.$slots,"default")]),_:3},8,["focus-trap-el"]),d.showArrow?(V(),z("span",{key:0,ref_key:"arrowRef",ref:o,style:Pe(v(l)),class:U(v(u).e("arrow"))},null,6)):ee("v-if",!0)],14,Cxe))}});var wxe=Ve(bxe,[["__file","content.vue"]]),Txe=q({name:"ElTourSteps",props:{current:{type:Number,default:0}},emits:["update-total"],setup(t,{slots:e,emit:n}){let r=0;return()=>{var a,s;const o=(a=e.default)==null?void 0:a.call(e),i=[];let l=0;function c(u){Be(u)&&u.forEach(f=>{var d;((d=(f==null?void 0:f.type)||{})==null?void 0:d.name)==="ElTourStep"&&(i.push(f),l+=1)})}return o.length&&c(ri((s=o[0])==null?void 0:s.children)),r!==l&&(r=l,n("update-total",l)),i.length?i[t.current]:null}}});const xxe=Re({modelValue:Boolean,current:{type:Number,default:0},showArrow:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeIcon:{type:Zt},placement:Db.placement,contentStyle:{type:Q([Object])},mask:{type:Q([Boolean,Object]),default:!0},gap:{type:Q(Object),default:()=>({offset:6,radius:2})},zIndex:{type:Number},scrollIntoViewOptions:{type:Q([Boolean,Object]),default:()=>({block:"center"})},type:{type:Q(String)},appendTo:{type:Q([String,Object]),default:"body"},closeOnPressEscape:{type:Boolean,default:!0},targetAreaClickable:{type:Boolean,default:!0}}),Exe={[ut]:t=>Wn(t),"update:current":t=>Xe(t),close:t=>Xe(t),finish:()=>!0,change:t=>Xe(t)},kxe=q({name:"ElTour"}),Oxe=q({...kxe,props:xxe,emits:Exe,setup(t,{emit:e}){const n=t,r=Ce("tour"),a=P(0),s=P(),o=kD(n,"current",e,{passive:!0}),i=R(()=>{var O;return(O=s.value)==null?void 0:O.target}),l=R(()=>[r.b(),y.value==="primary"?r.m("primary"):""]),c=R(()=>{var O;return((O=s.value)==null?void 0:O.placement)||n.placement}),u=R(()=>{var O,k;return(k=(O=s.value)==null?void 0:O.contentStyle)!=null?k:n.contentStyle}),f=R(()=>{var O,k;return(k=(O=s.value)==null?void 0:O.mask)!=null?k:n.mask}),d=R(()=>!!f.value&&n.modelValue),p=R(()=>Wn(f.value)?void 0:f.value),h=R(()=>{var O,k;return!!i.value&&((k=(O=s.value)==null?void 0:O.showArrow)!=null?k:n.showArrow)}),g=R(()=>{var O,k;return(k=(O=s.value)==null?void 0:O.scrollIntoViewOptions)!=null?k:n.scrollIntoViewOptions}),y=R(()=>{var O,k;return(k=(O=s.value)==null?void 0:O.type)!=null?k:n.type}),{nextZIndex:m}=Cu(),b=m(),C=R(()=>{var O;return(O=n.zIndex)!=null?O:b}),{mergedPosInfo:S,triggerTarget:T}=ixe(i,tn(n,"modelValue"),tn(n,"gap"),f,g);pe(()=>n.modelValue,O=>{O||(o.value=0)});const w=()=>{n.closeOnPressEscape&&(e("update:modelValue",!1),e("close",o.value))},x=O=>{a.value=O},E=rr();return bt(Jv,{currentStep:s,current:o,total:a,showClose:tn(n,"showClose"),closeIcon:tn(n,"closeIcon"),mergedType:y,ns:r,slots:E,updateModelValue(O){e("update:modelValue",O)},onClose(){e("close",o.value)},onFinish(){e("finish")},onChange(){e("change",o.value)}}),(O,k)=>{var M,D;return V(),z(Ue,null,[(V(),ae(pu,{to:O.appendTo},[H("div",ft({class:v(l)},O.$attrs),[j(hxe,{visible:v(d),fill:(M=v(p))==null?void 0:M.color,style:Pe((D=v(p))==null?void 0:D.style),pos:v(S),"z-index":v(C),"target-area-clickable":O.targetAreaClickable},null,8,["visible","fill","style","pos","z-index","target-area-clickable"]),O.modelValue?(V(),ae(wxe,{key:v(o),reference:v(T),placement:v(c),"show-arrow":v(h),"z-index":v(C),style:Pe(v(u)),onClose:w},{default:Z(()=>[j(v(Txe),{current:v(o),onUpdateTotal:x},{default:Z(()=>[ce(O.$slots,"default")]),_:3},8,["current"])]),_:3},8,["reference","placement","show-arrow","z-index","style"])):ee("v-if",!0)],16)],8,["to"])),ee(" just for IDE "),ee("v-if",!0)],64)}}});var Mxe=Ve(Oxe,[["__file","tour.vue"]]);const Rxe=Re({target:{type:Q([String,Object,Function])},title:String,description:String,showClose:{type:Boolean,default:void 0},closeIcon:{type:Zt},showArrow:{type:Boolean,default:void 0},placement:Db.placement,mask:{type:Q([Boolean,Object]),default:void 0},contentStyle:{type:Q([Object])},prevButtonProps:{type:Q(Object)},nextButtonProps:{type:Q(Object)},scrollIntoViewOptions:{type:Q([Boolean,Object]),default:void 0},type:{type:Q(String)}}),_xe={close:()=>!0},Vxe=q({name:"ElTourStep"}),Dxe=q({...Vxe,props:Rxe,emits:_xe,setup(t,{emit:e}){const n=t,{Close:r}=TS,{t:a}=Mt(),{currentStep:s,current:o,total:i,showClose:l,closeIcon:c,mergedType:u,ns:f,slots:d,updateModelValue:p,onClose:h,onFinish:g,onChange:y}=We(Jv);pe(n,E=>{s.value=E},{immediate:!0});const m=R(()=>{var E;return(E=n.showClose)!=null?E:l.value}),b=R(()=>{var E,O;return(O=(E=n.closeIcon)!=null?E:c.value)!=null?O:r}),C=E=>{if(E)return cne(E,["children","onClick"])},S=()=>{var E,O;o.value-=1,(E=n.prevButtonProps)!=null&&E.onClick&&((O=n.prevButtonProps)==null||O.onClick()),y()},T=()=>{var E;o.value>=i.value-1?w():o.value+=1,(E=n.nextButtonProps)!=null&&E.onClick&&n.nextButtonProps.onClick(),y()},w=()=>{x(),g()},x=()=>{p(!1),h(),e("close")};return(E,O)=>(V(),z(Ue,null,[v(m)?(V(),z("button",{key:0,"aria-label":"Close",class:U(v(f).e("closebtn")),type:"button",onClick:x},[j(v(Ge),{class:U(v(f).e("close"))},{default:Z(()=>[(V(),ae(dt(v(b))))]),_:1},8,["class"])],2)):ee("v-if",!0),H("header",{class:U([v(f).e("header"),{"show-close":v(l)}])},[ce(E.$slots,"header",{},()=>[H("span",{role:"heading",class:U(v(f).e("title"))},Te(E.title),3)])],2),H("div",{class:U(v(f).e("body"))},[ce(E.$slots,"default",{},()=>[H("span",null,Te(E.description),1)])],2),H("footer",{class:U(v(f).e("footer"))},[H("div",{class:U(v(f).b("indicators"))},[v(d).indicators?(V(),ae(dt(v(d).indicators),{key:0,current:v(o),total:v(i)},null,8,["current","total"])):(V(!0),z(Ue,{key:1},gt(v(i),(k,M)=>(V(),z("span",{key:k,class:U([v(f).b("indicator"),M===v(o)?"is-active":""])},null,2))),128))],2),H("div",{class:U(v(f).b("buttons"))},[v(o)>0?(V(),ae(v(ir),ft({key:0,size:"small",type:v(u)},C(E.prevButtonProps),{onClick:S}),{default:Z(()=>{var k,M;return[Ct(Te((M=(k=E.prevButtonProps)==null?void 0:k.children)!=null?M:v(a)("el.tour.previous")),1)]}),_:1},16,["type"])):ee("v-if",!0),v(o)<=v(i)-1?(V(),ae(v(ir),ft({key:1,size:"small",type:v(u)==="primary"?"default":"primary"},C(E.nextButtonProps),{onClick:T}),{default:Z(()=>{var k,M;return[Ct(Te((M=(k=E.nextButtonProps)==null?void 0:k.children)!=null?M:v(o)===v(i)-1?v(a)("el.tour.finish"):v(a)("el.tour.next")),1)]}),_:1},16,["type"])):ee("v-if",!0)],2)],2)],64))}});var gF=Ve(Dxe,[["__file","step.vue"]]);const Lxe=lt(Mxe,{TourStep:gF}),Nxe=bn(gF);var Bxe=[roe,goe,Wle,dwe,jle,ece,b3,pce,gce,ir,M3,Lue,Uue,tfe,nfe,hde,tde,bde,Na,bfe,nN,Lde,Zde,Jde,Gde,Mpe,qse,Wpe,Ipe,Ppe,Gpe,zpe,uhe,bhe,whe,Uhe,$N,Jhe,Gve,zve,Hve,KN,iie,lie,Ge,$0e,jN,kr,YN,Z0e,yye,mye,Cye,Sye,Oye,Lme,Ame,Yme,m3,aB,cN,$fe,Ffe,f1e,v1e,Mde,To,Ol,Vh,sme,tCe,cCe,uCe,WCe,HCe,TB,nSe,fSe,dSe,TSe,Obe,Mbe,fwe,Owe,Mwe,If,Lwe,fue,Awe,zwe,Hwe,Dr,yTe,DTe,KTe,QTe,y2e,q2e,sxe,Lxe,Nxe];const Ha="ElInfiniteScroll",Fxe=50,$xe=200,Uxe=0,Axe={delay:{type:Number,default:$xe},distance:{type:Number,default:Uxe},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},Lb=(t,e)=>Object.entries(Axe).reduce((n,[r,a])=>{var s,o;const{type:i,default:l}=a,c=t.getAttribute(`infinite-scroll-${r}`);let u=(o=(s=e[c])!=null?s:c)!=null?o:l;return u=u==="false"?!1:u,u=i(u),n[r]=Number.isNaN(u)?l:u,n},{}),hF=t=>{const{observer:e}=t[Ha];e&&(e.disconnect(),delete t[Ha].observer)},Wxe=(t,e)=>{const{container:n,containerEl:r,instance:a,observer:s,lastScrollTop:o}=t[Ha],{disabled:i,distance:l}=Lb(t,a),{clientHeight:c,scrollHeight:u,scrollTop:f}=r,d=f-o;if(t[Ha].lastScrollTop=f,s||i||d<0)return;let p=!1;if(n===t)p=u-(c+f)<=l;else{const{clientTop:h,scrollHeight:g}=t,y=FX(t,r);p=f+c>=y+h+g-l}p&&e.call(a)};function py(t,e){const{containerEl:n,instance:r}=t[Ha],{disabled:a}=Lb(t,r);a||n.clientHeight===0||(n.scrollHeight<=n.clientHeight?e.call(r):hF(t))}const Ixe={async mounted(t,e){const{instance:n,value:r}=e;Je(r)||Yn(Ha,"'v-infinite-scroll' binding value must be a function"),await Ye();const{delay:a,immediate:s}=Lb(t,n),o=mS(t,!0),i=o===window?document.documentElement:o,l=dl(Wxe.bind(null,t,r),a);if(o){if(t[Ha]={instance:n,container:o,containerEl:i,delay:a,cb:r,onScroll:l,lastScrollTop:i.scrollTop},s){const c=new MutationObserver(dl(py.bind(null,t,r),Fxe));t[Ha].observer=c,c.observe(t,{childList:!0,subtree:!0}),py(t,r)}o.addEventListener("scroll",l)}},unmounted(t){const{container:e,onScroll:n}=t[Ha];e==null||e.removeEventListener("scroll",n),hF(t)},async updated(t){if(!t[Ha])await Ye();else{const{containerEl:e,cb:n,observer:r}=t[Ha];e.clientHeight&&r&&py(t,n)}}},m1=Ixe;m1.install=t=>{t.directive("InfiniteScroll",m1)};const Pxe=m1;function Gxe(t){let e;const n=P(!1),r=Dt({...t,originalPosition:"",originalOverflow:"",visible:!1});function a(d){r.text=d}function s(){const d=r.parent,p=f.ns;if(!d.vLoadingAddClassList){let h=d.getAttribute("loading-number");h=Number.parseInt(h)-1,h?d.setAttribute("loading-number",h.toString()):(Mr(d,p.bm("parent","relative")),d.removeAttribute("loading-number")),Mr(d,p.bm("parent","hidden"))}o(),u.unmount()}function o(){var d,p;(p=(d=f.$el)==null?void 0:d.parentNode)==null||p.removeChild(f.$el)}function i(){var d;t.beforeClose&&!t.beforeClose()||(n.value=!0,clearTimeout(e),e=window.setTimeout(l,400),r.visible=!1,(d=t.closed)==null||d.call(t))}function l(){if(!n.value)return;const d=r.parent;n.value=!1,d.vLoadingAddClassList=void 0,s()}const u=CD(q({name:"ElLoading",setup(d,{expose:p}){const{ns:h,zIndex:g}=Pv("loading");return p({ns:h,zIndex:g}),()=>{const y=r.spinner||r.svg,m=je("svg",{class:"circular",viewBox:r.svgViewBox?r.svgViewBox:"0 0 50 50",...y?{innerHTML:y}:{}},[je("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),b=r.text?je("p",{class:h.b("text")},[r.text]):void 0;return je(jn,{name:h.b("fade"),onAfterLeave:l},{default:Z(()=>[rt(j("div",{style:{backgroundColor:r.background||""},class:[h.b("mask"),r.customClass,r.fullscreen?"is-fullscreen":""]},[je("div",{class:h.b("spinner")},[m,b])]),[[Rt,r.visible]])])})}}})),f=u.mount(document.createElement("div"));return{...hr(r),setText:a,removeElLoadingChild:o,close:i,handleAfterLeave:l,vm:f,get $el(){return f.$el}}}let Dp;const C1=function(t={}){if(!Ot)return;const e=zxe(t);if(e.fullscreen&&Dp)return Dp;const n=Gxe({...e,closed:()=>{var a;(a=e.closed)==null||a.call(e),e.fullscreen&&(Dp=void 0)}});Hxe(e,e.parent,n),ZE(e,e.parent,n),e.parent.vLoadingAddClassList=()=>ZE(e,e.parent,n);let r=e.parent.getAttribute("loading-number");return r?r=`${Number.parseInt(r)+1}`:r="1",e.parent.setAttribute("loading-number",r),e.parent.appendChild(n.$el),Ye(()=>n.visible.value=e.visible),e.fullscreen&&(Dp=n),n},zxe=t=>{var e,n,r,a;let s;return tt(t.target)?s=(e=document.querySelector(t.target))!=null?e:document.body:s=t.target||document.body,{parent:s===document.body||t.body?document.body:s,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:s===document.body&&((n=t.fullscreen)!=null?n:!0),lock:(r=t.lock)!=null?r:!1,customClass:t.customClass||"",visible:(a=t.visible)!=null?a:!0,target:s}},Hxe=async(t,e,n)=>{const{nextZIndex:r}=n.vm.zIndex||n.vm._.exposed.zIndex,a={};if(t.fullscreen)n.originalPosition.value=qo(document.body,"position"),n.originalOverflow.value=qo(document.body,"overflow"),a.zIndex=r();else if(t.parent===document.body){n.originalPosition.value=qo(document.body,"position"),await Ye();for(const s of["top","left"]){const o=s==="top"?"scrollTop":"scrollLeft";a[s]=`${t.target.getBoundingClientRect()[s]+document.body[o]+document.documentElement[o]-Number.parseInt(qo(document.body,`margin-${s}`),10)}px`}for(const s of["height","width"])a[s]=`${t.target.getBoundingClientRect()[s]}px`}else n.originalPosition.value=qo(e,"position");for(const[s,o]of Object.entries(a))n.$el.style[s]=o},ZE=(t,e,n)=>{const r=n.vm.ns||n.vm._.exposed.ns;["absolute","fixed","sticky"].includes(n.originalPosition.value)?Mr(e,r.bm("parent","relative")):wa(e,r.bm("parent","relative")),t.fullscreen&&t.lock?wa(e,r.bm("parent","hidden")):Mr(e,r.bm("parent","hidden"))},Lg=Symbol("ElLoading"),JE=(t,e)=>{var n,r,a,s;const o=e.instance,i=d=>pt(e.value)?e.value[d]:void 0,l=d=>{const p=tt(d)&&(o==null?void 0:o[d])||d;return p&&P(p)},c=d=>l(i(d)||t.getAttribute(`element-loading-${gi(d)}`)),u=(n=i("fullscreen"))!=null?n:e.modifiers.fullscreen,f={text:c("text"),svg:c("svg"),svgViewBox:c("svgViewBox"),spinner:c("spinner"),background:c("background"),customClass:c("customClass"),fullscreen:u,target:(r=i("target"))!=null?r:u?void 0:t,body:(a=i("body"))!=null?a:e.modifiers.body,lock:(s=i("lock"))!=null?s:e.modifiers.lock};t[Lg]={options:f,instance:C1(f)}},Kxe=(t,e)=>{for(const n of Object.keys(e))cn(e[n])&&(e[n].value=t[n])},QE={mounted(t,e){e.value&&JE(t,e)},updated(t,e){const n=t[Lg];e.oldValue!==e.value&&(e.value&&!e.oldValue?JE(t,e):e.value&&e.oldValue?pt(e.value)&&Kxe(e.value,n.options):n==null||n.instance.close())},unmounted(t){var e;(e=t[Lg])==null||e.instance.close(),t[Lg]=null}},jxe={install(t){t.directive("loading",QE),t.config.globalProperties.$loading=C1},directive:QE,service:C1},vF=["success","info","warning","error"],jr=mn({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:Ot?document.body:void 0}),Yxe=Re({customClass:{type:String,default:jr.customClass},center:{type:Boolean,default:jr.center},dangerouslyUseHTMLString:{type:Boolean,default:jr.dangerouslyUseHTMLString},duration:{type:Number,default:jr.duration},icon:{type:Zt,default:jr.icon},id:{type:String,default:jr.id},message:{type:Q([String,Object,Function]),default:jr.message},onClose:{type:Q(Function),required:!1},showClose:{type:Boolean,default:jr.showClose},type:{type:String,values:vF,default:jr.type},offset:{type:Number,default:jr.offset},zIndex:{type:Number,default:jr.zIndex},grouping:{type:Boolean,default:jr.grouping},repeatNum:{type:Number,default:jr.repeatNum}}),qxe={destroy:()=>!0},Qa=wV([]),Xxe=t=>{const e=Qa.findIndex(a=>a.id===t),n=Qa[e];let r;return e>0&&(r=Qa[e-1]),{current:n,prev:r}},Zxe=t=>{const{prev:e}=Xxe(t);return e?e.vm.exposed.bottom.value:0},Jxe=(t,e)=>Qa.findIndex(r=>r.id===t)>0?20:e,Qxe=["id"],eEe=["innerHTML"],tEe=q({name:"ElMessage"}),nEe=q({...tEe,props:Yxe,emits:qxe,setup(t,{expose:e}){const n=t,{Close:r}=xS,{ns:a,zIndex:s}=Pv("message"),{currentZIndex:o,nextZIndex:i}=s,l=P(),c=P(!1),u=P(0);let f;const d=R(()=>n.type?n.type==="error"?"danger":n.type:"info"),p=R(()=>{const x=n.type;return{[a.bm("icon",x)]:x&&fi[x]}}),h=R(()=>n.icon||fi[n.type]||""),g=R(()=>Zxe(n.id)),y=R(()=>Jxe(n.id,n.offset)+g.value),m=R(()=>u.value+y.value),b=R(()=>({top:`${y.value}px`,zIndex:o.value}));function C(){n.duration!==0&&({stop:f}=wl(()=>{T()},n.duration))}function S(){f==null||f()}function T(){c.value=!1}function w({code:x}){x===He.esc&&T()}return at(()=>{C(),i(),c.value=!0}),pe(()=>n.repeatNum,()=>{S(),C()}),vn(document,"keydown",w),Sn(l,()=>{u.value=l.value.getBoundingClientRect().height}),e({visible:c,bottom:m,close:T}),(x,E)=>(V(),ae(jn,{name:v(a).b("fade"),onBeforeLeave:x.onClose,onAfterLeave:E[0]||(E[0]=O=>x.$emit("destroy")),persisted:""},{default:Z(()=>[rt(H("div",{id:x.id,ref_key:"messageRef",ref:l,class:U([v(a).b(),{[v(a).m(x.type)]:x.type},v(a).is("center",x.center),v(a).is("closable",x.showClose),x.customClass]),style:Pe(v(b)),role:"alert",onMouseenter:S,onMouseleave:C},[x.repeatNum>1?(V(),ae(v(b3),{key:0,value:x.repeatNum,type:v(d),class:U(v(a).e("badge"))},null,8,["value","type","class"])):ee("v-if",!0),v(h)?(V(),ae(v(Ge),{key:1,class:U([v(a).e("icon"),v(p)])},{default:Z(()=>[(V(),ae(dt(v(h))))]),_:1},8,["class"])):ee("v-if",!0),ce(x.$slots,"default",{},()=>[x.dangerouslyUseHTMLString?(V(),z(Ue,{key:1},[ee(" Caution here, message could've been compromised, never use user's input as message "),H("p",{class:U(v(a).e("content")),innerHTML:x.message},null,10,eEe)],2112)):(V(),z("p",{key:0,class:U(v(a).e("content"))},Te(x.message),3))]),x.showClose?(V(),ae(v(Ge),{key:2,class:U(v(a).e("closeBtn")),onClick:Ze(T,["stop"])},{default:Z(()=>[j(v(r))]),_:1},8,["class","onClick"])):ee("v-if",!0)],46,Qxe),[[Rt,c.value]])]),_:3},8,["name","onBeforeLeave"]))}});var rEe=Ve(nEe,[["__file","message.vue"]]);let aEe=1;const yF=t=>{const e=!t||tt(t)||yn(t)||Je(t)?{message:t}:t,n={...jr,...e};if(!n.appendTo)n.appendTo=document.body;else if(tt(n.appendTo)){let r=document.querySelector(n.appendTo);_a(r)||(r=document.body),n.appendTo=r}return n},sEe=t=>{const e=Qa.indexOf(t);if(e===-1)return;Qa.splice(e,1);const{handler:n}=t;n.close()},oEe=({appendTo:t,...e},n)=>{const r=`message_${aEe++}`,a=e.onClose,s=document.createElement("div"),o={...e,id:r,onClose:()=>{a==null||a(),sEe(u)},onDestroy:()=>{li(null,s)}},i=j(rEe,o,Je(o.message)||yn(o.message)?{default:Je(o.message)?o.message:()=>o.message}:null);i.appContext=n||su._context,li(i,s),t.appendChild(s.firstElementChild);const l=i.component,u={id:r,vnode:i,vm:l,handler:{close:()=>{l.exposed.visible.value=!1}},props:i.component.props};return u},su=(t={},e)=>{if(!Ot)return{close:()=>{}};if(Xe(xm.max)&&Qa.length>=xm.max)return{close:()=>{}};const n=yF(t);if(n.grouping&&Qa.length){const a=Qa.find(({vnode:s})=>{var o;return((o=s.props)==null?void 0:o.message)===n.message});if(a)return a.props.repeatNum+=1,a.props.type=n.type,a.handler}const r=oEe(n,e);return Qa.push(r),r.handler};vF.forEach(t=>{su[t]=(e={},n)=>{const r=yF(e);return su({...r,type:t},n)}});function iEe(t){for(const e of Qa)(!t||t===e.props.type)&&e.handler.close()}su.closeAll=iEe;su._context=null;const S1=TL(su,"$message"),lEe=q({name:"ElMessageBox",directives:{TrapFocus:jce},components:{ElButton:ir,ElFocusTrap:kd,ElInput:kr,ElOverlay:sb,ElIcon:Ge,...xS},inheritAttrs:!1,props:{buttonSize:{type:String,validator:xL},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(t,{emit:e}){const{locale:n,zIndex:r,ns:a,size:s}=Pv("message-box",R(()=>t.buttonSize)),{t:o}=n,{nextZIndex:i}=r,l=P(!1),c=Dt({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:i()}),u=R(()=>{const $=c.type;return{[a.bm("icon",$)]:$&&fi[$]}}),f=Vr(),d=Vr(),p=R(()=>c.icon||fi[c.type]||""),h=R(()=>!!c.message),g=P(),y=P(),m=P(),b=P(),C=P(),S=R(()=>c.confirmButtonClass);pe(()=>c.inputValue,async $=>{await Ye(),t.boxType==="prompt"&&$!==null&&D()},{immediate:!0}),pe(()=>l.value,$=>{var N,W;$&&(t.boxType!=="prompt"&&(c.autofocus?m.value=(W=(N=C.value)==null?void 0:N.$el)!=null?W:g.value:m.value=g.value),c.zIndex=i()),t.boxType==="prompt"&&($?Ye().then(()=>{var _;b.value&&b.value.$el&&(c.autofocus?m.value=(_=I())!=null?_:g.value:m.value=g.value)}):(c.editorErrorMessage="",c.validateError=!1))});const T=R(()=>t.draggable),w=R(()=>t.overflow);EL(g,y,T,w),at(async()=>{await Ye(),t.closeOnHashChange&&window.addEventListener("hashchange",x)}),ln(()=>{t.closeOnHashChange&&window.removeEventListener("hashchange",x)});function x(){l.value&&(l.value=!1,Ye(()=>{c.action&&e("action",c.action)}))}const E=()=>{t.closeOnClickModal&&M(c.distinguishCancelAndClose?"close":"cancel")},O=US(E),k=$=>{if(c.inputType!=="textarea")return $.preventDefault(),M("confirm")},M=$=>{var N;t.boxType==="prompt"&&$==="confirm"&&!D()||(c.action=$,c.beforeClose?(N=c.beforeClose)==null||N.call(c,$,c,x):x())},D=()=>{if(t.boxType==="prompt"){const $=c.inputPattern;if($&&!$.test(c.inputValue||""))return c.editorErrorMessage=c.inputErrorMessage||o("el.messagebox.error"),c.validateError=!0,!1;const N=c.inputValidator;if(typeof N=="function"){const W=N(c.inputValue);if(W===!1)return c.editorErrorMessage=c.inputErrorMessage||o("el.messagebox.error"),c.validateError=!0,!1;if(typeof W=="string")return c.editorErrorMessage=W,c.validateError=!0,!1}}return c.editorErrorMessage="",c.validateError=!1,!0},I=()=>{const $=b.value.$refs;return $.input||$.textarea},B=()=>{M("close")},F=()=>{t.closeOnPressEscape&&B()};return t.lockScroll&&RS(l),{...hr(c),ns:a,overlayEvent:O,visible:l,hasMessage:h,typeClass:u,contentId:f,inputId:d,btnSize:s,iconComponent:p,confirmButtonClasses:S,rootRef:g,focusStartRef:m,headerRef:y,inputRef:b,confirmRef:C,doClose:x,handleClose:B,onCloseRequested:F,handleWrapperClick:E,handleInputEnter:k,handleAction:M,t:o}}}),cEe=["aria-label","aria-describedby"],uEe=["aria-label"],fEe=["id"];function dEe(t,e,n,r,a,s){const o=et("el-icon"),i=et("close"),l=et("el-input"),c=et("el-button"),u=et("el-focus-trap"),f=et("el-overlay");return V(),ae(jn,{name:"fade-in-linear",onAfterLeave:e[11]||(e[11]=d=>t.$emit("vanish")),persisted:""},{default:Z(()=>[rt(j(f,{"z-index":t.zIndex,"overlay-class":[t.ns.is("message-box"),t.modalClass],mask:t.modal},{default:Z(()=>[H("div",{role:"dialog","aria-label":t.title,"aria-modal":"true","aria-describedby":t.showInput?void 0:t.contentId,class:U(`${t.ns.namespace.value}-overlay-message-box`),onClick:e[8]||(e[8]=(...d)=>t.overlayEvent.onClick&&t.overlayEvent.onClick(...d)),onMousedown:e[9]||(e[9]=(...d)=>t.overlayEvent.onMousedown&&t.overlayEvent.onMousedown(...d)),onMouseup:e[10]||(e[10]=(...d)=>t.overlayEvent.onMouseup&&t.overlayEvent.onMouseup(...d))},[j(u,{loop:"",trapped:t.visible,"focus-trap-el":t.rootRef,"focus-start-el":t.focusStartRef,onReleaseRequested:t.onCloseRequested},{default:Z(()=>[H("div",{ref:"rootRef",class:U([t.ns.b(),t.customClass,t.ns.is("draggable",t.draggable),{[t.ns.m("center")]:t.center}]),style:Pe(t.customStyle),tabindex:"-1",onClick:e[7]||(e[7]=Ze(()=>{},["stop"]))},[t.title!==null&&t.title!==void 0?(V(),z("div",{key:0,ref:"headerRef",class:U([t.ns.e("header"),{"show-close":t.showClose}])},[H("div",{class:U(t.ns.e("title"))},[t.iconComponent&&t.center?(V(),ae(o,{key:0,class:U([t.ns.e("status"),t.typeClass])},{default:Z(()=>[(V(),ae(dt(t.iconComponent)))]),_:1},8,["class"])):ee("v-if",!0),H("span",null,Te(t.title),1)],2),t.showClose?(V(),z("button",{key:0,type:"button",class:U(t.ns.e("headerbtn")),"aria-label":t.t("el.messagebox.close"),onClick:e[0]||(e[0]=d=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel")),onKeydown:e[1]||(e[1]=Xt(Ze(d=>t.handleAction(t.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[j(o,{class:U(t.ns.e("close"))},{default:Z(()=>[j(i)]),_:1},8,["class"])],42,uEe)):ee("v-if",!0)],2)):ee("v-if",!0),H("div",{id:t.contentId,class:U(t.ns.e("content"))},[H("div",{class:U(t.ns.e("container"))},[t.iconComponent&&!t.center&&t.hasMessage?(V(),ae(o,{key:0,class:U([t.ns.e("status"),t.typeClass])},{default:Z(()=>[(V(),ae(dt(t.iconComponent)))]),_:1},8,["class"])):ee("v-if",!0),t.hasMessage?(V(),z("div",{key:1,class:U(t.ns.e("message"))},[ce(t.$slots,"default",{},()=>[t.dangerouslyUseHTMLString?(V(),ae(dt(t.showInput?"label":"p"),{key:1,for:t.showInput?t.inputId:void 0,innerHTML:t.message},null,8,["for","innerHTML"])):(V(),ae(dt(t.showInput?"label":"p"),{key:0,for:t.showInput?t.inputId:void 0},{default:Z(()=>[Ct(Te(t.dangerouslyUseHTMLString?"":t.message),1)]),_:1},8,["for"]))])],2)):ee("v-if",!0)],2),rt(H("div",{class:U(t.ns.e("input"))},[j(l,{id:t.inputId,ref:"inputRef",modelValue:t.inputValue,"onUpdate:modelValue":e[2]||(e[2]=d=>t.inputValue=d),type:t.inputType,placeholder:t.inputPlaceholder,"aria-invalid":t.validateError,class:U({invalid:t.validateError}),onKeydown:Xt(t.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),H("div",{class:U(t.ns.e("errormsg")),style:Pe({visibility:t.editorErrorMessage?"visible":"hidden"})},Te(t.editorErrorMessage),7)],2),[[Rt,t.showInput]])],10,fEe),H("div",{class:U(t.ns.e("btns"))},[t.showCancelButton?(V(),ae(c,{key:0,loading:t.cancelButtonLoading,class:U([t.cancelButtonClass]),round:t.roundButton,size:t.btnSize,onClick:e[3]||(e[3]=d=>t.handleAction("cancel")),onKeydown:e[4]||(e[4]=Xt(Ze(d=>t.handleAction("cancel"),["prevent"]),["enter"]))},{default:Z(()=>[Ct(Te(t.cancelButtonText||t.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):ee("v-if",!0),rt(j(c,{ref:"confirmRef",type:"primary",loading:t.confirmButtonLoading,class:U([t.confirmButtonClasses]),round:t.roundButton,disabled:t.confirmButtonDisabled,size:t.btnSize,onClick:e[5]||(e[5]=d=>t.handleAction("confirm")),onKeydown:e[6]||(e[6]=Xt(Ze(d=>t.handleAction("confirm"),["prevent"]),["enter"]))},{default:Z(()=>[Ct(Te(t.confirmButtonText||t.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[Rt,t.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,cEe)]),_:3},8,["z-index","overlay-class","mask"]),[[Rt,t.visible]])]),_:3})}var pEe=Ve(lEe,[["render",dEe],["__file","index.vue"]]);const Xf=new Map,gEe=t=>{let e=document.body;return t.appendTo&&(tt(t.appendTo)&&(e=document.querySelector(t.appendTo)),_a(t.appendTo)&&(e=t.appendTo),_a(e)||(e=document.body)),e},hEe=(t,e,n=null)=>{const r=j(pEe,t,Je(t.message)||yn(t.message)?{default:Je(t.message)?t.message:()=>t.message}:null);return r.appContext=n,li(r,e),gEe(t).appendChild(e.firstElementChild),r.component},vEe=()=>document.createElement("div"),yEe=(t,e)=>{const n=vEe();t.onVanish=()=>{li(null,n),Xf.delete(a)},t.onAction=s=>{const o=Xf.get(a);let i;t.showInput?i={value:a.inputValue,action:s}:i=s,t.callback?t.callback(i,r.proxy):s==="cancel"||s==="close"?t.distinguishCancelAndClose&&s!=="cancel"?o.reject("close"):o.reject("cancel"):o.resolve(i)};const r=hEe(t,n,e),a=r.proxy;for(const s in t)Et(t,s)&&!Et(a.$props,s)&&(a[s]=t[s]);return a.visible=!0,a};function bu(t,e=null){if(!Ot)return Promise.reject();let n;return tt(t)||yn(t)?t={message:t}:n=t.callback,new Promise((r,a)=>{const s=yEe(t,e??bu._context);Xf.set(s,{options:t,callback:n,resolve:r,reject:a})})}const mEe=["alert","confirm","prompt"],CEe={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};mEe.forEach(t=>{bu[t]=SEe(t)});function SEe(t){return(e,n,r,a)=>{let s="";return pt(n)?(r=n,s=""):Kn(n)?s="":s=n,bu(Object.assign({title:s,message:e,type:"",...CEe[t]},r,{boxType:t}),a)}}bu.close=()=>{Xf.forEach((t,e)=>{e.doClose()}),Xf.clear()};bu._context=null;const Wo=bu;Wo.install=t=>{Wo._context=t._context,t.config.globalProperties.$msgbox=Wo,t.config.globalProperties.$messageBox=Wo,t.config.globalProperties.$alert=Wo.alert,t.config.globalProperties.$confirm=Wo.confirm,t.config.globalProperties.$prompt=Wo.prompt};const bEe=Wo,mF=["success","info","warning","error"],wEe=Re({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:Zt},id:{type:String,default:""},message:{type:Q([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:Q(Function),default:()=>{}},onClose:{type:Q(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...mF,""],default:""},zIndex:Number}),TEe={destroy:()=>!0},xEe=["id"],EEe=["textContent"],kEe={key:0},OEe=["innerHTML"],MEe=q({name:"ElNotification"}),REe=q({...MEe,props:wEe,emits:TEe,setup(t,{expose:e}){const n=t,{ns:r,zIndex:a}=Pv("notification"),{nextZIndex:s,currentZIndex:o}=a,{Close:i}=TS,l=P(!1);let c;const u=R(()=>{const C=n.type;return C&&fi[n.type]?r.m(C):""}),f=R(()=>n.type&&fi[n.type]||n.icon),d=R(()=>n.position.endsWith("right")?"right":"left"),p=R(()=>n.position.startsWith("top")?"top":"bottom"),h=R(()=>{var C;return{[p.value]:`${n.offset}px`,zIndex:(C=n.zIndex)!=null?C:o.value}});function g(){n.duration>0&&({stop:c}=wl(()=>{l.value&&m()},n.duration))}function y(){c==null||c()}function m(){l.value=!1}function b({code:C}){C===He.delete||C===He.backspace?y():C===He.esc?l.value&&m():g()}return at(()=>{g(),s(),l.value=!0}),vn(document,"keydown",b),e({visible:l,close:m}),(C,S)=>(V(),ae(jn,{name:v(r).b("fade"),onBeforeLeave:C.onClose,onAfterLeave:S[1]||(S[1]=T=>C.$emit("destroy")),persisted:""},{default:Z(()=>[rt(H("div",{id:C.id,class:U([v(r).b(),C.customClass,v(d)]),style:Pe(v(h)),role:"alert",onMouseenter:y,onMouseleave:g,onClick:S[0]||(S[0]=(...T)=>C.onClick&&C.onClick(...T))},[v(f)?(V(),ae(v(Ge),{key:0,class:U([v(r).e("icon"),v(u)])},{default:Z(()=>[(V(),ae(dt(v(f))))]),_:1},8,["class"])):ee("v-if",!0),H("div",{class:U(v(r).e("group"))},[H("h2",{class:U(v(r).e("title")),textContent:Te(C.title)},null,10,EEe),rt(H("div",{class:U(v(r).e("content")),style:Pe(C.title?void 0:{margin:0})},[ce(C.$slots,"default",{},()=>[C.dangerouslyUseHTMLString?(V(),z(Ue,{key:1},[ee(" Caution here, message could've been compromised, never use user's input as message "),H("p",{innerHTML:C.message},null,8,OEe)],2112)):(V(),z("p",kEe,Te(C.message),1))])],6),[[Rt,C.message]]),C.showClose?(V(),ae(v(Ge),{key:0,class:U(v(r).e("closeBtn")),onClick:Ze(m,["stop"])},{default:Z(()=>[j(v(i))]),_:1},8,["class","onClick"])):ee("v-if",!0)],2)],46,xEe),[[Rt,l.value]])]),_:3},8,["name","onBeforeLeave"]))}});var _Ee=Ve(REe,[["__file","notification.vue"]]);const Wh={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},b1=16;let VEe=1;const ou=function(t={},e=null){if(!Ot)return{close:()=>{}};(typeof t=="string"||yn(t))&&(t={message:t});const n=t.position||"top-right";let r=t.offset||0;Wh[n].forEach(({vm:u})=>{var f;r+=(((f=u.el)==null?void 0:f.offsetHeight)||0)+b1}),r+=b1;const a=`notification_${VEe++}`,s=t.onClose,o={...t,offset:r,id:a,onClose:()=>{DEe(a,n,s)}};let i=document.body;_a(t.appendTo)?i=t.appendTo:tt(t.appendTo)&&(i=document.querySelector(t.appendTo)),_a(i)||(i=document.body);const l=document.createElement("div"),c=j(_Ee,o,yn(o.message)?{default:()=>o.message}:null);return c.appContext=e??ou._context,c.props.onDestroy=()=>{li(null,l)},li(c,l),Wh[n].push({vm:c}),i.appendChild(l.firstElementChild),{close:()=>{c.component.exposed.visible.value=!1}}};mF.forEach(t=>{ou[t]=(e={})=>((typeof e=="string"||yn(e))&&(e={message:e}),ou({...e,type:t}))});function DEe(t,e,n){const r=Wh[e],a=r.findIndex(({vm:c})=>{var u;return((u=c.component)==null?void 0:u.props.id)===t});if(a===-1)return;const{vm:s}=r[a];if(!s)return;n==null||n(s);const o=s.el.offsetHeight,i=e.split("-")[0];r.splice(a,1);const l=r.length;if(!(l<1))for(let c=a;c<l;c++){const{el:u,component:f}=r[c].vm,d=Number.parseInt(u.style[i],10)-o-b1;f.props.offset=d}}function LEe(){for(const t of Object.values(Wh))t.forEach(({vm:e})=>{e.component.exposed.visible.value=!1})}ou.closeAll=LEe;ou._context=null;const NEe=TL(ou,"$notify");var BEe=[Pxe,jxe,S1,bEe,NEe,rB],FEe=Zse([...Bxe,...BEe]);const $Ee={class:"icon"},UEe=["xlink:href"],Qn=q({__name:"SvgIcon",props:{icon:{}},setup(t){return(e,n)=>(V(),z("svg",$Ee,[H("use",{"xlink:href":`/static/vue/icons/svg-icons.svg#${e.icon}`},null,8,UEe)]))}}),AEe={id:"leftSidebar"},WEe={class:"sidebar-item",href:"/patients"},IEe={class:"sidebar-item",href:"/favorite-patients"},PEe={class:"sidebar-item",href:"/add-patient/"},GEe={class:"sidebar-item",href:"/list-forms"},zEe=q({__name:"AsideView",setup(t){return(e,n)=>{const r=et("el-tooltip");return V(),z("aside",AEe,[j(r,{content:"Patients",placement:"right"},{default:Z(()=>[H("a",WEe,[j(Qn,{icon:"home-icon"})])]),_:1}),j(r,{content:"Favorite Patients",placement:"right"},{default:Z(()=>[H("a",IEe,[j(Qn,{icon:"star-icon"})])]),_:1}),j(r,{content:"Add Patient",placement:"right"},{default:Z(()=>[H("a",PEe,[j(Qn,{icon:"user-plus-icon"})])]),_:1}),j(r,{content:"List Forms",placement:"right"},{default:Z(()=>[H("a",GEe,[j(Qn,{icon:"list-icon"})])]),_:1})])}}}),HEe="/static/craniocatchlogo.svg",_d=(t,e)=>{const n=t.__vccOpts||t;for(const[r,a]of e)n[r]=a;return n},KEe={},jEe={id:"header"},YEe=H("div",{class:"logo"},[H("a",{href:"/"},[H("img",{src:HEe,alt:""})])],-1),qEe=[YEe];function XEe(t,e){return V(),z("header",jEe,qEe)}const ZEe=_d(KEe,[["render",XEe]]),JEe={id:"footer"},QEe=lq('<div class="copyright">@ CranioCatch 2023</div><div class="links"><a href="https://clinic.craniocatch.com/static/pdf/CranioCatchClarificationText.pdf" target="_blank">Portal Aydnlatma Metni</a><a href="https://clinic.craniocatch.com/static/pdf/CranioCatchCookiePolicy.pdf" target="_blank">erez Politikas</a><a href="https://clinic.craniocatch.com/static/pdf/CranioCatchPrivacyPolicy.pdf" target="_blank">Gizlilik Politikas</a></div>',2),eke=H("span",null,"Koyu Tema",-1),tke={__name:"FooterView",setup(t){const e=P("");return(n,r)=>{const a=et("el-switch");return V(),z("footer",JEe,[QEe,H("div",null,[eke,j(a,{modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=s=>e.value=s),style:{"--el-switch-on-color":"#1876ff"}},null,8,["modelValue"])])])}}},nke={};function rke(t,e){return V(),z("p",null,"anatomy tab preview")}const ake=_d(nke,[["render",rke]]),ske="/static/linear-bg.svg",oke=q({__name:"SearchInput",emits:["onSearch"],setup(t,{emit:e}){const n=e,r=P(""),a=P();return pe(r,()=>{n("onSearch",r.value)}),(s,o)=>(V(),z("div",{class:"search-area",onClick:o[1]||(o[1]=()=>a.value.focus())},[j(Qn,{icon:"search-icon"}),rt(H("input",{type:"text",ref_key:"inputRef",ref:a,"onUpdate:modelValue":o[0]||(o[0]=i=>r.value=i),placeholder:"Search"},null,512),[[Pc,r.value]])]))}}),mt=Dt({myValue:"empty",activeTool:"range",files:{},diagnoses:[],labelMaps:[],setActiveTool(t){this.activeTool=t},pickedPoint:[0,0,0],setPickedPoint(t){this.pickedPoint=t},currentSlices:{}}),ike=H("div",{class:"tab-title"},"Diagnosis",-1),lke={class:"diagnosis-list"},cke={class:"diagnosis-list__item"},uke={class:"custom-check"},fke=["onUpdate:modelValue","onChange"],dke={class:"text"},pke={class:"diagnosis-list__sub-item"},gke={class:"custom-check"},hke=["onChange","onUpdate:modelValue"],vke={class:"text"},yke={class:"opacity-container"},mke=["onUpdate:modelValue","onChange"],Cke=H("img",{src:ske,alt:"",class:"linear-bg"},null,-1),Ske={class:"stick-container"},bke=["onUpdate:modelValue","onChange"],wke={__name:"DiagnosisView",setup(t){const e=P(mt.diagnoses),n=P(""),r=P([]);pe(()=>mt.diagnoses,()=>e.value=mt.diagnoses),pe(n,()=>{e.value=mt.diagnoses.map(l=>({...l,children:l.children.filter(c=>c.name.toLowerCase().includes(n.value.toLowerCase()))})).filter(l=>l.children.length!==0),r.value=n.value==""?[]:Object.keys(e.value).map(l=>parseInt(l))});const a=(l,c)=>{mt.labelMaps=mt.labelMaps.map(u=>({...u,children:u.children.map(f=>({...f,checked:f.name==l?c:f.checked}))}))},s=(l,c)=>{mt.labelMaps=mt.labelMaps.map(u=>({...u,children:u.children.map(f=>({...f,checked:u.name==l?c:f.checked}))})),mt.diagnoses=mt.diagnoses.map(u=>({...u,children:u.children.map(f=>({...f,checked:u.name==l?c:f.checked}))}))},o=(l,c)=>{mt.labelMaps=mt.labelMaps.map(u=>({...u,children:u.children.map(f=>({...f,opacity:f.name==l?parseInt(c)/100:f.opacity}))}))},i=(l,c)=>{mt.labelMaps=mt.labelMaps.map(u=>({...u,children:u.children.map(f=>({...f,color:f.name==l?c:f.color}))}))};return(l,c)=>{const u=et("el-collapse-item"),f=et("el-collapse");return V(),z(Ue,null,[ike,j(oke,{onOnSearch:c[0]||(c[0]=d=>n.value=d)}),H("div",lke,[j(f,{ref:"menu",modelValue:r.value,"onUpdate:modelValue":c[3]||(c[3]=d=>r.value=d)},{default:Z(()=>[(V(!0),z(Ue,null,gt(e.value,(d,p)=>(V(),ae(u,{name:p},{title:Z(()=>[H("div",cke,[j(Qn,{icon:"caret-down-icon",class:"main-caret"}),H("div",uke,[rt(H("input",{type:"checkbox",onClick:c[1]||(c[1]=Ze(()=>{},["stop"])),"onUpdate:modelValue":h=>d.checked=h,onChange:h=>s(d.name,h.target.checked)},null,40,fke),[[Gc,d.checked]]),j(Qn,{icon:"cute-check-icon"})]),H("span",dke,Te(d.name),1)])]),default:Z(()=>[(V(!0),z(Ue,null,gt(d.children,(h,g)=>(V(),ae(u,{name:`${p}-${g}`},{title:Z(()=>[H("div",pke,[j(Qn,{icon:"caret-down-icon",class:"main-caret"}),H("div",gke,[rt(H("input",{type:"checkbox",onClick:c[2]||(c[2]=Ze(()=>{},["stop"])),onChange:y=>a(h.name,y.target.checked),"onUpdate:modelValue":y=>h.checked=y},null,40,hke),[[Gc,h.checked]]),j(Qn,{icon:"cute-check-icon"})]),H("span",vke,Te(h.name),1),H("div",yke,[H("div",{class:"overlay",style:Pe({background:`linear-gradient(90deg, transparent 0%, ${h.color} 65%)`})},null,4),rt(H("input",{type:"range","onUpdate:modelValue":y=>h.opacity=y,min:"0",max:"100",onChange:y=>o(h.name,y.target.value)},null,40,mke),[[Pc,h.opacity]]),Cke,H("div",Ske,[H("div",{class:"stick",style:Pe({left:`${h.opacity}%`,background:h.color})},null,4)])]),H("div",{class:"color-container",style:Pe({"background-color":h.color})},[rt(H("input",{type:"color","onUpdate:modelValue":y=>h.color=y,onChange:y=>i(h.name,y.target.value)},null,40,bke),[[Pc,h.color]])],4)])]),_:2},1032,["name"]))),256))]),_:2},1032,["name"]))),256))]),_:1},8,["modelValue"])])],64)}}},CF="/static/logo-dark.svg",Ng=Dt({dicomReports:[]}),Ya=Dt({toothSortingVisible:!1,chooseAnalysisVisible:!1,analysis_types:[]}),Tke={class:"report-area"},xke=H("div",{class:"report-area__head"},[H("div",{class:"logo"},[H("img",{src:CF,alt:""})])],-1),Eke={class:"report-area__body"},kke={class:"no-data-container"},Oke=H("div",{class:"title"},"3D Analysis",-1),Mke=H("div",{class:"content"},[Ct("Here you can choose "),H("strong",null,"3D Analysis"),Ct(" type start analysis")],-1),Rke={class:"report-area__head"},_ke=H("div",{class:"logo"},[H("img",{src:CF,alt:""})],-1),Vke={class:"no-data-container but-yes"},Dke=H("div",{class:"title"},"3D Analysis",-1),Lke=H("div",{class:"content"},[Ct("Here you can choose "),H("strong",null,"3D Analysis"),Ct(" type start analysis")],-1),Nke={class:"report-area__body"},Bke={class:"reports"},Fke={class:"reports-group"},$ke={class:"reports-group__date"},Uke=["href"],Ake={class:"reports-group__item"},Wke={class:"name"},Ike={class:"date"},Pke={__name:"ReportView",setup(t){return(e,n)=>{var a,s,o,i,l,c,u;const r=et("el-button");return V(),z("div",Tke,[((o=(s=(a=v(Ng))==null?void 0:a.dicomReports[0])==null?void 0:s.reports)==null?void 0:o.length)===0&&((c=(l=(i=v(Ng))==null?void 0:i.dicomReports[1])==null?void 0:l.reports)==null?void 0:c.length)===0?(V(),z(Ue,{key:0},[xke,H("div",Eke,[H("div",kke,[Oke,Mke,j(r,{class:"btn-sweet-blue text-white-o btn-large-padding",onClick:n[0]||(n[0]=f=>v(Ya).chooseAnalysisVisible=!0)},{default:Z(()=>[Ct("Choose Planing")]),_:1})])])],64)):(V(),z(Ue,{key:1},[H("div",Rke,[_ke,H("div",Vke,[Dke,Lke,j(r,{class:"btn-sweet-blue text-white-o btn-large-padding",onClick:n[1]||(n[1]=f=>v(Ya).chooseAnalysisVisible=!0)},{default:Z(()=>[Ct("Choose Analysis")]),_:1})])]),H("div",Nke,[H("div",Bke,[(V(!0),z(Ue,null,gt((u=v(Ng))==null?void 0:u.dicomReports,f=>(V(),z("div",Fke,[H("div",$ke,Te(f.date),1),(V(!0),z(Ue,null,gt(f.reports,d=>(V(),z("a",{style:{"text-decoration":"initial",color:"initial"},href:d.url!=="#;"?d.url:null},[H("div",Ake,[d.status==="process"?(V(),ae(Qn,{key:0,icon:"loading-icon",class:"loading-anim"})):(V(),ae(Qn,{key:1,icon:"thunderbolt-icon",style:Pe({color:d.status==="error"?"red":"lime"})},null,8,["style"])),H("span",Wke,[H("strong",null,Te(d.report_type_name),1)]),H("span",Ike,Te(d.date),1)])],8,Uke))),256))]))),256))])])],64))])}}},Gke={id:"rightArea"},zke={class:"tab-system"},Hke={class:"tab-system__head"},Kke=["onClick"],jke={class:"tab-system__body"},Yke=q({__name:"RightArea",setup(t){const e=Dt({activeMenu:2,menus:[{id:2,name:"Diagnosis",icon:"layer-icon"},{id:3,name:"Report",icon:"layer-icon"}]});return(n,r)=>(V(),z("div",Gke,[H("div",zke,[H("div",Hke,[(V(!0),z(Ue,null,gt(e.menus,a=>(V(),z("div",{class:U(["item",{active:a.id===e.activeMenu}]),onClick:()=>e.activeMenu=a.id},[j(Qn,{icon:a.icon},null,8,["icon"]),H("span",null,Te(a.name),1)],10,Kke))),256))]),H("div",jke,[e.activeMenu===1?(V(),ae(ake,{key:0})):ee("",!0),e.activeMenu===2?(V(),ae(wke,{key:1})):ee("",!0),e.activeMenu===3?(V(),ae(Pke,{key:2})):ee("",!0)])])]))}});function SF(t,e){return function(){return t.apply(e,arguments)}}const{toString:qke}=Object.prototype,{getPrototypeOf:Nb}=Object,Qv=(t=>e=>{const n=qke.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),$s=t=>(t=t.toLowerCase(),e=>Qv(e)===t),e0=t=>e=>typeof e===t,{isArray:wu}=Array,Zf=e0("undefined");function Xke(t){return t!==null&&!Zf(t)&&t.constructor!==null&&!Zf(t.constructor)&&ka(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const bF=$s("ArrayBuffer");function Zke(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&bF(t.buffer),e}const Jke=e0("string"),ka=e0("function"),wF=e0("number"),t0=t=>t!==null&&typeof t=="object",Qke=t=>t===!0||t===!1,Bg=t=>{if(Qv(t)!=="object")return!1;const e=Nb(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},eOe=$s("Date"),tOe=$s("File"),nOe=$s("Blob"),rOe=$s("FileList"),aOe=t=>t0(t)&&ka(t.pipe),sOe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ka(t.append)&&((e=Qv(t))==="formdata"||e==="object"&&ka(t.toString)&&t.toString()==="[object FormData]"))},oOe=$s("URLSearchParams"),iOe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Vd(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,a;if(typeof t!="object"&&(t=[t]),wu(t))for(r=0,a=t.length;r<a;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let i;for(r=0;r<o;r++)i=s[r],e.call(null,t[i],i,t)}}function TF(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,a;for(;r-- >0;)if(a=n[r],e===a.toLowerCase())return a;return null}const xF=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,EF=t=>!Zf(t)&&t!==xF;function w1(){const{caseless:t}=EF(this)&&this||{},e={},n=(r,a)=>{const s=t&&TF(e,a)||a;Bg(e[s])&&Bg(r)?e[s]=w1(e[s],r):Bg(r)?e[s]=w1({},r):wu(r)?e[s]=r.slice():e[s]=r};for(let r=0,a=arguments.length;r<a;r++)arguments[r]&&Vd(arguments[r],n);return e}const lOe=(t,e,n,{allOwnKeys:r}={})=>(Vd(e,(a,s)=>{n&&ka(a)?t[s]=SF(a,n):t[s]=a},{allOwnKeys:r}),t),cOe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),uOe=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},fOe=(t,e,n,r)=>{let a,s,o;const i={};if(e=e||{},t==null)return e;do{for(a=Object.getOwnPropertyNames(t),s=a.length;s-- >0;)o=a[s],(!r||r(o,t,e))&&!i[o]&&(e[o]=t[o],i[o]=!0);t=n!==!1&&Nb(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},dOe=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},pOe=t=>{if(!t)return null;if(wu(t))return t;let e=t.length;if(!wF(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},gOe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Nb(Uint8Array)),hOe=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let a;for(;(a=r.next())&&!a.done;){const s=a.value;e.call(t,s[0],s[1])}},vOe=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},yOe=$s("HTMLFormElement"),mOe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,a){return r.toUpperCase()+a}),ek=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),COe=$s("RegExp"),kF=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Vd(n,(a,s)=>{let o;(o=e(a,s,t))!==!1&&(r[s]=o||a)}),Object.defineProperties(t,r)},SOe=t=>{kF(t,(e,n)=>{if(ka(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(ka(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},bOe=(t,e)=>{const n={},r=a=>{a.forEach(s=>{n[s]=!0})};return wu(t)?r(t):r(String(t).split(e)),n},wOe=()=>{},TOe=(t,e)=>(t=+t,Number.isFinite(t)?t:e),gy="abcdefghijklmnopqrstuvwxyz",tk="0123456789",OF={DIGIT:tk,ALPHA:gy,ALPHA_DIGIT:gy+gy.toUpperCase()+tk},xOe=(t=16,e=OF.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function EOe(t){return!!(t&&ka(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const kOe=t=>{const e=new Array(10),n=(r,a)=>{if(t0(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[a]=r;const s=wu(r)?[]:{};return Vd(r,(o,i)=>{const l=n(o,a+1);!Zf(l)&&(s[i]=l)}),e[a]=void 0,s}}return r};return n(t,0)},OOe=$s("AsyncFunction"),MOe=t=>t&&(t0(t)||ka(t))&&ka(t.then)&&ka(t.catch),Ie={isArray:wu,isArrayBuffer:bF,isBuffer:Xke,isFormData:sOe,isArrayBufferView:Zke,isString:Jke,isNumber:wF,isBoolean:Qke,isObject:t0,isPlainObject:Bg,isUndefined:Zf,isDate:eOe,isFile:tOe,isBlob:nOe,isRegExp:COe,isFunction:ka,isStream:aOe,isURLSearchParams:oOe,isTypedArray:gOe,isFileList:rOe,forEach:Vd,merge:w1,extend:lOe,trim:iOe,stripBOM:cOe,inherits:uOe,toFlatObject:fOe,kindOf:Qv,kindOfTest:$s,endsWith:dOe,toArray:pOe,forEachEntry:hOe,matchAll:vOe,isHTMLForm:yOe,hasOwnProperty:ek,hasOwnProp:ek,reduceDescriptors:kF,freezeMethods:SOe,toObjectSet:bOe,toCamelCase:mOe,noop:wOe,toFiniteNumber:TOe,findKey:TF,global:xF,isContextDefined:EF,ALPHABET:OF,generateString:xOe,isSpecCompliantForm:EOe,toJSONObject:kOe,isAsyncFn:OOe,isThenable:MOe};function an(t,e,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a)}Ie.inherits(an,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ie.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const MF=an.prototype,RF={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{RF[t]={value:t}});Object.defineProperties(an,RF);Object.defineProperty(MF,"isAxiosError",{value:!0});an.from=(t,e,n,r,a,s)=>{const o=Object.create(MF);return Ie.toFlatObject(t,o,function(l){return l!==Error.prototype},i=>i!=="isAxiosError"),an.call(o,t.message,e,n,r,a),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const ROe=null;function T1(t){return Ie.isPlainObject(t)||Ie.isArray(t)}function _F(t){return Ie.endsWith(t,"[]")?t.slice(0,-2):t}function nk(t,e,n){return t?t.concat(e).map(function(a,s){return a=_F(a),!n&&s?"["+a+"]":a}).join(n?".":""):e}function _Oe(t){return Ie.isArray(t)&&!t.some(T1)}const VOe=Ie.toFlatObject(Ie,{},null,function(e){return/^is[A-Z]/.test(e)});function n0(t,e,n){if(!Ie.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Ie.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,y){return!Ie.isUndefined(y[g])});const r=n.metaTokens,a=n.visitor||u,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Ie.isSpecCompliantForm(e);if(!Ie.isFunction(a))throw new TypeError("visitor must be a function");function c(h){if(h===null)return"";if(Ie.isDate(h))return h.toISOString();if(!l&&Ie.isBlob(h))throw new an("Blob is not supported. Use a Buffer instead.");return Ie.isArrayBuffer(h)||Ie.isTypedArray(h)?l&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function u(h,g,y){let m=h;if(h&&!y&&typeof h=="object"){if(Ie.endsWith(g,"{}"))g=r?g:g.slice(0,-2),h=JSON.stringify(h);else if(Ie.isArray(h)&&_Oe(h)||(Ie.isFileList(h)||Ie.endsWith(g,"[]"))&&(m=Ie.toArray(h)))return g=_F(g),m.forEach(function(C,S){!(Ie.isUndefined(C)||C===null)&&e.append(o===!0?nk([g],S,s):o===null?g:g+"[]",c(C))}),!1}return T1(h)?!0:(e.append(nk(y,g,s),c(h)),!1)}const f=[],d=Object.assign(VOe,{defaultVisitor:u,convertValue:c,isVisitable:T1});function p(h,g){if(!Ie.isUndefined(h)){if(f.indexOf(h)!==-1)throw Error("Circular reference detected in "+g.join("."));f.push(h),Ie.forEach(h,function(m,b){(!(Ie.isUndefined(m)||m===null)&&a.call(e,m,Ie.isString(b)?b.trim():b,g,d))===!0&&p(m,g?g.concat(b):[b])}),f.pop()}}if(!Ie.isObject(t))throw new TypeError("data must be an object");return p(t),e}function rk(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Bb(t,e){this._pairs=[],t&&n0(t,this,e)}const VF=Bb.prototype;VF.append=function(e,n){this._pairs.push([e,n])};VF.toString=function(e){const n=e?function(r){return e.call(this,r,rk)}:rk;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function DOe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function DF(t,e,n){if(!e)return t;const r=n&&n.encode||DOe,a=n&&n.serialize;let s;if(a?s=a(e,n):s=Ie.isURLSearchParams(e)?e.toString():new Bb(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class ak{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ie.forEach(this.handlers,function(r){r!==null&&e(r)})}}const LF={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},LOe=typeof URLSearchParams<"u"?URLSearchParams:Bb,NOe=typeof FormData<"u"?FormData:null,BOe=typeof Blob<"u"?Blob:null,FOe={isBrowser:!0,classes:{URLSearchParams:LOe,FormData:NOe,Blob:BOe},protocols:["http","https","file","blob","url","data"]},NF=typeof window<"u"&&typeof document<"u",$Oe=(t=>NF&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),UOe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",AOe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:NF,hasStandardBrowserEnv:$Oe,hasStandardBrowserWebWorkerEnv:UOe},Symbol.toStringTag,{value:"Module"})),Ts={...AOe,...FOe};function WOe(t,e){return n0(t,new Ts.classes.URLSearchParams,Object.assign({visitor:function(n,r,a,s){return Ts.isNode&&Ie.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function IOe(t){return Ie.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function POe(t){const e={},n=Object.keys(t);let r;const a=n.length;let s;for(r=0;r<a;r++)s=n[r],e[s]=t[s];return e}function BF(t){function e(n,r,a,s){let o=n[s++];if(o==="__proto__")return!0;const i=Number.isFinite(+o),l=s>=n.length;return o=!o&&Ie.isArray(a)?a.length:o,l?(Ie.hasOwnProp(a,o)?a[o]=[a[o],r]:a[o]=r,!i):((!a[o]||!Ie.isObject(a[o]))&&(a[o]=[]),e(n,r,a[o],s)&&Ie.isArray(a[o])&&(a[o]=POe(a[o])),!i)}if(Ie.isFormData(t)&&Ie.isFunction(t.entries)){const n={};return Ie.forEachEntry(t,(r,a)=>{e(IOe(r),a,n,0)}),n}return null}function GOe(t,e,n){if(Ie.isString(t))try{return(e||JSON.parse)(t),Ie.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Fb={transitional:LF,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",a=r.indexOf("application/json")>-1,s=Ie.isObject(e);if(s&&Ie.isHTMLForm(e)&&(e=new FormData(e)),Ie.isFormData(e))return a?JSON.stringify(BF(e)):e;if(Ie.isArrayBuffer(e)||Ie.isBuffer(e)||Ie.isStream(e)||Ie.isFile(e)||Ie.isBlob(e))return e;if(Ie.isArrayBufferView(e))return e.buffer;if(Ie.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return WOe(e,this.formSerializer).toString();if((i=Ie.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return n0(i?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||a?(n.setContentType("application/json",!1),GOe(e)):e}],transformResponse:[function(e){const n=this.transitional||Fb.transitional,r=n&&n.forcedJSONParsing,a=this.responseType==="json";if(e&&Ie.isString(e)&&(r&&!this.responseType||a)){const o=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(i){if(o)throw i.name==="SyntaxError"?an.from(i,an.ERR_BAD_RESPONSE,this,null,this.response):i}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ts.classes.FormData,Blob:Ts.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ie.forEach(["delete","get","head","post","put","patch"],t=>{Fb.headers[t]={}});const $b=Fb,zOe=Ie.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),HOe=t=>{const e={};let n,r,a;return t&&t.split(`
`).forEach(function(o){a=o.indexOf(":"),n=o.substring(0,a).trim().toLowerCase(),r=o.substring(a+1).trim(),!(!n||e[n]&&zOe[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},sk=Symbol("internals");function Lu(t){return t&&String(t).trim().toLowerCase()}function Fg(t){return t===!1||t==null?t:Ie.isArray(t)?t.map(Fg):String(t)}function KOe(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const jOe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function hy(t,e,n,r,a){if(Ie.isFunction(r))return r.call(this,e,n);if(a&&(e=n),!!Ie.isString(e)){if(Ie.isString(r))return e.indexOf(r)!==-1;if(Ie.isRegExp(r))return r.test(e)}}function YOe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function qOe(t,e){const n=Ie.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(a,s,o){return this[r].call(this,e,a,s,o)},configurable:!0})})}class r0{constructor(e){e&&this.set(e)}set(e,n,r){const a=this;function s(i,l,c){const u=Lu(l);if(!u)throw new Error("header name must be a non-empty string");const f=Ie.findKey(a,u);(!f||a[f]===void 0||c===!0||c===void 0&&a[f]!==!1)&&(a[f||l]=Fg(i))}const o=(i,l)=>Ie.forEach(i,(c,u)=>s(c,u,l));return Ie.isPlainObject(e)||e instanceof this.constructor?o(e,n):Ie.isString(e)&&(e=e.trim())&&!jOe(e)?o(HOe(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=Lu(e),e){const r=Ie.findKey(this,e);if(r){const a=this[r];if(!n)return a;if(n===!0)return KOe(a);if(Ie.isFunction(n))return n.call(this,a,r);if(Ie.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Lu(e),e){const r=Ie.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||hy(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let a=!1;function s(o){if(o=Lu(o),o){const i=Ie.findKey(r,o);i&&(!n||hy(r,r[i],i,n))&&(delete r[i],a=!0)}}return Ie.isArray(e)?e.forEach(s):s(e),a}clear(e){const n=Object.keys(this);let r=n.length,a=!1;for(;r--;){const s=n[r];(!e||hy(this,this[s],s,e,!0))&&(delete this[s],a=!0)}return a}normalize(e){const n=this,r={};return Ie.forEach(this,(a,s)=>{const o=Ie.findKey(r,s);if(o){n[o]=Fg(a),delete n[s];return}const i=e?YOe(s):String(s).trim();i!==s&&delete n[s],n[i]=Fg(a),r[i]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Ie.forEach(this,(r,a)=>{r!=null&&r!==!1&&(n[a]=e&&Ie.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(a=>r.set(a)),r}static accessor(e){const r=(this[sk]=this[sk]={accessors:{}}).accessors,a=this.prototype;function s(o){const i=Lu(o);r[i]||(qOe(a,o),r[i]=!0)}return Ie.isArray(e)?e.forEach(s):s(e),this}}r0.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ie.reduceDescriptors(r0.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Ie.freezeMethods(r0);const ao=r0;function vy(t,e){const n=this||$b,r=e||n,a=ao.from(r.headers);let s=r.data;return Ie.forEach(t,function(i){s=i.call(n,s,a.normalize(),e?e.status:void 0)}),a.normalize(),s}function FF(t){return!!(t&&t.__CANCEL__)}function Dd(t,e,n){an.call(this,t??"canceled",an.ERR_CANCELED,e,n),this.name="CanceledError"}Ie.inherits(Dd,an,{__CANCEL__:!0});function XOe(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new an("Request failed with status code "+n.status,[an.ERR_BAD_REQUEST,an.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const ZOe=Ts.hasStandardBrowserEnv?{write(t,e,n,r,a,s){const o=[t+"="+encodeURIComponent(e)];Ie.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Ie.isString(r)&&o.push("path="+r),Ie.isString(a)&&o.push("domain="+a),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function JOe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function QOe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function $F(t,e){return t&&!JOe(e)?QOe(t,e):e}const eMe=Ts.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function a(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=a(window.location.href),function(o){const i=Ie.isString(o)?a(o):o;return i.protocol===r.protocol&&i.host===r.host}}():function(){return function(){return!0}}();function tMe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function nMe(t,e){t=t||10;const n=new Array(t),r=new Array(t);let a=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[s];o||(o=c),n[a]=l,r[a]=c;let f=s,d=0;for(;f!==a;)d+=n[f++],f=f%t;if(a=(a+1)%t,a===s&&(s=(s+1)%t),c-o<e)return;const p=u&&c-u;return p?Math.round(d*1e3/p):void 0}}function ok(t,e){let n=0;const r=nMe(50,250);return a=>{const s=a.loaded,o=a.lengthComputable?a.total:void 0,i=s-n,l=r(i),c=s<=o;n=s;const u={loaded:s,total:o,progress:o?s/o:void 0,bytes:i,rate:l||void 0,estimated:l&&o&&c?(o-s)/l:void 0,event:a};u[e?"download":"upload"]=!0,t(u)}}const rMe=typeof XMLHttpRequest<"u",aMe=rMe&&function(t){return new Promise(function(n,r){let a=t.data;const s=ao.from(t.headers).normalize();let{responseType:o,withXSRFToken:i}=t,l;function c(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}let u;if(Ie.isFormData(a)){if(Ts.hasStandardBrowserEnv||Ts.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((u=s.getContentType())!==!1){const[g,...y]=u?u.split(";").map(m=>m.trim()).filter(Boolean):[];s.setContentType([g||"multipart/form-data",...y].join("; "))}}let f=new XMLHttpRequest;if(t.auth){const g=t.auth.username||"",y=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(g+":"+y))}const d=$F(t.baseURL,t.url);f.open(t.method.toUpperCase(),DF(d,t.params,t.paramsSerializer),!0),f.timeout=t.timeout;function p(){if(!f)return;const g=ao.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),m={data:!o||o==="text"||o==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:g,config:t,request:f};XOe(function(C){n(C),c()},function(C){r(C),c()},m),f=null}if("onloadend"in f?f.onloadend=p:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(p)},f.onabort=function(){f&&(r(new an("Request aborted",an.ECONNABORTED,t,f)),f=null)},f.onerror=function(){r(new an("Network Error",an.ERR_NETWORK,t,f)),f=null},f.ontimeout=function(){let y=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const m=t.transitional||LF;t.timeoutErrorMessage&&(y=t.timeoutErrorMessage),r(new an(y,m.clarifyTimeoutError?an.ETIMEDOUT:an.ECONNABORTED,t,f)),f=null},Ts.hasStandardBrowserEnv&&(i&&Ie.isFunction(i)&&(i=i(t)),i||i!==!1&&eMe(d))){const g=t.xsrfHeaderName&&t.xsrfCookieName&&ZOe.read(t.xsrfCookieName);g&&s.set(t.xsrfHeaderName,g)}a===void 0&&s.setContentType(null),"setRequestHeader"in f&&Ie.forEach(s.toJSON(),function(y,m){f.setRequestHeader(m,y)}),Ie.isUndefined(t.withCredentials)||(f.withCredentials=!!t.withCredentials),o&&o!=="json"&&(f.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&f.addEventListener("progress",ok(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",ok(t.onUploadProgress)),(t.cancelToken||t.signal)&&(l=g=>{f&&(r(!g||g.type?new Dd(null,t,f):g),f.abort(),f=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l)));const h=tMe(d);if(h&&Ts.protocols.indexOf(h)===-1){r(new an("Unsupported protocol "+h+":",an.ERR_BAD_REQUEST,t));return}f.send(a||null)})},x1={http:ROe,xhr:aMe};Ie.forEach(x1,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ik=t=>`- ${t}`,sMe=t=>Ie.isFunction(t)||t===null||t===!1,UF={getAdapter:t=>{t=Ie.isArray(t)?t:[t];const{length:e}=t;let n,r;const a={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!sMe(n)&&(r=x1[(o=String(n)).toLowerCase()],r===void 0))throw new an(`Unknown adapter '${o}'`);if(r)break;a[o||"#"+s]=r}if(!r){const s=Object.entries(a).map(([i,l])=>`adapter ${i} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(ik).join(`
`):" "+ik(s[0]):"as no adapter specified";throw new an("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:x1};function yy(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Dd(null,t)}function lk(t){return yy(t),t.headers=ao.from(t.headers),t.data=vy.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),UF.getAdapter(t.adapter||$b.adapter)(t).then(function(r){return yy(t),r.data=vy.call(t,t.transformResponse,r),r.headers=ao.from(r.headers),r},function(r){return FF(r)||(yy(t),r&&r.response&&(r.response.data=vy.call(t,t.transformResponse,r.response),r.response.headers=ao.from(r.response.headers))),Promise.reject(r)})}const ck=t=>t instanceof ao?t.toJSON():t;function iu(t,e){e=e||{};const n={};function r(c,u,f){return Ie.isPlainObject(c)&&Ie.isPlainObject(u)?Ie.merge.call({caseless:f},c,u):Ie.isPlainObject(u)?Ie.merge({},u):Ie.isArray(u)?u.slice():u}function a(c,u,f){if(Ie.isUndefined(u)){if(!Ie.isUndefined(c))return r(void 0,c,f)}else return r(c,u,f)}function s(c,u){if(!Ie.isUndefined(u))return r(void 0,u)}function o(c,u){if(Ie.isUndefined(u)){if(!Ie.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function i(c,u,f){if(f in e)return r(c,u);if(f in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(c,u)=>a(ck(c),ck(u),!0)};return Ie.forEach(Object.keys(Object.assign({},t,e)),function(u){const f=l[u]||a,d=f(t[u],e[u],u);Ie.isUndefined(d)&&f!==i||(n[u]=d)}),n}const AF="1.6.7",Ub={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Ub[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const uk={};Ub.transitional=function(e,n,r){function a(s,o){return"[Axios v"+AF+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,i)=>{if(e===!1)throw new an(a(o," has been removed"+(n?" in "+n:"")),an.ERR_DEPRECATED);return n&&!uk[o]&&(uk[o]=!0,console.warn(a(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,i):!0}};function oMe(t,e,n){if(typeof t!="object")throw new an("options must be an object",an.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let a=r.length;for(;a-- >0;){const s=r[a],o=e[s];if(o){const i=t[s],l=i===void 0||o(i,s,t);if(l!==!0)throw new an("option "+s+" must be "+l,an.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new an("Unknown option "+s,an.ERR_BAD_OPTION)}}const E1={assertOptions:oMe,validators:Ub},Lo=E1.validators;class Ih{constructor(e){this.defaults=e,this.interceptors={request:new ak,response:new ak}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let a;Error.captureStackTrace?Error.captureStackTrace(a={}):a=new Error;const s=a.stack?a.stack.replace(/^.+\n/,""):"";r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=iu(this.defaults,n);const{transitional:r,paramsSerializer:a,headers:s}=n;r!==void 0&&E1.assertOptions(r,{silentJSONParsing:Lo.transitional(Lo.boolean),forcedJSONParsing:Lo.transitional(Lo.boolean),clarifyTimeoutError:Lo.transitional(Lo.boolean)},!1),a!=null&&(Ie.isFunction(a)?n.paramsSerializer={serialize:a}:E1.assertOptions(a,{encode:Lo.function,serialize:Lo.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Ie.merge(s.common,s[n.method]);s&&Ie.forEach(["delete","get","head","post","put","patch","common"],h=>{delete s[h]}),n.headers=ao.concat(o,s);const i=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(l=l&&g.synchronous,i.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let u,f=0,d;if(!l){const h=[lk.bind(this),void 0];for(h.unshift.apply(h,i),h.push.apply(h,c),d=h.length,u=Promise.resolve(n);f<d;)u=u.then(h[f++],h[f++]);return u}d=i.length;let p=n;for(f=0;f<d;){const h=i[f++],g=i[f++];try{p=h(p)}catch(y){g.call(this,y);break}}try{u=lk.call(this,p)}catch(h){return Promise.reject(h)}for(f=0,d=c.length;f<d;)u=u.then(c[f++],c[f++]);return u}getUri(e){e=iu(this.defaults,e);const n=$F(e.baseURL,e.url);return DF(n,e.params,e.paramsSerializer)}}Ie.forEach(["delete","get","head","options"],function(e){Ih.prototype[e]=function(n,r){return this.request(iu(r||{},{method:e,url:n,data:(r||{}).data}))}});Ie.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,i){return this.request(iu(i||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Ih.prototype[e]=n(),Ih.prototype[e+"Form"]=n(!0)});const $g=Ih;class Ab{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(a=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](a);r._listeners=null}),this.promise.then=a=>{let s;const o=new Promise(i=>{r.subscribe(i),s=i}).then(a);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,i){r.reason||(r.reason=new Dd(s,o,i),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Ab(function(a){e=a}),cancel:e}}}const iMe=Ab;function lMe(t){return function(n){return t.apply(null,n)}}function cMe(t){return Ie.isObject(t)&&t.isAxiosError===!0}const k1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(k1).forEach(([t,e])=>{k1[e]=t});const uMe=k1;function WF(t){const e=new $g(t),n=SF($g.prototype.request,e);return Ie.extend(n,$g.prototype,e,{allOwnKeys:!0}),Ie.extend(n,e,null,{allOwnKeys:!0}),n.create=function(a){return WF(iu(t,a))},n}const Gn=WF($b);Gn.Axios=$g;Gn.CanceledError=Dd;Gn.CancelToken=iMe;Gn.isCancel=FF;Gn.VERSION=AF;Gn.toFormData=n0;Gn.AxiosError=an;Gn.Cancel=Gn.CanceledError;Gn.all=function(e){return Promise.all(e)};Gn.spread=lMe;Gn.isAxiosError=cMe;Gn.mergeConfig=iu;Gn.AxiosHeaders=ao;Gn.formToJSON=t=>BF(Ie.isHTMLForm(t)?new FormData(t):t);Gn.getAdapter=UF.getAdapter;Gn.HttpStatusCode=uMe;Gn.default=Gn;/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var IF=dMe,fk=pMe,fMe=Object.prototype.toString,Lp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function dMe(t,e){if(typeof t!="string")throw new TypeError("argument str must be a string");for(var n={},r=e||{},a=r.decode||gMe,s=0;s<t.length;){var o=t.indexOf("=",s);if(o===-1)break;var i=t.indexOf(";",s);if(i===-1)i=t.length;else if(i<o){s=t.lastIndexOf(";",o-1)+1;continue}var l=t.slice(s,o).trim();if(n[l]===void 0){var c=t.slice(o+1,i).trim();c.charCodeAt(0)===34&&(c=c.slice(1,-1)),n[l]=yMe(c,a)}s=i+1}return n}function pMe(t,e,n){var r=n||{},a=r.encode||hMe;if(typeof a!="function")throw new TypeError("option encode is invalid");if(!Lp.test(t))throw new TypeError("argument name is invalid");var s=a(e);if(s&&!Lp.test(s))throw new TypeError("argument val is invalid");var o=t+"="+s;if(r.maxAge!=null){var i=r.maxAge-0;if(isNaN(i)||!isFinite(i))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(i)}if(r.domain){if(!Lp.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!Lp.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){var l=r.expires;if(!vMe(l)||isNaN(l.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+l.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.partitioned&&(o+="; Partitioned"),r.priority){var c=typeof r.priority=="string"?r.priority.toLowerCase():r.priority;switch(c){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(r.sameSite){var u=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(u){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o}function gMe(t){return t.indexOf("%")!==-1?decodeURIComponent(t):t}function hMe(t){return encodeURIComponent(t)}function vMe(t){return fMe.call(t)==="[object Date]"||t instanceof Date}function yMe(t,e){try{return e(t)}catch{return t}}function mMe(){const t=typeof global>"u"?void 0:global.TEST_HAS_DOCUMENT_COOKIE;return typeof t=="boolean"?t:typeof document=="object"&&typeof document.cookie=="string"}function CMe(t){return typeof t=="string"?IF(t):typeof t=="object"&&t!==null?t:{}}function my(t,e={}){const n=SMe(t);if(!e.doNotParse)try{return JSON.parse(n)}catch{}return t}function SMe(t){return t&&t[0]==="j"&&t[1]===":"?t.substr(2):t}class Il{constructor(e,n={}){this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.update=()=>{if(!this.HAS_DOCUMENT_COOKIE)return;const a=this.cookies;this.cookies=IF(document.cookie),this._checkChanges(a)};const r=typeof document>"u"?"":document.cookie;this.cookies=CMe(e||r),this.defaultSetOptions=n,this.HAS_DOCUMENT_COOKIE=mMe()}_emitChange(e){for(let n=0;n<this.changeListeners.length;++n)this.changeListeners[n](e)}_checkChanges(e){new Set(Object.keys(e).concat(Object.keys(this.cookies))).forEach(r=>{e[r]!==this.cookies[r]&&this._emitChange({name:r,value:my(this.cookies[r])})})}_startPolling(){this.pollingInterval=setInterval(this.update,300)}_stopPolling(){this.pollingInterval&&clearInterval(this.pollingInterval)}get(e,n={}){return n.doNotUpdate||this.update(),my(this.cookies[e],n)}getAll(e={}){e.doNotUpdate||this.update();const n={};for(let r in this.cookies)n[r]=my(this.cookies[r],e);return n}set(e,n,r){r?r=Object.assign(Object.assign({},this.defaultSetOptions),r):r=this.defaultSetOptions;const a=typeof n=="string"?n:JSON.stringify(n);this.cookies=Object.assign(Object.assign({},this.cookies),{[e]:a}),this.HAS_DOCUMENT_COOKIE&&(document.cookie=fk(e,a,r)),this._emitChange({name:e,value:n,options:r})}remove(e,n){const r=n=Object.assign(Object.assign(Object.assign({},this.defaultSetOptions),n),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=Object.assign({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=fk(e,"",r)),this._emitChange({name:e,value:void 0,options:n})}addChangeListener(e){this.changeListeners.push(e),this.HAS_DOCUMENT_COOKIE&&this.changeListeners.length===1&&(typeof window=="object"&&"cookieStore"in window?window.cookieStore.addEventListener("change",this.update):this._startPolling())}removeChangeListener(e){const n=this.changeListeners.indexOf(e);n>=0&&this.changeListeners.splice(n,1),this.HAS_DOCUMENT_COOKIE&&this.changeListeners.length===0&&(typeof window=="object"&&"cookieStore"in window?window.cookieStore.removeEventListener("change",this.update):this._stopPolling())}}const bMe=new Il,ho=Gn.create({withCredentials:!0,maxRedirects:0});bMe.get("csrftoken");const wMe=new Il;wMe.get("csrftoken");const TMe=new Il;TMe.get("csrftoken");const xMe=async t=>(await ho.get("/api/get_list_of_dicoms",{params:{image_report_id:t}})).data,EMe=new Il;EMe.get("csrftoken");const kMe=async t=>(await ho.get("/api/get_3d_labels",{params:{image_report_id:t}})).data.labels,{vtkErrorMacro:O1}=A,OMe={Unknown:0,Scalar:1,RGB:2,RGBA:3,Offset:4,Vector:5,Point:6,CovariantVector:7,SymmetricSecondRankTensor:8,DiffusionTensor3D:9,Complex:10,FixedArray:11,Array:12,Matrix:13,VariableLengthVector:14,VariableSizeMatrix:15},Wt={Unknown:"Unknown",Scalar:"Scalar",RGB:"RGB",RGBA:"RGBA",Offset:"Offset",Vector:"Vector",Point:"Point",CovariantVector:"CovariantVector",SymmetricSecondRankTensor:"SymmetricSecondRankTensor",DiffusionTensor3D:"DiffusionTensor3D",Complex:"Complex",FixedArray:"FixedArray",Array:"Array",Matrix:"Matrix",VariableLengthVector:"VariableLengthVector",VariableSizeMatrix:"VariableSizeMatrix"},M1=new Map([["Uint8Array","uint8"],["Int8Array","int8"],["Uint16Array","uint16"],["Int16Array","int16"],["Uint32Array","uint32"],["Int32Array","int32"],["Float32Array","float32"],["Float64Array","float64"]]),dk=new Map([["uint8","Uint8Array"],["int8","Int8Array"],["uint16","Uint16Array"],["int16","Int16Array"],["uint32","Uint32Array"],["int32","Int32Array"],["float32","Float32Array"],["float64","Float64Array"]]);function MMe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n={origin:[0,0,0],spacing:[1,1,1]},r=[1,1,1],a=[1,0,0,0,1,0,0,0,1],s=t.direction.data===void 0,o=s?Wt:OMe;for(let c=0;c<t.imageType.dimension;++c){n.origin[c]=t.origin[c],n.spacing[c]=t.spacing[c],r[c]=t.size[c];for(let u=0;u<t.imageType.dimension;++u)s?a[u+c*3]=t.direction[c+u*t.imageType.dimension]:a[u+c*3]=t.direction.data[c+u*t.imageType.dimension]}const i=CR.newInstance(n),l=Tt.newInstance({name:e.scalarArrayName||"Scalars",values:t.data,numberOfComponents:t.imageType.components});switch(i.setDirection(a),i.setDimensions(...r),i.getPointData().setScalars(l),s?o[t.imageType.pixelType]:t.imageType.pixelType){case o.Scalar:break;case o.RGB:break;case o.RGBA:break;case o.Offset:break;case o.Vector:t.imageType.dimension===3&&t.imageType.components===3&&i.getPointData().setVectors(l);break;case o.Point:break;case o.CovariantVector:t.imageType.dimension===3&&t.imageType.components===3&&i.getPointData().setVectors(l);break;case o.SymmetricSecondRankTensor:t.imageType.dimension===3&&t.imageType.components===6&&i.getPointData().setTensors(l);break;case o.DiffusionTensor3D:t.imageType.dimension===3&&t.imageType.components===6&&i.getPointData().setTensors(l);break;case o.Complex:break;case o.FixedArray:break;case o.Array:break;case o.Matrix:break;case o.VariableLengthVector:break;case o.VariableSizeMatrix:break;default:return O1(`Cannot handle unexpected itk-wasm pixel type ${t.imageType.pixelType}`),null}return i}function RMe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=3,r={imageType:{dimension:n,pixelType:Wt.Scalar,componentType:"",components:1},name:"vtkImageData",origin:t.getOrigin(),spacing:t.getSpacing(),direction:new Float64Array(9),size:t.getDimensions()},a=t.getDirection();for(let i=0;i<n;++i)for(let l=0;l<n;++l)r.direction[i+l*n]=a[l+i*n];const s=t.getPointData();let o;return s.getTensors()!==null?(r.imageType.pixelType=Wt.DiffusionTensor3D,o=s.getTensors()):s.getVectors()!=null?(r.imageType.pixelType=Wt.Vector,o=s.getVectors()):o=s.getScalars(),r.imageType.componentType=M1.get(o.getDataType()),e?r.data=o.getData().slice(0):r.data=o.getData(),r}function _Me(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[];t.pointData.length&&n.push({data:{vtkClass:"vtkDataArray",name:e.pointDataName||"PointData",numberOfComponents:t.polyDataType.pointPixelComponents,size:t.pointData.length,dataType:dk.get(t.polyDataType.pointPixelComponentType),buffer:t.pointData.buffer,values:t.pointData}});const r=[];t.cellData.length&&r.push({data:{vtkClass:"vtkDataArray",name:e.cellDataName||"CellData",numberOfComponents:t.polyDataType.pointPixelComponents,size:t.cellData.length,dataType:dk.get(t.polyDataType.pointPixelComponentType),buffer:t.cellData.buffer,values:t.cellData}});const a={points:{vtkClass:"vtkPoints",name:"_points",numberOfComponents:3,size:t.points.length,dataType:"Float32Array",buffer:t.points.buffer,values:t.points},verts:{vtkClass:"vtkCellArray",name:"_verts",numberOfComponents:1,size:t.verticesBufferSize,dataType:"Uint32Array",buffer:t.vertices.buffer,values:t.vertices},lines:{vtkClass:"vtkCellArray",name:"_lines",numberOfComponents:1,size:t.linesBufferSize,dataType:"Uint32Array",buffer:t.lines.buffer,values:t.lines},polys:{vtkClass:"vtkCellArray",name:"_polys",numberOfComponents:1,size:t.polygonsBufferSize,dataType:"Uint32Array",buffer:t.polygons.buffer,values:t.polygons},strips:{vtkClass:"vtkCellArray",name:"_strips",numberOfComponents:1,size:t.triangleStripsBufferSize,dataType:"Uint32Array",buffer:t.triangleStrips.buffer,values:t.triangleStrips},pointData:{vtkClass:"vtkDataSetAttributes",activeGlobalIds:-1,activeNormals:-1,activePedigreeIds:-1,activeScalars:-1,activeTCoords:-1,activeTensors:-1,activeVectors:-1,copyFieldFlags:[],doCopyAllOff:!1,doCopyAllOn:!0,arrays:n},cellData:{vtkClass:"vtkDataSetAttributes",activeGlobalIds:-1,activeNormals:-1,activePedigreeIds:-1,activeScalars:-1,activeTCoords:-1,activeTensors:-1,activeVectors:-1,copyFieldFlags:[],doCopyAllOff:!1,doCopyAllOn:!0,arrays:r}},s=or.newInstance(a),o=s.getPointData(),i=s.getCellData();if(t.pointData.length)switch(Wt[t.polyDataType.pointPixelType]){case Wt.Scalar:o.setScalars(o.getArrayByIndex(0));break;case Wt.RGB:break;case Wt.RGBA:break;case Wt.Offset:break;case Wt.Vector:t.polyDataType.pointPixelComponents===3&&o.setVectors(o.getArrayByIndex(0));break;case Wt.Point:break;case Wt.CovariantVector:t.polyDataType.pointPixelComponents===3&&o.setVectors(o.getArrayByIndex(0));break;case Wt.SymmetricSecondRankTensor:t.polyDataType.pointPixelComponents===6&&o.setTensors(o.getArrayByIndex(0));break;case Wt.DiffusionTensor3D:t.polyDataType.pointPixelComponents===6&&o.setTensors(o.getArrayByIndex(0));break;case Wt.Complex:break;case Wt.FixedArray:break;case Wt.Array:break;case Wt.Matrix:break;case Wt.VariableLengthVector:break;case Wt.VariableSizeMatrix:break;default:return O1(`Cannot handle unexpected itk-wasm pixel type ${t.polyDataType.pointPixelType}`),null}if(t.cellData.length)switch(Wt[t.polyDataType.cellPixelType]){case Wt.Scalar:i.setScalars(i.getArrayByIndex(0));break;case Wt.RGB:break;case Wt.RGBA:break;case Wt.Offset:break;case Wt.Vector:t.polyDataType.pointPixelComponents===3&&i.setVectors(i.getArrayByIndex(0));break;case Wt.Point:break;case Wt.CovariantVector:t.polyDataType.pointPixelComponents===3&&i.setVectors(i.getArrayByIndex(0));break;case Wt.SymmetricSecondRankTensor:t.polyDataType.pointPixelComponents===6&&i.setTensors(i.getArrayByIndex(0));break;case Wt.DiffusionTensor3D:t.polyDataType.pointPixelComponents===6&&i.setTensors(i.getArrayByIndex(0));break;case Wt.Complex:break;case Wt.FixedArray:break;case Wt.Array:break;case Wt.Matrix:break;case Wt.VariableLengthVector:break;case Wt.VariableSizeMatrix:break;default:return O1(`Cannot handle unexpected itk-wasm pixel type ${t.polyDataType.pointPixelType}`),null}return s}function VMe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n={polyDataType:{pointPixelComponentType:"float32",pointPixelComponents:1,pointPixelType:"Scalar",cellPixelComponentType:"float32",cellPixelComponents:1,cellPixelType:"Scalar"},numberOfPoints:t.getNumberOfPoints(),points:t.getPoints().getData(),verticesBufferSize:t.getVerts().getNumberOfValues(),vertices:t.getVerts().getData(),linesBufferSize:t.getLines().getNumberOfValues(),lines:t.getLines().getData(),polygonsBufferSize:t.getPolys().getNumberOfValues(),polygons:t.getPolys().getData(),triangleStripsBufferSize:t.getStrips().getNumberOfValues(),triangleStrips:t.getStrips().getData(),numberOfPointPixels:0,pointData:new Float32Array,numberOfCellPixels:0,cellData:new Float32Array},r=t.getPointData();if(r.getNumberOfArrays()){const s=e.pointDataName?r.getArrayByName(e.pointDataName):r.getArrayByIndex(0);n.numberOfPointPixels=s.getNumberOfTuples(),n.pointData=s.getData(),n.polyDataType.pointPixelComponentType=M1.get(s.getDataType()),n.polyDataType.cellPixelComponentType=n.polyDataType.pointPixelComponentType,n.polyDataType.pointPixelComponents=s.getNumberOfComponents(),n.polyDataType.cellPixelComponents=n.polyDataType.pointPixelComponents,r.getTensors()===s?n.polyDataType.pointPixelType=Wt.SymmetricSecondRankTensor:r.getVectors()===s&&(n.polyDataType.pointPixelType=Wt.Vector),n.polyDataType.cellPixelType=n.polyDataType.pointPixelType}const a=t.getCellData();if(a.getNumberOfArrays()){const s=e.cellDataName?r.getArrayByName(e.cellDataName):r.getArrayByIndex(0);n.numberOfCellPixels=s.getNumberOfTuples(),n.cellData=s.getData(),n.polyDataType.cellPixelComponentType=M1.get(s.getDataType()),n.polyDataType.cellPixelComponents=s.getNumberOfComponents(),a.getTensors()===s?n.polyDataType.cellPixelType=Wt.SymmetricSecondRankTensor:a.getVectors()===s?n.polyDataType.cellPixelType=Wt.Vector:n.polyDataType.cellPixelType=Wt.Scalar}return n}var R1={convertItkToVtkImage:MMe,convertVtkToItkImage:RMe,convertItkToVtkPolyData:_Me,convertVtkToItkPolyData:VMe};function DMe(t,e){e.classHierarchy.push("vtkAbstractImageMapper"),t.getIsOpaque=()=>!0,t.getCurrentImage=()=>null,t.getBoundsForSlice=()=>(A.vtkErrorMacro("vtkAbstractImageMapper.getBoundsForSlice - NOT IMPLEMENTED"),ml())}const LMe={slice:0,customDisplayExtent:[0,0,0,0,0,0],useCustomExtents:!1,backgroundColor:[0,0,0,1]};function NMe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,LMe,n),fR.extend(t,e,n),A.setGet(t,e,["slice","useCustomExtents"]),A.setGetArray(t,e,["customDisplayExtent"],6),A.setGetArray(t,e,["backgroundColor"],4),DMe(t,e)}var BMe={extend:NMe};function PF(t,e,n){const r=n.getCurrentImage(),a=r.getExtent(),s=[a[0],a[2],a[4]],{ijkMode:o}=n.getClosestIJKAxis();let i=n.isA("vtkImageArrayMapper")?n.getSubSlice():n.getSlice();o!==n.getSlicingMode()&&(i=n.getSliceAtPosition(i)),s[o]+=i;const l=[0,0,0];r.indexToWorld(s,l),s[o]+=1;const c=[0,0,0];r.indexToWorld(s,c),c[0]-=l[0],c[1]-=l[1],c[2]-=l[2],es(c,c);const u=Ms.intersectWithLine(t,e,l,c);if(u.intersection){const f=u.x,d=[0,0,0];return r.worldToIndex(f,d),{t:u.t,absoluteIJK:d}}return null}function FMe(t,e,n){const r=PF(t,e,n);if(r){const s=n.getCurrentImage().getExtent(),o=[Math.round(r.absoluteIJK[0]),Math.round(r.absoluteIJK[1]),Math.round(r.absoluteIJK[2])];return o[0]<s[0]||o[0]>s[1]||o[1]<s[2]||o[1]>s[3]||o[2]<s[4]||o[2]>s[5]?null:{t:r.t,ijk:o}}return null}function $Me(t,e,n){const r=PF(t,e,n);if(r){const s=n.getCurrentImage().getExtent(),o=r.absoluteIJK,i=[Math.floor(o[0]),Math.floor(o[1]),Math.floor(o[2])];if(i[0]<s[0]||i[0]>s[1]-1||i[1]<s[2]||i[1]>s[3]-1||i[2]<s[4]||i[2]>(s[5]?s[5]-1:s[5]))return null;const l=[o[0]-i[0],o[1]-i[1],o[2]-i[2]];return{t:r.t,ijk:i,pCoords:l}}return null}const{staticOffsetAPI:UMe,otherStaticMethods:AMe}=ov,{SlicingMode:Qt}=uv;function WMe(t,e){e.classHierarchy.push("vtkImageMapper"),t.getSliceAtPosition=r=>{const a=t.getCurrentImage();let s;if(r.length===3)s=r;else if(Number.isFinite(r)){const u=a.getBounds();switch(e.slicingMode){case Qt.X:s=[r,(u[3]+u[2])/2,(u[5]+u[4])/2];break;case Qt.Y:s=[(u[1]+u[0])/2,r,(u[5]+u[4])/2];break;case Qt.Z:s=[(u[1]+u[0])/2,(u[3]+u[2])/2,r];break}}const o=[0,0,0];a.worldToIndex(s,o);const i=a.getExtent(),{ijkMode:l}=t.getClosestIJKAxis();let c=0;switch(l){case Qt.I:c=ol(o[0],i[0],i[1]);break;case Qt.J:c=ol(o[1],i[2],i[3]);break;case Qt.K:c=ol(o[2],i[4],i[5]);break;default:return 0}return c},t.setSliceFromCamera=r=>{const a=r.getFocalPoint();switch(e.slicingMode){case Qt.I:case Qt.J:case Qt.K:{const s=t.getSliceAtPosition(a);t.setSlice(s)}break;case Qt.X:t.setSlice(a[0]);break;case Qt.Y:t.setSlice(a[1]);break;case Qt.Z:t.setSlice(a[2]);break}},t.setXSlice=r=>{t.setSlicingMode(Qt.X),t.setSlice(r)},t.setYSlice=r=>{t.setSlicingMode(Qt.Y),t.setSlice(r)},t.setZSlice=r=>{t.setSlicingMode(Qt.Z),t.setSlice(r)},t.setISlice=r=>{t.setSlicingMode(Qt.I),t.setSlice(r)},t.setJSlice=r=>{t.setSlicingMode(Qt.J),t.setSlice(r)},t.setKSlice=r=>{t.setSlicingMode(Qt.K),t.setSlice(r)},t.getSlicingModeNormal=()=>{const r=[0,0,0],a=t.getCurrentImage().getDirection();switch(e.slicingMode){case Qt.X:r[0]=1;break;case Qt.Y:r[1]=1;break;case Qt.Z:r[2]=1;break;case Qt.I:Xp(a,[1,0,0],r);break;case Qt.J:Xp(a,[0,1,0],r);break;case Qt.K:Xp(a,[0,0,1],r);break}return r};function n(){let r;switch(e.slicingMode){case Qt.X:r=0;break;case Qt.Y:r=1;break;case Qt.Z:r=2;break;default:e.closestIJKAxis={ijkMode:e.slicingMode,flip:!1};return}const a=t.getCurrentImage().getDirection(),s=TM(a);let o=0;for(;o<3&&s[r+3*o]===0;++o);const i=s[r+3*o]<0;e.closestIJKAxis={ijkMode:o,flip:i}}t.setSlicingMode=r=>{e.slicingMode!==r&&(e.slicingMode=r,t.getCurrentImage()&&n(),t.modified())},t.getClosestIJKAxis=()=>((e.closestIJKAxis===void 0||e.closestIJKAxis.ijkMode===Qt.NONE)&&t.getCurrentImage()&&n(),e.closestIJKAxis),t.getBounds=()=>{const r=t.getCurrentImage();if(!r)return ml();if(!e.useCustomExtents)return r.getBounds();const a=e.customDisplayExtent.slice(),{ijkMode:s}=t.getClosestIJKAxis();let o=e.slice;switch(s!==e.slicingMode&&(o=t.getSliceAtPosition(e.slice)),s){case Qt.I:a[0]=o,a[1]=o;break;case Qt.J:a[2]=o,a[3]=o;break;case Qt.K:a[4]=o,a[5]=o;break}return r.extentToBounds(a)},t.getBoundsForSlice=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.slice,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const s=t.getCurrentImage();if(!s)return ml();const o=s.getSpatialExtent(),{ijkMode:i}=t.getClosestIJKAxis();let l=r;switch(i!==e.slicingMode&&(l=t.getSliceAtPosition(r)),i){case Qt.I:o[0]=l-a,o[1]=l+a;break;case Qt.J:o[2]=l-a,o[3]=l+a;break;case Qt.K:o[4]=l-a,o[5]=l+a;break}return s.extentToBounds(o)},t.intersectWithLineForPointPicking=(r,a)=>FMe(r,a,t),t.intersectWithLineForCellPicking=(r,a)=>$Me(r,a,t),t.getCurrentImage=()=>t.getInputData()}const IMe={slicingMode:Qt.NONE,closestIJKAxis:{ijkMode:Qt.NONE,flip:!1},renderToRectangle:!1,sliceAtFocalPoint:!1,preferSizeOverAccuracy:!1};function GF(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,IMe,n),BMe.extend(t,e,n),A.get(t,e,["slicingMode"]),A.setGet(t,e,["closestIJKAxis","renderToRectangle","sliceAtFocalPoint","preferSizeOverAccuracy"]),ov.implementCoincidentTopologyMethods(t,e),WMe(t,e)}const PMe=A.newInstance(GF,"vtkImageMapper");var zF={newInstance:PMe,extend:GF,...UMe,...AMe,...uv};const{InterpolationType:Ug}=eH,{vtkErrorMacro:pk}=A,Ag=4;function GMe(t,e){e.classHierarchy.push("vtkImageProperty"),t.getMTime=()=>{let n=e.mtime,r;for(let a=0;a<Ag;a++)e.componentData[a].rGBTransferFunction&&(r=e.componentData[a].rGBTransferFunction.getMTime(),n=n>r?n:r),e.componentData[a].piecewiseFunction&&(r=e.componentData[a].piecewiseFunction.getMTime(),n=n>r?n:r);return n},t.setRGBTransferFunction=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=n,s=r;return Number.isInteger(n)||(s=n,a=0),e.componentData[a].rGBTransferFunction!==s?(e.componentData[a].rGBTransferFunction=s,t.modified(),!0):!1},t.getRGBTransferFunction=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[n].rGBTransferFunction},t.setPiecewiseFunction=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=n,s=r;return Number.isInteger(n)||(s=n,a=0),e.componentData[a].piecewiseFunction!==s?(e.componentData[a].piecewiseFunction=s,t.modified(),!0):!1},t.getPiecewiseFunction=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[n].piecewiseFunction},t.setScalarOpacity=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=n,s=r;return Number.isInteger(n)||(s=n,a=0),t.setPiecewiseFunction(a,s)},t.getScalarOpacity=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return t.getPiecewiseFunction(n)},t.setComponentWeight=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(n<0||n>=Ag)return pk("Invalid index"),!1;const a=Math.min(1,Math.max(0,r));return e.componentData[n].componentWeight!==a?(e.componentData[n].componentWeight=a,t.modified(),!0):!1},t.getComponentWeight=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return n<0||n>=Ag?(pk("Invalid index"),0):e.componentData[n].componentWeight},t.setInterpolationTypeToNearest=()=>t.setInterpolationType(Ug.NEAREST),t.setInterpolationTypeToLinear=()=>t.setInterpolationType(Ug.LINEAR),t.getInterpolationTypeAsString=()=>A.enumToString(Ug,e.interpolationType)}const zMe={independentComponents:!1,interpolationType:Ug.LINEAR,colorWindow:255,colorLevel:127.5,ambient:1,diffuse:0,opacity:1,useLookupTableScalarRange:!1,useLabelOutline:!1,labelOutlineThickness:[1],labelOutlineOpacity:1};function HF(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,zMe,n),A.obj(t,e),!e.componentData){e.componentData=[];for(let r=0;r<Ag;r++)e.componentData.push({rGBTransferFunction:null,piecewiseFunction:null,componentWeight:1})}A.setGet(t,e,["independentComponents","interpolationType","colorWindow","colorLevel","ambient","diffuse","opacity","useLookupTableScalarRange","useLabelOutline","labelOutlineOpacity"]),A.setGetArray(t,e,["labelOutlineThickness"]),GMe(t,e)}const HMe=A.newInstance(HF,"vtkImageProperty");var KMe={newInstance:HMe,extend:HF};const{vtkDebugMacro:jMe}=A;function YMe(t,e){e.classHierarchy.push("vtkImageSlice"),t.getActors=()=>t,t.getImages=()=>t,t.getIsOpaque=()=>{if(e.forceOpaque)return!0;if(e.forceTranslucent)return!1;e.property||t.getProperty();let n=e.property.getOpacity()>=1;return n=n&&(!e.mapper||e.mapper.getIsOpaque()),n},t.hasTranslucentPolygonalGeometry=()=>!1,t.makeProperty=KMe.newInstance,t.getProperty=()=>(e.property===null&&(e.property=t.makeProperty()),e.property),t.getBounds=()=>{if(e.mapper===null)return e.bounds;const n=e.mapper.getBounds();if(!n||n.length!==6)return n;if(n[0]>n[1])return e.mapperBounds=n.concat(),e.bounds=[1,-1,1,-1,1,-1],e.boundsMTime.modified(),n;const r=a=>a[0].map((s,o)=>a.map(i=>i[o]));if(!e.mapperBounds||!r([n,e.mapperBounds]).reduce((a,s)=>a&&s[0]===s[1],!0)||t.getMTime()>e.boundsMTime.getMTime()){jMe("Recomputing bounds..."),e.mapperBounds=n.map(s=>s),t.computeMatrix();const a=new Float64Array(16);$t(a,e.matrix),qt.transformBounds(n,a,e.bounds),e.boundsMTime.modified()}return e.bounds},t.getBoundsForSlice=(n,r)=>{const a=e.mapper.getBoundsForSlice(n,r);if(!qt.isValid(a))return a;t.computeMatrix();const s=new Float64Array(16);return $t(s,e.matrix),qt.transformBounds(a,s)},t.getMinXBound=()=>t.getBounds()[0],t.getMaxXBound=()=>t.getBounds()[1],t.getMinYBound=()=>t.getBounds()[2],t.getMaxYBound=()=>t.getBounds()[3],t.getMinZBound=()=>t.getBounds()[4],t.getMaxZBound=()=>t.getBounds()[5],t.getMTime=()=>{let n=e.mtime;if(e.property!==null){const r=e.property.getMTime();n=r>n?r:n}return n},t.getRedrawMTime=()=>{let n=e.mtime;if(e.mapper!==null){let r=e.mapper.getMTime();n=r>n?r:n,e.mapper.getInput()!==null&&(e.mapper.getInputAlgorithm().update(),r=e.mapper.getInput().getMTime(),n=r>n?r:n)}if(e.property!==null){let r=e.property.getMTime();n=r>n?r:n,e.property.getRGBTransferFunction()!==null&&(r=e.property.getRGBTransferFunction().getMTime(),n=r>n?r:n)}return n},t.getSupportsSelection=()=>e.mapper?e.mapper.getSupportsSelection():!1}const qMe={mapper:null,property:null,bounds:[...qt.INIT_BOUNDS]};function KF(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,qMe,n),tR.extend(t,e,n),e.boundsMTime={},A.obj(e.boundsMTime),A.set(t,e,["property"]),A.setGet(t,e,["mapper"]),A.getArray(t,e,["bounds"],6),YMe(t,e)}const XMe=A.newInstance(KF,"vtkImageSlice");var jF={newInstance:XMe,extend:KF};function ZMe(t,e){e.classHierarchy.push("vtkAbstractPicker"),t.initialize=()=>{e.renderer=null,e.selectionPoint[0]=0,e.selectionPoint[1]=0,e.selectionPoint[2]=0,e.pickPosition[0]=0,e.pickPosition[1]=0,e.pickPosition[2]=0},t.initializePickList=()=>{e.pickList=[]},t.addPickList=n=>{e.pickList.push(n)},t.deletePickList=n=>{const r=e.pickList.indexOf(n);r!==-1&&e.pickList.splice(r,1)}}const JMe={renderer:null,selectionPoint:[0,0,0],pickPosition:[0,0,0],pickFromList:0,pickList:[]};function YF(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,JMe,n),A.obj(t,e),A.get(t,e,["renderer"]),A.getArray(t,e,["selectionPoint","pickPosition"]),A.setGet(t,e,["pickFromList","pickList"]),ZMe(t,e)}const QMe=A.newInstance(YF,"vtkAbstractPicker");var eRe={newInstance:QMe,extend:YF};const{vtkErrorMacro:tRe}=A,{vtkWarningMacro:gk}=A;function nRe(t,e){e.classHierarchy.push("vtkPicker");const n={...t};function r(){n.initialize(),e.actors=[],e.pickedPositions=[],e.mapperPosition[0]=0,e.mapperPosition[1]=0,e.mapperPosition[2]=0,e.mapper=null,e.dataSet=null,e.globalTMin=Number.MAX_VALUE}function a(s,o,i){let l=0;const c=i.getRenderWindow().getViews()[0],u=i.getViewport(),f=c.getSize();let d=f[0]*u[0],p=f[1]*u[1];const h=c.displayToNormalizedDisplay(d,p,s),g=i.normalizedDisplayToWorld(h[0],h[1],h[2],o);d=f[0]*u[2],p=f[1]*u[3];const y=c.displayToNormalizedDisplay(d,p,s),m=i.normalizedDisplayToWorld(y[0],y[1],y[2],o);for(let b=0;b<3;b++)l+=(m[b]-g[b])*(m[b]-g[b]);return Math.sqrt(l)}t.intersectWithLine=(s,o,i,l)=>{if(!l)return Number.MAX_VALUE;const c=l.getCenter(),u=[];for(let p=0;p<3;p++)u[p]=o[p]-s[p];const f=kt(u,u);return f===0?2:(u[0]*(c[0]-s[0])+u[1]*(c[1]-s[1])+u[2]*(c[2]-s[2]))/f},t.pick=(s,o)=>{s.length!==3&&gk("vtkPicker::pick: selectionPt needs three components");const i=s[0],l=s[1];let c=s[2],u=[],f=[],d=[],p=[];const h=[],g=[];let y=[],m,b;const C=[],S=[];let T=[],w=!1;const x=new Float64Array(4),E=new Float64Array(4),O=qt.newInstance(),k=[],M=[],D=o.getRenderWindow().getViews()[0];if(r(),e.renderer=o,e.selectionPoint[0]=i,e.selectionPoint[1]=l,e.selectionPoint[2]=c,!o){tRe("Picker::Pick Must specify renderer");return}const I=o.getActiveCamera();u=I.getPosition(),f=I.getFocalPoint();const B=D.getViewportSize(o),F=B[0]/B[1];d=o.worldToNormalizedDisplay(f[0],f[1],f[2],F),d=D.normalizedDisplayToDisplay(d[0],d[1],d[2]),c=d[2];const $=a(c,F,o)*e.tolerance,N=D.displayToNormalizedDisplay(i,l,c);p=o.normalizedDisplayToWorld(N[0],N[1],N[2],F);for(let G=0;G<3;G++)e.pickPosition[G]=p[G];for(let G=0;G<3;G++)h[G]=e.pickPosition[G]-u[G];for(let G=0;G<3;G++)g[G]=f[G]-u[G];ts(g);const W=kt(g,h);if(W===0){gk("Picker::Pick Cannot process points");return}if(y=I.getClippingRange(),I.getParallelProjection()){m=y[0]-W,b=y[1]-W;for(let G=0;G<3;G++)C[G]=e.pickPosition[G]+m*g[G],S[G]=e.pickPosition[G]+b*g[G]}else{m=y[0]/W,b=y[1]/W;for(let G=0;G<3;G++)C[G]=u[G]+m*h[G],S[G]=u[G]+b*h[G]}C[3]=1,S[3]=1,e.pickFromList?T=e.pickList:T=o.getActors();const _=[];T.forEach(G=>{var Y,te;const K=G.getMapper();if(w=G.getNestedPickable()&&G.getNestedVisibility(),((te=(Y=G.getProperty()).getOpacity)==null?void 0:te.call(Y))<=0&&(w=!1),w){e.transformMatrix=G.getMatrix().slice(0),$t(e.transformMatrix,e.transformMatrix),An(e.transformMatrix,e.transformMatrix);const ve=[e.transformMatrix[0],e.transformMatrix[1],e.transformMatrix[2]],se=[e.transformMatrix[4],e.transformMatrix[5],e.transformMatrix[6]],ie=[e.transformMatrix[8],e.transformMatrix[9],e.transformMatrix[10]];_[0]=Xa(ve),_[1]=Xa(se),_[2]=Xa(ie),Xs(x,C,e.transformMatrix),Xs(E,S,e.transformMatrix),x[0]/=x[3],x[1]/=x[3],x[2]/=x[3],E[0]/=E[3],E[1]/=E[3],E[2]/=E[3];for(let re=0;re<3;re++)h[re]=E[re]-x[re];if(K?(O.setBounds(K.getBounds()),O.inflate($)):O.reset(),O.intersectBox(x,h,M,k)&&(k[0]=t.intersectWithLine(x,E,$*.333*(_[0]+_[1]+_[2]),G,K),k[0]<Number.MAX_VALUE)){const re=[];re[0]=(1-k[0])*C[0]+k[0]*S[0],re[1]=(1-k[0])*C[1]+k[0]*S[1],re[2]=(1-k[0])*C[2]+k[0]*S[2];let be=-1;for(let ge=0;ge<e.actors.length;ge++)if(e.actors[ge]===G){be=ge;break}if(be===-1)e.actors.push(G),e.pickedPositions.push(re);else{const ge=e.pickedPositions[be],Se=qr(C,ge);qr(C,re)<Se&&(e.pickedPositions[be]=re)}}}return t.invokePickChange(e.pickedPositions),1});const L=[];for(let G=0;G<e.pickedPositions.length;G++)L.push({actor:e.actors[G],pickedPosition:e.pickedPositions[G],distance2:qr(C,e.pickedPositions[G])});L.sort((G,K)=>{const Y=G.distance2,te=K.distance2;return Y<te?-1:Y>te?1:0}),e.pickedPositions=[],e.actors=[],L.forEach(G=>{e.pickedPositions.push(G.pickedPosition),e.actors.push(G.actor)})}}const rRe={tolerance:.025,mapperPosition:[0,0,0],mapper:null,dataSet:null,actors:[],pickedPositions:[],transformMatrix:null,globalTMin:Number.MAX_VALUE};function qF(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,rRe,n),eRe.extend(t,e,n),A.setGet(t,e,["tolerance"]),A.setGetArray(t,e,["mapperPosition"],3),A.get(t,e,["mapper","dataSet","actors","pickedPositions"]),A.event(t,e,"pickChange"),nRe(t,e)}const aRe=A.newInstance(qF,"vtkPicker");var sRe={newInstance:aRe,extend:qF};const{vtkErrorMacro:oRe}=A;function iRe(t,e){e.classHierarchy.push("vtkPointPicker"),t.intersectWithLine=(n,r,a,s,o)=>{let i=Number.MAX_VALUE;if(o.isA("vtkImageMapper")||o.isA("vtkImageArrayMapper")){const l=o.intersectWithLineForPointPicking(n,r);l&&(i=l.t,e.pointIJK=l.ijk)}else o.isA("vtkMapper")&&(i=t.intersectActorWithLine(n,r,a,o));return i},t.intersectActorWithLine=(n,r,a,s)=>{const o=s.getInputData();let i=0;const l=o.getPoints().getNumberOfPoints();if(l<=i)return 2;const c=[];for(let b=0;b<3;b++)c[b]=r[b]-n[b];const u=kt(c,c);if(u===0)return oRe("Cannot process points"),2;let f,d=-1,p=Number.MAX_VALUE,h=Number.MAX_VALUE;const g=[],y=[],m=o.getPoints();if(e.useCells){const b=o.getPolys().getData(),C=b[0],S=o.getPolys().getNumberOfCells();for(let T=0;T<S;T++){const w=T*C+1,x=w+C;for(let E=w;E<x;E++){const O=b[E];if(m.getPoint(O,y),f=(c[0]*(y[0]-n[0])+c[1]*(y[1]-n[1])+c[2]*(y[2]-n[2]))/u,f>=0&&f<=1&&f<=p+e.tolerance){let k=0;for(let M=0;M<3;M++){g[M]=n[M]+f*c[M];const D=Math.abs(y[M]-g[M]);D>k&&(k=D)}k<=a&&k<h&&(d=i,h=k,p=f)}}}}else for(i=0;i<l;i++)if(m.getPoint(i,y),f=(c[0]*(y[0]-n[0])+c[1]*(y[1]-n[1])+c[2]*(y[2]-n[2]))/u,f>=0&&f<=1&&f<=p+e.tolerance){let b=0;for(let C=0;C<3;C++){g[C]=n[C]+f*c[C];const S=Math.abs(y[C]-g[C]);S>b&&(b=S)}b<=a&&b<h&&(d=i,h=b,p=f)}return e.pointId=d,p}}const lRe={pointId:-1,pointIJK:[],useCells:!1};function XF(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,lRe,n),sRe.extend(t,e,n),A.getArray(t,e,["pointIJK"]),A.get(t,e,["pointId"]),A.setGet(t,e,["useCells"]),iRe(t,e)}const cRe=A.newInstance(XF,"vtkPointPicker");var uRe={newInstance:cRe,extend:XF};const fRe=()=>{const t=jF.newInstance(),e=zF.newInstance();t.setMapper(e);const n=uRe.newInstance();return n.setPickFromList(1),n.setTolerance(0),n.initializePickList(),n.addPickList(t),{actor:t,mapper:e,picker:n}},_1={Unknown:0,LeftController:1,RightController:2},qu={Unknown:0,Trigger:1,TrackPad:2,Grip:3,Thumbstick:4,A:5,B:6,ApplicationMenu:7},dRe={Unknown:0,TouchpadX:1,TouchpadY:2,ThumbstickX:3,ThumbstickY:4};var ZF={Device:_1,Input:qu,Axis:dRe};const{Device:Np,Input:Fi}=ZF,{vtkWarningMacro:Bp,vtkErrorMacro:Fp,normalizeWheel:pRe,vtkOnceErrorMacro:gRe}=A,nc={ctrlKey:!1,altKey:!1,shiftKey:!1},Cy={"xr-standard":[Fi.Trigger,Fi.Grip,Fi.TrackPad,Fi.Thumbstick,Fi.A,Fi.B]},Wb=["StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"];function Nu(t){t.cancelable&&t.preventDefault()}function $p(t){const e=Object.create(null);return t.forEach(n=>{let{pointerId:r,position:a}=n;e[r]=a}),e}function hRe(t,e){e.classHierarchy.push("vtkRenderWindowInteractor");const n={...t},r=new Set,a=new Map;let s=1;t.start=()=>{!e.initialized&&(t.initialize(),!e.initialized)||t.startEventLoop()},t.setRenderWindow=g=>{Fp("you want to call setView(view) instead of setRenderWindow on a vtk.js interactor")},t.setInteractorStyle=g=>{e.interactorStyle!==g&&(e.interactorStyle!=null&&e.interactorStyle.setInteractor(null),e.interactorStyle=g,e.interactorStyle!=null&&e.interactorStyle.getInteractor()!==t&&e.interactorStyle.setInteractor(t))},t.initialize=()=>{e.initialized=!0,t.enable(),t.render()},t.enable=()=>t.setEnabled(!0),t.disable=()=>t.setEnabled(!1),t.startEventLoop=()=>Bp("empty event loop");function o(g,y){e._forcedRenderer||(e.currentRenderer=t.findPokedRenderer(g,y))}t.getCurrentRenderer=()=>(e.currentRenderer||o(0,0),e.currentRenderer);function i(g){const y=e._view.getCanvas(),m=y.getBoundingClientRect(),b=y.width/m.width,C=y.height/m.height,S={x:b*(g.clientX-m.left),y:C*(m.height-g.clientY+m.top),z:0};return(a.size<=1||!e.currentRenderer)&&o(S.x,S.y),S}const l=e._getScreenEventPositionFor||i;function c(g){return{controlKey:g.ctrlKey,altKey:g.altKey,shiftKey:g.shiftKey}}function u(g){const y=c(g);return{key:g.key,keyCode:g.charCode,...y}}function f(g){return g.pointerType||""}const d=()=>{if(e.container===null)return;const{container:g}=e;g.addEventListener("contextmenu",Nu),g.addEventListener("wheel",t.handleWheel),g.addEventListener("DOMMouseScroll",t.handleWheel),g.addEventListener("pointerenter",t.handlePointerEnter),g.addEventListener("pointerleave",t.handlePointerLeave),g.addEventListener("pointermove",t.handlePointerMove,{passive:!1}),g.addEventListener("pointerdown",t.handlePointerDown,{passive:!1}),g.addEventListener("pointerup",t.handlePointerUp),g.addEventListener("pointercancel",t.handlePointerCancel),document.addEventListener("keypress",t.handleKeyPress),document.addEventListener("keydown",t.handleKeyDown),document.addEventListener("keyup",t.handleKeyUp),document.addEventListener("pointerlockchange",t.handlePointerLockChange),g.style.touchAction="none",g.style.userSelect="none",g.style.webkitTapHighlightColor="rgba(0,0,0,0)"};t.bindEvents=g=>{if(g===null)return;n.setContainer(g)&&d()};const p=()=>{clearTimeout(e.moveTimeoutID),clearTimeout(e.wheelTimeoutID),e.moveTimeoutID=0,e.wheelTimeoutID=0,s=1;const{container:g}=e;g&&(g.removeEventListener("contextmenu",Nu),g.removeEventListener("wheel",t.handleWheel),g.removeEventListener("DOMMouseScroll",t.handleWheel),g.removeEventListener("pointerenter",t.handlePointerEnter),g.removeEventListener("pointerleave",t.handlePointerLeave),g.removeEventListener("pointermove",t.handlePointerMove,{passive:!1}),g.removeEventListener("pointerdown",t.handlePointerDown,{passive:!1}),g.removeEventListener("pointerup",t.handlePointerUp),g.removeEventListener("pointercancel",t.handlePointerCancel)),document.removeEventListener("keypress",t.handleKeyPress),document.removeEventListener("keydown",t.handleKeyDown),document.removeEventListener("keyup",t.handleKeyUp),document.removeEventListener("pointerlockchange",t.handlePointerLockChange),a.clear()};t.unbindEvents=()=>{p(),n.setContainer(null)},t.handleKeyPress=g=>{const y=u(g);t.keyPressEvent(y)},t.handleKeyDown=g=>{const y=u(g);t.keyDownEvent(y)},t.handleKeyUp=g=>{const y=u(g);t.keyUpEvent(y)},t.handlePointerEnter=g=>{const y={...c(g),position:l(g),deviceType:f(g)};t.pointerEnterEvent(y),y.deviceType==="mouse"&&t.mouseEnterEvent(y)},t.handlePointerLeave=g=>{const y={...c(g),position:l(g),deviceType:f(g)};t.pointerLeaveEvent(y),y.deviceType==="mouse"&&t.mouseLeaveEvent(y)},t.handlePointerDown=g=>{if(!(g.button>2||t.isPointerLocked()))switch(e.preventDefaultOnPointerDown&&Nu(g),g.target.hasPointerCapture(g.pointerId)&&g.target.releasePointerCapture(g.pointerId),e.container.setPointerCapture(g.pointerId),a.has(g.pointerId)&&Bp("[RenderWindowInteractor] duplicate pointerId detected"),a.set(g.pointerId,{pointerId:g.pointerId,position:l(g)}),g.pointerType){case"pen":case"touch":t.handleTouchStart(g);break;case"mouse":default:t.handleMouseDown(g);break}},t.handlePointerUp=g=>{if(a.has(g.pointerId))switch(e.preventDefaultOnPointerUp&&Nu(g),a.delete(g.pointerId),e.container.releasePointerCapture(g.pointerId),g.pointerType){case"pen":case"touch":t.handleTouchEnd(g);break;case"mouse":default:t.handleMouseUp(g);break}},t.handlePointerCancel=g=>{if(a.has(g.pointerId))switch(a.delete(g.pointerId),g.pointerType){case"pen":case"touch":t.handleTouchEnd(g);break;case"mouse":default:t.handleMouseUp(g);break}},t.handlePointerMove=g=>{if(a.has(g.pointerId)){const y=a.get(g.pointerId);y.position=l(g)}switch(g.pointerType){case"pen":case"touch":t.handleTouchMove(g);break;case"mouse":default:t.handleMouseMove(g);break}},t.handleMouseDown=g=>{const y={...c(g),position:l(g),deviceType:f(g)};switch(g.button){case 0:t.leftButtonPressEvent(y);break;case 1:t.middleButtonPressEvent(y);break;case 2:t.rightButtonPressEvent(y);break;default:Fp(`Unknown mouse button pressed: ${g.button}`);break}},t.requestPointerLock=()=>{e.container&&e.container.requestPointerLock()},t.exitPointerLock=()=>{var g;return(g=document.exitPointerLock)==null?void 0:g.call(document)},t.isPointerLocked=()=>!!e.container&&document.pointerLockElement===e.container,t.handlePointerLockChange=()=>{t.isPointerLocked()?t.startPointerLockEvent():t.endPointerLockEvent()};function h(){e._view&&e.enabled&&e.enableRender&&(e.inRender=!0,e._view.traverseAllPasses(),e.inRender=!1),t.invokeRenderEvent()}t.requestAnimation=g=>{if(g===void 0){Fp("undefined requester, can not start animating");return}if(r.has(g)){Bp("requester is already registered for animating");return}r.add(g),!e.animationRequest&&r.size===1&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.extendAnimation=g=>{const y=Date.now()+g;e._animationExtendedEnd=Math.max(e._animationExtendedEnd,y),!e.animationRequest&&r.size===0&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.isAnimating=()=>e.xrAnimation||e.animationRequest!==null,t.cancelAnimation=function(g){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!r.has(g)){if(!y){const m=g&&g.getClassName?g.getClassName():g;Bp(`${m} did not request an animation`)}return}r.delete(g),e.animationRequest&&r.size===0&&Date.now()>e._animationExtendedEnd&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.switchToXRAnimation=()=>{e.animationRequest&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null),e.xrAnimation=!0},t.returnFromXRAnimation=()=>{e.xrAnimation=!1,r.size!==0&&(e.recentAnimationFrameRate=10,e.animationRequest=requestAnimationFrame(t.handleAnimation))},t.updateXRGamepads=(g,y,m)=>{g.inputSources.forEach(b=>{const C=b.gripSpace==null?null:y.getPose(b.gripSpace,m),S=b.gamepad,T=b.handedness;if(S){S.index in e.lastGamepadValues||(e.lastGamepadValues[S.index]={left:{buttons:{}},right:{buttons:{}},none:{buttons:{}}});for(let w=0;w<S.buttons.length;++w)w in e.lastGamepadValues[S.index][T].buttons||(e.lastGamepadValues[S.index][T].buttons[w]=!1),e.lastGamepadValues[S.index][T].buttons[w]!==S.buttons[w].pressed&&C!=null&&(t.button3DEvent({gamepad:S,position:C.transform.position,orientation:C.transform.orientation,pressed:S.buttons[w].pressed,device:b.handedness==="left"?Np.LeftController:Np.RightController,input:Cy[S.mapping]&&Cy[S.mapping][w]?Cy[S.mapping][w]:Fi.Trigger}),e.lastGamepadValues[S.index][T].buttons[w]=S.buttons[w].pressed),e.lastGamepadValues[S.index][T].buttons[w]&&C!=null&&t.move3DEvent({gamepad:S,position:C.transform.position,orientation:C.transform.orientation,device:b.handedness==="left"?Np.LeftController:Np.RightController})}})},t.handleMouseMove=g=>{const y={...c(g),position:l(g),deviceType:f(g)};e.moveTimeoutID===0?t.startMouseMoveEvent(y):(t.mouseMoveEvent(y),clearTimeout(e.moveTimeoutID)),e.moveTimeoutID=setTimeout(()=>{t.endMouseMoveEvent(),e.moveTimeoutID=0},200)},t.handleAnimation=()=>{const g=Date.now();e._animationFrameCount++,g-e._animationStartTime>1e3&&e._animationFrameCount>1&&(e.recentAnimationFrameRate=1e3*(e._animationFrameCount-1)/(g-e._animationStartTime),e.lastFrameTime=1/e.recentAnimationFrameRate,t.animationFrameRateUpdateEvent(),e._animationStartTime=g,e._animationFrameCount=1),t.animationEvent(),h(),r.size>0||Date.now()<e._animationExtendedEnd?e.animationRequest=requestAnimationFrame(t.handleAnimation):(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.handleWheel=g=>{Nu(g);const y={...pRe(g),...c(g),position:l(g),deviceType:f(g)};e.wheelTimeoutID===0&&(Math.abs(y.spinY)>=.3?s=Math.abs(y.spinY):s=1),y.spinY/=s,e.wheelTimeoutID===0?(t.startMouseWheelEvent(y),t.mouseWheelEvent(y)):(t.mouseWheelEvent(y),clearTimeout(e.wheelTimeoutID)),e.mouseScrollDebounceByPass?(t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0):e.wheelTimeoutID=setTimeout(()=>{t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0},200)},t.handleMouseUp=g=>{const y={...c(g),position:l(g),deviceType:f(g)};switch(g.button){case 0:t.leftButtonReleaseEvent(y);break;case 1:t.middleButtonReleaseEvent(y);break;case 2:t.rightButtonReleaseEvent(y);break;default:Fp(`Unknown mouse button released: ${g.button}`);break}},t.handleTouchStart=g=>{const y=[...a.values()];if(e.recognizeGestures&&y.length>1){const m=$p(a);if(y.length===2){const b={...c(nc),position:y[0].position,deviceType:f(g)};t.leftButtonReleaseEvent(b)}t.recognizeGesture("TouchStart",m)}else if(y.length===1){const m={...c(nc),position:l(g),deviceType:f(g)};t.leftButtonPressEvent(m)}},t.handleTouchMove=g=>{const y=[...a.values()];if(e.recognizeGestures&&y.length>1){const m=$p(a);t.recognizeGesture("TouchMove",m)}else if(y.length===1){const m={...c(nc),position:y[0].position,deviceType:f(g)};t.mouseMoveEvent(m)}},t.handleTouchEnd=g=>{const y=[...a.values()];if(e.recognizeGestures)if(y.length===0){const m={...c(nc),position:l(g),deviceType:f(g)};t.leftButtonReleaseEvent(m)}else if(y.length===1){const m=$p(a);t.recognizeGesture("TouchEnd",m);const b={...c(nc),position:y[0].position,deviceType:f(g)};t.leftButtonPressEvent(b)}else{const m=$p(a);t.recognizeGesture("TouchMove",m)}else if(y.length===1){const m={...c(nc),position:y[0].position,deviceType:f(g)};t.leftButtonReleaseEvent(m)}},t.setView=g=>{e._view!==g&&(e._view=g,e._view.getRenderable().setInteractor(t),t.modified())},t.getFirstRenderer=()=>{var g,y,m;return(m=(y=(g=e._view)==null?void 0:g.getRenderable())==null?void 0:y.getRenderersByReference())==null?void 0:m[0]},t.findPokedRenderer=function(){var w,x;let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e._view)return null;const m=(x=(w=e._view)==null?void 0:w.getRenderable())==null?void 0:x.getRenderers();if(!m||m.length===0)return null;m.sort((E,O)=>E.getLayer()-O.getLayer());let b=null,C=null,S=null,T=m.length;for(;T--;){const E=m[T];if(e._view.isInViewport(g,y,E)&&E.getInteractive()){S=E;break}b===null&&E.getInteractive()&&(b=E),C===null&&e._view.isInViewport(g,y,E)&&(C=E)}return S===null&&(S=b),S===null&&(S=C),S==null&&(S=m[0]),S},t.render=()=>{!t.isAnimating()&&!e.inRender&&h()},Wb.forEach(g=>{const y=g.charAt(0).toLowerCase()+g.slice(1);t[`${y}Event`]=m=>{if(!e.enabled)return;if(!t.getCurrentRenderer()){gRe(`
          Can not forward events without a current renderer on the interactor.
        `);return}const C={type:g,pokedRenderer:e.currentRenderer,firstRenderer:t.getFirstRenderer(),...m};t[`invoke${g}`](C)}}),t.recognizeGesture=(g,y)=>{if(Object.keys(y).length>2)return;if(e.startingEventPositions||(e.startingEventPositions={}),g==="TouchStart"){Object.keys(y).forEach(k=>{e.startingEventPositions[k]=y[k]}),e.currentGesture="Start";return}if(g==="TouchEnd"){e.currentGesture==="Pinch"&&(t.render(),t.endPinchEvent()),e.currentGesture==="Rotate"&&(t.render(),t.endRotateEvent()),e.currentGesture==="Pan"&&(t.render(),t.endPanEvent()),e.currentGesture="Start",e.startingEventPositions={};return}let m=0;const b=[],C=[];Object.keys(y).forEach(k=>{b[m]=y[k],C[m]=e.startingEventPositions[k],m++});const S=Math.sqrt((C[0].x-C[1].x)*(C[0].x-C[1].x)+(C[0].y-C[1].y)*(C[0].y-C[1].y)),T=Math.sqrt((b[0].x-b[1].x)*(b[0].x-b[1].x)+(b[0].y-b[1].y)*(b[0].y-b[1].y));let w=Bc(Math.atan2(C[1].y-C[0].y,C[1].x-C[0].x)),x=Bc(Math.atan2(b[1].y-b[0].y,b[1].x-b[0].x)),E=x-w;x=x+180>=360?x-180:x+180,w=w+180>=360?w-180:w+180,Math.abs(x-w)<Math.abs(E)&&(E=x-w);const O=[];if(O[0]=(b[0].x-C[0].x+b[1].x-C[1].x)/2,O[1]=(b[0].y-C[0].y+b[1].y-C[1].y)/2,g==="TouchMove")if(e.currentGesture==="Start"){let k=.01*Math.sqrt(e.container.clientWidth*e.container.clientWidth+e.container.clientHeight*e.container.clientHeight);k<15&&(k=15);const M=Math.abs(T-S),D=T*3.1415926*Math.abs(E)/360,I=Math.sqrt(O[0]*O[0]+O[1]*O[1]);if(M>k&&M>D&&M>I){e.currentGesture="Pinch";const B={scale:1,touches:y};t.startPinchEvent(B)}else if(D>k&&D>I){e.currentGesture="Rotate";const B={rotation:0,touches:y};t.startRotateEvent(B)}else if(I>k){e.currentGesture="Pan";const B={translation:[0,0],touches:y};t.startPanEvent(B)}}else{if(e.currentGesture==="Rotate"){const k={rotation:E,touches:y};t.rotateEvent(k)}if(e.currentGesture==="Pinch"){const k={scale:T/S,touches:y};t.pinchEvent(k)}if(e.currentGesture==="Pan"){const k={translation:O,touches:y};t.panEvent(k)}}},t.handleVisibilityChange=()=>{e._animationStartTime=Date.now(),e._animationFrameCount=0},t.setCurrentRenderer=g=>{e._forcedRenderer=!!g,e.currentRenderer=g},t.setContainer=g=>{p();const y=n.setContainer(g??null);return y&&d(),y},t.delete=()=>{for(;r.size;)t.cancelAnimation(r.values().next().value);typeof document.hidden<"u"&&document.removeEventListener("visibilitychange",t.handleVisibilityChange),e.container&&t.setContainer(null),n.delete()},typeof document.hidden<"u"&&document.addEventListener("visibilitychange",t.handleVisibilityChange,!1)}const vRe={renderWindow:null,interactorStyle:null,picker:null,pickingManager:null,initialized:!1,enabled:!1,enableRender:!0,currentRenderer:null,lightFollowCamera:!0,desiredUpdateRate:30,stillUpdateRate:2,container:null,recognizeGestures:!0,currentGesture:"Start",animationRequest:null,lastFrameTime:.1,recentAnimationFrameRate:10,wheelTimeoutID:0,moveTimeoutID:0,lastGamepadValues:{},preventDefaultOnPointerDown:!1,preventDefaultOnPointerUp:!1,mouseScrollDebounceByPass:!1};function JF(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,vRe,n),A.obj(t,e),e._animationExtendedEnd=0,A.event(t,e,"RenderEvent"),Wb.forEach(r=>A.event(t,e,r)),A.get(t,e,["initialized","interactorStyle","lastFrameTime","recentAnimationFrameRate","_view"]),A.setGet(t,e,["container","lightFollowCamera","enabled","enableRender","recognizeGestures","desiredUpdateRate","stillUpdateRate","picker","preventDefaultOnPointerDown","preventDefaultOnPointerUp","mouseScrollDebounceByPass"]),A.moveToProtected(t,e,["view"]),hRe(t,e)}const yRe=A.newInstance(JF,"vtkRenderWindowInteractor");var QF={newInstance:yRe,extend:JF,handledEvents:Wb,...ZF};const{vtkErrorMacro:mRe,VOID:CRe}=A;function SRe(t,e,n,r){return t.getRenderWindow().getViews()[0].worldToDisplay(e,n,r,t)}function bRe(t,e,n,r){return t.getRenderWindow().getViews()[0].displayToWorld(e,n,r,t)}const wRe={computeWorldToDisplay:SRe,computeDisplayToWorld:bRe};function TRe(t,e){e.classHierarchy.push("vtkInteractorObserver");const n={...t};function r(){for(;e.subscribedEvents.length;)e.subscribedEvents.pop().unsubscribe()}function a(){QF.handledEvents.forEach(s=>{t[`handle${s}`]&&e.subscribedEvents.push(e._interactor[`on${s}`](o=>e.processEvents?t[`handle${s}`](o):CRe,e.priority))})}t.setInteractor=s=>{s!==e._interactor&&(r(),e._interactor=s,s&&e.enabled&&a(),t.modified())},t.setEnabled=s=>{s!==e.enabled&&(r(),s&&(e._interactor?a():mRe(`
          The interactor must be set before subscribing to events
        `)),e.enabled=s,t.modified())},t.computeDisplayToWorld=(s,o,i,l)=>s?e._interactor.getView().displayToWorld(o,i,l,s):null,t.computeWorldToDisplay=(s,o,i,l)=>s?e._interactor.getView().worldToDisplay(o,i,l,s):null,t.setPriority=s=>{n.setPriority(s)&&e._interactor&&(r(),a())}}const xRe={enabled:!0,priority:0,processEvents:!0,subscribedEvents:[]};function e$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,xRe,n),A.obj(t,e),A.event(t,e,"InteractionEvent"),A.event(t,e,"StartInteractionEvent"),A.event(t,e,"EndInteractionEvent"),A.get(t,e,["_interactor","enabled"]),A.setGet(t,e,["priority","processEvents"]),A.moveToProtected(t,e,["interactor"]),TRe(t,e)}const ERe=A.newInstance(e$,"vtkInteractorObserver");var Ib={newInstance:ERe,extend:e$,...wRe};const kRe={IS_START:0,IS_NONE:0,IS_ROTATE:1,IS_PAN:2,IS_SPIN:3,IS_DOLLY:4,IS_CAMERA_POSE:11,IS_WINDOW_LEVEL:1024,IS_SLICE:1025};var Pb={States:kRe};const{States:vs}=Pb,Sy={Rotate:vs.IS_ROTATE,Pan:vs.IS_PAN,Spin:vs.IS_SPIN,Dolly:vs.IS_DOLLY,CameraPose:vs.IS_CAMERA_POSE,WindowLevel:vs.IS_WINDOW_LEVEL,Slice:vs.IS_SLICE};function ORe(t,e){e.classHierarchy.push("vtkInteractorStyle"),Object.keys(Sy).forEach(n=>{A.event(t,e,`Start${n}Event`),t[`start${n}`]=()=>{e.state===vs.IS_NONE&&(e.state=Sy[n],e._interactor.requestAnimation(t),t.invokeStartInteractionEvent({type:"StartInteractionEvent"}),t[`invokeStart${n}Event`]({type:`Start${n}Event`}))},A.event(t,e,`End${n}Event`),t[`end${n}`]=()=>{e.state===Sy[n]&&(e.state=vs.IS_NONE,e._interactor.cancelAnimation(t),t.invokeEndInteractionEvent({type:"EndInteractionEvent"}),t[`invokeEnd${n}Event`]({type:`End${n}Event`}),e._interactor.render())}}),t.handleKeyPress=n=>{const r=e._interactor;let a=null;switch(n.key){case"r":case"R":n.pokedRenderer.resetCamera(),r.render();break;case"w":case"W":a=n.pokedRenderer.getActors(),a.forEach(s=>{const o=s.getProperty();o.setRepresentationToWireframe&&o.setRepresentationToWireframe()}),r.render();break;case"s":case"S":a=n.pokedRenderer.getActors(),a.forEach(s=>{const o=s.getProperty();o.setRepresentationToSurface&&o.setRepresentationToSurface()}),r.render();break;case"v":case"V":a=n.pokedRenderer.getActors(),a.forEach(s=>{const o=s.getProperty();o.setRepresentationToPoints&&o.setRepresentationToPoints()}),r.render();break}}}const MRe={state:vs.IS_NONE,handleObservers:1,autoAdjustCameraClippingRange:1};function t$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,MRe,n),Ib.extend(t,e,n),ORe(t,e)}const RRe=A.newInstance(t$,"vtkInteractorStyle");var Gb={newInstance:RRe,extend:t$,...Pb};const{vtkDebugMacro:by}=A,{States:_Re}=Gb,Bu={type:"StartInteractionEvent"},No={type:"InteractionEvent"},Fu={type:"EndInteractionEvent"};function V1(t,e,n,r,a,s){const o=t.getActiveCamera();let i=o.getFocalPoint();i=e.getInteractorStyle().computeWorldToDisplay(t,i[0],i[1],i[2]);const l=i[2],c=e.getInteractorStyle().computeDisplayToWorld(t,n,r,l),u=e.getInteractorStyle().computeDisplayToWorld(t,a,s,l),f=[u[0]-c[0],u[1]-c[1],u[2]-c[2]];i=o.getFocalPoint();const d=o.getPosition();o.setFocalPoint(f[0]+i[0],f[1]+i[1],f[2]+i[2]),o.setPosition(f[0]+d[0],f[1]+d[1],f[2]+d[2])}function VRe(t,e,n,r){const a=n.getActiveCamera();if(a.getParallelProjection()){const s=r.getView(),o=s.getViewportSize(n),i=n.getViewport(),l=s.getSize(),c=o[0],u=o[1],f=c/2,d=u/2,p=e.x-i[0]*l[0],h=e.y-i[1]*l[1];V1(n,r,f,d,p,h),a.setParallelScale(a.getParallelScale()/t),V1(n,r,p,h,f,d)}else{let s=a.getFocalPoint();const o=a.getViewPlaneNormal();s=r.getInteractorStyle().computeWorldToDisplay(n,s[0],s[1],s[2]);const i=r.getInteractorStyle().computeDisplayToWorld(n,e.x,e.y,s[2]);a.setFocalPoint(i[0],i[1],i[2]),a.dolly(t),n.resetCameraClippingRange();const l=a.getPosition();s=a.getFocalPoint();const c=[0,0,0];let u=o[0]*(s[0]-l[0])+o[1]*(s[1]-l[1])+o[2]*(s[2]-l[2]);u/=o[0]**2+o[1]**2+o[2]**2,c[0]=l[0]+o[0]*u,c[1]=l[1]+o[1]*u,c[2]=l[2]+o[2]*u,a.setFocalPoint(c[0],c[1],c[2]),n.resetCameraClippingRange()}}function DRe(t,e,n){if(Number.isNaN(n))return;const r=e.getActiveCamera();r.getParallelProjection()?r.setParallelScale(r.getParallelScale()/n):(r.dolly(n),e.resetCameraClippingRange()),t.getLightFollowCamera()&&e.updateLightsGeometryToFollowCamera()}const LRe={dollyToPosition:VRe,translateCamera:V1,dollyByFactor:DRe};function NRe(t,e){e.classHierarchy.push("vtkInteractorStyleManipulator"),e.mouseManipulators=[],e.keyboardManipulators=[],e.vrManipulators=[],e.gestureManipulators=[],e.currentManipulator=null,e.currentWheelManipulator=null,e.centerOfRotation=[0,0,0],e.rotationFactor=1,t.removeAllManipulators=()=>{t.removeAllMouseManipulators(),t.removeAllKeyboardManipulators(),t.removeAllVRManipulators(),t.removeAllGestureManipulators()},t.removeAllMouseManipulators=()=>{e.mouseManipulators=[]},t.removeAllKeyboardManipulators=()=>{e.keyboardManipulators=[]},t.removeAllVRManipulators=()=>{e.vrManipulators=[]},t.removeAllGestureManipulators=()=>{e.gestureManipulators=[]};const n=(a,s)=>{const o=s.indexOf(a);return o===-1?!1:(s.splice(o,1),t.modified(),!0)};t.removeMouseManipulator=a=>n(a,e.mouseManipulators),t.removeKeyboardManipulator=a=>n(a,e.keyboardManipulators),t.removeVRManipulator=a=>n(a,e.vrManipulators),t.removeGestureManipulator=a=>n(a,e.gestureManipulators);const r=(a,s)=>s.indexOf(a)!==-1?!1:(s.push(a),t.modified(),!0);t.addMouseManipulator=a=>r(a,e.mouseManipulators),t.addKeyboardManipulator=a=>r(a,e.keyboardManipulators),t.addVRManipulator=a=>r(a,e.vrManipulators),t.addGestureManipulator=a=>r(a,e.gestureManipulators),t.getNumberOfMouseManipulators=()=>e.mouseManipulators.length,t.getNumberOfKeyboardManipulators=()=>e.keyboardManipulators.length,t.getNumberOfVRManipulators=()=>e.vrManipulators.length,t.getNumberOfGestureManipulators=()=>e.gestureManipulators.length,t.resetCurrentManipulator=()=>{e.currentManipulator=null,e.currentWheelManipulator=null},t.handleLeftButtonPress=a=>{e.previousPosition=a.position,t.onButtonDown(1,a)},t.handleMiddleButtonPress=a=>{e.previousPosition=a.position,t.onButtonDown(2,a)},t.handleRightButtonPress=a=>{e.previousPosition=a.position,t.onButtonDown(3,a)},t.handleButton3D=a=>{a&&(e.currentManipulator=t.findVRManipulator(a.device,a.input,a.pressed),e.currentManipulator?(e.currentManipulator.onButton3D(t,a.pokedRenderer,e.state,a.device,a.input,a.pressed),a.pressed?t.startCameraPose():t.endCameraPose()):by("No manipulator found"))},t.handleMove3D=a=>{e.currentManipulator&&e.state===_Re.IS_CAMERA_POSE&&e.currentManipulator.onMove3D(t,a.pokedRenderer,e.state,a)},t.onButtonDown=(a,s)=>{e.currentManipulator||(e.currentManipulator=t.findMouseManipulator(a,s.shiftKey,s.controlKey,s.altKey),e.currentManipulator?(e.currentManipulator.setCenter&&e.currentManipulator.setCenter(e.centerOfRotation),e.currentManipulator.setRotationFactor&&e.currentManipulator.setRotationFactor(e.rotationFactor),e.currentManipulator.startInteraction(),e.currentManipulator.onButtonDown(e._interactor,s.pokedRenderer,s.position),e._interactor.requestAnimation(t.onButtonDown),t.invokeStartInteractionEvent(Bu)):by("No manipulator found"))},t.findMouseManipulator=(a,s,o,i)=>{let l=null,c=e.mouseManipulators.length;for(;c--;){const u=e.mouseManipulators[c];u&&u.getButton()===a&&u.getShift()===s&&u.getControl()===o&&u.getAlt()===i&&u.isDragEnabled()&&(l=u)}return l},t.findVRManipulator=(a,s)=>{let o=null,i=e.vrManipulators.length;for(;i--;){const l=e.vrManipulators[i];l&&l.getDevice()===a&&l.getInput()===s&&(o=l)}return o},t.handleLeftButtonRelease=()=>{t.onButtonUp(1)},t.handleMiddleButtonRelease=()=>{t.onButtonUp(2)},t.handleRightButtonRelease=()=>{t.onButtonUp(3)},t.onButtonUp=a=>{e.currentManipulator&&e.currentManipulator.getButton&&e.currentManipulator.getButton()===a&&(e.currentManipulator.onButtonUp(e._interactor),e.currentManipulator.endInteraction(),e.currentManipulator=null,e._interactor.cancelAnimation(t.onButtonDown),t.invokeEndInteractionEvent(Fu))},t.handleStartMouseWheel=a=>{if(e.currentWheelManipulator)return;let s=null,o=e.mouseManipulators.length;for(;o--;){const i=e.mouseManipulators[o];i&&i.isScrollEnabled()&&i.getShift()===a.shiftKey&&i.getControl()===a.controlKey&&i.getAlt()===a.altKey&&(s=i)}s?(e.currentWheelManipulator=s,e.currentWheelManipulator.onStartScroll(e._interactor,a.pokedRenderer,a.spinY),e.currentWheelManipulator.startInteraction(),e._interactor.requestAnimation(t.handleStartMouseWheel),t.invokeStartInteractionEvent(Bu)):by("No manipulator found")},t.handleEndMouseWheel=()=>{e.currentWheelManipulator&&e.currentWheelManipulator.onEndScroll&&(e.currentWheelManipulator.onEndScroll(e._interactor),e.currentWheelManipulator.endInteraction(),e.currentWheelManipulator=null,e._interactor.cancelAnimation(t.handleStartMouseWheel),t.invokeEndInteractionEvent(Fu))},t.handleMouseWheel=a=>{e.currentWheelManipulator&&e.currentWheelManipulator.onScroll&&(e.currentWheelManipulator.onScroll(e._interactor,a.pokedRenderer,a.spinY,e.cachedMousePosition),t.invokeInteractionEvent(No))},t.handleMouseMove=a=>{e.cachedMousePosition=a.position,e.currentManipulator&&e.currentManipulator.onMouseMove&&(e.currentManipulator.onMouseMove(e._interactor,a.pokedRenderer,a.position),t.invokeInteractionEvent(No))},t.handleKeyPress=a=>{e.keyboardManipulators.filter(s=>s.onKeyPress).forEach(s=>{s.onKeyPress(e._interactor,a.pokedRenderer,a.key),t.invokeInteractionEvent(No)})},t.handleKeyDown=a=>{e.keyboardManipulators.filter(s=>s.onKeyDown).forEach(s=>{s.onKeyDown(e._interactor,a.pokedRenderer,a.key),t.invokeInteractionEvent(No)})},t.handleKeyUp=a=>{e.keyboardManipulators.filter(s=>s.onKeyUp).forEach(s=>{s.onKeyUp(e._interactor,a.pokedRenderer,a.key),t.invokeInteractionEvent(No)})},t.handleStartPinch=a=>{t.startDolly();let s=e.gestureManipulators.length;for(;s--;){const o=e.gestureManipulators[s];o&&o.isPinchEnabled()&&(o.onStartPinch(e._interactor,a.scale),o.startInteraction())}e._interactor.requestAnimation(t.handleStartPinch),t.invokeStartInteractionEvent(Bu)},t.handleEndPinch=()=>{t.endDolly();let a=e.gestureManipulators.length;for(;a--;){const s=e.gestureManipulators[a];s&&s.isPinchEnabled()&&(s.onEndPinch(e._interactor),s.endInteraction())}e._interactor.cancelAnimation(t.handleStartPinch),t.invokeEndInteractionEvent(Fu)},t.handleStartRotate=a=>{t.startRotate();let s=e.gestureManipulators.length;for(;s--;){const o=e.gestureManipulators[s];o&&o.isRotateEnabled()&&(o.onStartRotate(e._interactor,a.rotation),o.startInteraction())}e._interactor.requestAnimation(t.handleStartRotate),t.invokeStartInteractionEvent(Bu)},t.handleEndRotate=()=>{t.endRotate();let a=e.gestureManipulators.length;for(;a--;){const s=e.gestureManipulators[a];s&&s.isRotateEnabled()&&(s.onEndRotate(e._interactor),s.endInteraction())}e._interactor.cancelAnimation(t.handleStartRotate),t.invokeEndInteractionEvent(Fu)},t.handleStartPan=a=>{t.startPan();let s=e.gestureManipulators.length;for(;s--;){const o=e.gestureManipulators[s];o&&o.isPanEnabled()&&(o.onStartPan(e._interactor,a.translation),o.startInteraction())}e._interactor.requestAnimation(t.handleStartPan),t.invokeStartInteractionEvent(Bu)},t.handleEndPan=()=>{t.endPan();let a=e.gestureManipulators.length;for(;a--;){const s=e.gestureManipulators[a];s&&s.isPanEnabled()&&(s.onEndPan(e._interactor),s.endInteraction())}e._interactor.cancelAnimation(t.handleStartPan),t.invokeEndInteractionEvent(Fu)},t.handlePinch=a=>{let s=e.gestureManipulators.length,o=0;for(;s--;){const i=e.gestureManipulators[s];i&&i.isPinchEnabled()&&(i.onPinch(e._interactor,a.pokedRenderer,a.scale),o++)}o&&t.invokeInteractionEvent(No)},t.handlePan=a=>{let s=e.gestureManipulators.length,o=0;for(;s--;){const i=e.gestureManipulators[s];i&&i.isPanEnabled()&&(i.onPan(e._interactor,a.pokedRenderer,a.translation),o++)}o&&t.invokeInteractionEvent(No)},t.handleRotate=a=>{let s=e.gestureManipulators.length,o=0;for(;s--;){const i=e.gestureManipulators[s];i&&i.isRotateEnabled()&&(i.onRotate(e._interactor,a.pokedRenderer,a.rotation),o++)}o&&t.invokeInteractionEvent(No)}}const BRe={cachedMousePosition:null,currentManipulator:null,currentWheelManipulator:null,centerOfRotation:[0,0,0],rotationFactor:1};function n$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,BRe,n),Gb.extend(t,e,n),A.setGet(t,e,["rotationFactor"]),A.get(t,e,["mouseManipulators","keyboardManipulators","vrManipulators","gestureManipulators"]),A.setGetArray(t,e,["centerOfRotation"],3),NRe(t,e)}const FRe=A.newInstance(n$,"vtkInteractorStyleManipulator");var $Re={newInstance:FRe,extend:n$,...LRe};const{vtkDebugMacro:Up}=A;function URe(t,e){e.classHierarchy.push("vtkCamera");const n=new Float64Array(3),r=new Float64Array([0,0,-1]),a=new Float64Array([0,1,0]),s=ct(new Float64Array(16)),o=ct(new Float64Array(16)),i=new Float64Array(3),l=new Float64Array(3),c=new Float64Array(3),u=ct(new Float64Array(16)),f=ct(new Float64Array(16)),d=new Float64Array(3),p=new Float64Array(3);function h(){e.viewPlaneNormal[0]=-e.directionOfProjection[0],e.viewPlaneNormal[1]=-e.directionOfProjection[1],e.viewPlaneNormal[2]=-e.directionOfProjection[2]}t.orthogonalizeViewUp=()=>{const g=t.getViewMatrix();e.viewUp[0]=g[4],e.viewUp[1]=g[5],e.viewUp[2]=g[6],t.modified()},t.setPosition=(g,y,m)=>{g===e.position[0]&&y===e.position[1]&&m===e.position[2]||(e.position[0]=g,e.position[1]=y,e.position[2]=m,t.computeDistance(),t.modified())},t.setFocalPoint=(g,y,m)=>{g===e.focalPoint[0]&&y===e.focalPoint[1]&&m===e.focalPoint[2]||(e.focalPoint[0]=g,e.focalPoint[1]=y,e.focalPoint[2]=m,t.computeDistance(),t.modified())},t.setDistance=g=>{if(e.distance===g)return;e.distance=g,e.distance<1e-20&&(e.distance=1e-20,Up("Distance is set to minimum."));const y=e.directionOfProjection;e.focalPoint[0]=e.position[0]+y[0]*e.distance,e.focalPoint[1]=e.position[1]+y[1]*e.distance,e.focalPoint[2]=e.position[2]+y[2]*e.distance,t.modified()},t.computeDistance=()=>{const g=e.focalPoint[0]-e.position[0],y=e.focalPoint[1]-e.position[1],m=e.focalPoint[2]-e.position[2];if(e.distance=Math.sqrt(g*g+y*y+m*m),e.distance<1e-20){e.distance=1e-20,Up("Distance is set to minimum.");const b=e.directionOfProjection;e.focalPoint[0]=e.position[0]+b[0]*e.distance,e.focalPoint[1]=e.position[1]+b[1]*e.distance,e.focalPoint[2]=e.position[2]+b[2]*e.distance}e.directionOfProjection[0]=g/e.distance,e.directionOfProjection[1]=y/e.distance,e.directionOfProjection[2]=m/e.distance,h()},t.dolly=g=>{if(g<=0)return;const y=e.distance/g;t.setPosition(e.focalPoint[0]-y*e.directionOfProjection[0],e.focalPoint[1]-y*e.directionOfProjection[1],e.focalPoint[2]-y*e.directionOfProjection[2])},t.roll=g=>{const y=e.position,m=e.focalPoint,b=e.viewUp,C=new Float64Array([b[0],b[1],b[2],0]);ct(u);const S=new Float64Array([m[0]-y[0],m[1]-y[1],m[2]-y[2]]);ia(u,u,xn(g),S),Xs(C,C,u),e.viewUp[0]=C[0],e.viewUp[1]=C[1],e.viewUp[2]=C[2],t.modified()},t.azimuth=g=>{const y=e.focalPoint;ct(f),Rn(f,f,y),ia(f,f,xn(g),e.viewUp),Rn(f,f,[-y[0],-y[1],-y[2]]),It(d,e.position,f),t.setPosition(d[0],d[1],d[2])},t.yaw=g=>{const y=e.position;ct(f),Rn(f,f,y),ia(f,f,xn(g),e.viewUp),Rn(f,f,[-y[0],-y[1],-y[2]]),It(p,e.focalPoint,f),t.setFocalPoint(p[0],p[1],p[2])},t.elevation=g=>{const y=e.focalPoint,m=t.getViewMatrix(),b=[-m[0],-m[1],-m[2]];ct(f),Rn(f,f,y),ia(f,f,xn(g),b),Rn(f,f,[-y[0],-y[1],-y[2]]),It(d,e.position,f),t.setPosition(d[0],d[1],d[2])},t.pitch=g=>{const y=e.position,m=t.getViewMatrix(),b=[m[0],m[1],m[2]];ct(f),Rn(f,f,y),ia(f,f,xn(g),b),Rn(f,f,[-y[0],-y[1],-y[2]]),It(p,e.focalPoint,f),t.setFocalPoint(...p)},t.zoom=g=>{g<=0||(e.parallelProjection?e.parallelScale/=g:e.viewAngle/=g,t.modified())},t.translate=(g,y,m)=>{const b=[g,y,m];bf(e.position,b,e.position),bf(e.focalPoint,b,e.focalPoint),t.computeDistance(),t.modified()},t.applyTransform=g=>{const y=[...e.viewUp,1],m=[],b=[],C=[];y[0]+=e.position[0],y[1]+=e.position[1],y[2]+=e.position[2],Xs(m,[...e.position,1],g),Xs(b,[...e.focalPoint,1],g),Xs(C,y,g),C[0]-=m[0],C[1]-=m[1],C[2]-=m[2],t.setPosition(...m.slice(0,3)),t.setFocalPoint(...b.slice(0,3)),t.setViewUp(...C.slice(0,3))},t.getThickness=()=>e.clippingRange[1]-e.clippingRange[0],t.setThickness=g=>{let y=g;y<1e-20&&(y=1e-20,Up("Thickness is set to minimum.")),t.setClippingRange(e.clippingRange[0],e.clippingRange[0]+y)},t.setThicknessFromFocalPoint=g=>{let y=g;y<1e-20&&(y=1e-20,Up("Thickness is set to minimum.")),t.setClippingRange(e.distance-y/2,e.distance+y/2)},t.setRoll=g=>{},t.getRoll=()=>{},t.setObliqueAngles=(g,y)=>{},t.getOrientation=()=>{},t.getOrientationWXYZ=()=>{},t.getFrustumPlanes=g=>{},t.getCameraLightTransformMatrix=g=>(Un(g,e.cameraLightTransform),g),t.computeCameraLightTransform=()=>{Un(s,t.getViewMatrix()),An(s,s),P1(o,[e.distance,e.distance,e.distance]),Ut(s,s,o),ct(e.cameraLightTransform),Rn(e.cameraLightTransform,s,[0,0,-1])},t.deepCopy=g=>{},t.physicalOrientationToWorldDirection=g=>{const y=aw(g[0],g[1],g[2],g[3]),m=vl(),b=aw(0,0,1,0);return FU(m,y),rw(b,y,b),rw(b,b,m),[b[0],b[1],b[2]]},t.getPhysicalToWorldMatrix=g=>{t.getWorldToPhysicalMatrix(g),An(g,g)},t.getWorldToPhysicalMatrix=g=>{ct(g);const y=[3];_r(e.physicalViewNorth,e.physicalViewUp,y),g[0]=y[0],g[1]=y[1],g[2]=y[2],g[4]=e.physicalViewUp[0],g[5]=e.physicalViewUp[1],g[6]=e.physicalViewUp[2],g[8]=-e.physicalViewNorth[0],g[9]=-e.physicalViewNorth[1],g[10]=-e.physicalViewNorth[2],$t(g,g),hn(i,1/e.physicalScale,1/e.physicalScale,1/e.physicalScale),so(g,g,i),Rn(g,g,e.physicalTranslation)},t.computeViewParametersFromViewMatrix=g=>{An(s,g),It(i,n,s),t.computeDistance();const y=e.distance;t.setPosition(i[0],i[1],i[2]),It(l,r,s),Xo(l,l,i),es(l,l),t.setDirectionOfProjection(l[0],l[1],l[2]),It(c,a,s),Xo(c,c,i),es(c,c),t.setViewUp(c[0],c[1],c[2]),t.setDistance(y)},t.computeViewParametersFromPhysicalMatrix=g=>{t.getWorldToPhysicalMatrix(s),Ut(s,g,s),t.computeViewParametersFromViewMatrix(s)},t.setViewMatrix=g=>{e.viewMatrix=g,e.viewMatrix&&(Un(s,e.viewMatrix),t.computeViewParametersFromViewMatrix(s),$t(e.viewMatrix,e.viewMatrix))},t.getViewMatrix=()=>{if(e.viewMatrix)return e.viewMatrix;nO(s,e.position,e.focalPoint,e.viewUp),$t(s,s);const g=new Float64Array(16);return Un(g,s),g},t.setProjectionMatrix=g=>{e.projectionMatrix=g},t.getProjectionMatrix=(g,y,m)=>{const b=new Float64Array(16);if(ct(b),e.projectionMatrix){const T=1/e.physicalScale;return hn(i,T,T,T),Un(b,e.projectionMatrix),so(b,b,i),$t(b,b),b}ct(s);const C=e.clippingRange[1]-e.clippingRange[0],S=[e.clippingRange[0]+(y+1)*C/2,e.clippingRange[0]+(m+1)*C/2];if(e.parallelProjection){const T=e.parallelScale*g,w=e.parallelScale,x=(e.windowCenter[0]-1)*T,E=(e.windowCenter[0]+1)*T,O=(e.windowCenter[1]-1)*w,k=(e.windowCenter[1]+1)*w;tO(s,x,E,O,k,S[0],S[1]),$t(s,s)}else{if(e.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");{const T=Math.tan(xn(e.viewAngle)/2);let w,x;e.useHorizontalViewAngle===!0?(w=e.clippingRange[0]*T,x=e.clippingRange[0]*T/g):(w=e.clippingRange[0]*T*g,x=e.clippingRange[0]*T);const E=(e.windowCenter[0]-1)*w,O=(e.windowCenter[0]+1)*w,k=(e.windowCenter[1]-1)*x,M=(e.windowCenter[1]+1)*x,D=S[0],I=S[1];s[0]=2*D/(O-E),s[5]=2*D/(M-k),s[2]=(E+O)/(O-E),s[6]=(k+M)/(M-k),s[10]=-(D+I)/(I-D),s[14]=-1,s[11]=-2*D*I/(I-D),s[15]=0}}return Un(b,s),b},t.getCompositeProjectionMatrix=(g,y,m)=>{const b=t.getViewMatrix(),C=t.getProjectionMatrix(g,y,m);return Ut(C,b,C),C},t.setDirectionOfProjection=(g,y,m)=>{if(e.directionOfProjection[0]===g&&e.directionOfProjection[1]===y&&e.directionOfProjection[2]===m)return;e.directionOfProjection[0]=g,e.directionOfProjection[1]=y,e.directionOfProjection[2]=m;const b=e.directionOfProjection;e.focalPoint[0]=e.position[0]+b[0]*e.distance,e.focalPoint[1]=e.position[1]+b[1]*e.distance,e.focalPoint[2]=e.position[2]+b[2]*e.distance,h()},t.setDeviceAngles=(g,y,m,b)=>{const C=[3];_r(e.physicalViewNorth,e.physicalViewUp,C);const S=ct(new Float64Array(16));ia(S,S,xn(g),e.physicalViewUp),ia(S,S,xn(y),C),ia(S,S,xn(m),e.physicalViewNorth),ia(S,S,xn(-b),e.physicalViewUp);const T=new Float64Array([-e.physicalViewUp[0],-e.physicalViewUp[1],-e.physicalViewUp[2]]),w=new Float64Array(e.physicalViewNorth);It(T,T,S),It(w,w,S),t.setDirectionOfProjection(T[0],T[1],T[2]),t.setViewUp(w[0],w[1],w[2]),t.modified()},t.setOrientationWXYZ=(g,y,m,b)=>{const C=ct(new Float64Array(16));if(g!==0&&(y!==0||m!==0||b!==0)){const w=xn(g),x=vl();z1(x,[y,m,b],w),G1(C,x)}const S=new Float64Array(3);It(S,[0,0,-1],C);const T=new Float64Array(3);It(T,[0,1,0],C),t.setDirectionOfProjection(...S),t.setViewUp(...T),t.modified()},t.computeClippingRange=g=>{let y=null,m=null;y=e.viewPlaneNormal,m=e.position;const b=-y[0],C=-y[1],S=-y[2],T=-(b*m[0]+C*m[1]+S*m[2]),w=[b*g[0]+C*g[2]+S*g[4]+T,1e-18];for(let x=0;x<2;x++)for(let E=0;E<2;E++)for(let O=0;O<2;O++){const k=b*g[O]+C*g[2+E]+S*g[4+x]+T;w[0]=k<w[0]?k:w[0],w[1]=k>w[1]?k:w[1]}return w}}const ARe={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],windowCenter:[0,0],viewPlaneNormal:[0,0,1],useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],freezeFocalPoint:!1,projectionMatrix:null,viewMatrix:null,cameraLightTransform:$1(),physicalTranslation:[0,0,0],physicalScale:1,physicalViewUp:[0,1,0],physicalViewNorth:[0,0,-1]};function r$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ARe,n),A.obj(t,e),A.get(t,e,["distance"]),A.setGet(t,e,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","useOffAxisProjection","freezeFocalPoint","physicalScale"]),A.getArray(t,e,["directionOfProjection","viewPlaneNormal","position","focalPoint"]),A.setGetArray(t,e,["clippingRange","windowCenter"],2),A.setGetArray(t,e,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight","physicalTranslation","physicalViewUp","physicalViewNorth"],3),URe(t,e)}const WRe=A.newInstance(r$,"vtkCamera");var IRe={newInstance:WRe,extend:r$};const PRe=["HeadLight","CameraLight","SceneLight"];function GRe(t,e){e.classHierarchy.push("vtkLight");const n=new Float64Array(3);t.getTransformedPosition=()=>(e.transformMatrix?It(n,e.position,e.transformMatrix):hn(n,e.position[0],e.position[1],e.position[2]),n),t.getTransformedFocalPoint=()=>(e.transformMatrix?It(n,e.focalPoint,e.transformMatrix):hn(n,e.focalPoint[0],e.focalPoint[1],e.focalPoint[2]),n),t.getDirection=()=>(e.directionMTime<e.mtime&&(Dy(e.direction,e.focalPoint,e.position),ts(e.direction),e.directionMTime=e.mtime),e.direction),t.setDirection=r=>{const a=new Float64Array(3);Dy(a,e.position,r),e.focalPoint=a},t.setDirectionAngle=(r,a)=>{const s=xn(r),o=xn(a);t.setPosition(Math.cos(s)*Math.sin(o),Math.sin(s),Math.cos(s)*Math.cos(o)),t.setFocalPoint(0,0,0),t.setPositional(0)},t.setLightTypeToHeadLight=()=>{t.setLightType("HeadLight")},t.setLightTypeToCameraLight=()=>{t.setLightType("CameraLight")},t.setLightTypeToSceneLight=()=>{t.setTransformMatrix(null),t.setLightType("SceneLight")},t.lightTypeIsHeadLight=()=>e.lightType==="HeadLight",t.lightTypeIsSceneLight=()=>e.lightType==="SceneLight",t.lightTypeIsCameraLight=()=>e.lightType==="CameraLight"}const zRe={switch:!0,intensity:1,color:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,coneFalloff:5,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1,direction:[0,0,0],directionMTime:0};function a$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,zRe,n),A.obj(t,e),A.setGet(t,e,["intensity","switch","positional","exponent","coneAngle","coneFalloff","transformMatrix","lightType","shadowAttenuation","attenuationValues"]),A.setGetArray(t,e,["color","position","focalPoint","attenuationValues"],3),GRe(t,e)}const HRe=A.newInstance(a$,"vtkLight");var KRe={newInstance:HRe,extend:a$,LIGHT_TYPES:PRe};const{vtkErrorMacro:Wg}=A;function jRe(t){return()=>Wg(`vtkViewport::${t} - NOT IMPLEMENTED`)}function YRe(t,e){e.classHierarchy.push("vtkViewport"),t.getViewProps=()=>e.props,t.hasViewProp=r=>e.props.includes(r),t.addViewProp=r=>{r&&!t.hasViewProp(r)&&e.props.push(r)},t.removeViewProp=r=>{const a=e.props.filter(s=>s!==r);e.props.length!==a.length&&(e.props=a)},t.removeAllViewProps=()=>{e.props=[]};function n(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];a.push(r);const s=r.getNestedProps();if(s&&s.length)for(let o=0;o<s.length;o++)n(s[o],a);return a}t.getViewPropsWithNestedProps=()=>{const r=[];for(let a=0;a<e.props.length;a++)n(e.props[a],r);return r},t.addActor2D=t.addViewProp,t.removeActor2D=r=>{t.removeViewProp(r)},t.getActors2D=()=>(e.actors2D=[],e.props.forEach(r=>{e.actors2D=e.actors2D.concat(r.getActors2D())}),e.actors2D),t.displayToView=()=>Wg("call displayToView on your view instead"),t.viewToDisplay=()=>Wg("callviewtodisplay on your view instead"),t.getSize=()=>Wg("call getSize on your View instead"),t.normalizedDisplayToProjection=(r,a,s)=>{const o=t.normalizedDisplayToNormalizedViewport(r,a,s);return t.normalizedViewportToProjection(o[0],o[1],o[2])},t.normalizedDisplayToNormalizedViewport=(r,a,s)=>{const o=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[(r-e.viewport[0])/o[0],(a-e.viewport[1])/o[1],s]},t.normalizedViewportToProjection=(r,a,s)=>[r*2-1,a*2-1,s*2-1],t.projectionToNormalizedDisplay=(r,a,s)=>{const o=t.projectionToNormalizedViewport(r,a,s);return t.normalizedViewportToNormalizedDisplay(o[0],o[1],o[2])},t.normalizedViewportToNormalizedDisplay=(r,a,s)=>{const o=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[r*o[0]+e.viewport[0],a*o[1]+e.viewport[1],s]},t.projectionToNormalizedViewport=(r,a,s)=>[(r+1)*.5,(a+1)*.5,(s+1)*.5],t.PickPropFrom=jRe("PickPropFrom")}const qRe={background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]};function s$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,qRe,n),A.obj(t,e),A.event(t,e,"event"),A.setGetArray(t,e,["viewport"],4),A.setGetArray(t,e,["background","background2"],3),YRe(t,e)}const XRe=A.newInstance(s$,"vtkViewport");var ZRe={newInstance:XRe,extend:s$};const{vtkDebugMacro:$u,vtkErrorMacro:Io,vtkWarningMacro:JRe}=nr;function hk(t){return()=>Io(`vtkRenderer::${t} - NOT IMPLEMENTED`)}function QRe(t,e){e.classHierarchy.push("vtkRenderer");const n={type:"ComputeVisiblePropBoundsEvent",renderer:t},r={type:"ResetCameraClippingRangeEvent",renderer:t},a={type:"ResetCameraEvent",renderer:t};t.updateCamera=()=>(e.activeCamera||($u("No cameras are on, creating one."),t.getActiveCameraAndResetIfCreated()),e.activeCamera.render(t),!0),t.updateLightsGeometryToFollowCamera=()=>{const s=t.getActiveCameraAndResetIfCreated();e.lights.forEach(o=>{o.lightTypeIsSceneLight()||(o.lightTypeIsHeadLight()?(o.setPositionFrom(s.getPositionByReference()),o.setFocalPointFrom(s.getFocalPointByReference()),o.modified(s.getMTime())):o.lightTypeIsCameraLight()?o.setTransformMatrix(s.getCameraLightTransformMatrix($1())):Io("light has unknown light type",o.get()))})},t.updateLightGeometry=()=>e.lightFollowCamera?t.updateLightsGeometryToFollowCamera():!0,t.allocateTime=hk("allocateTime"),t.updateGeometry=hk("updateGeometry"),t.getVTKWindow=()=>e._renderWindow,t.setLayer=s=>{$u(t.getClassName(),t,"setting Layer to ",s),e.layer!==s&&(e.layer=s,t.modified()),t.setPreserveColorBuffer(!!s)},t.setActiveCamera=s=>e.activeCamera===s?!1:(e.activeCamera=s,t.modified(),t.invokeEvent({type:"ActiveCameraEvent",camera:s}),!0),t.makeCamera=()=>{const s=IRe.newInstance();return t.invokeEvent({type:"CreateCameraEvent",camera:s}),s},t.getActiveCamera=()=>(e.activeCamera||(e.activeCamera=t.makeCamera()),e.activeCamera),t.getActiveCameraAndResetIfCreated=()=>(e.activeCamera||(t.getActiveCamera(),t.resetCamera()),e.activeCamera),t.getActors=()=>(e.actors=[],e.props.forEach(s=>{e.actors=e.actors.concat(s.getActors())}),e.actors),t.addActor=t.addViewProp,t.removeActor=s=>{e.actors=e.actors.filter(o=>o!==s),t.removeViewProp(s),t.modified()},t.removeAllActors=()=>{t.getActors().forEach(o=>{t.removeViewProp(o)}),e.actors=[],t.modified()},t.getVolumes=()=>(e.volumes=[],e.props.forEach(s=>{e.volumes=e.volumes.concat(s.getVolumes())}),e.volumes),t.addVolume=t.addViewProp,t.removeVolume=s=>{e.volumes=e.volumes.filter(o=>o!==s),t.removeViewProp(s),t.modified()},t.removeAllVolumes=()=>{t.getVolumes().forEach(o=>{t.removeViewProp(o)}),e.volumes=[],t.modified()},t.hasLight=s=>e.lights.includes(s),t.addLight=s=>{s&&!t.hasLight(s)&&(e.lights.push(s),t.modified())},t.removeLight=s=>{e.lights=e.lights.filter(o=>o!==s),t.modified()},t.removeAllLights=()=>{e.lights=[],t.modified()},t.setLightCollection=s=>{e.lights=s,t.modified()},t.makeLight=KRe.newInstance,t.createLight=()=>{e.automaticLightCreation&&(e._createdLight&&(t.removeLight(e._createdLight),e._createdLight.delete(),e._createdLight=null),e._createdLight=t.makeLight(),t.addLight(e._createdLight),e._createdLight.setLightTypeToHeadLight(),e._createdLight.setPosition(t.getActiveCamera().getPosition()),e._createdLight.setFocalPoint(t.getActiveCamera().getFocalPoint()))},t.normalizedDisplayToWorld=(s,o,i,l)=>{let c=t.normalizedDisplayToProjection(s,o,i);return c=t.projectionToView(c[0],c[1],c[2],l),t.viewToWorld(c[0],c[1],c[2])},t.worldToNormalizedDisplay=(s,o,i,l)=>{let c=t.worldToView(s,o,i);return c=t.viewToProjection(c[0],c[1],c[2],l),t.projectionToNormalizedDisplay(c[0],c[1],c[2])},t.viewToWorld=(s,o,i)=>{if(e.activeCamera===null)return Io("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const l=e.activeCamera.getViewMatrix();An(l,l),$t(l,l);const c=new Float64Array([s,o,i]);return It(c,c,l),c},t.projectionToView=(s,o,i,l)=>{if(e.activeCamera===null)return Io("ProjectionToView: no active camera, cannot compute projection to view, returning 0,0,0"),[0,0,0];const c=e.activeCamera.getProjectionMatrix(l,-1,1);An(c,c),$t(c,c);const u=new Float64Array([s,o,i]);return It(u,u,c),u},t.worldToView=(s,o,i)=>{if(e.activeCamera===null)return Io("WorldToView: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const l=e.activeCamera.getViewMatrix();$t(l,l);const c=new Float64Array([s,o,i]);return It(c,c,l),c},t.viewToProjection=(s,o,i,l)=>{if(e.activeCamera===null)return Io("ViewToProjection: no active camera, cannot compute view to projection, returning 0,0,0"),[0,0,0];const c=e.activeCamera.getProjectionMatrix(l,-1,1);$t(c,c);const u=new Float64Array([s,o,i]);return It(u,u,c),u},t.computeVisiblePropBounds=()=>{e.allBounds[0]=qt.INIT_BOUNDS[0],e.allBounds[1]=qt.INIT_BOUNDS[1],e.allBounds[2]=qt.INIT_BOUNDS[2],e.allBounds[3]=qt.INIT_BOUNDS[3],e.allBounds[4]=qt.INIT_BOUNDS[4],e.allBounds[5]=qt.INIT_BOUNDS[5];let s=!0;t.invokeEvent(n);for(let o=0;o<e.props.length;++o){const i=e.props[o];if(i.getVisibility()&&i.getUseBounds()){const l=i.getBounds();l&&Jp(l)&&(s=!1,l[0]<e.allBounds[0]&&(e.allBounds[0]=l[0]),l[1]>e.allBounds[1]&&(e.allBounds[1]=l[1]),l[2]<e.allBounds[2]&&(e.allBounds[2]=l[2]),l[3]>e.allBounds[3]&&(e.allBounds[3]=l[3]),l[4]<e.allBounds[4]&&(e.allBounds[4]=l[4]),l[5]>e.allBounds[5]&&(e.allBounds[5]=l[5]))}}return s&&(fu(e.allBounds),$u("Can't compute bounds, no 3D props are visible")),e.allBounds},t.resetCamera=function(){const o=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||t.computeVisiblePropBounds(),i=[0,0,0];if(!Jp(o))return $u("Cannot reset camera!"),!1;let l=null;if(t.getActiveCamera())l=e.activeCamera.getViewPlaneNormal();else return Io("Trying to reset non-existent camera"),!1;e.activeCamera.setViewAngle(30),i[0]=(o[0]+o[1])/2,i[1]=(o[2]+o[3])/2,i[2]=(o[4]+o[5])/2;let c=o[1]-o[0],u=o[3]-o[2],f=o[5]-o[4];c*=c,u*=u,f*=f;let d=c+u+f;d=d===0?1:d,d=Math.sqrt(d)*.5;const p=xn(e.activeCamera.getViewAngle()),h=d,g=d/Math.sin(p*.5),y=e.activeCamera.getViewUp();return Math.abs(kt(y,l))>.999&&(JRe("Resetting view-up since view plane normal is parallel"),e.activeCamera.setViewUp(-y[2],y[0],y[1])),e.activeCamera.setFocalPoint(i[0],i[1],i[2]),e.activeCamera.setPosition(i[0]+g*l[0],i[1]+g*l[1],i[2]+g*l[2]),t.resetCameraClippingRange(o),e.activeCamera.setParallelScale(h),e.activeCamera.setPhysicalScale(d),e.activeCamera.setPhysicalTranslation(-i[0],-i[1],-i[2]),t.invokeEvent(a),!0},t.resetCameraClippingRange=function(){const o=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||t.computeVisiblePropBounds();if(!Jp(o))return $u("Cannot reset camera clipping range!"),!1;if(t.getActiveCameraAndResetIfCreated(),!e.activeCamera)return Io("Trying to reset clipping range of non-existent camera"),!1;const i=e.activeCamera.computeClippingRange(o);let l=0;if(e.activeCamera.getParallelProjection())l=.2*e.activeCamera.getParallelScale();else{const c=xn(e.activeCamera.getViewAngle());l=.2*Math.tan(c/2)*i[1]}return i[1]-i[0]<l&&(l=l-i[1]+i[0],i[1]+=l/2,i[0]-=l/2),i[0]<0&&(i[0]=0),i[0]=.99*i[0]-(i[1]-i[0])*e.clippingRangeExpansion,i[1]=1.01*i[1]+(i[1]-i[0])*e.clippingRangeExpansion,i[0]=i[0]>=i[1]?.01*i[1]:i[0],e.nearClippingPlaneTolerance||(e.nearClippingPlaneTolerance=.01),i[0]<e.nearClippingPlaneTolerance*i[1]&&(i[0]=e.nearClippingPlaneTolerance*i[1]),e.activeCamera.setClippingRange(i[0],i[1]),t.invokeEvent(r),!1},t.setRenderWindow=s=>{s!==e._renderWindow&&(e._vtkWindow=s,e._renderWindow=s)},t.visibleActorCount=()=>e.props.filter(s=>s.getVisibility()).length,t.visibleVolumeCount=t.visibleActorCount,t.getMTime=()=>{let s=e.mtime;const o=e.activeCamera?e.activeCamera.getMTime():0;o>s&&(s=o);const i=e._createdLight?e._createdLight.getMTime():0;return i>s&&(s=i),s},t.getTransparent=()=>!!e.preserveColorBuffer,t.isActiveCameraCreated=()=>!!e.activeCamera}const e_e={pickedProp:null,activeCamera:null,allBounds:[],ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:0,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:ml(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,environmentTexture:null,environmentTextureDiffuseStrength:1,environmentTextureSpecularStrength:1,useEnvironmentTextureAsBackground:!1,pass:0};function o$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(Object.assign(e,e_e,n),ZRe.extend(t,e,n),e.background||(e.background=[0,0,0,1]);e.background.length<3;)e.background.push(0);e.background.length===3&&e.background.push(1),wr(t,e,["_renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),Dn(t,e,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","environmentTexture","environmentTextureDiffuseStrength","environmentTextureSpecularStrength","useEnvironmentTextureAsBackground","useShadows","pass"]),uu(t,e,["actors","volumes","lights"]),j1(t,e,["background"],4,1),nd(t,e,["renderWindow"]),QRe(t,e)}const t_e=Ft(o$,"vtkRenderer");var n_e={newInstance:t_e,extend:o$};const r_e="WebGL",Ph=Object.create(null);function zb(t,e){Ph[t]=e}function a_e(){return Object.keys(Ph)}function i$(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ph[t]&&Ph[t](e)}function s_e(t,e){e.classHierarchy.push("vtkRenderWindow"),t.addRenderer=n=>{t.hasRenderer(n)||(n.setRenderWindow(t),e.renderers.push(n),t.modified())},t.removeRenderer=n=>{e.renderers=e.renderers.filter(r=>r!==n),t.modified()},t.hasRenderer=n=>e.renderers.indexOf(n)!==-1,t.newAPISpecificView=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i$(n||e.defaultViewAPI,r)},t.addView=n=>{t.hasView(n)||(n.setRenderable(t),e._views.push(n),t.modified())},t.removeView=n=>{e._views=e._views.filter(r=>r!==n),t.modified()},t.hasView=n=>e._views.indexOf(n)!==-1,t.preRender=()=>{e.renderers.forEach(n=>{n.isActiveCameraCreated()||n.resetCamera()})},t.render=()=>{t.preRender(),e.interactor?e.interactor.render():e._views.forEach(n=>n.traverseAllPasses())},t.getStatistics=()=>{const n={propCount:0,invisiblePropCount:0,gpuMemoryMB:0};return e._views.forEach(r=>{r.getGraphicsMemoryInfo&&(n.gpuMemoryMB+=r.getGraphicsMemoryInfo()/1e6)}),e.renderers.forEach(r=>{const a=r.getViewProps(),s=e._views[0].getViewNodeFor(r);a.forEach(o=>{if(o.getVisibility()){n.propCount+=1;const i=o.getMapper&&o.getMapper();if(i&&i.getPrimitiveCount){const l=s.getViewNodeFor(i);if(l){l.getAllocatedGPUMemoryInBytes&&(n.gpuMemoryMB+=l.getAllocatedGPUMemoryInBytes()/1e6);const c=i.getPrimitiveCount();Object.keys(c).forEach(u=>{n[u]||(n[u]=0),n[u]+=c[u]})}}}else n.invisiblePropCount+=1})}),n.str=Object.keys(n).map(r=>`${r}: ${n[r]}`).join(`
`),n},t.captureImages=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return A.setImmediate(t.render),e._views.map(a=>a.captureNextImage?a.captureNextImage(n,r):void 0).filter(a=>!!a)}}const o_e={defaultViewAPI:r_e,renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1};function l$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,o_e,n),A.obj(t,e),A.setGet(t,e,["interactor","numberOfLayers","_views","defaultViewAPI"]),A.get(t,e,["neverRendered"]),A.getArray(t,e,["renderers"]),A.moveToProtected(t,e,["views"]),A.event(t,e,"completion"),s_e(t,e)}const i_e=A.newInstance(l$,"vtkRenderWindow");var l_e={newInstance:i_e,extend:l$,registerViewConstructor:zb,listViewAPIs:a_e,newAPISpecificView:i$};const{States:ps}=Pb;function c_e(t,e){e.classHierarchy.push("vtkInteractorStyleTrackballCamera"),t.handleMouseMove=n=>{const r=n.position,a=n.pokedRenderer;switch(e.state){case ps.IS_ROTATE:t.handleMouseRotate(a,r),t.invokeInteractionEvent({type:"InteractionEvent"});break;case ps.IS_PAN:t.handleMousePan(a,r),t.invokeInteractionEvent({type:"InteractionEvent"});break;case ps.IS_DOLLY:t.handleMouseDolly(a,r),t.invokeInteractionEvent({type:"InteractionEvent"});break;case ps.IS_SPIN:t.handleMouseSpin(a,r),t.invokeInteractionEvent({type:"InteractionEvent"});break}e.previousPosition=r},t.handleButton3D=n=>{if(n&&n.pressed&&n.device===_1.RightController&&(n.input===qu.Trigger||n.input===qu.TrackPad)){t.startCameraPose();return}n&&!n.pressed&&n.device===_1.RightController&&(n.input===qu.Trigger||n.input===qu.TrackPad)&&e.state===ps.IS_CAMERA_POSE&&t.endCameraPose()},t.handleMove3D=n=>{switch(e.state){case ps.IS_CAMERA_POSE:t.updateCameraPose(n);break}},t.updateCameraPose=n=>{const r=n.pokedRenderer.getActiveCamera(),a=r.getPhysicalTranslation(),o=.5*.05*r.getPhysicalScale(),i=r.physicalOrientationToWorldDirection([n.orientation.x,n.orientation.y,n.orientation.z,n.orientation.w]);r.setPhysicalTranslation(a[0]+i[0]*o,a[1]+i[1]*o,a[2]+i[2]*o)},t.handleLeftButtonPress=n=>{const r=n.position;e.previousPosition=r,n.shiftKey?n.controlKey||n.altKey?t.startDolly():t.startPan():n.controlKey||n.altKey?t.startSpin():t.startRotate()},t.handleLeftButtonRelease=()=>{switch(e.state){case ps.IS_DOLLY:t.endDolly();break;case ps.IS_PAN:t.endPan();break;case ps.IS_SPIN:t.endSpin();break;case ps.IS_ROTATE:t.endRotate();break}},t.handleStartMouseWheel=()=>{t.startDolly()},t.handleEndMouseWheel=()=>{t.endDolly()},t.handleStartPinch=n=>{e.previousScale=n.scale,t.startDolly()},t.handleEndPinch=()=>{t.endDolly()},t.handleStartRotate=n=>{e.previousRotation=n.rotation,t.startRotate()},t.handleEndRotate=()=>{t.endRotate()},t.handleStartPan=n=>{e.previousTranslation=n.translation,t.startPan()},t.handleEndPan=()=>{t.endPan()},t.handlePinch=n=>{t.dollyByFactor(n.pokedRenderer,n.scale/e.previousScale),e.previousScale=n.scale},t.handlePan=n=>{const r=n.pokedRenderer.getActiveCamera();let a=r.getFocalPoint();a=t.computeWorldToDisplay(n.pokedRenderer,a[0],a[1],a[2]);const s=a[2],o=n.translation,i=e.previousTranslation,l=t.computeDisplayToWorld(n.pokedRenderer,a[0]+o[0]-i[0],a[1]+o[1]-i[1],s),c=t.computeDisplayToWorld(n.pokedRenderer,a[0],a[1],s),u=[];u[0]=c[0]-l[0],u[1]=c[1]-l[1],u[2]=c[2]-l[2],a=r.getFocalPoint();const f=r.getPosition();r.setFocalPoint(u[0]+a[0],u[1]+a[1],u[2]+a[2]),r.setPosition(u[0]+f[0],u[1]+f[1],u[2]+f[2]),e._interactor.getLightFollowCamera()&&n.pokedRenderer.updateLightsGeometryToFollowCamera(),r.orthogonalizeViewUp(),e.previousTranslation=n.translation},t.handleRotate=n=>{const r=n.pokedRenderer.getActiveCamera();r.roll(n.rotation-e.previousRotation),r.orthogonalizeViewUp(),e.previousRotation=n.rotation},t.handleMouseRotate=(n,r)=>{if(!e.previousPosition)return;const a=e._interactor,s=r.x-e.previousPosition.x,o=r.y-e.previousPosition.y,i=a.getView().getViewportSize(n);let l=-.1,c=-.1;i[0]&&i[1]&&(l=-20/i[1],c=-20/i[0]);const u=s*c*e.motionFactor,f=o*l*e.motionFactor,d=n.getActiveCamera();!Number.isNaN(u)&&!Number.isNaN(f)&&(d.azimuth(u),d.elevation(f),d.orthogonalizeViewUp()),e.autoAdjustCameraClippingRange&&n.resetCameraClippingRange(),a.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()},t.handleMouseSpin=(n,r)=>{if(!e.previousPosition)return;const a=e._interactor,s=n.getActiveCamera(),o=a.getView().getViewportCenter(n),i=Bc(Math.atan2(e.previousPosition.y-o[1],e.previousPosition.x-o[0])),l=Bc(Math.atan2(r.y-o[1],r.x-o[0]))-i;Number.isNaN(l)||(s.roll(l),s.orthogonalizeViewUp())},t.handleMousePan=(n,r)=>{if(!e.previousPosition)return;const a=n.getActiveCamera();let s=a.getFocalPoint();s=t.computeWorldToDisplay(n,s[0],s[1],s[2]);const o=s[2],i=t.computeDisplayToWorld(n,r.x,r.y,o),l=t.computeDisplayToWorld(n,e.previousPosition.x,e.previousPosition.y,o),c=[];c[0]=l[0]-i[0],c[1]=l[1]-i[1],c[2]=l[2]-i[2],s=a.getFocalPoint();const u=a.getPosition();a.setFocalPoint(c[0]+s[0],c[1]+s[1],c[2]+s[2]),a.setPosition(c[0]+u[0],c[1]+u[1],c[2]+u[2]),e._interactor.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()},t.handleMouseDolly=(n,r)=>{if(!e.previousPosition)return;const a=r.y-e.previousPosition.y,o=e._interactor.getView().getViewportCenter(n),i=e.motionFactor*a/o[1];t.dollyByFactor(n,1.1**i)},t.handleMouseWheel=n=>{const r=1-n.spinY/e.zoomFactor;t.dollyByFactor(n.pokedRenderer,r)},t.dollyByFactor=(n,r)=>{if(Number.isNaN(r))return;const a=n.getActiveCamera();a.getParallelProjection()?a.setParallelScale(a.getParallelScale()/r):(a.dolly(r),e.autoAdjustCameraClippingRange&&n.resetCameraClippingRange()),e._interactor.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()}}const u_e={motionFactor:10,zoomFactor:10};function c$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,u_e,n),Gb.extend(t,e,n),A.setGet(t,e,["motionFactor","zoomFactor"]),c_e(t,e)}const f_e=A.newInstance(c$,"vtkInteractorStyleTrackballCamera");var d_e={newInstance:f_e,extend:c$};function p_e(t){return t}function Hb(t){if(t===null||t==="null")return null;if(t==="true")return!0;if(t==="false")return!1;if(!(t===void 0||t==="undefined"))return t[0]==="["&&t[t.length-1]==="]"?t.substring(1,t.length-1).split(",").map(e=>Hb(e.trim())):t===""||Number.isNaN(Number(t))?t:Number(t)}function g_e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window.location.search;const n={},r=t?Hb:p_e;return(e||"").replace(/#.*/,"").replace("?","").split("&").forEach(s=>{const[o,i]=s.split("=").map(l=>decodeURIComponent(l));o&&(n[o]=i?r(i):!0)}),n}var h_e={toNativeType:Hb,extractURLParameters:g_e};function v_e(t,e){e.classHierarchy.push("vtkRenderPass"),t.getOperation=()=>e.currentOperation,t.setCurrentOperation=n=>{e.currentOperation=n,e.currentTraverseOperation=`traverse${A.capitalize(e.currentOperation)}`},t.getTraverseOperation=()=>e.currentTraverseOperation,t.traverse=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;e.deleted||(e._currentParent=r,e.preDelegateOperations.forEach(a=>{t.setCurrentOperation(a),n.traverse(t)}),e.delegates.forEach(a=>{a.traverse(n,t)}),e.postDelegateOperations.forEach(a=>{t.setCurrentOperation(a),n.traverse(t)}))}}const y_e={delegates:[],currentOperation:null,preDelegateOperations:[],postDelegateOperations:[],currentParent:null};function u$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,y_e,n),A.obj(t,e),A.get(t,e,["currentOperation"]),A.setGet(t,e,["delegates","_currentParent","preDelegateOperations","postDelegateOperations"]),A.moveToProtected(t,e,["currentParent"]),v_e(t,e)}const m_e=A.newInstance(u$,"vtkRenderPass");var xo={newInstance:m_e,extend:u$};const{Representation:C_e}=vo,{vtkErrorMacro:vk}=A;function S_e(t){const e=ue.substitute(t.Fragment,"//VTK::RenderPassFragmentShader::Impl",`
      float weight = gl_FragData[0].a * pow(max(1.1 - gl_FragCoord.z, 0.0), 2.0);
      gl_FragData[0] = vec4(gl_FragData[0].rgb*weight, gl_FragData[0].a);
      gl_FragData[1].r = weight;
    `,!1);t.Fragment=e.result}const b_e=`//VTK::System::Dec

in vec2 tcoord;

uniform sampler2D translucentRTexture;
uniform sampler2D translucentRGBATexture;

// the output of this shader
//VTK::Output::Dec

void main()
{
  vec4 t1Color = texture(translucentRGBATexture, tcoord);
  float t2Color = texture(translucentRTexture, tcoord).r;
  gl_FragData[0] = vec4(t1Color.rgb/max(t2Color,0.01), 1.0 - t1Color.a);
}
`;function w_e(t,e){e.classHierarchy.push("vtkOpenGLOrderIndependentTranslucentPass"),t.createVertexBuffer=()=>{const n=new Float32Array([-1,-1,-1,1,-1,-1,-1,1,-1,1,1,-1]),r=new Float32Array([0,0,1,0,0,1,1,1]),a=new Uint16Array([4,0,1,3,2]),s=Tt.newInstance({numberOfComponents:3,values:n});s.setName("points");const o=Tt.newInstance({numberOfComponents:2,values:r});o.setName("tcoords");const i=Tt.newInstance({numberOfComponents:1,values:a});e.tris.getCABO().createVBO(i,"polys",C_e.SURFACE,{points:s,tcoords:o,cellOffset:0}),e.VBOBuildTime.modified()},t.createFramebuffer=n=>{const r=n.getSize(),a=n.getContext();e.framebuffer=Cl.newInstance(),e.framebuffer.setOpenGLRenderWindow(n),e.framebuffer.create(...r),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind(),e.translucentRGBATexture=Gt.newInstance(),e.translucentRGBATexture.setInternalFormat(a.RGBA16F),e.translucentRGBATexture.setFormat(a.RGBA),e.translucentRGBATexture.setOpenGLDataType(a.HALF_FLOAT),e.translucentRGBATexture.setOpenGLRenderWindow(n),e.translucentRGBATexture.create2DFromRaw(r[0],r[1],4,"Float32Array",null),e.translucentRTexture=Gt.newInstance(),e.translucentRTexture.setInternalFormat(a.R16F),e.translucentRTexture.setFormat(a.RED),e.translucentRTexture.setOpenGLDataType(a.HALF_FLOAT),e.translucentRTexture.setOpenGLRenderWindow(n),e.translucentRTexture.create2DFromRaw(r[0],r[1],1,"Float32Array",null),e.translucentZTexture=Gt.newInstance(),e.translucentZTexture.setOpenGLRenderWindow(n),e.translucentZTexture.createDepthFromRaw(r[0],r[1],"Float32Array",null),e.framebuffer.setColorBuffer(e.translucentRGBATexture,0),e.framebuffer.setColorBuffer(e.translucentRTexture,1),e.framebuffer.setDepthBuffer(e.translucentZTexture)},t.createCopyShader=n=>{e.copyShader=n.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","attribute vec2 tcoordTC;","varying vec2 tcoord;","void main() { tcoord = tcoordTC; gl_Position = vertexDC; }"].join(`
`),b_e,"")},t.createVBO=n=>{const r=n.getContext();e.tris.setOpenGLRenderWindow(n),t.createVertexBuffer();const a=e.copyShader;e.tris.getCABO().bind(),e.copyVAO.addAttributeArray(a,e.tris.getCABO(),"vertexDC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),r.FLOAT,3,r.FALSE)||vk("Error setting vertexDC in copy shader VAO."),e.copyVAO.addAttributeArray(a,e.tris.getCABO(),"tcoordTC",e.tris.getCABO().getTCoordOffset(),e.tris.getCABO().getStride(),r.FLOAT,2,r.FALSE)||vk("Error setting vertexDC in copy shader VAO.")},t.traverse=(n,r,a)=>{if(e.deleted)return;const s=n.getSize(),o=n.getContext();if(e._supported=!1,r.getSelector()||!o||!n.getWebgl2()||!o.getExtension("EXT_color_buffer_half_float")&&!o.getExtension("EXT_color_buffer_float")){t.setCurrentOperation("translucentPass"),r.traverse(t);return}if(e._supported=!0,e.framebuffer===null)t.createFramebuffer(n);else{const i=e.framebuffer.getSize();i===null||i[0]!==s[0]||i[1]!==s[1]?(e.framebuffer.releaseGraphicsResources(),e.translucentRGBATexture.releaseGraphicsResources(n),e.translucentRTexture.releaseGraphicsResources(n),e.translucentZTexture.releaseGraphicsResources(n),t.createFramebuffer(n)):(e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind())}o.drawBuffers([o.COLOR_ATTACHMENT0]),o.clearBufferfv(o.COLOR,0,[0,0,0,0]),o.clearBufferfv(o.DEPTH,0,[1]),o.colorMask(!1,!1,!1,!1),a.getOpaqueActorCount()>0&&(a.setCurrentOperation("opaqueZBufferPass"),r.traverse(a)),o.colorMask(!0,!0,!0,!0),o.drawBuffers([o.COLOR_ATTACHMENT0,o.COLOR_ATTACHMENT1]),o.viewport(0,0,s[0],s[1]),o.scissor(0,0,s[0],s[1]),o.clearBufferfv(o.COLOR,0,[0,0,0,1]),o.clearBufferfv(o.COLOR,1,[0,0,0,0]),o.enable(o.DEPTH_TEST),o.enable(o.BLEND),o.blendFuncSeparate(o.ONE,o.ONE,o.ZERO,o.ONE_MINUS_SRC_ALPHA),t.setCurrentOperation("translucentPass"),r.traverse(t),o.drawBuffers([o.NONE]),e.framebuffer.restorePreviousBindingsAndBuffers(),e.copyShader===null?t.createCopyShader(n):n.getShaderCache().readyShaderProgram(e.copyShader),e.copyVAO||(e.copyVAO=id.newInstance(),e.copyVAO.setOpenGLRenderWindow(n)),e.copyVAO.bind(),e.VBOBuildTime.getMTime()<t.getMTime()&&t.createVBO(n),o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.depthMask(!1),o.depthFunc(o.ALWAYS),o.viewport(0,0,s[0],s[1]),o.scissor(0,0,s[0],s[1]),e.translucentRGBATexture.activate(),e.copyShader.setUniformi("translucentRGBATexture",e.translucentRGBATexture.getTextureUnit()),e.translucentRTexture.activate(),e.copyShader.setUniformi("translucentRTexture",e.translucentRTexture.getTextureUnit()),o.drawArrays(o.TRIANGLES,0,e.tris.getCABO().getElementCount()),o.depthMask(!0),o.depthFunc(o.LEQUAL),e.translucentRGBATexture.deactivate(),e.translucentRTexture.deactivate()},t.getShaderReplacement=()=>e._supported?S_e:null,t.releaseGraphicsResources=n=>{e.framebuffer&&(e.framebuffer.releaseGraphicsResources(n),e.framebuffer=null),e.translucentRGBATexture&&(e.translucentRGBATexture.releaseGraphicsResources(n),e.translucentRGBATexture=null),e.translucentRTexture&&(e.translucentRTexture.releaseGraphicsResources(n),e.translucentRTexture=null),e.translucentZTexture&&(e.translucentZTexture.releaseGraphicsResources(n),e.translucentZTexture=null),e.copyVAO&&(e.copyVAO.releaseGraphicsResources(n),e.copyVAO=null),e.copyShader&&(e.copyShader.releaseGraphicsResources(n),e.copyShader=null),e.tris&&(e.tris.releaseGraphicsResources(n),e.tris=null),t.modified()}}const T_e={framebuffer:null,copyShader:null,tris:null};function f$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,T_e,n),xo.extend(t,e,n),e.VBOBuildTime={},A.obj(e.VBOBuildTime,{mtime:0}),e.tris=Ba.newInstance(),A.get(t,e,["framebuffer"]),w_e(t,e)}const x_e=A.newInstance(f$,"vtkOpenGLOrderIndependentTranslucentPass");var E_e={newInstance:x_e,extend:f$};function k_e(t,e){e.classHierarchy.push("vtkForwardPass"),t.traverse=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(e.deleted)return;e._currentParent=r,t.setCurrentOperation("buildPass"),n.traverse(t);const a=n.getRenderable().getNumberOfLayers(),s=n.getChildren();for(let o=0;o<a;o++)for(let i=0;i<s.length;i++){const l=s[i],c=n.getRenderable().getRenderers()[i];if(c.getDraw()&&c.getLayer()===o){if(e.opaqueActorCount=0,e.translucentActorCount=0,e.volumeCount=0,e.overlayActorCount=0,t.setCurrentOperation("queryPass"),l.traverse(t),(e.opaqueActorCount>0||e.translucentActorCount>0)&&e.volumeCount>0||e.depthRequested){const u=n.getFramebufferSize();e.framebuffer===null&&(e.framebuffer=Cl.newInstance()),e.framebuffer.setOpenGLRenderWindow(n),e.framebuffer.saveCurrentBindingsAndBuffers();const f=e.framebuffer.getSize();(f===null||f[0]!==u[0]||f[1]!==u[1])&&(e.framebuffer.create(u[0],u[1]),e.framebuffer.populateFramebuffer()),e.framebuffer.bind(),t.setCurrentOperation("zBufferPass"),l.traverse(t),e.framebuffer.restorePreviousBindingsAndBuffers(),e.depthRequested=!1}t.setCurrentOperation("cameraPass"),l.traverse(t),e.opaqueActorCount>0&&(t.setCurrentOperation("opaquePass"),l.traverse(t)),e.translucentActorCount>0&&(e.translucentPass||(e.translucentPass=E_e.newInstance()),e.translucentPass.traverse(n,l,t)),e.volumeCount>0&&(t.setCurrentOperation("volumePass"),l.traverse(t)),e.overlayActorCount>0&&(t.setCurrentOperation("overlayPass"),l.traverse(t))}}},t.getZBufferTexture=()=>e.framebuffer?e.framebuffer.getColorTexture():null,t.requestDepth=()=>{e.depthRequested=!0},t.incrementOpaqueActorCount=()=>e.opaqueActorCount++,t.incrementTranslucentActorCount=()=>e.translucentActorCount++,t.incrementVolumeCount=()=>e.volumeCount++,t.incrementOverlayActorCount=()=>e.overlayActorCount++}const O_e={opaqueActorCount:0,translucentActorCount:0,volumeCount:0,overlayActorCount:0,framebuffer:null,depthRequested:!1};function d$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,O_e,n),xo.extend(t,e,n),A.get(t,e,["framebuffer","opaqueActorCount","translucentActorCount","volumeCount"]),k_e(t,e)}const M_e=A.newInstance(d$,"vtkForwardPass");var R_e={newInstance:M_e,extend:d$},p$={exports:{}};(function(t,e){(function(n){t.exports=n()})(function(n){var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function a(m,b){var C=m[0],S=m[1],T=m[2],w=m[3];C+=(S&T|~S&w)+b[0]-680876936|0,C=(C<<7|C>>>25)+S|0,w+=(C&S|~C&T)+b[1]-389564586|0,w=(w<<12|w>>>20)+C|0,T+=(w&C|~w&S)+b[2]+606105819|0,T=(T<<17|T>>>15)+w|0,S+=(T&w|~T&C)+b[3]-1044525330|0,S=(S<<22|S>>>10)+T|0,C+=(S&T|~S&w)+b[4]-176418897|0,C=(C<<7|C>>>25)+S|0,w+=(C&S|~C&T)+b[5]+1200080426|0,w=(w<<12|w>>>20)+C|0,T+=(w&C|~w&S)+b[6]-1473231341|0,T=(T<<17|T>>>15)+w|0,S+=(T&w|~T&C)+b[7]-45705983|0,S=(S<<22|S>>>10)+T|0,C+=(S&T|~S&w)+b[8]+1770035416|0,C=(C<<7|C>>>25)+S|0,w+=(C&S|~C&T)+b[9]-1958414417|0,w=(w<<12|w>>>20)+C|0,T+=(w&C|~w&S)+b[10]-42063|0,T=(T<<17|T>>>15)+w|0,S+=(T&w|~T&C)+b[11]-1990404162|0,S=(S<<22|S>>>10)+T|0,C+=(S&T|~S&w)+b[12]+1804603682|0,C=(C<<7|C>>>25)+S|0,w+=(C&S|~C&T)+b[13]-40341101|0,w=(w<<12|w>>>20)+C|0,T+=(w&C|~w&S)+b[14]-1502002290|0,T=(T<<17|T>>>15)+w|0,S+=(T&w|~T&C)+b[15]+1236535329|0,S=(S<<22|S>>>10)+T|0,C+=(S&w|T&~w)+b[1]-165796510|0,C=(C<<5|C>>>27)+S|0,w+=(C&T|S&~T)+b[6]-1069501632|0,w=(w<<9|w>>>23)+C|0,T+=(w&S|C&~S)+b[11]+643717713|0,T=(T<<14|T>>>18)+w|0,S+=(T&C|w&~C)+b[0]-373897302|0,S=(S<<20|S>>>12)+T|0,C+=(S&w|T&~w)+b[5]-701558691|0,C=(C<<5|C>>>27)+S|0,w+=(C&T|S&~T)+b[10]+38016083|0,w=(w<<9|w>>>23)+C|0,T+=(w&S|C&~S)+b[15]-660478335|0,T=(T<<14|T>>>18)+w|0,S+=(T&C|w&~C)+b[4]-405537848|0,S=(S<<20|S>>>12)+T|0,C+=(S&w|T&~w)+b[9]+568446438|0,C=(C<<5|C>>>27)+S|0,w+=(C&T|S&~T)+b[14]-1019803690|0,w=(w<<9|w>>>23)+C|0,T+=(w&S|C&~S)+b[3]-187363961|0,T=(T<<14|T>>>18)+w|0,S+=(T&C|w&~C)+b[8]+1163531501|0,S=(S<<20|S>>>12)+T|0,C+=(S&w|T&~w)+b[13]-1444681467|0,C=(C<<5|C>>>27)+S|0,w+=(C&T|S&~T)+b[2]-51403784|0,w=(w<<9|w>>>23)+C|0,T+=(w&S|C&~S)+b[7]+1735328473|0,T=(T<<14|T>>>18)+w|0,S+=(T&C|w&~C)+b[12]-1926607734|0,S=(S<<20|S>>>12)+T|0,C+=(S^T^w)+b[5]-378558|0,C=(C<<4|C>>>28)+S|0,w+=(C^S^T)+b[8]-2022574463|0,w=(w<<11|w>>>21)+C|0,T+=(w^C^S)+b[11]+1839030562|0,T=(T<<16|T>>>16)+w|0,S+=(T^w^C)+b[14]-35309556|0,S=(S<<23|S>>>9)+T|0,C+=(S^T^w)+b[1]-1530992060|0,C=(C<<4|C>>>28)+S|0,w+=(C^S^T)+b[4]+1272893353|0,w=(w<<11|w>>>21)+C|0,T+=(w^C^S)+b[7]-155497632|0,T=(T<<16|T>>>16)+w|0,S+=(T^w^C)+b[10]-1094730640|0,S=(S<<23|S>>>9)+T|0,C+=(S^T^w)+b[13]+681279174|0,C=(C<<4|C>>>28)+S|0,w+=(C^S^T)+b[0]-358537222|0,w=(w<<11|w>>>21)+C|0,T+=(w^C^S)+b[3]-722521979|0,T=(T<<16|T>>>16)+w|0,S+=(T^w^C)+b[6]+76029189|0,S=(S<<23|S>>>9)+T|0,C+=(S^T^w)+b[9]-640364487|0,C=(C<<4|C>>>28)+S|0,w+=(C^S^T)+b[12]-421815835|0,w=(w<<11|w>>>21)+C|0,T+=(w^C^S)+b[15]+530742520|0,T=(T<<16|T>>>16)+w|0,S+=(T^w^C)+b[2]-995338651|0,S=(S<<23|S>>>9)+T|0,C+=(T^(S|~w))+b[0]-198630844|0,C=(C<<6|C>>>26)+S|0,w+=(S^(C|~T))+b[7]+1126891415|0,w=(w<<10|w>>>22)+C|0,T+=(C^(w|~S))+b[14]-1416354905|0,T=(T<<15|T>>>17)+w|0,S+=(w^(T|~C))+b[5]-57434055|0,S=(S<<21|S>>>11)+T|0,C+=(T^(S|~w))+b[12]+1700485571|0,C=(C<<6|C>>>26)+S|0,w+=(S^(C|~T))+b[3]-1894986606|0,w=(w<<10|w>>>22)+C|0,T+=(C^(w|~S))+b[10]-1051523|0,T=(T<<15|T>>>17)+w|0,S+=(w^(T|~C))+b[1]-2054922799|0,S=(S<<21|S>>>11)+T|0,C+=(T^(S|~w))+b[8]+1873313359|0,C=(C<<6|C>>>26)+S|0,w+=(S^(C|~T))+b[15]-30611744|0,w=(w<<10|w>>>22)+C|0,T+=(C^(w|~S))+b[6]-1560198380|0,T=(T<<15|T>>>17)+w|0,S+=(w^(T|~C))+b[13]+1309151649|0,S=(S<<21|S>>>11)+T|0,C+=(T^(S|~w))+b[4]-145523070|0,C=(C<<6|C>>>26)+S|0,w+=(S^(C|~T))+b[11]-1120210379|0,w=(w<<10|w>>>22)+C|0,T+=(C^(w|~S))+b[2]+718787259|0,T=(T<<15|T>>>17)+w|0,S+=(w^(T|~C))+b[9]-343485551|0,S=(S<<21|S>>>11)+T|0,m[0]=C+m[0]|0,m[1]=S+m[1]|0,m[2]=T+m[2]|0,m[3]=w+m[3]|0}function s(m){var b=[],C;for(C=0;C<64;C+=4)b[C>>2]=m.charCodeAt(C)+(m.charCodeAt(C+1)<<8)+(m.charCodeAt(C+2)<<16)+(m.charCodeAt(C+3)<<24);return b}function o(m){var b=[],C;for(C=0;C<64;C+=4)b[C>>2]=m[C]+(m[C+1]<<8)+(m[C+2]<<16)+(m[C+3]<<24);return b}function i(m){var b=m.length,C=[1732584193,-271733879,-1732584194,271733878],S,T,w,x,E,O;for(S=64;S<=b;S+=64)a(C,s(m.substring(S-64,S)));for(m=m.substring(S-64),T=m.length,w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S=0;S<T;S+=1)w[S>>2]|=m.charCodeAt(S)<<(S%4<<3);if(w[S>>2]|=128<<(S%4<<3),S>55)for(a(C,w),S=0;S<16;S+=1)w[S]=0;return x=b*8,x=x.toString(16).match(/(.*?)(.{0,8})$/),E=parseInt(x[2],16),O=parseInt(x[1],16)||0,w[14]=E,w[15]=O,a(C,w),C}function l(m){var b=m.length,C=[1732584193,-271733879,-1732584194,271733878],S,T,w,x,E,O;for(S=64;S<=b;S+=64)a(C,o(m.subarray(S-64,S)));for(m=S-64<b?m.subarray(S-64):new Uint8Array(0),T=m.length,w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S=0;S<T;S+=1)w[S>>2]|=m[S]<<(S%4<<3);if(w[S>>2]|=128<<(S%4<<3),S>55)for(a(C,w),S=0;S<16;S+=1)w[S]=0;return x=b*8,x=x.toString(16).match(/(.*?)(.{0,8})$/),E=parseInt(x[2],16),O=parseInt(x[1],16)||0,w[14]=E,w[15]=O,a(C,w),C}function c(m){var b="",C;for(C=0;C<4;C+=1)b+=r[m>>C*8+4&15]+r[m>>C*8&15];return b}function u(m){var b;for(b=0;b<m.length;b+=1)m[b]=c(m[b]);return m.join("")}u(i("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function m(b,C){return b=b|0||0,b<0?Math.max(b+C,0):Math.min(b,C)}ArrayBuffer.prototype.slice=function(b,C){var S=this.byteLength,T=m(b,S),w=S,x,E,O,k;return C!==n&&(w=m(C,S)),T>w?new ArrayBuffer(0):(x=w-T,E=new ArrayBuffer(x),O=new Uint8Array(E),k=new Uint8Array(this,T,x),O.set(k),E)}}();function f(m){return/[\u0080-\uFFFF]/.test(m)&&(m=unescape(encodeURIComponent(m))),m}function d(m,b){var C=m.length,S=new ArrayBuffer(C),T=new Uint8Array(S),w;for(w=0;w<C;w+=1)T[w]=m.charCodeAt(w);return b?T:S}function p(m){return String.fromCharCode.apply(null,new Uint8Array(m))}function h(m,b,C){var S=new Uint8Array(m.byteLength+b.byteLength);return S.set(new Uint8Array(m)),S.set(new Uint8Array(b),m.byteLength),C?S:S.buffer}function g(m){var b=[],C=m.length,S;for(S=0;S<C-1;S+=2)b.push(parseInt(m.substr(S,2),16));return String.fromCharCode.apply(String,b)}function y(){this.reset()}return y.prototype.append=function(m){return this.appendBinary(f(m)),this},y.prototype.appendBinary=function(m){this._buff+=m,this._length+=m.length;var b=this._buff.length,C;for(C=64;C<=b;C+=64)a(this._hash,s(this._buff.substring(C-64,C)));return this._buff=this._buff.substring(C-64),this},y.prototype.end=function(m){var b=this._buff,C=b.length,S,T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w;for(S=0;S<C;S+=1)T[S>>2]|=b.charCodeAt(S)<<(S%4<<3);return this._finish(T,C),w=u(this._hash),m&&(w=g(w)),this.reset(),w},y.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},y.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},y.prototype.setState=function(m){return this._buff=m.buff,this._length=m.length,this._hash=m.hash,this},y.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},y.prototype._finish=function(m,b){var C=b,S,T,w;if(m[C>>2]|=128<<(C%4<<3),C>55)for(a(this._hash,m),C=0;C<16;C+=1)m[C]=0;S=this._length*8,S=S.toString(16).match(/(.*?)(.{0,8})$/),T=parseInt(S[2],16),w=parseInt(S[1],16)||0,m[14]=T,m[15]=w,a(this._hash,m)},y.hash=function(m,b){return y.hashBinary(f(m),b)},y.hashBinary=function(m,b){var C=i(m),S=u(C);return b?g(S):S},y.ArrayBuffer=function(){this.reset()},y.ArrayBuffer.prototype.append=function(m){var b=h(this._buff.buffer,m,!0),C=b.length,S;for(this._length+=m.byteLength,S=64;S<=C;S+=64)a(this._hash,o(b.subarray(S-64,S)));return this._buff=S-64<C?new Uint8Array(b.buffer.slice(S-64)):new Uint8Array(0),this},y.ArrayBuffer.prototype.end=function(m){var b=this._buff,C=b.length,S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T,w;for(T=0;T<C;T+=1)S[T>>2]|=b[T]<<(T%4<<3);return this._finish(S,C),w=u(this._hash),m&&(w=g(w)),this.reset(),w},y.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},y.ArrayBuffer.prototype.getState=function(){var m=y.prototype.getState.call(this);return m.buff=p(m.buff),m},y.ArrayBuffer.prototype.setState=function(m){return m.buff=d(m.buff,!0),y.prototype.setState.call(this,m)},y.ArrayBuffer.prototype.destroy=y.prototype.destroy,y.ArrayBuffer.prototype._finish=y.prototype._finish,y.ArrayBuffer.hash=function(m,b){var C=l(new Uint8Array(m)),S=u(C);return b?g(S):S},y})})(p$);var __e=p$.exports;const V_e=fa(__e),D_e=["lastShaderProgramBound","context","_openGLRenderWindow"];function L_e(t,e){e.classHierarchy.push("vtkShaderCache"),t.replaceShaderValues=(n,r,a)=>{let s=r;a.length>0&&(s=ue.substitute(s,"VSOut","GSOut").result);const o=e._openGLRenderWindow.getWebgl2();let i=`
`,l=`#version 100
`;o?l=`#version 300 es
#define attribute in
#define textureCube texture
#define texture2D texture
#define textureCubeLod textureLod
#define texture2DLod textureLod
`:(e.context.getExtension("OES_standard_derivatives"),e.context.getExtension("EXT_frag_depth")&&(i=`#extension GL_EXT_frag_depth : enable
`),e.context.getExtension("EXT_shader_texture_lod")&&(i+=`#extension GL_EXT_shader_texture_lod : enable
#define textureCubeLod textureCubeLodEXT
#define texture2DLod texture2DLodEXT`)),s=ue.substitute(s,"//VTK::System::Dec",[`${l}
`,o?"":`#extension GL_OES_standard_derivatives : enable
`,i,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;let c=ue.substitute(n,"//VTK::System::Dec",[`${l}
`,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;if(o){c=ue.substitute(c,"varying","out").result,s=ue.substitute(s,"varying","in").result;let f="",d=0;for(;s.includes(`gl_FragData[${d}]`);)s=ue.substitute(s,`gl_FragData\\[${d}\\]`,`fragOutput${d}`).result,f+=`layout(location = ${d}) out vec4 fragOutput${d};
`,d++;s=ue.substitute(s,"//VTK::Output::Dec",f).result}const u=ue.substitute(a,"//VTK::System::Dec",l).result;return{VSSource:c,FSSource:s,GSSource:u}},t.readyShaderProgramArray=(n,r,a)=>{const s=t.replaceShaderValues(n,r,a),o=t.getShaderProgram(s.VSSource,s.FSSource,s.GSSource);return t.readyShaderProgram(o)},t.readyShaderProgram=n=>!n||!n.getCompiled()&&!n.compileShader()||!t.bindShaderProgram(n)?null:n,t.getShaderProgram=(n,r,a)=>{const s=`${n}${r}${a}`,o=V_e.hash(s);if(!(o in e.shaderPrograms)){const i=ue.newInstance();return i.setContext(e.context),i.getVertexShader().setSource(n),i.getFragmentShader().setSource(r),a&&i.getGeometryShader().setSource(a),i.setMd5Hash(o),e.shaderPrograms[o]=i,i}return e.shaderPrograms[o]},t.releaseGraphicsResources=n=>{t.releaseCurrentShaderProgram(),Object.keys(e.shaderPrograms).map(r=>e.shaderPrograms[r]).forEach(r=>r.cleanup()),e.shaderPrograms={}},t.releaseCurrentShaderProgram=()=>{e.lastShaderProgramBound&&(e.lastShaderProgramBound.cleanup(),e.lastShaderProgramBound=null)},t.bindShaderProgram=n=>(e.lastShaderProgramBound===n||(e.lastShaderProgramBound&&e.lastShaderProgramBound.release(),n.bind(),e.lastShaderProgramBound=n),1)}const N_e={lastShaderProgramBound:null,shaderPrograms:null,context:null};function g$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,N_e,n),e.shaderPrograms={},A.obj(t,e),A.setGet(t,e,D_e),A.moveToProtected(t,e,["openGLRenderWindow"]),L_e(t,e)}const B_e=A.newInstance(g$,"vtkShaderCache");var F_e={newInstance:B_e,extend:g$};const{vtkErrorMacro:$_e}=A;function U_e(t,e){e.classHierarchy.push("vtkOpenGLTextureUnitManager"),t.deleteTable=()=>{for(let n=0;n<e.numberOfTextureUnits;++n)e.textureUnits[n]===!0&&$_e("some texture units  were not properly released");e.textureUnits=[],e.numberOfTextureUnits=0},t.setContext=n=>{if(e.context!==n){if(e.context!==0&&t.deleteTable(),e.context=n,e.context){e.numberOfTextureUnits=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);for(let r=0;r<e.numberOfTextureUnits;++r)e.textureUnits[r]=!1}t.modified()}},t.allocate=()=>{for(let n=0;n<e.numberOfTextureUnits;n++)if(!t.isAllocated(n))return e.textureUnits[n]=!0,n;return-1},t.allocateUnit=n=>t.isAllocated(n)?-1:(e.textureUnits[n]=!0,n),t.isAllocated=n=>e.textureUnits[n],t.free=n=>{e.textureUnits[n]=!1},t.freeAll=()=>{for(let n=0;n<e.numberOfTextureUnits;++n)e.textureUnits[n]=!1}}const A_e={context:null,numberOfTextureUnits:0,textureUnits:0};function h$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,A_e,n),A.obj(t,e),e.textureUnits=[],A.get(t,e,["numberOfTextureUnits"]),A.setGet(t,e,["context"]),U_e(t,e)}const W_e=A.newInstance(h$,"vtkOpenGLTextureUnitManager");var I_e={newInstance:W_e,extend:h$};function P_e(t,e){e.classHierarchy.push("vtkRenderWindowViewNode"),t.getViewNodeFactory=()=>null,t.getAspectRatio=()=>e.size[0]/e.size[1],t.getAspectRatioForRenderer=n=>{const r=n.getViewportByReference();return e.size[0]*(r[2]-r[0])/((r[3]-r[1])*e.size[1])},t.isInViewport=(n,r,a)=>{const s=a.getViewportByReference(),o=t.getFramebufferSize();return s[0]*o[0]<=n&&s[2]*o[0]>=n&&s[1]*o[1]<=r&&s[3]*o[1]>=r},t.getViewportSize=n=>{const r=n.getViewportByReference(),a=t.getFramebufferSize();return[(r[2]-r[0])*a[0],(r[3]-r[1])*a[1]]},t.getViewportCenter=n=>{const r=t.getViewportSize(n);return[r[0]*.5,r[1]*.5]},t.displayToNormalizedDisplay=(n,r,a)=>{const s=t.getFramebufferSize();return[n/s[0],r/s[1],a]},t.normalizedDisplayToDisplay=(n,r,a)=>{const s=t.getFramebufferSize();return[n*s[0],r*s[1],a]},t.worldToView=(n,r,a,s)=>s.worldToView(n,r,a),t.viewToWorld=(n,r,a,s)=>s.viewToWorld(n,r,a),t.worldToDisplay=(n,r,a,s)=>{const o=s.worldToView(n,r,a),i=t.getViewportSize(s),l=s.viewToProjection(o[0],o[1],o[2],i[0]/i[1]),c=s.projectionToNormalizedDisplay(l[0],l[1],l[2]);return t.normalizedDisplayToDisplay(c[0],c[1],c[2])},t.displayToWorld=(n,r,a,s)=>{const o=t.displayToNormalizedDisplay(n,r,a),i=s.normalizedDisplayToProjection(o[0],o[1],o[2]),l=t.getViewportSize(s),c=s.projectionToView(i[0],i[1],i[2],l[0]/l[1]);return s.viewToWorld(c[0],c[1],c[2])},t.normalizedDisplayToViewport=(n,r,a,s)=>{let o=s.getViewportByReference();o=t.normalizedDisplayToDisplay(o[0],o[1],0);const i=t.normalizedDisplayToDisplay(n,r,a);return[i[0]-o[0]-.5,i[1]-o[1]-.5,a]},t.viewportToNormalizedViewport=(n,r,a,s)=>{const o=t.getViewportSize(s);return o&&o[0]!==0&&o[1]!==0?[n/(o[0]-1),r/(o[1]-1),a]:[n,r,a]},t.normalizedViewportToViewport=(n,r,a,s)=>{const o=t.getViewportSize(s);return[n*(o[0]-1),r*(o[1]-1),a]},t.displayToLocalDisplay=(n,r,a)=>{const s=t.getFramebufferSize();return[n,s[1]-r-1,a]},t.viewportToNormalizedDisplay=(n,r,a,s)=>{let o=s.getViewportByReference();o=t.normalizedDisplayToDisplay(o[0],o[1],0);const i=n+o[0]+.5,l=r+o[1]+.5;return t.displayToNormalizedDisplay(i,l,a)},t.getComputedDevicePixelRatio=()=>e.size[0]/t.getContainerSize()[0],t.getContainerSize=()=>{A.vtkErrorMacro("not implemented")},t.getPixelData=(n,r,a,s)=>{A.vtkErrorMacro("not implemented")},t.createSelector=()=>{A.vtkErrorMacro("not implemented")}}const G_e={size:void 0,selector:void 0};function v$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,G_e,n),e.size||(e.size=[300,300]),A.getArray(t,e,["size"],2),A.get(t,e,["selector"]),gn.extend(t,e,n),P_e(t,e)}const z_e=A.newInstance(v$,"vtkRenderWindowViewNode");var y$={newInstance:z_e,extend:v$};const H_e="__getUnderlyingContext";function K_e(){const t=new Map,e={apply(a,s,o){return t.has(o[0])?t.get(o[0]):a.apply(s,o)}};function n(a){return{apply(s,o,i){return t.set(a,i[0]),s.apply(o,i)}}}const r=Object.create(null);return r.getParameter=(a,s,o,i)=>new Proxy(i.bind(a),e),r.depthMask=(a,s,o,i)=>new Proxy(i.bind(a),n(a.DEPTH_WRITEMASK)),{get(a,s,o){if(s===H_e)return()=>a;let i=Reflect.get(a,s,a);i instanceof Function&&(i=i.bind(a));const l=r[s];return l?l(a,s,o,i):i}}}const{vtkDebugMacro:yk,vtkErrorMacro:mk}=A,j_e={position:"absolute",top:0,left:0,width:"100%",height:"100%"};function Br(t,e,n){const r=t.createFramebuffer(),a=t.createTexture();t.bindTexture(t.TEXTURE_2D,a),t.texImage2D(t.TEXTURE_2D,0,e,2,2,0,e,n,null),t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,a,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER);return t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindTexture(t.TEXTURE_2D,null),s===t.FRAMEBUFFER_COMPLETE}let Gh=0;const m$=[];function Y_e(){Gh++,m$.forEach(t=>t(Gh))}function q_e(){Gh--,m$.forEach(t=>t(Gh))}function Ck(t){t.preventDefault()}function X_e(t,e){e.classHierarchy.push("vtkOpenGLRenderWindow");const n=K_e();t.getViewNodeFactory=()=>e.myFactory,e.canvas.addEventListener("webglcontextlost",Ck,!1),e.canvas.addEventListener("webglcontextrestored",t.restoreContext,!1);const r=[0,0];function a(){e.renderable&&(e.size[0]!==r[0]||e.size[1]!==r[1])&&(r[0]=e.size[0],r[1]=e.size[1],e.canvas.setAttribute("width",e.size[0]),e.canvas.setAttribute("height",e.size[1])),e.viewStream&&e.viewStream.setSize(e.size[0],e.size[1]),e.canvas.style.display=e.useOffScreen?"none":"block",e.el&&(e.el.style.cursor=e.cursorVisibility?e.cursor:"none"),e.containerSize=null}t.onModified(a),t.buildPass=c=>{if(c){if(!e.renderable)return;t.prepareNodes(),t.addMissingNodes(e.renderable.getRenderersByReference()),t.removeUnusedNodes(),t.initialize(),e.children.forEach(u=>{u.setOpenGLRenderWindow(t)})}},t.initialize=()=>{if(!e.initialized){e.context=t.get3DContext(),e.textureUnitManager=I_e.newInstance(),e.textureUnitManager.setContext(e.context),e.shaderCache.setContext(e.context);const c=e.context;c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA),c.depthFunc(c.LEQUAL),c.enable(c.BLEND),e.initialized=!0}},t.makeCurrent=()=>{e.context.makeCurrent()},t.setContainer=c=>{e.el&&e.el!==c&&(e.canvas.parentNode!==e.el&&mk("Error: canvas parent node does not match container"),e.el.removeChild(e.canvas),e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)),e.el!==c&&(e.el=c,e.el&&(e.el.appendChild(e.canvas),e.useBackgroundImage&&e.el.appendChild(e.bgImage)),t.modified())},t.getContainer=()=>e.el,t.getContainerSize=()=>{if(!e.containerSize&&e.el){const{width:c,height:u}=e.el.getBoundingClientRect();e.containerSize=[c,u]}return e.containerSize||e.size},t.getFramebufferSize=()=>{var u;return((u=e.activeFramebuffer)==null?void 0:u.getSize())||e.size},t.getPixelData=(c,u,f,d)=>{const p=new Uint8Array((f-c+1)*(d-u+1)*4);return e.context.readPixels(c,u,f-c+1,d-u+1,e.context.RGBA,e.context.UNSIGNED_BYTE,p),p},t.get3DContext=function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{preserveDrawingBuffer:!1,depth:!0,alpha:!0,powerPreference:"high-performance"},u=null;const f=typeof WebGL2RenderingContext<"u";return e.webgl2=!1,e.defaultToWebgl2&&f&&(u=e.canvas.getContext("webgl2",c),u&&(e.webgl2=!0,yk("using webgl2"))),u||(yk("using webgl1"),u=e.canvas.getContext("webgl",c)||e.canvas.getContext("experimental-webgl",c)),new Proxy(u,n)},t.restoreContext=()=>{const c=xo.newInstance();c.setCurrentOperation("Release"),c.traverse(t,null)},t.activateTexture=c=>{const u=e._textureResourceIds.get(c);if(u!==void 0){e.context.activeTexture(e.context.TEXTURE0+u);return}const f=t.getTextureUnitManager().allocate();if(f<0){mk("Hardware does not support the number of textures defined.");return}e._textureResourceIds.set(c,f),e.context.activeTexture(e.context.TEXTURE0+f)},t.deactivateTexture=c=>{const u=e._textureResourceIds.get(c);u!==void 0&&(t.getTextureUnitManager().free(u),e._textureResourceIds.delete(c))},t.getTextureUnitForTexture=c=>{const u=e._textureResourceIds.get(c);return u!==void 0?u:-1},t.getDefaultTextureByteSize=function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e.webgl2)switch(c){case jt.CHAR:case jt.SIGNED_CHAR:case jt.UNSIGNED_CHAR:return 1;case u:case f:case jt.UNSIGNED_SHORT:case jt.SHORT:case jt.VOID:return 2;default:return 4}return 1},t.getDefaultTextureInternalFormat=function(c,u){let f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.webgl2)switch(c){case jt.UNSIGNED_CHAR:switch(u){case 1:return e.context.R8;case 2:return e.context.RG8;case 3:return e.context.RGB8;case 4:default:return e.context.RGBA8}case(f&&!d&&jt.UNSIGNED_SHORT):switch(u){case 1:return f.R16_EXT;case 2:return f.RG16_EXT;case 3:return f.RGB16_EXT;case 4:default:return f.RGBA16_EXT}case(f&&!d&&jt.SHORT):switch(u){case 1:return f.R16_SNORM_EXT;case 2:return f.RG16_SNORM_EXT;case 3:return f.RGB16_SNORM_EXT;case 4:default:return f.RGBA16_SNORM_EXT}case jt.UNSIGNED_SHORT:case jt.SHORT:case jt.FLOAT:default:switch(u){case 1:return d?e.context.R16F:e.context.R32F;case 2:return d?e.context.RG16F:e.context.RG32F;case 3:return d?e.context.RGB16F:e.context.RGB32F;case 4:default:return d?e.context.RGBA16F:e.context.RGBA32F}}switch(u){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;case 4:default:return e.context.RGBA}},t.setBackgroundImage=c=>{e.bgImage.src=c.src},t.setUseBackgroundImage=c=>{e.useBackgroundImage=c,e.useBackgroundImage&&!e.el.contains(e.bgImage)?e.el.appendChild(e.bgImage):!e.useBackgroundImage&&e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)};function s(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.imageFormat;const u=document.createElement("canvas"),f=u.getContext("2d");u.width=e.canvas.width,u.height=e.canvas.height,f.drawImage(e.canvas,0,0);const d=e.canvas.getBoundingClientRect();e.renderable.getRenderers().forEach(y=>{y.getViewProps().forEach(b=>{if(b.getContainer){const S=b.getContainer().getElementsByTagName("canvas");for(let T=0;T<S.length;T++){const w=S[T],x=w.getBoundingClientRect(),E=x.x-d.x,O=x.y-d.y;f.drawImage(w,E,O)}}})});const g=u.toDataURL(c);u.remove(),t.invokeImageReady(g)}t.captureNextImage=function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",{resetCamera:u=!1,size:f=null,scale:d=1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.deleted)return null;e.imageFormat=c;const p=e.notifyStartCaptureImage;return e.notifyStartCaptureImage=!0,e._screenshot={size:f||d!==1?f||e.size.map(h=>h*d):null},new Promise((h,g)=>{const y=t.onImageReady(m=>{if(e._screenshot.size===null)e.notifyStartCaptureImage=p,y.unsubscribe(),e._screenshot.placeHolder&&(e.size=e._screenshot.originalSize,t.modified(),e._screenshot.cameras&&e._screenshot.cameras.forEach(b=>{let{restoreParamsFn:C,arg:S}=b;return C(S)}),t.traverseAllPasses(),e.el.removeChild(e._screenshot.placeHolder),e._screenshot.placeHolder.remove(),e._screenshot=null),h(m);else{const b=document.createElement("img");if(b.style=j_e,b.src=m,e._screenshot.placeHolder=e.el.appendChild(b),e.canvas.style.display="none",e._screenshot.originalSize=e.size,e.size=e._screenshot.size,e._screenshot.size=null,t.modified(),u){const C=u!==!0;e._screenshot.cameras=e.renderable.getRenderers().map(S=>{const T=S.getActiveCamera(),w=T.get("focalPoint","position","parallelScale");return{resetCameraArgs:C?{renderer:S}:void 0,resetCameraFn:C?u:S.resetCamera,restoreParamsFn:T.set,arg:JSON.parse(JSON.stringify(w))}}),e._screenshot.cameras.forEach(S=>{let{resetCameraFn:T,resetCameraArgs:w}=S;return T(w)})}t.traverseAllPasses()}})})};let o;t.getHardwareMaximumLineWidth=()=>{if(o!=null)return o;const c=t.get3DContext(),u=c.getParameter(c.ALIASED_LINE_WIDTH_RANGE);return o=u[1],u[1]},t.getGLInformations=()=>{if(e._glInformation)return e._glInformation;const c=t.get3DContext(),u=c.getExtension("OES_texture_float"),f=c.getExtension("OES_texture_half_float"),d=c.getExtension("WEBGL_debug_renderer_info"),p=c.getExtension("WEBGL_draw_buffers"),h=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),g=[["Max Vertex Attributes","MAX_VERTEX_ATTRIBS",c.getParameter(c.MAX_VERTEX_ATTRIBS)],["Max Varying Vectors","MAX_VARYING_VECTORS",c.getParameter(c.MAX_VARYING_VECTORS)],["Max Vertex Uniform Vectors","MAX_VERTEX_UNIFORM_VECTORS",c.getParameter(c.MAX_VERTEX_UNIFORM_VECTORS)],["Max Fragment Uniform Vectors","MAX_FRAGMENT_UNIFORM_VECTORS",c.getParameter(c.MAX_FRAGMENT_UNIFORM_VECTORS)],["Max Fragment Texture Image Units","MAX_TEXTURE_IMAGE_UNITS",c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS)],["Max Vertex Texture Image Units","MAX_VERTEX_TEXTURE_IMAGE_UNITS",c.getParameter(c.MAX_VERTEX_TEXTURE_IMAGE_UNITS)],["Max Combined Texture Image Units","MAX_COMBINED_TEXTURE_IMAGE_UNITS",c.getParameter(c.MAX_COMBINED_TEXTURE_IMAGE_UNITS)],["Max 2D Texture Size","MAX_TEXTURE_SIZE",c.getParameter(c.MAX_TEXTURE_SIZE)],["Max Cube Texture Size","MAX_CUBE_MAP_TEXTURE_SIZE",c.getParameter(c.MAX_CUBE_MAP_TEXTURE_SIZE)],["Max Texture Anisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT",h&&c.getParameter(h.MAX_TEXTURE_MAX_ANISOTROPY_EXT)],["Point Size Range","ALIASED_POINT_SIZE_RANGE",c.getParameter(c.ALIASED_POINT_SIZE_RANGE).join(" - ")],["Line Width Range","ALIASED_LINE_WIDTH_RANGE",c.getParameter(c.ALIASED_LINE_WIDTH_RANGE).join(" - ")],["Max Viewport Dimensions","MAX_VIEWPORT_DIMS",c.getParameter(c.MAX_VIEWPORT_DIMS).join(" - ")],["Max Renderbuffer Size","MAX_RENDERBUFFER_SIZE",c.getParameter(c.MAX_RENDERBUFFER_SIZE)],["Framebuffer Red Bits","RED_BITS",c.getParameter(c.RED_BITS)],["Framebuffer Green Bits","GREEN_BITS",c.getParameter(c.GREEN_BITS)],["Framebuffer Blue Bits","BLUE_BITS",c.getParameter(c.BLUE_BITS)],["Framebuffer Alpha Bits","ALPHA_BITS",c.getParameter(c.ALPHA_BITS)],["Framebuffer Depth Bits","DEPTH_BITS",c.getParameter(c.DEPTH_BITS)],["Framebuffer Stencil Bits","STENCIL_BITS",c.getParameter(c.STENCIL_BITS)],["Framebuffer Subpixel Bits","SUBPIXEL_BITS",c.getParameter(c.SUBPIXEL_BITS)],["MSAA Samples","SAMPLES",c.getParameter(c.SAMPLES)],["MSAA Sample Buffers","SAMPLE_BUFFERS",c.getParameter(c.SAMPLE_BUFFERS)],["Supported Formats for UByte Render Targets     ","UNSIGNED_BYTE RENDER TARGET FORMATS",[u&&Br(c,c.RGBA,c.UNSIGNED_BYTE)?"RGBA":"",u&&Br(c,c.RGB,c.UNSIGNED_BYTE)?"RGB":"",u&&Br(c,c.LUMINANCE,c.UNSIGNED_BYTE)?"LUMINANCE":"",u&&Br(c,c.ALPHA,c.UNSIGNED_BYTE)?"ALPHA":"",u&&Br(c,c.LUMINANCE_ALPHA,c.UNSIGNED_BYTE)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Half Float Render Targets","HALF FLOAT RENDER TARGET FORMATS",[f&&Br(c,c.RGBA,f.HALF_FLOAT_OES)?"RGBA":"",f&&Br(c,c.RGB,f.HALF_FLOAT_OES)?"RGB":"",f&&Br(c,c.LUMINANCE,f.HALF_FLOAT_OES)?"LUMINANCE":"",f&&Br(c,c.ALPHA,f.HALF_FLOAT_OES)?"ALPHA":"",f&&Br(c,c.LUMINANCE_ALPHA,f.HALF_FLOAT_OES)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Full Float Render Targets","FLOAT RENDER TARGET FORMATS",[u&&Br(c,c.RGBA,c.FLOAT)?"RGBA":"",u&&Br(c,c.RGB,c.FLOAT)?"RGB":"",u&&Br(c,c.LUMINANCE,c.FLOAT)?"LUMINANCE":"",u&&Br(c,c.ALPHA,c.FLOAT)?"ALPHA":"",u&&Br(c,c.LUMINANCE_ALPHA,c.FLOAT)?"LUMINANCE_ALPHA":""].join(" ")],["Max Multiple Render Targets Buffers","MAX_DRAW_BUFFERS_WEBGL",p?c.getParameter(p.MAX_DRAW_BUFFERS_WEBGL):0],["High Float Precision in Vertex Shader","HIGH_FLOAT VERTEX_SHADER",[c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.HIGH_FLOAT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Vertex Shader","MEDIUM_FLOAT VERTEX_SHADER",[c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.MEDIUM_FLOAT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Vertex Shader","LOW_FLOAT VERTEX_SHADER",[c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.LOW_FLOAT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Float Precision in Fragment Shader","HIGH_FLOAT FRAGMENT_SHADER",[c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_FLOAT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Fragment Shader","MEDIUM_FLOAT FRAGMENT_SHADER",[c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Fragment Shader","LOW_FLOAT FRAGMENT_SHADER",[c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_FLOAT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Int Precision in Vertex Shader","HIGH_INT VERTEX_SHADER",[c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.HIGH_INT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.HIGH_INT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Vertex Shader","MEDIUM_INT VERTEX_SHADER",[c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.MEDIUM_INT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Vertex Shader","LOW_INT VERTEX_SHADER",[c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.LOW_INT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.LOW_INT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.LOW_INT).rangeMax,"</sup>)"].join("")],["High Int Precision in Fragment Shader","HIGH_INT FRAGMENT_SHADER",[c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_INT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_INT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Fragment Shader","MEDIUM_INT FRAGMENT_SHADER",[c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_INT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Fragment Shader","LOW_INT FRAGMENT_SHADER",[c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_INT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_INT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_INT).rangeMax,"</sup>)"].join("")],["Supported Extensions","EXTENSIONS",c.getSupportedExtensions().join("<br/>					    ")],["WebGL Renderer","RENDERER",c.getParameter(c.RENDERER)],["WebGL Vendor","VENDOR",c.getParameter(c.VENDOR)],["WebGL Version","VERSION",c.getParameter(c.VERSION)],["Shading Language Version","SHADING_LANGUAGE_VERSION",c.getParameter(c.SHADING_LANGUAGE_VERSION)],["Unmasked Renderer","UNMASKED_RENDERER",d&&c.getParameter(d.UNMASKED_RENDERER_WEBGL)],["Unmasked Vendor","UNMASKED_VENDOR",d&&c.getParameter(d.UNMASKED_VENDOR_WEBGL)],["WebGL Version","WEBGL_VERSION",e.webgl2?2:1]],y={};for(;g.length;){const[m,b,C]=g.pop();b&&(y[b]={label:m,value:C})}return e._glInformation=y,y},t.traverseAllPasses=()=>{if(e.renderPasses)for(let c=0;c<e.renderPasses.length;++c)e.renderPasses[c].traverse(t,null);e.notifyStartCaptureImage&&s()},t.disableCullFace=()=>{e.cullFaceEnabled&&(e.context.disable(e.context.CULL_FACE),e.cullFaceEnabled=!1)},t.enableCullFace=()=>{e.cullFaceEnabled||(e.context.enable(e.context.CULL_FACE),e.cullFaceEnabled=!0)},t.setViewStream=c=>{if(e.viewStream===c)return!1;if(e.subscription&&(e.subscription.unsubscribe(),e.subscription=null),e.viewStream=c,e.viewStream){const u=e.renderable.getRenderers()[0];u.getBackgroundByReference()[3]=0,t.setUseBackgroundImage(!0),e.subscription=e.viewStream.onImageReady(f=>t.setBackgroundImage(f.image)),e.viewStream.setSize(e.size[0],e.size[1]),e.viewStream.invalidateCache(),e.viewStream.render(),t.modified()}return!0},t.createSelector=()=>{const c=MC.newInstance();return c.setOpenGLRenderWindow(t),c};function i(){e.canvas.removeEventListener("webglcontextlost",Ck),e.canvas.removeEventListener("webglcontextrestored",t.restoreContext)}t.delete=A.chain(i,t.delete,t.setViewStream,q_e),t.setActiveFramebuffer=c=>{e.activeFramebuffer=c};const l=t.setSize;t.setSize=(c,u)=>{const f=l(c,u);return f&&t.invokeWindowResizeEvent({width:c,height:u}),f},t.getGraphicsResourceForObject=c=>{if(!c)return null;const u=e._graphicsResources.get(c),f=e._graphicsResourceHash.get(c);return{vtkObj:u,hash:f}},t.setGraphicsResourceForObject=(c,u,f)=>{c&&(e._graphicsResources.set(c,u),e._graphicsResourceHash.set(c,f))},t.getGraphicsMemoryInfo=()=>{let c=0;return e._graphicsResources.forEach((u,f)=>{c+=u.getAllocatedGPUMemoryInBytes()}),c},t.releaseGraphicsResourcesForObject=c=>{var u;return c?((u=e._graphicsResources.get(c))==null||u.releaseGraphicsResources(t),e._graphicsResources.delete(c)&&e._graphicsResourceHash.delete(c)):!1},t.releaseGraphicsResources=()=>{e.shaderCache!==null&&e.shaderCache.releaseGraphicsResources(t),e._graphicsResources.forEach((c,u)=>{c.releaseGraphicsResources(t)}),e._graphicsResources.clear(),e._graphicsResourceHash.clear(),e.textureUnitManager!==null&&e.textureUnitManager.freeAll(),e.renderable.getRenderersByReference().forEach(c=>{const u=t.getViewNodeFor(c);u==null||u.releaseGraphicsResources()})}}const Z_e={cullFaceEnabled:!1,shaderCache:null,initialized:!1,context:null,canvas:null,cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null,containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,webgl2:!1,defaultToWebgl2:!0,activeFramebuffer:null,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1};function J_e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Z_e,n),y$.extend(t,e,n),e.canvas=document.createElement("canvas"),e.canvas.style.width="100%",Y_e(),e.selector||(e.selector=MC.newInstance(),e.selector.setOpenGLRenderWindow(t)),e.bgImage=new Image,e.bgImage.style.position="absolute",e.bgImage.style.left="0",e.bgImage.style.top="0",e.bgImage.style.width="100%",e.bgImage.style.height="100%",e.bgImage.style.zIndex="-1",e._textureResourceIds=new Map,e._graphicsResources=new Map,e._graphicsResourceHash=new Map,e._glInformation=null,e.myFactory=mW.newInstance(),e.myFactory.registerOverride("vtkRenderWindow",C$),e.shaderCache=F_e.newInstance(),e.shaderCache.setOpenGLRenderWindow(t),e.renderPasses[0]=R_e.newInstance(),A.event(t,e,"imageReady"),A.get(t,e,["shaderCache","textureUnitManager","webgl2","useBackgroundImage","activeFramebuffer"]),A.setGet(t,e,["initialized","context","canvas","renderPasses","notifyStartCaptureImage","defaultToWebgl2","cursor","useOffScreen"]),A.setGetArray(t,e,["size"],2),A.event(t,e,"windowResizeEvent"),X_e(t,e)}const C$=A.newInstance(J_e,"vtkOpenGLRenderWindow");zb("WebGL",C$);const wy=["setBindGroup","setIndexBuffer","setVertexBuffer","draw","drawIndexed"];function Q_e(t,e){e.classHierarchy.push("vtkWebGPURenderEncoder"),t.begin=n=>{e.drawCallbacks=[],e.handle=n.beginRenderPass(e.description),e.label&&e.handle.pushDebugGroup(e.label)},t.end=()=>{for(let n=0;n<e.drawCallbacks.length;n++){const r=e.drawCallbacks[n],a=r.pipeline;t.setPipeline(a);for(let s=0;s<r.callbacks.length;s++)r.callbacks[s](t)}e.label&&e.handle.popDebugGroup(),e.handle.end(),e.boundPipeline=null},t.setPipeline=n=>{var a,s;if(e.boundPipeline===n)return;e.handle.setPipeline(n.getHandle());const r=n.getPipelineDescription();if(e.colorTextureViews.length!==r.fragment.targets.length)console.log(`mismatched attachment counts on pipeline ${r.fragment.targets.length} while encoder has ${e.colorTextureViews.length}`),console.trace();else for(let o=0;o<e.colorTextureViews.length;o++){const i=(a=e.colorTextureViews[o].getTexture())==null?void 0:a.getFormat();i&&i!==r.fragment.targets[o].format&&(console.log(`mismatched attachments for attachment ${o} on pipeline ${r.fragment.targets[o].format} while encoder has ${i}`),console.trace())}if(!e.depthTextureView!=!("depthStencil"in r))console.log("mismatched depth attachments"),console.trace();else if(e.depthTextureView){const o=(s=e.depthTextureView.getTexture())==null?void 0:s.getFormat();o&&o!==r.depthStencil.format&&(console.log(`mismatched depth attachments on pipeline ${r.depthStencil.format} while encoder has ${o}`),console.trace())}e.boundPipeline=n},t.replaceShaderCode=n=>{e.replaceShaderCodeFunction(n)},t.setColorTextureView=(n,r)=>{e.colorTextureViews[n]!==r&&(e.colorTextureViews[n]=r)},t.activateBindGroup=n=>{const r=e.boundPipeline.getDevice(),a=e.boundPipeline.getBindGroupLayoutCount(n.getLabel());e.handle.setBindGroup(a,n.getBindGroup(r));const s=r.getBindGroupLayoutDescription(n.getBindGroupLayout(r)),o=r.getBindGroupLayoutDescription(e.boundPipeline.getBindGroupLayout(a));s!==o&&(console.log(`renderEncoder ${e.pipelineHash} mismatched bind group layouts bind group has
${s}
 versus pipeline
${o}
`),console.trace())},t.attachTextureViews=()=>{for(let n=0;n<e.colorTextureViews.length;n++)e.description.colorAttachments[n]?e.description.colorAttachments[n].view=e.colorTextureViews[n].getHandle():e.description.colorAttachments[n]={view:e.colorTextureViews[n].getHandle()};e.depthTextureView&&(e.description.depthStencilAttachment.view=e.depthTextureView.getHandle())},t.registerDrawCallback=(n,r)=>{for(let a=0;a<e.drawCallbacks.length;a++)if(e.drawCallbacks[a].pipeline===n){e.drawCallbacks[a].callbacks.push(r);return}e.drawCallbacks.push({pipeline:n,callbacks:[r]})};for(let n=0;n<wy.length;n++)t[wy[n]]=function(){return e.handle[wy[n]](...arguments)}}const eVe={description:null,handle:null,boundPipeline:null,pipelineHash:null,pipelineSettings:null,replaceShaderCodeFunction:null,depthTextureView:null,label:null};function S$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,eVe,n),dn(t,e),e.description={colorAttachments:[{view:void 0,loadOp:"load",storeOp:"store"}],depthStencilAttachment:{view:void 0,depthLoadOp:"clear",depthClearValue:0,depthStoreOp:"store"}},e.replaceShaderCodeFunction=r=>{const a=r.getShaderDescription("fragment");a.addOutput("vec4<f32>","outColor");let s=a.getCode();s=St.substitute(s,"//VTK::RenderEncoder::Impl",["output.outColor = computedColor;"]).result,a.setCode(s)},e.pipelineSettings={primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth32float"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}},e.colorTextureViews=[],wr(t,e,["boundPipeline","colorTextureViews"]),Dn(t,e,["depthTextureView","description","handle","label","pipelineHash","pipelineSettings","replaceShaderCodeFunction"]),Q_e(t,e)}const tVe=Ft(S$,"vtkWebGPURenderEncoder");var Qs={newInstance:tVe,extend:S$};function nVe(t,e){e.classHierarchy.push("vtkWebGPUOpaquePass"),t.traverse=(n,r)=>{if(e.deleted)return;e._currentParent=r;const a=r.getDevice();if(e.renderEncoder)e.colorTexture.resize(r.getCanvas().width,r.getCanvas().height),e.depthTexture.resize(r.getCanvas().width,r.getCanvas().height);else{t.createRenderEncoder(),e.colorTexture=ks.newInstance({label:"opaquePassColor"}),e.colorTexture.create(a,{width:r.getCanvas().width,height:r.getCanvas().height,format:"rgba16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC});const s=e.colorTexture.createView("opaquePassColorTexture");e.renderEncoder.setColorTextureView(0,s),e.depthFormat="depth32float",e.depthTexture=ks.newInstance({label:"opaquePassDepth"}),e.depthTexture.create(a,{width:r.getCanvas().width,height:r.getCanvas().height,format:e.depthFormat,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC});const o=e.depthTexture.createView("opaquePassDepthTexture");e.renderEncoder.setDepthTextureView(o)}e.renderEncoder.attachTextureViews(),t.setCurrentOperation("opaquePass"),n.setRenderEncoder(e.renderEncoder),n.traverse(t)},t.getColorTextureView=()=>e.renderEncoder.getColorTextureViews()[0],t.getDepthTextureView=()=>e.renderEncoder.getDepthTextureView(),t.createRenderEncoder=()=>{e.renderEncoder=Qs.newInstance({label:"OpaquePass"}),e.renderEncoder.setPipelineHash("op")}}const rVe={renderEncoder:null,colorTexture:null,depthTexture:null};function b$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,rVe,n),xo.extend(t,e,n),A.get(t,e,["colorTexture","depthTexture"]),nVe(t,e)}const aVe=A.newInstance(b$,"vtkWebGPUOpaquePass");var sVe={newInstance:aVe,extend:b$};const oVe=`
//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var tcoord: vec2<i32> = vec2<i32>(i32(input.fragPos.x), i32(input.fragPos.y));
  var reveal: f32 = textureLoad(oitpAccumTexture, tcoord, 0).r;
  if (reveal == 1.0) { discard; }
  var tcolor: vec4<f32> = textureLoad(oitpColorTexture, tcoord, 0);
  var total: f32 = max(tcolor.a, 0.01);
  var computedColor: vec4<f32> = vec4<f32>(tcolor.r/total, tcolor.g/total, tcolor.b/total, 1.0 - reveal);

  //VTK::RenderEncoder::Impl
  return output;
}
`;function iVe(t,e){e.classHierarchy.push("vtkWebGPUOrderIndependentTranslucentPass"),t.traverse=(n,r)=>{if(e.deleted)return;e._currentParent=r;const a=r.getDevice();if(e.translucentRenderEncoder)e.translucentColorTexture.resizeToMatch(e.colorTextureView.getTexture()),e.translucentAccumulateTexture.resizeToMatch(e.colorTextureView.getTexture());else{t.createRenderEncoder(),t.createFinalEncoder(),e.translucentColorTexture=ks.newInstance({label:"translucentPassColor"}),e.translucentColorTexture.create(a,{width:r.getCanvas().width,height:r.getCanvas().height,format:"rgba16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const s=e.translucentColorTexture.createView("oitpColorTexture");e.translucentRenderEncoder.setColorTextureView(0,s),e.translucentAccumulateTexture=ks.newInstance({label:"translucentPassAccumulate"}),e.translucentAccumulateTexture.create(a,{width:r.getCanvas().width,height:r.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const o=e.translucentAccumulateTexture.createView("oitpAccumTexture");e.translucentRenderEncoder.setColorTextureView(1,o),e.fullScreenQuad=Sl.newInstance(),e.fullScreenQuad.setDevice(r.getDevice()),e.fullScreenQuad.setPipelineHash("oitpfsq"),e.fullScreenQuad.setTextureViews(e.translucentRenderEncoder.getColorTextureViews()),e.fullScreenQuad.setFragmentShaderTemplate(oVe)}e.translucentRenderEncoder.setDepthTextureView(e.depthTextureView),e.translucentRenderEncoder.attachTextureViews(),t.setCurrentOperation("translucentPass"),n.setRenderEncoder(e.translucentRenderEncoder),n.traverse(t),t.finalPass(r,n)},t.finalPass=(n,r)=>{e.translucentFinalEncoder.setColorTextureView(0,e.colorTextureView),e.translucentFinalEncoder.attachTextureViews(),e.translucentFinalEncoder.begin(n.getCommandEncoder()),r.scissorAndViewport(e.translucentFinalEncoder),e.fullScreenQuad.prepareAndDraw(e.translucentFinalEncoder),e.translucentFinalEncoder.end()},t.getTextures=()=>[e.translucentColorTexture,e.translucentAccumulateTexture],t.createRenderEncoder=()=>{e.translucentRenderEncoder=Qs.newInstance({label:"translucentRender"});const n=e.translucentRenderEncoder.getDescription();n.colorAttachments=[{view:void 0,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"},{view:void 0,clearValue:[1,0,0,0],loadOp:"clear",storeOp:"store"}],n.depthStencilAttachment={view:void 0,depthLoadOp:"load",depthStoreOp:"store"},e.translucentRenderEncoder.setReplaceShaderCodeFunction(r=>{const a=r.getShaderDescription("fragment");a.addOutput("vec4<f32>","outColor"),a.addOutput("f32","outAccum"),a.addBuiltinInput("vec4<f32>","@builtin(position) fragPos");let s=a.getCode();s=St.substitute(s,"//VTK::RenderEncoder::Impl",["var w: f32 = computedColor.a * pow(0.1 + input.fragPos.z, 2.0);","output.outColor = vec4<f32>(computedColor.rgb*w, w);","output.outAccum = computedColor.a;"]).result,a.setCode(s)}),e.translucentRenderEncoder.setPipelineHash("oitpr"),e.translucentRenderEncoder.setPipelineSettings({primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!1,depthCompare:"greater",format:"depth32float"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcfactor:"one",dstFactor:"one"}}},{format:"r16float",blend:{color:{srcFactor:"zero",dstFactor:"one-minus-src"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},t.createFinalEncoder=()=>{e.translucentFinalEncoder=Qs.newInstance({label:"translucentFinal"}),e.translucentFinalEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),e.translucentFinalEncoder.setReplaceShaderCodeFunction(n=>{const r=n.getShaderDescription("fragment");r.addOutput("vec4<f32>","outColor"),r.addBuiltinInput("vec4<f32>","@builtin(position) fragPos");let a=r.getCode();a=St.substitute(a,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<f32>(computedColor.rgb, computedColor.a);"]).result,r.setCode(a)}),e.translucentFinalEncoder.setPipelineHash("oitpf"),e.translucentFinalEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})}}const lVe={colorTextureView:null,depthTextureView:null};function w$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,lVe,n),xo.extend(t,e,n),A.setGet(t,e,["colorTextureView","depthTextureView"]),iVe(t,e)}const cVe=A.newInstance(w$,"vtkWebGPUOrderIndependentTranslucentPass");var uVe={newInstance:cVe,extend:w$};const fVe=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::Volume::TraverseDec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

fn getTextureValue(vTex: texture_3d<f32>, tpos: vec4<f32>) -> f32
{
  // todo multicomponent support
  return textureSampleLevel(vTex, clampSampler, tpos.xyz, 0.0).r;
}

fn getGradient(vTex: texture_3d<f32>, tpos: vec4<f32>, vNum: i32, scalar: f32) -> vec4<f32>
{
  var result: vec4<f32>;

  var tstep: vec4<f32> = volumeSSBO.values[vNum].tstep;
  result.x = getTextureValue(vTex, tpos + vec4<f32>(tstep.x, 0.0, 0.0, 1.0)) - scalar;
  result.y = getTextureValue(vTex, tpos + vec4<f32>(0.0, tstep.y, 0.0, 1.0)) - scalar;
  result.z = getTextureValue(vTex, tpos + vec4<f32>(0.0, 0.0, tstep.z, 1.0)) - scalar;
  result.w = 0.0;

  // divide by spacing as that is our delta
  result = result / volumeSSBO.values[vNum].spacing;
  // now we have a gradient in unit tcoords

  var grad: f32 = length(result.xyz);
  if (grad > 0.0)
  {
    // rotate to View Coords, needed for lighting and shading
    var nMat: mat4x4<f32> = rendererUBO.SCVCMatrix * volumeSSBO.values[vNum].planeNormals;
    result = nMat * result;
    result = result / length(result);
  }

  // store gradient magnitude in .w
  result.w = grad;

  return result;
}

fn processVolume(vTex: texture_3d<f32>, vNum: i32, cNum: i32, posSC: vec4<f32>, tfunRows: f32) -> vec4<f32>
{
  var outColor: vec4<f32> = vec4<f32>(0.0, 0.0, 0.0, 0.0);

  // convert to tcoords and reject if outside the volume
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*posSC;
  if (tpos.x < 0.0 || tpos.y < 0.0 || tpos.z < 0.0 ||
      tpos.x > 1.0 || tpos.y > 1.0 || tpos.z > 1.0) { return outColor; }

  var scalar: f32 = getTextureValue(vTex, tpos);

  var coord: vec2<f32> =
    vec2<f32>(scalar * componentSSBO.values[cNum].cScale + componentSSBO.values[cNum].cShift,
      (0.5 + 2.0 * f32(vNum)) / tfunRows);
  var color: vec4<f32> = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);

  var gofactor: f32 = 1.0;
  var normal: vec4<f32> = vec4<f32>(0.0,0.0,0.0,0.0);
  if (componentSSBO.values[cNum].gomin <  1.0 || volumeSSBO.values[vNum].shade[0] > 0.0)
  {
    normal = getGradient(vTex, tpos, vNum, scalar);
    if (componentSSBO.values[cNum].gomin <  1.0)
    {
      gofactor = clamp(normal.a*componentSSBO.values[cNum].goScale + componentSSBO.values[cNum].goShift,
      componentSSBO.values[cNum].gomin, componentSSBO.values[cNum].gomax);
    }
  }

  coord.x = (scalar * componentSSBO.values[cNum].oScale + componentSSBO.values[cNum].oShift);
  var opacity: f32 = textureSampleLevel(ofunTexture, clampSampler, coord, 0.0).r;

  if (volumeSSBO.values[vNum].shade[0] > 0.0)
  {
    color = color*abs(normal.z);
  }

  outColor = vec4<f32>(color.rgb, gofactor * opacity);

  return outColor;
}

// adjust the start and end point of a raycast such that it intersects the unit cube.
// This function is used to take a raycast starting point and step vector
// and numSteps and return the startijng and ending steps for intersecting the
// unit cube. Recall for a 3D texture, the unit cube is the range of texture coordsinates
// that have valid values. So this funtion can be used to take a ray in texture coordinates
// and bound it to intersecting the texture.
//
fn adjustBounds(tpos: vec4<f32>, tstep: vec4<f32>, numSteps: f32) -> vec2<f32>
{
  var result: vec2<f32> = vec2<f32>(0.0, numSteps);
  var tpos2: vec4<f32> = tpos + tstep*numSteps;

  // move tpos to the start of the volume
  var adjust: f32 =
    min(
      max(tpos.x/tstep.x, (tpos.x - 1.0)/tstep.x),
      min(
        max((tpos.y - 1.0)/tstep.y, tpos.y/tstep.y),
        max((tpos.z - 1.0)/tstep.z, tpos.z/tstep.z)));
  if (adjust < 0.0)
  {
    result.x = result.x - adjust;
  }

  // adjust length to the end
  adjust =
    max(
      min(tpos2.x/tstep.x, (tpos2.x - 1.0)/tstep.x),
      max(
        min((tpos2.y - 1.0)/tstep.y, tpos2.y/tstep.y),
        min((tpos2.z - 1.0)/tstep.z, tpos2.z/tstep.z)));
  if (adjust > 0.0)
  {
    result.y = result.y - adjust;
  }

  return result;
}

fn getSimpleColor(scalar: f32, vNum: i32, cNum: i32) -> vec4<f32>
{
  // how many rows (tfuns) do we have in our tfunTexture
  var tfunRows: f32 = f32(textureDimensions(tfunTexture).y);

  var coord: vec2<f32> =
    vec2<f32>(scalar * componentSSBO.values[cNum].cScale + componentSSBO.values[cNum].cShift,
      (0.5 + 2.0 * f32(vNum)) / tfunRows);
  var color: vec4<f32> = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);
  coord.x = (scalar * componentSSBO.values[cNum].oScale + componentSSBO.values[cNum].oShift);
  var opacity: f32 = textureSampleLevel(ofunTexture, clampSampler, coord, 0.0).r;
  return vec4<f32>(color.rgb, opacity);
}

fn traverseMax(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)
{
  // convert to tcoords and reject if outside the volume
  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;
  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);
  var tstep: vec4<f32> = tpos2 - tpos;

  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);

  // did we hit anything
  if (rayBounds.x >= rayBounds.y)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
    return;
  }

  tpos = tpos + tstep*rayBounds.x;
  var curDist: f32 = rayBounds.x;
  var maxVal: f32 = -1.0e37;
  loop
  {
    var scalar: f32 = getTextureValue(vTex, tpos);
    if (scalar > maxVal)
    {
      maxVal = scalar;
    }

    // increment position
    curDist = curDist + 1.0;
    tpos = tpos + tstep;

    // check if we have reached a terminating condition
    if (curDist > rayBounds.y) { break; }
  }

  // process to get the color and opacity
  traverseVals[vNum] = getSimpleColor(maxVal, vNum, cNum);
}

fn traverseMin(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)
{
  // convert to tcoords and reject if outside the volume
  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;
  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);
  var tstep: vec4<f32> = tpos2 - tpos;

  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);

  // did we hit anything
  if (rayBounds.x >= rayBounds.y)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
    return;
  }

  tpos = tpos + tstep*rayBounds.x;
  var curDist: f32 = rayBounds.x;
  var minVal: f32 = 1.0e37;
  loop
  {
    var scalar: f32 = getTextureValue(vTex, tpos);
    if (scalar < minVal)
    {
      minVal = scalar;
    }

    // increment position
    curDist = curDist + 1.0;
    tpos = tpos + tstep;

    // check if we have reached a terminating condition
    if (curDist > rayBounds.y) { break; }
  }

  // process to get the color and opacity
  traverseVals[vNum] = getSimpleColor(minVal, vNum, cNum);
}

fn traverseAverage(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)
{
  // convert to tcoords and reject if outside the volume
  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;
  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);
  var tstep: vec4<f32> = tpos2 - tpos;

  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);

  // did we hit anything
  if (rayBounds.x >= rayBounds.y)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
    return;
  }

  let ipRange: vec4<f32> = volumeSSBO.values[vNum].ipScalarRange;
  tpos = tpos + tstep*rayBounds.x;
  var curDist: f32 = rayBounds.x;
  var avgVal: f32 = 0.0;
  var sampleCount: f32 = 0.0;
  loop
  {
    var sample: f32 = getTextureValue(vTex, tpos);
    // right now leave filtering off until WebGL changes get merged
    // if (ipRange.z == 0.0 || sample >= ipRange.x && sample <= ipRange.y)
    // {
      avgVal = avgVal + sample;
      sampleCount = sampleCount + 1.0;
    // }

    // increment position
    curDist = curDist + 1.0;
    tpos = tpos + tstep;

    // check if we have reached a terminating condition
    if (curDist > rayBounds.y) { break; }
  }

  if (sampleCount <= 0.0)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
  }

  // process to get the color and opacity
  traverseVals[vNum] = getSimpleColor(avgVal/sampleCount, vNum, cNum);
}

fn traverseAdditive(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)
{
  // convert to tcoords and reject if outside the volume
  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;
  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);
  var tstep: vec4<f32> = tpos2 - tpos;

  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);

  // did we hit anything
  if (rayBounds.x >= rayBounds.y)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
    return;
  }

  let ipRange: vec4<f32> = volumeSSBO.values[vNum].ipScalarRange;
  tpos = tpos + tstep*rayBounds.x;
  var curDist: f32 = rayBounds.x;
  var sumVal: f32 = 0.0;
  loop
  {
    var sample: f32 = getTextureValue(vTex, tpos);
    // right now leave filtering off until WebGL changes get merged
    // if (ipRange.z == 0.0 || sample >= ipRange.x && sample <= ipRange.y)
    // {
      sumVal = sumVal + sample;
    // }

    // increment position
    curDist = curDist + 1.0;
    tpos = tpos + tstep;

    // check if we have reached a terminating condition
    if (curDist > rayBounds.y) { break; }
  }

  // process to get the color and opacity
  traverseVals[vNum] = getSimpleColor(sumVal, vNum, cNum);
}

fn composite(rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>) -> vec4<f32>
{
  // initial ray position is at the beginning
  var rayPosSC: vec4<f32> = minPosSC;

  // how many rows (tfuns) do we have in our tfunTexture
  var tfunRows: f32 = f32(textureDimensions(tfunTexture).y);

  var curDist: f32 = 0.0;
  var computedColor: vec4<f32> = vec4<f32>(0.0, 0.0, 0.0, 0.0);
  var sampleColor: vec4<f32>;
//VTK::Volume::TraverseCalls

  loop
  {
    // for each volume, sample and accumulate color
//VTK::Volume::CompositeCalls

    // increment position
    curDist = curDist + mapperUBO.SampleDistance;
    rayPosSC = rayPosSC + rayStepSC;

    // check if we have reached a terminating condition
    if (curDist > rayLengthSC) { break; }
    if (computedColor.a > 0.98) { break; }
  }
  return computedColor;
}

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var rayMax: f32 = textureSampleLevel(maxTexture, clampSampler, input.tcoordVS, 0.0).r;
  var rayMin: f32 = textureSampleLevel(minTexture, clampSampler, input.tcoordVS, 0.0).r;

  // discard empty rays
  if (rayMax <= rayMin) { discard; }
  else
  {
    // compute start and end ray positions in view coordinates
    var minPosSC: vec4<f32> = rendererUBO.PCSCMatrix*vec4<f32>(2.0 * input.tcoordVS.x - 1.0, 1.0 - 2.0 * input.tcoordVS.y, rayMax, 1.0);
    minPosSC = minPosSC * (1.0 / minPosSC.w);
    var maxPosSC: vec4<f32> = rendererUBO.PCSCMatrix*vec4<f32>(2.0 * input.tcoordVS.x - 1.0, 1.0 - 2.0 * input.tcoordVS.y, rayMin, 1.0);
    maxPosSC = maxPosSC * (1.0 / maxPosSC.w);

    var rayLengthSC: f32 = distance(minPosSC.xyz, maxPosSC.xyz);
    var rayStepSC: vec4<f32> = (maxPosSC - minPosSC)*(mapperUBO.SampleDistance/rayLengthSC);
    rayStepSC.w = 0.0;

    var computedColor: vec4<f32>;

//VTK::Volume::Loop

//VTK::RenderEncoder::Impl
  }

  return output;
}
`,Fr=new Float64Array(16),Bo=new Float64Array(16);function dVe(t,e){e.classHierarchy.push("vtkWebGPUVolumePassFSQ"),t.replaceShaderPosition=(a,s,o)=>{const i=s.getShaderDescription("vertex");i.addBuiltinOutput("vec4<f32>","@builtin(position) Position");let l=i.getCode();l=St.substitute(l,"//VTK::Position::Impl",["output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);","output.Position = vec4<f32>(vertexBC, 1.0);"]).result,i.setCode(l),s.getShaderDescription("fragment").addBuiltinInput("vec4<f32>","@builtin(position) fragPos")},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderVolume=(a,s,o)=>{const i=s.getShaderDescription("fragment");let l=i.getCode();const c=[],u=[];for(let d=0;d<e.volumes.length;d++)e.volumes[d].getRenderable().getMapper().getBlendMode()===Ni.COMPOSITE_BLEND?(c.push(`    sampleColor = processVolume(volTexture${d}, ${d}, ${e.rowStarts[d]}, rayPosSC, tfunRows);`),c.push(`    computedColor = vec4<f32>(
          sampleColor.a * sampleColor.rgb * (1.0 - computedColor.a) + computedColor.rgb,
          (1.0 - computedColor.a)*sampleColor.a + computedColor.a);`)):(u.push(`  sampleColor = traverseVals[${d}];`),u.push(`  computedColor = vec4<f32>(
          sampleColor.a * sampleColor.rgb * (1.0 - computedColor.a) + computedColor.rgb,
          (1.0 - computedColor.a)*sampleColor.a + computedColor.a);`));l=St.substitute(l,"//VTK::Volume::CompositeCalls",c).result,l=St.substitute(l,"//VTK::Volume::TraverseCalls",u).result,l=St.substitute(l,"//VTK::Volume::TraverseDec",[`var<private> traverseVals: array<vec4<f32>,${e.volumes.length}>;`]).result;let f=!1;for(let d=0;d<e.volumes.length;d++){const p=e.volumes[d].getRenderable().getMapper().getBlendMode();p===Ni.COMPOSITE_BLEND?f=!0:p===Ni.MAXIMUM_INTENSITY_BLEND?l=St.substitute(l,"//VTK::Volume::Loop",[`    traverseMax(volTexture${d}, ${d}, ${d}, rayLengthSC, minPosSC, rayStepSC);`,`    computedColor = traverseVals[${d}];`,"//VTK::Volume::Loop"]).result:p===Ni.MINIMUM_INTENSITY_BLEND?l=St.substitute(l,"//VTK::Volume::Loop",[`    traverseMin(volTexture${d}, ${d}, ${d}, rayLengthSC, minPosSC, rayStepSC);`,`    computedColor = traverseVals[${d}];`,"//VTK::Volume::Loop"]).result:p===Ni.AVERAGE_INTENSITY_BLEND?l=St.substitute(l,"//VTK::Volume::Loop",[`    traverseAverage(volTexture${d}, ${d}, ${d}, rayLengthSC, minPosSC, rayStepSC);`,`    computedColor = traverseVals[${d}];`,"//VTK::Volume::Loop"]).result:p===Ni.ADDITIVE_INTENSITY_BLEND&&(l=St.substitute(l,"//VTK::Volume::Loop",[`    traverseAdditive(volTexture${d}, ${d}, ${d}, rayLengthSC, minPosSC, rayStepSC);`,`    computedColor = traverseVals[${d}];`,"//VTK::Volume::Loop"]).result)}f&&(l=St.substitute(l,"//VTK::Volume::Loop",["    computedColor = composite(rayLengthSC, minPosSC, rayStepSC);"]).result),i.setCode(l)},e.shaderReplacements.set("replaceShaderVolume",t.replaceShaderVolume),t.updateLUTImage=a=>{let s=t.getMTime();for(let f=0;f<e.volumes.length;f++){const d=e.volumes[f].getRenderable(),p=d.getMapper().getInputData();s=Math.max(s,d.getMTime(),p.getMTime())}if(s<e.lutBuildTime.getMTime())return;e.numRows=0,e.rowStarts=[];for(let f=0;f<e.volumes.length;f++){e.rowStarts.push(e.numRows);const p=e.volumes[f].getRenderable(),h=p.getMapper(),g=p.getProperty(),y=h.getInputData(),b=(y.getPointData()&&y.getPointData().getScalars()).getNumberOfComponents(),S=g.getIndependentComponents()?b:1;e.numRows+=S}const o=new Uint8ClampedArray(e.numRows*2*e.rowLength*4),i=new Float32Array(e.numRows*2*e.rowLength);let l=0;const c=new Float32Array(e.rowLength*3),u=e.rowLength;for(let f=0;f<e.volumes.length;f++){const p=e.volumes[f].getRenderable(),h=p.getMapper(),g=p.getProperty(),y=h.getInputData(),b=(y.getPointData()&&y.getPointData().getScalars()).getNumberOfComponents(),S=g.getIndependentComponents()?b:1;for(let T=0;T<S;++T){const w=g.getRGBTransferFunction(T),x=w.getRange();w.getTable(x[0],x[1],u,c,1);let E=l*u*4;for(let D=0;D<u;++D){o[E+D*4]=255*c[D*3],o[E+D*4+1]=255*c[D*3+1],o[E+D*4+2]=255*c[D*3+2],o[E+D*4+3]=255;for(let I=0;I<4;I++)o[E+(u+D)*4+I]=o[E+D*4+I]}const O=g.getScalarOpacity(T),k=e.sampleDist/g.getScalarOpacityUnitDistance(T),M=O.getRange();O.getTable(M[0],M[1],u,c,1),E=l*u;for(let D=0;D<u;++D)i[E+D]=1-(1-c[D])**k,i[E+D+u]=i[E+D];l+=2}}{const f={nativeArray:o,width:e.rowLength,height:e.numRows*2,depth:1,format:"rgba8unorm"},p=a.getTextureManager().getTexture(f).createView("tfunTexture");e.textureViews[2]=p}{const f={nativeArray:i,width:e.rowLength,height:e.numRows*2,depth:1,format:"r16float"},p=a.getTextureManager().getTexture(f).createView("ofunTexture");e.textureViews[3]=p}e.lutBuildTime.modified()},t.updateSSBO=a=>{let s=Math.max(t.getMTime(),e.WebGPURenderer.getStabilizedTime());for(let w=0;w<e.volumes.length;w++){const x=e.volumes[w].getRenderable(),E=x.getMapper(),O=E.getInputData();s=Math.max(s,x.getMTime(),O.getMTime(),E.getMTime())}if(s<e.SSBO.getSendTime())return;const o=e.WebGPURenderer.getStabilizedCenterByReference();e.SSBO.clearData(),e.SSBO.setNumberOfInstances(e.volumes.length);const i=new Float64Array(e.volumes.length*16),l=new Float64Array(e.volumes.length*16),c=new Float64Array(e.volumes.length*4),u=new Float64Array(e.volumes.length*4),f=new Float64Array(e.volumes.length*4),d=new Float64Array(e.volumes.length*4);for(let w=0;w<e.volumes.length;w++){const E=e.volumes[w].getRenderable(),O=E.getMapper(),k=O.getInputData();ct(Fr),Rn(Fr,Fr,o);const M=E.getMatrix();$t(Bo,M),An(Bo,Bo),Ut(Fr,Bo,Fr);const D=k.getWorldToIndex();Ut(Fr,D,Fr);const I=k.getDimensions();ct(Bo),so(Bo,Bo,[1/I[0],1/I[1],1/I[2]]),Ut(Fr,Bo,Fr);for(let N=0;N<16;N++)i[w*16+N]=Fr[N];An(Fr,Fr);for(let N=0;N<4;N++)l[w*16+N*4]=Fr[N*4],l[w*16+N*4+1]=Fr[N*4+1],l[w*16+N*4+2]=Fr[N*4+2],l[w*16+N*4+3]=0;c[w*4]=1/I[0],c[w*4+1]=1/I[1],c[w*4+2]=1/I[2],c[w*4+3]=1,u[w*4]=E.getProperty().getShade()?1:0;const B=k.getSpacing();f[w*4]=B[0],f[w*4+1]=B[1],f[w*4+2]=B[2],f[w*4+3]=1;const F=e.textureViews[w+4].getTexture().getScale(),$=O.getIpScalarRange();d[w*4]=$[0]/F,d[w*4+1]=$[1]/F,d[w*4+2]=O.getFilterMode()}e.SSBO.addEntry("SCTCMatrix","mat4x4<f32>"),e.SSBO.addEntry("planeNormals","mat4x4<f32>"),e.SSBO.addEntry("shade","vec4<f32>"),e.SSBO.addEntry("tstep","vec4<f32>"),e.SSBO.addEntry("spacing","vec4<f32>"),e.SSBO.addEntry("ipScalarRange","vec4<f32>"),e.SSBO.setAllInstancesFromArray("SCTCMatrix",i),e.SSBO.setAllInstancesFromArray("planeNormals",l),e.SSBO.setAllInstancesFromArray("shade",u),e.SSBO.setAllInstancesFromArray("tstep",c),e.SSBO.setAllInstancesFromArray("spacing",f),e.SSBO.setAllInstancesFromArray("ipScalarRange",d),e.SSBO.send(a),e.componentSSBO.clearData(),e.componentSSBO.setNumberOfInstances(e.numRows);const p=new Float64Array(e.numRows),h=new Float64Array(e.numRows),g=new Float64Array(e.numRows),y=new Float64Array(e.numRows),m=new Float64Array(e.numRows),b=new Float64Array(e.numRows),C=new Float64Array(e.numRows),S=new Float64Array(e.numRows);let T=0;for(let w=0;w<e.volumes.length;w++){const E=e.volumes[w].getRenderable(),O=E.getMapper(),k=E.getProperty(),M=O.getInputData(),I=(M.getPointData()&&M.getPointData().getScalars()).getNumberOfComponents(),B=k.getIndependentComponents(),F=e.textureViews[w+4].getTexture().getFormat(),$=pr.getDetailsFromTextureFormat(F),N=$.elementSize===2&&$.sampleType==="float",W={scale:[255],offset:[0]};N&&(W.scale[0]=1);for(let _=0;_<I;_++){const L=B?_:0,G=W.scale[_],Y=k.getScalarOpacity(L).getRange(),te=G/(Y[1]-Y[0]),ve=(W.offset[_]-Y[0])/(Y[1]-Y[0]);y[T]=ve,g[T]=te;const ie=k.getRGBTransferFunction(L).getRange();if(h[T]=(W.offset[_]-ie[0])/(ie[1]-ie[0]),p[T]=G/(ie[1]-ie[0]),k.getUseGradientOpacity(L)){const be=k.getGradientOpacityMinimumOpacity(L),ge=k.getGradientOpacityMaximumOpacity(L);m[T]=be,b[T]=ge;const Se=[k.getGradientOpacityMinimumValue(L),k.getGradientOpacityMaximumValue(L)];S[T]=G*(ge-be)/(Se[1]-Se[0]),C[T]=-Se[0]*(ge-be)/(Se[1]-Se[0])+be}else m[T]=1,b[T]=1,S[T]=0,C[T]=1;T++}}e.componentSSBO.addEntry("cScale","f32"),e.componentSSBO.addEntry("cShift","f32"),e.componentSSBO.addEntry("oScale","f32"),e.componentSSBO.addEntry("oShift","f32"),e.componentSSBO.addEntry("goShift","f32"),e.componentSSBO.addEntry("goScale","f32"),e.componentSSBO.addEntry("gomin","f32"),e.componentSSBO.addEntry("gomax","f32"),e.componentSSBO.setAllInstancesFromArray("cScale",p),e.componentSSBO.setAllInstancesFromArray("cShift",h),e.componentSSBO.setAllInstancesFromArray("oScale",g),e.componentSSBO.setAllInstancesFromArray("oShift",y),e.componentSSBO.setAllInstancesFromArray("goScale",S),e.componentSSBO.setAllInstancesFromArray("goShift",C),e.componentSSBO.setAllInstancesFromArray("gomin",m),e.componentSSBO.setAllInstancesFromArray("gomax",b),e.componentSSBO.send(a)};const n=t.updateBuffers;t.updateBuffers=()=>{n();let a=e.volumes[0].getRenderable().getMapper().getSampleDistance();for(let s=0;s<e.volumes.length;s++){const l=e.volumes[s].getRenderable().getMapper().getSampleDistance();l<a&&(a=l)}e.sampleDist!==a&&(e.sampleDist=a,e.UBO.setValue("SampleDistance",a),e.UBO.sendIfNeeded(e.device));for(let s=0;s<e.volumes.length;s++){const c=e.volumes[s].getRenderable().getMapper().getInputData(),u=e.device.getTextureManager().getTextureForImageData(c);if(!e.textureViews[s+4]||e.textureViews[s+4].getTexture()!==u){const f=u.createView(`volTexture${s}`);e.textureViews[s+4]=f}}if(e.volumes.length<e.lastVolumeLength)for(let s=e.volumes.length;s<e.lastVolumeLength;s++)e.textureViews.pop();e.lastVolumeLength=e.volumes.length,t.updateLUTImage(e.device),t.updateSSBO(e.device),e.clampSampler||(e.clampSampler=fv.newInstance({label:"clampSampler"}),e.clampSampler.create(e.device,{minFilter:"linear",magFilter:"linear"}))},t.computePipelineHash=()=>{e.pipelineHash="volfsq";for(let a=0;a<e.volumes.length;a++){const s=e.volumes[a].getRenderable().getMapper().getBlendMode();e.pipelineHash+=`${s}`}},t.setVolumes=a=>{if(!e.volumes||e.volumes.length!==a.length){e.volumes=[...a],t.modified();return}for(let s=0;s<a.length;s++)if(a[s]!==e.volumes[s]){e.volumes=[...a],t.modified();return}};const r=t.getBindables;t.getBindables=()=>{const a=r();return a.push(e.componentSSBO),a.push(e.clampSampler),a}}const pVe={volumes:null,rowLength:1024,lastVolumeLength:0};function T$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,pVe,n),Sl.extend(t,e,n),e.fragmentShaderTemplate=fVe,e.UBO=ei.newInstance({label:"mapperUBO"}),e.UBO.addEntry("SampleDistance","f32"),e.SSBO=uh.newInstance({label:"volumeSSBO"}),e.componentSSBO=uh.newInstance({label:"componentSSBO"}),e.lutBuildTime={},A.obj(e.lutBuildTime,{mtime:0}),dVe(t,e)}const gVe=A.newInstance(T$,"vtkWebGPUVolumePassFSQ");var hVe={newInstance:gVe,extend:T$};const{Representation:vVe}=vo,{BufferUsage:Sk,PrimitiveTypes:yVe}=Ls,Ty=[[0,4,6],[0,6,2],[1,3,7],[1,7,5],[0,5,4],[0,1,5],[2,6,7],[2,7,3],[0,3,1],[0,2,3],[4,5,7],[4,7,6]],mVe=`
//VTK::Renderer::Dec

//VTK::Select::Dec

//VTK::VolumePass::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : fragmentOutput;

  //VTK::Select::Impl

  //VTK::TCoord::Impl

  //VTK::VolumePass::Impl

  // use the maximum (closest) of the current value and the zbuffer
  // the blend func will then take the min to find the farthest stop value
  var stopval: f32 = max(input.fragPos.z, textureLoad(opaquePassDepthTexture, vec2<i32>(i32(input.fragPos.x), i32(input.fragPos.y)), 0));

  //VTK::RenderEncoder::Impl
  return output;
}
`,CVe=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var computedColor: vec4<f32> = textureSample(volumePassColorTexture,
    volumePassColorTextureSampler, mapperUBO.tscale*input.tcoordVS);

  //VTK::RenderEncoder::Impl
  return output;
}
`;function SVe(t,e){e.classHierarchy.push("vtkWebGPUVolumePass"),t.initialize=n=>{e._clearEncoder||t.createClearEncoder(n),e._mergeEncoder||t.createMergeEncoder(n),e._copyEncoder||t.createCopyEncoder(n),e._depthRangeEncoder||t.createDepthRangeEncoder(n),e.fullScreenQuad||(e.fullScreenQuad=hVe.newInstance(),e.fullScreenQuad.setDevice(n.getDevice()),e.fullScreenQuad.setTextureViews([...e._depthRangeEncoder.getColorTextureViews()])),e._volumeCopyQuad||(e._volumeCopyQuad=Sl.newInstance(),e._volumeCopyQuad.setPipelineHash("volpassfsq"),e._volumeCopyQuad.setDevice(n.getDevice()),e._volumeCopyQuad.setFragmentShaderTemplate(CVe),e._copyUBO=ei.newInstance({label:"mapperUBO"}),e._copyUBO.addEntry("tscale","vec2<f32>"),e._volumeCopyQuad.setUBO(e._copyUBO),e._volumeCopyQuad.setTextureViews([e._colorTextureView]))},t.traverse=(n,r)=>{if(e.deleted)return;e._currentParent=r,t.initialize(r),t.computeTiming(r),t.renderDepthBounds(n,r),e._firstGroup=!0;const a=r.getDevice(),s=a.getHandle().limits.maxSampledTexturesPerShaderStage-4;if(e.volumes.length>s){const o=n.getRenderable().getActiveCamera().getPosition(),i=[];for(let f=0;f<e.volumes.length;f++){const d=e.volumes[f].getRenderable().getBounds(),p=[.5*(d[1]+d[0]),.5*(d[3]+d[2]),.5*(d[5]+d[4])];i[f]=qr(p,o)}const l=[...Array(e.volumes.length).keys()];l.sort((f,d)=>i[d]-i[f]);let c=[],u=l.length%s;for(let f=0;f<l.length;f++)c.push(e.volumes[l[f]]),c.length>=u&&(t.rayCastPass(r,n,c),c=[],u=s,e._firstGroup=!1)}else t.rayCastPass(r,n,e.volumes);if(e._volumeCopyQuad.setWebGPURenderer(n),e._useSmallViewport){const o=e._colorTextureView.getTexture().getWidth(),i=e._colorTextureView.getTexture().getHeight();e._copyUBO.setArray("tscale",[e._smallViewportWidth/o,e._smallViewportHeight/i])}else e._copyUBO.setArray("tscale",[1,1]);e._copyUBO.sendIfNeeded(a),e._copyEncoder.setColorTextureView(0,e.colorTextureView),e._copyEncoder.attachTextureViews(),e._copyEncoder.begin(r.getCommandEncoder()),n.scissorAndViewport(e._copyEncoder),e._volumeCopyQuad.prepareAndDraw(e._copyEncoder),e._copyEncoder.end()},t.delete=A.chain(()=>{e._animationRateSubscription&&(e._animationRateSubscription.unsubscribe(),e._animationRateSubscription=null)},t.delete),t.computeTiming=n=>{const r=n.getRenderable().getInteractor();if(e._lastScale==null){const a=e.volumes[0].getRenderable().getMapper();e._lastScale=a.getInitialInteractionScale()||1}e._useSmallViewport=!1,r.isAnimating()&&e._lastScale>1.5&&(e._useSmallViewport=!0),e._colorTexture.resize(n.getCanvas().width,n.getCanvas().height),e._animationRateSubscription||(e._animationRateSubscription=r.onAnimationFrameRateUpdate(()=>{const a=e.volumes[0].getRenderable().getMapper();if(a.getAutoAdjustSampleDistances()){const s=r.getRecentAnimationFrameRate(),o=e._lastScale*r.getDesiredUpdateRate()/s;e._lastScale=o,e._lastScale>400&&(e._lastScale=400)}else e._lastScale=a.getImageSampleDistance()*a.getImageSampleDistance();e._lastScale<1.5&&(e._lastScale=1.5)}))},t.rayCastPass=(n,r,a)=>{const s=e._firstGroup?e._clearEncoder:e._mergeEncoder;s.attachTextureViews(),s.begin(n.getCommandEncoder());let o=e._colorTextureView.getTexture().getWidth(),i=e._colorTextureView.getTexture().getHeight();if(e._useSmallViewport){const l=n.getCanvas(),c=1/Math.sqrt(e._lastScale);e._smallViewportWidth=Math.ceil(c*l.width),e._smallViewportHeight=Math.ceil(c*l.height),o=e._smallViewportWidth,i=e._smallViewportHeight}s.getHandle().setViewport(0,0,o,i,0,1),s.getHandle().setScissorRect(0,0,o,i),e.fullScreenQuad.setWebGPURenderer(r),e.fullScreenQuad.setVolumes(a),e.fullScreenQuad.prepareAndDraw(s),s.end()},t.renderDepthBounds=(n,r)=>{t.updateDepthPolyData(n);const a=e._boundsPoly,s=a.getPoints(),o=a.getPolys();let i={hash:`vp${o.getMTime()}`,usage:Sk.Index,cells:o,numberOfPoints:s.getNumberOfPoints(),primitiveType:yVe.Triangles,representation:vVe.SURFACE};const l=r.getDevice().getBufferManager().getBuffer(i);e._mapper.getVertexInput().setIndexBuffer(l),i={usage:Sk.PointArray,format:"float32x4",hash:`vp${s.getMTime()}${o.getMTime()}`,dataArray:s,indexBuffer:l,packExtra:!0};const c=r.getDevice().getBufferManager().getBuffer(i);e._mapper.getVertexInput().addBuffer(c,["vertexBC"]),e._mapper.setNumberOfVertices(c.getSizeInBytes()/c.getStrideInBytes()),t.drawDepthRange(n,r)},t.updateDepthPolyData=n=>{let r=!1;for(let u=0;u<e.volumes.length;u++){const f=e.volumes[u].getMTime();(!e._lastMTimes[u]||f!==e._lastMTimes[u])&&(r=!0,e._lastMTimes[u]=f)}const a=n.getStabilizedTime();if((e._lastMTimes.length<=e.volumes.length||a!==e._lastMTimes[e.volumes.length])&&(r=!0,e._lastMTimes[e.volumes.length]=a),!r)return;const s=n.getStabilizedCenterByReference(),o=e.volumes.length*8,i=new Float64Array(o*3),l=e.volumes.length*12,c=new Uint16Array(l*4);for(let u=0;u<e.volumes.length;u++){e.volumes[u].getBoundingCubePoints(i,u*24);let f=u*12*4;const d=u*8;for(let p=0;p<12;p++)c[f++]=3,c[f++]=d+Ty[p][0],c[f++]=d+Ty[p][1],c[f++]=d+Ty[p][2]}for(let u=0;u<i.length;u+=3)i[u]-=s[0],i[u+1]-=s[1],i[u+2]-=s[2];e._boundsPoly.getPoints().setData(i,3),e._boundsPoly.getPoints().modified(),e._boundsPoly.getPolys().setData(c,1),e._boundsPoly.getPolys().modified(),e._boundsPoly.modified()},t.drawDepthRange=(n,r)=>{e._depthRangeTexture.resizeToMatch(e.colorTextureView.getTexture()),e._depthRangeTexture2.resizeToMatch(e.colorTextureView.getTexture()),e._depthRangeEncoder.attachTextureViews(),t.setCurrentOperation("volumeDepthRangePass"),n.setRenderEncoder(e._depthRangeEncoder),n.volumeDepthRangePass(!0),e._mapper.setWebGPURenderer(n),e._mapper.prepareToDraw(e._depthRangeEncoder),e._mapper.registerDrawCallback(e._depthRangeEncoder),n.volumeDepthRangePass(!1)},t.createDepthRangeEncoder=n=>{const r=n.getDevice();e._depthRangeEncoder=Qs.newInstance({label:"VolumePass DepthRange"}),e._depthRangeEncoder.setPipelineHash("volr"),e._depthRangeEncoder.setReplaceShaderCodeFunction(o=>{const i=o.getShaderDescription("fragment");i.addOutput("vec4<f32>","outColor1"),i.addOutput("vec4<f32>","outColor2");let l=i.getCode();l=St.substitute(l,"//VTK::RenderEncoder::Impl",["output.outColor1 = vec4<f32>(input.fragPos.z, 0.0, 0.0, 0.0);","output.outColor2 = vec4<f32>(stopval, 0.0, 0.0, 0.0);"]).result,i.setCode(l)}),e._depthRangeEncoder.setDescription({colorAttachments:[{view:null,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"},{view:null,clearValue:[1,1,1,1],loadOp:"clear",storeOp:"store"}]}),e._depthRangeEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"r16float",blend:{color:{srcFactor:"one",dstFactor:"one",operation:"max"},alpha:{srcfactor:"one",dstFactor:"one",operation:"max"}}},{format:"r16float",blend:{color:{srcFactor:"one",dstFactor:"one",operation:"min"},alpha:{srcfactor:"one",dstFactor:"one",operation:"min"}}}]}}),e._depthRangeTexture=ks.newInstance({label:"volumePassMaxDepth"}),e._depthRangeTexture.create(r,{width:n.getCanvas().width,height:n.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const a=e._depthRangeTexture.createView("maxTexture");e._depthRangeEncoder.setColorTextureView(0,a),e._depthRangeTexture2=ks.newInstance({label:"volumePassDepthMin"}),e._depthRangeTexture2.create(r,{width:n.getCanvas().width,height:n.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const s=e._depthRangeTexture2.createView("minTexture");e._depthRangeEncoder.setColorTextureView(1,s),e._mapper.setDevice(n.getDevice()),e._mapper.setTextureViews([e.depthTextureView])},t.createClearEncoder=n=>{e._colorTexture=ks.newInstance({label:"volumePassColor"}),e._colorTexture.create(n.getDevice(),{width:n.getCanvas().width,height:n.getCanvas().height,format:"bgra8unorm",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC}),e._colorTextureView=e._colorTexture.createView("volumePassColorTexture"),e._colorTextureView.addSampler(n.getDevice(),{minFilter:"linear",magFilter:"linear"}),e._clearEncoder=Qs.newInstance({label:"VolumePass Clear"}),e._clearEncoder.setColorTextureView(0,e._colorTextureView),e._clearEncoder.setDescription({colorAttachments:[{view:null,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"}]}),e._clearEncoder.setPipelineHash("volpf"),e._clearEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"bgra8unorm",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},t.createCopyEncoder=n=>{e._copyEncoder=Qs.newInstance({label:"volumePassCopy"}),e._copyEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),e._copyEncoder.setPipelineHash("volcopypf"),e._copyEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"one",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},t.createMergeEncoder=n=>{e._mergeEncoder=Qs.newInstance({label:"volumePassMerge"}),e._mergeEncoder.setColorTextureView(0,e._colorTextureView),e._mergeEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),e._mergeEncoder.setReplaceShaderCodeFunction(r=>{const a=r.getShaderDescription("fragment");a.addOutput("vec4<f32>","outColor");let s=a.getCode();s=St.substitute(s,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<f32>(computedColor.rgb, computedColor.a);"]).result,a.setCode(s)}),e._mergeEncoder.setPipelineHash("volpf"),e._mergeEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"bgra8unorm",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},t.setVolumes=n=>{if(!e.volumes||e.volumes.length!==n.length){e.volumes=[...n],t.modified();return}for(let r=0;r<n.length;r++)if(n[r]!==e.volumes[r]){e.volumes=[...n],t.modified();return}}}const bVe={colorTextureView:null,depthTextureView:null,volumes:null};function x$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bVe,n),xo.extend(t,e,n),e._mapper=VC.newInstance(),e._mapper.setFragmentShaderTemplate(mVe),e._mapper.getShaderReplacements().set("replaceShaderVolumePass",(r,a,s)=>{a.getShaderDescription("fragment").addBuiltinInput("vec4<f32>","@builtin(position) fragPos")}),e._boundsPoly=or.newInstance(),e._lastMTimes=[],A.setGet(t,e,["colorTextureView","depthTextureView"]),SVe(t,e)}const wVe=A.newInstance(x$,"vtkWebGPUVolumePass");var TVe={newInstance:wVe,extend:x$};const xVe=`
//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var computedColor: vec4<f32> = clamp(textureSampleLevel(opaquePassColorTexture, finalPassSampler, input.tcoordVS, 0.0),vec4<f32>(0.0),vec4<f32>(1.0));

  //VTK::RenderEncoder::Impl
  return output;
}
`;function EVe(t,e){e.classHierarchy.push("vtkForwardPass"),t.traverse=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(e.deleted)return;e._currentParent=r,t.setCurrentOperation("buildPass"),n.traverse(t),e.opaquePass||(e.opaquePass=sVe.newInstance());const a=n.getRenderable().getNumberOfLayers(),s=n.getChildren();for(let o=0;o<a;o++)for(let i=0;i<s.length;i++){const l=s[i],c=n.getRenderable().getRenderers()[i];c.getDraw()&&c.getLayer()===o&&(e.opaqueActorCount=0,e.translucentActorCount=0,e.volumes=[],t.setCurrentOperation("queryPass"),l.traverse(t),t.setCurrentOperation("cameraPass"),l.traverse(t),e.opaquePass.traverse(l,n),e.translucentActorCount>0&&(e.translucentPass||(e.translucentPass=uVe.newInstance()),e.translucentPass.setColorTextureView(e.opaquePass.getColorTextureView()),e.translucentPass.setDepthTextureView(e.opaquePass.getDepthTextureView()),e.translucentPass.traverse(l,n)),e.volumes.length>0&&(e.volumePass||(e.volumePass=TVe.newInstance()),e.volumePass.setColorTextureView(e.opaquePass.getColorTextureView()),e.volumePass.setDepthTextureView(e.opaquePass.getDepthTextureView()),e.volumePass.setVolumes(e.volumes),e.volumePass.traverse(l,n)),t.finalPass(n,l))}},t.finalPass=(n,r)=>{e._finalBlitEncoder||t.createFinalBlitEncoder(n),e._finalBlitOutputTextureView.createFromTextureHandle(n.getCurrentTexture(),{depth:1,format:n.getPresentationFormat()}),e._finalBlitEncoder.attachTextureViews(),e._finalBlitEncoder.begin(n.getCommandEncoder()),r.scissorAndViewport(e._finalBlitEncoder),e._fullScreenQuad.prepareAndDraw(e._finalBlitEncoder),e._finalBlitEncoder.end()},t.createFinalBlitEncoder=n=>{e._finalBlitEncoder=Qs.newInstance({label:"forwardPassBlit"}),e._finalBlitEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),e._finalBlitEncoder.setPipelineHash("fpf"),e._finalBlitEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:n.getPresentationFormat(),blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}}),e._fsqSampler=fv.newInstance({label:"finalPassSampler"}),e._fsqSampler.create(n.getDevice(),{minFilter:"linear",magFilter:"linear"}),e._fullScreenQuad=Sl.newInstance(),e._fullScreenQuad.setDevice(n.getDevice()),e._fullScreenQuad.setPipelineHash("fpfsq"),e._fullScreenQuad.setTextureViews([e.opaquePass.getColorTextureView()]),e._fullScreenQuad.setAdditionalBindables([e._fsqSampler]),e._fullScreenQuad.setFragmentShaderTemplate(xVe),e._finalBlitOutputTextureView=tV.newInstance(),e._finalBlitEncoder.setColorTextureView(0,e._finalBlitOutputTextureView)},t.incrementOpaqueActorCount=()=>e.opaqueActorCount++,t.incrementTranslucentActorCount=()=>e.translucentActorCount++,t.addVolume=n=>{e.volumes.push(n)}}const kVe={opaqueActorCount:0,translucentActorCount:0,volumes:null,opaqueRenderEncoder:null,translucentPass:null,volumePass:null};function E$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,kVe,n),xo.extend(t,e,n),A.setGet(t,e,["opaquePass","translucentPass","volumePass"]),EVe(t,e)}const OVe=A.newInstance(E$,"vtkForwardPass");var MVe={newInstance:OVe,extend:E$};const{VtkDataTypes:Li}=Tt;function RVe(t,e){e.classHierarchy.push("vtkWebGPUTextureManager");function n(a){if(a.imageData){a.dataArray=a.imageData.getPointData().getScalars(),a.time=a.dataArray.getMTime(),a.nativeArray=a.dataArray.getData();const s=a.imageData.getDimensions();switch(a.width=s[0],a.height=s[1],a.depth=s[2],a.dataArray.getNumberOfComponents()){case 1:a.format="r";break;case 2:a.format="rg";break;case 3:case 4:default:a.format="rgba";break}switch(a.dataArray.getDataType()){case Li.UNSIGNED_CHAR:a.format+="8unorm";break;case Li.FLOAT:case Li.UNSIGNED_INT:case Li.INT:case Li.DOUBLE:case Li.UNSIGNED_SHORT:case Li.SHORT:default:a.format+="16float";break}}a.image&&(a.width=a.image.width,a.height=a.image.height,a.depth=1,a.format="rgba8unorm"),a.jsImageData&&(a.width=a.jsImageData.width,a.height=a.jsImageData.height,a.depth=1,a.format="rgba8unorm",a.flip=!0,a.nativeArray=a.jsImageData.data),a.canvas&&(a.width=a.canvas.width,a.height=a.canvas.height,a.depth=1,a.format="rgba8unorm",a.flip=!0,a.usage=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT)}function r(a){const s=ks.newInstance();return s.create(e.device,{width:a.width,height:a.height,depth:a.depth,format:a.format,usage:a.usage,mipLevel:a.mipLevel}),(a.nativeArray||a.image||a.canvas)&&s.writeImageData(a),s}t.getTexture=a=>a.hash?e.device.getCachedObject(a.hash,r,a):r(a),t.getTextureForImageData=a=>{const s={time:a.getMTime()};return s.imageData=a,n(s),s.hash=s.time+s.format+s.mipLevel,e.device.getTextureManager().getTexture(s)},t.getTextureForVTKTexture=a=>{const s={time:a.getMTime()};return a.getInputData()?s.imageData=a.getInputData():a.getImage()?s.image=a.getImage():a.getJsImageData()?s.jsImageData=a.getJsImageData():a.getCanvas()&&(s.canvas=a.getCanvas()),n(s),s.mipLevel=a.getMipLevel(),s.hash=s.time+s.format+s.mipLevel,e.device.getTextureManager().getTexture(s)}}const _Ve={handle:null,device:null};function k$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_Ve,n),A.obj(t,e),A.setGet(t,e,["device"]),RVe(t,e)}const VVe=A.newInstance(k$);var DVe={newInstance:VVe,extend:k$};class LVe extends Map{constructor(){super(),this.registry=new FinalizationRegistry(e=>{const n=super.get(e);n&&n.deref&&n.deref()===void 0&&super.delete(e)})}getValue(e){const n=super.get(e);if(n){const r=n.deref();if(r!==void 0)return r;super.delete(e)}}setValue(e,n){let r;return n&&typeof n=="object"&&(r=new WeakRef(n),this.registry.register(n,e),super.set(e,r)),r}}function NVe(t,e){e.classHierarchy.push("vtkWebGPUDevice"),t.initialize=n=>{e.handle=n},t.createCommandEncoder=()=>e.handle.createCommandEncoder(),t.submitCommandEncoder=n=>{e.handle.queue.submit([n.finish()])},t.getShaderModule=n=>e.shaderCache.getShaderModule(n),t.getBindGroupLayout=n=>{if(!n.entries)return null;for(let s=0;s<n.entries.length;s++){const o=n.entries[s];o.binding=o.binding||0,o.visibility=o.visibility||GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT}const r=JSON.stringify(n);for(let s=0;s<e.bindGroupLayouts.length;s++)if(e.bindGroupLayouts[s].sval===r)return e.bindGroupLayouts[s].layout;const a=e.handle.createBindGroupLayout(n);return e.bindGroupLayouts.push({sval:r,layout:a}),a},t.getBindGroupLayoutDescription=n=>{for(let r=0;r<e.bindGroupLayouts.length;r++)if(e.bindGroupLayouts[r].layout===n)return e.bindGroupLayouts[r].sval;return vtkErrorMacro("layout not found"),console.trace(),null},t.getPipeline=n=>n in e.pipelines?e.pipelines[n]:null,t.createPipeline=(n,r)=>{r.initialize(t,n),e.pipelines[n]=r},t.onSubmittedWorkDone=()=>e.handle.queue.onSubmittedWorkDone(),t.hasCachedObject=n=>e.objectCache.getValue(n),t.getCachedObject=function(n,r){if(!n)return vtkErrorMacro("attempt to cache an object without a hash"),null;const a=e.objectCache.getValue(n);if(a)return a;for(var s=arguments.length,o=new Array(s>2?s-2:0),i=2;i<s;i++)o[i-2]=arguments[i];const l=r(...o);return e.objectCache.setValue(n,l),l}}const BVe={handle:null,pipelines:null,shaderCache:null,bindGroupLayouts:null,bufferManager:null,textureManager:null};function O$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,BVe,n),dn(t,e),Dn(t,e,["handle"]),wr(t,e,["bufferManager","shaderCache","textureManager"]),e.objectCache=new LVe,e.shaderCache=St.newInstance(),e.shaderCache.setDevice(t),e.bindGroupLayouts=[],e.bufferManager=Ls.newInstance(),e.bufferManager.setDevice(t),e.textureManager=DVe.newInstance(),e.textureManager.setDevice(t),e.pipelines={},NVe(t,e)}const FVe=Ft(O$,"vtkWebGPUDevice");var $Ve={newInstance:FVe,extend:O$};function UVe(t,e){e.classHierarchy.push("vtkWebGPUHardwareSelectionPass"),t.traverse=(n,r)=>{if(e.deleted)return;e._currentParent=null,t.setCurrentOperation("buildPass"),n.traverse(t);const a=n.getDevice();if(e.selectionRenderEncoder)e.colorTexture.resize(n.getCanvas().width,n.getCanvas().height),e.depthTexture.resizeToMatch(e.colorTexture);else{t.createRenderEncoder(),e.colorTexture=ks.newInstance({label:"hardwareSelectorColor"}),e.colorTexture.create(a,{width:n.getCanvas().width,height:n.getCanvas().height,format:"rgba32uint",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC});const s=e.colorTexture.createView("hardwareSelectColorTexture");e.selectionRenderEncoder.setColorTextureView(0,s),e.depthTexture=ks.newInstance({label:"hardwareSelectorDepth"}),e.depthTexture.create(a,{width:n.getCanvas().width,height:n.getCanvas().height,format:"depth32float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC});const o=e.depthTexture.createView("hardwareSelectDepthTexture");e.selectionRenderEncoder.setDepthTextureView(o)}e.selectionRenderEncoder.attachTextureViews(),r.setRenderEncoder(e.selectionRenderEncoder),t.setCurrentOperation("cameraPass"),r.traverse(t),t.setCurrentOperation("opaquePass"),r.traverse(t)},t.createRenderEncoder=()=>{e.selectionRenderEncoder=Qs.newInstance({label:"HardwareSelectionPass"}),e.selectionRenderEncoder.setPipelineHash("sel"),e.selectionRenderEncoder.setReplaceShaderCodeFunction(r=>{const a=r.getShaderDescription("fragment");a.addOutput("vec4<u32>","outColor");let s=a.getCode();s=St.substitute(s,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<u32>(mapperUBO.PropID, compositeID, 0u, 0u);"]).result,a.setCode(s)});const n=e.selectionRenderEncoder.getDescription();n.colorAttachments[0].clearValue=[0,0,0,0],e.selectionRenderEncoder.setPipelineSettings({primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater",format:"depth32float"},fragment:{targets:[{format:"rgba32uint",blend:void 0}]}})}}const AVe={selectionRenderEncoder:null,colorTexture:null,depthTexture:null};function M$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,AVe,n),xo.extend(t,e,n),A.get(t,e,["colorTexture","depthTexture"]),UVe(t,e)}const WVe=A.newInstance(M$,"vtkWebGPUHardwareSelectionPass");var IVe={newInstance:WVe,extend:M$};const{SelectionContent:PVe,SelectionField:bk}=cv,{FieldAssociations:wk}=Vl,{vtkErrorMacro:R$}=A;function GVe(t){return`${t.propID} ${t.compositeID}`}function Tk(t,e,n,r){const a=((n.height-e-1)*n.colorBufferWidth+t)*4+r;return n.colorValues[a]}function uc(t,e,n,r){const a=n<0?0:n;if(a===0){if(r[0]=e[0],r[1]=e[1],e[0]<0||e[0]>=t.width||e[1]<0||e[1]>=t.height)return null;const l=Tk(e[0],e[1],t,0);if(l<=0)return null;const c={};c.propID=l;let u=Tk(e[0],e[1],t,1);if((u<0||u>16777215)&&(u=0),c.compositeID=u,t.captureZValues){const f=(t.height-e[1]-1)*t.zbufferBufferWidth+e[0];c.zValue=t.depthValues[f],c.zValue=t.webGPURenderer.convertToOpenGLDepth(c.zValue),c.displayPosition=e}return c}const s=[e[0],e[1]],o=[0,0];let i=uc(t,e,0,r);if(i)return i;for(let l=1;l<a;++l){for(let c=s[1]>l?s[1]-l:0;c<=s[1]+l;++c)if(o[1]=c,s[0]>=l&&(o[0]=s[0]-l,i=uc(t,o,0,r),i)||(o[0]=s[0]+l,i=uc(t,o,0,r),i))return i;for(let c=s[0]>=l?s[0]-(l-1):0;c<=s[0]+(l-1);++c)if(o[0]=c,s[1]>=l&&(o[1]=s[1]-l,i=uc(t,o,0,r),i)||(o[1]=s[1]+l,i=uc(t,o,0,r),i))return i}return r[0]=e[0],r[1]=e[1],null}function zVe(t,e,n){const r=[];let a=0;return e.forEach((s,o)=>{const i=cv.newInstance();switch(i.setContentType(PVe.INDICES),t){case wk.FIELD_ASSOCIATION_CELLS:i.setFieldType(bk.CELL);break;case wk.FIELD_ASSOCIATION_POINTS:i.setFieldType(bk.POINT);break;default:R$("Unknown field association")}i.getProperties().propID=s.info.propID;const l=n.webGPURenderer.getPropFromID(s.info.propID);i.getProperties().prop=l.getRenderable(),i.getProperties().compositeID=s.info.compositeID,i.getProperties().pixelCount=s.pixelCount,n.captureZValues&&(i.getProperties().displayPosition=[s.info.displayPosition[0],s.info.displayPosition[1],s.info.zValue],i.getProperties().worldPosition=n.webGPURenderWindow.displayToWorld(s.info.displayPosition[0],s.info.displayPosition[1],s.info.zValue,n.renderer)),i.setSelectionList(s.attributeIDs),r[a]=i,a++}),r}function HVe(t,e,n,r,a){const s=Math.floor(e),o=Math.floor(n),i=Math.floor(r),l=Math.floor(a),c=new Map,u=[0,0];for(let f=o;f<=l;f++)for(let d=s;d<=i;d++){const h=uc(t,[d,f],0,u);if(h){const g=GVe(h);if(!c.has(g))c.set(g,{info:h,pixelCount:1,attributeIDs:[h.attributeID]});else{const y=c.get(g);y.pixelCount++,t.captureZValues&&h.zValue<y.info.zValue&&(y.info=h),y.attributeIDs.indexOf(h.attributeID)===-1&&y.attributeIDs.push(h.attributeID)}}}return zVe(t.fieldAssociation,c,t)}function KVe(t,e){e.classHierarchy.push("vtkWebGPUHardwareSelector"),t.endSelection=()=>{e.WebGPURenderer.setSelector(null)},t.getSourceDataAsync=async n=>{if(!n||!e._WebGPURenderWindow)return R$("Renderer and view must be set before calling Select."),!1;e._WebGPURenderWindow.getRenderable().preRender(),e._WebGPURenderWindow.getInitialized()||(e._WebGPURenderWindow.initialize(),await new Promise(p=>{e._WebGPURenderWindow.onInitialized(p)}));const r=e._WebGPURenderWindow.getViewNodeFor(n);if(!r)return!1;const a=r.getSuppressClear();r.setSuppressClear(!0),e._selectionPass.traverse(e._WebGPURenderWindow,r),r.setSuppressClear(a);const s=e._WebGPURenderWindow.getDevice(),o=e._selectionPass.getColorTexture(),i=e._selectionPass.getDepthTexture(),l={area:[0,0,o.getWidth()-1,o.getHeight()-1],captureZValues:e.captureZValues,fieldAssociation:e.fieldAssociation,renderer:n,webGPURenderer:r,webGPURenderWindow:e._WebGPURenderWindow,width:o.getWidth(),height:o.getHeight()};l.colorBufferWidth=16*Math.floor((l.width+15)/16),l.colorBufferSizeInBytes=l.colorBufferWidth*l.height*4*4;const c=$c.newInstance({label:"hardwareSelectColorBuffer"});c.setDevice(s),c.create(l.colorBufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);const u=e._WebGPURenderWindow.getCommandEncoder();u.copyTextureToBuffer({texture:o.getHandle()},{buffer:c.getHandle(),bytesPerRow:16*l.colorBufferWidth,rowsPerImage:l.height},{width:l.width,height:l.height,depthOrArrayLayers:1});let f;e.captureZValues&&(l.zbufferBufferWidth=64*Math.floor((l.width+63)/64),f=$c.newInstance({label:"hardwareSelectDepthBuffer"}),f.setDevice(s),l.zbufferSizeInBytes=l.height*l.zbufferBufferWidth*4,f.create(l.zbufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST),u.copyTextureToBuffer({texture:i.getHandle(),aspect:"depth-only"},{buffer:f.getHandle(),bytesPerRow:4*l.zbufferBufferWidth,rowsPerImage:l.height},{width:l.width,height:l.height,depthOrArrayLayers:1})),s.submitCommandEncoder(u);const d=c.mapAsync(GPUMapMode.READ);if(e.captureZValues){const p=f.mapAsync(GPUMapMode.READ);await Promise.all([d,p]),l.depthValues=new Float32Array(f.getMappedRange().slice()),f.unmap()}else await d;return l.colorValues=new Uint32Array(c.getMappedRange().slice()),c.unmap(),l.generateSelection=(p,h,g,y)=>HVe(l,p,h,g,y),l}}const jVe={};function _$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,jVe,n),c_.extend(t,e,n),e._selectionPass=IVe.newInstance(),A.setGet(t,e,["_WebGPURenderWindow"]),A.moveToProtected(t,e,["WebGPURenderWindow"]),KVe(t,e)}const YVe=A.newInstance(_$,"vtkWebGPUHardwareSelector");var V$={newInstance:YVe,extend:_$};const{vtkErrorMacro:xk}=A,qVe={position:"absolute",top:0,left:0,width:"100%",height:"100%"};function XVe(t,e){e.classHierarchy.push("vtkWebGPURenderWindow"),t.getViewNodeFactory=()=>e.myFactory;const n=[0,0];function r(){e.renderable&&(e.size[0]!==n[0]||e.size[1]!==n[1])&&(n[0]=e.size[0],n[1]=e.size[1],e.canvas.setAttribute("width",e.size[0]),e.canvas.setAttribute("height",e.size[1]),t.recreateSwapChain()),e.viewStream&&e.viewStream.setSize(e.size[0],e.size[1]),e.canvas.style.display=e.useOffScreen?"none":"block",e.el&&(e.el.style.cursor=e.cursorVisibility?e.cursor:"none"),e.containerSize=null}t.onModified(r),t.recreateSwapChain=()=>{e.context&&(e.context.unconfigure(),e.presentationFormat=navigator.gpu.getPreferredCanvasFormat(e.adapter),e.context.configure({device:e.device.getHandle(),format:e.presentationFormat,alphaMode:"premultiplied",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_DST,width:e.size[0],height:e.size[1]}),e._configured=!0)},t.getCurrentTexture=()=>e.context.getCurrentTexture(),t.buildPass=o=>{if(o){if(!e.renderable)return;t.prepareNodes(),t.addMissingNodes(e.renderable.getRenderersByReference()),t.removeUnusedNodes(),t.initialize()}else e.initialized&&(e._configured||t.recreateSwapChain(),e.commandEncoder=e.device.createCommandEncoder())},t.initialize=()=>{if(!e.initializing){if(e.initializing=!0,!navigator.gpu){xk("WebGPU is not enabled.");return}t.create3DContextAsync().then(()=>{e.initialized=!0,!e.deleted&&t.invokeInitialized()})}},t.setContainer=o=>{e.el&&e.el!==o&&(e.canvas.parentNode!==e.el&&xk("Error: canvas parent node does not match container"),e.el.removeChild(e.canvas),e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)),e.el!==o&&(e.el=o,e.el&&(e.el.appendChild(e.canvas),e.useBackgroundImage&&e.el.appendChild(e.bgImage)),t.modified())},t.getContainer=()=>e.el,t.getContainerSize=()=>{if(!e.containerSize&&e.el){const{width:o,height:i}=e.el.getBoundingClientRect();e.containerSize=[o,i]}return e.containerSize||e.size},t.getFramebufferSize=()=>e.size,t.create3DContextAsync=async()=>{if(e.adapter=await navigator.gpu.requestAdapter({powerPreference:"high-performance"}),!e.deleted){if(e.device=$Ve.newInstance(),e.device.initialize(await e.adapter.requestDevice()),e.deleted){e.device=null;return}e.context=e.canvas.getContext("webgpu")}},t.releaseGraphicsResources=()=>{const o=xo.newInstance();o.setCurrentOperation("Release"),o.traverse(t,null),e.adapter=null,e.device=null,e.context=null,e.initialized=!1,e.initializing=!1},t.setBackgroundImage=o=>{e.bgImage.src=o.src},t.setUseBackgroundImage=o=>{e.useBackgroundImage=o,e.useBackgroundImage&&!e.el.contains(e.bgImage)?e.el.appendChild(e.bgImage):!e.useBackgroundImage&&e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)};async function a(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.imageFormat;const i=document.createElement("canvas"),l=i.getContext("2d");i.width=e.canvas.width,i.height=e.canvas.height;const c=await t.getPixelsAsync(),u=new ImageData(c.colorValues,c.width,c.height);l.putImageData(u,0,0);const f=e.canvas.getBoundingClientRect();e.renderable.getRenderers().forEach(g=>{g.getViewProps().forEach(m=>{if(m.getContainer){const C=m.getContainer().getElementsByTagName("canvas");for(let S=0;S<C.length;S++){const T=C[S],w=T.getBoundingClientRect(),x=w.x-f.x,E=w.y-f.y;l.drawImage(T,x,E)}}})});const h=i.toDataURL(o);i.remove(),t.invokeImageReady(h)}t.captureNextImage=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",{resetCamera:i=!1,size:l=null,scale:c=1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.deleted)return null;e.imageFormat=o;const u=e.notifyStartCaptureImage;return e.notifyStartCaptureImage=!0,e._screenshot={size:l||c!==1?l||e.size.map(f=>f*c):null},new Promise((f,d)=>{const p=t.onImageReady(h=>{if(e._screenshot.size===null)e.notifyStartCaptureImage=u,p.unsubscribe(),e._screenshot.placeHolder&&(e.size=e._screenshot.originalSize,t.modified(),e._screenshot.cameras&&e._screenshot.cameras.forEach(g=>{let{restoreParamsFn:y,arg:m}=g;return y(m)}),t.traverseAllPasses(),e.el.removeChild(e._screenshot.placeHolder),e._screenshot.placeHolder.remove(),e._screenshot=null),f(h);else{const g=document.createElement("img");if(g.style=qVe,g.src=h,e._screenshot.placeHolder=e.el.appendChild(g),e.canvas.style.display="none",e._screenshot.originalSize=e.size,e.size=e._screenshot.size,e._screenshot.size=null,t.modified(),i){const y=i!==!0;e._screenshot.cameras=e.renderable.getRenderers().map(m=>{const b=m.getActiveCamera(),C=b.get("focalPoint","position","parallelScale");return{resetCameraArgs:y?{renderer:m}:void 0,resetCameraFn:y?i:m.resetCamera,restoreParamsFn:b.set,arg:JSON.parse(JSON.stringify(C))}}),e._screenshot.cameras.forEach(m=>{let{resetCameraFn:b,resetCameraArgs:C}=m;return b(C)})}t.traverseAllPasses()}})})},t.traverseAllPasses=()=>{if(!e.deleted)if(e.initialized){if(e.renderPasses)for(let o=0;o<e.renderPasses.length;++o)e.renderPasses[o].traverse(t,null);e.commandEncoder&&(e.device.submitCommandEncoder(e.commandEncoder),e.commandEncoder=null,e.notifyStartCaptureImage&&e.device.onSubmittedWorkDone().then(()=>{a()}))}else{t.initialize();const o=t.onInitialized(()=>{o.unsubscribe(),t.traverseAllPasses()})}},t.setViewStream=o=>{if(e.viewStream===o)return!1;if(e.subscription&&(e.subscription.unsubscribe(),e.subscription=null),e.viewStream=o,e.viewStream){const i=e.renderable.getRenderers()[0];i.getBackgroundByReference()[3]=0,t.setUseBackgroundImage(!0),e.subscription=e.viewStream.onImageReady(l=>t.setBackgroundImage(l.image)),e.viewStream.setSize(e.size[0],e.size[1]),e.viewStream.invalidateCache(),e.viewStream.render(),t.modified()}return!0},t.getUniquePropID=()=>e.nextPropID++,t.getPropFromID=o=>{for(let i=0;i<e.children.length;i++){const l=e.children[i].getPropFromID(o);if(l!==null)return l}return null},t.getPixelsAsync=async()=>{const o=e.device,i=e.renderPasses[0].getOpaquePass().getColorTexture(),l={width:i.getWidth(),height:i.getHeight()};l.colorBufferWidth=32*Math.floor((l.width+31)/32),l.colorBufferSizeInBytes=l.colorBufferWidth*l.height*8;const c=$c.newInstance();c.setDevice(o),c.create(l.colorBufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);const u=e.device.createCommandEncoder();u.copyTextureToBuffer({texture:i.getHandle()},{buffer:c.getHandle(),bytesPerRow:8*l.colorBufferWidth,rowsPerImage:l.height},{width:l.width,height:l.height,depthOrArrayLayers:1}),o.submitCommandEncoder(u),await c.mapAsync(GPUMapMode.READ),l.colorValues=new Uint16Array(c.getMappedRange().slice()),c.unmap();const d=new Uint8ClampedArray(l.height*l.width*4);for(let p=0;p<l.height;p++)for(let h=0;h<l.width;h++){const g=(p*l.width+h)*4,y=(p*l.colorBufferWidth+h)*4;d[g]=255*ja.fromHalf(l.colorValues[y]),d[g+1]=255*ja.fromHalf(l.colorValues[y+1]),d[g+2]=255*ja.fromHalf(l.colorValues[y+2]),d[g+3]=255*ja.fromHalf(l.colorValues[y+3])}return l.colorValues=d,l},t.createSelector=()=>{const o=V$.newInstance();return o.setWebGPURenderWindow(t),o};const s=t.setSize;t.setSize=(o,i)=>{const l=s(o,i);return l&&t.invokeWindowResizeEvent({width:o,height:i}),l},t.delete=A.chain(t.delete,t.setViewStream)}const ZVe={initialized:!1,context:null,adapter:null,device:null,canvas:null,cursorVisibility:!0,cursor:"pointer",containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1,nextPropID:1,xrSupported:!1,presentationFormat:null};function JVe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ZVe,n),e.canvas=document.createElement("canvas"),e.canvas.style.width="100%",e.bgImage=new Image,e.bgImage.style.position="absolute",e.bgImage.style.left="0",e.bgImage.style.top="0",e.bgImage.style.width="100%",e.bgImage.style.height="100%",e.bgImage.style.zIndex="-1",y$.extend(t,e,n),e.myFactory=NK.newInstance(),e.myFactory.registerOverride("vtkRenderWindow",D$),e.renderPasses[0]=MVe.newInstance(),e.selector||(e.selector=V$.newInstance(),e.selector.setWebGPURenderWindow(t)),A.event(t,e,"imageReady"),A.event(t,e,"initialized"),A.get(t,e,["commandEncoder","device","presentationFormat","useBackgroundImage","xrSupported"]),A.setGet(t,e,["initialized","context","canvas","device","renderPasses","notifyStartCaptureImage","cursor","useOffScreen"]),A.setGetArray(t,e,["size"],2),A.event(t,e,"windowResizeEvent"),XVe(t,e)}const D$=A.newInstance(JVe,"vtkWebGPURenderWindow");zb("WebGPU",D$);const QVe=h_e.extractURLParameters();function eDe(t,e){const n=t.invokeResize;delete t.invokeResize,e.renderWindow=l_e.newInstance(),e.renderer=n_e.newInstance(),e.renderWindow.addRenderer(e.renderer),e._apiSpecificRenderWindow=e.renderWindow.newAPISpecificView(QVe.viewAPI??e.defaultViewAPI),e.renderWindow.addView(e._apiSpecificRenderWindow),e.interactor=QF.newInstance(),e.interactor.setInteractorStyle(d_e.newInstance()),e.interactor.setView(e._apiSpecificRenderWindow),e.interactor.initialize(),t.setBackground=e.renderer.setBackground,t.setBackground(...e.background),t.resize=()=>{if(e.container){const r=e.container.getBoundingClientRect(),a=window.devicePixelRatio||1;e._apiSpecificRenderWindow.setSize(Math.floor(r.width*a),Math.floor(r.height*a)),n(),e.renderWindow.render()}},t.setContainer=r=>{e.container&&e.interactor.unbindEvents(e.container),e.container=r,e._apiSpecificRenderWindow.setContainer(e.container),e.container&&e.interactor.bindEvents(e.container)},t.delete=A.chain(t.setContainer,e._apiSpecificRenderWindow.delete,t.delete),e.listenWindowResize&&window.addEventListener("resize",t.resize),t.resize()}const tDe={background:[.32,.34,.43],listenWindowResize:!0,container:null};function L$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,tDe,n),A.obj(t,e),A.get(t,e,["renderWindow","renderer","_apiSpecificRenderWindow","interactor","container"]),A.moveToProtected(t,e,["_apiSpecificRenderWindow"]),A.event(t,e,"resize"),eDe(t,e)}const nDe=A.newInstance(L$);var N$={newInstance:nDe,extend:L$};const rDe=()=>{class t{constructor(){zn(this,"screenRenderer");zn(this,"renderer");zn(this,"camera");zn(this,"renderWindow");zn(this,"iStyle");this.screenRenderer=N$.newInstance({background:[0,0,0],listenWindowResize:!0}),this.renderer=this.screenRenderer.getRenderer(),this.renderWindow=this.screenRenderer.getRenderWindow(),this.camera=this.renderer.getActiveCamera(),this.camera.setParallelProjection(!0),this.iStyle=$Re.newInstance(),this.iStyle.removeAllManipulators(),this.renderWindow.getInteractor().setInteractorStyle(this.iStyle)}}const e=new t;return{renderer:e.renderer,camera:e.camera,renderWindow:e.renderWindow,screenRenderer:e.screenRenderer,iStyle:e.iStyle}},aDe=(t,e)=>{const n=[0,0,0],r=[0,0,0],a=[0,0,0];return t.indexToWorld(n,a),n[e]=1,t.indexToWorld(n,r),{focalPoint:a,position:r}},xy=(t,e,n)=>{const r=t.computeVisiblePropBounds(),a=[(r[1]-r[0])/2,(r[3]-r[2])/2,(r[5]-r[4])/2],s=e.getContainer().clientWidth,o=e.getContainer().clientHeight,i=s/o;let l=1,c=1;return n===0?(l=a[1],c=a[2]):n===1?(l=a[0],c=a[2]):n===2&&(l=a[0],c=a[1]),i>=l/c?c+1:l/i+1};function sDe(t,e){e.classHierarchy.push("vtkCompositeCameraManipulator"),t.computeDisplayCenter=(n,r)=>{const a=n.computeWorldToDisplay(r,e.center[0],e.center[1],e.center[2]);e.displayCenter[0]=a[0],e.displayCenter[1]=a[1]}}const oDe={center:[0,0,0],rotationFactor:1,displayCenter:[0,0]};function iDe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,oDe,n),A.setGet(t,e,["rotationFactor"]),A.setGetArray(t,e,["displayCenter"],2),A.setGetArray(t,e,["center"],3),sDe(t,e)}var B$={extend:iDe};function lDe(t,e){e.classHierarchy.push("vtkCompositeMouseManipulator"),t.startInteraction=()=>{},t.endInteraction=()=>{},t.onButtonDown=(n,r,a)=>{},t.onButtonUp=n=>{},t.onMouseMove=(n,r,a)=>{},t.onStartScroll=(n,r,a)=>{},t.onScroll=(n,r,a)=>{},t.onEndScroll=n=>{},t.isDragEnabled=()=>e.dragEnabled,t.isScrollEnabled=()=>e.scrollEnabled}const cDe={button:1,shift:!1,control:!1,alt:!1,dragEnabled:!0,scrollEnabled:!1};function uDe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,cDe,n),A.setGet(t,e,["button","shift","control","alt"]),A.set(t,e,["dragEnabled","scrollEnabled"]),lDe(t,e)}var Kb={extend:uDe};function fDe(t,e){e.classHierarchy.push("vtkMouseCameraTrackballPanManipulator"),t.onButtonDown=(n,r,a)=>{e.previousPosition=a},t.onMouseMove=(n,r,a)=>{if(!a)return;const s=a,o=e.previousPosition;e.previousPosition=a;const i=r.getActiveCamera(),l=i.getPosition(),c=i.getFocalPoint();if(i.getParallelProjection()){i.orthogonalizeViewUp();const u=i.getViewUp(),f=i.getViewPlaneNormal(),d=[0,0,0];_r(f,u,d);const p=n.getView().getViewportSize(r)[1];let h=(s.x-o.x)/p,g=(o.y-s.y)/p;const y=i.getParallelScale();h*=y*2,g*=y*2;let m=d[0]*h+u[0]*g;l[0]+=m,c[0]+=m,m=d[1]*h+u[1]*g,l[1]+=m,c[1]+=m,m=d[2]*h+u[2]*g,l[2]+=m,c[2]+=m,i.setPosition(l[0],l[1],l[2]),i.setFocalPoint(c[0],c[1],c[2])}else{const{center:u}=e,f=n.getInteractorStyle(),d=f.computeWorldToDisplay(r,u[0],u[1],u[2])[2],p=f.computeDisplayToWorld(r,s.x,s.y,d),h=f.computeDisplayToWorld(r,o.x,o.y,d),g=[l[0]+(h[0]-p[0]),l[1]+(h[1]-p[1]),l[2]+(h[2]-p[2])],y=[c[0]+(h[0]-p[0]),c[1]+(h[1]-p[1]),c[2]+(h[2]-p[2])];i.setPosition(g[0],g[1],g[2]),i.setFocalPoint(y[0],y[1],y[2])}r.resetCameraClippingRange(),n.getLightFollowCamera()&&r.updateLightsGeometryToFollowCamera()}}const dDe={};function F$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dDe,n),A.obj(t,e),B$.extend(t,e,n),Kb.extend(t,e,n),fDe(t,e)}const pDe=A.newInstance(F$,"vtkMouseCameraTrackballPanManipulator");var gDe={newInstance:pDe,extend:F$};const hDe=t=>{const e=gDe.newInstance();return{addPanManipulator:()=>{t.removeAllManipulators(),t.addMouseManipulator(e)}}};function vDe(t,e){e.classHierarchy.push("vtkMouseCameraTrackballZoomManipulator"),t.onButtonDown=(n,r,a)=>{e.previousPosition=a;const s=n.getView().getViewportSize(r),o=r.getActiveCamera(),i=e.flipDirection?-1:1;if(o.getParallelProjection())e.zoomScale=1.5/s[1]*i;else{const l=o.getClippingRange();e.zoomScale=1.5*(l[1]/s[1])*i}},t.onMouseMove=(n,r,a)=>{if(!a)return;const s=e.previousPosition.y-a.y,o=r.getActiveCamera();if(o.getParallelProjection()){const i=s*e.zoomScale;o.setParallelScale((1-i)*o.getParallelScale())}else{const i=o.getPosition(),l=o.getFocalPoint(),c=o.getDirectionOfProjection(),u=s*e.zoomScale;let f=u*c[0];i[0]+=f,l[0]+=f,f=u*c[1],i[1]+=f,l[1]+=f,f=u*c[2],i[2]+=f,l[2]+=f,o.getFreezeFocalPoint()||o.setFocalPoint(l[0],l[1],l[2]),o.setPosition(i[0],i[1],i[2]),r.resetCameraClippingRange()}n.getLightFollowCamera()&&r.updateLightsGeometryToFollowCamera(),e.previousPosition=a},t.onScroll=(n,r,a)=>{if(!a)return;const s=r.getActiveCamera(),o=1-a/10;s.getParallelProjection()?s.setParallelScale(s.getParallelScale()/o):(s.dolly(o),r.resetCameraClippingRange()),n.getLightFollowCamera()&&r.updateLightsGeometryToFollowCamera()}}const yDe={zoomScale:0,flipDirection:!1};function $$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,yDe,n),A.obj(t,e),Kb.extend(t,e,n),B$.extend(t,e,n),A.setGet(t,e,["flipDirection"]),vDe(t,e)}const mDe=A.newInstance($$,"vtkMouseCameraTrackballZoomManipulator");var CDe={newInstance:mDe,extend:$$};const SDe=t=>{const e=CDe.newInstance();return{addZoomManipulator:()=>{t.removeAllManipulators(),t.addMouseManipulator(e)}}};function bDe(t,e){e.classHierarchy.push("vtkMouseRangeManipulator");const n=new Map;function r(s,o){return o*((s.max-s.min)/(s.step+1))}function a(s,o){const i=s.getValue();let l=s.exponentialScroll?s.scale**Math.log2(Math.abs(e.interactionNetDelta)+2):s.scale;l=Math.abs(l)*Math.sign(s.scale);const c=o*l+n.get(s),u=Math.floor(Math.abs(c/s.step));let f=i+s.step*u*Math.sign(c);f=Math.max(f,s.min),f=Math.min(f,s.max),f!==i?(s.setValue(f),n.set(s,0)):f===s.min&&c<0||f===s.max&&c>0?n.set(s,0):n.set(s,c)}t.setHorizontalListener=function(s,o,i,l,c){let u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1,f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1;const d=Number.isFinite(l)?()=>l:l;e.horizontalListener={min:s,max:o,step:i,getValue:d,setValue:c,scale:u,exponentialScroll:f},n.set(e.horizontalListener,0),t.modified()},t.setVerticalListener=function(s,o,i,l,c){let u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1,f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1;const d=Number.isFinite(l)?()=>l:l;e.verticalListener={min:s,max:o,step:i,getValue:d,setValue:c,scale:u,exponentialScroll:f},n.set(e.verticalListener,0),t.modified()},t.setScrollListener=function(s,o,i,l,c){let u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1,f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1;i<0&&qh("Value of step cannot be negative. If you want to invert the scrolling direction, use a negative scale value instead.");const d=Math.abs(i),p=Number.isFinite(l)?()=>l:l;e.scrollListener={min:s,max:o,step:d,getValue:p,setValue:c,scale:u,exponentialScroll:f},n.set(e.scrollListener,0),t.modified()},t.removeHorizontalListener=()=>{e.horizontalListener&&(n.delete(e.horizontalListener),delete e.horizontalListener,t.modified())},t.removeVerticalListener=()=>{e.verticalListener&&(n.delete(e.verticalListener),delete e.verticalListener,t.modified())},t.removeScrollListener=()=>{e.scrollListener&&(n.delete(e.scrollListener),delete e.scrollListener,t.modified())},t.removeAllListeners=()=>{t.removeHorizontalListener(),t.removeVerticalListener(),t.removeScrollListener()},t.onButtonDown=(s,o,i)=>{e.previousPosition=i,e.interactionNetDelta=0;const l=s.getView(),c=l.getContainerSize()[0]/l.getSize()[0],u=l.getViewportSize(o);e.containerSize=u.map(f=>f*c)},t.onButtonUp=s=>{s.exitPointerLock()},t.startPointerLockEvent=(s,o)=>{const i=u=>{t.onPointerLockMove(s,o,u)};document.addEventListener("mousemove",i);let l=null;const c=()=>{document.removeEventListener("mousemove",i),l==null||l.unsubscribe()};l=s==null?void 0:s.onEndPointerLock(c)},t.onPointerLockMove=(s,o,i)=>{s.isPointerLocked()&&e.previousPosition!=null&&(e.previousPosition.x+=i.movementX,e.previousPosition.y+=i.movementY,t.onMouseMove(s,o,e.previousPosition))},t.onMouseMove=(s,o,i)=>{if(!(!e.verticalListener&&!e.horizontalListener)&&(e.usePointerLock&&!s.isPointerLocked()&&(s.requestPointerLock(),t.startPointerLockEvent(s,o)),!!i)){if(e.horizontalListener){const l=(i.x-e.previousPosition.x)/e.containerSize[0],c=r(e.horizontalListener,l);e.interactionNetDelta+=c,a(e.horizontalListener,c)}if(e.verticalListener){const l=(i.y-e.previousPosition.y)/e.containerSize[1],c=r(e.verticalListener,l);e.interactionNetDelta+=c,a(e.verticalListener,c)}e.previousPosition=i}},t.onScroll=(s,o,i)=>{!e.scrollListener||!i||(e.interactionNetDelta+=i*e.scrollListener.step,a(e.scrollListener,i*e.scrollListener.step))},t.onStartScroll=()=>{e.interactionNetDelta=0}}const wDe={horizontalListener:null,verticalListener:null,scrollListener:null};function U$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,wDe,n),A.obj(t,e),Kb.extend(t,e,n),A.setGet(t,e,["usePointerLock"]),bDe(t,e)}const TDe=A.newInstance(U$,"vtkMouseRangeManipulator");var xDe={newInstance:TDe,extend:U$};const EDe=(t,e)=>{const n=xDe.newInstance({scrollEnabled:!0,button:1});return{addRangeManipulator:()=>{t.removeAllManipulators(),t.addMouseManipulator(n)},init:(a,s)=>{const{colorWindowMin:o,colorWindowMax:i,colorLevelMax:l,colorLevelMin:c}=s,u=a.getProperty().getColorWindow,f=a.getProperty().getColorLevel,d=h=>{a.getProperty().setColorWindow(h),e({colorWindow:h,colorLevel:f()})},p=h=>{a.getProperty().setColorLevel(h),e({colorWindow:u(),colorLevel:h})};n.setVerticalListener(o,i,1,u,d,1),n.setHorizontalListener(c,l,1,f,p,1)}}},Ig=t=>{const e=parseInt(t.slice(1,3),16)/255,n=parseInt(t.slice(3,5),16)/255,r=parseInt(t.slice(5,7),16)/255;return{r:e,g:n,b:r}},kDe=[ll.K,ll.J,ll.I],ODe=[{name:"range",icon:"contrast-icon"},{name:"pan",icon:"move-icon"},{name:"zoom",icon:"zoom-icon"},{name:"crosshair",icon:"target-icon"}],Pg=[{color:"#FF0000",name:"Axial",mode:ll.K,viewUp:[0,1,0],inverted:!1},{color:"#0000ff",name:"Sagittal",mode:ll.I,viewUp:[0,0,1],inverted:!1},{color:"#00FF00",name:"Coronal",mode:ll.J,viewUp:[0,1,0],inverted:!1}],MDe={class:"action-bar type"},RDe={class:"type-container"},_De={class:"action-bar zoom"},VDe={class:"zoom-container"},DDe={class:"action-bar bottom"},LDe={class:"slice-slider"},NDe={class:"slice-num-container"},BDe={class:"current"},FDe={class:"max"},$De={class:"action-bar windows-level"},UDe=["x1","x2","y1","y2"],ADe=["x1","x2","y1","y2"],WDe=["x1","x2","y1","y2"],IDe=["x1","x2","y1","y2"],PDe={__name:"SliceView",props:{sliceProps:{}},setup(t){const e=[{label:"25%",value:.25},{label:"50%",value:.5},{label:"75%",value:.75},{label:"100%",value:1},{label:"120%",value:1.2},{label:"150%",value:1.5},{label:"175%",value:1.75},{label:"200%",value:2},{label:"225%",value:2.25},{label:"250%",value:2.5}],n=P(1),r=t,a=P(),s=P({colorLevel:r.sliceProps.colorLevel,colorWindow:r.sliceProps.colorWindow}),o=P(0),i=P(0),l=P(0),c=P(Pg.find(B=>B.mode===r.sliceProps.slicingMode)),u=P({vertical:{x1:0,x2:0,y1:0,y2:0},horizontal:{x1:0,x2:0,y1:0,y2:0},vertical2:{x1:0,x2:0,y1:0,y2:0},horizontal2:{x1:0,x2:0,y1:0,y2:0}}),f=P(),d=P(!1),p=P(!1),h=fRe(),g=rDe();g.screenRenderer.getInteractor().onMouseMove(B=>{if(!p.value)return;const F=B.position,$=[F.x,F.y,0];if(h.picker.pick($,g.renderer),h.picker.getActors().length>0){const N=h.picker.getPickedPositions();mt.setPickedPoint(N[0])}}),g.screenRenderer.getInteractor().onMouseWheel(B=>{if(!p.value)return;const F=B.position,$=[F.x,F.y,0];if(h.picker.pick($,g.renderer),h.picker.getActors().length>0){const N=h.picker.getPickedPositions();mt.setPickedPoint(N[0])}});const y=P();pe(()=>mt.pickedPoint,B=>{var L,G;const F=h.mapper.getSliceAtPosition(B),$=Ib.computeWorldToDisplay(g.renderer,B[0],B[1],B[2]),N=(G=(L=g.renderer.getRenderWindow())==null?void 0:L.getViews())==null?void 0:G[0],[W,_]=N.getViewportSize(g.renderer);u.value={vertical:{y1:0,y2:(_-$[1])/devicePixelRatio-20,x1:$[0]/devicePixelRatio,x2:$[0]/devicePixelRatio},horizontal:{x1:0,x2:$[0]/devicePixelRatio-20,y1:(_-$[1])/devicePixelRatio,y2:(_-$[1])/devicePixelRatio},vertical2:{y1:(_-$[1])/devicePixelRatio+20,y2:_/devicePixelRatio,x1:$[0]/devicePixelRatio,x2:$[0]/devicePixelRatio},horizontal2:{x1:$[0]/devicePixelRatio+20,x2:W/devicePixelRatio,y1:(_-$[1])/devicePixelRatio,y2:(_-$[1])/devicePixelRatio}},h.mapper.setSlice(F),h.mapper.update(),o.value=Math.round(F),g.renderWindow.render()});const m=hDe(g.iStyle),b=SDe(g.iStyle),C=EDe(g.iStyle,B=>{s.value=B}),S=new ResizeObserver(function(){g.screenRenderer.resize()});pe(()=>mt.activeTool,B=>{B==="pan"?m.addPanManipulator():B==="zoom"?b.addZoomManipulator():B==="range"?C.addRangeManipulator():B==="crosshair"&&g.iStyle.removeAllManipulators(),p.value=B==="crosshair"});const T=B=>{const F=Math.min(Math.max(h.mapper.getSlice()+B.deltaY,i.value),l.value);h.mapper.setSlice(F),o.value=Math.round(F),g.renderWindow.render()},w=B=>{h.mapper.setSlice(B),o.value=Math.round(B),g.renderWindow.render()};g.camera.onModified(()=>{const B=xy(g.renderer,g.screenRenderer,c.value.mode),F=g.camera.getParallelScale();n.value=B/F});const x=B=>{const F=xy(g.renderer,g.screenRenderer,c.value.mode);n.value=F/(F/B),g.camera.setParallelScale(F/B),g.renderWindow.render()},E=()=>{mt.fullScreen===null?mt.fullScreen=c.value.mode:mt.fullScreen===c.value.mode?mt.fullScreen=null:mt.fullScreen=c.value.mode};pe(d,()=>{const F=h.actor.getMapper().getInputData(),N=F.getPointData().getScalars(),W=N.getRange();for(let G=0;G<N.getNumberOfValues();G++){let K=N.getData()[G];K=W[1]-K,N.getData()[G]=K}const _=W[1]-W[0],L=.5*(d.value?W[1]-W[0]:W[1]+W[0]);h.actor.getProperty().setColorLevel(L),h.actor.getProperty().setColorWindow(_),F.modified(),g.renderWindow.render()});const O=()=>{const B=Math.min(Math.max(h.mapper.getSlice()+1,i.value),l.value);h.mapper.setSlice(B),o.value=Math.round(B),g.renderWindow.render()},k=()=>{const B=Math.min(Math.max(h.mapper.getSlice()-1,i.value),l.value);h.mapper.setSlice(B),o.value=Math.round(B),g.renderWindow.render()},M=P([]),D=()=>{const B=h.mapper.getSlicingMode();if(B>-1){const F=mt.labelMaps;mt.currentSlices={...mt.currentSlices,[B]:h.mapper.getSlice()};for(const $ of F)$.sliceModes[r.sliceProps.index].mapper.set(h.mapper.get("slice","slicingMode"))}};pe(()=>mt.labelMaps,()=>{for(const B of mt.labelMaps){M.value.includes(B.name)||(g.renderer.addViewProp(B.sliceModes[r.sliceProps.index].actor),M.value.push(B.name));for(const F of B.children){const $=Ig(F.color);B.sliceModes[r.sliceProps.index].cfun.addRGBPoint(parseInt(F.related_label_name),$.r,$.g,$.b);const N=F.checked?F.opacity:0;B.sliceModes[r.sliceProps.index].ofun.addPoint(parseInt(F.related_label_name),N)}}D(),g.renderWindow.render()});const I=()=>{const B=a.value.getPointData().getScalars().getRange(),F=B[1]-B[0],$=.5*(d.value?B[1]-B[0]:B[1]+B[0]);h.actor.getProperty().setColorLevel($),h.actor.getProperty().setColorWindow(F)};return at(()=>{pe([()=>mt.imageData,c],async()=>{if(!mt.imageData)return;a.value=R1.convertItkToVtkImage(mt.series[r.sliceProps.index]),g.screenRenderer.setContainer(f.value),S.observe(f.value),C.init(h.actor,r.sliceProps),C.addRangeManipulator(),s.value={colorLevel:r.sliceProps.colorLevel,colorWindow:r.sliceProps.colorWindow};const B=a.value.getExtent();i.value=B[c.value.mode*2],l.value=B[c.value.mode*2+1],o.value=Math.round((l.value-i.value)/2),r.sliceProps,h.mapper.setInputData(a.value),h.mapper.setSlicingMode(c.value.mode),h.mapper.setSlice(o.value),I(),g.renderer.addActor(h.actor),h.mapper.onModified(D),g.camera.set(aDe(a.value,c.value.mode)),g.camera.setViewUp(...c.value.viewUp),g.renderer.resetCamera(),g.camera.setParallelScale(xy(g.renderer,g.screenRenderer,c.value.mode)),D(),g.renderWindow.render(),g.screenRenderer.resize()},{immediate:!0})}),(B,F)=>{const $=et("el-dropdown-item"),N=et("el-dropdown-menu"),W=et("el-dropdown"),_=et("el-slider");return V(),z("div",{class:U(v(mt).fullScreen===t.sliceProps.slicingMode?"viewport-full":"viewport")},[H("div",MDe,[j(W,null,{dropdown:Z(()=>[j(N,null,{default:Z(()=>[(V(!0),z(Ue,null,gt(v(Pg).filter(L=>L.mode!==c.value.mode),L=>(V(),ae($,{onClick:G=>c.value=v(Pg).find(K=>K.mode==L.mode)},{default:Z(()=>[Ct(Te(L.name),1)]),_:2},1032,["onClick"]))),256))]),_:1})]),default:Z(()=>[H("div",RDe,[H("div",{class:"circle green",style:Pe({background:c.value.color})},null,4),H("span",null,Te(c.value.name),1),j(Qn,{icon:"caret-down-icon"})])]),_:1})]),H("button",{class:"action-bar expand",onClick:E},[v(mt).fullScreen===t.sliceProps.slicingMode?(V(),ae(Qn,{key:0,icon:"compress-icon"})):(V(),ae(Qn,{key:1,icon:"expand-icon"}))]),H("button",{class:"action-bar turn",onClick:F[0]||(F[0]=()=>{d.value=!d.value})},[j(Qn,{icon:"turn-icon"})]),H("div",_De,[j(W,null,{dropdown:Z(()=>[j(N,null,{default:Z(()=>[(V(),z(Ue,null,gt(e,L=>j($,{onClick:()=>x(L.value)},{default:Z(()=>[Ct(Te(L.label),1)]),_:2},1032,["onClick"])),64))]),_:1})]),default:Z(()=>[H("div",VDe,[H("span",null,Te(Math.round(100*n.value))+"%",1),j(Qn,{icon:"caret-down-icon"})])]),_:1})]),H("div",DDe,[H("button",{class:"icon-button",onClick:k},[j(Qn,{icon:"left-arrow-icon"})]),H("button",{class:"icon-button",onClick:O},[j(Qn,{icon:"right-arrow-icon"})]),H("div",LDe,[j(_,{onInput:w,min:0,modelValue:o.value,"onUpdate:modelValue":F[1]||(F[1]=L=>o.value=L),max:l.value,"show-tooltip":!1},null,8,["modelValue","max"])]),H("div",NDe,[H("div",BDe,Te(o.value),1),H("div",FDe,Te(l.value),1)])]),H("div",$De,[H("span",null,"W: "+Te(s.value.colorWindow),1),H("span",null,"L: "+Te(s.value.colorLevel),1)]),ee("",!0),ee("",!0),p.value?(V(),z("svg",{key:2,ref_key:"svg",ref:y,style:{position:"absolute",height:"100%",width:"100%","pointer-events":"none"}},[H("line",{x1:u.value.vertical.x1,x2:u.value.vertical.x2,y1:u.value.vertical.y1,y2:u.value.vertical.y2,stroke:"#00ff00","stroke-width":"1"},null,8,UDe),H("line",{x1:u.value.horizontal.x1,x2:u.value.horizontal.x2,y1:u.value.horizontal.y1,y2:u.value.horizontal.y2,stroke:"#00ff00","stroke-width":"1"},null,8,ADe),H("line",{x1:u.value.vertical2.x1,x2:u.value.vertical2.x2,y1:u.value.vertical2.y1,y2:u.value.vertical2.y2,stroke:"#00ff00","stroke-width":"1"},null,8,WDe),H("line",{x1:u.value.horizontal2.x1,x2:u.value.horizontal2.x2,y1:u.value.horizontal2.y1,y2:u.value.horizontal2.y2,stroke:"#00ff00","stroke-width":"1"},null,8,IDe)],512)):ee("",!0),H("div",{onWheel:T,ref_key:"container",ref:f,class:"container"},null,544)],2)}}},GDe=_d(PDe,[["__scopeId","data-v-770f7a0c"]]),jb={};function A$(t){return!!jb[t]}function zDe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"http",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return jb[t](e)}function W$(t,e){jb[t]=e}var HDe={get:zDe,has:A$,registerType:W$};function I$(){const t=new ArrayBuffer(4),e=new Uint8Array(t),n=new Uint32Array(t);return e[0]=161,e[1]=178,e[2]=195,e[3]=212,n[0]===3569595041?"LittleEndian":n[0]===2712847316?"BigEndian":null}const KDe=I$();function jDe(t,e){if(e<2)return;const n=new Int8Array(t),r=n.length,a=[];for(let s=0;s<r;s+=e){for(let o=0;o<e;o++)a.push(n[s+o]);for(let o=0;o<e;o++)n[s+o]=a.pop()}}var Ey={ENDIANNESS:KDe,getEndianness:I$,swapBytes:jDe};const{vtkErrorMacro:P$,vtkDebugMacro:YDe}=A,Yb=()=>(P$("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead."),Promise.reject(new Error("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead.")));let lu=0;function a0(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=new XMLHttpRequest;return r.open(t,e,!0),n.headers&&Object.entries(n.headers).forEach(a=>{let[s,o]=a;return r.setRequestHeader(s,o)}),n.progressCallback&&r.addEventListener("progress",n.progressCallback),r}function qDe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,r)=>{const a=a0("GET",t,e);a.onreadystatechange=s=>{a.readyState===4&&(a.status===200||a.status===0?n(a.response):r({xhr:a,e:s}))},a.responseType="arraybuffer",a.send()})}function XDe(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return r&&r.compression?Yb():n.ref&&!n.ref.pending?new Promise((a,s)=>{const o=[e,n.ref.basepath,n.ref.id].join("/"),i=a0("GET",o,r);i.onreadystatechange=l=>{i.readyState===1&&(n.ref.pending=!0,++lu===1&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!0)),i.readyState===4&&(n.ref.pending=!1,i.status===200||i.status===0?(n.buffer=i.response,n.ref.encode==="JSON"?n.values=JSON.parse(n.buffer):(Ey.ENDIANNESS!==n.ref.encode&&Ey.ENDIANNESS&&(YDe(`Swap bytes of ${n.name}`),Ey.swapBytes(n.buffer,sR[n.dataType])),n.values=A.newTypedArray(n.dataType,n.buffer)),n.values.length!==n.size&&P$(`Error in FetchArray: ${n.name}, does not have the proper array size. Got ${n.values.length}, instead of ${n.size}`),delete n.ref,--lu===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),t!=null&&t.modified&&t.modified(),a(n)):s({xhr:i,e:l}))},i.responseType=n.dataType!=="string"?"arraybuffer":"text",i.send()}):Promise.resolve(n)}function ZDe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n&&n.compression?Yb():new Promise((r,a)=>{const s=a0("GET",e,n);s.onreadystatechange=o=>{s.readyState===1&&++lu===1&&t!=null&&t.invokeBusy&&t.invokeBusy(!0),s.readyState===4&&(--lu===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),s.status===200||s.status===0?r(JSON.parse(s.responseText)):a({xhr:s,e:o}))},s.responseType="text",s.send()})}function JDe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n&&n.compression?Yb():new Promise((r,a)=>{const s=a0("GET",e,n);s.onreadystatechange=o=>{s.readyState===1&&++lu===1&&t!=null&&t.invokeBusy&&t.invokeBusy(!0),s.readyState===4&&(--lu===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),s.status===200||s.status===0?r(s.responseText):a({xhr:s,e:o}))},s.responseType="text",s.send()})}function QDe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((r,a)=>{const s=new Image;n.crossOrigin&&(s.crossOrigin=n.crossOrigin),s.onload=()=>r(s),s.onerror=a,s.src=e})}const eLe={fetchArray:XDe,fetchJSON:ZDe,fetchText:JDe,fetchBinary:qDe,fetchImage:QDe};A$("http")||W$("http",t=>eLe);const{vtkErrorMacro:Ek}=A;let In={};function tLe(t,e){const n={};return new Promise((r,a)=>{n.wasmBinaryFile=e;const s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="arraybuffer",s.onload=()=>{s.status===200?(n.wasmBinary=s.response,Promise.resolve(window.DracoDecoderModule(n)).then(o=>{In=o,r(!0)},a)):a(Error(`WASM binary could not be loaded: ${s.statusText}`))},s.send(null)})}function nLe(t){In=t({})}function rLe(){return In}function aLe(t){const e=new Int8Array(t),n=new In.Decoder,r=new In.DecoderBuffer;r.Init(e,e.length);const a=n.GetEncodedGeometryType(r);let s;if(a===In.TRIANGULAR_MESH){s=new In.Mesh;const o=n.DecodeBufferToMesh(r,s);o.ok()||Ek(`Could not decode Draco file: ${o.error_msg()}`)}else Ek("Wrong geometry type, expected mesh, got point cloud.");return In.destroy(r),In.destroy(n),s}function Ap(t,e){const n=new In.Decoder,r=n.GetAttribute(t,e),a=r.num_components(),s=t.num_points(),o=new In.DracoFloat32Array;n.GetAttributeFloatForAllPoints(t,r,o);let i=s*a;const l=new Float32Array(i);for(;i--;)l[i]=o.GetValue(i);return l}function sLe(t){const e=new In.Decoder,n=e.GetAttributeId(t,In.POSITION);if(n===-1)return console.error("No position attribute found in the decoded model."),In.destroy(e),In.destroy(t),null;const r=Ap(t,n);let a=t.num_faces();const s=new Uint32Array(a*4),o=new In.DracoInt32Array;for(;a--;){e.GetFaceFromMesh(t,a,o);const p=a*4;s[p]=3,s[p+1]=o.GetValue(0),s[p+2]=o.GetValue(1),s[p+3]=o.GetValue(2)}const i=Fc.newInstance({values:s}),l=or.newInstance({polys:i});l.getPoints().setData(r);const c=l.getPointData();if(e.GetAttributeId(t,In.NORMAL)!==-1){const p=Ap(t,In.NORMAL),h=Tt.newInstance({numberOfComponents:3,values:p,name:"Normals"});c.setNormals(h)}const f=e.GetAttributeId(t,In.TEX_COORD);if(f!==-1){const p=Ap(t,f),h=Tt.newInstance({numberOfComponents:2,values:p,name:"TCoords"});c.setTCoords(h)}const d=e.GetAttributeId(t,In.COLOR);if(d!==-1){const p=Ap(t,d),h=Tt.newInstance({numberOfComponents:3,values:p,name:"Scalars"});c.setScalars(h)}return In.destroy(e),l}function oLe(t,e){e.classHierarchy.push("vtkDracoReader"),e.dataAccessHelper||(e.dataAccessHelper=HDe.get("http"));function n(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{compression:s,progressCallback:o}=e;return a.binary?e.dataAccessHelper.fetchBinary(r,{compression:s,progressCallback:o}):e.dataAccessHelper.fetchText(t,r,{compression:s,progressCallback:o})}t.setUrl=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{binary:!0};e.url=r;const s=r.split("/");return s.pop(),e.baseURL=s.join("/"),e.compression=a.compression,t.loadData({progressCallback:a.progressCallback,binary:!!a.binary})},t.loadData=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const a=n(e.url,r);return a.then(t.parse),a},t.parse=r=>{t.parseAsArrayBuffer(r)},t.parseAsArrayBuffer=r=>{if(!r)return;if(r!==e.parseData)t.modified();else return;e.parseData=r;const a=aLe(r),s=sLe(a);In.destroy(a),e.output[0]=s},t.requestData=()=>{t.parse(e.parseData)}}const iLe={};function G$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,iLe,n),A.obj(t,e),A.get(t,e,["url","baseURL"]),A.setGet(t,e,["dataAccessHelper"]),A.algo(t,e,0,1),oLe(t,e),e.compression||(e.compression=null),e.progressCallback||(e.progressCallback=null)}const lLe=A.newInstance(G$,"vtkDracoReader");var kk={extend:G$,newInstance:lLe,setDracoDecoder:nLe,setWasmBinary:tLe,getDracoDecoder:rLe};const Jf=[];function cLe(t){return new Promise((e,n)=>{if(Jf.indexOf(t)===-1){Jf.push(t);const r=document.createElement("script");r.type="text/javascript",r.src=t,r.onload=e,r.onerror=n,document.body.appendChild(r)}else e(!1)})}function uLe(t){return new Promise((e,n)=>{if(Jf.indexOf(t)===-1){Jf.push(t);const r=document.createElement("link");r.rel="stylesheet",r.href=t,r.onload=e,r.onerror=n,document.head.appendChild(r)}else e(!1)})}var fLe={loadScript:cLe,loadCSS:uLe,LOADED_URLS:Jf};const Xu={DEFAULT:0,GEOMETRY:1,SLICE:2,VOLUME:3,YZ_PLANE:4,XZ_PLANE:5,XY_PLANE:6},zh={PICKING_BUFFER:0,FRONT_BUFFER:1},dLe={MOUSE_MOVE:0,MOUSE_RELEASE:1};var qb={ViewTypes:Xu,RenderingTypes:zh,CaptureOn:dLe};const z$=.5;function pLe(t,e){e.classHierarchy.push("vtkAbstractWidget"),e.actorToRepresentationMap=new WeakMap,t.getBounds=e.widgetState.getBounds,t.getNestedProps=()=>e.representations,t.activateHandle=n=>{let{selectedState:r,representation:a}=n;e.widgetState.activateOnly(r),e.activeState=r,r&&r.updateManipulator&&r.updateManipulator(),t.invokeActivateHandle({selectedState:r,representation:a}),t.updateCursor&&t.updateCursor()},t.deactivateAllHandles=()=>{e.widgetState.deactivate()},t.hasActor=n=>e.actorToRepresentationMap.has(n),t.grabFocus=()=>{e.hasFocus=!0},t.loseFocus=()=>{e.hasFocus=!1},t.hasFocus=()=>e.hasFocus,t.placeWidget=n=>e.widgetState.placeWidget(n),t.getPlaceFactor=()=>e.widgetState.getPlaceFactor(),t.setPlaceFactor=n=>e.widgetState.setPlaceFactor(n),t.getRepresentationFromActor=n=>e.actorToRepresentationMap.get(n),t.updateRepresentationForRender=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zh.FRONT_BUFFER;for(let r=0;r<e.representations.length;r++)e.representations[r].updateActorVisibility(n,e.contextVisibility,e.handleVisibility)},t.getViewWidgets=()=>e._factory.getViewWidgets(),t.setPriority(z$)}const gLe={contextVisibility:!0,handleVisibility:!0,hasFocus:!1};function H$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,gLe,n),_l.extend(t,e,n),Ib.extend(t,e,n),A.setGet(t,e,["contextVisibility","handleVisibility","_widgetManager"]),A.get(t,e,["representations","widgetState","activeState"]),A.moveToProtected(t,e,["widgetManager"]),A.event(t,e,"ActivateHandle"),pLe(t,e)}const hLe=A.newInstance(H$,"vtkAbstractWidget");var vLe={newInstance:hLe,extend:H$};const{ViewTypes:Xb,RenderingTypes:Ok,CaptureOn:D1}=qb,{vtkErrorMacro:yLe}=A;let mLe=1;function K$(t){const e=t.getActiveCamera(),n=t.getRenderWindow(),r=n.getInteractor(),a=r.getView();return{renderer:t,renderWindow:n,interactor:r,apiSpecificRenderWindow:a,camera:e}}function Zb(t,e){const{dispHeightFactor:n,cameraPosition:r,cameraDir:a,isParallel:s,rendererPixelDims:o}=e;let i=1;if(s)i=n;else{const c=[...t];bs.subtract(c,r,c),i=bs.dot(c,a)*n}const l=o[1];return i/l}function CLe(t,e){e.viewId||(e.viewId=`view-${mLe++}`),e.classHierarchy.push("vtkWidgetManager");const n=new WeakMap,r=[];function a(m){const b=m.getRepresentations();for(let C=0;C<b.length;C++){const S=b[C],T={widget:m,representation:S},w=S.getActors();for(let x=0;x<w.length;x++){const E=w[x];n.set(E,T)}}}function s(m){return m&&(m.isA("vtkAbstractWidget")?m:m.getWidgetForView({viewId:e.viewId}))}function o(){const{_apiSpecificRenderWindow:m,_camera:b,_renderer:C}=e;if(C&&m&&b){const[S,T]=m.getSize(),[w,x,E,O]=C.getViewport(),k=m.getComputedDevicePixelRatio(),M=[S*(E-w)/k,T*(O-x)/k],D=b.getPosition(),I=b.getDirectionOfProjection(),B=b.getParallelProjection(),F=B?2*b.getParallelScale():2*Math.tan(bs.radiansFromDegrees(b.getViewAngle())/2);e.widgets.forEach($=>{$.getNestedProps().forEach(N=>{N.getScaleInPixels()&&N.setDisplayScaleParams({dispHeightFactor:F,cameraPosition:D,cameraDir:I,isParallel:B,rendererPixelDims:M})})})}}async function i(m,b,C){const{position:S}=m,{requestCount:T,selectedState:w,representation:x,widget:E}=await t.getSelectedDataForXY(S.x,S.y);if(T||C!==e._currentUpdateSelectionCallID)return;function O(M){b&&e._interactor.invokeLeftButtonRelease(m),M.activateHandle({selectedState:w,representation:x}),b&&e._interactor.invokeLeftButtonPress(m)}e._apiSpecificRenderWindow.setCursor(E?"pointer":"default"),e.activeWidget=null;let k=!1;if(e.widgetInFocus===E&&E.hasFocus())O(E),e.activeWidget=E,k=!0;else for(let M=0;M<e.widgets.length;M++){const D=e.widgets[M];D===E&&D.getNestedPickable()?(O(D),e.activeWidget=D,k=!0):(k||(k=!!D.getActiveState()),D.deactivateAllHandles())}k&&e._interactor.render()}const l=async function(m){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!e.isAnimating&&e.pickingEnabled&&m.pokedRenderer===e._renderer){const C=Symbol("UpdateSelection");e._currentUpdateSelectionCallID=C,await i(m,b,C)}};function c(m){m.updateRepresentationForRender(e.renderingType)}function u(){e.renderingType=Ok.PICKING_BUFFER,e.widgets.forEach(c)}function f(){e.renderingType=Ok.FRONT_BUFFER,e.widgets.forEach(c)}async function d(m,b,C,S){if(e._captureInProgress){await e._captureInProgress;return}u(),e._capturedBuffers=null,e._captureInProgress=e._selector.getSourceDataAsync(e._renderer,m,b,C,S),e._capturedBuffers=await e._captureInProgress,e._captureInProgress=null,e.previousSelectedData=null,f()}t.enablePicking=()=>{e.pickingEnabled=!0,t.renderWidgets()},t.renderWidgets=()=>{if(e.pickingEnabled&&e.captureOn===D1.MOUSE_RELEASE){const[m,b]=e._apiSpecificRenderWindow.getSize();d(0,0,m,b)}f(),t.modified()},t.disablePicking=()=>{e.pickingEnabled=!1},t.setRenderer=m=>{const b=K$(m);for(Object.assign(e,b),A.moveToProtected({},e,Object.keys(b));r.length;)r.pop().unsubscribe();e._selector=e._apiSpecificRenderWindow.createSelector(),e._selector.setFieldAssociation(hR.FIELD_ASSOCIATION_POINTS),r.push(e._apiSpecificRenderWindow.onWindowResizeEvent(o)),r.push(e._camera.onModified(o)),o(),r.push(e._interactor.onStartAnimation(()=>{e.isAnimating=!0})),r.push(e._interactor.onEndAnimation(()=>{e.isAnimating=!1,t.renderWidgets()})),r.push(e._interactor.onMouseMove(C=>(l(C),A.VOID))),r.push(e._interactor.onLeftButtonPress(C=>{const{deviceType:S}=C,T=S==="touch"||S==="pen";return T&&l(C,T),A.VOID},z$/2)),t.modified(),e.pickingEnabled&&t.enablePicking()};function p(m){m.setWidgetManager(t),a(m),o(),e._renderer.addActor(m)}t.addWidget=(m,b,C)=>{if(!e._renderer)return yLe("Widget manager MUST BE link to a view before registering widgets"),null;const{viewId:S,_renderer:T}=e,w=m.getWidgetForView({viewId:S,renderer:T,viewType:b||Xb.DEFAULT,initialValues:C});return w!=null&&e.widgets.indexOf(w)===-1&&(e.widgets.push(w),p(w),t.modified()),w};function h(m){e._renderer.removeActor(m),m.delete()}function g(){e._renderer.getRenderWindow().getInteractor().render(),t.renderWidgets()}t.removeWidgets=()=>{e.widgets.forEach(h),e.widgets=[],e.widgetInFocus=null,g()},t.removeWidget=m=>{const b=s(m),C=e.widgets.indexOf(b);C!==-1&&(e.widgets.splice(C,1),e.widgetInFocus===b&&t.releaseFocus(),h(b),g())},t.getSelectedDataForXY=async(m,b)=>{if(e.selections=null,e.pickingEnabled){if(!e._capturedBuffers||e.captureOn===D1.MOUSE_MOVE)await d(m,b,m,b);else{const C=e._capturedBuffers.area;(m<C[0]||m>C[2]||b<C[1]||b>C[3])&&await d(m,b,m,b)}e.selections=e._capturedBuffers.generateSelection(m,b,m,b)}return t.getSelectedData()},t.getSelectedData=()=>{if(!e.selections||!e.selections.length)return e.previousSelectedData=null,{};const{propID:m,compositeID:b,prop:C}=e.selections[0].getProperties();let{widget:S,representation:T}=e.selections[0].getProperties();if(e.previousSelectedData&&e.previousSelectedData.prop===C&&e.previousSelectedData.widget===S&&e.previousSelectedData.compositeID===b)return e.previousSelectedData.requestCount++,e.previousSelectedData;if(n.has(C)){const w=n.get(C);S=w.widget,T=w.representation}if(S&&T){const w=T.getSelectedState(C,b);return e.previousSelectedData={requestCount:0,propID:m,compositeID:b,prop:C,widget:S,representation:T,selectedState:w},e.previousSelectedData}return e.previousSelectedData=null,{}},t.grabFocus=m=>{const b=s(m);e.widgetInFocus&&e.widgetInFocus!==b&&e.widgetInFocus.loseFocus(),e.widgetInFocus=b,e.widgetInFocus&&e.widgetInFocus.grabFocus()},t.releaseFocus=()=>t.grabFocus(null);const y=t.delete;t.delete=()=>{for(;r.length;)r.pop().unsubscribe();y()}}const SLe={viewId:null,widgets:[],activeWidget:null,renderer:null,viewType:Xb.DEFAULT,isAnimating:!1,pickingEnabled:!0,selections:null,previousSelectedData:null,widgetInFocus:null,captureOn:D1.MOUSE_MOVE};function j$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,SLe,n),A.obj(t,e),A.setGet(t,e,["captureOn",{type:"enum",name:"viewType",enum:Xb}]),A.get(t,e,["selections","widgets","viewId","pickingEnabled","activeWidget"]),CLe(t,e)}const bLe=A.newInstance(j$,"vtkWidgetManager");var wLe={newInstance:bLe,extend:j$,Constants:qb,getPixelWorldHeightAtCoord:Zb};function TLe(){}function xLe(t,e){e.classHierarchy.push("vtkAbstractWidgetFactory");const n={};t.getWidgetForView=a=>{let{viewId:s,renderer:o,viewType:i,initialValues:l}=a;if(!n[s]){if(!o)return null;const{interactor:c,apiSpecificRenderWindow:u,camera:f}=K$(o),d={},p={};A.obj(p,d),Object.assign(p,{onWidgetChange:t.onWidgetChange}),Object.assign(d,{widgetState:e.widgetState,manipulator:e.manipulator,viewType:i,renderer:o,camera:f,apiSpecificRenderWindow:u,factory:t}),A.moveToProtected(p,d,["renderer","camera","apiSpecificRenderWindow","factory"]),A.get(p,d,["viewType"]),A.safeArrays(d),vLe.extend(p,d,l);const h=l;d.representations=t.getRepresentationsForViewType(i).map(y=>{let{builder:m,labels:b,initialValues:C}=y;return m.newInstance({_parentProp:p,labels:b,...C,...h})}),d.representations.forEach(y=>{y.setInputData(d.widgetState),y.getActors().forEach(m=>{d.actorToRepresentationMap.set(m,y)})}),e.behavior(p,d),["coincidentTopologyParameters",...e.methodsToLink||[]].forEach(y=>{const m=`set${A.capitalize(y)}`,b=`get${A.capitalize(y)}`,C={[y]:[],[m]:[],[b]:[]};d.representations.forEach(S=>{S[y]&&C[y].push(S[y]),S[m]&&C[m].push(S[m]),S[b]&&C[b].push(S[b])}),Object.keys(C).forEach(S=>{const T=C[S];T.length===1?p[S]=T[0]:T.length>1&&(p[S]=A.chain(...T))})}),p.delete=A.chain(()=>{delete n[s]},p.delete),p.setInteractor(c);const g=Object.freeze(p);return n[s]=g,g}return n[s]},t.getViewIds=()=>Object.keys(n),t.getViewWidgets=()=>Object.values(n),t.setVisibility=a=>{const s=Object.keys(n);for(let o=0;o<s.length;o++)n[s[o]].setVisibility(a)},t.setPickable=a=>{const s=Object.keys(n);for(let o=0;o<s.length;o++)n[s[o]].setPickable(a)},t.setDragable=a=>{const s=Object.keys(n);for(let o=0;o<s.length;o++)n[s[o]].setDragable(a)},t.setContextVisibility=a=>{const s=Object.keys(n);for(let o=0;o<s.length;o++)n[s[o]].setContextVisibility(a)},t.setHandleVisibility=a=>{const s=Object.keys(n);for(let o=0;o<s.length;o++)n[s[o]].setHandleVisibility(a)},t.placeWidget=a=>e.widgetState.placeWidget(a),t.getPlaceFactor=()=>e.widgetState.getPlaceFactor(),t.setPlaceFactor=a=>e.widgetState.setPlaceFactor(a);let r=TLe;t.delete=A.chain(t.delete,()=>r()),e.widgetState&&(r=e.widgetState.onModified(()=>t.invokeWidgetChange(e.widgetState)).unsubscribe)}function Y$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,n),A.obj(t,e),A.get(t,e,["widgetState"]),A.event(t,e,"WidgetChange"),xLe(t,e)}const ELe=A.newInstance(Y$,"vtkAbstractWidget");var kLe={newInstance:ELe,extend:Y$};function OLe(t,e){e.classHierarchy.push("vtkCylinderSource");function n(r,a){if(e.deleted)return;let s=a[0];const o=2*Math.PI/e.resolution;let i=2*e.resolution,l=5*e.resolution;e.capping&&(i=4*e.resolution,l=7*e.resolution+2);const c=A.newTypedArray(e.pointType,i*3);let u=0;const f=new Uint32Array(l),d=new Float32Array(i*3),p=Tt.newInstance({numberOfComponents:3,values:d,name:"Normals"}),h=new Float32Array(i*2),g=Tt.newInstance({numberOfComponents:2,values:h,name:"TCoords"}),y=[0,0,0],m=[0,0,0],b=[0,0,0],C=[0,0,0],S=[0,0],T=[0,0],w=e.otherRadius==null?e.radius:e.otherRadius;for(let x=0;x<e.resolution;x++){y[0]=Math.cos(x*o+e.initAngle),m[0]=y[0],b[0]=e.radius*y[0]+e.center[0],C[0]=b[0],S[0]=Math.abs(2*x/e.resolution-1),T[0]=S[0],b[1]=.5*e.height+e.center[1],C[1]=-.5*e.height+e.center[1],S[1]=0,T[1]=1,y[2]=-Math.sin(x*o+e.initAngle),m[2]=y[2],b[2]=w*y[2]+e.center[2],C[2]=b[2];const E=2*x;for(let O=0;O<3;O++)d[E*3+O]=y[O],d[(E+1)*3+O]=m[O],c[E*3+O]=b[O],c[(E+1)*3+O]=C[O],O<2&&(h[E*2+O]=S[O],h[(E+1)*2+O]=T[O])}for(let x=0;x<e.resolution;x++){f[u++]=4,f[u++]=2*x,f[u++]=2*x+1;const E=(2*x+3)%(2*e.resolution);f[u++]=E,f[u++]=E-1}if(e.capping){for(let x=0;x<e.resolution;x++){b[0]=e.radius*Math.cos(x*o+e.initAngle),C[0]=b[0],S[0]=b[0],T[0]=b[0],b[0]+=e.center[0],C[0]+=e.center[0],y[1]=1,m[1]=-1,b[1]=.5*e.height+e.center[1],C[1]=-.5*e.height+e.center[1],b[2]=-w*Math.sin(x*o+e.initAngle),C[2]=b[2],S[1]=b[2],T[1]=b[2],b[2]+=e.center[2],C[2]+=e.center[2];const E=2*e.resolution+x,O=3*e.resolution+e.resolution-x-1;for(let k=0;k<3;k++)d[3*E+k]=y[k],d[3*O+k]=m[k],c[3*E+k]=b[k],c[3*O+k]=C[k],k<2&&(h[2*E+k]=S[k],h[2*O+k]=T[k])}f[u++]=e.resolution;for(let x=0;x<e.resolution;x++)f[u++]=2*e.resolution+x;f[u++]=e.resolution;for(let x=0;x<e.resolution;x++)f[u++]=3*e.resolution+x}Zo.buildFromRadian().translate(...e.center).rotateFromDirections([0,1,0],e.direction).translate(...e.center.map(x=>x*-1)).apply(c),s=or.newInstance(),s.getPoints().setData(c,3),s.getPolys().setData(f,1),s.getPointData().setNormals(p),s.getPointData().setTCoords(g),a[0]=s}t.requestData=n}const MLe={height:1,initAngle:0,radius:1,resolution:6,center:[0,0,0],direction:[0,1,0],capping:!0,pointType:"Float64Array"};function q$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,MLe,n),A.obj(t,e),A.setGet(t,e,["height","initAngle","otherRadius","radius","resolution","capping"]),A.setGetArray(t,e,["center","direction"],3),A.algo(t,e,0,1),OLe(t,e)}const RLe=A.newInstance(q$,"vtkCylinderSource");var _Le={newInstance:RLe,extend:q$};function VLe(t,e){e.classHierarchy.push("vtkPixelSpaceCallbackMapper"),e.callback||(e.callback=()=>{}),t.invokeCallback=(n,r,a,s,o)=>{if(!e.callback)return;const i=r.getCompositeProjectionMatrix(a,-1,1);$t(i,i);const l=n.getPoints(),c=new Float64Array(3),u=s.usize,f=s.vsize,d=u/2,p=f/2,h=[];for(let g=0;g<l.getNumberOfPoints();g+=1){const y=l.getPoint(g);It(c,y,i);const m=[c[0]*d+d,c[1]*p+p,c[2],0];if(o){const C=(Math.floor(m[1])*u+Math.floor(m[0]))*4,S=o[C]/255,T=o[C+1]/255,w=(S*256+T)/257;m[3]=w*2-1}h.push(m)}e.callback(h,r,a,o,[u,f])}}const DLe={callback:null,useZValues:!1};function X$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,DLe,n),ba.extend(t,e,n),A.setGet(t,e,["callback","useZValues"]),VLe(t,e)}const LLe=A.newInstance(X$,"vtkPixelSpaceCallbackMapper");var NLe={newInstance:LLe,extend:X$};function BLe(t,e){e.classHierarchy.push("vtkSphereSource"),t.requestData=(n,r)=>{if(e.deleted)return;let a=r[0];const s=a?a.getPoints().getDataType():e.pointType;a=or.newInstance();let o=0,{thetaResolution:i}=e,l=e.startTheta<e.endTheta?e.startTheta:e.endTheta;l*=Math.PI/180;let c=e.endTheta>e.startTheta?e.endTheta:e.startTheta;c*=Math.PI/180;let u=e.startPhi<e.endPhi?e.startPhi:e.endPhi;u*=Math.PI/180;let f=e.endPhi>e.startPhi?e.endPhi:e.startPhi;f*=Math.PI/180,Math.abs(l-c)<2*Math.PI&&++i;const d=(c-l)/e.thetaResolution,p=e.startPhi<=0?1:0,h=e.phiResolution+(e.endPhi>=180?-1:0),g=e.phiResolution*i+2,y=e.phiResolution*2*e.thetaResolution;let m=0,b=A.newTypedArray(s,g*3),C=new Float32Array(g*3),S=0,T=new Uint32Array(y*5);e.startPhi<=0&&(b[m*3+0]=e.center[0],b[m*3+1]=e.center[1],b[m*3+2]=e.center[2]+e.radius,C[m*3+0]=0,C[m*3+1]=0,C[m*3+2]=1,m++,o++),e.endPhi>=180&&(b[m*3+0]=e.center[0],b[m*3+1]=e.center[1],b[m*3+2]=e.center[2]-e.radius,C[m*3+0]=0,C[m*3+1]=0,C[m*3+2]=-1,m++,o++);const w=e.phiResolution-o,x=(f-u)/(e.phiResolution-1);for(let k=0;k<i;k++){const M=l+k*d;for(let D=p;D<h;D++){const I=u+D*x,B=e.radius*Math.sin(I);C[m*3+0]=B*Math.cos(M),C[m*3+1]=B*Math.sin(M),C[m*3+2]=e.radius*Math.cos(I),b[m*3+0]=C[m*3+0]+e.center[0],b[m*3+1]=C[m*3+1]+e.center[1],b[m*3+2]=C[m*3+2]+e.center[2];let F=Math.sqrt(C[m*3+0]*C[m*3+0]+C[m*3+1]*C[m*3+1]+C[m*3+2]*C[m*3+2]);F=F===0?1:F,C[m*3+0]/=F,C[m*3+1]/=F,C[m*3+2]/=F,m++}}const E=w*i;if(Math.abs(l-c)<2*Math.PI&&--i,e.startPhi<=0)for(let k=0;k<i;k++)T[S++]=3,T[S++]=w*k+o,T[S++]=w*(k+1)%E+o,T[S++]=0;if(e.endPhi>=180){const k=w-1+o;for(let M=0;M<i;M++)T[S++]=3,T[S++]=w*M+k,T[S++]=o-1,T[S++]=w*(M+1)%E+k}for(let k=0;k<i;k++)for(let M=0;M<w-1;M++){const D=w*k+M+o,I=D+1,B=(w*(k+1)+M)%E+o+1;e.latLongTessellation?(T[S++]=4,T[S++]=D,T[S++]=I,T[S++]=B,T[S++]=B-1):(T[S++]=3,T[S++]=D,T[S++]=I,T[S++]=B,T[S++]=3,T[S++]=D,T[S++]=B,T[S++]=B-1)}b=b.subarray(0,m*3),a.getPoints().setData(b,3),C=C.subarray(0,m*3);const O=Tt.newInstance({name:"Normals",values:C,numberOfComponents:3});a.getPointData().setNormals(O),T=T.subarray(0,S),a.getPolys().setData(T,1),r[0]=a}}const FLe={radius:.5,latLongTessellation:!1,thetaResolution:8,startTheta:0,endTheta:360,phiResolution:8,startPhi:0,endPhi:180,center:[0,0,0],pointType:"Float64Array"};function Z$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,FLe,n),A.obj(t,e),A.setGet(t,e,["radius","latLongTessellation","thetaResolution","startTheta","endTheta","phiResolution","startPhi","endPhi"]),A.setGetArray(t,e,["center"],3),A.algo(t,e,0,1),BLe(t,e)}const $Le=A.newInstance(Z$,"vtkSphereSource");var ULe={newInstance:$Le,extend:Z$};const ky="default";function Mk(t,e){const n=t.indexOf(e);n!==-1&&t.splice(n,1)}function ALe(t,e){e.classHierarchy.push("vtkWidgetState");const n=[];e.labels={},e.nestedStates=[],t.bindState=function(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[ky];if(e.nestedStates.push(r),n.push(r.onModified(t.modified)),Array.isArray(a)&&a.length)for(let s=0;s<a.length;s++){const o=a[s];e.labels[o]||(e.labels[o]=[]),e.labels[o].push(r)}else{const s=Array.isArray(a)?ky:a||ky;e.labels[s]||(e.labels[s]=[]),e.labels[s].push(r)}},t.unbindState=r=>{for(;n.length;)n.pop().unsubscribe();Mk(e.nestedStates,r);for(let a=0;a<e.nestedStates.length;a++)n.push(e.nestedStates[a].onModified(t.modified));Object.keys(e.labels).forEach(a=>{const s=e.labels[a];Mk(s,r)})},t.unbindAll=()=>{for(;n.length;)n.pop().unsubscribe();e.nestedStates=[]},t.activate=()=>t.setActive(!0),t.deactivate=r=>{r!==t&&t.setActive(!1);for(let a=0;a<e.nestedStates.length;a++)e.nestedStates[a].deactivate(r)},t.activateOnly=r=>{r&&r.setActive(!0),t.deactivate(r)},t.getStatesWithLabel=r=>e.labels[r],t.getAllNestedStates=()=>e.nestedStates,t.delete=A.chain(t.unbindAll,t.delete)}const WLe={active:!1};function ILe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,WLe,n),A.obj(t,e),A.setGet(t,e,["active"]),ALe(t,e)}var J$={extend:ILe};function PLe(t,e){const n=[],r=[...qt.INIT_BOUNDS];t.containsPoint=(a,s,o)=>Array.isArray(a)?qt.containsPoint(r,a[0],a[1],a[2]):qt.containsPoint(r,a,s,o),t.placeWidget=a=>{e.bounds=[];const s=[(a[0]+a[1])/2,(a[2]+a[3])/2,(a[4]+a[5])/2];for(let o=0;o<6;o++){const i=s[Math.floor(o/2)];n[o]=a[o],e.bounds[o]=(a[o]-i)*e.placeFactor+i}qt.setBounds(r,e.bounds),t.invokeBoundsChange(e.bounds),t.modified()},t.setPlaceFactor=a=>{if(e.placeFactor!==a){e.placeFactor=a,e.bounds=[];const s=[(n[0]+n[1])/2,(n[2]+n[3])/2,(n[4]+n[5])/2];for(let o=0;o<6;o++){const i=s[Math.floor(o/2)];e.bounds[o]=(n[o]-i)*e.placeFactor+i}qt.setBounds(r,e.bounds),t.invokeBoundsChange(e.bounds),t.modified()}}}const GLe={bounds:[-1,1,-1,1,-1,1],placeFactor:1};function zLe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,GLe,n),A.setGetArray(t,e,["bounds"],6),A.get(t,e,["placeFactor"]),A.event(t,e,"BoundsChange"),e.bounds=e.bounds.slice(),PLe(t,e)}var Q$={extend:zLe};const HLe={color:.5};function KLe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,HLe,n),A.setGet(t,e,["color"])}var jLe={extend:KLe};const YLe={color3:[255,255,255],opacity:255};function qLe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,YLe,n),A.setGetArray(t,e,["color3"],3,255),A.setGet(t,e,["opacity"])}var XLe={extend:qLe};function ZLe(t,e){t.translate=(n,r,a)=>{const[s,o,i]=t.getCornerByReference();t.setCorner(s+n,o+r,i+a)}}const JLe={corner:[0,0,0]};function QLe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,JLe,n),A.setGetArray(t,e,["corner"],3),ZLe(t)}var e3e={extend:QLe};function t3e(t,e){const n=e.angleUnit==="degree"?Zo.buildFromDegree():Zo.buildFromRadian();t.rotateFromDirections=(r,a)=>{n.identity().rotateFromDirections(r,a).apply(e.direction),t.modified()},t.rotate=(r,a)=>{n.identity().rotate(r,a).apply(e.direction)},t.rotateX=r=>{n.identity().rotateX(r).apply(e.direction)},t.rotateY=r=>{n.identity().rotateY(r).apply(e.direction)},t.rotateZ=r=>{n.identity().rotateZ(r).apply(e.direction)}}const n3e={direction:[1,0,0]};function r3e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,n3e,n),A.setGetArray(t,e,["direction"],3),t3e(t,e)}var a3e={extend:r3e};function s3e(t,e){t.updateManipulator=()=>{if(e.manipulator){const{origin:n,normal:r,direction:a}=e,{setHandleOrigin:s,setHandleCenter:o,setHandleNormal:i,setHandleDirection:l}=e.manipulator;n&&s?s(n):n&&o&&o(n),a&&l?l(a):a&&!r&&i?i(a):r&&l&&l(r)}}}const o3e={manipulator:null};function i3e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,o3e,n),A.setGet(t,e,["manipulator"]),s3e(t,e)}var l3e={extend:i3e};const c3e={name:""};function u3e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,c3e,n),A.setGet(t,e,["name"])}var f3e={extend:u3e};function Oy(t,e){return t.length===3&&e.length===3&&t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function d3e(t,e,n,r){return Oy(t,r.o)&&Oy(e,r.p1)&&Oy(n,r.p2)}function p3e(t,e){const n={o:[],p1:[],p2:[]};t.normalize=()=>{ts(e.up),ts(e.right),ts(e.direction),t.modified()},t.updateFromOriginRightUp=(r,a,s)=>{d3e(r,a,s,n)||(n.o=r.slice(),n.p1=a.slice(),n.p2=s.slice(),e.up=[s[0]-r[0],s[1]-r[1],s[2]-r[2]],e.right=[a[0]-r[0],a[1]-r[1],a[2]-r[2]],_r(e.up,e.right,e.direction),_r(e.direction,e.up,e.right),t.normalize(),t.modified())}}const g3e={up:[0,1,0],right:[1,0,0],direction:[0,0,1]};function h3e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,g3e,n),A.setGetArray(t,e,["up","right","direction"],3),p3e(t,e)}var v3e={extend:h3e};function y3e(t,e){const n={...t};t.translate=(r,a,s)=>{const[o,i,l]=t.getOriginByReference();t.setOrigin(o+r,i+a,l+s)},t.getOrigin=r=>{const a=n.getOrigin();if(!e.offset)return a;if(!r)return bs.add(a,e.offset,a);const s=Zb(a,r),{rendererPixelDims:o}=r,i=Math.min(o[0],o[1]);return bs.multiplyAccumulate(a,e.offset,i*s,a)}}const m3e={origin:null,offset:null};function C3e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,m3e,n),A.setGetArray(t,e,["origin","offset"],3),y3e(t,e)}var S3e={extend:C3e};const b3e={scale1:.5};function w3e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,b3e,n),A.setGet(t,e,["scale1"])}var T3e={extend:w3e};const x3e={scale3:[1,1,1]};function E3e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,x3e,n),A.setGetArray(t,e,["scale3"],3)}var k3e={extend:E3e};const O3e={text:"DefaultText"};function M3e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,O3e,n),A.setGet(t,e,["text"])}var R3e={extend:M3e};const _3e={visible:!0};function V3e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_3e,n),A.setGet(t,e,["visible"]),t.isVisible=t.getVisible}var D3e={extend:V3e};const L3e={shape:""};function N3e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,L3e,n),A.setGet(t,e,["shape"])}var B3e={extend:N3e};const{vtkErrorMacro:F3e}=A,$3e={bounds:Q$,color:jLe,color3:XLe,corner:e3e,direction:a3e,manipulator:l3e,name:f3e,orientation:v3e,origin:S3e,scale1:T3e,scale3:k3e,text:R3e,visible:D3e,shape:B3e};function My(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)||J$.extend(n,r,e);for(let s=0;s<t.length;s++){const o=$3e[t[s]];o?o.extend(n,r,e):F3e("Invalid mixin name:",t[s])}return A.safeArrays(r),Object.freeze(n)}class U3e{constructor(){this.publicAPI={},this.model={},J$.extend(this.publicAPI,this.model),Q$.extend(this.publicAPI,this.model)}addDynamicMixinState(e){let{labels:n,mixins:r,name:a,initialValues:s}=e;const o=`${a}List`;return this.model[o]=[],this.publicAPI[`add${A.capitalize(a)}`]=i=>{const l=My(r,{...s,...i});return this.publicAPI.bindState(l,n),this.model[o].push(l),this.publicAPI.modified(),l},this.publicAPI[`remove${A.capitalize(a)}`]=i=>{let l=this.model[o].indexOf(i);l===-1&&i<this.model[o].length&&(l=i);const c=this.model[o][l];c&&this.publicAPI.unbindState(c),this.model[o].splice(l,1),this.publicAPI.modified()},this.publicAPI[`get${A.capitalize(a)}List`]=()=>this.model[o].slice(),this.publicAPI[`clear${A.capitalize(a)}List`]=()=>{for(;this.model[o].length;){const i=this.model[o].pop();i&&this.publicAPI.unbindState(i)}this.publicAPI.modified()},this}addStateFromMixin(e){let{labels:n,mixins:r,name:a,initialValues:s}=e;const o=My(r,s);return this.model[a]=o,this.publicAPI.bindState(o,n),A.setGet(this.publicAPI,this.model,[a]),this}addStateFromInstance(e){let{labels:n,name:r,instance:a}=e;return this.model[r]=a,this.publicAPI.bindState(a,n),A.setGet(this.publicAPI,this.model,[r]),this}addField(e){let{name:n,initialValue:r}=e;return Array.isArray(r)?A.setGetArray(this.publicAPI,this.model,[n],r.length):A.setGet(this.publicAPI,this.model,[n]),this.model[n]=r,this}build(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return My(n,{},this.publicAPI,this.model,!0)}}function A3e(){return new U3e}var W3e={createBuilder:A3e};const L1={HANDLE:0,CONTEXT:1},{vtkErrorMacro:I3e,vtkWarningMacro:P3e}=A,G3e=["active","inactive","static"];function Rk(t,e){t&&t.setResolveCoincidentTopologyToPolygonOffset&&(t.setResolveCoincidentTopologyToPolygonOffset(),sv.forEach(n=>{if(e[n]){const r=`setRelativeCoincidentTopology${n}OffsetParameters`;if(t[r]){const{factor:a,offset:s}=e[n];t[r](a,s)}}}))}function z3e(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const a={active:{},inactive:{},static:{}};return G3e.forEach(s=>{const o=a[s];t.forEach(i=>{o[i]||(o[i]={}),n.filter(l=>l&&l[s]&&l[s][i]).forEach(l=>Object.assign(o[i],l[s][i]))})}),a}function H3e(t,e,n){n?Object.keys(t).forEach(r=>{const a=t[r].actor===n?e.active[r]:e.inactive[r];a&&t[r].actor.getProperty().set(a)}):(Object.keys(e.static).forEach(r=>{t[r]&&t[r].actor.getProperty().set(e.static[r])}),Object.keys(e.inactive).forEach(r=>{t[r]&&t[r].actor.getProperty().set(e.inactive[r])}))}function K3e(t){let e=t.source;t.filter&&(e.isA("vtkDataSet")?t.filter.setInputData(e):t.filter.setInputConnection(e.getOutputPort()),e=t.filter),e&&(e.isA("vtkDataSet")?t.mapper.setInputData(e):t.mapper.setInputConnection(e.getOutputPort())),t.glyph&&t.mapper.setInputConnection(t.glyph.getOutputPort(),1),t.actor.setMapper(t.mapper)}function j3e(t,e){e.classHierarchy.push("vtkWidgetRepresentation");const n={mtimes:{},states:[]};e._onCoincidentTopologyParametersChanged=()=>{t.getActors().forEach(r=>{Rk(r.getMapper(),e.coincidentTopologyParameters)})},t.getActors=()=>e.actors,t.getNestedProps=t.getActors,t.setLabels=function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];a.length===1?e.labels=[].concat(a[0]):e.labels=a,t.modified()},t.getRepresentationStates=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.inputData[0];return n.mtimes.representation===t.getMTime()&&n.mtimes.input===r.getMTime()||(n.mtimes.representation=t.getMTime(),n.mtimes.input=r.getMTime(),n.states=[],e.labels.forEach(a=>{n.states=n.states.concat(r.getStatesWithLabel(a)||[])})),n.states},t.getSelectedState=(r,a)=>{const s=t.getRepresentationStates();return a<s.length?s[a]:(I3e(`Representation ${t.getClassName()} should implement getSelectedState(prop, compositeID) method.`),null)},t.updateActorVisibility=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zh.FRONT_BUFFER,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=!0;switch(e.behavior){case L1.HANDLE:o=r===zh.PICKING_BUFFER||s;break;case L1.CONTEXT:o=a;break;default:o=!0;break}const i=o;for(let l=0;l<e.actors.length;l++)e.visibilityFlagArray?e.actors[l].setVisibility(i&&e.visibilityFlagArray[l]):e.actors[l].setVisibility(i);if(e.alwaysVisibleActors)for(let l=0;l<e.alwaysVisibleActors.length;l++)e.alwaysVisibleActors[l].setVisibility(!0)},e.actors.push=function(){P3e("You should use publicAPI.addActor() to initialize the actor properly");for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];a.forEach(o=>t.addActor(o))},t.addActor=r=>{Rk(r.getMapper(),e.coincidentTopologyParameters),Array.prototype.push.apply(e.actors,[r])},t.setLabels(e.labels)}function Y3e(t){return{activeScaleFactor:1.2,activeColor:1,useActiveColor:!0,actors:[],labels:[],behavior:L1.CONTEXT,coincidentTopologyParameters:{Point:{factor:-1,offset:-1},Line:{factor:-1,offset:-1},Polygon:{factor:-1,offset:-1}},scaleInPixels:!1,displayScaleParams:{dispHeightFactor:1,cameraPosition:[0,0,0],cameraDir:[1,0,0],isParallel:!1,rendererPixelDims:[1,1]},_internalArrays:{},...t}}function q3e(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};_l.extend(t,e,Y3e(n)),A.algo(t,e,1,1),A.get(t,e,["labels","displayScaleParams","coincidentTopologyParameters"]),A.set(t,e,[{type:"object",name:"displayScaleParams"},{type:"object",name:"coincidentTopologyParameters"}]),A.setGet(t,e,["scaleInPixels","activeScaleFactor","activeColor","useActiveColor"]),j3e(t,e)}var hs={extend:q3e,mergeStyles:z3e,applyStyles:H3e,connectPipeline:K3e};const{RenderingTypes:X3e}=qb,{Interpolation:Z3e,Representation:_k}=wC;function J3e(){return W3e.createBuilder().addField({name:"origin",initialValue:[0,0,0]}).addField({name:"normal",initialValue:[0,0,1]}).addField({name:"activeHandle",initialValue:null}).addField({name:"updateMethodName"}).build()}const Q3e=["plane","outline","normal","origin","display2D"],eNe={active:{plane:{opacity:1,color:[0,.9,0]},normal:{opacity:1,color:[0,.9,0]},origin:{opacity:1,color:[0,.9,0]}},inactive:{plane:{opacity:.6,color:[1,1,1]},normal:{opacity:1,color:[.9,0,0]},origin:{opacity:1,color:[1,0,0]}},static:{display2D:{representation:_k.POINT},outline:{color:[1,1,1],opacity:1,representation:_k.WIREFRAME,interpolation:Z3e.FLAT}}};function tNe(t,e){e.classHierarchy.push("vtkImplicitPlaneRepresentation"),e.plane=Ms.newInstance(),e.matrix=Zo.buildFromDegree(),e._pipelines={},e._pipelines.outline={source:x_.newInstance(),mapper:ba.newInstance(),actor:Ca.newInstance({pickable:!1,_parentProp:t})},e._pipelines.plane={source:b_.newInstance({cutFunction:e.plane}),filter:C_.newInstance(),mapper:ba.newInstance(),actor:Ca.newInstance({pickable:!0,_parentProp:t})},e._pipelines.origin={source:ULe.newInstance(),mapper:ba.newInstance(),actor:Ca.newInstance({pickable:!0,_parentProp:t})},e._pipelines.normal={source:_Le.newInstance(),mapper:ba.newInstance(),actor:Ca.newInstance({pickable:!0,_parentProp:t})},e._pipelines.display2D={source:t,mapper:NLe.newInstance(),actor:Ca.newInstance({pickable:!1,_parentProp:t})},e._pipelines.plane.source.setInputConnection(e._pipelines.outline.source.getOutputPort()),hs.connectPipeline(e._pipelines.outline),hs.connectPipeline(e._pipelines.plane),hs.connectPipeline(e._pipelines.origin),hs.connectPipeline(e._pipelines.normal),hs.connectPipeline(e._pipelines.display2D),t.addActor(e._pipelines.outline.actor),t.addActor(e._pipelines.plane.actor),t.addActor(e._pipelines.origin.actor),t.addActor(e._pipelines.normal.actor),t.addActor(e._pipelines.display2D.actor),t.requestData=(n,r)=>{const a=n[0],s=a.getOrigin();if(!s)return;const o=a.getNormal(),i=a.getBounds();e.plane.setOrigin(s),e.plane.setNormal(o),e._pipelines.outline.source.setCenter((i[0]+i[1])*.5,(i[2]+i[3])*.5,(i[4]+i[5])*.5);const l=i[1]-i[0],c=i[3]-i[2],u=i[5]-i[4];e._pipelines.outline.source.setXLength(l),e._pipelines.outline.source.setYLength(c),e._pipelines.outline.source.setZLength(u);let f=1;e.scaleInPixels&&(f=Zb(s,e.displayScaleParams)),e._pipelines.normal.source.set({height:Math.max(l,c,u),radius:e.handleSizeRatio*Math.min(l,c,u)*e.axisScale*f,resolution:e.sphereResolution});const d=e._pipelines.normal.source.getOutputData(),p=or.newInstance();p.shallowCopy(d),p.getPoints().setData(Float32Array.from(d.getPoints().getData()),3),p.getPointData().removeAllArrays(),e.matrix.identity().translate(s[0],s[1],s[2]).rotateFromDirections([0,1,0],o).apply(p.getPoints().getData()),e._pipelines.normal.mapper.setInputData(p),e._pipelines.origin.actor.setPosition(s);const h=e.handleSizeRatio*Math.min(l,c,u)*f;e._pipelines.origin.actor.setScale(h,h,h),hs.applyStyles(e._pipelines,e.representationStyle,a.getActive()&&a.getActiveHandle());const g=or.newInstance();g.shallowCopy(e._pipelines.plane.filter.getOutputData()),r[0]=g},t.setSphereResolution=n=>(e.sphereResolution=n,e._pipelines.origin.source.setPhiResolution(n)&&e._pipelines.origin.source.setThetaResolution(n)),t.setRepresentationStyle=n=>{e.representationStyle=hs.mergeStyles(Q3e,e.representationStyle,n),hs.applyStyles(e._pipelines,e.representationStyle),t.modified()},t.updateActorVisibility=(n,r,a)=>{const{planeVisible:s,originVisible:o,normalVisible:i,outlineVisible:l}=e;if(n===X3e.PICKING_BUFFER)e._pipelines.plane.actor.setVisibility(s),e._pipelines.origin.actor.setVisibility(o),e._pipelines.normal.actor.setVisibility(i),e._pipelines.plane.actor.getProperty().setOpacity(1);else{e._pipelines.outline.actor.setVisibility(l&&r),e._pipelines.plane.actor.setVisibility(s&&a),e._pipelines.origin.actor.setVisibility(o&&a),e._pipelines.normal.actor.setVisibility(i&&a);const c=e.inputData[0];c&&hs.applyStyles(e._pipelines,e.representationStyle,c.getActive()&&c.getActiveHandle())}},t.getSelectedState=(n,r)=>{const a=e.inputData[0];switch(a.setActiveHandle(n),n){case e._pipelines.plane.actor:a.setUpdateMethodName("updateFromPlane");break;case e._pipelines.origin.actor:a.setUpdateMethodName("updateFromOrigin");break;case e._pipelines.normal.actor:a.setUpdateMethodName("updateFromNormal");break;default:a.setUpdateMethodName("updateFromPlane");break}return a},t.setRepresentationStyle(eNe),t.setSphereResolution(e.sphereResolution)}const nNe={sphereResolution:24,handleSizeRatio:.05,axisScale:.1,normalVisible:!0,originVisible:!0,planeVisible:!0,outlineVisible:!0};function e4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,nNe,n),hs.extend(t,e,n),A.get(t,e,["sphereResolution","representationStyle"]),A.setGet(t,e,["handleSizeRatio","axisScale","normalVisible","originVisible","planeVisible","outlineVisible"]),tNe(t,e)}const rNe=A.newInstance(e4,"vtkImplicitPlaneRepresentation");var t4={newInstance:rNe,extend:e4,generateState:J3e};function aNe(t,e){e.classHierarchy.push("vtkAbstractManipulator"),t.getOrigin=n=>e.userOrigin?e.userOrigin:e.useCameraFocalPoint?n.pokedRenderer.getActiveCamera().getFocalPoint():e.handleOrigin?e.handleOrigin:e.widgetOrigin?e.widgetOrigin:[0,0,0],t.getNormal=n=>e.userNormal?e.userNormal:e.useCameraNormal?n.pokedRenderer.getActiveCamera().getDirectionOfProjection():e.handleNormal?e.handleNormal:e.widgetNormal?e.widgetNormal:[0,0,1]}const sNe={useCameraFocalPoint:!1,useCameraNormal:!1};function n4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,sNe,n),A.obj(t,e),A.setGet(t,e,["useCameraFocalPoint","useCameraNormal"]),A.setGetArray(t,e,["userOrigin","handleOrigin","widgetOrigin","userNormal","handleNormal","widgetNormal"],3),aNe(t,e)}const oNe=A.newInstance(n4,"vtkAbstractManipulator");var Jb={extend:n4,newInstance:oNe};function r4(t,e,n,r,a,s){if(1-Math.abs(kt(a.getActiveCamera().getViewPlaneNormal(),r))<Jh)return[];const i=s.displayToWorld(t,e,0,a),l=s.displayToWorld(t,e,1,a),c=[0,0,0];Es(l,i,c);const u=[0,0,0];_r(r,c,u),_r(u,c,u);const f=kt([i[0]-n[0],i[1]-n[1],i[2]-n[2]],u),d=kt(u,r),p=r.slice();return d===0?th(p,0):th(p,f/d),bf(n,p,p),p}function iNe(t,e){e.classHierarchy.push("vtkLineManipulator"),t.handleEvent=(n,r)=>({worldCoords:r4(n.position.x,n.position.y,t.getOrigin(n),t.getNormal(n),n.pokedRenderer,r)})}function lNe(t){return{...t}}function a4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Jb.extend(t,e,lNe(n)),iNe(t,e)}const cNe=A.newInstance(a4,"vtkLineManipulator");var uNe={projectDisplayToLine:r4,extend:a4,newInstance:cNe};function s4(t,e,n,r,a,s,o,i){const l=n-t,c=r-e,u=o.getActiveCamera(),f=u.getViewUp(),d=u.getDirectionOfProjection(),p=o.getRenderWindow().getInteractor().getView().getViewportSize(o),h=360*l/p[0],g=360*c/p[1],y=new Float64Array([s[0],s[1],s[2]]),m=f,b=[0,0,0];_r(d,f,b);const C=ct(new Float64Array(16));return ia(C,C,xn(h),m),ia(C,C,xn(-g),b),It(y,y,C),y}function fNe(t,e){e.classHierarchy.push("vtkTrackballManipulator");let n=0,r=0;t.handleEvent=(a,s)=>{const o=s4(n,r,a.position.x,a.position.y,t.getOrigin(a),t.getNormal(a),a.pokedRenderer);return n=a.position.x,r=a.position.y,{worldCoords:o}},t.reset=a=>{n=a.position.x,r=a.position.y}}function dNe(t){return{...t}}function o4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Jb.extend(t,e,dNe(n)),fNe(t,e)}const pNe=A.newInstance(o4,"vtkTrackballManipulator");var gNe={trackballRotate:s4,extend:o4,newInstance:pNe};function i4(t,e,n,r,a,s){const o=s.displayToWorld(t,e,0,a),i=s.displayToWorld(t,e,1,a);return Ms.intersectWithLine(o,i,n,r).x}function hNe(t,e){e.classHierarchy.push("vtkPlaneManipulator"),t.handleEvent=(n,r)=>({worldCoords:i4(n.position.x,n.position.y,t.getOrigin(n),t.getNormal(n),n.pokedRenderer,r)})}function vNe(t){return{...t}}function l4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Jb.extend(t,e,vNe(n)),hNe(t,e)}const yNe=A.newInstance(l4,"vtkPlaneManipulator");var mNe={intersectDisplayWithPlane:i4,extend:l4,newInstance:yNe};function CNe(t,e){e.classHierarchy.push("vtkPlaneWidget"),e._isDragging=!1,t.setDisplayCallback=n=>e.representations[0].setDisplayCallback(n),t.updateCursor=()=>{switch(e.activeState.getUpdateMethodName()){case"updateFromOrigin":e._apiSpecificRenderWindow.setCursor("crosshair");break;case"updateFromPlane":e._apiSpecificRenderWindow.setCursor("move");break;case"updateFromNormal":e._apiSpecificRenderWindow.setCursor("alias");break;default:e._apiSpecificRenderWindow.setCursor("grabbing");break}},t.handleLeftButtonPress=n=>!e.activeState||!e.activeState.getActive()||!e.pickable?A.VOID:(e.lineManipulator.setWidgetOrigin(e.widgetState.getOrigin()),e.planeManipulator.setWidgetOrigin(e.widgetState.getOrigin()),e.trackballManipulator.reset(n),e.dragable&&(e._isDragging=!0,e._apiSpecificRenderWindow.setCursor("grabbing"),e._interactor.requestAnimation(t)),t.invokeStartInteractionEvent(),A.EVENT_ABORT),t.handleMouseMove=n=>e._isDragging?t.handleEvent(n):A.VOID,t.handleLeftButtonRelease=()=>!e.activeState||!e.activeState.getActive()||!e.pickable?A.VOID:(e._isDragging&&(e._interactor.cancelAnimation(t),e._isDragging=!1),e.widgetState.deactivate(),t.invokeEndInteractionEvent(),A.EVENT_ABORT),t.handleEvent=n=>e.pickable&&e.activeState&&e.activeState.getActive()?(t[e.activeState.getUpdateMethodName()](n),t.invokeInteractionEvent(),A.EVENT_ABORT):A.VOID,t.updateFromOrigin=n=>{e.planeManipulator.setWidgetNormal(e.widgetState.getNormal());const{worldCoords:r}=e.planeManipulator.handleEvent(n,e._apiSpecificRenderWindow);e.widgetState.containsPoint(r)&&e.activeState.setOrigin(r)},t.updateFromPlane=n=>{e.lineManipulator.setWidgetNormal(e.activeState.getNormal());const{worldCoords:r}=e.lineManipulator.handleEvent(n,e._apiSpecificRenderWindow);e.widgetState.containsPoint(...r)&&e.activeState.setOrigin(r)},t.updateFromNormal=n=>{e.trackballManipulator.setWidgetNormal(e.activeState.getNormal());const{worldCoords:r}=e.trackballManipulator.handleEvent(n,e._apiSpecificRenderWindow);e.activeState.setNormal(r)},e.lineManipulator=uNe.newInstance(),e.planeManipulator=mNe.newInstance(),e.trackballManipulator=gNe.newInstance()}function SNe(t,e){e.classHierarchy.push("vtkPlaneWidget"),e.methodsToLink=["representationStyle","sphereResolution","handleSizeRatio","axisScale","normalVisible","originVisible","planeVisible","outlineVisible"],t.getRepresentationsForViewType=n=>{switch(n){case Xu.DEFAULT:case Xu.GEOMETRY:case Xu.SLICE:case Xu.VOLUME:default:return[{builder:t4}]}}}const bNe=t=>({behavior:CNe,widgetState:t4.generateState(),...t});function c4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bNe(n)),kLe.extend(t,e,n),SNe(t,e)}const wNe=A.newInstance(c4,"vtkImplicitPlaneWidget");var TNe={newInstance:wNe,extend:c4};const xNe={__name:"StlView",setup(t){const e=P(),n=P([]),r=N$.newInstance(),a=qt.newInstance(),s={},o=r.getRenderer(),i=r.getRenderWindow(),l=wLe.newInstance();l.setRenderer(o);for(const u of Pg){const f=TNe.newInstance(),d=[0,0,0];d[u.mode]=1,f.getWidgetState().setNormal(...d);const p=Ig(u.color),h=l.addWidget(f),g=h.getRepresentationStyle();h.setDragable(!1),h.setNormalVisible(!1),h.setOriginVisible(!1),h.setOutlineVisible(!1),h.setPickable(!1),g.inactive.plane={representation:1,color:[p.r,p.g,p.b]},g.inactive.outline={},g.static.display2D={},s[u.mode]={widget:f,instance:h}}const c=async()=>{const u=Object.keys(mt.files.nifti2draco_path),f=mt.diagnoses.flatMap(d=>d.children);for(const d of u){const p=await ho.get(`/${mt.files.nifti2draco_path[d]}`,{responseType:"arraybuffer"}),h=kk.newInstance(),g=ba.newInstance({scalarVisibility:!1}),y=Ca.newInstance();y.setMapper(g),g.setInputConnection(h.getOutputPort());const m=f.find(S=>S.name==d),b=Ig(m.color);y.getProperty().setColor(b.r,b.g,b.b),h.parseAsArrayBuffer(p.data),o.addActor(y);const C=y.getBounds();a.addBounds(C),n.value=[...n.value,{name:d,actor:y}]}};return pe(()=>mt.labelMaps,()=>{const u=mt.labelMaps.flatMap(f=>f.children);for(const f of u){const d=n.value.find(g=>g.name===f.name);if(!d)continue;const p=Ig(f.color);d.actor.getProperty().setColor(p.r,p.g,p.b);const h=f.checked?1:0;d.actor.getProperty().setOpacity(h)}i.render()}),pe(()=>mt.currentSlices,()=>{const u=a.getCenter(),f=a.getBounds(),d=Math.round(f[0]),p=Math.floor(f[1]),h=Math.round(f[2]),g=Math.floor(f[3]),y=Math.round(f[4]),m=Math.floor(f[5]),b=Math.min(Math.max(mt.currentSlices[0],d),p),C=Math.min(Math.max(mt.currentSlices[1],h),g),S=Math.min(Math.max(m-mt.currentSlices[2],y),m);s[0].widget.getWidgetState().setOrigin(b,u[1],u[2]),s[1].widget.getWidgetState().setOrigin(u[0],C,u[2]),s[2].widget.getWidgetState().setOrigin(u[0],u[1],S),i.render()}),at(async()=>{window.module={},await fLe.loadScript("https://unpkg.com/draco3d@1.3.4/draco_decoder_nodejs.js").then(()=>{kk.setDracoDecoder(window.CreateDracoModule)}),await c(),r.setContainer(e.value),r.resize();for(const u of Object.values(s))u.widget.getWidgetState().setOrigin(a.getCenter()),u.widget.placeWidget(a.getBounds());o.resetCamera(),i.render()}),(u,f)=>(V(),z("div",{ref_key:"container",ref:e,class:"container"},null,512))}},ENe=_d(xNe,[["__scopeId","data-v-36d5a0e3"]]),kNe={class:"grid"},ONe={__name:"QuadView",setup(t){const e=P([]);return pe(()=>mt.imageData,()=>{const n=mt.imageData.getPointData().getScalars().getRange(),r=1,a=n[1]-n[0],s=n[0],o=n[1],i=.5*(n[1]+n[0]);e.value=kDe.map((l,c)=>({slicingMode:l,colorWindowMin:r,colorWindowMax:a,colorWindow:a,colorLevelMin:s,colorLevelMax:o,colorLevel:i,index:c}))},{immediate:!0}),(n,r)=>(V(),z("div",kNe,[(V(!0),z(Ue,null,gt(e.value,a=>(V(),ae(GDe,{sliceProps:a},null,8,["sliceProps"]))),256)),j(ENe)]))}},MNe=_d(ONe,[["__scopeId","data-v-a763e5d6"]]),Vk=new Map([["bmp","bmp"],["dcm","gdcm"],["gipl","gipl"],["gipl.gz","gipl"],["hdf5","hdf5"],["jpg","jpeg"],["jpeg","jpeg"],["iwi","wasm"],["iwi.cbor","wasm"],["iwi.cbor.zst","wasmZstd"],["lsm","lsm"],["mnc","mnc"],["mnc.gz","mnc"],["mnc2","mnc"],["mgh","mgh"],["mgz","mgh"],["mgh.gz","mgh"],["mha","meta"],["mhd","meta"],["mrc","mrc"],["nia","nifti"],["nii","nifti"],["nii.gz","nifti"],["hdr","nifti"],["nrrd","nrrd"],["nhdr","nrrd"],["png","png"],["pic","bioRad"],["tif","tiff"],["tiff","tiff"],["vtk","vtk"],["isq","scanco"],["aim","scanco"],["fdf","fdf"]]),Yt={Int8:"int8",UInt8:"uint8",Int16:"int16",UInt16:"uint16",Int32:"int32",UInt32:"uint32",Int64:"int64",UInt64:"uint64",SizeValueType:"uint64",IdentifierType:"uint64",IndexValueType:"int64",OffsetValueType:"int64"},RNe={Float32:"float32",Float64:"float64",SpacePrecisionType:"float64"},ms=RNe;function $i(t,e){let n=null;switch(t){case Yt.UInt8:{n=new Uint8Array(e);break}case Yt.Int8:{n=new Int8Array(e);break}case Yt.UInt16:{n=new Uint16Array(e);break}case Yt.Int16:{n=new Int16Array(e);break}case Yt.UInt32:{n=new Uint32Array(e);break}case Yt.Int32:{n=new Int32Array(e);break}case Yt.UInt64:{typeof globalThis.BigUint64Array=="function"?n=new BigUint64Array(e):n=new Uint8Array(e);break}case Yt.Int64:{typeof globalThis.BigInt64Array=="function"?n=new BigInt64Array(e):n=new Uint8Array(e);break}case ms.Float32:{n=new Float32Array(e);break}case ms.Float64:{n=new Float64Array(e);break}case"null":{n=null;break}case null:{n=null;break}default:throw new Error("Type is not supported as a TypedArray")}return n}const _Ne={Unknown:"Unknown",Scalar:"Scalar",RGB:"RGB",RGBA:"RGBA",Offset:"Offset",Vector:"Vector",Point:"Point",CovariantVector:"CovariantVector",SymmetricSecondRankTensor:"SymmetricSecondRankTensor",DiffusionTensor3D:"DiffusionTensor3D",Complex:"Complex",FixedArray:"FixedArray",Array:"Array",Matrix:"Matrix",VariableLengthVector:"VariableLengthVector",VariableSizeMatrix:"VariableSizeMatrix"},u4=_Ne;class VNe{constructor(e=2,n=Yt.UInt8,r=u4.Scalar,a=1){zn(this,"dimension");zn(this,"componentType");zn(this,"pixelType");zn(this,"components");this.dimension=e,this.componentType=n,this.pixelType=r,this.components=a}}function DNe(t,e,n,r,a){t[r+n*e]=a}let LNe=class{constructor(e=new VNe){zn(this,"imageType");zn(this,"name","image");zn(this,"origin");zn(this,"spacing");zn(this,"direction");zn(this,"size");zn(this,"metadata");zn(this,"data");this.imageType=e;const n=e.dimension;this.origin=new Array(n),this.origin.fill(0),this.spacing=new Array(n),this.spacing.fill(1),this.direction=new Float64Array(n*n),this.direction.fill(0);for(let r=0;r<n;r++)DNe(this.direction,n,r,r,1);this.size=new Array(n),this.size.fill(0),this.metadata=new Map,this.data=null}};function NNe(t){let e=t.slice((t.lastIndexOf(".")-1>>>0)+2);if(e.toLowerCase()==="gz"){const n=t.slice(0,-3).lastIndexOf(".");e=t.slice((n-1>>>0)+2)}else if(e.toLowerCase()==="cbor"){const n=t.slice(0,-5).lastIndexOf(".");e=t.slice((n-1>>>0)+2)}else if(e.toLowerCase()==="zst"){const n=t.slice(0,-10).lastIndexOf(".");e=t.slice((n-1>>>0)+2)}else if(e.toLowerCase()==="zip"){const n=t.slice(0,-4).lastIndexOf(".");e=t.slice((n-1>>>0)+2)}return e}function Dk(t,e){const n={...t.imageType};if(typeof e<"u"&&typeof e.pixelType<"u"&&(n.pixelType=e.pixelType,e.pixelType===u4.Scalar&&n.components!==1))throw new Error("Cannot cast multi-component image to a scalar image");typeof e<"u"&&typeof e.componentType<"u"&&e.componentType!==t.imageType.componentType&&(n.componentType=e.componentType);const r=new LNe(n);if(r.name=t.name,r.origin=Array.from(t.origin),r.spacing=Array.from(t.spacing),r.direction=t.direction.slice(),r.size=Array.from(t.size),r.metadata=new Map(JSON.parse(JSON.stringify(Array.from(t.metadata)))),t.data!==null)if(typeof e<"u"&&typeof e.componentType<"u"&&e.componentType!==t.imageType.componentType)switch(t.imageType.componentType){case Yt.UInt8:case Yt.Int8:case Yt.UInt16:case Yt.Int16:case Yt.UInt32:case Yt.Int32:case ms.Float32:case ms.Float64:switch(r.imageType.componentType){case Yt.UInt8:r.data=new Uint8Array(t.data);break;case Yt.Int8:r.data=new Int8Array(t.data);break;case Yt.UInt16:r.data=new Uint16Array(t.data);break;case Yt.Int16:r.data=new Int16Array(t.data);break;case Yt.UInt32:r.data=new Uint32Array(t.data);break;case Yt.Int32:r.data=new Int32Array(t.data);break;case ms.Float32:r.data=new Float32Array(t.data);break;case ms.Float64:r.data=new Float64Array(t.data);break;case Yt.UInt64:r.data=new BigUint64Array(t.data.length);for(let a=0;a<r.data.length;a++)r.data[a]=BigInt.asIntN(64,BigInt(t.data[a]));break;case Yt.Int64:r.data=new BigInt64Array(t.data.length);for(let a=0;a<r.data.length;a++)r.data[a]=BigInt.asUintN(64,BigInt(t.data[a]));break}break;case Yt.UInt64:case Yt.Int64:switch(r.imageType.componentType){case Yt.UInt8:r.data=new Uint8Array(t.data.length);for(let a=0;a<r.data.length;a++)r.data[a]=Number(t.data[a]);break;case Yt.Int8:r.data=new Int8Array(t.data.length);for(let a=0;a<r.data.length;a++)r.data[a]=Number(t.data[a]);break;case Yt.UInt16:r.data=new Uint16Array(t.data.length);for(let a=0;a<r.data.length;a++)r.data[a]=Number(t.data[a]);break;case Yt.Int16:r.data=new Int16Array(t.data.length);for(let a=0;a<r.data.length;a++)r.data[a]=Number(t.data[a]);break;case Yt.UInt32:r.data=new Uint32Array(t.data.length);for(let a=0;a<r.data.length;a++)r.data[a]=Number(t.data[a]);break;case Yt.Int32:r.data=new Int32Array(t.data.length);for(let a=0;a<r.data.length;a++)r.data[a]=Number(t.data[a]);break;case ms.Float32:r.data=new Float32Array(t.data.length);for(let a=0;a<r.data.length;a++)r.data[a]=Number(t.data[a]);break;case ms.Float64:r.data=new Float64Array(t.data.length);for(let a=0;a<r.data.length;a++)r.data[a]=Number(t.data[a]);break;case Yt.UInt64:r.data=new BigUint64Array(t.data);break;case Yt.Int64:r.data=new BigInt64Array(t.data);break}break}else{const a=t.data.constructor;r.data=new a(t.data.length),r.data!=null&&r.data.set(t.data,0)}return r}class BNe{constructor(e,n){zn(this,"fcn");zn(this,"workerQueue");zn(this,"runInfo");this.fcn=n,this.workerQueue=new Array(e),this.workerQueue.fill(null),this.runInfo=[]}runTasks(e,n=null){const r={taskQueue:[],results:[],addingTasks:!1,postponed:!1,runningWorkers:0,index:0,completedTasks:0,progressCallback:n,canceled:!1};return this.runInfo.push(r),r.index=this.runInfo.length-1,{promise:new Promise((a,s)=>{r.resolve=a,r.reject=s,r.results=new Array(e.length),r.completedTasks=0,r.addingTasks=!0,e.forEach((o,i)=>{this.addTask(r.index,i,o)}),r.addingTasks=!1}),runId:r.index}}terminateWorkers(){for(let e=0;e<this.workerQueue.length;e++){const n=this.workerQueue[e];n!=null&&n.terminate(),this.workerQueue[e]=null}}cancel(e){const n=this.runInfo[e];n!=null&&(n.canceled=!0)}addTask(e,n,r){const a=this.runInfo[e];if((a==null?void 0:a.canceled)===!0){a.reject("Remaining tasks canceled"),this.clearTask(a.index);return}if(this.workerQueue.length>0){const s=this.workerQueue.pop();a.runningWorkers++,r[r.length-1].webWorker=s,this.fcn(...r).then(({webWorker:o,...i})=>{if(this.workerQueue.push(o),this.runInfo[e]!==null){if(a.runningWorkers--,a.results[n]=i,a.completedTasks++,a.progressCallback!=null&&a.progressCallback(a.completedTasks,a.results.length),a.taskQueue.length>0){const l=a.taskQueue.shift();this.addTask(e,l[0],l[1])}else if(!a.addingTasks&&a.runningWorkers===0){const l=a.results;a.resolve(l),this.clearTask(a.index)}}}).catch(o=>{a.reject(o),this.clearTask(a.index)})}else a.runningWorkers!==0||a.postponed?a.taskQueue.push([n,r]):(a.postponed=!0,setTimeout(()=>{a.postponed=!1,this.addTask(a.index,n,r)},50))}clearTask(e){this.runInfo[e].results=[],this.runInfo[e].taskQueue=[],this.runInfo[e].progressCallback=null,this.runInfo[e].canceled=null,this.runInfo[e].reject=()=>{},this.runInfo[e].resolve=()=>{}}}const Me={TextFile:"TextFile",BinaryFile:"BinaryFile",TextStream:"TextStream",BinaryStream:"BinaryStream",Image:"Image",Mesh:"Mesh",PolyData:"PolyData",JsonCompatible:"JsonCompatible"};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const f4=Symbol("Comlink.proxy"),FNe=Symbol("Comlink.endpoint"),d4=Symbol("Comlink.releaseProxy"),Ry=Symbol("Comlink.finalizer"),Gg=Symbol("Comlink.thrown"),p4=t=>typeof t=="object"&&t!==null||typeof t=="function",$Ne={canHandle:t=>p4(t)&&t[f4],serialize(t){const{port1:e,port2:n}=new MessageChannel;return h4(t,e),[n,[n]]},deserialize(t){return t.start(),y4(t)}},UNe={canHandle:t=>p4(t)&&Gg in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},g4=new Map([["proxy",$Ne],["throw",UNe]]);function ANe(t,e){for(const n of t)if(e===n||n==="*"||n instanceof RegExp&&n.test(e))return!0;return!1}function h4(t,e=globalThis,n=["*"]){e.addEventListener("message",function r(a){if(!a||!a.data)return;if(!ANe(n,a.origin)){console.warn(`Invalid origin '${a.origin}' for comlink proxy`);return}const{id:s,type:o,path:i}=Object.assign({path:[]},a.data),l=(a.data.argumentList||[]).map(Ki);let c;try{const u=i.slice(0,-1).reduce((d,p)=>d[p],t),f=i.reduce((d,p)=>d[p],t);switch(o){case"GET":c=f;break;case"SET":u[i.slice(-1)[0]]=Ki(a.data.value),c=!0;break;case"APPLY":c=f.apply(u,l);break;case"CONSTRUCT":{const d=new f(...l);c=zNe(d)}break;case"ENDPOINT":{const{port1:d,port2:p}=new MessageChannel;h4(t,p),c=S4(d,[d])}break;case"RELEASE":c=void 0;break;default:return}}catch(u){c={value:u,[Gg]:0}}Promise.resolve(c).catch(u=>({value:u,[Gg]:0})).then(u=>{const[f,d]=jh(u);e.postMessage(Object.assign(Object.assign({},f),{id:s}),d),o==="RELEASE"&&(e.removeEventListener("message",r),v4(e),Ry in t&&typeof t[Ry]=="function"&&t[Ry]())}).catch(u=>{const[f,d]=jh({value:new TypeError("Unserializable return value"),[Gg]:0});e.postMessage(Object.assign(Object.assign({},f),{id:s}),d)})}),e.start&&e.start()}function WNe(t){return t.constructor.name==="MessagePort"}function v4(t){WNe(t)&&t.close()}function y4(t,e){return N1(t,[],e)}function Wp(t){if(t)throw new Error("Proxy has been released and is not useable")}function m4(t){return fc(t,{type:"RELEASE"}).then(()=>{v4(t)})}const Hh=new WeakMap,Kh="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(Hh.get(t)||0)-1;Hh.set(t,e),e===0&&m4(t)});function INe(t,e){const n=(Hh.get(e)||0)+1;Hh.set(e,n),Kh&&Kh.register(t,e,t)}function PNe(t){Kh&&Kh.unregister(t)}function N1(t,e=[],n=function(){}){let r=!1;const a=new Proxy(n,{get(s,o){if(Wp(r),o===d4)return()=>{PNe(a),m4(t),r=!0};if(o==="then"){if(e.length===0)return{then:()=>a};const i=fc(t,{type:"GET",path:e.map(l=>l.toString())}).then(Ki);return i.then.bind(i)}return N1(t,[...e,o])},set(s,o,i){Wp(r);const[l,c]=jh(i);return fc(t,{type:"SET",path:[...e,o].map(u=>u.toString()),value:l},c).then(Ki)},apply(s,o,i){Wp(r);const l=e[e.length-1];if(l===FNe)return fc(t,{type:"ENDPOINT"}).then(Ki);if(l==="bind")return N1(t,e.slice(0,-1));const[c,u]=Lk(i);return fc(t,{type:"APPLY",path:e.map(f=>f.toString()),argumentList:c},u).then(Ki)},construct(s,o){Wp(r);const[i,l]=Lk(o);return fc(t,{type:"CONSTRUCT",path:e.map(c=>c.toString()),argumentList:i},l).then(Ki)}});return INe(a,t),a}function GNe(t){return Array.prototype.concat.apply([],t)}function Lk(t){const e=t.map(jh);return[e.map(n=>n[0]),GNe(e.map(n=>n[1]))]}const C4=new WeakMap;function S4(t,e){return C4.set(t,e),t}function zNe(t){return Object.assign(t,{[f4]:!0})}function jh(t){for(const[e,n]of g4)if(n.canHandle(t)){const[r,a]=n.serialize(t);return[{type:"HANDLER",name:e,value:r},a]}return[{type:"RAW",value:t},C4.get(t)||[]]}function Ki(t){switch(t.type){case"HANDLER":return g4.get(t.name).deserialize(t.value);case"RAW":return t.value}}function fc(t,e,n){return new Promise(r=>{const a=HNe();t.addEventListener("message",function s(o){!o.data||!o.data.id||o.data.id!==a||(t.removeEventListener("message",s),r(o.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:a},e),n)})}function HNe(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}async function b4(t){const e=t;let n=null;if(e===null)n=new Worker(new URL("/static/vue/assets/itk-wasm-pipeline.worker-oeW7nrxE.js",import.meta.url),{type:"module"});else if(e.startsWith("http")){const r=await Gn.get(e,{responseType:"blob"}),a=URL.createObjectURL(r.data);n=new Worker(a,{type:"module"})}else n=new Worker(e,{type:"module"});return n}function Nk(t){const e=y4(t),n=t;return n.terminated=!1,n.workerProxy=e,n.originalTerminate=n.terminate,n.terminate=()=>{n.terminated=!0,n.workerProxy[d4](),n.originalTerminate()},{workerProxy:e,worker:n}}async function KNe(t,e){let n;if(t!=null){const a=t;return a.workerProxy!==void 0?(n=a.workerProxy,{workerProxy:n,worker:a}):Nk(t)}const r=await b4(e);return Nk(r)}const jNe="modulepreload",YNe=function(t){return"/"+t},Bk={},qNe=function(e,n,r){let a=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link");a=Promise.all(n.map(o=>{if(o=YNe(o),o in Bk)return;Bk[o]=!0;const i=o.endsWith(".css"),l=i?'[rel="stylesheet"]':"";if(!!r)for(let f=s.length-1;f>=0;f--){const d=s[f];if(d.href===o&&(!i||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=i?"stylesheet":jNe,i||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),i)return new Promise((f,d)=>{u.addEventListener("load",f),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})}))}return a.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};async function XNe(t,e){let n="unknown";typeof t!="string"?n=t.href:t.startsWith("http")?n=t:n=typeof e<"u"?`${e}/${t}`:t,n.endsWith(".js")&&(n=n.substring(0,n.length-3)),n.endsWith(".wasm")&&(n=n.substring(0,n.length-5));const r=`${n}.wasm`,s=(await Gn.get(r,{responseType:"arraybuffer"})).data,o=`${n}.js`;return(await qNe(()=>import(o),__vite__mapDeps([]))).default({wasmBinary:s})}const ZNe=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),w4=typeof globalThis.SharedArrayBuffer=="function",Fk=new TextEncoder,$k=new TextDecoder("utf-8");function JNe(t,e){const n={flags:"r",encoding:"binary"},r=t.fs_open(e,n.flags),s=t.fs_stat(e).size;let o=null;w4?o=new SharedArrayBuffer(s):o=new ArrayBuffer(s);const i=new Uint8Array(o);return t.fs_read(r,i,0,s,0),t.fs_close(r),i}function T4(t,e,n){let r=null;w4?r=new SharedArrayBuffer(n):r=new ArrayBuffer(n);const a=new Uint8Array(r),s=new Uint8Array(t.HEAPU8.buffer,e,n);return a.set(s),a}function Tr(t,e,n,r){let a=0;return e!==null&&(a=t.ccall("itk_wasm_input_array_alloc","number",["number","number","number","number"],[0,n,r,e.buffer.byteLength]),t.HEAPU8.set(new Uint8Array(e.buffer),a)),a}function rc(t,e,n){const r=JSON.stringify(e),a=t.ccall("itk_wasm_input_json_alloc","number",["number","number","number"],[0,n,r.length]);t.writeAsciiToMemory(r,a,!1)}function sa(t,e,n,r){const a=t.ccall("itk_wasm_output_array_address","number",["number","number","number"],[0,e,n]),s=t.ccall("itk_wasm_output_array_size","number",["number","number","number"],[0,e,n]),o=T4(t,a,s);return $i(r,o.buffer)}function _y(t,e){const n=t.ccall("itk_wasm_output_json_address","number",["number","number"],[0,e]),r=t.AsciiToString(n);return JSON.parse(r)}function QNe(t,e,n,r){r!=null&&r.length>0&&r.forEach(function(c,u){var f;switch(c.type){case Me.TextStream:{const d=Fk.encode(c.data.data),p=Tr(t,d,u,0),h={size:d.buffer.byteLength,data:`data:application/vnd.itk.address,0:${p}`};rc(t,h,u);break}case Me.JsonCompatible:{const d=Fk.encode(JSON.stringify(c.data)),p=Tr(t,d,u,0),h={size:d.buffer.byteLength,data:`data:application/vnd.itk.address,0:${p}`};rc(t,h,u);break}case Me.BinaryStream:{const d=c.data.data,p=Tr(t,d,u,0),h={size:d.buffer.byteLength,data:`data:application/vnd.itk.address,0:${p}`};rc(t,h,u);break}case Me.TextFile:{t.fs_writeFile(c.data.path,c.data.data);break}case Me.BinaryFile:{t.fs_writeFile(c.data.path,c.data.data);break}case Me.Image:{const d=c.data,p=Tr(t,d.data,u,0),h=Tr(t,d.direction,u,1),g=typeof((f=d.metadata)==null?void 0:f.entries)<"u"?JSON.stringify(Array.from(d.metadata.entries())):"[]",y={imageType:d.imageType,name:d.name,origin:d.origin,spacing:d.spacing,direction:`data:application/vnd.itk.address,0:${h}`,size:d.size,data:`data:application/vnd.itk.address,0:${p}`,metadata:g};rc(t,y,u);break}case Me.Mesh:{const d=c.data,p=Tr(t,d.points,u,0),h=Tr(t,d.cells,u,1),g=Tr(t,d.pointData,u,2),y=Tr(t,d.cellData,u,3),m={meshType:d.meshType,name:d.name,numberOfPoints:d.numberOfPoints,points:`data:application/vnd.itk.address,0:${p}`,numberOfCells:d.numberOfCells,cells:`data:application/vnd.itk.address,0:${h}`,cellBufferSize:d.cellBufferSize,numberOfPointPixels:d.numberOfPointPixels,pointData:`data:application/vnd.itk.address,0:${g}`,numberOfCellPixels:d.numberOfCellPixels,cellData:`data:application/vnd.itk.address,0:${y}`};rc(t,m,u);break}case Me.PolyData:{const d=c.data,p=Tr(t,d.points,u,0),h=Tr(t,d.vertices,u,1),g=Tr(t,d.lines,u,2),y=Tr(t,d.polygons,u,3),m=Tr(t,d.triangleStrips,u,4),b=Tr(t,d.pointData,u,5),C=Tr(t,d.pointData,u,6),S={polyDataType:d.polyDataType,name:d.name,numberOfPoints:d.numberOfPoints,points:`data:application/vnd.itk.address,0:${p}`,verticesBufferSize:d.verticesBufferSize,vertices:`data:application/vnd.itk.address,0:${h}`,linesBufferSize:d.linesBufferSize,lines:`data:application/vnd.itk.address,0:${g}`,polygonsBufferSize:d.polygonsBufferSize,polygons:`data:application/vnd.itk.address,0:${y}`,triangleStripsBufferSize:d.triangleStripsBufferSize,triangleStrips:`data:application/vnd.itk.address,0:${m}`,numberOfPointPixels:d.numberOfPointPixels,pointData:`data:application/vnd.itk.address,0:${b}`,numberOfCellPixels:d.numberOfCellPixels,cellData:`data:application/vnd.itk.address,0:${C}`};rc(t,S,u);break}default:throw Error("Unsupported input InterfaceType")}}),t.resetModuleStdout(),t.resetModuleStderr();const a=t.stackSave();let s=0;try{s=t.callMain(e.slice())}catch(c){throw typeof c=="number"&&(console.log("Exception while running pipeline:"),console.log("stdout:",t.getModuleStdout()),console.error("stderr:",t.getModuleStderr()),typeof t.getExceptionMessage<"u"?console.error("exception:",t.getExceptionMessage(c)):console.error("Build module in Debug mode for exception message information.")),c}finally{t.stackRestore(a)}const o=t.getModuleStdout(),i=t.getModuleStderr(),l=[];return n!=null&&n.length>0&&s===0&&n.forEach(function(c,u){let f=null;switch(c.type){case Me.TextStream:{const p=t.ccall("itk_wasm_output_array_address","number",["number","number","number"],[0,u,0]),h=t.ccall("itk_wasm_output_array_size","number",["number","number","number"],[0,u,0]),g=new Uint8Array(t.HEAPU8.buffer,p,h);f={data:$k.decode(g)};break}case Me.JsonCompatible:{const p=t.ccall("itk_wasm_output_array_address","number",["number","number","number"],[0,u,0]),h=t.ccall("itk_wasm_output_array_size","number",["number","number","number"],[0,u,0]),g=new Uint8Array(t.HEAPU8.buffer,p,h);f=JSON.parse($k.decode(g));break}case Me.BinaryStream:{const p=t.ccall("itk_wasm_output_array_address","number",["number","number","number"],[0,u,0]),h=t.ccall("itk_wasm_output_array_size","number",["number","number","number"],[0,u,0]);f={data:T4(t,p,h)};break}case Me.TextFile:{f={path:c.data.path,data:t.fs_readFile(c.data.path,{encoding:"utf8"})};break}case Me.BinaryFile:{f={path:c.data.path,data:JNe(t,c.data.path)};break}case Me.Image:{const p=_y(t,u);p.data=sa(t,u,0,p.imageType.componentType),p.direction=sa(t,u,1,ms.Float64),p.metadata=new Map(p.metadata),f=p;break}case Me.Mesh:{const p=_y(t,u);p.numberOfPoints>0?p.points=sa(t,u,0,p.meshType.pointComponentType):p.points=$i(p.meshType.pointComponentType,new ArrayBuffer(0)),p.numberOfCells>0?p.cells=sa(t,u,1,p.meshType.cellComponentType):p.cells=$i(p.meshType.cellComponentType,new ArrayBuffer(0)),p.numberOfPointPixels>0?p.pointData=sa(t,u,2,p.meshType.pointPixelComponentType):p.pointData=$i(p.meshType.pointPixelComponentType,new ArrayBuffer(0)),p.numberOfCellPixels>0?p.cellData=sa(t,u,3,p.meshType.cellPixelComponentType):p.cellData=$i(p.meshType.cellPixelComponentType,new ArrayBuffer(0)),f=p;break}case Me.PolyData:{const p=_y(t,u);p.numberOfPoints>0?p.points=sa(t,u,0,ms.Float32):p.points=new Float32Array,p.verticesBufferSize>0?p.vertices=sa(t,u,1,Yt.UInt32):p.vertices=new Uint32Array,p.linesBufferSize>0?p.lines=sa(t,u,2,Yt.UInt32):p.lines=new Uint32Array,p.polygonsBufferSize>0?p.polygons=sa(t,u,3,Yt.UInt32):p.polygons=new Uint32Array,p.triangleStripsBufferSize>0?p.triangleStrips=sa(t,u,4,Yt.UInt32):p.triangleStrips=new Uint32Array,p.numberOfPointPixels>0?p.pointData=sa(t,u,5,p.polyDataType.pointPixelComponentType):p.pointData=$i(p.polyDataType.pointPixelComponentType,new ArrayBuffer(0)),p.numberOfCellPixels>0?p.cellData=sa(t,u,6,p.polyDataType.cellPixelComponentType):p.cellData=$i(p.polyDataType.cellPixelComponentType,new ArrayBuffer(0)),f=p;break}default:throw Error("Unsupported output InterfaceType")}const d={type:c.type,data:f};l.push(d)}),{returnValue:s,stdout:o,stderr:i,outputs:l}}const eBe=typeof globalThis.SharedArrayBuffer<"u";function tBe(t,e){if(t==null)return[];const n=[];for(let r=0;r<t.length;r++){const a=nBe(t[r],e);a!==null&&n.push(a)}return n}function nBe(t,e){if(t==null)return null;let n=null;return t.buffer!==void 0?n=t.buffer:t.byteLength!==void 0&&(n=t),eBe&&n instanceof SharedArrayBuffer?null:e?n:n.slice(0)}function rBe(t){return[t.data,t.direction]}function aBe(t){return[t.points,t.pointData,t.cells,t.cellData]}function sBe(t){return[t.points,t.vertices,t.lines,t.polygons,t.triangleStrips,t.pointData,t.cellData]}let oBe;function iBe(){return oBe}let lBe;function cBe(){return lBe}const Vy=new Map;function uBe(){let t=cBe();return typeof t>"u"&&(t=null),t}function x4(){let t=iBe();return typeof t>"u"&&(t=new URL("/pipelines",document.location.origin).href),t}async function fBe(t,e){let n=t,r=t;if(typeof t!="string"&&(n=new URL(t.href),r=n.href),Vy.has(r))return Vy.get(r);{const a=await XNe(t,(e==null?void 0:e.toString())??x4());return Vy.set(r,a),a}}async function Lt(t,e,n,r,a){if(!await ZNe()){const y="WebAssembly SIMD support is required -- please update your browser.";throw alert(y),new Error(y)}const s=(a==null?void 0:a.webWorker)??null;if(s===!1){const y=await fBe(t.toString(),a==null?void 0:a.pipelineBaseUrl);return QNe(y,e,n,r)}let o=s;const i=(a==null?void 0:a.pipelineWorkerUrl)??uBe(),l=typeof i!="string"&&typeof(i==null?void 0:i.href)<"u"?i.href:i,{workerProxy:c,worker:u}=await KNe(o,l);o=u;const f=[];r!=null&&r.length>0&&r.forEach(function(y){if(y.type===Me.BinaryStream){const m=y.data.data;f.push(m)}else if(y.type===Me.BinaryFile){const m=y.data.data;f.push(m)}else if(y.type===Me.Image){const m=y.data;m.data!==null&&f.push(...rBe(m))}else if(y.type===Me.Mesh){const m=y.data;f.push(...aBe(m))}else if(y.type===Me.PolyData){const m=y.data;f.push(...sBe(m))}});const d=(a==null?void 0:a.pipelineBaseUrl)??x4(),p=typeof d!="string"&&typeof(d==null?void 0:d.href)<"u"?d.href:d,h=r!=null?S4(r,tBe(f,a==null?void 0:a.noCopy)):null,g=await c.runPipeline(t.toString(),p,e,n,h);return{returnValue:g.returnValue,stdout:g.stdout,stderr:g.stderr,outputs:g.outputs,webWorker:o}}const dBe="@itk-wasm/image-io",pBe="1.1.0",gBe="pnpm@8.11.0",hBe="Input and output for scientific and medical image file formats.",vBe="module",yBe="./dist/index.js",mBe="./dist/index-all.d.ts",CBe={".":{types:"./dist/index-all.d.js",browser:"./dist/index.js",node:"./dist/index-node.js",default:"./dist/index-all.js"}},SBe={start:"pnpm copyShoelaceAssets && vite -c build/vite.config.js",test:"pnpm test:node && pnpm test:browser","test:node":"ava","test:browser":"pnpm test:browser:chrome && pnpm test:browser:firefox","test:browser:firefox":"start-server-and-test vite:start http-get://localhost:5004 cypress:runFirefox","test:browser:chrome":"start-server-and-test vite:start http-get://localhost:5004 cypress:runChrome","test:browser:debug":"start-server-and-test rollup:start http-get://localhost:5004 cypress:open","cypress:open":"pnpx cypress open","cypress:runChrome":"pnpx cypress run --browser chrome","cypress:runFirefox":"pnpx cypress run --browser firefox",build:"pnpm build:tsc && pnpm build:browser:workerEmbedded && pnpm build:browser:workerEmbeddedMin && pnpm build:demo","build:browser:workerEmbedded":"esbuild --loader:.worker.js=dataurl --bundle --format=esm --outfile=./dist/bundle/index-worker-embedded.js ./src/index-worker-embedded.ts","build:browser:workerEmbeddedMin":"esbuild --minify --loader:.worker.js=dataurl --bundle --format=esm --outfile=./dist/bundle/index-worker-embedded.min.js ./src/index-worker-embedded.min.ts","build:tsc":"tsc --pretty",copyShoelaceAssets:"shx mkdir -p test/browser/demo-app/public && shx cp -r node_modules/@shoelace-style/shoelace/dist/assets test/browser/demo-app/public/","build:demo":"pnpm copyShoelaceAssets && vite -c build/vite.config.js build","vite:start":"pnpm copyShoelaceAssets && vite -c build/vite.config.js","rollup:start":"pnpm copyShoelaceAssets && pnpm build:demo && concurrently npm:rollup:preview npm:rollup:dev","rollup:dev":"vite build --config build/vite-rollup-watch.config.ts","rollup:preview":"vite preview --config build/vite-rollup-watch.config.ts"},bBe=["itk","wasm","webassembly","wasi"],wBe="",TBe="Apache-2.0",xBe={axios:"^1.6.2","itk-wasm":"workspace:^","mime-types":"^2.1.35"},EBe={"@itk-wasm/image-io-build":"workspace:*","@shoelace-style/shoelace":"^2.12.0","@types/mime-types":"^2.1.4","@types/node":"^20.10.4",ava:"^5.3.1",concurrently:"^8.2.2",cypress:"^13.6.1",esbuild:"^0.19.9",shx:"^0.3.4","start-server-and-test":"^2.0.3",typescript:"^5.3.3",vite:"^5.0.10","vite-plugin-static-copy":"^1.0.0"},kBe={type:"git",url:"https://github.com/InsightSoftwareConsortium/itk-wasm"},OBe={files:["test/node/**/*","!test/node/common.js"]},MBe={name:dBe,version:pBe,packageManager:gBe,description:hBe,type:vBe,module:yBe,types:mBe,exports:CBe,scripts:SBe,keywords:bBe,author:wBe,license:TBe,dependencies:xBe,devDependencies:EBe,repository:kBe,ava:OBe};let RBe=`https://cdn.jsdelivr.net/npm/@itk-wasm/image-io@${MBe.version}/dist/pipelines`;function Nt(){return RBe}const _Be=null;function _t(){return _Be}let Zu=null;async function Uk(){const t=_t(),e=typeof t!="string"&&typeof(t==null?void 0:t.href)<"u"?t.href:t;Zu=await b4(e)}async function Bt(){return Zu!==null?(Zu.terminated&&await Uk(),Zu):(await Uk(),Zu)}const Ak=new Map([["image/jpeg","jpeg"],["image/png","png"],["image/tiff","tiff"],["image/x-ms-bmp","bmp"],["image/x-bmp","bmp"],["image/bmp","bmp"],["application/dicom","gdcm"]]);async function VBe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="png-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function DBe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="png-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}async function LBe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="meta-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function NBe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="meta-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}async function BBe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="tiff-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function FBe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="tiff-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}async function $Be(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="nifti-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function UBe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="nifti-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}async function ABe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="jpeg-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function WBe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="jpeg-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}async function IBe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="nrrd-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function PBe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="nrrd-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}async function GBe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="vtk-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function zBe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="vtk-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}async function HBe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="bmp-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function KBe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="bmp-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}async function jBe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="hdf5-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function YBe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="hdf5-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}async function qBe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="minc-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function XBe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="minc-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}async function ZBe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="mrc-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function JBe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="mrc-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}async function QBe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="lsm-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function eFe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="lsm-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}async function tFe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="mgh-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function nFe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="mgh-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}async function rFe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="bio-rad-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function aFe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="bio-rad-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}async function sFe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="gipl-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function oFe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="gipl-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}async function iFe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="ge-adw-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function lFe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="ge-adw-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}async function cFe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="ge4-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function uFe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="ge4-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}async function fFe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="ge5-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function dFe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="ge5-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}async function pFe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="gdcm-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function gFe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="gdcm-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}async function hFe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="scanco-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function vFe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="scanco-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}async function yFe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="fdf-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function mFe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="wasm-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function CFe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="wasm-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}async function SFe(t,e={}){var y,m;const n=[{type:Me.JsonCompatible},{type:Me.Image}];let r=t;if(t instanceof File){const b=await t.arrayBuffer();r={path:t.name,data:new Uint8Array(b)}}const a=[{type:Me.BinaryFile,data:r}],s=[],o=r.path;s.push(o),s.push("0"),s.push("1"),s.push("--memory-io"),typeof e.informationOnly<"u"&&e.informationOnly&&s.push("--information-only");const c="wasm-zstd-read-image";let u=e==null?void 0:e.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,n,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:e==null?void 0:e.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldRead:(y=h[0])==null?void 0:y.data,image:(m=h[1])==null?void 0:m.data}}async function bFe(t,e,n={}){var y,m;const r=[{type:Me.JsonCompatible},{type:Me.BinaryFile,data:{path:e,data:new Uint8Array}}],a=[{type:Me.Image,data:t}],s=[];s.push("0"),s.push("0");const l=e;s.push(l),s.push("--memory-io"),typeof n.informationOnly<"u"&&n.informationOnly&&s.push("--information-only"),typeof n.useCompression<"u"&&n.useCompression&&s.push("--use-compression");const c="wasm-zstd-write-image";let u=n==null?void 0:n.webWorker;u===void 0&&(u=await Bt());const{webWorker:f,returnValue:d,stderr:p,outputs:h}=await Lt(c,s,r,a,{pipelineBaseUrl:Nt(),pipelineWorkerUrl:_t(),webWorker:u,noCopy:n==null?void 0:n.noCopy});if(d!==0&&p!=="")throw new Error(p);return{webWorker:f,couldWrite:(y=h[0])==null?void 0:y.data,serializedImage:(m=h[1])==null?void 0:m.data}}const Wk=new Map([["png",[VBe,DBe]],["meta",[LBe,NBe]],["tiff",[BBe,FBe]],["nifti",[$Be,UBe]],["jpeg",[ABe,WBe]],["nrrd",[IBe,PBe]],["vtk",[GBe,zBe]],["bmp",[HBe,KBe]],["hdf5",[jBe,YBe]],["minc",[qBe,XBe]],["mrc",[ZBe,JBe]],["lsm",[QBe,eFe]],["mgh",[tFe,nFe]],["bioRad",[rFe,aFe]],["gipl",[sFe,oFe]],["geAdw",[iFe,lFe]],["ge4",[cFe,uFe]],["ge5",[fFe,dFe]],["gdcm",[pFe,gFe]],["scanco",[hFe,vFe]],["fdf",[yFe,null]],["wasm",[mFe,CFe]],["wasmZstd",[SFe,bFe]]]);async function B1(t,e={}){const n=t.type??"",r=t.name??t.path??"fileName",a=NNe(r).toLowerCase();let s=e==null?void 0:e.webWorker,o=t;if(t instanceof Blob){const p=await t.arrayBuffer();o={path:t.name,data:new Uint8Array(p)}}let i=null;if(n&&Ak.has(n))i=Ak.get(n);else if(Vk.has(a))i=Vk.get(a);else for(const p of Wk.values())if(p[0]!==null){let{webWorker:h,couldRead:g,image:y}=await p[0]({path:o.path,data:o.data.slice()},{webWorker:s,informationOnly:e==null?void 0:e.informationOnly,noCopy:e==null?void 0:e.noCopy});if(s=h,g)return typeof e<"u"&&(y=Dk(y,e)),{webWorker:s,image:y}}if(!i)throw Error("Could not find IO for: "+r);const c=Wk.get(i)[0];let{webWorker:u,couldRead:f,image:d}=await c(o,{webWorker:s,informationOnly:e==null?void 0:e.informationOnly,noCopy:e==null?void 0:e.noCopy});if(s=u,!f)throw Error("Could not read: "+r);return typeof e<"u"&&(d=Dk(d,e)),{webWorker:s,image:d}}var zk;const wFe=typeof((zk=globalThis.navigator)==null?void 0:zk.hardwareConcurrency)=="number"?globalThis.navigator.hardwareConcurrency:6;new BNe(wFe,B1);const{vtkErrorMacro:Ip}=A;function TFe(t,e){e.classHierarchy.push("vtkPiecewiseFunction"),t.getSize=()=>e.nodes.length,t.getType=()=>{let n,r=0,a=0;e.nodes.length>0&&(r=e.nodes[0].y);for(let s=1;s<e.nodes.length;s++){if(n=e.nodes[s].y,n!==r)if(n>r)switch(a){case 0:case 1:a=1;break;case 2:default:a=3;break}else switch(a){case 0:case 2:a=2;break;case 1:default:a=3;break}if(r=n,a===3)break}switch(a){case 0:return"Constant";case 1:return"NonDecreasing";case 2:return"NonIncreasing";case 3:default:return"Varied"}},t.getDataPointer=()=>{const n=e.nodes.length;if(e.function=null,n>0){e.function=[];for(let r=0;r<n;r++)e.function[2*r]=e.nodes[r].x,e.function[2*r+1]=e.nodes[r].y}return e.function},t.getFirstNonZeroValue=()=>{if(e.nodes.length===0)return 0;let n=1,r=0,a=0;for(;a<e.nodes.length;a++)if(e.nodes[a].y!==0){n=0;break}return n?r=Number.MAX_VALUE:a>0?r=e.nodes[a-1].x:e.clamping?r=-Number.MAX_VALUE:r=e.nodes[0].x,r},t.getNodeValue=(n,r)=>{const a=e.nodes.length;return n<0||n>=a?(Ip("Index out of range!"),-1):(r[0]=e.nodes[n].x,r[1]=e.nodes[n].y,r[2]=e.nodes[n].midpoint,r[3]=e.nodes[n].sharpness,1)},t.setNodeValue=(n,r)=>{const a=e.nodes.length;if(n<0||n>=a)return Ip("Index out of range!"),-1;const s=e.nodes[n].x;return e.nodes[n].x=r[0],e.nodes[n].y=r[1],e.nodes[n].midpoint=r[2],e.nodes[n].sharpness=r[3],s!==r[0]?t.sortAndUpdateRange():t.modified(),1},t.addPoint=(n,r)=>t.addPointLong(n,r,.5,0),t.addPointLong=(n,r,a,s)=>{if(a<0||a>1)return Ip("Midpoint outside range [0.0, 1.0]"),-1;if(s<0||s>1)return Ip("Sharpness outside range [0.0, 1.0]"),-1;e.allowDuplicateScalars||t.removePoint(n);const o={x:n,y:r,midpoint:a,sharpness:s};e.nodes.push(o),t.sortAndUpdateRange();let i;for(i=0;i<e.nodes.length&&e.nodes[i].x!==n;i++);return i<e.nodes.length?i:-1},t.setNodes=n=>{e.nodes!==n&&(e.nodes=n,t.sortAndUpdateRange())},t.sortAndUpdateRange=()=>{e.nodes.sort((r,a)=>r.x-a.x),t.updateRange()||t.modified()},t.updateRange=()=>{const n=e.range.slice(),r=e.nodes.length;return r?(e.range[0]=e.nodes[0].x,e.range[1]=e.nodes[r-1].x):(e.range[0]=0,e.range[1]=0),n[0]===e.range[0]&&n[1]===e.range[1]?!1:(t.modified(),!0)},t.removePoint=n=>{let r;for(r=0;r<e.nodes.length&&e.nodes[r].x!==n;r++);if(r>=e.nodes.length)return-1;const a=r;let s=!1;return e.nodes.splice(r,1),(r===0||r===e.nodes.length)&&(s=t.updateRange()),s||t.modified(),a},t.removeAllPoints=()=>{e.nodes=[],t.sortAndUpdateRange()},t.addSegment=(n,r,a,s)=>{t.sortAndUpdateRange();for(let o=0;o<e.nodes.length;)e.nodes[o].x>=n&&e.nodes[o].x<=a?e.nodes.splice(o,1):o++;t.addPoint(n,r,.5,0),t.addPoint(a,s,.5,0)},t.getValue=n=>{const r=[];return t.getTable(n,n,1,r),r[0]},t.adjustRange=n=>{if(n.length<2)return 0;const r=t.getRange();r[0]<n[0]?t.addPoint(n[0],t.getValue(n[0])):t.addPoint(n[0],t.getValue(r[0])),r[1]>n[1]?t.addPoint(n[1],t.getValue(n[1])):t.addPoint(n[1],t.getValue(r[1])),t.sortAndUpdateRange();for(let a=0;a<e.nodes.length;)e.nodes[a].x>=n[0]&&e.nodes[a].x<=n[1]?e.nodes.splice(a,1):++a;return t.sortAndUpdateRange(),1},t.estimateMinNumberOfSamples=(n,r)=>{const a=t.findMinimumXDistance();return Math.ceil((r-n)/a)},t.findMinimumXDistance=()=>{const n=e.nodes.length;if(n<2)return-1;let r=e.nodes[1].x-e.nodes[0].x;for(let a=0;a<n-1;a++){const s=e.nodes[a+1].x-e.nodes[a].x;s<r&&(r=s)}return r},t.getTable=function(n,r,a,s){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,i,l=0;const c=e.nodes.length;let u=0;c!==0&&(u=e.nodes[c-1].y);let f=0,d=0,p=0,h=0,g=0,y=0,m=0;for(i=0;i<a;i++){const b=o*i;for(a>1?f=n+i/(a-1)*(r-n):f=.5*(n+r);l<c&&f>e.nodes[l].x;)l++,l<c&&(d=e.nodes[l-1].x,p=e.nodes[l].x,h=e.nodes[l-1].y,g=e.nodes[l].y,y=e.nodes[l-1].midpoint,m=e.nodes[l-1].sharpness,y<1e-5&&(y=1e-5),y>.99999&&(y=.99999));if(l>=c)s[b]=e.clamping?u:0;else if(l===0)s[b]=e.clamping?e.nodes[0].y:0;else{let C=(f-d)/(p-d);if(C<y?C=.5*C/y:C=.5+.5*(C-y)/(1-y),m>.99)if(C<.5){s[b]=h;continue}else{s[b]=g;continue}if(m<.01){s[b]=(1-C)*h+C*g;continue}C<.5?C=.5*(C*2)**(1+10*m):C>.5&&(C=1-.5*((1-C)*2)**(1+10*m));const S=C*C,T=S*C,w=2*T-3*S+1,x=-2*T+3*S,E=T-2*S+C,O=T-S,k=g-h,M=(1-m)*k;s[b]=w*h+x*g+E*M+O*M;const D=h<g?h:g,I=h>g?h:g;s[b]=s[b]<D?D:s[b],s[b]=s[b]>I?I:s[b]}}}}const xFe={range:[0,0],clamping:!0,allowDuplicateScalars:!1};function E4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,xFe,n),A.obj(t,e),e.nodes=[],A.setGet(t,e,["allowDuplicateScalars","clamping"]),A.setArray(t,e,["range"],2),A.getArray(t,e,["range"]),TFe(t,e)}const EFe=A.newInstance(E4,"vtkPiecewiseFunction");var kFe={newInstance:EFe,extend:E4};const OFe={RGB:0,HSV:1,LAB:2,DIVERGING:3},MFe={LINEAR:0,LOG10:1};var k4={ColorSpace:OFe,Scale:MFe};const{ColorSpace:Ia,Scale:O4}=k4,{ScalarMappingTarget:Pp}=rv,{vtkDebugMacro:RFe,vtkErrorMacro:Ps,vtkWarningMacro:_Fe}=A;function Ik(t,e){const n=t[0],r=t[1],a=t[2],s=Math.sqrt(n*n+r*r+a*a),o=s>.001?Math.acos(n/s):0,i=o>.001?Math.atan2(a,r):0;e[0]=s,e[1]=o,e[2]=i}function VFe(t,e){const n=t[0],r=t[1],a=t[2];e[0]=n*Math.cos(r),e[1]=n*Math.sin(r)*Math.cos(a),e[2]=n*Math.sin(r)*Math.sin(a)}function Pk(t,e){if(t[0]>=e-.1)return t[2];const n=t[1]*Math.sqrt(e*e-t[0]*t[0])/(t[0]*Math.sin(t[1]));return t[2]>-.3*Math.PI?t[2]+n:t[2]-n}function DFe(t,e){let n=t-e;for(n<0&&(n=-n);n>=2*Math.PI;)n-=2*Math.PI;return n>Math.PI&&(n=2*Math.PI-n),n}function Gk(t,e,n,r){const a=[],s=[];Yi(e,a),Yi(n,s);const o=[],i=[];Ik(a,o),Ik(s,i);let l=t;if(o[1]>.05&&i[1]>.05&&DFe(o[2],i[2])>.33*Math.PI){let f=Math.max(o[0],i[0]);f=Math.max(88,f),t<.5?(i[0]=f,i[1]=0,i[2]=0,l*=2):(o[0]=f,o[1]=0,o[2]=0,l=2*l-1)}o[1]<.05&&i[1]>.05?o[2]=Pk(i,o[0]):i[1]<.05&&o[1]>.05&&(i[2]=Pk(o,i[0]));const c=[];c[0]=(1-l)*o[0]+l*i[0],c[1]=(1-l)*o[1]+l*i[1],c[2]=(1-l)*o[2]+l*i[2];const u=[];VFe(c,u),nh(u,r)}function LFe(t,e){e.classHierarchy.push("vtkColorTransferFunction"),t.getSize=()=>e.nodes.length,t.addRGBPoint=(n,r,a,s)=>t.addRGBPointLong(n,r,a,s,.5,0),t.addRGBPointLong=function(n,r,a,s){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(o<0||o>1)return Ps("Midpoint outside range [0.0, 1.0]"),-1;if(i<0||i>1)return Ps("Sharpness outside range [0.0, 1.0]"),-1;e.allowDuplicateScalars||t.removePoint(n);const l={x:n,r,g:a,b:s,midpoint:o,sharpness:i};e.nodes.push(l),t.sortAndUpdateRange();let c=0;for(;c<e.nodes.length&&e.nodes[c].x!==n;c++);return c<e.nodes.length?c:-1},t.addHSVPoint=(n,r,a,s)=>t.addHSVPointLong(n,r,a,s,.5,0),t.addHSVPointLong=function(n,r,a,s){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;const l=[];return Ai([r,a,s],l),t.addRGBPoint(n,l[0],l[1],l[2],o,i)},t.setNodes=n=>{if(e.nodes!==n){const r=JSON.stringify(e.nodes);e.nodes=n;const a=JSON.stringify(e.nodes);if(t.sortAndUpdateRange()||r!==a)return t.modified(),!0}return!1},t.sortAndUpdateRange=()=>{const n=JSON.stringify(e.nodes);e.nodes.sort((s,o)=>s.x-o.x);const r=JSON.stringify(e.nodes),a=t.updateRange();return!a&&n!==r?(t.modified(),!0):a},t.updateRange=()=>{const n=[2];n[0]=e.mappingRange[0],n[1]=e.mappingRange[1];const r=e.nodes.length;return r?(e.mappingRange[0]=e.nodes[0].x,e.mappingRange[1]=e.nodes[r-1].x):(e.mappingRange[0]=0,e.mappingRange[1]=0),n[0]===e.mappingRange[0]&&n[1]===e.mappingRange[1]?!1:(t.modified(),!0)},t.removePoint=n=>{let r=0;for(;r<e.nodes.length&&e.nodes[r].x!==n;r++);const a=r;if(r>=e.nodes.length)return-1;let s=!1;return e.nodes.splice(r,1),(r===0||r===e.nodes.length)&&(s=t.updateRange()),s||t.modified(),a},t.movePoint=(n,r)=>{if(n!==r){t.removePoint(r);for(let a=0;a<e.nodes.length;a++)if(e.nodes[a].x===n){e.nodes[a].x=r,t.sortAndUpdateRange();break}}},t.removeAllPoints=()=>{e.nodes=[],t.sortAndUpdateRange()},t.addRGBSegment=(n,r,a,s,o,i,l,c)=>{t.sortAndUpdateRange();for(let u=0;u<e.nodes.length;)e.nodes[u].x>=n&&e.nodes[u].x<=o?e.nodes.splice(u,1):u++;t.addRGBPointLong(n,r,a,s,.5,0),t.addRGBPointLong(o,i,l,c,.5,0),t.modified()},t.addHSVSegment=(n,r,a,s,o,i,l,c)=>{const u=[r,a,s],f=[i,l,c],d=[],p=[];Ai(u,d),Ai(f,p),t.addRGBSegment(n,d[0],d[1],d[2],o,p[0],p[1],p[2])},t.mapValue=n=>{const r=[];return t.getColor(n,r),[Math.floor(255*r[0]+.5),Math.floor(255*r[1]+.5),Math.floor(255*r[2]+.5),255]},t.getColor=(n,r)=>{if(e.indexedLookup){const a=t.getSize(),s=t.getAnnotatedValueIndexInternal(n);if(s<0||a===0){const o=t.getNanColorByReference();r[0]=o[0],r[1]=o[1],r[2]=o[2]}else{const o=[];t.getNodeValue(s%a,o),r[0]=o[1],r[1]=o[2],r[2]=o[3]}return}t.getTable(n,n,1,r)},t.getRedValue=n=>{const r=[];return t.getColor(n,r),r[0]},t.getGreenValue=n=>{const r=[];return t.getColor(n,r),r[1]},t.getBlueValue=n=>{const r=[];return t.getColor(n,r),r[2]},t.getTable=(n,r,a,s)=>{const o=Number(n),i=Number(r);if(rh(o)||rh(i)){for(let O=0;O<a;O++)s[O*3+0]=e.nanColor[0],s[O*3+1]=e.nanColor[1],s[O*3+2]=e.nanColor[2];return}let l=0;const c=e.nodes.length;let u=0,f=0,d=0;c!==0&&(u=e.nodes[c-1].r,f=e.nodes[c-1].g,d=e.nodes[c-1].b);let p=0,h=0,g=0;const y=[0,0,0],m=[0,0,0];let b=0,C=0;const S=[];let T=e.scale===O4.LOG10;T&&(T=e.mappingRange[0]>0);let w=0,x=0,E=0;T&&(w=Math.log10(o),x=Math.log10(i));for(let O=0;O<a;O++){const k=3*O;if(a>1?T?(E=w+O/(a-1)*(x-w),p=10**E):p=o+O/(a-1)*(i-o):T?(E=.5*(w+x),p=10**E):p=.5*(o+i),e.discretize){const M=e.mappingRange;if(p>=M[0]&&p<=M[1]){const D=e.numberOfValues,I=M[1]-M[0];if(D<=1)p=M[0]+I/2;else{const B=(p-M[0])/I,F=sM(D*B);p=M[0]+F/(D-1)*I}}}for(;l<c&&p>e.nodes[l].x;)l++,l<c&&(h=e.nodes[l-1].x,g=e.nodes[l].x,T&&(h=Math.log10(h),g=Math.log10(g)),y[0]=e.nodes[l-1].r,m[0]=e.nodes[l].r,y[1]=e.nodes[l-1].g,m[1]=e.nodes[l].g,y[2]=e.nodes[l-1].b,m[2]=e.nodes[l].b,b=e.nodes[l-1].midpoint,C=e.nodes[l-1].sharpness,b<1e-5&&(b=1e-5),b>.99999&&(b=.99999));if(p>e.mappingRange[1])s[k]=0,s[k+1]=0,s[k+2]=0,e.clamping&&(t.getUseAboveRangeColor()?(s[k]=e.aboveRangeColor[0],s[k+1]=e.aboveRangeColor[1],s[k+2]=e.aboveRangeColor[2]):(s[k]=u,s[k+1]=f,s[k+2]=d));else if(p<e.mappingRange[0]||wM(p)&&p<0)s[k]=0,s[k+1]=0,s[k+2]=0,e.clamping&&(t.getUseBelowRangeColor()?(s[k]=e.belowRangeColor[0],s[k+1]=e.belowRangeColor[1],s[k+2]=e.belowRangeColor[2]):c>0&&(s[k]=e.nodes[0].r,s[k+1]=e.nodes[0].g,s[k+2]=e.nodes[0].b));else if(l===0&&(Math.abs(p-o)<1e-6||e.discretize))c>0?(s[k]=e.nodes[0].r,s[k+1]=e.nodes[0].g,s[k+2]=e.nodes[0].b):(s[k]=0,s[k+1]=0,s[k+2]=0);else{let M=0;if(T?M=(E-h)/(g-h):M=(p-h)/(g-h),M<b?M=.5*M/b:M=.5+.5*(M-b)/(1-b),C>.99)if(M<.5){s[k]=y[0],s[k+1]=y[1],s[k+2]=y[2];continue}else{s[k]=m[0],s[k+1]=m[1],s[k+2]=m[2];continue}if(C<.01){if(e.colorSpace===Ia.RGB)s[k]=(1-M)*y[0]+M*m[0],s[k+1]=(1-M)*y[1]+M*m[1],s[k+2]=(1-M)*y[2]+M*m[2];else if(e.colorSpace===Ia.HSV){const L=[],G=[];Pu(y,L),Pu(m,G),e.hSVWrap&&(L[0]-G[0]>.5||G[0]-L[0]>.5)&&(L[0]>G[0]?L[0]-=1:G[0]-=1);const K=[];K[0]=(1-M)*L[0]+M*G[0],K[0]<0&&(K[0]+=1),K[1]=(1-M)*L[1]+M*G[1],K[2]=(1-M)*L[2]+M*G[2],Ai(K,S),s[k]=S[0],s[k+1]=S[1],s[k+2]=S[2]}else if(e.colorSpace===Ia.LAB){const L=[],G=[];Yi(y,L),Yi(m,G);const K=[];K[0]=(1-M)*L[0]+M*G[0],K[1]=(1-M)*L[1]+M*G[1],K[2]=(1-M)*L[2]+M*G[2],nh(K,S),s[k]=S[0],s[k+1]=S[1],s[k+2]=S[2]}else e.colorSpace===Ia.DIVERGING?(Gk(M,y,m,S),s[k]=S[0],s[k+1]=S[1],s[k+2]=S[2]):Ps("ColorSpace set to invalid value.",e.colorSpace);continue}M<.5?M=.5*(M*2)**(1+10*C):M>.5&&(M=1-.5*((1-M)*2)**(1+10*C));const D=M*M,I=D*M,B=2*I-3*D+1,F=-2*I+3*D,$=I-2*D+M,N=I-D;let W,_;if(e.colorSpace===Ia.RGB)for(let L=0;L<3;L++)W=m[L]-y[L],_=(1-C)*W,s[k+L]=B*y[L]+F*m[L]+$*_+N*_;else if(e.colorSpace===Ia.HSV){const L=[],G=[];Pu(y,L),Pu(m,G),e.hSVWrap&&(L[0]-G[0]>.5||G[0]-L[0]>.5)&&(L[0]>G[0]?L[0]-=1:G[0]-=1);const K=[];for(let Y=0;Y<3;Y++)W=G[Y]-L[Y],_=(1-C)*W,K[Y]=B*L[Y]+F*G[Y]+$*_+N*_,Y===0&&K[Y]<0&&(K[Y]+=1);Ai(K,S),s[k]=S[0],s[k+1]=S[1],s[k+2]=S[2]}else if(e.colorSpace===Ia.LAB){const L=[],G=[];Yi(y,L),Yi(m,G);const K=[];for(let Y=0;Y<3;Y++)W=G[Y]-L[Y],_=(1-C)*W,K[Y]=B*L[Y]+F*G[Y]+$*_+N*_;nh(K,S),s[k]=S[0],s[k+1]=S[1],s[k+2]=S[2]}else e.colorSpace===Ia.DIVERGING?(Gk(M,y,m,S),s[k]=S[0],s[k+1]=S[1],s[k+2]=S[2]):Ps("ColorSpace set to invalid value.");for(let L=0;L<3;L++)s[k+L]=s[k+L]<0?0:s[k+L],s[k+L]=s[k+L]>1?1:s[k+L]}}},t.getUint8Table=function(n,r,a){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t.getMTime()<=e.buildTime&&e.tableSize===a&&e.tableWithAlpha!==s)return e.table;if(e.nodes.length===0)return Ps("Attempting to lookup a value with no points in the function"),e.table;const o=s?4:3;(e.tableSize!==a||e.tableWithAlpha!==s)&&(e.table=new Uint8Array(a*o),e.tableSize=a,e.tableWithAlpha=s);const i=[];t.getTable(n,r,a,i);for(let l=0;l<a;l++)e.table[l*o+0]=Math.floor(i[l*3+0]*255+.5),e.table[l*o+1]=Math.floor(i[l*3+1]*255+.5),e.table[l*o+2]=Math.floor(i[l*3+2]*255+.5),s&&(e.table[l*o+3]=255);return e.buildTime.modified(),e.table},t.buildFunctionFromArray=n=>{t.removeAllPoints();const r=n.getNumberOfComponents();for(let a=0;a<n.getNumberOfTuples();a++)switch(r){case 3:{e.nodes.push({x:a,r:n.getComponent(a,0),g:n.getComponent(a,1),b:n.getComponent(a,2),midpoint:.5,sharpness:0});break}case 4:{e.nodes.push({x:n.getComponent(a,0),r:n.getComponent(a,1),g:n.getComponent(a,2),b:n.getComponent(a,3),midpoint:.5,sharpness:0});break}case 5:{e.nodes.push({x:a,r:n.getComponent(a,0),g:n.getComponent(a,1),b:n.getComponent(a,2),midpoint:n.getComponent(a,4),sharpness:n.getComponent(a,5)});break}case 6:{e.nodes.push({x:n.getComponent(a,0),r:n.getComponent(a,1),g:n.getComponent(a,2),b:n.getComponent(a,3),midpoint:n.getComponent(a,4),sharpness:n.getComponent(a,5)});break}}t.sortAndUpdateRange()},t.buildFunctionFromTable=(n,r,a,s)=>{let o=0;t.removeAllPoints(),a>1&&(o=(r-n)/(a-1));for(let i=0;i<a;i++){const l={x:n+o*i,r:s[i*3],g:s[i*3+1],b:s[i*3+2],sharpness:0,midpoint:.5};e.nodes.push(l)}t.sortAndUpdateRange()},t.getNodeValue=(n,r)=>n<0||n>=e.nodes.length?(Ps("Index out of range!"),-1):(r[0]=e.nodes[n].x,r[1]=e.nodes[n].r,r[2]=e.nodes[n].g,r[3]=e.nodes[n].b,r[4]=e.nodes[n].midpoint,r[5]=e.nodes[n].sharpness,1),t.setNodeValue=(n,r)=>{if(n<0||n>=e.nodes.length)return Ps("Index out of range!"),-1;const a=e.nodes[n].x;return e.nodes[n].x=r[0],e.nodes[n].r=r[1],e.nodes[n].g=r[2],e.nodes[n].b=r[3],e.nodes[n].midpoint=r[4],e.nodes[n].sharpness=r[5],a!==r[0]?t.sortAndUpdateRange():t.modified(),1},t.getNumberOfAvailableColors=()=>e.indexedLookup&&t.getSize()?t.getSize():e.tableSize?e.tableSize:16777216,t.getIndexedColor=(n,r)=>{const a=t.getSize();if(a>0&&n>=0){const o=[];t.getNodeValue(n%a,o);for(let i=0;i<3;++i)r[i]=o[i+1];r[3]=1;return}const s=t.getNanColorByReference();r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=1},t.fillFromDataPointer=(n,r)=>{if(!(n<=0||!r)){t.removeAllPoints();for(let a=0;a<n;a++)t.addRGBPoint(r[a*4],r[a*4+1],r[a*4+2],r[a*4+3])}},t.setMappingRange=(n,r)=>{const a=[n,r],s=t.getRange();if(s[1]===a[1]&&s[0]===a[0])return;if(a[1]===a[0]){Ps("attempt to set zero width color range");return}const o=(a[1]-a[0])/(s[1]-s[0]),i=a[0]-s[0]*o;for(let l=0;l<e.nodes.length;++l)e.nodes[l].x=e.nodes[l].x*o+i;e.mappingRange[0]=a[0],e.mappingRange[1]=a[1],t.modified()},t.adjustRange=n=>{const r=t.getRange(),a=[];r[0]<n[0]?(t.getColor(n[0],a),t.addRGBPoint(n[0],a[0],a[1],a[2])):(t.getColor(r[0],a),t.addRGBPoint(n[0],a[0],a[1],a[2])),r[1]>n[1]?(t.getColor(n[1],a),t.addRGBPoint(n[1],a[0],a[1],a[2])):(t.getColor(r[1],a),t.addRGBPoint(n[1],a[0],a[1],a[2])),t.sortAndUpdateRange();for(let s=0;s<e.nodes.length;)e.nodes[s].x>=n[0]&&e.nodes[s].x<=n[1]?e.nodes.splice(s,1):++s;return 1},t.estimateMinNumberOfSamples=(n,r)=>{const a=t.findMinimumXDistance();return Math.ceil((r-n)/a)},t.findMinimumXDistance=()=>{if(e.nodes.length<2)return-1;let n=Number.MAX_VALUE;for(let r=0;r<e.nodes.length-1;r++){const a=e.nodes[r+1].x-e.nodes[r].x;a<n&&(n=a)}return n},t.mapScalarsThroughTable=(n,r,a,s)=>{if(t.getSize()===0){RFe("Transfer Function Has No Points!");return}e.indexedLookup?t.mapDataIndexed(n,r,a,s):t.mapData(n,r,a,s)},t.mapData=(n,r,a,s)=>{if(t.getSize()===0){_Fe("Transfer Function Has No Points!");return}const o=Math.floor(t.getAlpha()*255+.5),i=n.getNumberOfTuples(),l=n.getNumberOfComponents(),c=r.getData(),u=n.getData(),f=[];if(a===Pp.RGBA)for(let d=0;d<i;d++){const p=u[d*l+s];t.getColor(p,f),c[d*4]=Math.floor(f[0]*255+.5),c[d*4+1]=Math.floor(f[1]*255+.5),c[d*4+2]=Math.floor(f[2]*255+.5),c[d*4+3]=o}if(a===Pp.RGB)for(let d=0;d<i;d++){const p=u[d*l+s];t.getColor(p,f),c[d*3]=Math.floor(f[0]*255+.5),c[d*3+1]=Math.floor(f[1]*255+.5),c[d*3+2]=Math.floor(f[2]*255+.5)}if(a===Pp.LUMINANCE)for(let d=0;d<i;d++){const p=u[d*l+s];t.getColor(p,f),c[d]=Math.floor(f[0]*76.5+f[1]*150.45+f[2]*28.05+.5)}if(a===Pp.LUMINANCE_ALPHA)for(let d=0;d<i;d++){const p=u[d*l+s];t.getColor(p,f),c[d*2]=Math.floor(f[0]*76.5+f[1]*150.45+f[2]*28.05+.5),c[d*2+1]=o}},t.applyColorMap=n=>{const r=JSON.stringify(e.colorSpace);n.ColorSpace&&(e.colorSpace=Ia[n.ColorSpace.toUpperCase()],e.colorSpace===void 0&&(Ps(`ColorSpace ${n.ColorSpace} not supported, using RGB instead`),e.colorSpace=Ia.RGB));let a=r!==JSON.stringify(e.colorSpace);const s=a||JSON.stringify(e.nanColor);if(n.NanColor)for(e.nanColor=[].concat(n.NanColor);e.nanColor.length<4;)e.nanColor.push(1);a=a||s!==JSON.stringify(e.nanColor);const o=a||JSON.stringify(e.nodes);if(n.RGBPoints){const c=n.RGBPoints.length;e.nodes=[];const u=.5,f=0;for(let d=0;d<c;d+=4)e.nodes.push({x:n.RGBPoints[d],r:n.RGBPoints[d+1],g:n.RGBPoints[d+2],b:n.RGBPoints[d+3],midpoint:u,sharpness:f})}const i=t.sortAndUpdateRange(),l=!i&&(a||o!==JSON.stringify(e.nodes));return l&&t.modified(),i||l}}const NFe={clamping:!0,colorSpace:Ia.RGB,hSVWrap:!0,scale:O4.LINEAR,nanColor:null,belowRangeColor:null,aboveRangeColor:null,useAboveRangeColor:!1,useBelowRangeColor:!1,allowDuplicateScalars:!1,table:null,tableSize:0,buildTime:null,nodes:null,discretize:!1,numberOfValues:256};function M4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,NFe,n),rv.extend(t,e,n),e.table=[],e.nodes=[],e.nanColor=[.5,0,0,1],e.belowRangeColor=[0,0,0,1],e.aboveRangeColor=[1,1,1,1],e.buildTime={},A.obj(e.buildTime),A.get(t,e,["buildTime","mappingRange"]),A.setGet(t,e,["useAboveRangeColor","useBelowRangeColor","colorSpace","discretize","numberOfValues"]),A.setArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"],4),A.getArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"]),LFe(t,e)}const BFe=A.newInstance(M4,"vtkColorTransferFunction");var FFe={newInstance:BFe,extend:M4,...k4};const $Fe={id:"drawArea"},UFe={__name:"DrawArea",setup(t){const e=P(!1),n=P(),r=P(),a=async()=>{const o=await xMe(r.value);console.log("project files : ",o),n.value=o,mt.files=o;const i=await ho.get(`${o.nifti_url}/${o.all_nifties[0]}`,{responseType:"blob"}),l=new File([i.data],"nifti.nii.gz",{type:"application/gzip"}),c=await B1(l);mt.series=[structuredClone(c.image),structuredClone(c.image),structuredClone(c.image)];const u=R1.convertItkToVtkImage(c.image);mt.activeTool="range",mt.imageData=u,e.value=!0},s=async()=>{const o=await kMe(r.value);let i=[];for(const c of o)i.includes(c.label_type)||i.push(c.label_type);mt.diagnoses=i.map(c=>({name:c,checked:!0,children:o.filter(u=>u.label_type==c).map(u=>({...u,checked:!0,opacity:50}))}));const l=Object.keys(n.value.all_result_nifties);for(const c of l){const u=await await ho.get(`/${n.value.all_result_nifties[c]}`,{responseType:"blob"}),f=new File([u.data],`${c}.nii.gz`,{type:"application/gzip"}),d=await B1(f),p=R1.convertItkToVtkImage(d.image);p.setDimensions(...mt.imageData.getDimensions()),p.setSpacing(...mt.imageData.getSpacing()),p.setOrigin(...mt.imageData.getOrigin()),p.setDirection(...mt.imageData.getDirection());const h=[0,1,2].map(y=>{const m=jF.newInstance(),b=zF.newInstance();m.setMapper(b),b.setInputData(p);const C=FFe.newInstance(),S=kFe.newInstance();return S.addPoint(0,0),m.getProperty().setRGBTransferFunction(0,C),m.getProperty().setPiecewiseFunction(0,S),m.getProperty().setUseLookupTableScalarRange(!0),m.getProperty().setInterpolationTypeToNearest(),m.getProperty().setOpacity(1),{actor:m,mapper:b,cfun:C,ofun:S}}),g=o.filter(y=>y.label_type==c).map(y=>({...y,opacity:.5,checked:!0}));mt.labelMaps=[...mt.labelMaps,{name:c,sliceModes:h,children:g}]}};return pe(()=>mt.imageData,async()=>{s()}),pe(r,()=>{a()}),at(()=>{const o=location.pathname.replace(/\/+$/,"").split("/").pop();o&&(r.value=o)}),(o,i)=>(V(),z("div",$Fe,[e.value?(V(),ae(MNe,{key:0})):ee("",!0)]))}},AFe={id:"rightAreaTools"},WFe=["onClick"],IFe={__name:"Tools",setup(t){return P(.5),(e,n)=>(V(),z("div",AFe,[(V(!0),z(Ue,null,gt(v(ODe),r=>(V(),z("div",{class:U(["tool-item",{active:v(mt).activeTool===r.name}]),onClick:()=>v(mt).setActiveTool(r.name)},[j(Qn,{icon:r.icon,style:Pe({"font-size":r.name==="zoom"?"12px":""})},null,8,["icon","style"]),ee("",!0)],10,WFe))),256))]))}},PFe=new Il;PFe.get("csrftoken");const GFe=async t=>(await ho.get("/api/get_dicom_image",{params:{image_report_id:t}})).data,zFe=async(t,e)=>{let n=new FormData;return n.append("image_report_id",t),n.append("tooth_spacing",e),(await ho.post("/api/implant_analysis",n)).data},HFe=H("div",{class:"titles"},[H("h1",null,"Order Implantology"),H("h2",null,"Please select the tooth pitch from the tooth chart below.")],-1),KFe=["src"],jFe={class:"tooth-chart-illnesses-by-tooth"},YFe={class:"teeth"},qFe=["onClick"],XFe=["src"],ZFe={class:"tooth-number"},sn="",JFe={__name:"ToothSortingView",setup(t){const e=P([{toothNumber:18,image:`${sn}/static/img/teeth/tooth_18.png`,isActive:!1},{toothNumber:17,image:`${sn}/static/img/teeth/tooth_17.png`,isActive:!1},{toothNumber:16,image:`${sn}/static/img/teeth/tooth_16.png`,isActive:!1},{toothNumber:15,image:`${sn}/static/img/teeth/tooth_15.png`,isActive:!1},{toothNumber:14,image:`${sn}/static/img/teeth/tooth_14.png`,isActive:!1},{toothNumber:13,image:`${sn}/static/img/teeth/tooth_13.png`,isActive:!1},{toothNumber:12,image:`${sn}/static/img/teeth/tooth_12.png`,isActive:!1},{toothNumber:11,image:`${sn}/static/img/teeth/tooth_11.png`,isActive:!1},{toothNumber:21,image:`${sn}/static/img/teeth/tooth_21.png`,isActive:!1},{toothNumber:22,image:`${sn}/static/img/teeth/tooth_22.png`,isActive:!1},{toothNumber:23,image:`${sn}/static/img/teeth/tooth_23.png`,isActive:!1},{toothNumber:24,image:`${sn}/static/img/teeth/tooth_24.png`,isActive:!1},{toothNumber:25,image:`${sn}/static/img/teeth/tooth_25.png`,isActive:!1},{toothNumber:26,image:`${sn}/static/img/teeth/tooth_26.png`,isActive:!1},{toothNumber:27,image:`${sn}/static/img/teeth/tooth_27.png`,isActive:!1},{toothNumber:28,image:`${sn}/static/img/teeth/tooth_28.png`,isActive:!1},{toothNumber:48,image:`${sn}/static/img/teeth/tooth_48.png`,isActive:!1},{toothNumber:47,image:`${sn}/static/img/teeth/tooth_47.png`,isActive:!1},{toothNumber:46,image:`${sn}/static/img/teeth/tooth_46.png`,isActive:!1},{toothNumber:45,image:`${sn}/static/img/teeth/tooth_45.png`,isActive:!1},{toothNumber:44,image:`${sn}/static/img/teeth/tooth_44.png`,isActive:!1},{toothNumber:43,image:`${sn}/static/img/teeth/tooth_43.png`,isActive:!1},{toothNumber:42,image:`${sn}/static/img/teeth/tooth_42.png`,isActive:!1},{toothNumber:41,image:`${sn}/static/img/teeth/tooth_41.png`,isActive:!1},{toothNumber:31,image:`${sn}/static/img/teeth/tooth_31.png`,isActive:!1},{toothNumber:32,image:`${sn}/static/img/teeth/tooth_32.png`,isActive:!1},{toothNumber:33,image:`${sn}/static/img/teeth/tooth_33.png`,isActive:!1},{toothNumber:34,image:`${sn}/static/img/teeth/tooth_34.png`,isActive:!1},{toothNumber:35,image:`${sn}/static/img/teeth/tooth_35.png`,isActive:!1},{toothNumber:36,image:`${sn}/static/img/teeth/tooth_36.png`,isActive:!1},{toothNumber:37,image:`${sn}/static/img/teeth/tooth_37.png`,isActive:!1},{toothNumber:38,image:`${sn}/static/img/teeth/tooth_38.png`,isActive:!1}]);P(-1),P(99),P(-1),P(99),P("bottom"),P("bottom");const n=P(""),r=async()=>{let a=[];e.value.filter(l=>l.isActive===!0).map(l=>a.push(l.toothNumber));let s=`${a[0]}-${a[a.length-1]}`,o=location.pathname.replace(/\/+$/,"").split("/").pop();console.log(s," tooth-spacing -- ",a," teeth array",a.length),[0].includes(a.length)&&S1("At least 1 teeth must be selected"),(await zFe(o,s)).status&&(Ya.toothSortingVisible=!1,S1("Analysis has started!"))};return at(async()=>{const a=location.pathname.replace(/\/+$/,"").split("/").pop(),s=await GFe(a);n.value=s.image_path}),(a,s)=>{const o=et("el-button"),i=et("el-dialog");return V(),ae(i,{class:"tooth-sorting-modal",modelValue:v(Ya).toothSortingVisible,"onUpdate:modelValue":s[0]||(s[0]=l=>v(Ya).toothSortingVisible=l),title:"",width:"810"},{default:Z(()=>[HFe,H("img",{class:"resimDumen",src:`${n.value}`,alt:""},null,8,KFe),H("div",jFe,[H("div",YFe,[(V(!0),z(Ue,null,gt(e.value,(l,c)=>(V(),z("div",{class:U({tooth:!0,active:l.isActive}),onClick:()=>{if(c<16)for(let u=16;u<32;u++)e.value[u].isActive=!1;else for(let u=0;u<16;u++)e.value[u].isActive=!1;e.value[c].isActive=!e.value[c].isActive}},[H("img",{src:l.image,alt:""},null,8,XFe),H("span",ZFe,Te(l.toothNumber),1)],10,qFe))),256))])]),j(o,{class:"order-report-btn",onClick:r},{default:Z(()=>[Ct("Order Report")]),_:1})]),_:1},8,["modelValue"])}}},QFe=new Il;QFe.get("csrftoken");const e$e=async t=>(await ho.get("/api/get_analysis_types/")).data,t$e=H("div",{class:"titles"},[H("h1",{style:{"font-size":"16px"}},"Choose Analysis")],-1),n$e={__name:"ChooseAnalysisView",setup(t){const e=P(),n=()=>{console.log(e.value),e.value===4&&(Ya.chooseAnalysisVisible=!1,Ya.toothSortingVisible=!0)};return(r,a)=>{const s=et("el-option"),o=et("el-select"),i=et("el-form-item"),l=et("el-button"),c=et("el-dialog");return V(),ae(c,{class:"tooth-sorting-modal",modelValue:v(Ya).chooseAnalysisVisible,"onUpdate:modelValue":a[1]||(a[1]=u=>v(Ya).chooseAnalysisVisible=u),title:"",width:"510"},{default:Z(()=>[t$e,j(i,{prop:"",label:"Analysis"},{default:Z(()=>[j(o,{modelValue:e.value,"onUpdate:modelValue":a[0]||(a[0]=u=>e.value=u),placeholder:"Analysis"},{default:Z(()=>[(V(!0),z(Ue,null,gt(v(Ya).analysis_types,u=>(V(),ae(s,{value:u.id,label:u.name},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])]),_:1}),j(l,{class:"order-report-btn",onClick:n},{default:Z(()=>[Ct("Choose")]),_:1})]),_:1},8,["modelValue"])}}},r$e=new Il;r$e.get("csrftoken");const a$e=async t=>(await ho.get(`/api/get_dicom_reports/${t}/`)).data,s$e={__name:"App",setup(t){const e=async()=>{const r=await e$e();Ya.analysis_types=r.analysis_types},n=()=>{const r=location.pathname.replace(/\/+$/,"").split("/").pop();setInterval(async()=>{const a=await a$e(r);Ng.dicomReports=a.all_reports},1500)};return at(()=>{e(),n()}),(r,a)=>(V(),z(Ue,null,[j(zEe),j(ZEe),j(tke),j(Yke),j(IFe),j(UFe),j(JFe),j(n$e)],64))}},R4=CD(s$e);R4.use(FEe);R4.mount("#app");
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
