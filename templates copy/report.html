{% load static %}
{% load i18n %}
{% block customCss %}
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<title>{{specs.title}} - Report</title>
<link rel="icon" type="image/png" href="{% static specs.favicon %}" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
{% endblock %}

{% block content %}
<style>
    body {
        color: #111;
    }
    strong.list-strong::after {
        content: ',';
    }

    strong.list-strong:last-child::after {
        content: '.';
    }

    strong.list-strong:last-child::before {
        content: {% if "/tr/" in request.path %} 've ' {% else %} 'and ' {% endif %};
        font-weight: normal;
    }

    strong.list-strong:nth-last-child(2)::after {
        content: ''
    }

    strong.list-strong-normal::after {
        content: ',';
    }

    strong.list-strong-normal:last-child::after {
        content: '';
    }

    footer a {
        text-decoration: none;
        color: #111;
    }

    ul li:not(:last-child) {
        margin-bottom: 20px;
    }
    h2{
        margin: 35px 0 30px 0;
        font-size: 24px;
    }
    h2 span {
        font-size: 18px;
    }
    .color-d-item {
        width: 20%;
    }
    .color-circle {
        width: 14px;
        height: 14px;
        border-radius: 50%;
    }
</style>
<div class="container">
    <div class="logos d-flex justify-content-between py-4">
        <a>
             <img style="cursor: pointer; max-width: 100%;" src="{% static specs.report_page_title_banner %}" alt="logo" height="60">
        </a>
        {% if clinic_logo %}
        <img style="max-width: 100%;" src="{% if clinic_logo %}{{clinic_logo}}{%else%}{%endif%}" alt="logo"  height="60">
        {% endif %}
    </div>
    {% if info_options_dict.patient_info_option %}
    <div class="patient-section mb-5">
        <h2 class="border-bottom py-3">{{patient_infos.first_name}} {{patient_infos.last_name}} </h2>
        <div class="row flex-wrap py-2">
            <div class="col d-flex flex-column" style="gap: 10px;">
                <span class="d-flex align-items-center">
                    <img style="cursor: pointer;" src="{% static 'img/charge-icon.svg' %}" class="me-2" alt="icon"
                        height="16">
                    {% trans 'Date of Birth' %}
                </span>
                <span style="font-weight: 600;">{% if patient_infos.date_of_birth %} {{patient_infos.date_of_birth}} {% else %} - {% endif %}</span>
            </div>
            <div class="col d-flex flex-column" style="gap: 10px;">
                <span class="d-flex align-items-center">
                    <img style="cursor: pointer;" src="{% static 'img/charge-icon.svg' %}" class="me-2" alt="icon"
                        height="16">
                    Email
                </span>
                <span style="font-weight: 600;">{% if patient_infos.email %}{{patient_infos.email}}{% else %} - {% endif %}</span>
            </div>
            <div class="col d-flex flex-column" style="gap: 10px;">
                <span class="d-flex align-items-center">
                    <img style="cursor: pointer;" src="{% static 'img/charge-icon.svg' %}" class="me-2" alt="icon"
                        height="16">
                    {% trans 'Phone Number' %}
                </span>
                <span style="font-weight: 600;">{% if patient_infos.phone %}{{patient_infos.phone}}{% else %} - {% endif %}</span>
            </div>
            <div class="col d-flex flex-column" style="gap: 10px;">
                <span class="d-flex align-items-center">
                    <img style="cursor: pointer;" src="{% static 'img/charge-icon.svg' %}" class="me-2" alt="icon"
                        height="16">
                    {% trans 'Gender' %}
                </span>
                <span style="font-weight: 600;">{% if patient_infos.gender == "Male" %}{% trans 'Male' %} {% else %} {% trans 'Female' %} {% endif %}</span>
            </div>
            <div class="col d-flex flex-column" style="gap: 10px;">
                <span class="d-flex align-items-center">
                    <img style="cursor: pointer;" src="{% static 'img/charge-icon.svg' %}" class="me-2" alt="icon"
                        height="16">
                    {% trans 'File No' %}
                </span>
                <span style="font-weight: 600;">{% if patient_infos.file_no %}{{patient_infos.file_no}}{%else%}-{%endif%}</span>
            </div>
            <div class="col d-flex flex-column" style="gap: 10px;">
                <span class="d-flex align-items-center">
                    <img style="cursor: pointer;" src="{% static 'img/charge-icon.svg' %}" class="me-2" alt="icon"
                        height="16">
                    ID
                </span>
                <span style="font-weight: 600;">{{patient_infos.id}}</span>
            </div>
        </div>
    </div>
    {% endif %}
    {% if info_options_dict.doctor_note_info_option %}
    <div class="doctor-section">
        <h2 class="border-bottom py-3">Dr. {{doctor_notes_infos.doctor_full_name}} {% trans 'Notes' %}</h2>
        <p class="fs-6">{% if doctor_notes_infos.doctor_note %}{{doctor_notes_infos.doctor_note}}{% else %} {% trans 'The doctor did not create a note' %} {% endif %}</p>
        <small><p class="text-muted">{{doctor_notes_infos.image_report_created_date}}</p></small>
    </div>
    {% endif %}
    {% if info_options_dict.radiography_info_option %}
    <div class="radiography-section">
        <h2 class="mb-3 mt-5">{% trans 'Radiography' %}</h2>
        <img src="{{image_report_infos.image_reports_image}}" class="d-block img-fluid mx-auto w-50" alt="">
    </div>
    {% endif %}
    {% if info_options_dict.drawed_radiography_info_option %}
    <div class="radiography-section">
        <h2 class="mb-3 mt-5">{% trans 'Drawed Radiography' %}</h2>
        <img src="/{{image_report_infos.drawed_image_reports_image}}" class="d-block img-fluid mx-auto w-50" alt="">
    </div>

    <div class="my-color-diagnosis-container d-flex flex-wrap my-2">
        <!-- döngü başlangıcı -->


        {% for item in labels_colors_on_radiography %}
            <div class="color-d-item d-flex align-items-center p-1">
                <div class="color-circle me-2" style="background-color: {{item.color}};"></div>
                <span>
                    {% if arabic_status %} 
                        {{item.ar_name}} 
                        {% else %} 
                            {%if request.LANGUAGE_CODE == "tr" %}
                                {{item.tr_name}}
                            {%elif request.LANGUAGE_CODE == "uz" %}
                                {{item.uz_name}}
                            {%elif request.LANGUAGE_CODE == "ru" %}
                                {{item.ru_name}}
                            {%elif request.LANGUAGE_CODE == "nl" %}
                                {{item.nl_name}}
                            {% else %} 
                                {{item.name}} 
                            {%endif%}
                    {% endif %}</span>
            </div>
        {% endfor %}
        <!-- döngü bitişi -->
    </div>
    {% endif %}
    {% if dental_dict %}
        <div class="group-section">
            <h2 class="border-bottom py-3">
                {% trans 'Dentition' %}
                <span style="font-weight: normal;">
                    <!-- {% for tooth in dental_dict.missing_tooth.value.label_list %}
                        <strong class="list-strong">{{tooth}}</strong>
                    {% endfor %} -->
                </span>
            </h2>
            <ul class="fs-6">
                {% for key, value in dental_dict.items %}
                    <li>
                        <strong>
                            {%if request.LANGUAGE_CODE == "tr" %}
                                {{value.value.label_tr_name}}
                            {%elif request.LANGUAGE_CODE == "ru" %}
                                {{value.value.label_ru_name}}
                            {%elif request.LANGUAGE_CODE == "uz" %}
                                {{value.value.label_uz_name}}
                            {%elif request.LANGUAGE_CODE == "nl" %}
                                {{value.value.label_nl_name}}
                            {%else%}
                                 {{value.name}}
                            {%endif%}:</strong> 
                            {%if value.value.text_before == None %}
                            {%else%}
                                {{value.value.text_before}}
                            {%endif%}
                        {% for tooth in value.value.label_list %}
                                <strong class="list-strong-normal">{{tooth}}</strong>
                            {% endfor %}
                        {%if value.value.text_after == None %}
                        {%else%}
                            {{value.value.text_after}}
                        {%endif%}
                    </li>
                {% endfor %}

            </ul>
        </div>
    {% else %}
    {% endif %}
    {% for label_type, labe_type_tr_and_illnesses in Sections.items %}
        <div class="group-section">
            <h2 class="border-bottom py-3">
                {%if request.LANGUAGE_CODE == "tr" %}
                    {{labe_type_tr_and_illnesses.label_type_tr}} 
                {%elif request.LANGUAGE_CODE == "uz" %}
                    {{labe_type_tr_and_illnesses.label_type_uz}} 
                {%elif request.LANGUAGE_CODE == "ru" %}
                    {{labe_type_tr_and_illnesses.label_type_ru}}
                {%elif request.LANGUAGE_CODE == "nl" %}
                    {{labe_type_tr_and_illnesses.label_type_nl}}
                {% else %} 
                    {{label_type}} 
                {%endif%}</h2>
            <ul class="fs-6">
                {% for label, content in labe_type_tr_and_illnesses.illnesses.items %}
                    <li>
                        <strong>
                            {%if request.LANGUAGE_CODE == "tr" %}
                                {{content.label_tr_name}} 
                            {%elif request.LANGUAGE_CODE == "uz" %}
                                {{content.label_uz_name}} 
                            {%elif request.LANGUAGE_CODE == "ru" %}
                                {{content.label_ru_name}} 
                            {%elif request.LANGUAGE_CODE == "nl" %}
                                {{content.label_nl_name}} 
                            {% else %}
                                {{label}}
                            {%endif%}:</strong>{% if content.text_before %} {{content.text_before}} {% else %} {% endif %}
                        {% for tooth_number in content.label_list %}
                            <strong class="list-strong-normal">{{tooth_number}}</strong>
                        {% endfor %}
                        {{content.text_after}}
                    </li>
                {% endfor %}


            </ul>
        </div>
    {% endfor %}

    {% if info_options_dict.view_analysis.bjork %}
        <h2 class="mb-3 mt-5">{{view_analysis_returned_dict.bjork.name}}</h2>
        <table id="report-table" class="table text-black">
            <thead>
            <tr>
                <th scope="col">Descriptor</th>
                <th scope="col">Meas</th>
                <th scope="col">Type</th>
                <th scope="col">Sd</th>
                <th scope="col">Patient</th>
            </tr>
            </thead>
            <tbody>
            {% for key, results in view_analysis_returned_dict.bjork.value.items %}
                {% for result, angle in results.items %}
                    <tr>
                        <td>{{result}}</td>
                        <td>{{angle.1}}</td>
                        <td>{{angle.2}}</td>
                        <td>{{angle.3}}</td>
                        <td>{{angle.4}}</td>
                    </tr>
                {% endfor %}
            {% endfor %}
            <!-- <tr data-row-color-type="group">
              <td colspan="8">MAX.TO MAND RELATIONSHIP</td>
            </tr> -->
            </tbody>
        </table>
    {% endif %}

    {% if info_options_dict.view_analysis.skeletal %}
        <h2 class="mb-3 mt-5">{{view_analysis_returned_dict.skeletal.name}}</h2>
        <table id="report-table" class="table text-black">
            <thead>
            <tr>
                <th scope="col">Descriptor</th>
                <th scope="col">Meas</th>
                <th scope="col">Type</th>
                <th scope="col">Sd</th>
                <th scope="col">Patient</th>
            </tr>
            </thead>
            <tbody>
            {% for key, results in view_analysis_returned_dict.skeletal.value.items %}
                {% for result, angle in results.items %}
                    <tr>
                        <td>{{result}}</td>
                        <td>{{angle.1}}</td>
                        <td>{{angle.2}}</td>
                        <td>{{angle.3}}</td>
                        <td>{{angle.4}}</td>
                    </tr>
                {% endfor %}
            {% endfor %}
            <!-- <tr data-row-color-type="group">
              <td colspan="8">MAX.TO MAND RELATIONSHIP</td>
            </tr> -->
            </tbody>
        </table>
    {% endif %}

    {% if info_options_dict.view_analysis.withanalysis %}
        <h2 class="mb-3 mt-5">{{view_analysis_returned_dict.withanalysis.name}}</h2>
        <table id="report-table" class="table text-black">
            <thead>
            <tr>
                <th scope="col">Descriptor</th>
                <th scope="col">Meas</th>
                <th scope="col">Type</th>
                <th scope="col">Sd</th>
                <th scope="col">Patient</th>
            </tr>
            </thead>
            <tbody>
            {% for key, results in view_analysis_returned_dict.withanalysis.value.items %}
                {% for result, angle in results.items %}
                    <tr>
                        <td>{{result}}</td>
                        <td>{{angle.1}}</td>
                        <td>{{angle.2}}</td>
                        <td>{{angle.3}}</td>
                        <td>{{angle.4}}</td>
                    </tr>
                {% endfor %}
            {% endfor %}
            <!-- <tr data-row-color-type="group">
              <td colspan="8">MAX.TO MAND RELATIONSHIP</td>
            </tr> -->
            </tbody>
        </table>
    {% endif %}

    {% if info_options_dict.view_analysis.downsanalysis %}
        <h2 class="mb-3 mt-5">{{view_analysis_returned_dict.downsanalysis.name}}</h2>
        <table id="report-table" class="table text-black">
            <thead>
            <tr>
                <th scope="col">Descriptor</th>
                <th scope="col">Meas</th>
                <th scope="col">Type</th>
                <th scope="col">Sd</th>
                <th scope="col">Patient</th>
            </tr>
            </thead>
            <tbody>
            {% for key, results in view_analysis_returned_dict.downsanalysis.value.items %}
                {% for result, angle in results.items %}
                    <tr>
                        <td>{{result}}</td>
                        <td>{{angle.1}}</td>
                        <td>{{angle.2}}</td>
                        <td>{{angle.3}}</td>
                        <td>{{angle.4}}</td>
                    </tr>
                {% endfor %}
            {% endfor %}
            <!-- <tr data-row-color-type="group">
              <td colspan="8">MAX.TO MAND RELATIONSHIP</td>
            </tr> -->
            </tbody>
        </table>
    {% endif %}

    {% if info_options_dict.treatment_plan_info_option %}
    <div class="group-section">
        <h2 class="border-bottom py-3">{% trans 'Treatments Plans' %}</h2>
        <ul class="fs-6">
            {% if treatment_plans %}
                {% for plan in treatment_plans %}
                    {{ plan|safe }}
                {% endfor %}
            {% else %}
                {% trans 'You have not created a treatment plan.' %}
            {% endif %}
        </ul>
    </div>
    {% endif %}
    {% if image_report_infos.drawed_implant_crown_image_reports_image %}
    <div class="radiography-section">
        <img src="/{{image_report_infos.drawed_implant_crown_image_reports_image}}" class="d-block img-fluid mx-auto w-50" alt="">
    </div>
    {% endif %}
    {% if info_options_dict.signature_option %}
    <div class="signature-section">
        <div class="my-3">
            <a>
                <img src="{{signature_infos.signature}}" alt="" class="d-block ms-auto" style="width: 150px;height: 100px;">
            </a>
        </div>
    </div>
    {% endif %}
    <footer class="d-flex flex-wrap justify-content-between my-4">
        <img style="cursor: pointer;" src="{% static specs.report_page_title_banner %}" class="img-fluid" width="200"
            alt="logo">
        <a href="{{specs.website_link}}">{{specs.website_name}}</a>
    </footer>
</div>



{% endblock %}

{% block customJs %}


<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<script src="{% static 'js/app.js' %}"></script> -->

{% endblock %}