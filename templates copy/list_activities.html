{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% block customCss %}
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'css/fontawesome.css' %}">
    <link rel="stylesheet" href="{% static 'css/patients.css' %}">
    <link rel="stylesheet" href="{% static 'css/patients_exstra.css' %}">
    <link rel="stylesheet" href="{% static 'css/datatable.css' %}">
    <script src="{% static 'js/jquery.js' %}"></script>
    <title>{{specs.title}} - {% trans 'Kullanıcılar' %}</title>
    <link rel="icon" type="image/png" href="{% static specs.favicon %}" />
    <link rel="stylesheet" href="{% static 'css/dropzone.css' %}">
    <style>
    body.dark [name="users_length"], body.dark #users_filter input{
        color:white
    }
    body.dark [name="users_length"] option {
        background:black;
    }
    body.dark .fa-pencil:hover{
        color: black;
    }
    .dataTables_length {
        font-size: 12px;
        margin-right: 10px;
        width: 80%;
    }

    .dataTables_length label {
        display: inline-block;
        margin-bottom: 0;
    }

    .dataTables_length select {
        height: 26px;
        padding: 2px 6px;
        font-size: 12px;
    }
    </style>

{% endblock %}
{% block headerButtons %}
<!--<button class="custom transparent blue-hover text-light" data-open-modal-pk="modal-radyografy-upload">-->
<!--    <i class="fa-solid fa-upload" style="pointer-events: none;"></i>-->
<!--    <span style="pointer-events: none;">Upload Radiograpfy</span>-->
<!--</button>-->
{% endblock %}

{% block content %}

<div id="modal-delete-user" class="modal-container">
    <div class="modal-box">
        <div class="modal-box__close">
            <div class="close-icon" data-modal-close>
                <i class="fa-solid fa-xmark"></i>
            </div>
        </div>
        <div class="modal-big-icon">
            <i class="fa-regular fa-trash-can shadow"></i>
        </div>
        <p class="main-text w-75 mx-auto text-center">{% trans 'Are you sure you want to delete the user?' %}</p>
        <div class="modal-container__buttons d-flex justify-content-center">
            <button class="custom yes" data-btn-operation="delete-user">{% trans 'Yes' %}</button>
            <button class="custom no" data-modal-close>{% trans 'No' %}</button>
        </div>
    </div>
</div>

<div id="modal-agent-keys" class="modal-container">
    <div class="modal-box">
        <div class="modal-box__close">
            <div class="close-icon" data-modal-close>
                <i class="fa-solid fa-xmark"></i>
            </div>
        </div>
        <div class="modal-big-icon">
            <i class="fa-solid fa-key shadow"></i>
        </div>
        <div>
            <label>User Api Key</label>
            <div class="d-flex gap-2 align-items-center">
                <input id="user_api_key_input" type="text" value="" class="mb-0" style="width: 300px;" readonly>
                <button id="copy_user_api_key" type="button" style="background-color: #0B1536; font-size: 15px; width: 100px;" class="btn btn-primary h-100">Copy</button>
            </div>

            <label>Company Api Key</label>
            <div class="d-flex gap-2 align-items-center">
                <input id="company_api_key_input" type="text" value="" class="mb-0" style="width: 300px;" readonly>
                <button id="copy_company_api_key" type="button" style="background-color: #0B1536; font-size: 15px; width: 100px;" class="btn btn-primary h-100">Copy</button>
            </div>
            
        </div>
    </div>
</div>

    <main class="position-relative" style="height: calc(100vh - 110px);">
        <!-- veri varsa d-none class kaldır, yoksa d-none kalsın -->
        <div class="views container">
            <div class="heading-and-items container-fluid d-flex justify-content-between align-items-center my-3">
                <h1 class="m-0">{% trans 'Users' %}</h1>
                <div class="heading-and-items_right d-flex">
                </div>
            </div>
            <div id="patients-table-view" class="patient-view-container container-fluid mt-3 mb-5" style="display: block;">
                <div class="contents">
                    <table id="users" class="patients-table table table-borderless display" style="width: 100%;">
                        <thead>
                            <tr style="text-align-last: center;">
                                <th>{% trans 'Date' %}</th>
                                <th>{% trans 'Used Token' %}</th>
                                <th>{% trans 'Image Type' %}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for token_activity in token_activities %}
                                <tr data-user-id="{{token_activity.profile.user.id}}">
                                    <td>{{ token_activity.date }}</td>
                                    <td>{{ token_activity.used_token }}</td>
                                    <td>{{ token_activity.image_type }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            
        </div>
        {% csrf_token %}
        <!-- burada hiç veri yoksa d-none classını kaldır, veri varsa d-none kalacak -->
    </main>
{% endblock %}

{% block customJs %}
    <script src="{% static 'js/bootstrap.js' %}"></script>
    <script src="{% static 'js/datatable.js' %}"></script>
    <script src="{% static 'js/swiper.min.js' %}"></script>
    <script src="{% static 'js/dropzone.js' %}"></script>
    <script src="{% static 'js/sweatalert.js' %}"></script>
    <script src="{% static 'js/patients.js' %}"></script>
    <script src="{% static 'js/app.js' %}"></script>
    <script>
        var csrfmiddlewaretoken = $('input[name=csrfmiddlewaretoken]').val()
    </script>
<script>
    $(document).ready(function () {
        var mydatatable = $('#users').DataTable({
            columnDefs: [
                {% comment %} {orderable: false, targets: [6]} {% endcomment %}
            ],
            language: {
                lengthMenu: '_MENU_',
                zeroRecords: 'Aranan kriterlere uygun veri bulunamadı.',
                info: '_PAGE_ / _PAGES_ sayfa',
                infoEmpty: 'No records available',
                infoFiltered: '(filtered from _MAX_ total records)',
                "paginate": {
                    "next": "Next <i class='fa-solid fa-angle-right'></i>",
                    "previous": "<i class='fa-solid fa-angle-left'></i> Previous"
                }
    
            },
            lengthMenu: [[5, 10, 25, 50, -1], [5, 10, 25, 50, "Hepsi"]],
            
            initComplete: function () {
            }
        });
    });
</script>
    

{% endblock %}